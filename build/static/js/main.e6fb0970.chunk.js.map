{"version":3,"sources":["i18n.js","queries/system/auth.js","tools/cs_local_storage.js","tools/cs_error_codes.js","tools/authentication.js","components/settings/general/date_time/queries.js","components/organization/organization/queries.js","components/context/AppSettingsContext.js","components/context/OrganizationContext.js","queries/system/get_user.js","tools/user_tools.js","components/HasPermissionWrapper.js","components/home/home/queries.js","components/SiteWrapper.js","components/home/home/HomeHomeBase.jsx","components/home/home/HomeHome.jsx","components/automation/home/AutomationHomeItemButton.jsx","components/automation/home/AutomationHome.jsx","components/general/ContentCard.jsx","components/automation/queries.js","components/ui/ButtonBack.jsx","components/automation/AutomationBack.jsx","components/automation/account/subscription/credits/AutomationAccountSubscriptionCreditsBase.jsx","components/automation/AutomationTaskResultStatus.jsx","components/automation/account/subscription/credits/AutomationAccountSubscriptionCredits.jsx","components/automation/account/subscription/invoices/AutomationAccountSubscriptionInvoicesBase.jsx","components/automation/account/subscription/invoices/AutomationAccountSubscriptionInvoices.jsx","components/automation/account/subscription/invoices/yupSchema.js","components/ui/CSDatePicker.jsx","components/automation/account/subscription/invoices/AutomationAccountSubscriptionInvoicesForm.jsx","components/automation/account/subscription/invoices/AutomationAccountSubscriptionInvoicesAdd.jsx","components/automation/account/subscription/credits/yupSchema.js","components/automation/account/subscription/credits/AutomationAccountSubscriptionCreditForm.jsx","components/automation/account/subscription/credits/AutomationAccountSubscriptionCreditAdd.jsx","components/automation/account/subscription/mollie_collection/AutomationAccountSubscriptionMollieCollectionBase.jsx","components/automation/account/subscription/mollie_collection/AutomationAccountSubscriptionMollieCollections.jsx","components/automation/account/subscription/mollie_collection/yupSchema.js","components/automation/account/subscription/mollie_collection/AutomationAccountSubscriptionMollieCollectionForm.jsx","components/automation/account/subscription/mollie_collection/AutomationAccountSubscriptionMollieCollectionAdd.jsx","components/finance/FinanceMenu.jsx","components/finance/home/FinanceHome.jsx","components/finance/costcenters/queries.js","components/finance/costcenters/FinanceCostCentersBase.jsx","components/finance/costcenters/FinanceCostCenters.jsx","components/finance/costcenters/yupSchema.js","components/finance/costcenters/FinanceCostCenterAdd.jsx","components/finance/costcenters/FinanceCostCenterEdit.jsx","components/finance/glaccounts/queries.js","components/finance/glaccounts/FinanceGLAccountsBase.jsx","components/finance/glaccounts/FinanceGLAccounts.jsx","components/finance/glaccounts/yupSchema.js","components/finance/glaccounts/FinanceGLAccountAdd.jsx","components/finance/glaccounts/FinanceGLAccountEdit.jsx","components/finance/invoices/tools.js","components/finance/invoices/FinanceInvoicesFilter.jsx","components/finance/invoices/FinanceInvoicesBase.jsx","components/ui/FinanceInvoiceStatus.jsx","components/finance/invoices/queries.js","tools/confirm_delete.js","components/finance/invoices/FinanceInvoices.jsx","tools/refresh_token_and_open_export_link.js","components/finance/invoices/edit/FinanceInvoiceEditBase.jsx","components/finance/invoices/edit/FinanceInvoiceItemAdd.jsx","components/finance/invoices/edit/FinanceInvoiceItemDelete.jsx","components/finance/invoices/edit/FinanceInvoiceItemEditForm.jsx","components/finance/invoices/edit/FinanceInvoiceItemEdit.jsx","components/finance/invoices/edit/FinanceInvoiceEditItems.jsx","plugin_config/tinymce.js","components/finance/invoices/edit/FinanceInvoiceEditTermsForm.jsx","components/finance/invoices/edit/FinanceInvoiceEditFooterForm.jsx","components/finance/invoices/edit/FinanceInvoiceEditNoteForm.jsx","components/finance/invoices/edit/FinanceInvoiceEditAdditional.jsx","components/finance/invoices/edit/FinanceInvoiceEditBalance.jsx","tools/date_tools.js","components/finance/invoices/edit/FinanceInvoiceEditOptionsForm.jsx","components/finance/invoices/edit/FinanceInvoiceEditOptions.jsx","components/finance/invoices/edit/FinanceInvoiceEditOrganization.jsx","components/finance/invoices/edit/FinanceInvoiceEditSummaryForm.jsx","components/finance/invoices/edit/FinanceInvoiceEditSummary.jsx","components/finance/invoices/edit/FinanceInvoiceEditToForm.jsx","components/finance/invoices/edit/FinanceInvoiceEditTo.jsx","components/finance/invoices/edit/FinanceInvoiceEditPaymentDelete.jsx","components/finance/invoices/edit/FinanceInvoiceEditPayments.jsx","components/finance/invoices/edit/FinanceInvoiceEdit.jsx","components/ui/BadgeBoolean.jsx","components/finance/invoices/groups/queries.js","components/finance/invoices/groups/FinanceInvoiceGroupsBase.jsx","components/finance/invoices/groups/FinanceInvoiceGroups.jsx","components/finance/invoices/groups/yupSchema.js","components/finance/invoices/groups/FinanceInvoiceGroupForm.jsx","components/finance/invoices/groups/FinanceInvoiceGroupAdd.jsx","components/finance/invoices/groups/FinanceInvoiceGroupEdit.jsx","components/finance/invoices/groups/defaults/FinanceInvoiceGroupDefaultForm.jsx","components/finance/invoices/groups/defaults/yupSchema.js","components/finance/invoices/groups/defaults/queries.js","components/finance/invoices/groups/defaults/FinanceInvoiceGroupDefaults.jsx","components/finance/invoices/payments/queries.js","components/finance/invoices/payments/yupSchema.js","components/finance/invoices/payments/FinanceInvoicePaymentBase.jsx","components/finance/invoices/payments/FinanceInvoicePaymentForm.jsx","components/finance/invoices/payments/FinanceInvoicePaymentAdd.jsx","components/finance/invoices/payments/FinanceInvoicePaymentEdit.jsx","components/finance/orders/tools.js","components/finance/orders/FinanceOrdersFilter.jsx","components/finance/orders/FinanceOrdersBase.jsx","components/finance/orders/FinanceOrderStatus.jsx","components/finance/orders/queries.js","components/finance/orders/FinanceOrderDelete.jsx","components/finance/orders/FinanceOrders.jsx","components/finance/payment_batches/tools.js","components/ui/BadgeFinancePaymentBatchStatus.jsx","components/finance/payment_batches/FinancePaymentBatchesBase.jsx","components/finance/payment_batches/queries.js","components/finance/payment_batches/FinancePaymentBatches.jsx","components/ui/FinancePaymentBatchCategory.jsx","components/finance/payment_batches/FinancePaymentBatchAddWhat.jsx","components/finance/payment_batches/FinancePaymentBatchViewBase.jsx","components/finance/payment_batches/FinancePaymentCollectionBatchForm.jsx","components/finance/payment_batches/FinancePaymentBatchView.jsx","components/finance/payment_batches/yupSchema.js","components/finance/payment_batches/FinancePaymentCollectionBatchAdd.jsx","components/finance/payment_batches/FinancePaymentCollectionBatchEdit.jsx","components/finance/payment_batch_categories/tools.js","components/finance/payment_batch_categories/FinancePaymentBatchCategoriesBase.jsx","components/finance/payment_batch_categories/queries.js","components/finance/payment_batch_categories/FinancePaymentBatchCategories.jsx","components/finance/payment_batch_categories/yupSchema.js","components/finance/payment_batch_categories/FinancePaymentBatchCategoryForm.jsx","components/finance/payment_batch_categories/FinancePaymentBatchCategoryAdd.jsx","components/finance/payment_batch_categories/FinancePaymentBatchCategoryEdit.jsx","components/finance/orders/edit/queries.js","components/finance/orders/edit/FinanceOrderEditForm.jsx","components/finance/orders/edit/FinanceOrderEditBase.jsx","components/finance/orders/edit/FinanceOrderEdit.jsx","components/finance/payment_methods/FinancePaymentMethodsBase.jsx","components/finance/payment_methods/queries.js","components/finance/payment_methods/FinancePaymentMethods.jsx","components/finance/payment_methods/yupSchema.js","components/finance/payment_methods/FinancePaymentMethodForm.jsx","components/finance/payment_methods/FinancePaymentMethodAdd.jsx","components/finance/payment_methods/FinancePaymentMethodEdit.jsx","components/finance/taxrates/FinanceTaxRatesBase.jsx","components/finance/taxrates/queries.js","components/finance/taxrates/FinanceTaxRates.jsx","components/finance/taxrates/yupSchema.js","components/finance/taxrates/FinanceTaxRateAdd.jsx","components/finance/taxrates/FinanceTaxRateEdit.jsx","components/insight/InsightMenu.jsx","components/insight/home/InsightHome.jsx","components/insight/classpasses/queries.js","components/insight/InsightBackHome.jsx","components/insight/classpasses/InsightClasspassesBase.jsx","components/insight/classpasses/InsightClasspasses.jsx","components/insight/subscriptions/queries.js","components/insight/subscriptions/InsightSubscriptionsBase.jsx","components/insight/subscriptions/InsightSubscriptions.jsx","components/organization/OrganizationMenu.jsx","components/organization/home/OrganizationHome.jsx","components/organization/organization/yupSchema.js","tools/custom_file_input_label_style.js","components/organization/organization/OrganizationForm.jsx","components/organization/organization/OrganizationEditBase.jsx","components/organization/organization/OrganizationEdit.jsx","components/organization/organization/branding/OrganizationBrandingBase.jsx","components/organization/organization/branding/OrganizationBranding.jsx","components/organization/organization/branding/OrganizationBrandingEditForm.jsx","components/organization/organization/branding/OrganizationBrandingEdit.jsx","components/organization/announcements/OrganizationAnnouncementsBase.jsx","components/organization/announcements/queries.js","components/organization/announcements/OrganizationAnnouncements.jsx","components/organization/announcements/yupSchema.js","components/organization/announcements/OrganizationAnnouncementForm.jsx","components/organization/announcements/OrganizationAnnouncementAdd.jsx","components/organization/announcements/OrganizationAnnouncementEdit.jsx","components/organization/appointment_categories/appointments/queries.js","components/organization/appointment_categories/appointments/OrganizationAppointments.jsx","components/organization/appointment_categories/appointments/yupSchema.js","components/organization/appointment_categories/appointments/OrganizationAppointmentForm.jsx","components/organization/appointment_categories/appointments/OrganizationAppointmentAdd.jsx","components/organization/appointment_categories/appointments/OrganizationAppointmentEdit.jsx","components/organization/appointment_categories/queries.js","components/organization/appointment_categories/OrganizationAppointmentCategories.jsx","components/organization/appointment_categories/yupSchema.js","components/organization/appointment_categories/OrganizationAppointmentCategoryForm.jsx","components/organization/appointment_categories/OrganizationAppointmentCategoryAdd.jsx","components/organization/appointment_categories/OrganizationAppointmentCategoryEdit.jsx","components/organization/appointment_categories/appointments/prices/queries.js","components/organization/appointment_categories/appointments/prices/OrganizationAppointmentPrices.jsx","components/organization/appointment_categories/appointments/prices/yupSchema.js","components/organization/appointment_categories/appointments/prices/OrganizationAppointmentPriceForm.jsx","components/organization/appointment_categories/appointments/prices/OrganizationAppointmentPriceAdd.jsx","components/organization/appointment_categories/appointments/prices/OrganizationAppointmentPriceEdit.jsx","components/organization/classpasses/OrganizationClasspassesBase.jsx","components/organization/classpasses/queries.js","components/organization/classpasses/OrganizationClasspasses.jsx","components/organization/classpasses/yupSchema.js","components/organization/classpasses/OrganizationClasspassForm.jsx","components/organization/classpasses/OrganizationClasspassAdd.jsx","components/organization/classpasses/OrganizationClasspassEdit.jsx","components/organization/classpasses_groups/OrganizationClasspassesGroupsBase.jsx","components/organization/classpasses_groups/queries.js","components/organization/classpasses_groups/OrganizationClasspassesGroups.jsx","components/organization/classpasses_groups/yupSchema.js","components/organization/classpasses_groups/OrganizationClasspassesGroupAdd.jsx","components/organization/classpasses_groups/OrganizationClasspassesGroupEdit.jsx","components/organization/classpasses_groups/OrganizationClasspassesGroupEditPasses.jsx","components/organization/classtypes/tools.js","components/organization/classtypes/queries.js","components/organization/classtypes/OrganizationClasstypesBase.jsx","components/organization/classtypes/OrganizationClasstypes.jsx","components/organization/classtypes/yupSchema.js","components/organization/classtypes/OrganizationClasstypeAdd.jsx","components/organization/classtypes/OrganizationClasstypeEdit.jsx","components/organization/classtypes/OrganizationClasstypeEditImage.jsx","components/organization/discovery/queries.js","components/organization/discovery/OrganizationDiscoveriesBase.jsx","components/organization/discovery/OrganizationDiscoveries.jsx","components/organization/discovery/yupSchema.js","components/organization/discovery/OrganizationDiscoveryAdd.jsx","components/organization/discovery/OrganizationDiscoveryEdit.jsx","components/organization/organization/documents/OrganizationDocuments.jsx","components/ui/ISODateString.jsx","components/ui/FileDownloadTableButton.jsx","components/organization/organization/documents/OrganizationDocumentsBase.jsx","components/organization/organization/documents/queries.js","components/organization/organization/documents/OrganizationDocumentDelete.jsx","components/organization/organization/documents/OrganizationListDocuments.jsx","components/organization/organization/documents/yupSchema.js","components/organization/organization/documents/tools.js","components/organization/organization/documents/OrganizationDocumentAdd.jsx","components/organization/organization/documents/OrganizationDocumentEdit.jsx","components/organization/languages/OrganizationLanguagesBase.jsx","components/organization/languages/queries.js","components/organization/languages/OrganizationLanguages.jsx","components/organization/languages/yupSchema.js","components/organization/languages/OrganizationLanguageForm.jsx","components/organization/languages/OrganizationLanguageAdd.jsx","components/organization/languages/OrganizationLanguageEdit.jsx","components/organization/locations/queries.js","components/organization/locations/OrganizationLocationsBase.jsx","components/organization/locations/OrganizationLocations.jsx","components/organization/locations/yupSchema.js","components/organization/locations/OrganizationLocationAdd.jsx","components/organization/locations/OrganizationLocationEdit.jsx","components/organization/locations/rooms/queries.js","components/organization/locations/rooms/OrganizationLocationRoomsBase.jsx","components/organization/locations/rooms/OrganizationLocationRooms.jsx","components/organization/locations/rooms/yupSchema.js","components/organization/locations/rooms/OrganizationLocationRoomForm.jsx","components/organization/locations/rooms/OrganizationLocationRoomAdd.jsx","components/organization/locations/rooms/OrganizationLocationRoomEdit.jsx","components/organization/levels/OrganizationLevelsBase.jsx","components/organization/levels/queries.js","components/organization/levels/OrganizationLevels.jsx","components/organization/levels/yupSchema.js","components/organization/levels/OrganizationLevelForm.jsx","components/organization/levels/OrganizationLevelAdd.jsx","components/organization/levels/OrganizationLevelEdit.jsx","components/ui/Validity.jsx","components/organization/memberships/queries.js","components/organization/memberships/OrganizationMemberships.jsx","components/organization/memberships/yupSchema.js","components/organization/memberships/OrganizationMembershipAdd.jsx","components/organization/memberships/OrganizationMembershipEdit.jsx","components/organization/subscriptions/OrganizationSubscriptionsBase.jsx","components/organization/subscriptions/queries.js","components/organization/subscriptions/OrganizationSubscriptions.jsx","components/organization/subscriptions/yupSchema.js","components/organization/subscriptions/OrganizationSubscriptionForm.jsx","components/organization/subscriptions/OrganizationSubscriptionAdd.jsx","components/organization/subscriptions/OrganizationSubscriptionEdit.jsx","components/organization/subscriptions_groups/OrganizationSubscriptionsGroupsBase.jsx","components/organization/subscriptions_groups/queries.js","components/organization/subscriptions_groups/OrganizationSubscriptionsGroups.jsx","components/organization/subscriptions_groups/yupSchema.js","components/organization/subscriptions_groups/OrganizationSubscriptionsGroupForm.jsx","components/organization/subscriptions_groups/OrganizationSubscriptionsGroupAdd.jsx","components/organization/subscriptions_groups/OrganizationSubscriptionsGroupEdit.jsx","components/organization/subscriptions_groups/OrganizationSubscriptionsGroupEditSubscriptions.jsx","components/ui/AlertInfo.jsx","components/organization/subscriptions/prices/queries.js","components/organization/subscriptions/prices/OrganizationSubscriptionsPrices.jsx","components/relations/RelationsMenu.jsx","components/organization/subscriptions/prices/yupSchema.js","components/organization/subscriptions/prices/OrganizationSubscriptionPriceForm.jsx","components/organization/subscriptions/prices/OrganizationSubscriptionPriceAdd.jsx","components/organization/subscriptions/prices/OrganizationSubscriptionPriceEdit.jsx","components/relations/home/RelationsHome.jsx","components/general/InputSearch.jsx","components/relations/accounts/tools.js","components/relations/accounts/RelationsAccountsBase.jsx","components/relations/accounts/queries.js","components/relations/accounts/RelationsAccounts.jsx","components/relations/accounts/yupSchema.js","components/relations/accounts/RelationsAccountForm.jsx","components/relations/accounts/RelationsAccountAdd.jsx","components/relations/accounts/ProfileMenu.jsx","components/ui/ProfileCardSmall.jsx","components/relations/accounts/RelationsAccountsBack.jsx","tools/iso_country_codes.js","components/relations/accounts/RelationsAccountProfileForm.jsx","components/relations/accounts/RelationsAccountProfileBase.jsx","components/relations/accounts/RelationsAccountProfile.jsx","components/ui/DocumentType.jsx","components/relations/accounts/accepted_documents/queries.js","components/relations/accounts/accepted_documents/AcceptedDocuments.jsx","components/relations/accounts/bank_accounts/queries.js","components/relations/accounts/bank_accounts/mandates/queries.js","components/relations/accounts/bank_accounts/RelationsAccountBankAccountBase.jsx","components/relations/accounts/bank_accounts/RelationsAccountBankAccountForm.jsx","components/relations/accounts/bank_accounts/RelationsAccountBankAccount.jsx","components/relations/accounts/bank_accounts/mandates/RelationsAccountBankAccountMandateForm.jsx","components/relations/accounts/bank_accounts/mandates/RelationsAccountBankAccountMandateAdd.jsx","components/relations/accounts/bank_accounts/mandates/RelationsAccountBankAccountMandateEdit.jsx","components/ui/BadgeBookingStatus.jsx","components/relations/accounts/classes/AccountClassesBase.jsx","components/relations/accounts/classes/queries.js","components/schedule/classes/class/attendance/queries.js","components/relations/accounts/classes/AccountClassDelete.jsx","components/relations/accounts/classes/AccountClasses.jsx","components/relations/accounts/classpasses/queries.js","components/relations/accounts/classpasses/AccountClasspasses.jsx","components/relations/accounts/classpasses/yupSchema.js","components/relations/accounts/classpasses/AccountClasspassForm.jsx","components/relations/accounts/classpasses/AccountClasspassAdd.jsx","components/relations/accounts/classpasses/AccountClasspassEdit.jsx","components/relations/accounts/finance_payment_batch_category_items/AccountFinancePaymentBatchCategoryItemsBase.jsx","components/relations/accounts/finance_payment_batch_category_items/queries.js","components/relations/accounts/finance_payment_batch_category_items/AccountFinancePaymentBatchCategoryItems.jsx","components/relations/accounts/finance_payment_batch_category_items/yupSchema.js","components/relations/accounts/finance_payment_batch_category_items/AccountFinancePaymentBatchCategoryItemsForm.jsx","components/relations/accounts/finance_payment_batch_category_items/AccountFinancePaymentBatchCategoryItemAdd.jsx","components/relations/accounts/finance_payment_batch_category_items/AccountFinancePaymentBatchCategoryItemEdit.jsx","components/relations/accounts/invoices/queries.js","components/relations/accounts/invoices/AccountInvoicesBase.jsx","components/relations/accounts/invoices/AccountInvoices.jsx","components/relations/accounts/invoices/AccountInvoiceAddForm.jsx","components/relations/accounts/invoices/yupSchema.js","components/relations/accounts/invoices/AccountInvoiceAdd.jsx","components/relations/accounts/memberships/queries.js","components/relations/accounts/memberships/AccountMemberships.jsx","components/relations/accounts/memberships/yupSchema.js","components/relations/accounts/memberships/AccountMembershipForm.jsx","components/relations/accounts/memberships/AccountMembershipAdd.jsx","components/relations/accounts/memberships/AccountMembershipEdit.jsx","components/general/LoadMoreOnBottomScroll.jsx","components/relations/accounts/notes/AccountNotesBase.jsx","components/relations/accounts/notes/queries.js","components/relations/accounts/notes/tools.js","components/relations/accounts/notes/AccountNotes.jsx","components/relations/accounts/notes/AccountNoteForm.jsx","components/relations/accounts/notes/AccountNoteAdd.jsx","components/relations/accounts/notes/AccountNoteEdit.jsx","components/relations/accounts/orders/AccountOrdersBase.jsx","components/relations/accounts/orders/queries.js","components/relations/accounts/orders/AccountOrderDelete.jsx","components/relations/accounts/orders/AccountOrders.jsx","components/relations/accounts/schedule_event_tickets/queries.js","queries/accounts/get_account.js","components/relations/accounts/schedule_event_tickets/AccountScheduleEventTicketsBase.jsx","components/schedule/events/tickets/customers/queries.js","components/relations/accounts/schedule_event_tickets/AccountScheduleEventTickets.jsx","components/relations/accounts/subscriptions/queries.js","components/relations/accounts/subscriptions/AccountSubscriptions.jsx","components/relations/accounts/subscriptions/yupSchema.js","components/relations/accounts/subscriptions/AccountSubscriptionForm.jsx","components/relations/accounts/subscriptions/AccountSubscriptionAdd.jsx","components/ui/CardTabs.jsx","components/relations/accounts/subscriptions/edit/AccountSubscriptionEditTabs.jsx","components/relations/accounts/subscriptions/edit/AccountSubscriptionEditBaseBase.jsx","components/relations/accounts/subscriptions/edit/AccountSubscriptionEditBase.jsx","components/relations/accounts/subscriptions/edit/AccountSubscriptionEdit.jsx","components/ui/ButtonAddSecondaryMenu.jsx","components/relations/accounts/subscriptions/edit/alt_prices/queries.js","components/relations/accounts/subscriptions/edit/AccountSubscriptionEditListBaseBase.jsx","components/relations/accounts/subscriptions/edit/AccountSubscriptionEditListBase.jsx","components/relations/accounts/subscriptions/edit/alt_prices/AccountSubscriptionEditAltPriceDelete.jsx","components/relations/accounts/subscriptions/edit/alt_prices/AccountSubscriptionEditAltPrices.jsx","components/relations/accounts/subscriptions/edit/alt_prices/yupSchema.js","components/relations/accounts/subscriptions/edit/alt_prices/AccountSubscriptionEditAltPriceBase.jsx","components/relations/accounts/subscriptions/edit/alt_prices/AccountSubscriptionEditAltPriceForm.jsx","components/relations/accounts/subscriptions/edit/alt_prices/AccountSubscriptionEditAltPriceAdd.jsx","components/relations/accounts/subscriptions/edit/alt_prices/AccountSubscriptionEditAltPriceEdit.jsx","components/relations/accounts/subscriptions/edit/blocks/queries.js","components/relations/accounts/subscriptions/edit/blocks/AccountSubscriptionEditBlockDelete.jsx","components/relations/accounts/subscriptions/edit/blocks/AccountSubscriptionEditBlocks.jsx","components/relations/accounts/subscriptions/edit/blocks/yupSchema.js","components/relations/accounts/subscriptions/edit/blocks/AccountSubscriptionEditBlockBase.jsx","components/relations/accounts/subscriptions/edit/blocks/AccountSubscriptionEditBlockForm.jsx","components/relations/accounts/subscriptions/edit/blocks/AccountSubscriptionEditBlockAdd.jsx","components/relations/accounts/subscriptions/edit/blocks/AccountSubscriptionEditBlockEdit.jsx","components/ui/SubscriptionCreditsMutationType.jsx","components/relations/accounts/subscriptions/edit/credits/queries.js","components/relations/accounts/subscriptions/edit/credits/AccountSubscriptionEditCreditDelete.jsx","components/relations/accounts/subscriptions/edit/credits/AccountSubscriptionEditCredits.jsx","components/relations/accounts/subscriptions/edit/credits/yupSchema.js","components/relations/accounts/subscriptions/edit/credits/AccountSubscriptionEditCreditBase.jsx","components/relations/accounts/subscriptions/edit/credits/AccountSubscriptionEditCreditForm.jsx","components/relations/accounts/subscriptions/edit/credits/AccountSubscriptionEditCreditAdd.jsx","components/relations/accounts/subscriptions/edit/credits/AccountSubscriptionEditCreditEdit.jsx","components/relations/accounts/subscriptions/edit/invoices/queries.js","components/relations/accounts/subscriptions/edit/invoices/AccountSubscriptionEditInvoiceDelete.jsx","components/relations/accounts/subscriptions/edit/invoices/AccountSubscriptionEditInvoices.jsx","components/relations/accounts/subscriptions/edit/invoices/yupSchema.js","components/relations/accounts/subscriptions/edit/invoices/AccountSubscriptionEditInvoiceAddBase.jsx","components/relations/accounts/subscriptions/edit/invoices/AccountSubscriptionEditInvoiceAddForm.jsx","components/relations/accounts/subscriptions/edit/invoices/AccountSubscriptionEditInvoiceAdd.jsx","components/relations/accounts/subscriptions/edit/pauses/queries.js","components/relations/accounts/subscriptions/edit/pauses/AccountSubscriptionEditPauseDelete.jsx","components/relations/accounts/subscriptions/edit/pauses/AccountSubscriptionEditPauses.jsx","components/relations/accounts/subscriptions/edit/pauses/yupSchema.js","components/relations/accounts/subscriptions/edit/pauses/AccountSubscriptionEditPauseBase.jsx","components/relations/accounts/subscriptions/edit/pauses/AccountSubscriptionEditPauseForm.jsx","components/relations/accounts/subscriptions/edit/pauses/AccountSubscriptionEditPauseAdd.jsx","components/relations/accounts/subscriptions/edit/pauses/AccountSubscriptionEditPauseEdit.jsx","components/relations/accounts/teacher_profile/queries.js","components/relations/accounts/teacher_profile/yupSchema.js","components/relations/accounts/teacher_profile/RelationsAccountTeacherProfileForm.jsx","components/relations/accounts/teacher_profile/RelationsAccountTeacherProfile.jsx","components/relations/b2b/tools.js","components/relations/b2b/RelationsB2BBase.jsx","components/relations/b2b/queries.js","tools/confirm_archive.js","tools/confirm_unarchive.js","components/relations/b2b/RelationsB2B.jsx","components/relations/b2b/RelationB2BAddForm.jsx","components/relations/b2b/RelationsB2BAdd.jsx","components/relations/b2b/RelationsB2BEditBase.jsx","components/relations/b2b/RelationsB2BEditForm.jsx","components/relations/b2b/RelationsB2BEdit.jsx","components/schedule/ScheduleMenu.jsx","components/schedule/home/ScheduleHome.jsx","components/schedule/appointments/tools.js","components/schedule/appointments/ScheduleAppointmentsFilter.jsx","components/schedule/appointments/queries.js","components/schedule/appointments/ScheduleAppointments.jsx","components/schedule/appointments/all/AppointmentEditMenu.jsx","components/schedule/appointments/yupSchema.js","components/ui/CSTimePicker.jsx","components/schedule/appointments/ScheduleAppointmentForm.jsx","components/schedule/appointments/ScheduleAppointmentAdd.jsx","components/schedule/appointments/all/AppointmentEditBack.jsx","components/schedule/appointments/all/AppointmentEditBase.jsx","components/schedule/appointments/all/tools.js","components/schedule/appointments/all/edit/ScheduleAppointmentEditAll.jsx","components/ui/StatusIcon.jsx","components/schedule/classes/tools.js","components/schedule/classes/ScheduleClassesFilter.jsx","components/schedule/classes/ScheduleClassesBase.jsx","components/schedule/classes/queries.js","components/schedule/classes/ScheduleClasses.jsx","components/schedule/classes/yupSchema.js","components/schedule/classes/ScheduleClassForm.jsx","components/schedule/classes/ScheduleClassAddBase.jsx","components/schedule/classes/ScheduleClassAdd.jsx","components/schedule/classes/all/ClassEditMenu.jsx","components/schedule/classes/all/edit/queries.js","components/schedule/classes/all/ClassEditBack.jsx","components/schedule/classes/all/ClassEditBaseBase.jsx","components/schedule/classes/all/tools.js","components/schedule/classes/all/ClassEditBase.jsx","components/schedule/classes/all/edit/ScheduleClassEditAll.jsx","components/ui/FormHelp.jsx","components/schedule/classes/all/classpasses/ScheduleClassClasspassForm.jsx","components/schedule/classes/all/classpasses/yupSchema.js","components/schedule/classes/all/classpasses/queries.js","components/schedule/classes/all/classpasses/ScheduleClassClasspasses.jsx","components/schedule/classes/all/subscriptions/ScheduleClassSubscriptionForm.jsx","components/schedule/classes/all/subscriptions/yupSchema.js","components/schedule/classes/all/subscriptions/queries.js","components/schedule/classes/all/subscriptions/ScheduleClassSubscriptions.jsx","components/schedule/classes/all/teachers/queries.js","components/schedule/classes/all/teachers/ScheduleClassTeachers.jsx","components/schedule/classes/all/teachers/yupSchema.js","components/schedule/classes/all/teachers/ScheduleClassTeacherForm.jsx","components/schedule/classes/all/teachers/ScheduleClassTeacherBack.jsx","components/schedule/classes/all/teachers/ScheduleClassTeacherAdd.jsx","components/schedule/classes/all/teachers/ScheduleClassTeacherEdit.jsx","components/schedule/classes/class/attendance/tools.js","components/schedule/classes/class/tools.js","components/schedule/classes/class/ScheduleClassBack.jsx","components/schedule/classes/class/ClassMenu.jsx","components/schedule/classes/class/attendance/ScheduleClassAttendanceDelete.jsx","queries/accounts/account_search_queries.js","components/schedule/classes/class/attendance/ScheduleClassAttendance.jsx","components/schedule/classes/class/book/ScheduleClassBookBack.jsx","components/schedule/classes/class/book/queries.js","components/schedule/classes/class/book/tools.js","components/schedule/classes/class/book/ScheduleClassBookClasspassBtn.jsx","components/schedule/classes/class/book/ScheduleClassBookClasspasses.jsx","components/schedule/classes/class/book/ScheduleClassBookSubscriptionBtn.jsx","components/schedule/classes/class/book/ScheduleClassBookSubscriptions.jsx","components/schedule/classes/class/book/ScheduleClassBookPriceBtn.jsx","components/schedule/classes/class/book/ScheduleClassBookPriceDropin.jsx","components/schedule/classes/class/book/ScheduleClassBookPriceTrial.jsx","components/schedule/classes/class/book/ScheduleClassBook.jsx","components/schedule/classes/class/edit/queries.js","components/schedule/classes/class/edit/yupSchema.js","components/schedule/classes/class/edit/ScheduleClassEditForm.jsx","components/schedule/classes/class/edit/ScheduleClassWeeklyOTCDelete.jsx","components/schedule/classes/class/edit/ScheduleClassEdit.jsx","components/schedule/classes/all/prices/ButtonAdd.jsx","components/schedule/classes/all/prices/queries.js","components/schedule/classes/all/prices/ScheduleClassPriceDelete.jsx","components/schedule/classes/all/prices/ScheduleClassPrices.jsx","components/schedule/classes/all/prices/ScheduleClassPriceForm.jsx","components/schedule/classes/all/prices/yupSchema.js","components/schedule/classes/all/prices/ScheduleClassPriceBack.jsx","components/schedule/classes/all/prices/ScheduleClassPriceAdd.jsx","components/schedule/classes/all/prices/ScheduleClassPriceEdit.jsx","components/schedule/events/ScheduleEventsBase.jsx","components/schedule/events/queries.js","components/schedule/events/tools.js","components/schedule/events/ScheduleEventArchive.jsx","components/schedule/events/ScheduleEvents.jsx","components/schedule/events/yupSchema.js","components/schedule/events/ScheduleEventForm.jsx","components/schedule/events/ScheduleEventAdd.jsx","components/schedule/events/edit/ScheduleEventEditMenu.jsx","components/schedule/events/edit/ScheduleEventEditBack.jsx","components/schedule/events/edit/ScheduleEventEditBaseBase.jsx","components/schedule/events/edit/ScheduleEventEditBase.jsx","components/schedule/events/edit/ScheduleEventEdit.jsx","components/schedule/events/activities/queries.js","components/schedule/events/edit/ScheduleEventEditListBase.jsx","components/schedule/events/activities/ScheduleEventActivityDelete.jsx","components/schedule/events/activities/ScheduleEventActivities.jsx","components/schedule/events/activities/yupSchema.js","components/schedule/events/activities/ScheduleEventActivityBack.jsx","components/schedule/events/activities/ScheduleEventActivityForm.jsx","components/schedule/events/activities/ScheduleEventActivityAdd.jsx","components/schedule/events/activities/ScheduleEventActivityTabs.jsx","components/schedule/events/activities/ScheduleEventActivityEditBase.jsx","components/schedule/events/activities/ScheduleEventActivityEdit.jsx","components/schedule/events/activities/attendance/queries.js","components/schedule/events/activities/attendance/ScheduleEventActivityAttendanceBase.jsx","components/schedule/events/activities/attendance/ScheduleEventActivityAttendance.jsx","components/schedule/events/earlybirds/queries.js","components/schedule/events/earlybirds/ScheduleEventEarlybirdDelete.jsx","components/schedule/events/earlybirds/ScheduleEventEarlybirds.jsx","components/schedule/events/earlybirds/yupSchema.js","components/schedule/events/earlybirds/ScheduleEventEarlybirdsBack.jsx","components/schedule/events/earlybirds/ScheduleEventEarlybirdForm.jsx","components/schedule/events/earlybirds/ScheduleEventEarlybirdAdd.jsx","components/schedule/events/earlybirds/ScheduleEventEarlybirdEdit.jsx","components/schedule/events/media/queries.js","components/schedule/events/media/ScheduleEventMediaDelete.jsx","components/schedule/events/media/ScheduleEventMedia.jsx","components/schedule/events/media/yupSchema.js","components/schedule/events/media/ScheduleEventMediaBack.jsx","components/schedule/events/media/ScheduleEventMediaForm.jsx","components/schedule/events/media/ScheduleEventMediaAdd.jsx","components/schedule/events/media/ScheduleEventMediaEditBase.jsx","components/schedule/events/media/ScheduleEventMediaEdit.jsx","components/schedule/events/tickets/queries.js","components/schedule/events/tickets/ScheduleEventTicketListBase.jsx","components/schedule/events/tickets/ScheduleEventTicketDelete.jsx","components/ui/BadgeSoldOut.jsx","components/schedule/events/tickets/ScheduleEventTickets.jsx","components/schedule/events/tickets/yupSchema.js","components/schedule/events/tickets/ScheduleEventTicketBack.jsx","components/schedule/events/tickets/ScheduleEventTicketForm.jsx","components/schedule/events/tickets/ScheduleEventTicketAdd.jsx","components/schedule/events/tickets/ScheduleEventTicketTabs.jsx","components/schedule/events/tickets/ScheduleEventTicketEditBase.jsx","components/schedule/events/tickets/ScheduleEventTicketEdit.jsx","components/schedule/events/tickets/activities/queries.js","components/schedule/events/tickets/activities/yupSchema.js","components/schedule/events/tickets/activities/ScheduleEventTicketEditActivityForm.jsx","components/schedule/events/tickets/activities/ScheduleEventTicketEditActivities.jsx","components/schedule/events/tickets/customers/tools.js","components/schedule/events/tickets/customers/ScheduleEventTicketEditCustomers.jsx","components/SiteWrapperSelfCheckin.js","components/selfcheckin/SelfCheckinBase.jsx","components/selfcheckin/Checkin/queries.js","components/selfcheckin/Checkin/tools.js","components/selfcheckin/Checkin/Checkin.jsx","components/selfcheckin/BookingOptions/queries.js","components/selfcheckin/BookingOptions/BookingOptions.jsx","components/selfcheckin/Locations/queries.js","components/selfcheckin/Locations/Locations.jsx","components/selfcheckin/LocationClasses/queries.js","components/selfcheckin/LocationClasses/LocationClasses.jsx","components/settings/queries.js","components/settings/SettingsBack.jsx","components/settings/SettingsBase.jsx","components/settings/about/SettingsAbout.jsx","components/settings/finance/bank_accounts/SettingsFinanceBankAccountsForm.jsx","components/settings/finance/bank_accounts/SettingsFinanceBankAccounts.jsx","components/settings/finance/currency/SettingsFinanceCurrencyForm.jsx","components/settings/finance/currency/SettingsFinanceCurrency.jsx","components/settings/general/date_time/yupSchema.js","components/settings/general/date_time/SettingsGeneralDateTimeForm.jsx","components/settings/general/date_time/SettingsGeneralDateTime.jsx","components/settings/general/system/SettingsGeneralSystemForm.jsx","components/settings/general/system/SettingsGeneralSystem.jsx","components/settings/home/SettingsHomeItemButton.jsx","components/settings/home/SettingsHome.jsx","components/settings/integration/mollie/SettingsIntegrationMollieForm.jsx","components/settings/integration/mollie/SettingsIntegrationMollie.jsx","components/settings/mail/SettingsMailTemplatesBase.jsx","components/settings/mail/queries.js","components/settings/mail/SettingsMailTemplates.jsx","components/settings/mail/SettingsMailTemplateEditBase.jsx","components/settings/mail/SettingsMailTemplateEditForm.jsx","components/settings/mail/SettingsMailTemplateEdit.jsx","components/settings/mail/tools.js","components/settings/shop/features/queries.js","components/settings/shop/features/yupSchema.js","components/settings/shop/features/SettingsShopFeaturesForm.jsx","components/settings/shop/features/SettingsShopFeatures.jsx","components/settings/workflow/class_booking/SettingsWorkflowClassBookingForm.jsx","components/settings/workflow/class_booking/SettingsWorkflowClassBooking.jsx","components/SiteWrapperShop.js","queries/system/get_user_profile.js","components/shop/account/home/ShopAccountHomeBase.jsx","components/shop/account/home/ShopAccountHomeButton.jsx","components/shop/account/home/ShopAccountHome.jsx","components/shop/tools.js","components/shop/account/class_cancel/queries.js","components/shop/account/class_cancel/ShopAccountClassCancelBase.jsx","components/shop/account/class_cancel/ShopAccountClassCancel.jsx","components/shop/checkout/class_info/queries.js","components/shop/checkout/class_info/ShopCheckoutClassInfo.jsx","components/shop/account/class_info/ShopAccountClassInfoBase.jsx","components/shop/account/class_info/ShopAccountClassInfo.jsx","components/shop/account/classpasses/queries.js","components/shop/account/ShopAccountBack.jsx","components/shop/account/classpasses/ShopAccountClasspassesBase.jsx","components/shop/account/classpasses/ShopAccountClasspasses.jsx","components/shop/account/ShopAccountProfileBase.jsx","components/shop/account/event_tickets/ShopAccountEventTickets.jsx","components/shop/account/invoices/queries.js","components/shop/account/invoices/ShopAccountInvoicesBase.jsx","components/shop/account/invoices/ShopAccountInvoices.jsx","components/shop/account/orders/queries.js","components/shop/account/orders/ShopAccountOrdersBase.jsx","components/shop/account/orders/tools.js","components/shop/account/orders/ShopAccountOrders.jsx","components/shop/account/orders/ShopAccountOrderCancel.jsx","components/shop/account/profile/queries.js","components/shop/account/profile/ShopAccountProfileBase.jsx","components/shop/account/profile/ShopAccountProfileForm.jsx","components/shop/account/profile/yupSchema.js","components/shop/account/profile/ShopAccountProfile.jsx","components/shop/account/subscriptions/queries.js","components/shop/account/subscriptions/ShopAccountSubscriptionsBase.jsx","components/shop/account/subscriptions/ShopAccountSubscriptions.jsx","components/shop/classes/book/ShopClassBookBack.jsx","components/shop/ShopCheckoutProgress.jsx","components/shop/ShopBase.jsx","components/shop/classes/book/ShopClassBookBase.jsx","components/shop/classes/book/ShopClassBookClasspassBtn.jsx","components/shop/classes/book/ShopClassBookClasspasses.jsx","components/shop/classes/book/ShopClassBookSubscriptionBtn.jsx","components/shop/classes/book/ShopClassBookSubscriptions.jsx","components/shop/classes/book/ShopClassBookPriceBtn.jsx","components/shop/classes/book/ShopClassBookPriceDropin.jsx","components/shop/classes/book/ShopClassBookPriceTrial.jsx","components/shop/classes/book/queries.js","components/shop/classes/book/ShopClassBook.jsx","components/shop/classes/booked/ShopClassBookedBase.jsx","components/shop/queries.js","components/shop/classes/booked/ShopClassBooked.jsx","components/shop/classes/schedule/ShopClassesScheduleBase.jsx","components/shop/classes/schedule/tools.js","components/shop/classes/schedule/ShopClassesScheduleFilter.jsx","components/shop/classes/schedule/ShopClassesScheduleButtonBook.jsx","components/shop/classes/schedule/ShopClassesSchedule.jsx","components/shop/contact/ShopContactBase.jsx","components/shop/contact/ShopContact.jsx","components/shop/events/ShopEventsBase.jsx","components/shop/events/queries.js","components/shop/events/ShopEvents.jsx","components/shop/event/ShopEventBase.jsx","components/shop/event/ShopEventTicketPricingCard.jsx","components/shop/event/queries.js","components/shop/event/ShopEvent.jsx","components/shop/event_ticket/ShopEventTicketBase.jsx","tools/cs_django_links.js","components/shop/ShopCheckoutForm.jsx","components/shop/event_ticket/queries.js","components/shop/event_ticket/ShopEventTicket.jsx","components/shop/home/queries.js","components/shop/home/ShopHomeBase.jsx","components/shop/home/ShopHome.jsx","components/shop/checkout/payment/ShopCheckoutPaymentBase.jsx","components/shop/checkout/queries.js","components/shop/checkout/order_summary/ShopCheckoutOrderSummary.jsx","components/shop/checkout/payment/queries.js","components/shop/checkout/payment/ShopCheckoutPayment.jsx","components/shop/checkout/complete/ShopCheckoutCompleteBase.jsx","components/shop/checkout/complete/ShopCheckoutComplete.jsx","components/shop/account/classes/queries.js","components/shop/account/classes/ShopAccountClassesBase.jsx","components/shop/account/classes/ShopAccountClasses.jsx","components/shop/classpasses/ShopClasspassesBase.jsx","components/shop/classpass/ShopClasspassBase.jsx","components/shop/classpass/queries.js","components/shop/classpass/ShopClasspassPricingCard.jsx","components/shop/classpasses/queries.js","components/shop/classpasses/ShopClasspasses.jsx","components/shop/classpass/ShopClasspass.jsx","components/shop/subscriptions/ShopSubscriptionsBase.jsx","components/shop/subscription/ShopSubscriptionPricingCard.jsx","components/shop/subscriptions/queries.js","components/shop/subscriptions/ShopSubscriptions.jsx","components/shop/subscription/ShopSubscriptionBase.jsx","components/shop/subscription/queries.js","components/shop/subscription/ShopSubscription.jsx","components/user/password/yupSchema.js","components/user/password/UserPasswordChangeForm.jsx","components/ui/CSStandaloneFormPage.jsx","components/user/password/UserPasswordChange.jsx","components/user/login/UserLoginForm.jsx","components/user/login/UserLogin.jsx","components/user/login/UserLoginRequired.jsx","components/user/login/UserLogout.jsx","components/user/session/UserSessionExpired.jsx","components/ui/CSStandalonePageWide.jsx","components/user/welcome/UserWelcome.jsx","components/Error404.js","AppRoot.js","App.js","serviceWorker.js","index.js"],"names":["resources","en_US","common","console","log","i18n","use","LanguageDetector","initReactI18next","init","lng","fallbackLng","ns","defaultNS","debug","keySeparator","interpolation","escapeValue","TOKEN_AUTH","gql","TOKEN_REFRESH","TOKEN_COOKIE_DELETE","TOKEN_REFRESH_COOKIE_DELETE","UPDATE_ACCOUNT_PASSWORD","cs_local_storage_keys","AUTH_TOKEN","AUTH_TOKEN_EXP","AUTH_TOKEN_ORIGIAT","AUTH_REFRESH_TOKEN_EXP","AUTH_LOGIN_NEXT","FINANCE_INVOICES_FILTER_STATUS","FINANCE_INVOICES_EDIT_RETURN","FINANCE_ORDERS_FILTER_STATUS","FINANCE_PAYMENT_BATCH_CATEGORIES_SHOW_ARCHIVE","INSIGHT_CLASSPASSES_YEAR","INSIGHT_SUBSCRIPTIONS_YEAR","ORGANIZATION_CLASSTYPES_ARCHIVED","RELATIONS_ACCOUNTS_FILTER_TYPE","RELATIONS_ACCOUNTS_SEARCH","RELATIONS_ACCOUNTS_IS_ACTIVE","RELATIONS_ACCOUNT_NOTES_NOTE_TYPE","RELATIONS_BUSINESSES_SHOW_ARCHIVE","RELATIONS_BUSINESSES_SEARCH","SCHEDULE_APPOINTMENTS_DATE_FROM","SCHEDULE_APPOINTMENTS_DATE_UNTIL","SCHEDULE_APPOINTMENTS_ORDER_BY","SCHEDULE_APPOINTMENTS_FILTER_CLASSTYPE","SCHEDULE_APPOINTMENTS_FILTER_LOCATION","SCHEDULE_CLASSES_DATE_FROM","SCHEDULE_CLASSES_DATE_UNTIL","SCHEDULE_CLASSES_ORDER_BY","SCHEDULE_CLASSES_FILTER_CLASSTYPE","SCHEDULE_CLASSES_FILTER_LEVEL","SCHEDULE_CLASSES_FILTER_LOCATION","SCHEDULE_CLASSES_CLASS_ATTENDANCE_SEARCH","SCHEDULE_EVENTS_ARCHIVED","SCHEDULE_EVENTS_TICKETS_CUSTOMERS_SEARCH","SHOP_CLASSES_DATE_FROM","SHOP_CLASSES_DATE_UNTIL","SHOP_CLASSES_ORDER_BY","SHOP_CLASSES_FILTER_CLASSTYPE","SHOP_CLASSES_FILTER_LEVEL","SHOP_CLASSES_FILTER_LOCATION","cs_error_codes","USER_NOT_LOGGED_IN","CSAuth","token","localStorage","removeItem","CSLS","refreshTokenData","setItem","payload","exp","origIat","refreshExpiresIn","expired","GET_APP_SETTINGS_QUERY","UPDATE_APP_SETTINGS","GET_ORGANIZATION_QUERY","AppSettingsContext","React","createContext","AppSettingsProvider","Provider","Consumer","OrganizationContext","OrganizationProvider","GET_USER","get_all_permissions","user","permissions","groups","edges","edge_index","group_edge","node","group_node","permission_index","permission_edge","codename_split","codename","split","Set","add","has_permission","permission","resource","you_shall_not_pass","has","HasPermissionWrapper","children","useQuery","loading","error","data","check_permission","GET_BACKEND_ANNOUNCEMENTS_QUERY","getNavBarItems","t","items","push","value","to","icon","LinkComponent","withRouter","NavLink","useExact","now","Date","withTranslation","match","history","fetchMore","Wrapper","headerProps","href","alt","imageURL","navItems","Item","type","className","outline","size","color","accountDropdown","avatarURL","name","firstName","lastName","description","options","isDivider","navProps","itemsObjects","routerContextComponentType","RouterContextProvider","footerProps","copyright","getFullYear","target","rel","nav","Col","auto","autoClose","transition","Slide","Header","title","announcements","organizationAnnouncements","length","Row","map","md","Body","dangerouslySetInnerHTML","__html","content","link","linkTitle","block","params","AutomationHomeItemButton","ContentCard","handleOnScroll","scrollTop","document","documentElement","body","scrollHeight","clientHeight","window","innerHeight","Math","ceil","pageInfo","props","hasNextPage","onLoadMore","addEventListener","this","removeEventListener","cardTitle","headerContent","cardTabs","hasCardBody","Title","Footer","onClick","Component","defaultProps","f","GET_TASK_RESULT_QUERY","returnUrl","status","dateTimeFormatMoment","useContext","variables","taskName","headerOptions","Options","taskResults","djangoCeleryResultTaskResults","after","endCursor","updateQuery","previousResult","fetchMoreResult","newEdges","__typename","ColHeader","v4","moment","dateDone","format","taskKwargs","result","AUTOMATION_ACCOUNT_SUBSCRIPTION_INVOICES_SCHEMA","Yup","shape","subscriptionYear","required","positive","min","max","subscriptionMonth","invoiceDate","dateFormat","selected","onChange","onBlur","isClearable","placeholderText","todayButton","showMonthDropdown","showYearDropdown","dropdownMode","date","isSubmitting","errors","Group","label","autoComplete","component","disabled","ADD_TASK","useMutation","addTask","initialValues","getMonth","validationSchema","onSubmit","values","setSubmitting","input","month","year","refetchQueries","query","then","toast","success","position","POSITION","BOTTOM_RIGHT","catch","AUTOMATION_ACCOUNT_SUBSCRIPTION_CREDIT_SCHEMA","AUTOMATION_ACCOUNT_SUBSCRIPTION_MOLLIE_COLLECTION_SCHEMA","invoices_active","orders_active","costcenters_active","glaccounts_active","taxrates_active","payment_methods_active","payment_batch_collections_active","payment_batch_payments_active","payment_batch_categories_active","activeLink","transparent","GroupItem","active","FinanceHome","id","lg","header","footer","GET_COSTCENTERS_QUERY","GET_COSTCENTER_QUERY","ADD_COSTCENTER","UPDATE_COSTCENTER","ARCHIVE_COSTCENTER","showBack","prefix","useState","archived","setArchived","refetch","archiveCostcenter","loader","costcenters","financeCostcenters","code","COSTCENTER_SCHEMA","addCostcenter","updateCostcenter","initialData","financeCostcenter","GET_GLACCOUNTS_QUERY","GET_GLACCOUNT_QUERY","ADD_GLACCOUNT","UPDATE_GLACCOUNT","ARCHIVE_GLACCOUNT","archiveGlaccount","glaccounts","financeGlaccounts","GLACCOUNT_SCHEMA","addGlaccount","updateGlaccount","financeGlaccount","get_list_query_variables","queryVars","getItem","undefined","getDefaultValue","defaultValue","event","key","updateLocalStorageAndRefetch","FinanceInvoicesStatus","GET_INVOICES_QUERY","GET_INVOICE_QUERY","UPDATE_INVOICE","CANCEL_AND_CREATE_CREDIT_INVOICE","DELETE_FINANCE_INVOICE","CREATE_INVOICE_ITEM","UPDATE_INVOICE_ITEM","DELETE_INVOICE_ITEM","DELETE_INVOICE_PAYMENT","confirm_delete","msgConfirm","msgDescription","msgSuccess","deleteFunction","functionVariables","confirmAlert","customUI","onClose","location","pathname","fetchPolicy","deleteFinanceInvoice","invoices","financeInvoices","invoiceNumber","account","relationCompany","relationContactName","Small","summary","trunc","dateSent","dateDue","totalDisplay","balanceDisplay","refreshTokenAndOpenExportLinkInNewTab","doTokenRefresh","exportUrl","open","addInvoiceItem","financeInvoice","deleteInvoiceItem","productName","touched","handleChange","setFieldTouched","inputData","e","quantity","price","financeTaxRate","financeTaxRates","percentage","rateType","Object","keys","updateInvoiceItem","setTouched","refetchInvoice","updateItem","updating","setUpdating","onDragEnd","useCallback","draggableId","destination","source","reason","droppableId","index","updateLineNumber","node_id","line_number","lineNumber","setTimeout","statusColor","provided","snapshot","ref","innerRef","droppableProps","idx","draggableProps","dragHandleProps","placeholder","tinymceBasicConf","resize","menubar","plugins","statusbar","toolbar","setFieldValue","tinymceScriptSrc","textareaName","initialValue","terms","getContent","submitForm","note","updateInvoice","initialTab","subtotalDisplay","taxDisplay","paidDisplay","dateToLocalISO","slice","getDate","dateToLocalISOTime","getHours","getMinutes","TimeStringToJSDateOBJ","time_string","date_obj","time_split","setHours","setMinutes","financePaymentMethod","financePaymentMethods","initialPaymentMethod","organization","address","phone","email","registration","taxRegistration","creditInvoiceNumber","relationCompanyRegistration","relationCompanyTaxRegistration","relationAddress","relationPostcode","relationCity","relationCountry","deleteInvoicePayment","amountDisplay","paymentAddUrl","cards","payments","cancelAndCreateCreditInvoice","return_url","export_url","payment_add_url","toggle","triggerContent","creditInvoiceId","cancelAndCreateCreditFinanceInvoice","ml","GET_INVOICE_GROUPS_QUERY","GET_INVOICE_GROUP_QUERY","UPDATE_INVOICE_GROUP","ADD_INVOICE_GROUP","ARCHIVE_INVOICE_GROUP","archiveInvoiceGroup","invoiceGroups","financeInvoiceGroups","nextId","dueAfterDays","prefixYear","autoResetPrefixYear","displayPublic","INVOICE_GROUP_SCHEMA","moreThan","edit","Label","checked","addInvoiceGroup","updateInvoiceGroup","financeInvoiceGroup","INVOICE_GROUP_DEFAULT_SCHEMA","GET_INVOICE_GROUPS_DEFAULTS_QUERY","UPDATE_INVOICE_GROUP_DEFAULT","fetch_default_type_name","itemType","invoice_group_defaults","financeInvoiceGroupDefaults","mutation","updateDefault","GET_INVOICE_PAYMENT_QUERY","UPDATE_FINANCE_INVOICE_PAYMENT","form_type","invoiceId","invoice_id","queryLoading","queryError","invoice_number","padding","fullName","amount","role","ADD_FINANCE_INVOICE_PAYMENT","onCompleted","addInvoicePayment","mutationData","mutationLoading","mutationError","balance","invoiceQueryLoading","invoiceQueryError","invoiceData","paymentQueryLoading","paymentQueryError","paymentData","updateInvoicePayment","financeInvoicePayment","initialDate","FinanceOrderStatus","GET_ORDERS_QUERY","DELETE_FINANCE_ORDER","deleteOrder","orderNumber","orders","financeOrders","createdAt","batchType","toUpperCase","showAdd","batch_type","GET_PAYMENT_BATCHES_QUERY","GET_PAYMENT_BATCH_QUERY","GET_INPUT_VALUES","ADD_PAYMENT_BATCH","UPDATE_PAYMENT_BATCH","DELETE_PAYMENT_BATCH","msgEmptyList","deletePaymentBatch","financePaymentBatches","executionDate","financePaymentBatchCategory","FinancePaymentBatchCategory","categoryType","unstyled","get_add_options_collection","get_add_options_payment","batchId","setDisabled","updateFinancePaymentBatch","sentToBankColor","approvedColor","awaitingApprovalColor","rejectedColor","onClickStatusButton","newStatus","subTitle","List","create","category","financePaymentBatchCategories","includeZeroAmounts","appSettings","dateTimeFormat","timeFormatMoment","financePaymentBatch","countItems","exports","accountHolder","accountNumber","accountBic","currency","PAYMENT_BATCH_INVOICES_SCHEMA","PAYMENT_BATCH_CATEGORY_SCHEMA","PAYMENT_BATCH_EDIT_SCHEMA","batchCategoryType","category_type","addFinancePaymentBatch","yupSchema","createFinancePaymentBatch","inputValues","showArchive","GET_PAYMENT_BATCH_CATEGORIES_QUERY","GET_PAYMENT_BATCH_CATEGORY_QUERY","ARCHIVE_PAYMENT_BATCH_CATEGORY","archivePaymentBatchCategory","payment_batch_categories","ADD_PAYMENT_BATCH_CATEGORY","addFinancePaymentBatchCategory","UPDATE_PAYMENT_BATCH_CATEGORY","paymentBatchCategoryId","updateFinancePaymentBatchCategory","GET_FINANCE_ORDER_QUERY","UPDATE_ORDER","updateOrder","order","financeOrder","priceDisplay","message","GET_PAYMENT_METHODS_QUERY","GET_PAYMENT_METHOD_QUERY","ADD_PAYMENT_METHOD","UPDATE_PAYMENT_METHOD","ARCHIVE_PAYMENT_METHOD","archivePaymentMethod","paymentMethods","systemMethod","PAYMENT_METHOD_SCHEMA","addPaymentMethod","updatePaymentMethod","GET_TAXRATES_QUERY","GET_TAXRATE_QUERY","ADD_TAXRATE","UPDATE_TAXRATE","ARCHIVE_TAXRATE","archiveTaxrate","taxrates","TAX_RATE_SCHEMA","typeError","addFinanceTaxrate","classpasses_active","subscriptions_active","updateTaxrate","InsightHome","GET_CLASSPASSES_SOLD_QUERY","GET_CLASSPASSES_ACTIVE_QUERY","refetchData","previousYear","parseInt","currentYear","nextYear","export_url_active","export_url_sold","loadingSold","errorSold","dataSold","refetchSold","loadingActive","errorActive","dataActive","refetchActive","data_sold_label","chart_data_sold","insightAccountClasspassesSold","data_active_label","chart_data_active","insightAccountClasspassesActive","style","height","x","columns","colors","sold","names","axis","y","bottom","show","left","right","tooltip","point","RootComponent","GET_SUBSCRIPTIONS_SOLD_QUERY","GET_SUBSCRIPTIONS_ACTIVE_QUERY","classtypes_active","discoveries_active","languages_active","locations_active","levels_active","organization_active","organization_branding_active","announcements_active","insightAccountSubscriptionsSold","insightAccountSubscriptionsActive","OrganizationHome","ORGANIZATION_SCHEMA","customFileInputLabelStyle","whiteSpace","display","overflow","UPDATE_ORGANIZATION","updateOrganization","Image","src","urlLogoLogin","Details","urlLogoInvoice","urlLogoEmail","urlLogoShopHeader","urlLogoSelfCheckin","formTitle","inputFileName","fileInputLabel","handleFileInputChange","updateField","update_field","fileName","setFileName","useRef","files","inputVars","reader","FileReader","onload","reader_event","b64_enc_file","logoLoginFileName","logoLogin","logoInvoiceFileName","logoInvoice","logoEmailFileName","logoEmail","logoShopHeaderFileName","logoShopHeader","logoSelfCheckinFileName","logoSelfCheckin","file","current","readAsDataURL","showEditBack","GET_ANNOUNCEMENTS_QUERY","GET_ANNOUNCEMENT_QUERY","ADD_ANNOUNCEMENT","UPDATE_ANNOUNCEMENT","DELETE_ANNOUNCEMENT","deleteAnnouncement","displayShop","displayBackend","dateStart","dateEnd","priority","ANNOUNCEMENT_SCHEMA","addAnnouncement","announcementId","updateAnnouncement","organizationAnnouncement","GET_APPOINTMENTS_QUERY","GET_APPOINTMENT_QUERY","GET_INPUT_VALUES_QUERY","ARCHIVE_APPOINTMENT","organizationAppointmentCategory","category_id","appointments","organizationAppointments","organizationAppointmentPrices","archiveAppointmentCategorysRoom","APPOINTMENT_SCHEMA","ADD_APPOINTMENT","addAppointment","UPDATE_APPOINTMENT","OrganizationAppointmentEdit","organizationAppointment","initialGlaccount","initialCostcenter","updateLocation","GET_APPOINTMENT_CATEGORIES_QUERY","GET_APPOINTMENT_CATEGORY_QUERY","ARCHIVE_APPOINTMENT_CATEGORY","appointment_categories","organizationAppointmentCategories","archiveLocation","APPOINTMENT_CATEGORY_SCHEMA","ADD_ORGANIZATION_APPOINTMENT_CATEGORY","addAppointmentCategory","UPDATE_APPOINTMENT_CATEGORY","OrganizationAppointmentCategoryEdit","updateAppointmentCategory","GET_APPOINTMENT_PRICES_QUERY","GET_APPOINTMENT_PRICE_QUERY","DELETE_APPOINTMENT_PRICE","appointment_id","prices","deleteAppointmentPrice","APPOINTMENT_PRICE_SCHEMA","accountTeacherProfiles","ADD_APPOINTMENT_PRICE","OrganizationAppointmentPriceForm","UPDATE_APPOINTMENT_PRICE","OrganizationAppointmentPriceEdit","organizationAppointmentPrice","initialAccount","initialFinanceTaxRate","GET_CLASSPASSES_QUERY","GET_CLASSPASS_QUERY","CREATE_CLASSPASS","UPDATE_CLASSPASS","ARCHIVE_CLASSPASS","archiveClasspass","classpasses","organizationClasspasses","organizationMemberships","trialPass","unlimited","classes","validity","validityUnitDisplay","CLASSPASS_SCHEMA","validityUnit","quickStatsAmount","OrganizationClasspassForm","trialTimes","unlimied","createClasspass","organizationMembership","updateClasspass","initialMembership","organizationClasspass","GET_CLASSPASS_GROUPS_QUERY","GET_CLASSPASS_GROUP_QUERY","GET_CLASSPASS_GROUP_PASSES_QUERY","ADD_CLASSPASS_GROUP","UPDATE_CLASSPASS_GROUP","DELETE_CLASSPASS_GROUP","ADD_CARD_TO_GROUP","DELETE_CARD_FROM_GROUP","deleteClasspassGroup","classpass_groups","organizationClasspassGroups","substring","CLASSPASS_GROUP_SCHEMA","addClasspassGroup","hasExtraSpace","updateClasspassGroup","organizationClasspassGroup","groupId","addCardToGroup","deleteCardFromGroup","passes","group","group_passes","pass_id","GET_CLASSTYPES_QUERY","GET_CLASSTYPE_QUERY","ADD_CLASSTYPE","UPDATE_CLASSTYPE","UPDATE_CLASSTYPE_IMAGE","ARCHIVE_CLASSTYPE","archiveClasstype","classtypes","organizationClasstypes","urlImageThumbnailSmall","CLASSTYPE_SCHEMA","urlWebsite","url","addClasstype","image","updateClasstype","organizationClasstype","classtypeId","uploadImage","b64_enc_image","GET_DISCOVERIES_QUERY","GET_DISCOVERY_QUERY","ADD_DISCOVERY","UPDATE_DISCOVERY","ARCHIVE_DISCOVERY","archiveDiscovery","discoveries","organizationDiscoveries","DISCOVERY_SCHEMA","addDiscovery","updateDiscovery","organizationDiscovery","organizationId","organization_id","docTypes","docType","FormatISODateStr","ISODateStr","mediaUrl","headerLinks","sidebarButton","GET_DOCUMENTS_QUERY","GET_DOCUMENT_QUERY","ADD_DOCUMENT","UPDATE_DOCUMENT","DELETE_DOCUMENT","deleteOrganizationDocument","confirmDelete","version","documentType","document_type","back","organizationDocuments","ISODateString","urlDocument","getSubtitle","addDocument","documentFileName","updateDocument","organizationDocument","GET_LANGUAGES_QUERY","GET_LANGUAGE_QUERY","ADD_LANGUAGE","UPDATE_LANGUAGE","ARCHIVE_LANGUAGE","archiveLanguage","languages","organizationLanguages","LANGUAGE_SCHEMA","addLanguage","updateLanguage","organizationLanguage","GET_LOCATIONS_QUERY","GET_LOCATION_QUERY","ADD_LOCATION","UPDATE_LOCATION","ARCHIVE_LOCATION","locations","organizationLocations","LOCATION_SCHEMA","addLocation","organizationLocation","GET_LOCATION_ROOMS_QUERY","GET_LOCATION_ROOM_QUERY","ADD_LOCATION_ROOM","UPDATE_LOCATION_ROOM","ARCHIVE_LOCATION_ROOM","locationId","location_id","organizationLocationId","archiveLocationRoom","locationRooms","organizationLocationRooms","organizationLocationsRooms","LOCATION_ROOM_SCHEMA","addLocationRoom","updateLocationRoom","organizationLocationRoom","GET_LEVELS_QUERY","GET_LEVEL_QUERY","ADD_LEVEL","UPDATE_LEVEL","ARCHIVE_LEVEL","archiveLevel","levels","organizationLevels","LEVEL_SCHEMA","addLevel","updateLevel","organizationLevel","Validity","GET_MEMBERSHIPS_QUERY","GET_MEMBERSHIP_QUERY","ARCHIVE_MEMBERSHIP","memberships","archiveMembership","MEMBERSHIP_SCHEMA","CREATE_MEMBERSHIP","OrganizationMembershipAdd","createMembership","termsAndConditions","UPDATE_MEMBERSHIP","OrganizationMembershipEdit","GET_SUBSCRIPTIONS_QUERY","GET_SUBSCRIPTION_QUERY","CREATE_SUBSCRIPTION","UPDATE_SUBSCRIPTION","ARCHIVE_SUBSCRIPTION","archiveSubscription","subscriptions","organizationSubscriptions","subscriptionUnitDisplay","priceTodayDisplay","SUBSCRIPTION_SCHEMA","sortOrder","minDuration","subscriptionUnit","creditValidity","createSubscription","reconciliationClasses","updateSubscription","organizationSubscription","GET_SUBSCRIPTION_GROUPS_QUERY","GET_SUBSCRIPTION_GROUP_QUERY","GET_SUBSCRIPTION_GROUP_SUBSCRIPTIONS_QUERY","ADD_SUBSCRIPTION_GROUP","UPDATE_SUBSCRIPTION_GROUP","DELETE_SUBSCRIPTION_GROUP","deleteSubscriptionGroup","subscription_groups","organizationSubscriptionGroups","SUBSCRIPTION_GROUP_SCHEMA","addSubscriptionGroup","updateSubscriptionGroup","organizationSubscriptionGroup","group_subscriptions","GET_SUBSCRIPTION_PRICES_QUERY","GET_SUBSCRIPTION_PRICE_QUERY","DELETE_SUBSCRIPTION_PRICE","accounts_active","b2b_active","subscription_id","subscription_prices","organizationSubscriptionPrices","subscription","organizationSubscriptionsPrices","deleteSubscriptionPrice","SUBSCRIPTION_PRICE_SCHEMA","ADD_SUBSCRIPTION_PRICE","addSubscription","UPDATE_SUBSCRIPTION_PRICE","OrganizationSubscriptionPriceEdit","organizationSubscriptionPrice","updateSubscriptionPrice","RelationsHome","InputSearch","inputValue","createRef","initialValueKey","state","submitValue","doneTypingInterval","typingTimer","focus","clearTimeout","setState","onKeyUp","onInputKeyUp","bind","onInputChange","onClear","isActive","customer","teacher","employee","search","searchName","Select","GET_ACCOUNTS_QUERY","GET_ACCOUNT_QUERY","ADD_ACCOUNT","UPDATE_ACCOUNT","UPDATE_ACCOUNT_ACTIVE","DELETE_ACCOUNT","updateAccountActive","deleteAccount","accounts","reverse","classpass","classesRemainingDisplay","first_name","last_name","ACCOUNT_SCHEMA","profile_active","classes_active","tickets_active","teacher_profile_active","bank_account_active","notes_active","finance_payment_batch_category_item_active","accepted_documents_active","addAccount","accountId","createAccount","avatarSize","inline","placement","mobile","ISO_COUNTRY_CODES","dateOfBirth","emergency","postcode","city","country","Code","Name","keyNumber","account_id","headerTitle","updateAccount","gender","input_vars","GET_ACCOUNT_ACCEPTED_DOCUMENTS_QUERY","acceptedDocuments","accountAcceptedDocuments","dateAccepted","clientIp","GET_ACCOUNT_BANK_ACCOUNTS_QUERY","UPDATE_ACCOUNT_BANK_ACCOUNT","GET_ACCOUNT_BANK_ACCOUNT_MANDATE_QUERY","CREATE_ACCOUNT_BANK_ACCOUNT_MANDATE","UPDATE_ACCOUNT_BANK_ACCOUNT_MANDATE","DELETE_ACCOUNT_BANK_ACCOUNT_MANDATE","bankAccountId","holder","number","bic","updateAccountBankAccount","deleteAccountBankAccountMandate","accountBankAccount","accountBankAccounts","mandates","reference","signatureDate","bank_account_id","createAccountBankAccountMandate","refrence","mandateId","updateAccountBankAccountMandate","mandate","accountBankAccountMandate","GET_ACCOUNT_CLASSES_QUERY","GET_SCHEDULE_CLASS_ATTENDANCE_QUERY","DELETE_SCHEDULE_CLASS_ATTENDANCE","UPDATE_SCHEDULE_ITEM_ATTENDANCE","timeFormat","deleteScheduleItemAttendance","scheduleItem","timeStart","scheduleItemAttendances","bookingStatus","GET_ACCOUNT_CLASSPASSES_QUERY","GET_ACCOUNT_CLASSPASS_QUERY","CREATE_ACCOUNT_CLASSPASS","UPDATE_ACCOUNT_CLASSPASS","DELETE_ACCOUNT_CLASSPASS","deleteAccountClasspass","accountClasspasses","nullable","createAccountClasspass","classpassId","accountClasspass","initialdata","GET_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEMS_QUERY","GET_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM_QUERY","CREATE_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM","UPDATE_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM","DELETE_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM","deleteAccountFinancePaymentBatchCategoryItem","AccountFinancePaymentBatchCategoryItemsBase","batchCategoryItems","accountFinancePaymentBatchCategoryItems","replace","ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM_SCHEMA","addAccountFinancePaymentBatchCategoryItem","accountFinancePaymentBatchCategoryItemId","updateAccountFinancePaymentBatchCategoryItem","accountFinancePaymentBatchCategoryItem","GET_ACCOUNT_INVOICES_QUERY","CREATE_ACCOUNT_INVOICE","pageHeader","FinanceInvoiceStatus","registrationFeePaid","queryData","createInvoice","createFinanceInvoice","GET_ACCOUNT_MEMBERSHIPS_QUERY","GET_ACCOUNT_MEMBERSHIP_QUERY","DELETE_ACCOUNT_MEMBERSHIP","accountMemberships","deleteAccountMembership","frequencyType","CREATE_ACCOUNT_MEMBERSHIP","AccountMembershipAdd","UPDATE_ACCOUNT_MEMBERSHIP","AccountMembershipEdit","accountMembership","updateMembership","LoadMoreOnBottomScroll","GET_ACCOUNT_NOTES_QUERY","GET_ACCOUNT_NOTE_QUERY","CREATE_ACCOUNT_NOTE","UPDATE_ACCOUNT_NOTE","DELETE_ACCOUNT_NOTE","noteType","deleteAccountNote","notes","accountNotes","injury","noteBy","addNote","noteId","updateNote","accountNote","GET_ACCOUNT_ORDERS_QUERY","AccountOrderDelete","GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY","GET_ACCOUNT","UPDATE_ACCOUNT_SCHEDULE_EVENT_TICKET","updateAccountScheduleEventTicket","accountScheduleEventTickets","scheduleEventTicket","scheduleEvent","cancelled","invoiceItems","infoMailSent","GET_ACCOUNT_SUBSCRIPTIONS_QUERY","GET_ACCOUNT_SUBSCRIPTION_QUERY","CREATE_ACCOUNT_SUBSCRIPTION","UPDATE_ACCOUNT_SUBSCRIPTION","DELETE_ACCOUNT_SUBSCRIPTION","deleteAccountSubscription","accountSubscriptions","creditTotal","createAccountSubscription","subscriptionId","accountSubscription","tabs","class_tabs_position","active_tab","activeTab","linkTo","GET_ACCOUNT_SUBSCRIPTION_ALT_PRICES_QUERY","GET_ACCOUNT_SUBSCRIPTION_ALT_PRICE_QUERY","DELETE_ACCOUNT_SUBSCRIPTION_ALT_PRICE","AccountSubscriptionEditListBaseBase","onLoaMore","deleteAccountSubscriptionAltPrice","query_vars","buttonAdd","accountSubscriptionAltPrices","ACCOUNT_SUBSCRIPTION_ALT_PRICE_SCHEMA","ADD_ACCOUNT_SUBSCRIPTION_ALT_PRICE","addSubscriptionAltPrice","UPDATE_ACCOUNT_SUBSCRIPTION_ALT_PRICE","updateSubscriptionAltPrice","accountSubscriptionAltPrice","GET_ACCOUNT_SUBSCRIPTION_BLOCKS_QUERY","GET_ACCOUNT_SUBSCRIPTION_BLOCK_QUERY","DELETE_ACCOUNT_SUBSCRIPTION_BLOCK","deleteAccountSubscriptionBlock","accountSubscriptionBlocks","ACCOUNT_SUBSCRIPTION_BLOCK_SCHEMA","ADD_ACCOUNT_SUBSCRIPTION_BLOCK","addSubscriptionBlock","UPDATE_ACCOUNT_SUBSCRIPTION_BLOCK","updateSubscriptionBlock","accountSubscriptionBlock","mutationType","GET_ACCOUNT_SUBSCRIPTION_CREDITS_QUERY","GET_ACCOUNT_SUBSCRIPTION_CREDIT_QUERY","DELETE_ACCOUNT_SUBSCRIPTION_CREDIT","deleteAccountSubscriptionCredit","accountSubscriptionCredits","mutationAmount","ACCOUNT_SUBSCRIPTION_CREDIT_SCHEMA","ADD_ACCOUNT_SUBSCRIPTION_CREDIT","addSubscriptionCredit","UPDATE_ACCOUNT_SUBSCRIPTION_CREDIT","updateSubscriptionCredit","accountSubscriptionCredit","GET_FINANCE_INVOICE_ITEM_QUERY","deleteAccountSubscriptionInvoice","financeInvoiceItems","ACCOUNT_SUBSCRIPTION_INVOICE_SCHEMA","addFinanceInvoice","financeInvoiceId","GET_ACCOUNT_SUBSCRIPTION_PAUSES_QUERY","GET_ACCOUNT_SUBSCRIPTION_PAUSE_QUERY","DELETE_ACCOUNT_SUBSCRIPTION_PAUSE","deleteAccountSubscriptionPause","accountSubscriptionPauses","ACCOUNT_SUBSCRIPTION_PAUSE_SCHEMA","ADD_ACCOUNT_SUBSCRIPTION_PAUSE","addSubscriptionPause","UPDATE_ACCOUNT_SUBSCRIPTION_PAUSE","updateSubscriptionPause","accountSubscriptionPause","GET_ACCOUNT_TEACHER_PROFILE_QUERY","UPDATE_ACCOUNT_TEACHER_PROFILE","ACCOUNT_TEACHER_PROFILE_SCHEMA","events","education","bio","urlBio","updateAccountTeacherProfile","showArchived","GET_BUSINESSES_QUERY","GET_BUSINESS_QUERY","UPDATE_BUSINESS","confirm_archive","archiveFunction","confirm_unarchive","DELETE_BUSINESS","updateBusiness","deleteBusiness","businesses","show_archive","ADD_BUSINESS","addBusiness","b2b","businessId","createBusiness","business","emailContact","emailBilling","phone2","events_active","business_id","ScheduleHome","orderBy","dateFrom","dateUntil","DELETE_SCHEDULE_APPOINTMENT","edit_active","teachers_available_active","scheduleAppointments","nextWeekFrom","nextWeekUntil","subtract","currentWeekFrom","currentWeekUntil","scheduleItemId","timeEnd","ItemDivider","badge","badgeType","deleteScheduleAppointment","SCHEDULE_APPOINTMENTS_FILTER_LEVEL","clearable","showTimeSelect","showTimeSelectOnly","timeIntervals","frequencyInterval","CREATE_APPOINTMENT","ScheduleAppointmentAdd","appointmentId","AppointmentEditBase","menu_activeLink","default_card","sidebar_button","initialTimeStart","subtitle","locationRoom","starttime","appointment_edit_all_subtitle","card_title","ScheduleAppointmentEditAll","initialTimeEnd","updateScheduleAppointment","attendanceCountType","represent_teacher","textColor","represent_class_status","selectClass","GET_CLASSES_QUERY","GET_CLASS_QUERY","CREATE_CLASS","DELETE_SCHEDULE_CLASS","deleteScheduleClass","scheduleClasses","account2","role2","CLASS_SCHEMA","spaces","walkInSpaces","infoMailContent","teachers_active","prices_active","createScheduleClass","UPDATE_CLASS","classId","defaultCard","menuActiveLink","class_id","class_edit_all_subtitle","classtype","represent_teacher_role","updateScheduleClass","initialLevelID","shopBook","attend","SCHEDULE_CLASS_CLASSPASS_SCHEMA","GET_SCHEDULE_CLASS_CLASSPASSES_QUERY","UPDATE_SCHEDULE_CLASS_CLASSPASS","updateScheduleClassClasspass","scheduleItemOrganizationClasspassGroups","enroll","SCHEDULE_CLASS_SUBSCRIPTION_SCHEMA","GET_SCHEDULE_CLASS_SUBSCRIPTIONS_QUERY","UPDATE_SCHEDULE_CLASS_SUBSCRIPTION","updateScheduleClassSubscription","scheduleItemOrganizationSubscriptionGroups","GET_SCHEDULE_CLASS_TEACHERS_QUERY","GET_SINGLE_SCHEDULE_CLASS_TEACHERS_QUERY","ADD_SCHEDULE_CLASS_TEACHER","UPDATE_SCHEDULE_CLASS_TEACHER","DELETE_SCHEDULE_CLASS_TEACHER","deleteScheduleItemTeacher","ButtonAdd","scheduleItemTeachers","SCHEDULE_CLASS_TEACHER_SCHEMA","addScheduleClassTeacher","updateScheduleClassTeacher","scheduleItemTeacher","initialAccount2","get_accounts_query_variables","get_attendance_list_query_variables","schedule_item_id","class_subtitle","class_date","attendance_active","setAttendanceStatus","updateAttendance","showSearch","setShowSearch","queryAttendanceLoading","queryAttendanceError","queryAttendanceData","useLazyQuery","getAccounts","fetchMoreAccounts","queryAccountsLoading","queryAccountsError","queryAccountsData","checkedInIds","includes","GET_BOOKING_OPTIONS_QUERY","CREATE_SCHEDULE_ITEM_ATTENDANCE","getUrlFromReturnTo","returnTo","createInput","classCheckin","onClickCheckin","allowed","blocked","paused","priceDropin","locationID","priceTrial","listType","scheduleClassBookingOptions","scheduleItemPrices","deck","organizationClasspassDropin","organizationClasspassTrial","GET_SCHEDULE_CLASS_WEEKLY_OTCS_QUERY","DELETE_SCHEDULE_CLASS_WEEKLY_OTC","UPDATE_SCHEDULE_CLASS_WEEKLY_OTC","SCHEDULE_CLASS_EDIT_OTC_SCHEMA","deleteClassOTC","showDelete","updateScheduleClassWeeklyOTC","scheduleClassWeeklyOtcs","GET_SCHEDULE_ITEM_PRICES_QUERY","GET_SINGLE_SCHEDULE_ITEM_PRICE_QUERY","ADD_SCHEDULE_ITEM_PRICE","UPDATE_SCHEDULE_ITEM_PRICE","DELETE_SCHEDULE_ITEM_PRICE","deleteClassPrice","addScheduleClassPrice","editScheduleClassPrice","initialOrganizationClasspassDropin","initialOrganizationClasspassTrial","scheduleItemPrice","sidebarContent","displayMenu","GET_SCHEDULE_EVENTS_QUERY","GET_SCHEDULE_EVENT_QUERY","ARCHIVE_SCHEDULE_EVENT","archiveScheduleEvent","cardHeaderContent","scheduleEvents","SCHEDULE_EVENT_EDIT_SCHEMA","autoSendInfoMail","teacher2","tagline","preview","CREATE_SCHEDULE_EVENT","general_active","earlybirds_active","activities_active","media_active","createScheduleEvent","autoSentInfoMail","eventId","pageHeaderOptions","event_id","ScheduleEventEditMenu","cardSubTitle","UPDATE_SCHEDULE_EVENT","updateScheduleEvent","initialOrgranizationlevel","initialTeacher","initialTeacher2","GET_SCHEDULE_EVENT_ACTIVITIES_QUERY","GET_SCHEDULE_EVENT_ACTIVITY_QUERY","DELETE_SCHEDULE_EVENT_ACTIVITY","deleteScheduleEventActivity","scheduleItems","countAttendance","SCHEDULE_EVENT_ACTIVITY_SCHEMA","ADD_SCHEDULE_EVENT_ACTIVITY","addScheduleEventTicket","scheduleItemType","loadingActivity","errorActivity","dataActivity","cardActivitySubtitle","UPDATE_SCHEDULE_EVENT_ACTIVITY","updateScheduleEventTicket","GET_SCHEDULE_ITEM_ATTENDANCES_QUERY","schedule_item","GET_SCHEDULE_EVENT_EARLYBIRDS_QUERY","GET_SCHEDULE_EVENT_EARLYBIRD_QUERY","ADD_SCHEDULE_EVENT_EARLYBIRD","UPDATE_SCHEDULE_EVENT_EARLYBIRD","DELETE_SCHEDULE_EVENT_EARLYBIRD","deleteScheduleEventEarlybird","scheduleEventEarlybirds","discountPercentage","SCHEDULE_EVENT_EARLYBIRDS_SCHEMA","addScheduleEventEarlybird","ScheduleEventEarlybirdForm","scheduleEventEarlybirdId","updateScheduleEventEarlybird","scheduleEventEarlybird","GET_SCHEDULE_EVENT_MEDIAS_QUERY","GET_SCHEDULE_EVENT_MEDIA_QUERY","DELETE_SCHEDULE_EVENT_MEDIA","deleteScheduleEventMedia","scheduleEventMedias","SCHEDULE_EVENT_MEDIA_SCHEMA","ADD_SCHEDULE_EVENT_MEDIA","addScheduleEventMedia","imageFileName","scheduleEventMediaId","loadingMedia","errorMedia","dataMedia","scheduleEventMedia","UPDATE_SCHEDULE_EVENT_MEDIA","updateScheduleEventMedia","updateMedia","GET_SCHEDULE_EVENT_TICKETS_QUERY","GET_SCHEDULE_EVENT_TICKET_QUERY","DELETE_SCHEDULE_EVENT_TICKET","deleteScheduleEventTicket","scheduleEventTickets","isSoldOut","deletable","SCHEDULE_EVENT_TICKET_SCHEMA","ADD_SCHEDULE_EVENT_TICKET","ticketId","searchResults","loadingTicket","errorTicket","dataTicket","ticket","cardTicketSubtitle","UPDATE_SCHEDULE_EVENT_TICKET","initialFinanceGlaccount","initialFinanceCostcenter","GET_SCHEDULE_EVENT_TICKET_SCHEDULE_ITEMS_QUERY","SCHEDULE_EVENT_TICKET_SCHEDLE_ITEM_SCHEMA","included","UPDATE_SCHEDULE_EVENT_TICKET_SCHEDULE_ITEM","updateScheduleEventTicketScheduleItem","scheduleEventTicketActivities","scheduleEventTicketScheduleItems","fullEvent","ADD_ACCOUNT_SCHEDULE_EVENT_TICKET","addAccountScheduleEventTicket","accountIdsWithTickets","SELFCHECKIN_CHECKIN_SEARCH","refetchAttendance","GET_ORGANIZATION_LOCATIONS_QUERY","action","GET_LOCATION_CLASSES_QUERY","today","GET_SYSTEM_SETTINGS_QUERY","UPDATE_SYSTEM_SETTING","headerSubTitle","sidebarActive","setting","loadingVersion","errorVersion","dataVersion","loadingPatch","errorPatch","dataPatch","patch","systemSettings","finance_bank_accounts_iban","updateSettings","iban","settings","i","finance_currency","finance_currency_symbol","loadingCurrency","errorCurrency","dataCurrency","loadingSymbol","errorSymbol","dataSymbol","symbol","DATETIME_SCHEMA","system_hostname","queryVariables","hostname","mollie_api_key","GET_SYSTEM_MAIL_TEMPLATES_QUERY","GET_SYSTEM_MAIL_TEMPLATE_QUERY","UPDATE_SYSTEM_MAIL_TEMPLATE","mailTemplates","systemMailTemplates","help","subject","comments","SettingsMailTemplateEditBase","templateInfo","template_name","helpTexts","suffix","getTemplateInfo","systemMailTemplate","GET_SHOP_FEATURES_QUERY","UPDATE_SHOP_FEATURES","SHOP_FEATURES_SCHEMA","shopFeatures","systemFeatureShop","workflow_class_book_days_advance","workflow_class_cancel_until","loadingDaysAdvance","errorDaysAdvance","dataDaysAdvance","loadingCancelUntil","errorCancelUntil","dataCancelUntil","refreshTokenExp","accountTitle","accountLink","headerImageUrl","getHeaderImageUrl","GET_USER_PROFILE","buttonText","DisplayClassInfo","classDate","classData","scheduleClass","GET_ACCOUNT_CLASS_QUERY","accountName","attendanceId","attendance_id","loadingAttendance","errorAttendance","dataAttendance","loadingUser","errorUser","dataUser","updateScheduleItemAttendance","scheduleItemAttendance","cancellationPossible","GET_SCHEDULE_CLASS_QUERY","complete","QUERY_ACCOUNT_CLASSPASSES","skip","ShopAccountClasspassesBase","eventTickets","QUERY_ACCOUNT_INVOICES","responsive","muted","QUERY_ACCOUNT_ORDERS","get_order_card_status_color","cancelFunction","cancelOrder","UPDATE_PROFILE","updateProfile","QUERY_ACCOUNT_SUBSCRIPTIONS","ShopAccountSubscriptionsBase","checkoutProgress","color_order","color_payment","color_complete","addOn","alreadyBooked","classType","class_info","bookingOpenOn","CREATE_ORDER","buttonBook","isBefore","prevWeekFrom","prevWeekUntil","xs","sm","media","urlImageThumbnailLarge","dateString","IconGroup","IconItem","pt","eventTicket","showButton","ticketScheduleItems","Category","isEarlybirdPrice","Price","totalPriceDisplay","AttributeList","AttributeItem","toLowerCase","Button","tickets","eventID","cs_django_links","EXPORT_TERMS_AND_CONDITIONS","EXPORT_PRIVACY_POLICY","scheduleEventTicketId","createOrder","createOrderInput","orderId","createFinanceOrder","ShopCheckoutForm","GET_SHOP_ANNOUNCEMENTS_QUERY","GET_ORDER_QUERY","orderItems","attendanceDate","CREATE_PAYMENT_LINK","btnPayNow","initialBtnText","btn_text","setBtnText","createPaymentLink","setAttribute","paymentLink","createFinanceOrderPaymentLink","financeOrderPaymentLink","subHeader","contentText","paymentText","total","schduleItemAttendances","btnLink","GET_ORGANIZATION_CLASSPASSES_QUERY","loadingClass","errorClass","dataClass","GET_ORGANIZATION_SUBSCRIPTIONS_QUERY","ShopSubscriptionPricingCard","PASSWORD_CHANGE_SCHEMA","passwordCurrent","passwordNew","passwordNew2","oneOf","urlLogo","updatePassword","CSStandaloneFormPage","vars","messages","graphQLErrors","etFieldValue","esetFieldTouched","preventDefault","password","doTokenAuth","username","next","tokenAuth","refreshToken","info","setActive","deleteCookie","deleteRefreshCookie","offsetMd","Error404","SetCurrentUrlAsNext","PrivateRoute","rest","authTokenExpired","path","ContinueAsYouAre","render","LoginRequired","SessionExpired","tokenExp","reload","loadingAppSettings","errorAppSettings","dataAppSettings","loadingOrganization","errorOrganization","dataOrganization","exact","HomeHome","AutomationHome","AutomationAccountSubscriptionCredits","AutomationAccountSubscriptionCreditAdd","AutomationAccountSubscriptionInvoices","AutomationAccountSubscriptionInvoicesAdd","AutomationAccountSubscriptionMollieCollections","AutomationAccountSubscriptionMollieCollectionAdd","FinanceCostCenters","FinanceCostCenterAdd","FinanceCostCenterEdit","FinanceInvoices","FinanceInvoiceEdit","FinanceInvoiceGroups","FinanceInvoiceGroupAdd","FinanceInvoiceGroupEdit","FinanceInvoiceGroupDefaults","FinanceInvoicePaymentAdd","FinanceInvoicePaymentEdit","FinanceGLAccounts","FinanceGLAccountAdd","FinanceGLAccountEdit","FinanceOrders","FinanceOrderEdit","FinancePaymentBatches","FinancePaymentBatchAddWhat","FinancePaymentBatchView","FinancePaymentCollectionBatchAdd","FinancePaymentCollectionBatchEdit","FinancePaymentBatchCategories","FinancePaymentBatchCategoryAdd","FinancePaymentBatchCategoryEdit","FinancePaymentMethods","FinancePaymentMethodAdd","FinancePaymentMethodEdit","FinanceTaxRates","FinanceTaxRatesAdd","FinanceTaxRatesEdit","OrganizationEdit","OrganizationBranding","OrganizationBrandingEdit","OrganizationDocuments","OrganizationListDocuments","OrganizationDocumentAdd","OrganizationDocumentEdit","OrganizationAnnouncements","OrganizationAnnouncementAdd","OrganizationAnnouncementEdit","OrganizationAppointmentCategories","OrganizationAppointmentCategoryAdd","OrganizationAppointments","OrganizationAppointmentAdd","OrganizationAppointmentPrices","OrganizationAppointmentPriceAdd","OrganizationClasspasses","OrganizationClasspassAdd","OrganizationClasspassEdit","OrganizationClasspassesGroups","OrganizationClasspassesGroupAdd","OrganizationClasspassesGroupEdit","OrganizationClasspassesGroupEditPasses","OrganizationClasstypes","OrganizationClasstypeAdd","OrganizationClasstypeEdit","OrganizationClasstypeEditImage","OrganizationDiscoveries","OrganizationDiscoveryAdd","OrganizationDiscoveryEdit","OrganizationLanguages","OrganizationLanguageAdd","OrganizationLanguageEdit","OrganizationLevels","OrganizationLevelAdd","OrganizationLevelEdit","OrganizationLocations","OrganizationLocationAdd","OrganizationLocationEdit","OrganizationLocationRooms","OrganizationLocationRoomAdd","OrganizationLocationRoomEdit","OrganizationMemberships","OrganizationSubscriptions","OrganizationSubscriptionAdd","OrganizationSubscriptionEdit","OrganizationSubscriptionsGroups","OrganizationSubscriptionsGroupAdd","OrganizationSubscriptionsGroupEdit","OrganizationSubscriptionsGroupEditSubscriptions","OrganizationSubscriptionsPrices","OrganizationSubscriptionPriceAdd","RelationsAccounts","RelationsAccountAdd","RelationsAccountProfile","AccountAcceptedDocuments","RelationsAccountBankAccount","RelationsAccountBankAccountMandateAdd","RelationsAccountBankAccountMandateEdit","RelationsAccountClasses","AccountClasspasses","AccountClasspassAdd","AccountClasspassEdit","AccountFinancePaymentBatchCategoryItems","AccountFinancePaymentBatchCategoryItemAdd","AccountFinancePaymentBatchCategoryItemEdit","AccountInvoices","AccountInvoiceAdd","AccountMemberships","AccountNotes","AccountNoteAdd","AccountNoteEdit","AccountOrders","AccountScheduleEventTickets","AccountSubscriptions","AccountSubscriptionAdd","AccountSubscriptionEdit","AccountSubscriptionEditAltPrices","AccountSubscriptionEditAltPriceAdd","AccountSubscriptionEditAltPriceEdit","AccountSubscriptionEditBlocks","AccountSubscriptionEditBlockAdd","AccountSubscriptionEditBlockEdit","AccountSubscriptionEditCredits","AccountSubscriptionEditCreditAdd","AccountSubscriptionEditCreditEdit","AccountSubscriptionEditInvoices","AccountSubscriptionEditInvoiceAdd","AccountSubscriptionEditPauses","AccountSubscriptionEditPauseAdd","AccountSubscriptionEditPauseEdit","RelationsAccountTeacherProfile","RelationsB2B","RelationsB2BAdd","RelationsB2BEdit","ScheduleAppointments","ScheduleClasses","ScheduleClassAdd","ScheduleClassEditAll","ScheduleClassClasspasses","ScheduleClassPrices","ScheduleClassPriceAdd","ScheduleClassPriceEdit","ScheduleClassSubscriptions","ScheduleClassTeachers","ScheduleClassTeacherAdd","ScheduleClassTeacherEdit","ScheduleClassAttendance","ScheduleClassBook","ScheduleClassEdit","ScheduleEvents","ScheduleEventAdd","ScheduleEventEdit","ScheduleEventActivities","ScheduleEventActivityAdd","ScheduleEventActivityEdit","ScheduleEventActivityAttendance","ScheduleEventEarlybirds","ScheduleEventEarlybirdAdd","ScheduleEventEarlybirdEdit","ScheduleEventMedia","ScheduleEventMediaAdd","ScheduleEventMediaEdit","ScheduleEventTickets","ScheduleEventTicketAdd","ScheduleEventTicketEdit","ScheduleEventTicketEditActivities","ScheduleEventTicketEditCustomers","InsightClasspasses","InsightSubscriptions","SelfCheckinCheckin","SelfCheckinBookingOptions","SelfCheckinLocations","SelfCheckinLocationClasses","ShopHome","ShopAccountHome","ShopAccountClassCancel","ShopAccountClassInfo","ShopClasses","ShopAccountClasspasses","ShopAccountEventTickets","ShopAccountInvoices","ShopAccountOrders","ShopAccountProfile","ShopAccountSubscriptions","ShopCheckoutPayment","ShopCheckoutComplete","ShopClassesSchedule","ShopClassBook","ShopClassBooked","ShopClasspasses","ShopClasspass","ShopContact","ShopEvents","ShopEvent","ShopEventTicket","ShopSubscriptions","ShopSubscription","SettingsHome","SettingsAbout","SettingsFinanceBankAccounts","SettingsFinanceCurrency","SettingsGeneralDateTime","SettingsGeneralSystem","SettingsIntegrationMollie","SettingsMailTemplates","SettingsMailTemplateEdit","SettingsShopFeatures","SettingsWorkflowClassBooking","UserChangePassword","UserLogin","UserLoginRequired","UserLogout","UserSessionExpired","UserWelcome","String","prototype","n","substr","csrftoken","errorLink","onError","networkError","operation","forward","response","forEach","extensions","CSEC","Observable","observer","client","mutate","subscriber","subscribe","getCsrfToken","a","fetch","json","csrfToken","httpLink","createHttpLink","uri","credentials","request","Cookies","set","setContext","headers","csrfMiddleWare","ApolloLink","ApolloClient","from","cache","InMemoryCache","App","ApolloProvider","Boolean","ReactDOM","getElementById","navigator","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.e6fb0970.chunk.js","sourcesContent":["import i18n from \"i18next\"\nimport { initReactI18next } from \"react-i18next\"\n// import Backend from 'i18next-xhr-backend'\nimport LanguageDetector from 'i18next-browser-languagedetector'\n\n// the translations\n// (tip move them in a JSON file and import them)\n// const resources = {\n//   en: {\n//     translations: {\n//         school: \"School\"\n//     }\n//   }\n// }\n\nimport en_US_common from \"./i18n/en_US/common\"\nconst resources = {\n    en_US: {\n        common: en_US_common\n    },\n}\n\nconsole.log(resources)\n\n\ni18n\n  // load translation using xhr -> see /public/locales\n  // learn more: https://github.com/i18next/i18next-xhr-backend\n  //   .use(Backend)\n  // detect user language\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\n  .use(LanguageDetector)\n  // pass the i18n instance to react-i18next.\n  .use(initReactI18next)\n  // init i18next\n  // for all options read: https://www.i18next.com/overview/configuration-options\n  .init({\n    resources,\n    lng: \"en_US\",\n    fallbackLng: \"en_US\",\n    ns: [\"common\"],\n    defaultNS: \"common\",\n    debug: true,\n\n    // keySeparator: false, // we do not use keys in form messages.welcome\n    keySeparator: '.', // we use keys in form messages.welcome\n\n    interpolation: {\n      escapeValue: false, // react already safes from xss\n    }\n  })\n\n  export default i18n","import { gql } from \"@apollo/client\"\n\n\nexport const TOKEN_AUTH = gql`\n  mutation TokenAuth($username: String!, $password: String!) {\n    tokenAuth(username: $username, password: $password) {\n    token\n    }\n  } \n`\n\n\nexport const TOKEN_VERIFY = gql`\n  mutation VerifyToken($token: String!) {\n    verifyToken(token: $token) {\n      payload\n    }\n  }\n`\n\n\nexport const TOKEN_REFRESH = gql`\n  mutation RefreshToken {\n    refreshToken {\n      token\n      payload\n      refreshExpiresIn\n      refreshToken\n    }\n  }\n`\n\n\nexport const TOKEN_REVOKE = gql`\n  mutation RevokeToken($refreshToken: String!) {\n    revokeToken(refreshToken: $refreshToken) {\n      revoked\n    }\n  }\n`\n\n\nexport const TOKEN_COOKIE_DELETE = gql`\n  mutation {\n    deleteTokenCookie {\n      deleted\n    }\n  }\n`\n\n\nexport const TOKEN_REFRESH_COOKIE_DELETE = gql`\n  mutation {\n    deleteRefreshTokenCookie {\n      deleted\n    }\n  }\n`\n\n\nexport const UPDATE_ACCOUNT_PASSWORD = gql`\n  mutation UpdateAccountPassword($input: UpdateAccountPasswordInput!) {\n    updateAccountPassword(input: $input) {\n      ok\n    }\n  }\n`","const cs_local_storage_keys = {\n    AUTH_TOKEN: 'costasiella:authToken',\n    AUTH_TOKEN_EXP: 'costasiella:authTokenExp',\n    AUTH_TOKEN_ORIGIAT: 'costasiella:authTokenorigIat',\n    AUTH_REFRESH_TOKEN_EXP: 'costasiella:refreshTokenExp',\n    AUTH_LOGIN_NEXT: 'costasiella:authLoginNext',\n    FINANCE_INVOICES_FILTER_STATUS: 'costasiella:financeInvoicesFilterStatus',\n    FINANCE_INVOICES_EDIT_RETURN: 'costasiella:financeInvoiceEditReturn',\n    FINANCE_ORDERS_FILTER_STATUS: 'costasiella:financeOrdersFilterStatus',\n    FINANCE_PAYMENT_BATCH_CATEGORIES_SHOW_ARCHIVE: 'costasiella:financePaymentBatchCategoriesShowArchive',\n    INSIGHT_CLASSPASSES_YEAR: 'costasiella:insightClasspassesYear',\n    INSIGHT_SUBSCRIPTIONS_YEAR: 'costasiella:insightSubscriptionsYear',\n    ORGANIZATION_CLASSTYPES_ARCHIVED: 'costasiella:organizationClasstypesArchived',\n    RELATIONS_ACCOUNTS_FILTER_TYPE: 'costasiella:relationsAccountsFilterType',\n    RELATIONS_ACCOUNTS_SEARCH: 'costasiella:relationsAccountsSearch',\n    RELATIONS_ACCOUNTS_IS_ACTIVE: 'costasiella:relationsAccountsIsActive',\n    RELATIONS_ACCOUNT_NOTES_NOTE_TYPE: 'costasiella:relationsAccountNotesNoteType',\n    RELATIONS_BUSINESSES_SHOW_ARCHIVE: 'costasiella:relationsBusinessesShowArchive',\n    RELATIONS_BUSINESSES_SEARCH: 'costasiella:relationsBusinessesSeach',\n    SCHEDULE_APPOINTMENTS_DATE_FROM: 'costasiella:scheduleAppointmentsDateFrom',\n    SCHEDULE_APPOINTMENTS_DATE_UNTIL: 'costasiella:scheduleAppointmentsDateUntil',\n    SCHEDULE_APPOINTMENTS_ORDER_BY: 'costasiella:scheduleAppointmentsOrderBy',\n    SCHEDULE_APPOINTMENTS_FILTER_CLASSTYPE: 'costasiella:scheduleAppointmentsFilterClasstype',\n    SCHEDULE_APPOINTMENTS_FILTER_LOCATION: 'costasiella:scheduleAppointmentsFilterLocation',\n    SCHEDULE_CLASSES_DATE_FROM: 'costasiella:scheduleClassesDateFrom',\n    SCHEDULE_CLASSES_DATE_UNTIL: 'costasiella:scheduleClassesDateUntil',\n    SCHEDULE_CLASSES_ORDER_BY: 'costasiella:scheduleClassesOrderBy',\n    SCHEDULE_CLASSES_FILTER_CLASSTYPE: 'costasiella:scheduleClassesFilterClasstype',\n    SCHEDULE_CLASSES_FILTER_LEVEL: 'costasiella:scheduleClassesFilterLevel',\n    SCHEDULE_CLASSES_FILTER_LOCATION: 'costasiella:scheduleClassesFilterLocation',\n    SCHEDULE_CLASSES_CLASS_ATTENDANCE_SEARCH: 'costasiella:scheduleClassesClassAttendanceSearch',\n    SCHEDULE_EVENTS_ARCHIVED: 'costasiella:scheduleEventsArchived',\n    SCHEDULE_EVENTS_TICKETS_CUSTOMERS_SEARCH: 'costasiella:scheduleEventsTicketsCustomersSearch',\n    SHOP_CLASSES_DATE_FROM: 'costasiella:shopClassesDateFrom',\n    SHOP_CLASSES_DATE_UNTIL: 'costasiella:shopClassesDateUntil',\n    SHOP_CLASSES_ORDER_BY: 'costasiella:shopClassesOrderBy',\n    SHOP_CLASSES_FILTER_CLASSTYPE: 'costasiella:shopClassesFilterClasstype',\n    SHOP_CLASSES_FILTER_LEVEL: 'costasiella:shopClassesFilterLevel',\n    SHOP_CLASSES_FILTER_LOCATION: 'costasiella:shopClassesFilterLocation',\n}\n\nexport default cs_local_storage_keys\n","const cs_error_codes = {\n    USER_NOT_LOGGED_IN: \"USER_NOT_LOGGED_IN\"\n}\n\nexport default cs_error_codes\n","import CSLS from \"./cs_local_storage\"\n\n\nexport const CSAuth = {\n    login(token) {\n        // localStorage.setItem(CSLS.AUTH_TOKEN, token)\n        localStorage.removeItem(CSLS.AUTH_LOGIN_NEXT)\n    },\n    updateTokenInfo(refreshTokenData) {\n        console.log(\"Token payload:\")\n        console.log(refreshTokenData)\n        localStorage.setItem(CSLS.AUTH_TOKEN_EXP, refreshTokenData.payload.exp)\n        localStorage.setItem(CSLS.AUTH_TOKEN_ORIGIAT, refreshTokenData.payload.origIat)\n        localStorage.setItem(CSLS.AUTH_REFRESH_TOKEN_EXP, refreshTokenData.refreshExpiresIn)\n    },\n    logout(expired=false) {\n        if (!expired) {\n            // Manual logout, remove everything\n            localStorage.removeItem(CSLS.AUTH_TOKEN_EXP)\n            localStorage.removeItem(CSLS.AUTH_TOKEN_ORIGIAT)\n            localStorage.removeItem(CSLS.AUTH_LOGIN_NEXT)\n            localStorage.removeItem(CSLS.AUTH_REFRESH_TOKEN_EXP)\n        } \n        // //  Always remove token\n        // localStorage.removeItem(CSLS.AUTH_TOKEN)\n        \n    }\n}\n","import { gql } from \"@apollo/client\"\n\n\nexport const GET_APP_SETTINGS_QUERY = gql`\n  query AppSettings {\n    appSettings(id: \"QXBwU2V0dGluZ3NOb2RlOjE=\") {\n      dateFormat\n      timeFormat\n      timeFormatMoment\n      dateTimeFormatMoment\n    }\n  }\n`\n\n\nexport const UPDATE_APP_SETTINGS = gql`\n  mutation UpdateAppSettings($input: UpdateAppSettingsInput!) {\n    updateAppSettings(input: $input) {\n      appSettings {\n        id\n      }\n    }\n  }\n`","import { gql } from \"@apollo/client\"\n\n\nexport const GET_ORGANIZATION_QUERY = gql`\n  query Organization($id: ID!) {\n    organization(id:$id) {\n      id\n      name\n      address\n      phone\n      email\n      registration\n      taxRegistration\n      urlLogoLogin\n      urlLogoInvoice\n      urlLogoEmail\n      urlLogoShopHeader\n      urlLogoSelfCheckin\n    }\n  }\n`","import React from 'react'\n\nconst AppSettingsContext = React.createContext({})\n\nexport const AppSettingsProvider = AppSettingsContext.Provider\nexport const AppSettingsConsumer = AppSettingsContext.Consumer\n\nexport default AppSettingsContext","import React from 'react'\n\nconst OrganizationContext = React.createContext({})\n\nexport const OrganizationProvider = OrganizationContext.Provider\nexport const OrganizationConsumer = OrganizationContext.Consumer\n\nexport default OrganizationContext","import { gql } from \"@apollo/client\"\n\nconst GET_USER = gql`\n  query User($before: String, $after: String)  {\n    user {\n      id\n      isActive\n      email\n      firstName\n      lastName\n      employee\n      teacher\n      groups {\n        edges {\n          node {\n            id\n            name\n            permissions(first: 1000, before: $before, after: $after) {\n              pageInfo {\n                hasNextPage\n                hasPreviousPage\n                startCursor\n                endCursor                \n              }\n              edges {\n                node {\n                  id\n                  name\n                  codename\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`\n\nexport default GET_USER","export function get_all_permissions(user) {\n    const permissions = {}\n    const groups = user.groups\n    if (groups.edges) {\n      for (let edge_index in groups.edges) {\n        let group_edge = groups.edges[edge_index]\n        if (group_edge.node) {\n          let group_node = group_edge.node \n          if (group_node.permissions.edges) {\n            for (let permission_index in group_node.permissions.edges) {\n              let permission_edge = group_node.permissions.edges[permission_index] \n              if (permission_edge.node) {\n                  let permission_node = permission_edge.node\n                  let codename = permission_node.codename\n                  let codename_split = codename.split('_')\n                  // If code name is not in permissions, create a new set\n                  if (!(codename_split[1] in permissions)) {\n                  permissions[codename_split[1]] = new Set()\n                  }\n                  // Add permission name to set\n                  permissions[codename_split[1]].add(codename_split[0])\n              }\n            }\n          }\n        }\n      }\n    }\n    \n    return permissions\n}\n\n\nexport const has_permission = (permissions, permission, resource) => {\n  let you_shall_not_pass = true\n\n  if (resource in permissions) {\n    if (permissions[resource].has(permission)) {\n      console.log('found permission')\n      you_shall_not_pass = false\n    }\n  }\n  \n  return !you_shall_not_pass\n}\n","import React from 'react'\nimport { useQuery } from \"@apollo/client\"\n\nimport GET_USER from '../queries/system/get_user'\nimport { get_all_permissions } from \"../tools/user_tools\"\n\n\nfunction check_permission(permissions, permission, resource) {\n  let you_shall_not_pass = true\n\n  if (resource in permissions) {\n    if (permissions[resource].has(permission)) {\n      you_shall_not_pass = false\n    }\n  }\n  \n  return !you_shall_not_pass\n}\n\nfunction HasPermissionWrapper({permission, resource, children}) {\n  const {loading, error, data} = useQuery(GET_USER)\n  \n  if (loading) return <p>Loading...</p>\n  if (error) return <p>Error loading user... :(</p>\n\n  const permissions = get_all_permissions(data.user)\n\n  if (check_permission(permissions, permission, resource)) {\n    return children\n  } else {\n    return ''\n  }\n}\n  \nexport default HasPermissionWrapper","import { gql } from \"@apollo/client\"\n\nexport const GET_BACKEND_ANNOUNCEMENTS_QUERY = gql`\n  query OrganizationAnnouncements($after: String, $before: String) {\n    organizationAnnouncements(first: 100, before: $before, after: $after, displayPublic: true, displayBackend: true) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          displayPublic\n          displayBackend\n          title\n          content\n          dateStart\n          dateEnd\n          priority\n        }\n      }\n    }\n  }\n`","// @flow\n\nimport * as React from \"react\"\nimport { withTranslation } from 'react-i18next'\nimport { NavLink, withRouter } from \"react-router-dom\"\nimport { useQuery } from \"@apollo/client\"\nimport { ToastContainer, Slide } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\nimport 'react-confirm-alert/src/react-confirm-alert.css'\nimport { Link } from 'react-router-dom'\n\nimport GET_USER from \"../queries/system/get_user\"\nimport { get_all_permissions, has_permission } from \"../tools/user_tools\"\n\nimport {\n  Site,\n  Nav,\n  Grid,\n  Button,\n  // Page,\n  RouterContextProvider,\n} from \"tabler-react\";\n\nimport type { NotificationProps } from \"tabler-react\";\n\ntype Props = {|\n  +children: React.Node,\n|};\n\ntype State = {|\n  notificationsObjects: Array<NotificationProps>,\n|};\n\ntype subNavItem = {|\n  +value: string,\n  +to?: string,\n  +icon?: string,\n  +LinkComponent?: React.ElementType,\n|};\n\ntype navItem = {|\n  +value: string,\n  +to?: string,\n  +icon?: string,\n  +active?: boolean,\n  +LinkComponent?: React.ElementType,\n  +subItems?: Array<subNavItem>,\n  +useExact?: boolean,\n|};\n\n\nconst getNavBarItems = (t, user) => {\n  let items: Array<navItem> = []\n  let permissions = get_all_permissions(user)\n\n  items.push({\n    value: t(\"home.title\"),\n    to: \"/backend\",\n    icon: \"home\",\n    LinkComponent: withRouter(NavLink),\n    useExact: true,\n  })\n\n  // Relations\n  if (\n    (has_permission(permissions, 'view', 'account'))\n  ){\n    items.push({\n      value: t(\"relations.title\"),\n      to: \"/relations\",\n      icon: \"users\",\n      LinkComponent: withRouter(NavLink),\n    })\n  }\n\n  // Schedule\n  if (\n    (has_permission(permissions, 'view', 'scheduleclass')) ||\n    (has_permission(permissions, 'view', 'scheduleevent'))\n  ){\n    items.push({\n      value: t(\"schedule.title\"),\n      to: \"/schedule\",\n      icon: \"calendar\",\n      LinkComponent: withRouter(NavLink),\n    })\n  }\n\n  // Finance\n  if (\n    (has_permission(permissions, 'view', 'financecostcenter')) ||\n    (has_permission(permissions, 'view', 'financeglaccount')) ||\n    (has_permission(permissions, 'view', 'financetaxrate')) \n  ){\n    items.push({\n      value: t(\"finance.title\"),\n      to: \"/finance\",\n      icon: \"dollar-sign\",\n      LinkComponent: withRouter(NavLink),\n    })\n  }\n\n  // Organization\n  if (\n    (has_permission(permissions, 'view', 'organizationclasspass')) || \n    (has_permission(permissions, 'view', 'organizationclasstype')) ||\n    (has_permission(permissions, 'view', 'organizationdiscovery')) ||\n    (has_permission(permissions, 'view', 'organizationlocation')) ||\n    (has_permission(permissions, 'view', 'organizationmembership')) ||  \n    (has_permission(permissions, 'view', 'organization')) \n   ){\n   items.push({\n      value: t(\"organization.title\"),\n      to: \"/organization\",\n      icon: \"feather\",\n      LinkComponent: withRouter(NavLink),\n    })\n  }\n\n  // Insight\n  if (\n    (has_permission(permissions, 'view', 'insight'))\n   ){\n    items.push({\n      value: t(\"insight.title\"),\n      to: \"/insight\",\n      icon: \"bar-chart-2\",\n      LinkComponent: withRouter(NavLink),\n    })\n  }\n\n  // Automation\n  if (\n    (has_permission(permissions, 'view', 'automation'))\n   ){\n    items.push({\n      value: t(\"automation.title\"),\n      to: \"/automation\",\n      icon: \"loader\",\n      LinkComponent: withRouter(NavLink),\n    })\n  }\n\n  // let goToSubItems = []\n  // if (has_permission(permissions, 'view', 'selfcheckin')) {\n  //   goToSubItems.push(\n  //     { value: t(\"selfcheckin.home.title\"), to: \"/selfcheckin\", LinkComponent: withRouter(NavLink) }\n  //   )\n  // }\n  // goToSubItems.push(\n  //   { value: t(\"shop.title\"), to: \"/shop\", LinkComponent: withRouter(NavLink) }\n  // )\n\n  // // Go to\n  // if (\n  //   (has_permission(permissions, 'view', 'selfcheckin'))\n  //  ){\n  //   items.push({\n  //     value: t(\"goto.title\"),\n  //     icon: \"link\",\n  //     subItems: goToSubItems,\n  //   })\n  // }\n\n\n  return items\n\n}\n\nconst now = new Date()\n\nfunction SiteWrapper({t, match, history, children}) {\n  const { error, loading, data, fetchMore } = useQuery(GET_USER)\n\n  if (loading) return <p>{t('general.loading_with_dots')}</p>;\n  if (error) return <p>{t('system.user.error_loading')}</p>; \n\n  console.log(data)\n\n  return (\n    <Site.Wrapper\n      headerProps={{\n          href: \"/\",\n          alt: \"Costasiella\",\n          imageURL: \"/d/static/logos/stock/logo_stock_backend.png\", // Set logo url here\n          navItems: (\n            <Nav.Item type=\"div\" className=\"d-none d-md-flex\">\n              <Link to=\"/settings\">\n                <Button\n                  className=\"mr-2\"\n                  icon=\"settings\"\n                  outline\n                  size=\"sm\"\n                  color=\"primary\"\n                >\n                  {t('general.settings')}\n                </Button>\n              </Link>\n              <Link to=\"/user/welcome\">\n                <Button\n                  className=\"mr-2\"\n                  icon=\"link\"\n                  outline\n                  size=\"sm\"\n                  color=\"primary\"\n                >\n                  {t('goto.title')}\n                </Button>\n              </Link>\n            </Nav.Item>\n          ),\n          // notificationsTray: {\n          //   notificationsObjects,\n          //   markAllAsRead: () =>\n          //     this.setState(\n          //       () => ({\n          //         notificationsObjects: this.state.notificationsObjects.map(\n          //           v => ({ ...v, unread: false })\n          //         ),\n          //       }),\n          //       () =>\n          //         setTimeout(\n          //           () =>\n          //             this.setState({\n          //               notificationsObjects: this.state.notificationsObjects.map(\n          //                 v => ({ ...v, unread: true })\n          //               ),\n          //             }),\n          //           5000\n          //         )\n          //     ),\n          //   unread: unreadCount,\n          // },\n          accountDropdown: {\n          avatarURL: \"#\",\n          name: data.user.firstName + ' ' + data.user.lastName,\n          description: \"\",\n          options: [\n            // { icon: \"user\", value: \"Profile\" },\n            { icon: \"lock\", value: t(\"user.change_password.title\"), to: \"/#/user/password/change/\" },\n            { isDivider: true },\n            { icon: \"user\", value: t(\"shop.account.title\"), to: \"/#/shop/account/\" },\n            { isDivider: true },\n            { icon: \"log-out\", value: t(\"user.logout.title\"), to: \"/#/user/logout/\" },\n          ],\n        },\n        }}\n        // navProps={{ itemsObjects: navBarItems }}\n        navProps={{ itemsObjects: getNavBarItems(t, data.user) }}\n        routerContextComponentType={withRouter(RouterContextProvider)}\n        footerProps={{\n          // links: [\n          //   <a href=\"#\">First Link</a>,\n          //   <a href=\"#\">Second Link</a>,\n          //   <a href=\"#\">Third Link</a>,\n          //   <a href=\"#\">Fourth Link</a>,\n          //   <a href=\"#\">Five Link</a>,\n          //   <a href=\"#\">Sixth Link</a>,\n          //   <a href=\"#\">Seventh Link</a>,\n          //   <a href=\"#\">Eigth Link</a>,\n          // ],\n          // note:\n          //   \"Premium and Open Source dashboard template with responsive and high quality UI. For Free!\",\n          copyright: (\n            <React.Fragment>\n              Copyleft © {now.getFullYear()}.\n              <a\n                href=\"https://www.costasiella.com\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {\" \"}\n                Edwin van de Ven\n              </a>{\". \"}\n              All rights reserved.\n            </React.Fragment>\n          ),\n          nav: (\n            <React.Fragment>\n              <Grid.Col auto={true}>\n                {/* <List className=\"list-inline list-inline-dots mb-0\">\n                  <List.Item className=\"list-inline-item\">\n                    <a href=\"./docs/index.html\">Documentation</a>\n                  </List.Item>\n                  <List.Item className=\"list-inline-item\">\n                    <a href=\"./faq.html\">FAQ</a>\n                  </List.Item>\n                </List> */}\n              </Grid.Col>\n              <Grid.Col auto={true}>\n                {/* <Button\n                  href=\"https://github.com/tabler/tabler-react\"\n                  size=\"sm\"\n                  outline\n                  color=\"primary\"\n                  RootComponent=\"a\"\n                >\n                  Source code\n                </Button> */}\n              </Grid.Col>\n            </React.Fragment>\n          ),\n        }}\n      >\n        {children}\n        <ToastContainer \n          autoClose={5000} \n          transition={Slide}\n        />\n      </Site.Wrapper>\n  )\n}\n\nexport default withTranslation()(SiteWrapper)\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Container,\n  Page\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\n\n\nfunction HomeHomeBase({ t, match, history, children }) {\n  \n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"organization.announcements.title\")} />\n          {children}\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(HomeHomeBase))","// @flow\n\nimport React from 'react'\nimport { useQuery } from '@apollo/client'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { GET_BACKEND_ANNOUNCEMENTS_QUERY } from \"./queries\"\n\nimport HomeHomeBase from './HomeHomeBase';\n\n\nfunction HomeHome({ t, match }) {\n  const { loading, error, data } = useQuery(GET_BACKEND_ANNOUNCEMENTS_QUERY);\n\n  if (loading) return (\n    <HomeHomeBase>\n      {t(\"general.loading_with_dots\")}\n    </HomeHomeBase>\n  )\n  if (error) return (\n    <HomeHomeBase>\n      {t(\"home.home.announcements.error_loading\")}\n    </HomeHomeBase>\n  )\n\n  console.log(\"%%%%%%%%%%%%%%%%%%%%%\")\n  console.log(data)\n\n  const announcements = data.organizationAnnouncements\n\n  // Empty list\n  if (!announcements.edges.length) return (\n    <HomeHomeBase>\n      {t(\"home.home.announcements_empty_list\")}\n    </HomeHomeBase>\n  )\n\n  // Data\n  return (\n    <HomeHomeBase>\n      <Grid.Row>\n        {(announcements.edges.length) ? announcements.edges.map(({ node }) => (\n          <Grid.Col md={6}>\n            <Card title={node.title}>\n              <Card.Body>\n                <div dangerouslySetInnerHTML={{ __html:node.content }}></div>\n              </Card.Body>\n            </Card> \n          </Grid.Col>\n        )) : \"\"\n        }\n      </Grid.Row>\n    </HomeHomeBase>\n  )\n}\n\n\n// class HomeHome extends Component {\n//   constructor(props) {\n//     super(props)\n//     console.log(\"Home home props:\")\n//     console.log(props)\n//   }\n\n\n//   render() {\n//     const t = this.props.t\n//     const match = this.props.match\n//     const history = this.props.history\n//     const id = match.params.id\n\n//     return (\n//       <SiteWrapper>\n//         <div className=\"my-3 my-md-5\">\n//           <Container>\n//             <Page.Header title={t(\"home.title\")} />\n//             <Grid.Row>\n//               <Grid.Col md={9}>\n//               <Card>\n//                 <Card.Header>\n//                   <Card.Title>{t('home.title')}</Card.Title>\n//                 </Card.Header>\n//                 <Card.Body>\n//                     Hello world!\n//                 </Card.Body>\n//               </Card>\n//               </Grid.Col>\n//             </Grid.Row>\n//           </Container>\n//         </div>\n//     </SiteWrapper>\n//     )}\n//   }\n\n\nexport default withTranslation()(withRouter(HomeHome))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from 'react-router'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Button,\n  Icon,\n} from \"tabler-react\";\n\nfunction SettingsHomeItemButton({ t, link, linkTitle=null }) {\n  return (\n    <Link to={link} >\n      <Button \n        outline\n        block\n        color=\"primary\"\n      >\n        {linkTitle ? linkTitle: t(\"automation.home.link_edit\")} <Icon name=\"chevron-right\" />\n      </Button>\n    </Link>\n  )\n}\n\nexport default withTranslation()(withRouter(SettingsHomeItemButton))","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from 'react-router'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Button,\n  Card,\n  Container,\n  Grid,\n  Icon,\n  Page,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport AutomationHomeItemButton from \"./AutomationHomeItemButton\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\n\nfunction AutomationHome({ t, match, params }) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('automation.title')} />\n          <Grid.Row>\n            <Grid.Col md={12}>\n              <h4>{t(\"automation.account.subscriptions.title\")}</h4>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <Card>\n                <Card.Body>\n                  <h5>{t(\"automation.account.subscriptions.invoices.title\")}</h5>\n                  {t(\"automation.account.subscriptions.invoices.explanation\")}\n                  <br /><br />\n                  <AutomationHomeItemButton link=\"/automation/account/subscriptions/invoices\" />\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <Card>\n                <Card.Body>\n                  <h5>{t(\"automation.account.subscriptions.credits.title\")}</h5>\n                  {t(\"automation.account.subscriptions.credits.explanation\")}\n                  <br /><br />\n                  <AutomationHomeItemButton link=\"/automation/account/subscriptions/credits\" />\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <Card>\n                <Card.Body>\n                  <h5>{t(\"automation.account.subscriptions.mollie_collection.title\")}</h5>\n                  {t(\"automation.account.subscriptions.mollie_collection.explanation\")}\n                  <br /><br />\n                  <AutomationHomeItemButton link=\"/automation/account/subscriptions/mollie_collections\" />\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(AutomationHome))","import React, { Component } from 'react'\nimport { withTranslation } from 'react-i18next'\n\nimport {\n    Button,\n    Card,\n  } from \"tabler-react\"\n\n\nclass ContentCard extends Component {\n    componentDidMount() {\n      window.addEventListener(\"scroll\", this.handleOnScroll);\n    }\n  \n    componentWillUnmount() {\n      window.removeEventListener(\"scroll\", this.handleOnScroll);\n    }\n\n    handleOnScroll = () => {\n      // http://stackoverflow.com/questions/9439725/javascript-how-to-detect-if-browser-window-is-scrolled-to-bottom\n      var scrollTop =\n        (document.documentElement && document.documentElement.scrollTop) ||\n        document.body.scrollTop;\n      var scrollHeight =\n        (document.documentElement && document.documentElement.scrollHeight) ||\n        document.body.scrollHeight;\n      var clientHeight =\n        document.documentElement.clientHeight || window.innerHeight;\n      var scrolledToBottom = Math.ceil(scrollTop + clientHeight) >= scrollHeight;\n      if (scrolledToBottom) {\n        const pageInfo = this.props.pageInfo\n        if (pageInfo) {\n          if (pageInfo.hasNextPage) {\n            this.props.onLoadMore()\n          }\n        }\n      }\n    }\n\n    render() {\n      const t = this.props.t\n      const cardTitle = this.props.cardTitle\n      const headerContent = this.props.headerContent\n      const onLoadMore = this.props.onLoadMore \n      const pageInfo = this.props.pageInfo\n      const children = this.props.children\n      const cardTabs = this.props.cardTabs\n      const hasCardBody = this.props.hasCardBody \n\n\n      return(\n        <Card>\n          <Card.Header>\n            <Card.Title>{cardTitle}</Card.Title>\n            {headerContent}\n          </Card.Header>\n          {cardTabs}\n          {(hasCardBody) ? \n            <Card.Body>{children}</Card.Body> :\n            children\n          }\n          <Card.Footer>\n            {(!pageInfo) ? '':\n              (pageInfo.hasNextPage) ? \n                <Button \n                  link\n                  onClick={onLoadMore} \n                  >\n                  {t('general.load_more')}\n                </Button>\n               : t('general.loaded_all')\n            }\n          </Card.Footer>\n        </Card>\n      )\n    }\n}\n\nContentCard.defaultProps = {\n  onLoadMore: f=>f,\n  hasCardBody: true\n}\n  \nexport default withTranslation()(ContentCard)\n","import { gql } from \"@apollo/client\"\n\nexport const GET_TASK_RESULT_QUERY = gql`\nquery TaskResults($before: String, $after: String, $taskName:String) {\n  djangoCeleryResultTaskResults(first: 100, before: $before, after: $after, taskName: $taskName) {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n    edges {\n      node {\n        id\n        taskId\n        taskName\n        taskArgs\n        taskKwargs\n        status\n        contentType\n        contentEncoding\n        result\n        dateDone\n        traceback\n        meta\n      }\n    }\n  }\n}\n`\n","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Button\n} from \"tabler-react\"\n\nconst ButtonBack = ({ t, returnUrl }) => (\n  <Link to={returnUrl}>\n    <Button\n      color=\"secondary\"\n      icon=\"arrow-left\">\n        {t(\"general.back\")}\n    </Button>\n  </Link>\n)\n\nexport default withTranslation()(ButtonBack)\n","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport ButtonBack from \"../ui/ButtonBack\"\n\n\nfunction AutomationBack({ t, returnUrl=\"/automation\" }) { \n  return (\n    <ButtonBack returnUrl={returnUrl} />\n  )\n}\n\nexport default withTranslation()(AutomationBack)","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Page,\n  Grid,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport AutomationBack from \"../../../AutomationBack\"\n\nfunction AutomationAccountSubscriptionCreditsBase({t, history, match, children, returnUrl=\"/automation\"}) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('automation.title')} >\n            <div className=\"page-options d-flex\">\n              <AutomationBack returnUrl={returnUrl} />\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={12}>\n              {children}\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(AutomationAccountSubscriptionCreditsBase))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Badge,\n} from \"tabler-react\";\n\n// Status reference\n// https://docs.celeryproject.org/en/stable/userguide/tasks.html\n\nfunction AutomationTaskResultStatus({t, history, match, status}) {\n  switch(status) {\n    case \"PENDING\":\n      return <Badge color=\"secondary\">{t(\"automation.tasks.result_statuses.pending\")}</Badge>\n      break\n    case \"STARTED\":\n      return <Badge color=\"primary\">{t(\"automation.tasks.result_statuses.started\")}</Badge>\n      break\n    case \"SUCCESS\":\n      return <Badge color=\"success\">{t(\"automation.tasks.result_statuses.success\")}</Badge>\n      break\n    case \"FAILURE\":\n      return <Badge color=\"danger\">{t(\"automation.tasks.result_statuses.failure\")}</Badge>\n      break\n    case \"RETRY\":\n      return <Badge color=\"warning\">{t(\"automation.tasks.result_statuses.retry\")}</Badge>\n      break\n    case \"REVOKED\":\n      return <Badge color=\"warning\">{t(\"automation.tasks.result_statuses.revoked\")}</Badge>\n      break\n    default:\n      return \"status unknown\"\n  }\n}\n\nexport default withTranslation()(withRouter(AutomationTaskResultStatus))","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\nimport moment from 'moment'\nimport AppSettingsContext from '../../../../context/AppSettingsContext'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../../../general/ContentCard\"\n\nimport { GET_TASK_RESULT_QUERY } from \"../../../queries\"\nimport AutomationAccountSubscriptionCreditsBase from './AutomationAccountSubscriptionCreditsBase'\nimport AutomationTaskResultStatus from \"../../../AutomationTaskResultStatus\"\n\n// const ARCHIVE_LEVEL = gql`\n//   mutation ArchiveOrganizationLevel($input: ArchiveOrganizationLevelInput!) {\n//     archiveOrganizationLevel(input: $input) {\n//       organizationLevel {\n//         id\n//         archived\n//       }\n//     }\n//   }\n// `\n\nfunction AutomationAccountSubscriptionCredits({t, history, match}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateTimeFormatMoment = appSettings.dateTimeFormatMoment\n\n  const { error, loading, data, fetchMore } = useQuery(GET_TASK_RESULT_QUERY, {\n    variables: {\n      taskName: \"costasiella.tasks.account.subscription.credits.tasks.account_subscription_credits_add_for_month\"\n    }\n  })\n\n  const headerOptions = <Card.Options>\n    <Link to={\"/automation/account/subscriptions/credits/add\"}>\n      <Button color=\"primary\" \n              size=\"sm\"\n      >\n      {t('general.new_task')}\n      </Button>\n    </Link>\n  </Card.Options>\n\n\n  // Loading\n  if (loading) return (\n    <AutomationAccountSubscriptionCreditsBase>\n      <p>{t('general.loading_with_dots')}</p>\n    </AutomationAccountSubscriptionCreditsBase>\n  )\n  // Error\n  if (error) {\n    console.log(error)\n    return (\n      <AutomationAccountSubscriptionCreditsBase>\n        <p>{t('general.error_sad_smiley')}</p>\n      </AutomationAccountSubscriptionCreditsBase>\n    )\n  }\n\n  console.log(\"Automation credits data:\")\n  console.log(data)\n  const taskResults = data.djangoCeleryResultTaskResults\n  // const account = data.account\n  // const scheduleItemAttendances = data.scheduleItemAttendances\n  \n\n  return (\n    <AutomationAccountSubscriptionCreditsBase>\n      <ContentCard \n        cardTitle={t('automation.account.subscriptions.credits.title_card')}\n        pageInfo={taskResults.pageInfo}\n        headerContent={headerOptions}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: taskResults.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.djangoCeleryResultTaskResults.edges\n              const pageInfo = fetchMoreResult.djangoCeleryResultTaskResults.pageInfo\n\n              return newEdges.length\n                ? {\n                    // Put the new invoices at the end of the list and update `pageInfo`\n                    // so we have the new `endCursor` and `hasNextPage` values\n                    djangoCeleryResultTaskResults: {\n                      __typename: previousResult.djangoCeleryResultTaskResults.__typename,\n                      edges: [ ...previousResult.djangoCeleryResultTaskResults.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                : previousResult\n              }\n            })\n          }} \n        >\n          { (!taskResults.edges.length) ? \n            // Empty list\n            <p>{t('automation.account.subscriptions.credits.empty_list')}</p>\n            :\n            // Content\n            <Table>\n              <Table.Header>\n                <Table.Row key={v4()}>\n                  <Table.ColHeader>{t('automation.general.status.title')}</Table.ColHeader>\n                  <Table.ColHeader>{t('automation.general.time_completed')}</Table.ColHeader>\n                  <Table.ColHeader>{t('automation.general.task_kwargs')}</Table.ColHeader>\n                  <Table.ColHeader>{t('automation.general.task_result')}</Table.ColHeader>\n                  <Table.ColHeader></Table.ColHeader>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {taskResults.edges.map(({ node }) => (\n                  <Table.Row key={v4()}>\n                    <Table.Col>\n                      <AutomationTaskResultStatus status={node.status} />\n                    </Table.Col>\n                    <Table.Col>\n                      {moment(node.dateDone).format(dateTimeFormatMoment)}\n                    </Table.Col>\n                    <Table.Col>\n                      {node.taskKwargs}\n                    </Table.Col>\n                    <Table.Col>\n                      {node.result}\n                    </Table.Col>\n                    <Table.Col>\n\n                    </Table.Col>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          }\n        </ContentCard>\n    </AutomationAccountSubscriptionCreditsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AutomationAccountSubscriptionCredits))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Page,\n  Grid,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport AutomationBack from \"../../../AutomationBack\"\n\nfunction AutomationAccountSubscriptionInvoicesBase({t, history, match, children, returnUrl=\"/automation\"}) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('automation.title')} >\n            <div className=\"page-options d-flex\">\n              <AutomationBack returnUrl={returnUrl} />\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={12}>\n              {children}\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(AutomationAccountSubscriptionInvoicesBase))","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\nimport moment from 'moment'\nimport AppSettingsContext from '../../../../context/AppSettingsContext'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../../../general/ContentCard\"\n\nimport { GET_TASK_RESULT_QUERY } from \"../../../queries\"\nimport AutomationAccountSubscriptionInvoicesBase from './AutomationAccountSubscriptionInvoicesBase'\nimport AutomationTaskResultStatus from \"../../../AutomationTaskResultStatus\"\n\n// const ARCHIVE_LEVEL = gql`h\n//   mutation ArchiveOrganizationLevel($input: ArchiveOrganizationLevelInput!) {\n//     archiveOrganizationLevel(input: $input) {\n//       organizationLevel {\n//         id\n//         archived\n//       }\n//     }\n//   }\n// `\n\nfunction AutomationAccountSubscriptionInvoices({t, history, match}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateTimeFormatMoment = appSettings.dateTimeFormatMoment\n\n  const { error, loading, data, fetchMore } = useQuery(GET_TASK_RESULT_QUERY, {\n    variables: {\n      taskName: \"costasiella.tasks.account.subscription.invoices.tasks.account_subscription_invoices_add_for_month\"\n    }\n  })\n\n  const headerOptions = <Card.Options>\n    <Link to={\"/automation/account/subscriptions/invoices/add\"}>\n      <Button color=\"primary\" \n              size=\"sm\"\n      >\n      {t('general.new_task')}\n      </Button>\n    </Link>\n  </Card.Options>\n\n\n  // Loading\n  if (loading) return (\n    <AutomationAccountSubscriptionInvoicesBase>\n      <p>{t('general.loading_with_dots')}</p>\n    </AutomationAccountSubscriptionInvoicesBase>\n  )\n  // Error\n  if (error) {\n    console.log(error)\n    return (\n      <AutomationAccountSubscriptionInvoicesBase>\n        <p>{t('general.error_sad_smiley')}</p>\n      </AutomationAccountSubscriptionInvoicesBase>\n    )\n  }\n\n  console.log(\"Automation invoices data:\")\n  console.log(data)\n  const taskResults = data.djangoCeleryResultTaskResults\n  // const account = data.account\n  // const scheduleItemAttendances = data.scheduleItemAttendances\n  \n\n  return (\n    <AutomationAccountSubscriptionInvoicesBase>\n      <ContentCard \n        cardTitle={t('automation.account.subscriptions.invoices.title_card')}\n        pageInfo={taskResults.pageInfo}\n        headerContent={headerOptions}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: taskResults.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.djangoCeleryResultTaskResults.edges\n              const pageInfo = fetchMoreResult.djangoCeleryResultTaskResults.pageInfo\n\n              return newEdges.length\n                ? {\n                    // Put the new invoices at the end of the list and update `pageInfo`\n                    // so we have the new `endCursor` and `hasNextPage` values\n                    djangoCeleryResultTaskResults: {\n                      __typename: previousResult.djangoCeleryResultTaskResults.__typename,\n                      edges: [ ...previousResult.djangoCeleryResultTaskResults.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                : previousResult\n              }\n            })\n          }} \n        >\n          { (!taskResults.edges.length) ? \n            // Empty list\n            <p>{t('automation.account.subscriptions.invoices.empty_list')}</p>\n            :\n            // Content\n            <Table>\n              <Table.Header>\n                <Table.Row key={v4()}>\n                  <Table.ColHeader>{t('automation.general.status.title')}</Table.ColHeader>\n                  <Table.ColHeader>{t('automation.general.time_completed')}</Table.ColHeader>\n                  <Table.ColHeader>{t('automation.general.task_kwargs')}</Table.ColHeader>\n                  <Table.ColHeader>{t('automation.general.task_result')}</Table.ColHeader>\n                  <Table.ColHeader></Table.ColHeader>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {taskResults.edges.map(({ node }) => (\n                  <Table.Row key={v4()}>\n                    <Table.Col>\n                      <AutomationTaskResultStatus status={node.status} />\n                    </Table.Col>\n                    <Table.Col>\n                      {moment(node.dateDone).format(dateTimeFormatMoment)}\n                    </Table.Col>\n                    <Table.Col>\n                      {node.taskKwargs}\n                    </Table.Col>\n                    <Table.Col>\n                      {node.result}\n                    </Table.Col>\n                    <Table.Col>\n\n                    </Table.Col>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          }\n        </ContentCard>\n    </AutomationAccountSubscriptionInvoicesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AutomationAccountSubscriptionInvoices))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const AUTOMATION_ACCOUNT_SUBSCRIPTION_INVOICES_SCHEMA = Yup.object().shape({\n  subscriptionYear: Yup.number()\n    .required()\n    .positive()\n    .min(1000)\n    .max(9999),\n  subscriptionMonth: Yup.number()\n    .required()\n    .positive()\n    .min(1)\n    .max(12),\n  invoiceDate: Yup.string()\n    .required(),\n  })\n","import React, { useContext } from 'react'\nimport DatePicker from \"react-datepicker\"\nimport { withTranslation } from 'react-i18next'\n\nimport AppSettingsContext from \"../context/AppSettingsContext\"\n\n\nfunction CSDatePicker ({t, selected, onChange=f=>f, onBlur=f=>f, className=\"form-control\", isClearable=true, placeholderText=\"\"}) {\n  const appSettings = useContext(AppSettingsContext)\n  const sysDateFormat = appSettings.dateFormat\n  let dateFormat\n\n  switch (sysDateFormat) {\n    case \"MM-DD-YYYY\":\n      dateFormat = \"MM-dd-yyyy\"\n      break\n    case \"DD-MM-YYYY\":\n      dateFormat = \"dd-MM-yyyy\"\n      break\n    default:\n      dateFormat = \"yyyy-MM-dd\"\n  }\n\n\n  return (\n    <DatePicker \n        todayButton={t('general.today')}\n        dateFormat={dateFormat}\n        selected={selected}\n        placeholderText={(placeholderText) ? placeholderText : t('datepicker.placeholder')}\n        isClearable={isClearable}\n        className={className}\n        showMonthDropdown\n        showYearDropdown\n        dropdownMode=\"select\"\n        onChange={(date) => onChange(date)}\n        onBlur={() => onBlur()}\n    />\n  )\n}\n\nexport default withTranslation()(CSDatePicker)","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\nimport { v4 } from \"uuid\"\n\nimport {\n    Button,\n    Card,\n    Form,\n    Grid,\n    Icon\n  } from \"tabler-react\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\nimport CSDatePicker from \"../../../../ui/CSDatePicker\"\n\n\nfunction AutomationAccountSubscriptionInvoicesForm({ t, history, isSubmitting, errors, returnUrl}) {\n  return (\n    <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.subscription_year')}>\n              <Field type=\"number\" \n                      name=\"subscriptionYear\" \n                      className={(errors.subscriptionYear) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"subscriptionYear\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.subscription_month')}>\n              <Field type=\"number\" \n                      name=\"subscriptionMonth\" \n                      className={(errors.subscriptionMonth) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"subscriptionMonth\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('automation.account.subscriptions.invoices.invoice_date')}>\n              <Field component=\"select\" \n                    name=\"invoiceDate\" \n                    className={(errors.invoiceDate) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"today\" key={v4()}>{t('automation.account.subscriptions.invoices.today')}</option>\n                <option value=\"first_of_month\" key={v4()}>{t('automation.account.subscriptions.invoices.invoice_date_first_day_month')}</option>                \n              </Field>\n              <ErrorMessage name=\"invoiceDate\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.description')}>\n              <Field type=\"text\" \n                      name=\"description\" \n                      className={(errors.description) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n        <Button \n         color=\"primary\"\n          className=\"pull-right\" \n          type=\"submit\" \n          disabled={isSubmitting}\n          >\n          {t('general.new_task')} <Icon name=\"chevron-right\" />\n        </Button>\n        <Link to={returnUrl}>\n          <Button color=\"link\">\n            {t('general.cancel')}\n          </Button>\n        </Link>\n      </Card.Footer>\n    </FoForm>\n  )\n}\n  \nexport default withTranslation()(withRouter(AutomationAccountSubscriptionInvoicesForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { GET_TASK_RESULT_QUERY } from \"../../../queries\"\nimport { AUTOMATION_ACCOUNT_SUBSCRIPTION_INVOICES_SCHEMA } from './yupSchema'\nimport AutomationAccountSubscriptionInvoicesForm from './AutomationAccountSubscriptionInvoicesForm'\n\n\nimport {\n  Card,\n} from \"tabler-react\"\n// import SiteWrapper from \"../../SiteWrapper\"\n// import HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport AutomationAccountSubscriptionInvoicesBase from './AutomationAccountSubscriptionInvoicesBase'\n\n\nconst ADD_TASK = gql`\n  mutation CreateAccountSubscriptionInvoicesForMonth($input:CreateAccountSubscriptionInvoicesForMonthInput!) {\n    createAccountSubscriptionInvoicesForMonth(input: $input) {\n      ok\n    }\n  }\n`\n\n\nfunction AutomationAccountSubscriptionCreditAdd({ t, history }) {\n  const [addTask] = useMutation(ADD_TASK)\n  const returnUrl = \"/automation/account/subscriptions/invoices\"\n\n  return (\n    <AutomationAccountSubscriptionInvoicesBase returnUrl={returnUrl}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('automation.account.subscriptions.invoices.title_add')}</Card.Title>\n        </Card.Header>\n        <Formik\n          initialValues={{ \n            subscriptionYear: new Date().getFullYear(), \n            subscriptionMonth: new Date().getMonth() + 1 ,\n            description: '',\n            invoiceDate: 'today'\n          }}\n          validationSchema={AUTOMATION_ACCOUNT_SUBSCRIPTION_INVOICES_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              addTask({ variables: {\n                input: {\n                  month: values.subscriptionMonth,\n                  year: values.subscriptionYear,\n                  description: values.description,\n                  invoiceDate: values.invoiceDate\n                }\n              }, refetchQueries: [\n                  {query: GET_TASK_RESULT_QUERY, \n                    variables: {\n                      taskName: \"costasiella.tasks.account.subscription.invoices.tasks.account_subscription_invoices_add_for_month\"\n                  }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('automation.account.subscriptions.invoices.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors }) => (\n              <AutomationAccountSubscriptionInvoicesForm \n                isSubmitting={isSubmitting}\n                errors={errors}\n                returnUrl={returnUrl}\n              />\n          )}\n        </Formik>\n      </Card>\n    </AutomationAccountSubscriptionInvoicesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AutomationAccountSubscriptionCreditAdd))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const AUTOMATION_ACCOUNT_SUBSCRIPTION_CREDIT_SCHEMA = Yup.object().shape({\n  subscriptionYear: Yup.number()\n    .required()\n    .positive()\n    .min(1000)\n    .max(9999),\n  subscriptionMonth: Yup.number()\n    .required()\n    .positive()\n    .min(1)\n    .max(12),\n  })\n","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n    Button,\n    Card,\n    Form,\n    Grid,\n    Icon\n  } from \"tabler-react\"\n  import { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nfunction AutomationAccountSubscriptionCreditForm({ t, history, isSubmitting, errors, returnUrl}) {\n  return (\n    <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.subscription_year')}>\n              <Field type=\"number\" \n                      name=\"subscriptionYear\" \n                      className={(errors.subscriptionYear) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"subscriptionYear\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.subscription_month')}>\n              <Field type=\"number\" \n                      name=\"subscriptionMonth\" \n                      className={(errors.subscriptionMonth) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"subscriptionMonth\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n        <Button \n         color=\"primary\"\n          className=\"pull-right\" \n          type=\"submit\" \n          disabled={isSubmitting}\n          >\n          {t('general.new_task')} <Icon name=\"chevron-right\" />\n        </Button>\n        <Link to={returnUrl}>\n          <Button color=\"link\">\n            {t('general.cancel')}\n          </Button>\n        </Link>\n      </Card.Footer>\n    </FoForm>\n  )\n}\n  \nexport default withTranslation()(withRouter(AutomationAccountSubscriptionCreditForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { GET_TASK_RESULT_QUERY } from \"../../../queries\"\nimport { AUTOMATION_ACCOUNT_SUBSCRIPTION_CREDIT_SCHEMA } from './yupSchema'\nimport AutomationAccountSubscriptionCreditForm from './AutomationAccountSubscriptionCreditForm'\n\n\nimport {\n  Card,\n} from \"tabler-react\"\n// import SiteWrapper from \"../../SiteWrapper\"\n// import HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport AutomationAccountSubscriptionCreditsBase from './AutomationAccountSubscriptionCreditsBase'\n\n\nconst ADD_TASK = gql`\n  mutation CreateAccountSubscriptionCreditForMonth($input:CreateAccountSubscriptionCreditForMonthInput!) {\n    createAccountSubscriptionCreditForMonth(input: $input) {\n      ok\n    }\n  }\n`\n\n\nfunction AutomationAccountSubscriptionCreditAdd({ t, history }) {\n  const [addTask] = useMutation(ADD_TASK)\n  const returnUrl = \"/automation/account/subscriptions/credits\"\n\n  return (\n    <AutomationAccountSubscriptionCreditsBase returnUrl={returnUrl}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('automation.account.subscriptions.credits.title_add')}</Card.Title>\n        </Card.Header>\n        <Formik\n          initialValues={{ \n            subscriptionYear: new Date().getFullYear(), \n            subscriptionMonth: new Date().getMonth() + 1 }}\n          validationSchema={AUTOMATION_ACCOUNT_SUBSCRIPTION_CREDIT_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              addTask({ variables: {\n                input: {\n                  month: values.subscriptionMonth,\n                  year: values.subscriptionYear\n                }\n              }, refetchQueries: [\n                  {query: GET_TASK_RESULT_QUERY, \n                    variables: {\n                      taskName: \"costasiella.tasks.account.subscription.credits.tasks.account_subscription_credits_add_for_month\"\n                  }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('automation.account.subscriptions.credits.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors }) => (\n              <AutomationAccountSubscriptionCreditForm \n                isSubmitting={isSubmitting}\n                errors={errors}\n                returnUrl={returnUrl}\n              />\n          )}\n        </Formik>\n      </Card>\n    </AutomationAccountSubscriptionCreditsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AutomationAccountSubscriptionCreditAdd))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Page,\n  Grid,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport AutomationBack from \"../../../AutomationBack\"\n\nfunction AutomationAccountSubscriptionMollieCollectionBase({t, history, match, children, returnUrl=\"/automation\"}) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('automation.title')} >\n            <div className=\"page-options d-flex\">\n              <AutomationBack returnUrl={returnUrl} />\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={12}>\n              {children}\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(AutomationAccountSubscriptionMollieCollectionBase))","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\nimport moment from 'moment'\nimport AppSettingsContext from '../../../../context/AppSettingsContext'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../../../general/ContentCard\"\n\nimport { GET_TASK_RESULT_QUERY } from \"../../../queries\"\nimport AutomationAccountSubscriptionMollieCollectionBase from './AutomationAccountSubscriptionMollieCollectionBase'\nimport AutomationTaskResultStatus from \"../../../AutomationTaskResultStatus\"\n\n\nfunction AutomationAccountSubscriptionMollieCollections({t, history, match}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateTimeFormatMoment = appSettings.dateTimeFormatMoment\n\n  const { error, loading, data, fetchMore } = useQuery(GET_TASK_RESULT_QUERY, {\n    variables: {\n      taskName: \"costasiella.tasks.account.subscription.invoices.tasks.account_subscription_invoices_add_for_month_mollie_collection\"\n    }\n  })\n\n  const headerOptions = <Card.Options>\n    <Link to={\"/automation/account/subscriptions/mollie_collections/add\"}>\n      <Button color=\"primary\" \n              size=\"sm\"\n      >\n      {t('general.new_task')}\n      </Button>\n    </Link>\n  </Card.Options>\n\n\n  // Loading\n  if (loading) return (\n    <AutomationAccountSubscriptionMollieCollectionBase>\n      <p>{t('general.loading_with_dots')}</p>\n    </AutomationAccountSubscriptionMollieCollectionBase>\n  )\n  // Error\n  if (error) {\n    console.log(error)\n    return (\n      <AutomationAccountSubscriptionMollieCollectionBase>\n        <p>{t('general.error_sad_smiley')}</p>\n      </AutomationAccountSubscriptionMollieCollectionBase>\n    )\n  }\n\n  console.log(\"Automation mollie collection data:\")\n  console.log(data)\n  const taskResults = data.djangoCeleryResultTaskResults\n  // const account = data.account\n  // const scheduleItemAttendances = data.scheduleItemAttendances\n  \n  return (\n    <AutomationAccountSubscriptionMollieCollectionBase>\n      <ContentCard \n        cardTitle={t('automation.account.subscriptions.mollie_collection.title_card')}\n        pageInfo={taskResults.pageInfo}\n        headerContent={headerOptions}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: taskResults.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.djangoCeleryResultTaskResults.edges\n              const pageInfo = fetchMoreResult.djangoCeleryResultTaskResults.pageInfo\n\n              return newEdges.length\n                ? {\n                    // Put the new invoices at the end of the list and update `pageInfo`\n                    // so we have the new `endCursor` and `hasNextPage` values\n                    djangoCeleryResultTaskResults: {\n                      __typename: previousResult.djangoCeleryResultTaskResults.__typename,\n                      edges: [ ...previousResult.djangoCeleryResultTaskResults.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                : previousResult\n              }\n            })\n          }} \n        >\n          {(!taskResults.edges.length) ? \n            // Empty list\n            <p>{t('automation.account.subscriptions.mollie_collection.empty_list')}</p>\n            :\n            // Content\n            <Table>\n              <Table.Header>\n                <Table.Row key={v4()}>\n                  <Table.ColHeader>{t('automation.general.status.title')}</Table.ColHeader>\n                  <Table.ColHeader>{t('automation.general.time_completed')}</Table.ColHeader>\n                  <Table.ColHeader>{t('automation.general.task_kwargs')}</Table.ColHeader>\n                  <Table.ColHeader>{t('automation.general.task_result')}</Table.ColHeader>\n                  <Table.ColHeader></Table.ColHeader>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {taskResults.edges.map(({ node }) => (\n                  <Table.Row key={v4()}>\n                    <Table.Col>\n                      <AutomationTaskResultStatus status={node.status} />\n                    </Table.Col>\n                    <Table.Col>\n                      {moment(node.dateDone).format(dateTimeFormatMoment)}\n                    </Table.Col>\n                    <Table.Col>\n                      {node.taskKwargs}\n                    </Table.Col>\n                    <Table.Col>\n                      {node.result}\n                    </Table.Col>\n                    <Table.Col>\n\n                    </Table.Col>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          }\n        </ContentCard>\n    </AutomationAccountSubscriptionMollieCollectionBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AutomationAccountSubscriptionMollieCollections))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const AUTOMATION_ACCOUNT_SUBSCRIPTION_MOLLIE_COLLECTION_SCHEMA = Yup.object().shape({\n  subscriptionYear: Yup.number()\n    .required()\n    .positive()\n    .min(1000)\n    .max(9999),\n  subscriptionMonth: Yup.number()\n    .required()\n    .positive()\n    .min(1)\n    .max(12),\n  })\n","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n    Button,\n    Card,\n    Form,\n    Grid,\n    Icon\n  } from \"tabler-react\"\n  import { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nfunction AutomationAccountSubscriptionMollieCollectionForm({ t, history, isSubmitting, errors, returnUrl}) {\n  return (\n    <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.subscription_year')}>\n              <Field type=\"number\" \n                      name=\"subscriptionYear\" \n                      className={(errors.subscriptionYear) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"subscriptionYear\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.subscription_month')}>\n              <Field type=\"number\" \n                      name=\"subscriptionMonth\" \n                      className={(errors.subscriptionMonth) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"subscriptionMonth\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n        <Button \n         color=\"primary\"\n          className=\"pull-right\" \n          type=\"submit\" \n          disabled={isSubmitting}\n          >\n          {t('general.new_task')} <Icon name=\"chevron-right\" />\n        </Button>\n        <Link to={returnUrl}>\n          <Button color=\"link\">\n            {t('general.cancel')}\n          </Button>\n        </Link>\n      </Card.Footer>\n    </FoForm>\n  )\n}\n  \nexport default withTranslation()(withRouter(AutomationAccountSubscriptionMollieCollectionForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { GET_TASK_RESULT_QUERY } from \"../../../queries\"\nimport { AUTOMATION_ACCOUNT_SUBSCRIPTION_MOLLIE_COLLECTION_SCHEMA } from './yupSchema'\nimport AutomationAccountSubscriptionMollieCollectionForm from './AutomationAccountSubscriptionMollieCollectionForm'\n\n\nimport {\n  Card,\n} from \"tabler-react\"\n// import SiteWrapper from \"../../SiteWrapper\"\n// import HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport AutomationAccountSubscriptionCreditsBase from './AutomationAccountSubscriptionMollieCollectionBase'\n\n\nconst ADD_TASK = gql`\n  mutation CreateAccountSubscriptionInvoicesMollieCollectionForMonth(\n    $input:CreateAccountSubscriptionInvoicesMollieCollectionForMonthInput!\n  ) {\n    createAccountSubscriptionInvoicesMollieCollectionForMonth(input: $input) {\n      ok\n    }\n  }\n`\n\n\nfunction AutomationAccountSubscriptionMollieCollectionAdd({ t, history }) {\n  const [addTask] = useMutation(ADD_TASK)\n  const returnUrl = \"/automation/account/subscriptions/mollie_collections\"\n\n  return (\n    <AutomationAccountSubscriptionCreditsBase returnUrl={returnUrl}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('automation.account.subscriptions.mollie_collection.title_add')}</Card.Title>\n        </Card.Header>\n        <Formik\n          initialValues={{ \n            subscriptionYear: new Date().getFullYear(), \n            subscriptionMonth: new Date().getMonth() + 1 }}\n          validationSchema={AUTOMATION_ACCOUNT_SUBSCRIPTION_MOLLIE_COLLECTION_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              addTask({ variables: {\n                input: {\n                  month: values.subscriptionMonth,\n                  year: values.subscriptionYear\n                }\n              }, refetchQueries: [\n                  {query: GET_TASK_RESULT_QUERY, \n                    variables: {\n                      taskName: \"costasiella.tasks.account.subscription.mollie_collection.tasks.account_subscription_credits_add_for_month\"\n                  }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('automation.account.subscriptions.mollie_collection.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors }) => (\n              <AutomationAccountSubscriptionMollieCollectionForm \n                isSubmitting={isSubmitting}\n                errors={errors}\n                returnUrl={returnUrl}\n              />\n          )}\n        </Formik>\n      </Card>\n    </AutomationAccountSubscriptionCreditsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AutomationAccountSubscriptionMollieCollectionAdd))","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\n\n\nimport {\n  List\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../HasPermissionWrapper\"\n\nlet invoices_active\nlet orders_active\nlet costcenters_active\nlet glaccounts_active\nlet taxrates_active\nlet payment_methods_active\nlet payment_batch_collections_active\nlet payment_batch_payments_active\nlet payment_batch_categories_active\n\nconst FinanceMenu = ({ t, activeLink }) => (\n    <List.Group transparent={true}>\n        {(activeLink === 'invoices') ? invoices_active = true: invoices_active = false}\n        {(activeLink === 'orders') ? orders_active = true: orders_active = false}\n        {(activeLink === 'costcenters') ? costcenters_active = true: costcenters_active = false}\n        {(activeLink === 'glaccounts') ? glaccounts_active = true: glaccounts_active = false}\n        {(activeLink === 'taxrates') ? taxrates_active = true: taxrates_active = false}\n        {(activeLink === 'payment_methods') ? payment_methods_active = true: payment_methods_active = false}\n        {(activeLink === 'payment_batch_collections') ? payment_batch_collections_active = true: payment_batch_collections_active = false}\n        {(activeLink === 'payment_batch_payments') ? payment_batch_payments_active = true: payment_batch_payments_active = false}\n        {(activeLink === 'payment_batch_categories') ? payment_batch_categories_active = true: payment_batch_categories_active = false}\n        \n\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/finance/invoices\"\n            icon=\"file-text\"\n            active={invoices_active}\n            >\n            {t('finance.invoices.title')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/finance/orders\"\n            icon=\"file-plus\"\n            active={orders_active}\n            >\n            {t('finance.orders.title')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/finance/glaccounts\"\n            icon=\"book\"\n            active={glaccounts_active}\n            >\n            {t('finance.glaccounts.title')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/finance/costcenters\"\n            icon=\"compass\"\n            active={costcenters_active}\n            >\n            {t('finance.costcenters.title')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/finance/taxrates\"\n            icon=\"briefcase\"\n            active={taxrates_active}\n            >\n            {t('finance.taxrates.title')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/finance/paymentmethods\"\n            icon=\"credit-card\"\n            active={payment_methods_active}\n            >\n            {t('finance.payment_methods.title')}\n        </List.GroupItem>\n        <HasPermissionWrapper permission=\"view\"\n                              resource=\"financepaymentbatch\">\n          <List.GroupItem\n              key={v4()}\n              className=\"d-flex align-items-center\"\n              to=\"#/finance/paymentbatches/collection\"\n              icon=\"download\"\n              active={payment_batch_collections_active}\n              >\n              {t('finance.payment_batch_collections.title')}\n          </List.GroupItem>\n        </HasPermissionWrapper>\n        <HasPermissionWrapper permission=\"view\"\n                              resource=\"financepaymentbatch\">\n          <List.GroupItem\n              key={v4()}\n              className=\"d-flex align-items-center\"\n              to=\"#/finance/paymentbatches/payment\"\n              icon=\"upload\"\n              active={payment_batch_payments_active}\n              >\n              {t('finance.payment_batch_payments.title')}\n          </List.GroupItem>\n        </HasPermissionWrapper>\n        <HasPermissionWrapper permission=\"view\"\n                              resource=\"financepaymentbatchcategory\">\n          <List.GroupItem\n              key={v4()}\n              className=\"d-flex align-items-center\"\n              to=\"#/finance/paymentbatchcategories\"\n              icon=\"list\"\n              active={payment_batch_categories_active}\n              >\n              {t('finance.payment_batch_categories.title')}\n          </List.GroupItem>\n        </HasPermissionWrapper>\n    </List.Group>\n);\n\nexport default withTranslation()(FinanceMenu)","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  StampCard\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport FinanceMenu from \"../FinanceMenu\"\n\n\nclass FinanceHome extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Finance home props:\")\n    console.log(props)\n  }\n\n\n  render() {\n    const t = this.props.t\n    const match = this.props.match\n    const history = this.props.history\n    const id = match.params.id\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title={t(\"finance.title\")} />\n            <Grid.Row>\n              <Grid.Col md={9}>\n                <Grid.Row>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/finance/invoices'>\n                      <StampCard header={<small>{t('finance.invoices.title')}</small>} footer={t('')} color=\"blue\" icon=\"file-text\" />\n                    </Link>\n                  </Grid.Col>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/finance/orders'>\n                      <StampCard header={<small>{t('finance.orders.title')}</small>} footer={t('')} color=\"blue\" icon=\"file-plus\" />\n                      </Link>\n                  </Grid.Col>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/finance/glaccounts'>\n                      <StampCard header={<small>{t('finance.glaccounts.title')}</small>} footer={t('')} color=\"blue\" icon=\"book\" />\n                    </Link>\n                  </Grid.Col>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/finance/costcenters'>\n                      <StampCard header={<small>{t('finance.costcenters.title')}</small>} footer={t('')} color=\"blue\" icon=\"compass\" />\n                    </Link>\n                  </Grid.Col>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/finance/taxrates'>\n                      <StampCard header={<small>{t('finance.taxrates.title')}</small>} footer={t('')} color=\"blue\" icon=\"briefcase\" />\n                    </Link>\n                  </Grid.Col>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/finance/paymentmethods'>\n                      <StampCard header={<small>{t('finance.payment_methods.title')}</small>} footer={t('')} color=\"blue\" icon=\"credit-card\" />\n                    </Link>\n                  </Grid.Col>\n                  <HasPermissionWrapper permission=\"view\"\n                              resource=\"financepaymentbatch\">\n                    <Grid.Col md={4} lg={4}>\n                      <Link to={'/finance/paymentbatches/collection'}>\n                        <StampCard header={<small>{t('finance.payment_batch_collections.title')}</small>} footer={t('')} color=\"blue\" icon=\"download\" />\n                      </Link>\n                    </Grid.Col>\n                  </HasPermissionWrapper>\n                  <HasPermissionWrapper permission=\"view\"\n                              resource=\"financepaymentbatch\">\n                    <Grid.Col md={4} lg={4}>\n                      <Link to={'/finance/paymentbatches/payment'}>\n                        <StampCard header={<small>{t('finance.payment_batch_payments.title')}</small>} footer={t('')} color=\"blue\" icon=\"upload\" />\n                      </Link>\n                    </Grid.Col>\n                  </HasPermissionWrapper>\n                  <HasPermissionWrapper permission=\"view\"\n                              resource=\"financepaymentbatchcategory\">\n                    <Grid.Col md={4} lg={4}>\n                      <Link to={'/finance/paymentbatchcategories'}>\n                        <StampCard header={<small>{t('finance.payment_batch_categories.title')}</small>} footer={t('')} color=\"blue\" icon=\"list\" />\n                      </Link>\n                    </Grid.Col>\n                  </HasPermissionWrapper>\n                </Grid.Row>\n              </Grid.Col>\n              <Grid.Col md={3}>\n                <FinanceMenu />\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n    </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(FinanceHome))","import { gql } from \"@apollo/client\"\n\nexport const GET_COSTCENTERS_QUERY = gql`\n  query FinanceCostCenters($after: String, $before: String, $archived: Boolean) {\n    financeCostcenters(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id,\n          archived,\n          name,\n          code\n        }\n      }\n    }\n  }\n`\n\nexport const GET_COSTCENTER_QUERY = gql`\n  query FinanceCostcenter($id: ID!) {\n    financeCostcenter(id:$id) {\n      id\n      name\n      code\n      archived\n    }\n  }\n`\n\nexport const ADD_COSTCENTER = gql`\nmutation CreateFinanceCostCenter($input:CreateFinanceCostCenterInput!) {\n  createFinanceCostcenter(input: $input) {\n    financeCostcenter{\n      id\n      archived\n      name\n      code\n    }\n  }\n}\n`\n\nexport const UPDATE_COSTCENTER = gql`\nmutation UpdateFinanceCostCenter($input: UpdateFinanceCostCenterInput!) {\n  updateFinanceCostcenter(input: $input) {\n    financeCostcenter {\n      id\n      name\n      code\n    }\n  }\n}\n`\n\nexport const ARCHIVE_COSTCENTER = gql`\nmutation ArchiveFinanceCostCenter($input: ArchiveFinanceCostCenterInput!) {\n  archiveFinanceCostcenter(input: $input) {\n    financeCostcenter {\n      id\n      archived\n    }\n  }\n}\n`","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport FinanceMenu from \"../FinanceMenu\"\n\n\nfunction FinanceCostCentersBase({t, history, children, showBack=false}) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"finance.title\")} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ?\n                <Link to={\"/finance/costcenters\"}>\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n                :\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"financeglaccount\">\n                  <Link to={\"/finance/costcenters/add\"}>\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('finance.costcenters.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n              }\n              <FinanceMenu activeLink='costcenters'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceCostCentersBase))","// @flow\n\nimport React, { useState } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Table\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../general/ContentCard\"\n\nimport { GET_COSTCENTERS_QUERY, ARCHIVE_COSTCENTER } from \"./queries\"\nimport FinanceCostCentersBase from './FinanceCostCentersBase'\n\n\nfunction FinanceCostCenters({t, history}) {\n  let [archived, setArchived] = useState(false)\n  const cardTitle = t('finance.costcenters.title')\n  const { loading, error, data, refetch, fetchMore } = useQuery(GET_COSTCENTERS_QUERY, {\n    variables: { archived: archived }\n  })\n  const [ archiveCostcenter ] = useMutation(ARCHIVE_COSTCENTER)\n\n  const headerOptions = <Card.Options>\n    <Button color={(!archived) ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {setArchived(false); refetch({archived: false});}}>\n      {t('general.current')}\n    </Button>\n    <Button color={(archived) ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {setArchived(true); refetch({archived: true});}}>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  if (loading) return (\n    <FinanceCostCentersBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </FinanceCostCentersBase>\n  )\n\n  if (error) return (\n    <FinanceCostCentersBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('finance.costcenters.error_loading')}</p>\n      </ContentCard>\n    </FinanceCostCentersBase>\n  )\n\n  const costcenters = data.financeCostcenters\n\n  // Empty list\n  if (!costcenters.edges.length) { return (\n    <FinanceCostCentersBase>\n      <ContentCard cardTitle={cardTitle}\n                    headerContent={headerOptions}>\n        <p>\n          {(!archived) ? t('finance.costcenters.empty_list') : t(\"finance.costcenters.empty_archive\")}\n        </p>\n      </ContentCard>\n    </FinanceCostCentersBase>\n  )}\n\n  return (\n    <FinanceCostCentersBase>\n      <ContentCard cardTitle={cardTitle}\n                    headerContent={headerOptions}\n                    pageInfo={costcenters.pageInfo}\n                    onLoadMore={() => {\n                    fetchMore({\n                      variables: {\n                        after: costcenters.pageInfo.endCursor\n                      },\n                      updateQuery: (previousResult, { fetchMoreResult }) => {\n                        const newEdges = fetchMoreResult.financeCostcenters.edges\n                        const pageInfo = fetchMoreResult.financeCostcenters.pageInfo\n\n                        return newEdges.length\n                          ? {\n                              // Put the new costcenters at the end of the list and update `pageInfo`\n                              // so we have the new `endCursor` and `hasNextPage` values\n                              financeCostcenters: {\n                                __typename: previousResult.financeCostcenters.__typename,\n                                edges: [ ...previousResult.financeCostcenters.edges, ...newEdges ],\n                                pageInfo\n                              }\n                            }\n                          : previousResult\n                      }\n                    })\n                  }} \n        >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.code')}</Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {costcenters.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    {node.name}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.code}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    {(node.archived) ? \n                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                      <Button className='btn-sm' \n                              onClick={() => history.push(\"/finance/costcenters/edit/\" + node.id)}\n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    }\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                        title={t('general.archive')} \n                        href=\"\"\n                        onClick={() => {\n                          console.log(\"clicked archived\")\n                          let id = node.id\n                          archiveCostcenter({ variables: {\n                            input: {\n                            id,\n                            archived: !archived\n                            }\n                    }, refetchQueries: [\n                        {query: GET_COSTCENTERS_QUERY, variables: {\"archived\": archived }}\n                    ]}).then(({ data }) => {\n                      console.log('got data', data);\n                      toast.success(\n                        (archived) ? t('general.unarchived'): t('general.archived'), {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                    }).catch((error) => {\n                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                      console.log('there was an error sending the query', error);\n                    })\n                    }}>\n                      <Icon prefix=\"fa\" name=\"inbox\" />\n                    </button>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </FinanceCostCentersBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceCostCenters))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const COSTCENTER_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  })\n","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport { GET_COSTCENTERS_QUERY, ADD_COSTCENTER } from './queries'\nimport { COSTCENTER_SCHEMA } from './yupSchema'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport FinanceCostCentersBase from './FinanceCostCentersBase';\n\n\nfunction FinanceCostCenterAdd({ t, history }) {\n  const returnUrl = \"/finance/costcenters\"\n  const [ addCostcenter ] = useMutation(ADD_COSTCENTER)\n\n  return (\n    <FinanceCostCentersBase showBack={true}>\n      <Card title={t('finance.costcenters.title_add')}>\n        <Formik\n            initialValues={{ name: '', code: '' }}\n            validationSchema={COSTCENTER_SCHEMA}\n            onSubmit={(values, { setSubmitting }) => {\n                addCostcenter({ variables: {\n                  input: {\n                    name: values.name, \n                    code: values.code\n                  }\n                }, refetchQueries: [\n                    {query: GET_COSTCENTERS_QUERY, variables: {\"archived\": false }}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data);\n                    history.push(returnUrl)\n                    toast.success((t('finance.costcenters.toast_add_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, errors }) => (\n                <FoForm>\n                    <Card.Body>\n                        <Form.Group label={t('general.name')}>\n                          <Field type=\"text\" \n                                  name=\"name\" \n                                  className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                                  autoComplete=\"off\" />\n                          <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                        </Form.Group>\n                        <Form.Group label={t('finance.code')}>\n                          <Field type=\"text\" \n                                  name=\"code\" \n                                  className={(errors.code) ? \"form-control is-invalid\" : \"form-control\"} \n                                  autoComplete=\"off\" />\n                          <ErrorMessage name=\"code\" component=\"span\" className=\"invalid-feedback\" />\n                        </Form.Group>\n                    </Card.Body>\n                    <Card.Footer>\n                        <Button \n                          color=\"primary\"\n                          className=\"pull-right\" \n                          type=\"submit\" \n                          disabled={isSubmitting}\n                        >\n                          {t('general.submit')}\n                        </Button>\n                        <Link to={returnUrl}>\n                          <Button color=\"link\">\n                            {t('general.cancel')}\n                          </Button>\n                        </Link>\n                    </Card.Footer>\n                </FoForm>\n            )}\n        </Formik>\n      </Card>\n    </FinanceCostCentersBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceCostCenterAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport { GET_COSTCENTERS_QUERY, GET_COSTCENTER_QUERY, UPDATE_COSTCENTER } from './queries'\nimport { COSTCENTER_SCHEMA } from './yupSchema'\n\nimport {\n  Button,\n  Card,\n  Dimmer,\n  Form\n} from \"tabler-react\";\n\nimport ContentCard from \"../../general/ContentCard\"\nimport FinanceCostCentersBase from './FinanceCostCentersBase';\n\n\nfunction FinanceCostCenterEdit({t, match, history}) {\n  const id = match.params.id\n  const cardTitle = t('finance.costcenters.title_edit')\n  const returnUrl = \"/finance/costcenters\"\n  const { loading, error, data } = useQuery(GET_COSTCENTER_QUERY, {\n    variables: { id: id }\n  })\n  const [ updateCostcenter ] = useMutation(UPDATE_COSTCENTER)\n\n  if (loading) return (\n    <FinanceCostCentersBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </FinanceCostCentersBase>\n  )\n\n  if (error) return (\n    <FinanceCostCentersBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </FinanceCostCentersBase>\n  )\n\n  const initialData = data.financeCostcenter;\n\n  return (\n    <FinanceCostCentersBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n            initialValues={{ \n              name: initialData.name, \n              code: initialData.code\n            }}\n            validationSchema={COSTCENTER_SCHEMA}\n            onSubmit={(values, { setSubmitting }) => {\n                console.log('submit values:')\n                console.log(values)\n\n                updateCostcenter({ variables: {\n                  input: {\n                    id: match.params.id,\n                    name: values.name,\n                    code: values.code\n                  }\n                }, refetchQueries: [\n                    {query: GET_COSTCENTERS_QUERY, variables: {\"archived\": false }}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    history.push(returnUrl)\n                    toast.success((t('finance.costcenters.toast_edit_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, errors, values }) => (\n                <FoForm>\n                    <Card.Body>\n                      <Form.Group label={t('general.name')}>\n                        <Field type=\"text\" \n                                name=\"name\" \n                                className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                                autoComplete=\"off\" />\n                        <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                      </Form.Group>\n                      <Form.Group label={t('finance.code')}>\n                        <Field type=\"text\" \n                                name=\"code\" \n                                className={(errors.code) ? \"form-control is-invalid\" : \"form-control\"} \n                                autoComplete=\"off\" />\n                        <ErrorMessage name=\"code\" component=\"span\" className=\"invalid-feedback\" />\n                      </Form.Group>\n                    </Card.Body>\n                    <Card.Footer>\n                        <Button \n                          className=\"pull-right\"\n                          color=\"primary\"\n                          disabled={isSubmitting}\n                          type=\"submit\"\n                        >\n                          {t('general.submit')}\n                        </Button>\n                        <Link to={returnUrl}>\n                          <Button\n                            type=\"button\" \n                            color=\"link\" \n                          >\n                              {t('general.cancel')}\n                          </Button>\n                        </Link>\n                    </Card.Footer>\n                </FoForm>\n            )}\n        </Formik>\n      </Card>\n    </FinanceCostCentersBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceCostCenterEdit))","import { gql } from \"@apollo/client\"\n\nexport const GET_GLACCOUNTS_QUERY = gql`\n  query FinanceGLAccounts($after: String, $before: String, $archived: Boolean) {\n    financeGlaccounts(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id,\n          archived,\n          name,\n          code\n        }\n      }\n    }\n  }\n`\n\nexport const GET_GLACCOUNT_QUERY = gql`\n  query FinanceGLAccount($id: ID!) {\n    financeGlaccount(id:$id) {\n      id\n      name\n      code\n      archived\n    }\n  }\n`\n\nexport const ADD_GLACCOUNT = gql`\nmutation CreateFinanceGLAccount($input:CreateFinanceGLAccountInput!) {\n  createFinanceGlaccount(input: $input) {\n    financeGlaccount{\n      id\n      archived\n      name\n      code\n    }\n  }\n}\n`\n\nexport const UPDATE_GLACCOUNT = gql`\nmutation UpdateFinanceGLAccount($input: UpdateFinanceGLAccountInput!) {\n  updateFinanceGlaccount(input: $input) {\n    financeGlaccount {\n      id\n      name\n      code\n    }\n  }\n}\n`\n\nexport const ARCHIVE_GLACCOUNT = gql`\nmutation ArchiveFinanceGLAccount($input: ArchiveFinanceGLAccountInput!) {\n  archiveFinanceGlaccount(input: $input) {\n    financeGlaccount {\n      id\n      archived\n    }\n  }\n}\n`","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport FinanceMenu from \"../FinanceMenu\"\n\n\nfunction FinanceGLAccountsBase({ t, history, children, showBack=false }) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"finance.title\")} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ?\n                <Link to=\"/finance/glaccounts\">\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n              :\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"financeglaccount\">\n                  <Link to=\"/finance/glaccounts/add\">\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('finance.glaccounts.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n              }\n              <FinanceMenu activeLink='glaccounts'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(FinanceGLAccountsBase))","// @flow\n\nimport React, { useState } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Table\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../general/ContentCard\"\n\nimport { GET_GLACCOUNTS_QUERY, ARCHIVE_GLACCOUNT } from \"./queries\"\nimport FinanceGLAccountsBase from './FinanceGLAccountsBase'\n\n\nfunction FinanceGLAccounts({t, history}) {\n  let [archived, setArchived] = useState(false)\n  const cardTitle = t(\"finance.glaccounts.title\")\n  const { loading, error, data, refetch, fetchMore } = useQuery(GET_GLACCOUNTS_QUERY, {\n    variables: { archived: archived }\n  })\n  const [ archiveGlaccount ] = useMutation(ARCHIVE_GLACCOUNT)\n\n  const headerOptions = <Card.Options>\n    <Button color={(!archived) ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {setArchived(false); refetch({archived: false});}}>\n      {t('general.current')}\n    </Button>\n    <Button color={(archived) ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {setArchived(true); refetch({archived: true});}}>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  if (loading) return (\n    <FinanceGLAccountsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </FinanceGLAccountsBase>\n  )\n\n  if (error) return (\n    <FinanceGLAccountsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('finance.glaccounts.error_loading')}</p>\n      </ContentCard>\n    </FinanceGLAccountsBase>\n  )\n\n  const glaccounts = data.financeGlaccounts\n   \n  // Empty list\n  if (!glaccounts.edges.length) { return (\n    <FinanceGLAccountsBase>\n      <ContentCard cardTitle={cardTitle}\n                   headerContent={headerOptions}>\n        <p>\n          {(!archived) ? t('finance.glaccounts.empty_list') : t(\"finance.glaccounts.empty_archive\")}\n        </p>\n      </ContentCard>\n    </FinanceGLAccountsBase>\n  )} \n\n  return (\n    <FinanceGLAccountsBase>\n      <ContentCard cardTitle={cardTitle}\n                headerContent={headerOptions}\n                pageInfo={glaccounts.pageInfo}\n                onLoadMore={() => {\n                fetchMore({\n                  variables: {\n                    after: glaccounts.pageInfo.endCursor\n                  },\n                  updateQuery: (previousResult, { fetchMoreResult }) => {\n                    const newEdges = fetchMoreResult.financeGlaccounts.edges\n                    const pageInfo = fetchMoreResult.financeGlaccounts.pageInfo\n\n                    return newEdges.length\n                      ? {\n                          // Put the new glaccounts at the end of the list and update `pageInfo`\n                          // so we have the new `endCursor` and `hasNextPage` values\n                          financeGlaccounts: {\n                            __typename: previousResult.financeGlaccounts.__typename,\n                            edges: [ ...previousResult.financeGlaccounts.edges, ...newEdges ],\n                            pageInfo\n                          }\n                        }\n                      : previousResult\n                  }\n                })\n              }} >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.code')}</Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {glaccounts.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    {node.name}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.code}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    {(node.archived) ? \n                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                      <Button className='btn-sm' \n                              onClick={() => history.push(\"/finance/glaccounts/edit/\" + node.id)}\n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    }\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                        title={t('general.archive')} \n                        href=\"\"\n                        onClick={() => {\n                          console.log(\"clicked archived\")\n                          let id = node.id\n                          archiveGlaccount({ variables: {\n                            input: {\n                            id,\n                            archived: !archived\n                            }\n                    }, refetchQueries: [\n                        {query: GET_GLACCOUNTS_QUERY, variables: {\"archived\": archived }}\n                    ]}).then(({ data }) => {\n                      console.log('got data', data);\n                      toast.success(\n                        (archived) ? t('general.unarchived'): t('general.archived'), {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                    }).catch((error) => {\n                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                      console.log('there was an error sending the query', error);\n                    })\n                    }}>\n                      <Icon prefix=\"fa\" name=\"inbox\" />\n                    </button>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </FinanceGLAccountsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(FinanceGLAccounts))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const GLACCOUNT_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  })\n","import React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from \"react-router-dom\"\n\nimport { GET_GLACCOUNTS_QUERY, ADD_GLACCOUNT } from './queries'\nimport { GLACCOUNT_SCHEMA } from './yupSchema'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\nimport FinanceGLAccountsBase from './FinanceGLAccountsBase'\n\n\nfunction FinanceGLAccountAdd({t, history}) {\n  const returnUrl = \"/finance/glaccounts\"\n  const [ addGlaccount ] = useMutation(ADD_GLACCOUNT)\n\n  return (\n    <FinanceGLAccountsBase>\n      <Card title={t('finance.glaccounts.title_add')}>\n        <Formik\n          initialValues={{ name: '', code: '' }}\n          validationSchema={GLACCOUNT_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              addGlaccount({ variables: {\n                input: {\n                  name: values.name, \n                  code: values.code\n                }\n              }, refetchQueries: [\n                  {query: GET_GLACCOUNTS_QUERY, variables: {\"archived\": false }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data);\n                  history.push(returnUrl)\n                  toast.success((t('finance.glaccounts.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors }) => (\n            <FoForm>\n                <Card.Body>\n                    <Form.Group label={t('general.name')}>\n                      <Field type=\"text\" \n                              name=\"name\" \n                              className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                              autoComplete=\"off\" />\n                      <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                    </Form.Group>\n                    <Form.Group label={t('finance.code')}>\n                      <Field type=\"text\" \n                              name=\"code\" \n                              className={(errors.code) ? \"form-control is-invalid\" : \"form-control\"} \n                              autoComplete=\"off\" />\n                      <ErrorMessage name=\"code\" component=\"span\" className=\"invalid-feedback\" />\n                    </Form.Group>\n                </Card.Body>\n                <Card.Footer>\n                    <Button \n                      color=\"primary\"\n                      className=\"pull-right\" \n                      type=\"submit\" \n                      disabled={isSubmitting}\n                    >\n                      {t('general.submit')}\n                    </Button>\n                    <Link to={returnUrl}>\n                      <Button color=\"link\">\n                          {t('general.cancel')}\n                      </Button>\n                    </Link>\n                </Card.Footer>\n            </FoForm>\n          )}\n        </Formik>\n      </Card>\n    </FinanceGLAccountsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceGLAccountAdd))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql, useMutation, useQuery } from \"@apollo/client\"\nimport { Query, Mutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport { GET_GLACCOUNTS_QUERY, GET_GLACCOUNT_QUERY, UPDATE_GLACCOUNT } from './queries'\nimport { GLACCOUNT_SCHEMA } from './yupSchema'\n\n\nimport {\n  Button,\n  Card,\n  Dimmer,\n  Form\n} from \"tabler-react\";\n\nimport ContentCard from \"../../general/ContentCard\"\nimport FinanceGLAccountsBase from './FinanceGLAccountsBase'\n\n\nfunction FinanceGLAccountEdit({t, history, match}) {\n  const id = match.params.id\n  const returnUrl = \"/finance/glaccounts\"\n  const cardTitle = t('finance.glaccounts.title_edit')\n  const { loading, error, data } = useQuery(GET_GLACCOUNT_QUERY, {\n    variables: { id: id }\n  })\n  const [ updateGlaccount ] = useMutation(UPDATE_GLACCOUNT)\n\n  if (loading) return (\n    <FinanceGLAccountsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </FinanceGLAccountsBase>\n  )\n\n  if (error) return (\n    <FinanceGLAccountsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </FinanceGLAccountsBase>\n  )\n\n  const initialData = data.financeGlaccount;\n  console.log('query data')\n  console.log(data)\n\n  return (\n    <FinanceGLAccountsBase>\n      <Card title={cardTitle}>\n        <Formik\n          initialValues={{ \n            name: initialData.name, \n            code: initialData.code\n          }}\n          validationSchema={GLACCOUNT_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              updateGlaccount({ variables: {\n                input: {\n                  id: match.params.id,\n                  name: values.name,\n                  code: values.code\n                }\n              }, refetchQueries: [\n                  {query: GET_GLACCOUNTS_QUERY, variables: {\"archived\": false }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('finance.glaccounts.toast_edit_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors, values }) => (\n            <FoForm>\n                <Card.Body>\n                  <Form.Group label={t('general.name')}>\n                    <Field type=\"text\" \n                            name=\"name\" \n                            className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                            autoComplete=\"off\" />\n                    <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                  </Form.Group>\n                  <Form.Group label={t('finance.code')}>\n                    <Field type=\"text\" \n                            name=\"code\" \n                            className={(errors.code) ? \"form-control is-invalid\" : \"form-control\"} \n                            autoComplete=\"off\" />\n                    <ErrorMessage name=\"code\" component=\"span\" className=\"invalid-feedback\" />\n                  </Form.Group>\n                </Card.Body>\n                <Card.Footer>\n                    <Button \n                      className=\"pull-right\"\n                      color=\"primary\"\n                      disabled={isSubmitting}\n                      type=\"submit\"\n                    >\n                      {t('general.submit')}\n                    </Button>\n                    <Link to={returnUrl}>\n                      <Button\n                        type=\"button\" \n                        color=\"link\" \n                      >\n                          {t('general.cancel')}\n                      </Button>\n                    </Link>\n                </Card.Footer>\n            </FoForm>\n          )}\n        </Formik>\n      </Card>\n    </FinanceGLAccountsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceGLAccountEdit))","import CSLS from \"../../../tools/cs_local_storage\"\n\nexport function get_list_query_variables() {\n  let queryVars = {}\n\n  let status = localStorage.getItem(CSLS.FINANCE_INVOICES_FILTER_STATUS)\n  if (status) {\n    queryVars.status = status\n  } else {\n    queryVars.status = undefined\n  }\n  \n  console.log(queryVars)\n\n  return queryVars\n}\n\n","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport CSLS from \"../../../tools/cs_local_storage\"\nimport { get_list_query_variables } from './tools'\n\n\nfunction getDefaultValue(value) {\n  let defaultValue = localStorage.getItem(value)\n  console.log(defaultValue)\n\n  if (defaultValue) {\n    return defaultValue\n  } else {\n    console.log('return empty default')\n    return \"\"\n  }\n}\n\n\nfunction updateLocalStorageAndRefetch(key, value, refetch) {\n  localStorage.setItem(key, value)\n  refetch(get_list_query_variables())\n\n}\n\nconst selectClass = \"form-control mb-2\"\n\n\nconst FinanceInvoicesFilter = ({ t, history, data, refetch }) => (\n  <div>\n    {/* Status */}\n    <select \n      className={selectClass}\n      value={getDefaultValue(CSLS.FINANCE_INVOICES_FILTER_STATUS)}\n      onChange={ (event) => {\n        updateLocalStorageAndRefetch(\n          CSLS.FINANCE_INVOICES_FILTER_STATUS,\n          event.target.value,\n          refetch\n        )\n      }}\n    >\n      <option value=\"\" key={v4()}>{t(\"finance.invoices.statuses.all\")}</option>\n      <option value=\"DRAFT\" key={v4()}>{t('finance.invoices.statuses.draft')}</option>\n      <option value=\"SENT\" key={v4()}>{t('finance.invoices.statuses.sent')}</option>\n      <option value=\"PAID\" key={v4()}>{t('finance.invoices.statuses.paid')}</option>\n      <option value=\"CANCELLED\" key={v4()}>{t('finance.invoices.statuses.cancelled')}</option>\n    </select>\n  </div>\n);\n\nexport default withTranslation()(withRouter(FinanceInvoicesFilter))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Container,\n  Grid,\n  Icon,\n  Page\n} from \"tabler-react\";\n\nimport SiteWrapper from '../../SiteWrapper'\nimport FinanceInvoicesFilter from \"./FinanceInvoicesFilter\"\nimport FinanceMenu from \"../FinanceMenu\"\n\n\nfunction FinanceInvoicesBase ({ t, history, children, refetch }) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"finance.title\")}>\n            <div className=\"page-options d-flex\">\n              <Link to=\"/finance/invoices/groups\" \n                    className='btn btn-outline-secondary btn-sm'>\n                <Icon prefix=\"fe\" name=\"folder\" /> {t('general.groups')}\n              </Link>\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <h5 className=\"mt-2 pt-1\">{t(\"general.filter\")}</h5>\n              <FinanceInvoicesFilter refetch={refetch}/>\n              <h5>{t(\"general.menu\")}</h5>\n              <FinanceMenu activeLink='invoices'/>\n            </Grid.Col>\n          </Grid.Row>\n          </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(FinanceInvoicesBase))","// @flow\n\nimport React, { Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Badge\n} from \"tabler-react\";\n\n\nclass FinanceInvoicesStatus extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"finance costcenter edit props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const history = this.props.history\n    const status = this.props.status\n\n    switch (status) {\n      case \"DRAFT\":\n        return <Badge color=\"secondary\">{t('finance.invoices.status.DRAFT')}</Badge>\n        break\n      case \"SENT\":\n        return <Badge color=\"primary\">{t('finance.invoices.status.SENT')}</Badge>\n        break\n      case \"PAID\":\n        return <Badge color=\"success\">{t('finance.invoices.status.PAID')}</Badge>\n        break\n      case \"CANCELLED\":\n        return <Badge color=\"warning\">{t('finance.invoices.status.CANCELLED')}</Badge>\n        break\n      default:\n        return t('finance.invoices.status.NOT_FOUND') \n    }\n  }\n}\n\n\nexport default withTranslation()(withRouter(FinanceInvoicesStatus))","import { gql } from \"@apollo/client\"\n\nexport const GET_INVOICES_QUERY = gql`\n  query FinanceInvoices($after: String, $before: String, $status: String) {\n    financeInvoices(first: 15, before: $before, after: $after, status: $status) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          account {\n            id\n            fullName\n          }\n          invoiceNumber\n          status\n          summary\n          relationCompany\n          relationContactName\n          dateSent\n          dateDue\n          total\n          totalDisplay\n          balance\n          balanceDisplay\n        }\n      }\n    }\n  }\n`\n\nexport const GET_INVOICE_QUERY = gql`\n  query FinanceInvoice($id: ID!, $before: String, $after: String) {\n    financeInvoice(id:$id) {\n      id\n      account {\n        id\n        fullName\n      }\n      financePaymentMethod {\n        id\n        name\n      }\n      relationCompany\n      relationCompanyRegistration\n      relationCompanyTaxRegistration\n      relationContactName\n      relationAddress\n      relationPostcode\n      relationCity\n      relationCountry\n      status\n      summary\n      invoiceNumber\n      dateSent\n      dateDue\n      terms\n      footer\n      note\n      subtotalDisplay\n      taxDisplay\n      total\n      totalDisplay\n      paidDisplay\n      balance\n      balanceDisplay\n      creditInvoiceNumber\n      updatedAt\n      items {\n        edges {\n          node {\n            id\n            lineNumber\n            productName\n            description\n            quantity\n            price\n            financeTaxRate {\n              id\n              name\n              percentage\n              rateType\n            }\n            subtotal\n            subtotalDisplay\n            tax\n            taxDisplay\n            total\n            totalDisplay\n            financeGlaccount {\n              id\n              name\n            }\n            financeCostcenter {\n              id\n              name\n            }\n          }\n        }\n      }\n      payments {\n        pageInfo {\n          hasNextPage\n          hasPreviousPage\n          startCursor\n          endCursor\n        }\n        edges {\n          node {\n            id\n            amount\n            amountDisplay\n            date\n            financePaymentMethod {\n              id\n              name\n            }\n            note\n          }\n        }\n      }\n    }\n    financePaymentMethods(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n    financeTaxRates(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n    organization(id:\"T3JnYW5pemF0aW9uTm9kZToxMDA=\") {\n      id\n      name\n      address\n      phone\n      email\n      registration\n      taxRegistration\n    }\n  }\n`\n\n\nexport const UPDATE_INVOICE = gql`\n  mutation UpdateFinanceInvoice($input: UpdateFinanceInvoiceInput!) {\n    updateFinanceInvoice(input: $input) {\n      financeInvoice {\n        id\n        summary\n      }\n    }\n  }\n`\n\n\nexport const CANCEL_AND_CREATE_CREDIT_INVOICE = gql`\n  mutation CancelAndCreateCreditFinanceInvoice($input: CancelAndCreateCreditFinanceInvoiceInput!) {\n    cancelAndCreateCreditFinanceInvoice(input: $input) {\n      financeInvoice {\n        id\n      }\n    }\n  }\n`\n\nexport const DELETE_FINANCE_INVOICE = gql`\n  mutation DeleteFinanceInvoice($input: DeleteFinanceInvoiceInput!) {\n    deleteFinanceInvoice(input: $input) {\n      ok\n    }\n  }\n`\n\n\nexport const CREATE_INVOICE_ITEM = gql`\n  mutation CreateFinanceInvoiceItem($input: CreateFinanceInvoiceItemInput!) {\n    createFinanceInvoiceItem(input: $input) {\n      financeInvoiceItem {\n        id\n        productName\n        description\n        quantity\n        price\n        financeTaxRate {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\n\nexport const UPDATE_INVOICE_ITEM = gql`\n  mutation UpdateFinanceInvoiceItem($input: UpdateFinanceInvoiceItemInput!) {\n    updateFinanceInvoiceItem(input: $input) {\n      financeInvoiceItem {\n        id\n        productName\n        description\n        quantity\n        price\n        financeTaxRate {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\n\nexport const DELETE_INVOICE_ITEM = gql`\n  mutation DeleteFinanceInvoiceItem($input: DeleteFinanceInvoiceItemInput!) {\n    deleteFinanceInvoiceItem(input: $input) {\n      ok\n    }\n  }\n`\n\n\nexport const DELETE_INVOICE_PAYMENT = gql`\n  mutation DeleteFinanceInvoicePayment($input: DeleteFinanceInvoicePaymentInput!) {\n    deleteFinanceInvoicePayment(input: $input) {\n      ok\n    }\n  }\n`","import React from 'react'\nimport { confirmAlert } from 'react-confirm-alert'\nimport { toast } from 'react-toastify'\nimport {\n  Icon,\n} from \"tabler-react\";\n\n\nconst confirm_delete = ({t, msgConfirm, msgDescription, msgSuccess, deleteFunction, functionVariables}) => {\n    confirmAlert({\n      customUI: ({ onClose }) => {\n        return (\n          <div className='custom-ui'>\n            <h1>{t('general.confirm_delete')}</h1>\n            {msgConfirm}\n            {msgDescription}\n            <button className=\"btn btn-link pull-right\" onClick={onClose}>{t('general.confirm_delete_no')}</button>\n            <button\n              className=\"btn btn-danger\"\n              onClick={() => {\n                deleteFunction(functionVariables)\n                  .then(({ data }) => {\n                    console.log('got data', data);\n                    toast.success(\n                      msgSuccess, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error);\n                  })\n                onClose()\n              }}\n            >\n              <Icon name=\"trash-2\" /> {t('general.confirm_delete_yes')}\n            </button>\n          </div>\n        )\n      }\n    })\n  }\n\nexport default confirm_delete\n","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Icon,\n  Dimmer,\n  Button,\n  Table, \n  Text\n} from \"tabler-react\";\n\nimport { get_list_query_variables } from \"./tools\"\nimport ContentCard from \"../../general/ContentCard\"\nimport FinanceInvoicesBase from \"./FinanceInvoicesBase\"\nimport FinanceInvoicesStatus from \"../../ui/FinanceInvoiceStatus\"\n\nimport { GET_INVOICES_QUERY, DELETE_FINANCE_INVOICE } from \"./queries\"\n\nimport CSLS from \"../../../tools/cs_local_storage\"\nimport confirm_delete from \"../../../tools/confirm_delete\"\nimport moment from 'moment'\n\n\nfunction FinanceInvoices({ t, location, history }) {\n  // Set back location for edit invoice\n  localStorage.setItem(CSLS.FINANCE_INVOICES_EDIT_RETURN, location.pathname)\n  // Fetch data\n  const { loading, error, data, refetch, fetchMore } = useQuery(GET_INVOICES_QUERY, {\n    variables: get_list_query_variables(),\n    fetchPolicy: \"network-only\"\n  })\n  const [ deleteFinanceInvoice ] = useMutation(DELETE_FINANCE_INVOICE)\n\n  if (loading) return (\n    <FinanceInvoicesBase refetch={refetch}>\n      <ContentCard cardTitle={t('finance.invoices.title')}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </FinanceInvoicesBase>\n  )\n  // Error\n  if (error) return (\n    <FinanceInvoicesBase refetch={refetch}>\n      <ContentCard cardTitle={t('finance.invoices.title')}>\n        <p>{t('finance.invoices.error_loading')}</p>\n      </ContentCard>\n    </FinanceInvoicesBase>\n  )\n\n  const invoices = data.financeInvoices\n\n  // Empty list\n  if (!invoices.edges.length) { return (\n    <FinanceInvoicesBase refetch={refetch}>\n      <ContentCard cardTitle={t('finance.invoices.title')}>\n        <p>\n          {t('finance.invoices.empty_list')}\n        </p>\n      </ContentCard>\n    </FinanceInvoicesBase>\n  )}\n\n  return (\n    <FinanceInvoicesBase refetch={refetch}>\n      <ContentCard cardTitle={t('finance.invoices.title')}\n                  pageInfo={invoices.pageInfo}\n                  onLoadMore={() => {\n                    fetchMore({\n                      variables: {\n                        after: invoices.pageInfo.endCursor\n                      },\n                      updateQuery: (previousResult, { fetchMoreResult }) => {\n                        const newEdges = fetchMoreResult.financeInvoices.edges\n                        const pageInfo = fetchMoreResult.financeInvoices.pageInfo\n\n                        return newEdges.length\n                          ? {\n                              // Put the new invoices at the end of the list and update `pageInfo`\n                              // so we have the new `endCursor` and `hasNextPage` values\n                              financeInvoices: {\n                                __typename: previousResult.financeInvoices.__typename,\n                                edges: [ ...previousResult.financeInvoices.edges, ...newEdges ],\n                                pageInfo\n                              }\n                            }\n                          : previousResult\n                      }\n                    })\n                  }} \n        >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.status')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.invoices.invoice_number')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.invoices.relation')} & {t('finance.invoices.summary')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.invoices.date')} & {t('finance.invoices.due')}</Table.ColHeader>\n              {/* <Table.ColHeader>{t('finance.invoices.due')}</Table.ColHeader> */}\n              <Table.ColHeader>{t('general.total')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.balance')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {invoices.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    <FinanceInvoicesStatus status={node.status} />\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    <Link to={\"/finance/invoices/edit/\" + node.id}>\n                      {node.invoiceNumber}\n                    </Link>\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {(node.account) ? \n                      <Link to={\"/relations/accounts/\" + node.account.id + \"/profile\"}>\n                        {(node.relationCompany) ? node.relationCompany: node.relationContactName}\n                      </Link> :\n                      (node.relationCompany) ? node.relationCompany: node.relationContactName\n                    }\n                    <br />\n                    <Text.Small color=\"gray\">{node.summary.trunc(20)}</Text.Small>\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {moment(node.dateSent).format('LL')} <br />\n                    {moment(node.dateDue).format('LL')}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.totalDisplay}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.balanceDisplay}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <Link to={\"/finance/invoices/edit/\" + node.id}>\n                      <Button className='btn-sm' \n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    </Link>\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                      title={t('general.delete')} \n                      href=\"\"\n                      onClick={() => {\n                        confirm_delete({\n                          t: t,\n                          msgConfirm: t(\"finance.invoices.delete_confirm_msg\"),\n                          msgDescription: <p>{node.invoiceNumber}</p>,\n                          msgSuccess: t('finance.invoices.deleted'),\n                          deleteFunction: deleteFinanceInvoice,\n                          functionVariables: { \n                            variables: {\n                              input: {\n                                id: node.id\n                              }\n                            }, \n                            refetchQueries: [\n                              {query: GET_INVOICES_QUERY, variables: get_list_query_variables() } \n                            ]\n                          }\n                        })\n                    }}>\n                      <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n                    </button>\n                </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </FinanceInvoicesBase>\n  )\n} \n\nexport default withTranslation()(withRouter(FinanceInvoices))","export function refreshTokenAndOpenExportLinkInNewTab(doTokenRefresh, history, exportUrl) {\n    doTokenRefresh()\n      .then(() => {\n        window.open(exportUrl, \"_blank\")\n        // history.push(export_url)\n      }).catch((error) => {\n        console.log(error)\n        history.push(\"/#/user/login\")\n      })\n  }\n","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\n\n\nfunction FinanceInvoiceEditBase({t, match, history, children}) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n          <Container>\n            {children}\n          </Container>\n      </div>\n    </SiteWrapper>\n  ) \n}\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditBase))","// @flow\n\nimport React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { get_list_query_variables } from \"../tools\"\nimport { CREATE_INVOICE_ITEM, GET_INVOICES_QUERY, GET_INVOICE_QUERY } from \"../queries\"\nimport { toast } from 'react-toastify'\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\nfunction FinanceInvoiceItemAdd({t, match}) {\n  const [addInvoiceItem, { data }] = useMutation(CREATE_INVOICE_ITEM)\n\n    return (\n      <button className=\"btn btn-primary btn-sm\" \n        title={t('general.delete')} \n        href=\"\"\n        onClick={() => {\n          addInvoiceItem({ variables: {\n            input: {\n              financeInvoice: match.params.id              \n            }\n          }, refetchQueries: [\n              {query: GET_INVOICE_QUERY, variables: {id: match.params.id}}\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data)\n              toast.success((t('finance.invoice.toast_add_item_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              // setSubmitting(false)\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              // setSubmitting(false)\n            })\n      }}>\n        <Icon prefix=\"fe\" name=\"plus\" /> { ' ' }\n        {t('finance.invoice.item_add')}\n      </button>\n    )\n}\n\n\nexport default withTranslation()(withRouter(FinanceInvoiceItemAdd))\n","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { get_list_query_variables } from \"../tools\"\nimport { DELETE_INVOICE_ITEM, GET_INVOICES_QUERY, GET_INVOICE_QUERY } from \"../queries\"\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\n\nfunction FinanceInvoiceItemDelete({t, match, node}) {\n  const [deleteInvoiceItem, { data }] = useMutation(DELETE_INVOICE_ITEM)\n\n    return (\n      <button className=\"icon btn btn-link btn-sm\" \n        title={t('general.delete')} \n        href=\"\"\n        onClick={() => {\n          confirm_delete({\n            t: t,\n            msgConfirm: t(\"finance.invoices.item_delete_confirm_msg\"),\n            msgDescription: <p>{node.productName} <br /> {node.description}</p>,\n            msgSuccess: t('finance.invoices.item_deleted'),\n            deleteFunction: deleteInvoiceItem,\n            functionVariables: { \n              variables: {\n                input: {\n                  id: node.id\n                }\n              }, \n              refetchQueries: [\n                {query: GET_INVOICES_QUERY, variables: get_list_query_variables() },\n                {query: GET_INVOICE_QUERY, variables: {id: match.params.id} },\n              ]\n            }\n          })\n      }}>\n        <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n      </button>\n    )\n}\n\n\nexport default withTranslation()(withRouter(FinanceInvoiceItemDelete))\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Dimmer,\n  Form,\n  Grid,\n  Icon\n} from \"tabler-react\"\n\nimport FinanceInvoiceItemDelete from './FinanceInvoiceItemDelete'\n\n\nconst FinanceInvoiceItemEditForm = ({ t, isSubmitting, errors, node, touched, handleChange, setFieldTouched, inputData }) => (\n  <Dimmer loader={isSubmitting} active={isSubmitting}>\n    <FoForm>\n      <Grid.Row>\n      {/* <Icon name=\"more-vertical\" /> */}\n        <Grid.Col md={3} className=\"cs-grid-table-cell\">\n          <Form.Group>\n            <Field type=\"text\" \n                    name=\"productName\" \n                    className={(errors.productName) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" \n                    onChange={(e) => {\n                      handleChange(e)\n                      setFieldTouched(\"productName\", true, true)\n                    }}\n            />\n            <ErrorMessage name=\"productName\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n        <Grid.Col md={3} className=\"cs-grid-table-cell\">\n          <Form.Group>\n            <Field type=\"text\" \n                    name=\"description\" \n                    className={(errors.description) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" \n                    component=\"textarea\"\n                    onChange={(e) => {\n                      handleChange(e)\n                      setFieldTouched(\"description\", true, true)\n                    }}\n            />\n            <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n        <Grid.Col md={2} className=\"cs-grid-table-cell\">\n          <Form.Group>\n            <Field type=\"text\" \n                   name=\"quantity\" \n                   className={(errors.quantity) ? \"form-control is-invalid\" : \"form-control\"} \n                   autoComplete=\"off\" \n                   onChange={(e) => {\n                    handleChange(e)\n                    setFieldTouched(\"quantity\", true, true)\n                  }}\n            />\n            <ErrorMessage name=\"quantity\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          <Form.Group>\n            <Field type=\"text\" \n                    name=\"price\" \n                    className={(errors.price) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" \n                    onChange={(e) => {\n                      handleChange(e)\n                      setFieldTouched(\"price\", true, true)\n                    }}\n            />\n            <ErrorMessage name=\"price\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n        <Grid.Col md={2} className=\"cs-grid-table-cell\">\n          <Form.Group>\n            <Field component=\"select\" \n                  name=\"financeTaxRate\" \n                  className={(errors.financeTaxRate) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\"\n                  onChange={(e) => {\n                    handleChange(e)\n                    setFieldTouched(\"financeTaxRate\", true, true)\n                  }}\n            >\n              {console.log(\"query data in form finance tax rate:\")}\n              {console.log(inputData)}\n              <option value=\"\" key={v4()}></option>\n              {inputData.financeTaxRates.edges.map(({ node }) =>\n                <option value={node.id} key={v4()}>{node.name} ({node.percentage}% {node.rateType})</option>\n              )}\n            </Field>\n            <ErrorMessage name=\"financeTaxRate\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n        <Grid.Col md={1} className=\"cs-grid-table-cell\">\n          <span className=\"float-right\">{node.totalDisplay}</span> <br /><br />\n          {(Object.keys(touched).length === 0) ? \"\" :\n            <Button \n              color=\"primary\"\n              className=\"pull-right\" \n              type=\"submit\" \n              disabled={isSubmitting}\n            >\n              {t('general.submit')}\n            </Button>\n          }\n        </Grid.Col>\n        <Grid.Col md={1} className=\"cs-grid-table-cell\">\n          <span className=\"float-right\"><FinanceInvoiceItemDelete node={node}/></span>\n        </Grid.Col>\n      </Grid.Row>\n    </FoForm>\n  </Dimmer>\n)\n\nexport default withTranslation()(withRouter(FinanceInvoiceItemEditForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { UPDATE_INVOICE_ITEM } from \"../queries\"\nimport FinanceInvoiceItemEditForm from './FinanceInvoiceItemEditForm'\n\n\nfunction FinanceInvoiceItemEdit({t, initialValues, node, inputData}) {\n  const [updateInvoiceItem, { data }] = useMutation(UPDATE_INVOICE_ITEM)\n\n    return (\n      <Formik\n        initialValues={{\n          productName: initialValues.productName,\n          description: initialValues.description,\n          price: initialValues.price,\n          quantity: initialValues.quantity,\n          financeTaxRate: (initialValues.financeTaxRate) ? initialValues.financeTaxRate.id : null\n        }}\n        // validationSchema={INVOICE_GROUP_SCHEMA}\n        onSubmit={(values, { setSubmitting, setTouched }) => {\n          console.log('submit values:')\n          console.log(values)\n\n          updateInvoiceItem({ variables: {\n            input: {\n              id: initialValues.id,\n              productName: values.productName, \n              description: values.description,\n              price: values.price,\n              quantity: values.quantity,\n              financeTaxRate: values.financeTaxRate\n            }\n          }, refetchQueries: [\n              // {query: GET_INVOICES_QUERY, variables: get_list_query_variables()}\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data)\n              toast.success((t('finance.invoice.item.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              setSubmitting(false)\n              setTouched({})\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n          }}\n      >\n        {({ isSubmitting, errors, values, touched, handleChange, setFieldTouched }) => (\n          <FinanceInvoiceItemEditForm\n            isSubmitting={isSubmitting}\n            errors={errors}\n            values={values}\n            touched={touched}\n            handleChange={handleChange}\n            setFieldTouched={setFieldTouched}\n            node={node}\n            inputData={inputData}\n          >\n          </FinanceInvoiceItemEditForm>   \n        )}\n      </Formik>\n    )\n}\n\n\nexport default withTranslation()(withRouter(FinanceInvoiceItemEdit))","// @flow\n\nimport React, { useCallback, useState } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd';\nimport { toast } from 'react-toastify'\n\nimport {\n  Card,\n  Dimmer, \n  Grid, \n} from \"tabler-react\"\n\nimport FinanceInvoiceItemAdd from \"./FinanceInvoiceItemAdd\"\nimport { GET_INVOICE_QUERY } from '../queries'\n\nimport FinanceInvoiceItemEdit from './FinanceInvoiceItemEdit'\n\n\nexport const UPDATE_INVOICE_ITEM = gql`\n  mutation UpdateFinanceInvoiceItem($input: UpdateFinanceInvoiceItemInput!) {\n    updateFinanceInvoiceItem(input: $input) {\n      financeInvoiceItem {\n        id\n      }\n    }\n  }\n`\n\nfunction FinanceInvoiceEditItems ({ t, history, match, refetchInvoice, inputData }) {\n  const [updateItem, { data }] = useMutation(UPDATE_INVOICE_ITEM)\n  const [ updating, setUpdating ] = useState(false)\n\n  const onDragEnd = useCallback((result) => {\n    // the only one that is required\n    console.log('onDragEnd triggered...')\n    console.log(result)\n    const { draggableId, destination, source, reason } = result\n    console.log(source)\n    console.log(destination)\n    console.log(reason)\n\n    // Nothing to do, nowhere to go...\n    console.log(\"drop cancelled...\")\n    if (!destination || reason === 'CANCEL') {\n      return\n    }\n\n    // Moved back to the same spot\n    console.log(\"dropped to the same spot\")\n    if (\n      destination.droppableId === source.droppableId &&\n      destination.index === source.index\n    ) {\n      return\n    }\n\n    updateLineNumber({\n      node_id: draggableId,\n      line_number: destination.index\n    })\n\n  }, []);\n\n\n  const updateLineNumber = ({ node_id, line_number }) => {\n    setUpdating(true)\n    updateItem({ \n      variables: { \n        input: {\n          id: node_id,\n          lineNumber: line_number\n        } \n      },\n      refetchQueries: [\n        { query: GET_INVOICE_QUERY, variables: { id: inputData.financeInvoice.id }}\n      ]\n    }).then(({ data }) => {\n      console.log('got data', data)\n      toast.success((t('finance.invoice.saved_item_sorting')), {\n          position: toast.POSITION.BOTTOM_RIGHT\n      })\n      setTimeout(() => setUpdating(false), 125)\n    }).catch((error) => {\n      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n          position: toast.POSITION.BOTTOM_RIGHT\n      })\n      console.log('there was an error sending the query', error)\n      setTimeout(() => setUpdating(false), 125)\n    })\n  }\n\n  return (\n    <DragDropContext onDragEnd={onDragEnd} >\n      <Card statusColor=\"blue\">\n        <Card.Header>\n          <Card.Title>{t('general.items')}</Card.Title>\n          <Card.Options>\n            <FinanceInvoiceItemAdd />\n          </Card.Options>\n        </Card.Header>\n        <Card.Body>\n          <Dimmer active={updating} loader={updating}>\n              <Grid.Row className=\"cs-grid-table-header\">\n                <Grid.Col md={3} className=\"cs-grid-table-cell\">{t(\"general.product\")}</Grid.Col>\n                <Grid.Col md={3} className=\"cs-grid-table-cell\">{t(\"general.description\")}</Grid.Col>\n                <Grid.Col md={2} className=\"cs-grid-table-cell\">{t(\"general.quantity_short_and_price\")}</Grid.Col>\n                <Grid.Col md={2} className=\"cs-grid-table-cell\">{t(\"general.tax\")}</Grid.Col>\n                <Grid.Col md={1} className=\"cs-grid-table-cell\"><span className=\"float-right\">{t(\"general.total\")}</span></Grid.Col>\n                <Grid.Col md={1} className=\"cs-grid-table-cell\"></Grid.Col>\n              </Grid.Row>\n              <Droppable droppableId=\"invoice_items\">\n                {(provided, snapshot) => (\n                    <div\n                      ref={provided.innerRef} \n                      {...provided.droppableProps} \n                    >\n                      {inputData.financeInvoice.items.edges.map(({ node }, idx) => (\n                        <Draggable \n                          draggableId={node.id}\n                          index={idx}\n                          key={node.id}\n                        >\n                          {(provided, snapshot) => (\n                              <div \n                                ref={provided.innerRef}\n                                index={node.lineNumber}\n                                {...provided.draggableProps}\n                                {...provided.dragHandleProps}\n                                >\n                                <FinanceInvoiceItemEdit initialValues={node} inputData={inputData} node={node} />\n                              </div>\n                          )}\n                        </Draggable>\n                      ))}\n                      {provided.placeholder}\n                    </div>\n                )}\n              </Droppable>\n          </Dimmer>\n        </Card.Body>\n      </Card>\n    </DragDropContext>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditItems))","export const tinymceBasicConf = {\n    resize: true,\n    menubar: false,\n    plugins: 'link image code lists paste fullscreen',\n    statusbar: false,\n    toolbar: ' undo redo | formatselect | bold italic strikethrough | bullist numlist | alignleft aligncenter alignright | link image | pastetext code | fullscreen',    \n}\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Dimmer,\n  Form,\n} from \"tabler-react\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../plugin_config/tinymce\"\n\n\n// Use editor as controlled component:\n// https://github.com/tinymce/tinymce-react/blob/master/README.md\n\nconst FinanceInvoiceEditTermsForm = ({ t, isSubmitting, values, errors, touched, handleChange, setFieldTouched, setFieldValue }) => (\n  <Dimmer loader={isSubmitting} active={isSubmitting}>\n    <FoForm>\n      <Form.Group label={t('general.terms_and_conditions')}>\n        <Editor\n          tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n          textareaName=\"terms\"\n          initialValue={values.terms}\n          init={tinymceBasicConf}\n          onChange={(e) => {\n            handleChange(e)\n            setFieldTouched(\"terms\", true, true)\n          }}\n          onBlur={(e) => {\n            setFieldValue(\"terms\", e.target.getContent())\n            setFieldTouched(\"terms\", true, true)\n          }}\n        />\n        <ErrorMessage name=\"terms\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Button \n        color=\"primary\"\n        className=\"pull-right\" \n        type=\"submit\" \n        disabled={isSubmitting}\n      >\n        {t('general.submit')}\n      </Button>\n    </FoForm>\n  </Dimmer>\n)\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditTermsForm))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Dimmer,\n  Form,\n} from \"tabler-react\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../plugin_config/tinymce\"\n\n\n// Use editor as controlled component:\n// https://github.com/tinymce/tinymce-react/blob/master/README.md\n\nconst FinanceInvoiceEditFooterForm = ({ t, isSubmitting, values, errors, touched, handleChange, setFieldTouched, setFieldValue }) => (\n  <Dimmer loader={isSubmitting} active={isSubmitting}>\n    <FoForm>\n      <Form.Group label={t('general.footer')}>\n        <Editor\n          tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n          textareaName=\"footer\"\n          initialValue={values.footer}\n          init={tinymceBasicConf}\n          onBlur={(e) => {\n            setFieldValue(\"footer\", e.target.getContent())\n            setFieldTouched(\"footer\", true, true)\n          }}\n        />\n        <ErrorMessage name=\"footer\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Button \n        color=\"primary\"\n        className=\"pull-right\" \n        type=\"submit\" \n        disabled={isSubmitting}\n      >\n        {t('general.submit')}\n      </Button>\n    </FoForm>\n  </Dimmer>\n)\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditFooterForm))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Dimmer,\n  Form,\n} from \"tabler-react\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../plugin_config/tinymce\"\n\n// Use editor as controlled component:\n// https://github.com/tinymce/tinymce-react/blob/master/README.md\n\nconst FinanceInvoiceEditNoteForm = ({ t, isSubmitting, values, errors, handleChange, submitForm, setFieldTouched, setFieldValue }) => (\n  <Dimmer loader={isSubmitting} active={isSubmitting}>\n    <FoForm>\n      <Form.Group label={t('general.note')}>\n        <Editor\n          tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n          textareaName=\"note\"\n          initialValue={values.note}\n          init={tinymceBasicConf}\n          onChange={(e) => {\n            handleChange(e)\n            setFieldTouched(\"note\", true, true)\n          }}\n          onBlur={(e) => {\n            setFieldValue(\"note\", e.target.getContent())\n            setFieldTouched(\"note\", true, true)\n          }}\n        />\n        <ErrorMessage name=\"note\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Button \n        color=\"primary\"\n        className=\"pull-right\" \n        type=\"submit\" \n        disabled={isSubmitting}\n      >\n        {t('general.submit')}\n      </Button>\n    </FoForm>\n  </Dimmer>\n)\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditNoteForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport {\n  Tab,\n  TabbedCard\n} from \"tabler-react\"\n\n\nimport { get_list_query_variables } from \"../tools\"\nimport { UPDATE_INVOICE, GET_INVOICE_QUERY } from \"../queries\"\nimport FinanceInvoiceEditTermsForm from \"./FinanceInvoiceEditTermsForm\"\nimport FinanceInvoiceEditFooterForm from \"./FinanceInvoiceEditFooterForm\"\nimport FinanceInvoiceEditNoteForm from \"./FinanceInvoiceEditNoteForm\"\n\n\nfunction FinanceInvoiceEditAdditional({t, history, match, initialData}) {\n  const id = match.params.id\n  const [ updateInvoice ] = useMutation(UPDATE_INVOICE)\n\n  return (\n    <TabbedCard initialTab={t('general.terms_and_conditions')}>\n      <Tab title={t('general.terms_and_conditions')}>\n        <Formik\n          initialValues={{ \n            terms: initialData.financeInvoice.terms, \n          }}\n          // validationSchema={INVOICE_GROUP_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n            console.log('submit values:')\n            console.log(values)\n\n            updateInvoice({ variables: {\n              input: {\n                id: match.params.id,\n                terms: values.terms, \n              }\n            }, refetchQueries: [\n                {query: GET_INVOICE_QUERY, variables: {id: id}}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                toast.success((t('finance.invoice.toast_edit_terms_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                setSubmitting(false)\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n            }}\n        >\n          {({ isSubmitting, errors, values, touched, handleChange, setFieldTouched, setFieldValue }) => (\n            <FinanceInvoiceEditTermsForm\n              isSubmitting={isSubmitting}\n              errors={errors}\n              values={values}\n              touched={touched}\n              handleChange={handleChange}\n              setFieldTouched={setFieldTouched}\n              setFieldValue={setFieldValue}\n            >\n            </FinanceInvoiceEditTermsForm>\n          )}\n        </Formik>\n      </Tab>\n      <Tab title={t('general.footer')}>\n        <Formik\n          initialValues={{ \n            footer: initialData.financeInvoice.footer, \n          }}\n          // validationSchema={INVOICE_GROUP_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n            console.log('submit values:')\n            console.log(values)\n\n            updateInvoice({ variables: {\n              input: {\n                id: match.params.id,\n                footer: values.footer, \n              }\n            }, refetchQueries: [\n              {query: GET_INVOICE_QUERY, variables: {id: id}}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                toast.success((t('finance.invoice.toast_edit_footer_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                setSubmitting(false)\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n            }}\n        >\n          {({ isSubmitting, errors, values, touched, handleChange, setFieldTouched, setFieldValue }) => (\n            <FinanceInvoiceEditFooterForm\n              isSubmitting={isSubmitting}\n              errors={errors}\n              values={values}\n              handleChange={handleChange}\n              touched={touched}\n              setFieldTouched={setFieldTouched}\n              setFieldValue={setFieldValue}\n            >\n            </FinanceInvoiceEditFooterForm>\n          )}\n        </Formik>\n      </Tab>\n      <Tab title={t('general.note')}>\n        <Formik\n          initialValues={{ \n            note: initialData.financeInvoice.note, \n          }}\n          // validationSchema={INVOICE_GROUP_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n            console.log('submit values:')\n            console.log(values)\n\n            updateInvoice({ variables: {\n              input: {\n                id: match.params.id,\n                note: values.note, \n              }\n            }, refetchQueries: [\n              {query: GET_INVOICE_QUERY, variables: {id: id}}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                toast.success((t('finance.invoice.toast_edit_note_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                setSubmitting(false)\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n            }}\n        >\n          {({ isSubmitting, errors, values, touched, handleChange, setFieldTouched, setFieldValue }) => (\n            <FinanceInvoiceEditNoteForm\n              isSubmitting={isSubmitting}\n              errors={errors}\n              values={values}\n              touched={touched}\n              handleChange={handleChange}\n              setFieldTouched={setFieldTouched}\n              setFieldValue={setFieldValue}\n            >\n            </FinanceInvoiceEditNoteForm>\n          )}\n        </Formik>\n      </Tab>\n    </TabbedCard>\n  )\n}\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditAdditional))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Card\n} from \"tabler-react\";\n\n\nconst FinanceInvoiceEditBalance = ({ t, history, financeInvoice }) => (\n  <Card statusColor=\"blue\">\n    <Card.Header>\n      <Card.Title>{t('general.balance')}</Card.Title>\n    </Card.Header>\n    <Card.Body>\n      <div>\n        <span className=\"pull-left bold\">\n          {t('general.subtotal')}\n        </span>\n        <span className=\"pull-right\">\n          {financeInvoice.subtotalDisplay}\n        </span>\n      </div><br />\n      <div>\n        <span className=\"pull-left bold\">\n          {t('general.tax')}\n        </span>\n        <span className=\"pull-right\">\n          {financeInvoice.taxDisplay}\n        </span>\n      </div><br />\n      <div>\n        <span className=\"pull-left bold\">\n          {t('general.total')}\n        </span>\n        <span className=\"pull-right\">\n          {financeInvoice.totalDisplay}\n        </span>\n      </div><br />\n      <div>\n        <span className=\"pull-left bold\">\n          {t('general.paid')}\n        </span>\n        <span className=\"pull-right\">\n          {financeInvoice.paidDisplay}\n        </span>\n      </div><br />\n      <div>\n        <span className=\"pull-left bold\">\n          {t('general.balance')}\n        </span>\n        <span className=\"pull-right\">\n          {financeInvoice.balanceDisplay}\n        </span>\n      </div>\n    </Card.Body>\n  </Card>\n)\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditBalance))","export function dateToLocalISO(date) {\n    if (date instanceof Date) {\n        return date.getFullYear() + '-' + \n               (\"0\" + (date.getMonth() + 1)).slice(-2) + '-' +\n               (\"0\" + date.getDate()).slice(-2)\n    } else {\n        return date\n    }\n}\n\nexport function dateToLocalISOTime(date) {\n    if (date instanceof Date) {\n        return date.getHours() + ':' + \n               ('0' + date.getMinutes()).slice(-2)\n    } else {\n        return date\n    }\n}\n\n\nexport function TimeStringToJSDateOBJ(time_string) {\n    // time_string is Expected to be \"HH:MM:SS\"\n    let date_obj = new Date()\n    let time_split = time_string.split(':')\n    date_obj.setHours(time_split[0])\n    date_obj.setMinutes(time_split[1])\n\n    return date_obj\n}","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Dimmer,\n  Form,\n} from \"tabler-react\"\n\nimport CSDatePicker from \"../../../ui/CSDatePicker\"\n\n\nconst FinanceInvoiceEditOptionsForm = ({ t, isSubmitting, values, errors, handleChange, touched, setFieldValue, setFieldTouched, inputData }) => (\n  <Dimmer loader={isSubmitting} active={isSubmitting}>\n    <FoForm>\n      <Form.Group label={t('finance.invoices.invoice_number')}>\n        <Field type=\"text\" \n                name=\"invoiceNumber\" \n                className={(errors.invoiceNumber) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\" \n                onChange={(e) => {\n                  handleChange(e)\n                  setFieldTouched(\"invoiceNumber\", true, true)\n                }}           \n        />\n        <ErrorMessage name=\"invoiceNumber\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('finance.invoices.date')}>\n        <CSDatePicker \n          className={(errors.dateSent) ? \"form-control is-invalid\" : \"form-control\"} \n          selected={values.dateSent}\n          onChange={(date) => {\n            setFieldValue(\"dateSent\", date)\n            setFieldTouched(\"dateSent\", true)\n          }}\n        />\n        <ErrorMessage name=\"dateSent\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('finance.invoices.due')}>\n        <CSDatePicker \n          className={(errors.dateDue) ? \"form-control is-invalid\" : \"form-control\"} \n          selected={values.dateDue}\n          onChange={(date) => {\n            setFieldValue(\"dateDue\", date)\n            setFieldTouched(\"dateDue\", true)\n          }}\n        />\n        <ErrorMessage name=\"dateDue\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('general.status')}>\n        <Field component=\"select\" \n              name=\"status\" \n              className={(errors.status) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\"\n              onChange={(e) => {\n                handleChange(e)\n                setFieldTouched(\"status\", true, true)\n              }}\n        >\n          <option value=\"DRAFT\">{t('finance.invoices.status.DRAFT')}</option>\n          <option value=\"SENT\">{t('finance.invoices.status.SENT')}</option>\n          <option value=\"PAID\">{t('finance.invoices.status.PAID')}</option>\n          <option value=\"CANCELLED\">{t('finance.invoices.status.CANCELLED')}</option>\n        </Field>\n        <ErrorMessage name=\"status\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('general.payment_method')}>\n        <Field component=\"select\" \n              name=\"financePaymentMethod\" \n              className={(errors.financePaymentMethod) ? \"form-control is-invalid\" : \"form-control\"} \n              onChange={(e) => {\n                handleChange(e)\n                setFieldTouched(\"financePaymentMethod\", true, true)\n              }}\n              autoComplete=\"off\">\n          <option value=\"\" key={v4()}></option>\n          {inputData.financePaymentMethods.edges.map(({ node }) =>\n            <option value={node.id} key={v4()}>{node.name}</option>\n          )}\n        </Field>\n        <ErrorMessage name=\"financePaymentMethod\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>  \n      {(Object.keys(touched).length === 0) ? \"\" :\n        <Button \n          color=\"primary\"\n          className=\"pull-right\" \n          type=\"submit\" \n          disabled={isSubmitting}\n        >\n          {t('general.submit')}\n        </Button>\n      }\n    </FoForm>\n  </Dimmer>\n)\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditOptionsForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport {\n  Card, \n} from \"tabler-react\"\n\nimport { dateToLocalISO } from '../../../../tools/date_tools'\nimport { get_list_query_variables } from \"../tools\"\nimport { UPDATE_INVOICE, GET_INVOICES_QUERY } from \"../queries\"\nimport FinanceInvoiceEditOptionsForm from \"./FinanceInvoiceEditOptionsForm\"\n\n\nfunction FinanceInvoiceEditOptions({t, match, initialData}) {\n  const [ updateInvoice ] = useMutation(UPDATE_INVOICE)\n  \n  let initialPaymentMethod = \"\"\n  if (initialData.financeInvoice.financePaymentMethod) {\n    initialPaymentMethod = initialData.financeInvoice.financePaymentMethod.id\n  }\n\n  // DatePicker doesn't like a string as an initial value\n  // This makes it a happy DatePicker :)\n  let dateSent = null\n  if (initialData.financeInvoice.dateSent) {\n    dateSent = new Date(initialData.financeInvoice.dateSent)\n  }\n  let dateDue = null\n  if (initialData.financeInvoice.dateDue) {\n    dateDue = new Date(initialData.financeInvoice.dateDue)\n  }\n\n  \n  console.log(\"########\")\n  console.log(initialData)\n  console.log(dateSent)\n  console.log(dateDue)\n\n\n  return (\n    <Card title={t('general.options')} statusColor=\"blue\">\n      <Card.Body>\n        <Formik\n          initialValues={{ \n            invoiceNumber: initialData.financeInvoice.invoiceNumber, \n            dateSent: dateSent,\n            dateDue: dateDue,\n            status: initialData.financeInvoice.status,\n            financePaymentMethod: initialPaymentMethod\n          }}\n          // validationSchema={INVOICE_GROUP_SCHEMA}\n          onSubmit={(values, { setSubmitting, setTouched }) => {\n            console.log('submit values:')\n            console.log(values)\n\n            updateInvoice({ variables: {\n              input: {\n                id: match.params.id,\n                invoiceNumber: values.invoiceNumber, \n                dateSent: dateToLocalISO(values.dateSent),\n                dateDue: dateToLocalISO(values.dateDue),\n                status: values.status,\n                financePaymentMethod: values.financePaymentMethod,\n              }\n            }, refetchQueries: [\n                {query: GET_INVOICES_QUERY, variables: get_list_query_variables()}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                toast.success((t('finance.invoice.toast_edit_options_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                setSubmitting(false)\n                setTouched({})\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n            }}\n        >\n          {({ isSubmitting, errors, values, touched, handleChange, submitForm, setFieldTouched, setFieldValue }) => (\n            <FinanceInvoiceEditOptionsForm\n              inputData={initialData}\n              isSubmitting={isSubmitting}\n              errors={errors}\n              values={values}\n              touched={touched}\n              handleChange={handleChange}\n              setFieldValue={setFieldValue}\n              setFieldTouched={setFieldTouched}\n            >\n            </FinanceInvoiceEditOptionsForm>\n          )}\n        </Formik>\n      </Card.Body>\n    </Card>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditOptions))","// @flow\n\nimport React, { Fragment } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Card\n} from \"tabler-react\";\n\n\nconst FinanceInvoiceEditOrganization = ({ t, history, organization }) => (\n  <Card statusColor=\"blue\">\n    <Card.Header>\n      <Card.Title>{t('general.from')}</Card.Title>\n    </Card.Header>\n    <Card.Body>\n      <div className=\"bold\">\n        {organization.name}\n      </div>\n      {(organization.address) ?\n        <div dangerouslySetInnerHTML={{ __html: organization.address}} />\n        : \"\"\n      }      \n      <div>\n        {organization.phone}\n      </div>\n      <div>\n        {organization.email}\n      </div>\n      <div>\n        {organization.registration}\n      </div>\n      <div>\n        {organization.taxRegistration}\n      </div>\n    </Card.Body>\n  </Card>\n)\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditOrganization))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Dimmer,\n  Form,\n} from \"tabler-react\"\n\n\nlet summaryFormTypingTimer\nconst formSubmitTimeout = 750\n\n\nconst FinanceInvoiceEditSummaryForm = ({ t, isSubmitting, errors, touched, setFieldTouched, handleChange }) => (\n  <Dimmer loader={isSubmitting} active={isSubmitting}>\n    <FoForm>\n      <Form.Group>\n        <Field \n          type=\"text\" \n          name=\"summary\" \n          className={(errors.summary) ? \"form-control is-invalid\" : \"form-control\"} \n          autoComplete=\"off\" \n          onChange={(e) => {\n            handleChange(e)\n            setFieldTouched(\"summary\", true, true)\n          }}\n        />\n        <ErrorMessage name=\"summary\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      {(Object.keys(touched).length === 0) ? \"\" :\n        <Button \n          color=\"primary\"\n          className=\"pull-right\" \n          type=\"submit\" \n          disabled={isSubmitting}\n        >\n          {t('general.submit')}\n        </Button>\n      }\n    </FoForm>\n  </Dimmer>\n)\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditSummaryForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport {\n  Card\n} from \"tabler-react\"\n\nimport { get_list_query_variables } from \"../tools\"\nimport { UPDATE_INVOICE, GET_INVOICES_QUERY } from \"../queries\"\nimport FinanceInvoiceEditSummaryForm from \"./FinanceInvoiceEditSummaryForm\"\n\n\nfunction FinanceInvoiceEditSummary({t, history, match, initialData}) {\n  const [ updateInvoice ] = useMutation(UPDATE_INVOICE)\n\n  return (\n    <Card statusColor=\"blue\">\n      <Card.Header>\n        <Card.Title>{t('general.summary')}</Card.Title>\n      </Card.Header>\n      <Card.Body>\n        <Formik\n          initialValues={{ \n            summary: initialData.financeInvoice.summary, \n          }}\n          // validationSchema={INVOICE_GROUP_SCHEMA}\n          onSubmit={(values, { setSubmitting, setTouched }) => {\n            console.log('submit values:')\n            console.log(values)\n\n            updateInvoice({ variables: {\n              input: {\n                id: match.params.id,\n                summary: values.summary, \n              }\n            }, refetchQueries: [\n                {query: GET_INVOICES_QUERY, variables: get_list_query_variables()}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                toast.success((t('finance.invoice.toast_edit_summary_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                setSubmitting(false)\n                setTouched({})\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n            }}\n        >\n          {({ isSubmitting, errors, values, touched, setFieldTouched, handleChange }) => (\n            <FinanceInvoiceEditSummaryForm\n              isSubmitting={isSubmitting}\n              errors={errors}\n              values={values}\n              touched={touched}\n              handleChange={handleChange}\n              setFieldTouched={setFieldTouched}\n            >\n            </FinanceInvoiceEditSummaryForm>\n          )}\n        </Formik>\n        {console.log(initialData)}\n        {(initialData.financeInvoice.creditInvoiceNumber) ?\n          t(\"finance.invoice.credit_invoice_for\") + \": \" + initialData.financeInvoice.creditInvoiceNumber\n        : \"\"}\n      </Card.Body>\n    </Card>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditSummary))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Dimmer,\n  Form,\n  Grid,\n} from \"tabler-react\"\n\n\nconst FinanceInvoiceEditToForm = ({ t, isSubmitting, errors, touched, handleChange, setFieldTouched }) => (\n  <Dimmer loader={isSubmitting} active={isSubmitting}>\n    <FoForm>\n      <Form.Group label={t(\"finance.invoices.relation_company\")}>\n        <Field type=\"text\" \n                name=\"relationCompany\" \n                className={(errors.relationCompany) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\" \n                onChange={(e) => {\n                  handleChange(e)\n                  setFieldTouched(\"relationCompany\", true, true)\n                }}           \n        />\n        <ErrorMessage name=\"relationCompany\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Grid.Row>\n        <Grid.Col md={6}>\n          <Form.Group label={t(\"finance.invoices.relation_company_registration\")}>\n            <Field type=\"text\" \n                    name=\"relationCompanyRegistration\" \n                    className={(errors.relationCompanyRegistration) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" \n                    onChange={(e) => {\n                      handleChange(e)\n                      setFieldTouched(\"relationCompanyRegistartion\", true, true)\n                    }} \n            />\n            <ErrorMessage name=\"relationCompanyRegistration\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n        <Grid.Col md={6}>\n          <Form.Group label={t(\"finance.invoices.relation_company_tax_registration\")}>\n            <Field type=\"text\" \n                    name=\"relationCompanyTaxRegistration\" \n                    className={(errors.relationCompanyTaxRegistration) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" \n                    onChange={(e) => {\n                      handleChange(e)\n                      setFieldTouched(\"relationCompanyTaxRegistration\", true, true)\n                    }}\n            />\n            <ErrorMessage name=\"relationCompanyTaxRegistration\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row>\n      <Form.Group label={t(\"finance.invoices.relation_contact_name\")}>\n        <Field type=\"text\" \n                name=\"relationContactName\" \n                className={(errors.relationContactName) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\" \n                onChange={(e) => {\n                  handleChange(e)\n                  setFieldTouched(\"relationContactName\", true, true)\n                }}\n        />\n        <ErrorMessage name=\"relationContactName\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Grid.Row>\n        <Grid.Col md={6}>\n          <Form.Group label={t(\"finance.invoices.relation_address\")}>\n            <Field type=\"text\" \n                    name=\"relationAddress\" \n                    className={(errors.relationAddress) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" \n                    onChange={(e) => {\n                      handleChange(e)\n                      setFieldTouched(\"relationAddress\", true, true)\n                    }} \n            />\n            <ErrorMessage name=\"relationAddress\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n        <Grid.Col md={6}>\n          <Form.Group label={t(\"finance.invoices.relation_postcode\")}>\n            <Field type=\"text\" \n                    name=\"relationPostcode\" \n                    className={(errors.relationPostcode) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" \n                    onChange={(e) => {\n                      handleChange(e)\n                      setFieldTouched(\"relationPostcode\", true, true)\n                    }}\n            />\n            <ErrorMessage name=\"relationPostcode\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col md={6}>\n          <Form.Group label={t(\"finance.invoices.relation_city\")}>\n            <Field type=\"text\" \n                    name=\"relationCity\" \n                    className={(errors.relationCity) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" \n                    onChange={(e) => {\n                      handleChange(e)\n                      setFieldTouched(\"relationCity\", true, true)\n                    }}\n            />\n            <ErrorMessage name=\"relationCity\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n        <Grid.Col md={6}>\n          <Form.Group label={t(\"finance.invoices.relation_country\")}>\n            <Field type=\"text\" \n                    name=\"relationCountry\" \n                    className={(errors.relationCountry) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" \n                    onChange={(e) => {\n                      handleChange(e)\n                      setFieldTouched(\"relationCountry\", true, true)\n                    }}\n            />\n            <ErrorMessage name=\"relationCountry\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col>\n          {(Object.keys(touched).length === 0) ? \"\" :\n            <Button \n              color=\"primary\"\n              className=\"pull-right\" \n              type=\"submit\" \n              disabled={isSubmitting}\n            >\n              {t('general.submit')}\n            </Button>\n          }\n        </Grid.Col>\n      </Grid.Row>\n    </FoForm>\n  </Dimmer>\n)\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditToForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport {\n  Card\n} from \"tabler-react\"\n\n\nimport { get_list_query_variables } from \"../tools\"\nimport { UPDATE_INVOICE, GET_INVOICES_QUERY } from \"../queries\"\nimport FinanceInvoiceEditToForm from \"./FinanceInvoiceEditToForm\"\n\n\nfunction FinanceInvoiceEditTo({ t, history, match, initialData }) {\n  const [ updateInvoice ] = useMutation(UPDATE_INVOICE)\n\n  return (\n    <Card title={t('general.to')} statusColor=\"blue\">\n      <Card.Body>\n        <Formik\n          initialValues={{ \n            relationCompany: initialData.financeInvoice.relationCompany, \n            relationCompanyRegistration: initialData.financeInvoice.relationCompanyRegistration, \n            relationCompanyTaxRegistration: initialData.financeInvoice.relationCompanyTaxRegistration, \n            relationContactName: initialData.financeInvoice.relationContactName, \n            relationAddress: initialData.financeInvoice.relationAddress, \n            relationPostcode: initialData.financeInvoice.relationPostcode, \n            relationCity: initialData.financeInvoice.relationCity, \n            relationCountry: initialData.financeInvoice.relationCountry, \n          }}\n          // validationSchema={INVOICE_GROUP_SCHEMA}\n          onSubmit={(values, { setSubmitting, setTouched }) => {\n            console.log('submit values:')\n            console.log(values)\n\n            updateInvoice({ variables: {\n              input: {\n                id: match.params.id,\n                relationCompany: values.relationCompany,\n                relationCompanyRegistration: values.relationCompanyRegistration,\n                relationCompanyTaxRegistration: values.relationCompanyTaxRegistration,\n                relationContactName: values.relationContactName,\n                relationAddress: values.relationAddress,\n                relationPostcode: values.relationPostcode,\n                relationCity: values.relationCity,\n                relationCountry: values.relationCountry\n              }\n            }, refetchQueries: [\n                {query: GET_INVOICES_QUERY, variables: get_list_query_variables()}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                toast.success((t('finance.invoice.toast_edit_to_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                setSubmitting(false)\n                setTouched({})\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n            }}\n        >\n          {({ isSubmitting, errors, values, touched, handleChange, setFieldTouched }) => (\n            <FinanceInvoiceEditToForm\n              isSubmitting={isSubmitting}\n              errors={errors}\n              values={values}\n              touched={touched}\n              handleChange={handleChange}\n              setFieldTouched={setFieldTouched}\n            >\n            </FinanceInvoiceEditToForm>\n          )}\n        </Formik>\n      </Card.Body>\n    </Card>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditTo))","import React, { useContext } from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n// import { get_list_query_variables } from \"../tools\"\nimport { DELETE_INVOICE_PAYMENT, GET_INVOICES_QUERY, GET_INVOICE_QUERY } from \"../queries\"\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\nimport moment from 'moment'\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport { get_list_query_variables } from \"../tools\"\n\n\nfunction FinanceInvoiceEditPaymentDelete({t, match, node}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const [deleteInvoicePayment, { data }] = useMutation(DELETE_INVOICE_PAYMENT)\n\n    return (\n      <button className=\"icon btn btn-link btn-sm\" \n        title={t('general.delete')} \n        href=\"\"\n        onClick={() => {\n          confirm_delete({\n            t: t,\n            msgConfirm: t(\"finance.invoices.payment_delete_confirm_msg\"),\n            msgDescription: <p>{ moment(node.date).format(dateFormat) } - {node.amountDisplay}</p>,\n            msgSuccess: t('finance.invoices.payment_deleted'),\n            deleteFunction: deleteInvoicePayment,\n            functionVariables: { \n              variables: {\n                input: {\n                  id: node.id\n                }\n              }, \n              refetchQueries: [\n                {query: GET_INVOICES_QUERY, variables: get_list_query_variables() },\n                {query: GET_INVOICE_QUERY, variables: {id: match.params.id} },\n              ]\n            }\n          })\n      }}>\n        <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n      </button>\n    )\n}\n\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditPaymentDelete))\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Button,\n  Card,\n  Icon, \n  Table\n} from \"tabler-react\"\n\nimport moment from 'moment'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport FinanceInvoiceEditPaymentDelete from \"./FinanceInvoiceEditPaymentDelete\"\n\n\nfunction FinanceInvoiceEditPayments ({ t, history, match, refetchInvoice, inputData }) {\n  const id = match.params.id\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const paymentAddUrl = `/finance/invoices/${id}/payment/add`\n\n  return (\n    <Card statusColor=\"blue\">\n      <Card.Header>\n        <Card.Title>{t('general.payments')}</Card.Title>\n        <Card.Options>\n          {/* <FinanceInvoiceItemAdd /> */}\n          <Link to={paymentAddUrl}>\n            <Button className=\"btn-sm\" color=\"primary\">\n              <Icon prefix=\"fe\" name=\"plus\" /> {t('finance.invoice.payments.add')} \n            </Button>\n          </Link>\n        </Card.Options>\n      </Card.Header>\n        <Table cards>\n          <Table.Header>\n            <Table.Row>\n              <Table.ColHeader>{t(\"general.date\")}</Table.ColHeader>\n              <Table.ColHeader>{t(\"general.amount\")}</Table.ColHeader>\n              <Table.ColHeader>{t(\"general.payment_method\")}</Table.ColHeader>\n              <Table.ColHeader>{t(\"general.note\")}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {inputData.financeInvoice.payments.edges.map(({ node }) => (\n              <Table.Row key={\"payment_\" + node.id}>\n                <Table.Col>\n                  { moment(node.date).format(dateFormat) }\n                </Table.Col>\n                <Table.Col>\n                  { node.amountDisplay }\n                </Table.Col>\n                <Table.Col>\n                  { (node.financePaymentMethod) ? node.financePaymentMethod.name : \"\" }\n                </Table.Col>\n                <Table.Col>\n                  <div dangerouslySetInnerHTML={{ __html:node.note }}></div>\n                </Table.Col>\n                <Table.Col>\n                  <span className=\"pull-right\">\n                    <Link to={ \"/finance/invoices/\" + inputData.financeInvoice.id + \"/payment/edit/\" + node.id } \n                          className='btn btn-secondary btn-sm mr-2'\n                    >\n                      {t('general.edit')}\n                    </Link>\n                    <FinanceInvoiceEditPaymentDelete node={node} />\n                  </span>\n                </Table.Col>\n              </Table.Row>\n            ))}\n          </Table.Body>\n        </Table>\n      </Card>\n  )\n}\n\nexport default withTranslation()(withRouter(FinanceInvoiceEditPayments))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\nimport { toast } from 'react-toastify'\n\nimport { GET_INVOICES_QUERY, GET_INVOICE_QUERY, CANCEL_AND_CREATE_CREDIT_INVOICE } from '../queries'\nimport { TOKEN_REFRESH } from \"../../../../queries/system/auth\"\nimport { refreshTokenAndOpenExportLinkInNewTab } from \"../../../../tools/refresh_token_and_open_export_link\"\n\nimport {\n  Dropdown,\n  Page,\n  Grid,\n  Icon,\n  Button,\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\n\nimport CSLS from \"../../../../tools/cs_local_storage\"\n\nimport FinanceInvoiceEditBase from \"./FinanceInvoiceEditBase\"\nimport FinanceInvoiceEditItems from \"./FinanceInvoiceEditItems\"\nimport FinanceInvoiceEditAdditional from \"./FinanceInvoiceEditAdditional\"\nimport FinanceInvoiceEditBalance from \"./FinanceInvoiceEditBalance\"\nimport FinanceInvoiceEditOptions from \"./FinanceInvoiceEditOptions\"\nimport FinanceInvoiceEditOrganization from \"./FinanceInvoiceEditOrganization\"\nimport FinanceInvoiceEditSummary from \"./FinanceInvoiceEditSummary\"\nimport FinanceInvoiceEditTo from \"./FinanceInvoiceEditTo\"\nimport FinanceInvoiceEditPayments from \"./FinanceInvoiceEditPayments\"\n\nfunction FinanceInvoiceEdit({t, match, history}) {\n  const id = match.params.id\n  const { loading, error, data, refetch } = useQuery(GET_INVOICE_QUERY, {\n    variables: {\n      id: id\n    }\n  })\n\n  const [doTokenRefresh] = useMutation(TOKEN_REFRESH)\n  const [cancelAndCreateCreditInvoice] = useMutation(CANCEL_AND_CREATE_CREDIT_INVOICE)\n  \n  // Loading\n  if (loading) return <FinanceInvoiceEditBase>{t('general.loading_with_dots')}</FinanceInvoiceEditBase>\n  // Error\n  if (error) {\n    console.log(error)\n    return <FinanceInvoiceEditBase>{t('general.error_sad_smiley')}</FinanceInvoiceEditBase>\n  }\n\n  console.log(data)\n  // Fetch back location from localStorage, if no value set, default back to /finance/invoices\n  let return_url = localStorage.getItem(CSLS.FINANCE_INVOICES_EDIT_RETURN)\n  if (!return_url) {\n    return_url = \"/finance/invoices\"\n  }\n  const export_url = \"/d/export/invoice/pdf/\" + id\n  const payment_add_url = `/finance/invoices/${id}/payment/add`\n\n  return (\n    <FinanceInvoiceEditBase>\n      <Page.Header title={t('finance.invoice.title') + ' #' + data.financeInvoice.invoiceNumber}>\n        <div className=\"page-options d-flex\">\n          {/* Back */}\n          <Link to={return_url} \n                className='btn btn-secondary mr-2'>\n              <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back')} \n          </Link>\n          {/* Add payment */}\n          <Link to={payment_add_url} \n              className='btn btn-secondary mr-2'>\n              <Icon prefix=\"fe\" name=\"dollar-sign\" /> {t('finance.invoice.payments.add')} \n          </Link>\n          {/* Export as PDF */}\n          <Button\n            color=\"secondary\"\n            icon=\"printer\"\n            className=\"mr-2\"\n            onClick={() => refreshTokenAndOpenExportLinkInNewTab(\n              doTokenRefresh, history, export_url\n            )}\n          >\n            {t('general.pdf')} \n          </Button>\n          {/* Tools */}\n          <Dropdown\n            className=\"\"\n            type=\"button\"\n            toggle\n            icon=\"tool\"\n            color=\"secondary\"\n            triggerContent={t(\"general.tools\")}\n            items={[\n              <HasPermissionWrapper permission=\"change\" resource=\"financeinvoice\">\n                <Dropdown.Item\n                  key={v4()}\n                  icon=\"slash\"\n                  onClick={() => {\n                    cancelAndCreateCreditInvoice({ variables: {\n                      input: {\n                        id: id,\n                      }\n                    }, refetchQueries: []\n                    })\n                    .then(({ data }) => {\n                        console.log('got data', data)\n                        const creditInvoiceId = data.cancelAndCreateCreditFinanceInvoice.financeInvoice.id\n                        history.push(`/finance/invoices/edit/${creditInvoiceId}`)\n                        toast.success((t('finance.invoice.now_editing_credit_invoice')), {\n                            position: toast.POSITION.BOTTOM_RIGHT\n                          })\n                      }).catch((error) => {\n                        toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                            position: toast.POSITION.BOTTOM_RIGHT\n                          })\n                        console.log('there was an error sending the query', error)\n                      })\n                  }}>\n                    {t('finance.invoice.cancel_and_create_credit_invoice')}\n                </Dropdown.Item>\n              </HasPermissionWrapper>\n            ]}>\n          </Dropdown>\n        </div>\n      </Page.Header>\n      <Grid.Row>\n        <Grid.Col md={9}>\n          <FinanceInvoiceEditSummary \n            initialData={data}\n          />\n          <Grid.Row>\n            <Grid.Col md={6} ml={0}>\n              <FinanceInvoiceEditOrganization organization={data.organization} />\n            </Grid.Col>\n            <Grid.Col md={6} ml={0}>\n              <FinanceInvoiceEditTo initialData={data} />\n            </Grid.Col>\n          </Grid.Row>\n        </Grid.Col>\n        <Grid.Col md={3}>\n          <FinanceInvoiceEditBalance financeInvoice={data.financeInvoice} />\n          <FinanceInvoiceEditOptions\n            initialData={data}\n          />\n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col md={12}>\n          <FinanceInvoiceEditItems inputData={data} refetchInvoice={refetch} />\n          <FinanceInvoiceEditAdditional initialData={data} />\n          <FinanceInvoiceEditPayments inputData={data} />\n        </Grid.Col>\n      </Grid.Row>\n    </FinanceInvoiceEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceInvoiceEdit))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\n\nimport {\n  Badge\n} from \"tabler-react\"\n\n\nconst BadgeBoolean = ({ t, value }) => (\n    (value) ?\n        <Badge color=\"success\">{t('general.yes')}</Badge> :\n        <Badge color=\"danger\">{t('general.no')}</Badge> \n)\n\nexport default withTranslation()(BadgeBoolean)","import { gql } from \"@apollo/client\"\n\nexport const GET_INVOICE_GROUPS_QUERY = gql`\n  query FinanceInvoiceGroupsQuery($archived: Boolean!) {\n    financeInvoiceGroups(archived: $archived) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          archived\n          displayPublic\n          name\n          nextId\n          dueAfterDays\n          prefix\n          prefixYear\n          autoResetPrefixYear\n          terms\n          footer\n          code\n        }\n      }\n    }\n  }\n`\n\nexport const GET_INVOICE_GROUP_QUERY = gql`\n  query FinanceInvoiceGroup($id: ID!) {\n    financeInvoiceGroup(id:$id) {\n      id\n      archived\n      displayPublic\n      name\n      nextId\n      dueAfterDays\n      prefix\n      prefixYear\n      autoResetPrefixYear\n      terms\n      footer\n      code\n    }\n  }\n`\n\nexport const UPDATE_INVOICE_GROUP = gql`\nmutation UpdateFinanceInvoiceGroup($input: UpdateFinanceInvoiceGroupInput!) {\n  updateFinanceInvoiceGroup(input: $input) {\n    financeInvoiceGroup {\n      id\n      name\n      code\n    }\n  }\n}\n`\n\nexport const ADD_INVOICE_GROUP = gql`\nmutation CreateFinanceInvoiceGroup($input:CreateFinanceInvoiceGroupInput!) {\n  createFinanceInvoiceGroup(input: $input) {\n    financeInvoiceGroup{\n      id\n      archived\n      displayPublic\n      name\n      nextId\n      dueAfterDays\n      prefix\n      prefixYear\n      autoResetPrefixYear\n      terms\n      footer\n      code\n    }\n  }\n}\n`\n\nexport const ARCHIVE_INVOICE_GROUP = gql`\nmutation ArchiveFinanceInvoiceGroup($input: ArchiveFinanceInvoiceGroupInput!) {\n  archiveFinanceInvoiceGroup(input: $input) {\n    financeInvoiceGroup {\n      id\n      archived\n    }\n  }\n}\n`","// @flow\n\nimport React from 'react'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table,\n  Text\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport BadgeBoolean from \"../../../ui/BadgeBoolean\"\nimport ContentCard from \"../../../general/ContentCard\"\nimport FinanceMenu from \"../../FinanceMenu\"\n\nimport { GET_INVOICE_GROUPS_QUERY, ARCHIVE_INVOICE_GROUP } from \"./queries\"\n\n\nfunction FinanceInvoiceGroupsBase({t, history, children, showBack=true}) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"finance.title\")}>\n            <div className=\"page-options d-flex\">\n              <Link to=\"/finance/invoices\" \n                    className='btn btn-outline-secondary btn-sm mr-2'>\n                  <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back_to')} {t('finance.invoices.title')}\n              </Link>\n              <Link to=\"/finance/invoices/groups/defaults\" \n                    className='btn btn-outline-secondary btn-sm'>\n                  <Icon prefix=\"fe\" name=\"settings\" /> {t('finance.invoice_groups_defaults.title')}\n              </Link> \n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ?\n                <Link to=\"/finance/invoices/groups\">\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n                :\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"financeinvoicegroup\">\n                  <Link to=\"/finance/invoices/groups/add\">\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('finance.invoice_groups.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n              }\n              <FinanceMenu activeLink='invoices'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nconst FinanceInvoiceGroups = ({ t, history, archived=false }) => (\n\n            <Query query={GET_INVOICE_GROUPS_QUERY} variables={{ archived }}>\n             {({ loading, error, data: {financeInvoiceGroups: invoice_groups}, refetch, fetchMore }) => {\n                // Loading\n                if (loading) return (\n                  <ContentCard cardTitle={t('finance.invoice_groups.title')}>\n                    <Dimmer active={true}\n                            loader={true}>\n                    </Dimmer>\n                  </ContentCard>\n                )\n                // Error\n                if (error) return (\n                  <ContentCard cardTitle={t('finance.invoice_groups.title')}>\n                    <p>{t('finance.invoice_groups.error_loading')}</p>\n                  </ContentCard>\n                )\n                const headerOptions = <Card.Options>\n                  <Button color={(!archived) ? 'primary': 'secondary'}  \n                          size=\"sm\"\n                          onClick={() => {archived=false; refetch({archived});}}>\n                    {t('general.current')}\n                  </Button>\n                  <Button color={(archived) ? 'primary': 'secondary'} \n                          size=\"sm\" \n                          className=\"ml-2\" \n                          onClick={() => {archived=true; refetch({archived});}}>\n                    {t('general.archive')}\n                  </Button>\n                </Card.Options>\n                \n                // Empty list\n                if (!invoice_groups.edges.length) { return (\n                  <ContentCard cardTitle={t('finance.invoice_groups.title')}\n                               headerContent={headerOptions}>\n                    <p>\n                    {(!archived) ? t('finance.invoice_groups.empty_list') : t(\"finance.invoice_groups.empty_archive\")}\n                    </p>\n                   \n                  </ContentCard>\n                )} else {   \n                // Life's good! :)\n                return (\n                  <ContentCard cardTitle={t('finance.invoice_groups.title')}\n                               headerContent={headerOptions}\n                               pageInfo={invoice_groups.pageInfo}\n                               onLoadMore={() => {\n                                fetchMore({\n                                  variables: {\n                                    after: invoice_groups.pageInfo.endCursor\n                                  },\n                                  updateQuery: (previousResult, { fetchMoreResult }) => {\n                                    const newEdges = fetchMoreResult.financeInvoiceGroups.edges\n                                    const pageInfo = fetchMoreResult.financeInvoiceGroups.pageInfo\n\n                                    return newEdges.length\n                                      ? {\n                                          // Put the new invoice_groups at the end of the list and update `pageInfo`\n                                          // so we have the new `endCursor` and `hasNextPage` values\n                                          financeInvoiceGroups: {\n                                            __typename: previousResult.financeInvoiceGroups.__typename,\n                                            edges: [ ...previousResult.financeInvoiceGroups.edges, ...newEdges ],\n                                            pageInfo\n                                          }\n                                        }\n                                      : previousResult\n                                  }\n                                })\n                              }} \n                    >\n                    <Table>\n                      <Table.Header>\n                        <Table.Row key={v4()}>\n                          <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                          <Table.ColHeader>{t('finance.invoice_groups.next_id')}</Table.ColHeader>\n                          <Table.ColHeader>{t('finance.invoice_groups.due_after_days')}</Table.ColHeader>\n                          <Table.ColHeader>{t('general.prefix')}</Table.ColHeader>\n                          <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n                          <Table.ColHeader>{t('finance.code')}</Table.ColHeader>\n                        </Table.Row>\n                      </Table.Header>\n                      <Table.Body>\n                          {invoice_groups.edges.map(({ node }) => (\n                            <Table.Row key={v4()}>\n                              <Table.Col key={v4()}>\n                                {node.name}\n                              </Table.Col>\n                              <Table.Col key={v4()}>\n                                {node.nextId}\n                              </Table.Col>\n                              <Table.Col key={v4()}>\n                                {node.dueAfterDays}\n                              </Table.Col>\n                              <Table.Col key={v4()}>\n                                {node.prefix} \n                                {(node.prefixYear) ? <span>[{t('general.year')}]<br /></span>: ''}\n                                {(node.autoResetPrefixYear) ? <Text.Small color=\"gray\">\n                                  {t('finance.invoice_groups.auto_reset_prefix_year')}\n                                </Text.Small>: ''}\n                              </Table.Col>\n                              <Table.Col key={v4()}>\n                                <BadgeBoolean value={node.displayPublic} />\n                              </Table.Col>\n                              <Table.Col key={v4()}>\n                                {node.code}\n                              </Table.Col>\n                              <Table.Col className=\"text-right\" key={v4()}>\n                                {(node.archived) ? \n                                  <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                                  <Button className='btn-sm' \n                                          onClick={() => history.push(\"/finance/invoices/groups/edit/\" + node.id)}\n                                          color=\"secondary\">\n                                    {t('general.edit')}\n                                  </Button>\n                                }\n                              </Table.Col>\n                              <Mutation mutation={ARCHIVE_INVOICE_GROUP} key={v4()}>\n                                {(archiveInvoiceGroup, { data }) => (\n                                  <Table.Col className=\"text-right\" key={v4()}>\n                                    <button className=\"icon btn btn-link btn-sm\" \n                                        title={t('general.archive')} \n                                        href=\"\"\n                                        onClick={() => {\n                                          console.log(\"clicked archived\")\n                                          let id = node.id\n                                          archiveInvoiceGroup({ variables: {\n                                            input: {\n                                            id,\n                                            archived: !archived\n                                            }\n                                    }, refetchQueries: [\n                                        {query: GET_INVOICE_GROUPS_QUERY, variables: {\"archived\": archived }}\n                                    ]}).then(({ data }) => {\n                                      console.log('got data', data);\n                                      toast.success(\n                                        (archived) ? t('general.unarchived'): t('general.archived'), {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                    }).catch((error) => {\n                                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                      console.log('there was an error sending the query', error);\n                                    })\n                                    }}>\n                                      <Icon prefix=\"fa\" name=\"inbox\" />\n                                    </button>\n                                  </Table.Col>\n                                )}\n                              </Mutation>\n                            </Table.Row>\n                          ))}\n                      </Table.Body>\n                    </Table>\n                  </ContentCard>\n                )}}\n             }\n            </Query>\n\n);\n\nexport default withTranslation()(withRouter(FinanceInvoiceGroupsBase))","// @flow\n\nimport React, { useState } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Table,\n  Text\n} from \"tabler-react\";\n\nimport { toast } from 'react-toastify'\n\nimport BadgeBoolean from \"../../../ui/BadgeBoolean\"\nimport ContentCard from \"../../../general/ContentCard\"\n\nimport { GET_INVOICE_GROUPS_QUERY, ARCHIVE_INVOICE_GROUP } from \"./queries\"\nimport FinanceInvoiceGroupsBase from './FinanceInvoiceGroupsBase'\n\n\nfunction FinanceInvoiceGroups({t, history}) {\n  let [archived, setArchived] = useState(false)\n  const cardTitle = t('finance.invoice_groups.title')\n  const { loading, error, data, refetch, fetchMore } = useQuery(GET_INVOICE_GROUPS_QUERY, {\n    variables: { archived: archived }\n  })\n  const [ archiveInvoiceGroup ] = useMutation(ARCHIVE_INVOICE_GROUP)\n\n  const headerOptions = <Card.Options>\n    <Button color={(!archived) ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {setArchived(false); refetch({archived: false});}}>\n      {t('general.current')}\n    </Button>\n    <Button color={(archived) ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {setArchived(true); refetch({archived: true});}}>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  if (loading) return (\n    <FinanceInvoiceGroupsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </FinanceInvoiceGroupsBase>\n  )\n\n  if (error) return (\n    <FinanceInvoiceGroupsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('finance.invoice_groups.error_loading')}</p>\n      </ContentCard>\n    </FinanceInvoiceGroupsBase>\n  )\n\n  const invoiceGroups = data.financeInvoiceGroups\n\n  return (\n    <FinanceInvoiceGroupsBase>\n      <ContentCard cardTitle={t('finance.invoice_groups.title')}\n                   headerContent={headerOptions}\n                   pageInfo={invoiceGroups.pageInfo}\n                   onLoadMore={() => {\n                   fetchMore({\n                     variables: {\n                       after: invoiceGroups.pageInfo.endCursor\n                      },\n                      updateQuery: (previousResult, { fetchMoreResult }) => {\n                        const newEdges = fetchMoreResult.financeInvoiceGroups.edges\n                        const pageInfo = fetchMoreResult.financeInvoiceGroups.pageInfo\n\n                        return newEdges.length\n                          ? {\n                              // Put the new invoiceGroups at the end of the list and update `pageInfo`\n                              // so we have the new `endCursor` and `hasNextPage` values\n                              financeInvoiceGroups: {\n                                __typename: previousResult.financeInvoiceGroups.__typename,\n                                edges: [ ...previousResult.financeInvoiceGroups.edges, ...newEdges ],\n                                pageInfo\n                              }\n                            }\n                          : previousResult\n                      }\n                    })\n                  }} \n        >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.invoice_groups.next_id')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.invoice_groups.due_after_days')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.prefix')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.code')}</Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {invoiceGroups.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    {node.name}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.nextId}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.dueAfterDays}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.prefix} \n                    {(node.prefixYear) ? <span>[{t('general.year')}]<br /></span>: ''}\n                    {(node.autoResetPrefixYear) ? <Text.Small color=\"gray\">\n                      {t('finance.invoice_groups.auto_reset_prefix_year')}\n                    </Text.Small>: ''}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    <BadgeBoolean value={node.displayPublic} />\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.code}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    {(node.archived) ? \n                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                      <Button className='btn-sm' \n                              onClick={() => history.push(\"/finance/invoices/groups/edit/\" + node.id)}\n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    }\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                        title={t('general.archive')} \n                        href=\"\"\n                        onClick={() => {\n                          console.log(\"clicked archived\")\n                          let id = node.id\n                          archiveInvoiceGroup({ variables: {\n                            input: {\n                            id,\n                            archived: !archived\n                            }\n                    }, refetchQueries: [\n                        {query: GET_INVOICE_GROUPS_QUERY, variables: {\"archived\": archived }}\n                    ]}).then(({ data }) => {\n                      console.log('got data', data);\n                      toast.success(\n                        (archived) ? t('general.unarchived'): t('general.archived'), {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                    }).catch((error) => {\n                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                      console.log('there was an error sending the query', error);\n                    })\n                    }}>\n                      <Icon prefix=\"fa\" name=\"inbox\" />\n                    </button>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </FinanceInvoiceGroupsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(FinanceInvoiceGroups))","import { t } from 'i18next'\nimport * as Yup from 'yup'\nimport { yupToFormErrors } from 'formik';\n\nexport const INVOICE_GROUP_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n    dueAfterDays: Yup.number()\n      .moreThan(0, t('yup.field_above_0'))\n      .required(t('yup.field_required')),\n    nextId: Yup.number(),\n    prefix: Yup.string(),\n    prefixYear: Yup.boolean(),\n    autoResetPrefixYear: Yup.boolean(),\n    terms: Yup.string(),\n    footer: Yup.string(),\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid,\n} from \"tabler-react\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../plugin_config/tinymce\"\n\n\n\nconst FinanceInvoiceGroupForm = ({ t, history, isSubmitting, setFieldTouched, setFieldValue, errors, values, returnUrl, edit=false }) => (\n  <FoForm>\n    <Card.Body>\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group>\n            <Form.Label className=\"custom-switch\">\n              <Field \n                className=\"custom-switch-input\"\n                type=\"checkbox\" \n                name=\"displayPublic\" \n                checked={values.displayPublic} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('finance.invoice_groups.public')}</span>\n            </Form.Label>\n            <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n          </Form.Group>    \n        </Grid.Col>\n      </Grid.Row>\n      <Form.Group label={t('general.name')}>\n        <Field type=\"text\" \n                name=\"name\" \n                className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\" />\n        <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Grid.Row>\n        {(edit) ?\n        <Grid.Col>\n          <Form.Group label={t('finance.invoice_groups.next_id')}>\n            <Field type=\"text\" \n                    name=\"nextId\" \n                    className={(errors.nextId) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"nextId\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col> : \"\"}\n        <Grid.Col>\n          <Form.Group label={t('finance.invoice_groups.due_after_days')}>\n            <Field type=\"text\" \n                    name=\"dueAfterDays\" \n                    className={(errors.dueAfterDays) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"dueAfterDays\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row>\n      <Form.Group label={t('general.prefix')}>\n        <Field type=\"text\" \n                name=\"prefix\" \n                className={(errors.prefix) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\" />\n        <ErrorMessage name=\"prefix\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group>\n            <Form.Label className=\"custom-switch\">\n              <Field \n                className=\"custom-switch-input\"\n                type=\"checkbox\" \n                name=\"prefixYear\" \n                checked={values.prefixYear} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('finance.invoice_groups.prefix_year')}</span>\n            </Form.Label>\n            <ErrorMessage name=\"prefixYear\" component=\"div\" />   \n          </Form.Group>   \n        </Grid.Col>\n        <Grid.Col>\n          <Form.Group>\n            <Form.Label className=\"custom-switch\">\n              <Field \n                className=\"custom-switch-input\"\n                type=\"checkbox\" \n                name=\"autoResetPrefixYear\" \n                checked={values.autoResetPrefixYear} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('finance.invoice_groups.auto_reset_prefix_year')}</span>\n            </Form.Label>\n            <ErrorMessage name=\"autoResetPrefixYear\" component=\"div\" />   \n          </Form.Group>   \n        </Grid.Col>\n      </Grid.Row>\n      <Form.Group label={t('general.terms')}>\n        <Editor\n          tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n          textareaName=\"terms\"\n          initialValue={values.terms}\n          init={tinymceBasicConf}\n          onBlur={(e) => {\n            setFieldTouched(\"terms\", true, true)\n            setFieldValue(\"terms\", e.target.getContent())\n          }}\n        />\n        <ErrorMessage name=\"terms\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('general.footer')}>\n        <Editor\n          tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n          textareaName=\"footer\"\n          initialValue={values.footer}\n          init={tinymceBasicConf}\n          onBlur={(e) => {\n            setFieldTouched(\"footer\", true, true)\n            setFieldValue(\"footer\", e.target.getContent())\n          }}\n        />\n        <ErrorMessage name=\"footer\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('finance.code')}>\n        <Field type=\"text\" \n                name=\"code\" \n                className={(errors.code) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\" />\n        <ErrorMessage name=\"code\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n    </Card.Body>\n    <Card.Footer>\n        <Button \n          color=\"primary\"\n          className=\"pull-right\" \n          type=\"submit\" \n          disabled={isSubmitting}\n        >\n          {t('general.submit')}\n        </Button>\n        <Link to={returnUrl}>\n          <Button \n            type=\"button\" \n            color=\"link\">\n              {t('general.cancel')}\n          </Button>\n        </Link>\n    </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(FinanceInvoiceGroupForm))","import React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_INVOICE_GROUPS_QUERY, ADD_INVOICE_GROUP } from './queries'\nimport { INVOICE_GROUP_SCHEMA } from './yupSchema'\n\nimport {\n  Card,\n} from \"tabler-react\"\n\nimport FinanceInvoiceGroupsBase from './FinanceInvoiceGroupsBase';\nimport FinanceInvoiceGroupForm from './FinanceInvoiceGroupForm'\n\n\nfunction FinanceInvoiceGroupAdd({ t, history }) {\n  const returnUrl = \"/finance/invoices/groups\"\n  const [addInvoiceGroup] = useMutation(ADD_INVOICE_GROUP)\n\n  return (\n    <FinanceInvoiceGroupsBase showBack={true}>\n      <Card title={t('finance.invoice_groups.title_add')}>\n        <Formik\n          initialValues={{ \n            name: '', \n            displayPublic: true,\n            dueAfterDays: 30,\n            prefix: 'INV',\n            prefixYear: true,\n            autoResetPrefixYear: true,\n            terms: '',\n            footer: '',\n            code: '' \n          }}\n          validationSchema={INVOICE_GROUP_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              addInvoiceGroup({ variables: {\n                input: {\n                  name: values.name, \n                  displayPublic: values.displayPublic,\n                  dueAfterDays: values.dueAfterDays,\n                  prefix: values.prefix,\n                  prefixYear: values.prefixYear,\n                  autoResetPrefixYear: values.autoResetPrefixYear,\n                  terms: values.terms,\n                  footer: values.footer,\n                  code: values.code\n                }\n              }, refetchQueries: [\n                  {query: GET_INVOICE_GROUPS_QUERY, variables: {\"archived\": false }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data);\n                  history.push(returnUrl)\n                  toast.success((t('finance.invoice_groups.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, values, errors, setFieldValue, setFieldTouched }) => (\n            <FinanceInvoiceGroupForm \n              isSubmitting={isSubmitting}\n              errors={errors}\n              values={values}\n              returnUrl={returnUrl}\n              setFieldTouched={setFieldTouched}\n              setFieldValue={setFieldValue}\n            />\n          )}\n        </Formik>\n      </Card>\n    </FinanceInvoiceGroupsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceInvoiceGroupAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_INVOICE_GROUPS_QUERY, GET_INVOICE_GROUP_QUERY, UPDATE_INVOICE_GROUP } from './queries'\nimport { INVOICE_GROUP_SCHEMA } from './yupSchema'\n\nimport {\n  Card,\n  Dimmer,\n} from \"tabler-react\";\n\nimport ContentCard from \"../../../general/ContentCard\"\nimport FinanceInvoiceGroupForm from './FinanceInvoiceGroupForm'\nimport FinanceInvoiceGroupsBase from './FinanceInvoiceGroupsBase';\n\n\nfunction FinanceInvoiceGroupEdit({t, history, match}) {\n  const id = match.params.id\n  const returnUrl = \"/finance/invoices/groups\"\n  const cardTitle = t('finance.invoice_groups.title_edit')\n  const { loading, error, data } = useQuery(GET_INVOICE_GROUP_QUERY, {\n    variables: { id: id }\n  })\n  const [ updateInvoiceGroup ] = useMutation(UPDATE_INVOICE_GROUP)\n\n  if (loading) return (\n    <FinanceInvoiceGroupsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </FinanceInvoiceGroupsBase>\n  )\n\n  if (error) return (\n    <FinanceInvoiceGroupsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('finance.invoice_groups.error_loading')}</p>\n      </ContentCard>\n    </FinanceInvoiceGroupsBase>\n  )\n                    \n  const initialData = data.financeInvoiceGroup;\n  console.log('query data')\n  console.log(data)\n\n  return (\n    <FinanceInvoiceGroupsBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n          initialValues={{ \n            name: initialData.name, \n            displayPublic: initialData.displayPublic,\n            dueAfterDays: initialData.dueAfterDays,\n            nextId: initialData.nextId,\n            prefix: initialData.prefix,\n            prefixYear: initialData.prefixYear,\n            autoResetPrefixYear: initialData.autoResetPrefixYear,\n            terms: initialData.terms,\n            footer: initialData.footer,\n            code: initialData.code\n          }}\n          validationSchema={INVOICE_GROUP_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              updateInvoiceGroup({ variables: {\n                input: {\n                  id: match.params.id,\n                  name: values.name, \n                  displayPublic: values.displayPublic,\n                  nextId: values.nextId,\n                  dueAfterDays: values.dueAfterDays,\n                  prefix: values.prefix,\n                  prefixYear: values.prefixYear,\n                  autoResetPrefixYear: values.autoResetPrefixYear,\n                  terms: values.terms,\n                  footer: values.footer,\n                  code: values.code\n                }\n              }, refetchQueries: [\n                  {query: GET_INVOICE_GROUPS_QUERY, variables: {\"archived\": false }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('finance.invoice_groups.toast_edit_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n            <FinanceInvoiceGroupForm\n              isSubmitting={isSubmitting}\n              errors={errors}\n              values={values}\n              returnUrl={returnUrl}\n              setFieldTouched={setFieldTouched}\n              setFieldValue={setFieldValue}\n              edit={true}\n            />\n          )}\n        </Formik>\n      </Card>\n    </FinanceInvoiceGroupsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(FinanceInvoiceGroupEdit))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from \"uuid\"\n\nimport {\n  Dimmer,\n  Button,\n  Card,\n  Form,\n  Grid,\n} from \"tabler-react\"\n\n\nconst FinanceInvoiceGroupDefaultForm = ({ t, history, inputData, isSubmitting, setFieldTouched, setFieldValue, errors, values, submitForm }) => (\n  <FoForm>\n    <Dimmer active={isSubmitting} loader={isSubmitting} >\n      <Form.Group>\n        <Field component=\"select\" \n              name=\"financeInvoiceGroup\" \n              className={(errors.financeInvoiceGroup) ? \"form-control is-invalid\" : \"form-control\"} \n              onChange={(e) => {\n                setFieldValue('financeInvoiceGroup', e.target.value)\n                setFieldTouched('financeInvoiceGroup', true)\n                setTimeout(() => {submitForm()}, 200)\n              }}\n              autoComplete=\"off\">\n          {inputData.financeInvoiceGroups.edges.map(({ node }) =>\n            <option value={node.id} key={v4()}>{node.name}</option>\n          )}\n        </Field>\n        <ErrorMessage name=\"financeInvoiceGroup\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>  \n    </Dimmer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(FinanceInvoiceGroupDefaultForm))","import { t } from 'i18next'\nimport * as Yup from 'yup'\nimport { yupToFormErrors } from 'formik';\n\nexport const INVOICE_GROUP_DEFAULT_SCHEMA = Yup.object().shape({\n    financeInvoiceGroup: Yup.string(),\n  })\n","import { gql } from \"@apollo/client\"\n\nexport const GET_INVOICE_GROUPS_DEFAULTS_QUERY = gql`\nquery FinanceInvoiceGroupDefaults {\n  financeInvoiceGroupDefaults(first: 100) {\n    edges {\n      node {\n        id\n        itemType\n        financeInvoiceGroup {\n          id\n          name\n        }\n      }\n    }\n  }\n}\n`\n\nexport const GET_INVOICE_GROUP_QUERY = gql`\n  query FinanceInvoiceGroup($id: ID!) {\n    financeInvoiceGroup(id:$id) {\n      id\n      archived\n      displayPublic\n      name\n      nextId\n      dueAfterDays\n      prefix\n      prefixYear\n      autoResetPrefixYear\n      terms\n      footer\n      code\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { Formik } from 'formik'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table,\n  Text\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../../../general/ContentCard\"\nimport FinanceMenu from \"../../../FinanceMenu\"\nimport FinanceInvoiceGroupDefaultForm from './FinanceInvoiceGroupDefaultForm'\n\nimport { INVOICE_GROUP_DEFAULT_SCHEMA } from \"./yupSchema\"\nimport { GET_INVOICE_GROUPS_QUERY } from \"../queries\"\nimport { GET_INVOICE_GROUPS_DEFAULTS_QUERY } from \"./queries\"\n\n\nconst UPDATE_INVOICE_GROUP_DEFAULT = gql`\n  mutation UpdateFinanceInvoiceGroupDefault($input: UpdateFinanceInvoiceGroupDefaultInput!) {\n    updateFinanceInvoiceGroupDefault(input: $input) {\n      financeInvoiceGroupDefault {\n        id\n        itemType\n        financeInvoiceGroup {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\n\nconst fetch_default_type_name = (t, itemType) => {\n  switch(itemType) {\n    case \"MEMBERSHIPS\":\n      return t('finance.invoice_groups_defaults.MEMBERSHIPS')\n      break\n    case \"SUBSCRIPTIONS\":\n      return t('finance.invoice_groups_defaults.SUBSCRIPTIONS')\n      break\n    case \"CLASSPASSES\":\n      return t('finance.invoice_groups_defaults.CLASSPASSES')\n      break\n    case \"DROPINCLASSES\":\n      return t('finance.invoice_groups_defaults.DROPINCLASSES')\n      break\n    case \"TRIALCLASSES\":\n      return t('finance.invoice_groups_defaults.TRIALCLASSES')\n      break\n    case \"EVENT_TICKETS\":\n      return t('finance.invoice_groups_defaults.EVENT_TICKETS')\n      break\n    case \"SHOP_SALES\":\n      return t('finance.invoice_groups_defaults.SHOP_SALES')\n      break\n    case \"TEACHER_PAYMENTS\":\n      return t('finance.invoice_groups_defaults.TEACHER_PAYMENTS')\n      break\n    case \"EMPLOYEE_EXPENSES\":\n      return t('finance.invoice_groups_defaults.EMPLOYEE_EXPENSES')\n      break\n    default:\n      return t('finance.invoice_groups_defaults.TYPE_NOT_FOUND')\n  }\n}\n\n\n\nconst FinanceInvoiceGroupsDefaults = ({ t, history }) => (\n  <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Container>\n        <Page.Header title={t(\"finance.title\")}>\n          <div className=\"page-options d-flex\">\n            <Link to=\"/finance/invoices/groups\" \n                  className='btn btn-outline-secondary btn-sm'>\n                <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back_to')} {t('finance.invoice_groups.title')}\n            </Link>\n          </div>\n        </Page.Header>\n        <Grid.Row>\n          <Grid.Col md={9}>\n            <Query query={GET_INVOICE_GROUPS_DEFAULTS_QUERY} variables={{}}>\n             {({ loading, error, data: {financeInvoiceGroupDefaults: invoice_group_defaults}, refetch, fetchMore }) => {\n                // Loading\n                if (loading) return (\n                  <ContentCard cardTitle={t('finance.invoice_groups_defaults.title')}>\n                    <Dimmer active={true}\n                            loader={true}>\n                    </Dimmer>\n                  </ContentCard>\n                )\n                // Error\n                if (error) return (\n                  <ContentCard cardTitle={t('finance.invoice_groups_defaults.title')}>\n                    <p>{t('finance.invoice_groups_defaults.error_loading')}</p>\n                  </ContentCard>\n                )\n                \n                // Empty list\n                if (!invoice_group_defaults.edges.length) { return (\n                  <ContentCard cardTitle={t('finance.invoice_groups_defaults.title')}>\n                    <p>\n                      {t('finance.invoice_groups_defaults.empty_list')}\n                    </p>\n                   \n                  </ContentCard>\n                )} else {   \n                // Life's good! :)\n                return (\n                  <ContentCard cardTitle={t('finance.invoice_groups_defaults.title')}\n                               pageInfo={invoice_group_defaults.pageInfo}\n                               onLoadMore={() => {\n                                fetchMore({\n                                  variables: {\n                                    after: invoice_group_defaults.pageInfo.endCursor\n                                  },\n                                  updateQuery: (previousResult, { fetchMoreResult }) => {\n                                    const newEdges = fetchMoreResult.financeInvoiceGroups.edges\n                                    const pageInfo = fetchMoreResult.financeInvoiceGroups.pageInfo\n\n                                    return newEdges.length\n                                      ? {\n                                          // Put the new invoice_groups_defaults at the end of the list and update `pageInfo`\n                                          // so we have the new `endCursor` and `hasNextPage` values\n                                          financeInvoiceGroups: {\n                                            __typename: previousResult.financeInvoiceGroups.__typename,\n                                            edges: [ ...previousResult.financeInvoiceGroups.edges, ...newEdges ],\n                                            pageInfo\n                                          }\n                                        }\n                                      : previousResult\n                                  }\n                                })\n                              }} \n                    >\n                    <Table>\n                      <Table.Header>\n                        <Table.Row key={v4()}>\n                          <Table.ColHeader>{t('finance.invoice_groups_defaults.item_type')}</Table.ColHeader>\n                          <Table.ColHeader>{t('finance.invoice_groups_defaults.invoice_group')}</Table.ColHeader>\n                        </Table.Row>\n                      </Table.Header>\n                      <Table.Body>\n                          {invoice_group_defaults.edges.map(({ node }) => (\n                            <Table.Row key={v4()}>\n                              <Table.Col key={v4()}>\n                                { fetch_default_type_name(t, node.itemType) }\n                              </Table.Col>\n                              <Table.Col>\n                                <Query query={GET_INVOICE_GROUPS_QUERY} variables={{archived: false}}>\n                                  {({ loading, error, data, refetch, fetchMore }) => {\n                                    // Loading\n                                    if (loading) return ( \"Loading...\")\n                                    // Error\n                                    if (error) return ( \"error loading\" )\n\n                                    const inputData = data\n\n                                    return (\n                                      <Mutation mutation={UPDATE_INVOICE_GROUP_DEFAULT} key={v4()}>\n                                        {(updateDefault, { data }) => (\n                                          <Formik\n                                            initialValues={{ \n                                              financeInvoiceGroup:node.financeInvoiceGroup.id\n                                            }}\n                                            validationSchema={INVOICE_GROUP_DEFAULT_SCHEMA}\n                                            onSubmit={(values, { setSubmitting }) => {\n                                                console.log('submit values:')\n                                                console.log(values)\n\n                                                updateDefault({ variables: {\n                                                  input: {\n                                                    id: node.id,\n                                                    financeInvoiceGroup: values.financeInvoiceGroup\n                                                  }\n                                                }, refetchQueries: [\n                                                    // {query: GET_INVOICE_GROUPS_QUERY, variables: {\"archived\": false }}\n                                                ]})\n                                                .then(({ data }) => {\n                                                    console.log('got data', data)\n                                                    toast.success((t('finance.invoice_groups.toast_edit_success')), {\n                                                        position: toast.POSITION.BOTTOM_RIGHT\n                                                      })\n                                                  }).catch((error) => {\n                                                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                                        position: toast.POSITION.BOTTOM_RIGHT\n                                                      })\n                                                    console.log('there was an error sending the query', error)\n                                                    setSubmitting(false)\n                                                  })\n                                            }}\n                                            >\n                                            {({ isSubmitting, errors, values, setFieldTouched, setFieldValue, submitForm }) => (\n                                              <FinanceInvoiceGroupDefaultForm\n                                                inputData={inputData}\n                                                isSubmitting={isSubmitting}\n                                                errors={errors}\n                                                values={values}\n                                                setFieldTouched={setFieldTouched}\n                                                setFieldValue={setFieldValue}\n                                                submitForm={submitForm}\n                                              />\n                                            )}\n                                        </Formik>\n                                        )}\n                                      </Mutation>\n                                    )}}\n                                  </Query>\n                                </Table.Col>\n                            </Table.Row>\n                          ))}\n                      </Table.Body>\n                    </Table>\n                  </ContentCard>\n                )}}\n             }\n            </Query>\n          </Grid.Col>\n          <Grid.Col md={3}>\n            <h5>{t(\"general.menu\")}</h5>\n            <FinanceMenu activeLink='invoices'/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n    </div>\n  </SiteWrapper>\n);\n\nexport default withTranslation()(withRouter(FinanceInvoiceGroupsDefaults))","import { gql } from \"@apollo/client\"\n\n\nexport const GET_INVOICE_PAYMENT_QUERY = gql`\n  query FinanceInvoicePayment($id: ID!) {\n    financeInvoicePayment(id:$id) {\n      id\n      date\n      amount\n      financePaymentMethod {\n        id\n        name\n      }\n      note\n    }\n  }\n`\n\nexport const UPDATE_FINANCE_INVOICE_PAYMENT = gql`\n  mutation UpdateFinanceInvoicePayment($input:UpdateFinanceInvoicePaymentInput!) {\n    updateFinanceInvoicePayment(input:$input) {\n      financeInvoicePayment {\n        id\n      } \n    }\n  }\n`\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const FINANCE_INVOICE_PAYMENT_SCHEMA = Yup.object().shape({\n  // account: Yup.string()\n  //   .required(t('yup.field_required')),\n  // role: Yup.string(),\n  // account2: Yup.string(),\n  // role2: Yup.string(),\n  // dateStart: Yup.date()\n  //   .required(t('yup.field_required')),\n  // // dateEnd: Yup.date()\n  })\n","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\n// import { GET_INVOICE_QUERY, GET_INPUT_VALUES_QUERY } from './queries'\nimport { GET_INVOICE_QUERY } from \"../queries\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\n// import ScheduleClassPriceBack from \"./ScheduleClassPriceBack\"\nimport FinanceInvoiceEditBalance from \"../edit/FinanceInvoiceEditBalance\"\n\n\nfunction FinanceInvoicePaymentBase({ t, history, match, children, form_type=\"create\" }) {\n  const invoiceId = match.params.invoice_id\n  const return_url = \"/finance/invoices/edit/\" + invoiceId\n  const { loading: queryLoading, error: queryError, data, } = useQuery(GET_INVOICE_QUERY, {\n    variables: {\n      id: invoiceId\n    }\n  })\n\n  if (queryLoading) return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <p>{t('general.loading_with_dots')}</p>\n      </div>\n    </SiteWrapper>\n  )\n  // Error\n  if (queryError) {\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          { console.log(queryError) }\n          <p>{t('general.error_sad_smiley')}</p>\n        </div>\n      </SiteWrapper>\n    )\n  }\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n  const invoice_number = inputData.financeInvoice.invoiceNumber\n\n  let title\n  if ( form_type == \"create\" ) {\n    title = t('finance.invoice.payments.add')\n  } else {\n    title = t('finance.invoice.payments.edit')\n  }\n\n  title = title + \" #\" + invoice_number\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={ title }>\n            <div className=\"page-options d-flex\">\n              {/* Back */}\n              <Link to={return_url} \n                    className='btn btn-secondary mr-2'>\n                  <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back')} \n              </Link>\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={8}>\n              {/* Form can go here */}\n              {children} \n            </Grid.Col>\n            <Grid.Col md={4}>\n            <Card statusColor=\"blue\">\n              <Card.Header>\n                <Card.Title>{t('general.info')}</Card.Title>\n              </Card.Header>\n              <Card.Body padding={0}>\n                <h4> #{ invoice_number } </h4>\n                { inputData.financeInvoice.account.fullName } <br />\n                { inputData.financeInvoice.summary }\n              </Card.Body>\n            </Card>\n            <FinanceInvoiceEditBalance financeInvoice={inputData.financeInvoice} />\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceInvoicePaymentBase))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Form,\n} from \"tabler-react\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../plugin_config/tinymce\"\nimport CSDatePicker from \"../../../ui/CSDatePicker\"\n\nconst FinanceInvoicePaymentForm = ({ t, history, match, isSubmitting, errors, values, inputData, return_url, setFieldTouched, setFieldValue }) => (\n  <FoForm>\n    <Card statusColor=\"blue\">\n      <Card.Header>\n        <Card.Title>{t('general.details')}</Card.Title>\n      </Card.Header>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.date')}>\n              <CSDatePicker \n                selected={values.date}\n                onChange={(date) => setFieldValue(\"date\", date)}\n                onBlur={() => setFieldTouched(\"date\", true)}\n              />\n              <ErrorMessage name=\"date\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.amount')}>\n              <Field type=\"text\" \n                      name=\"amount\" \n                      className={(errors.amount) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"amount\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.payment_method')}>\n              <Field component=\"select\" \n                      name=\"financePaymentMethod\" \n                      className={(errors.financePaymentMethod) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                {console.log(\"query data in finance payment form:\")}\n                {console.log(inputData)}\n                <option value=\"\" key={v4()}>{t('')}</option>\n                {inputData.financePaymentMethods.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.name}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"financePaymentMethod\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n          <Form.Group label={t('general.note')}>\n            <Editor\n              tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n                textareaName=\"note\"\n                initialValue={values.note}\n                init={tinymceBasicConf}\n                onBlur={(e) => {\n                  setFieldValue(\"note\", e.target.getContent())\n                  setFieldTouched(\"note\", true)\n                }}\n              />\n            <ErrorMessage name=\"note\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Button color=\"link\" onClick={() => history.push(return_url)} role=\"button\">\n              {t('general.cancel')}\n          </Button>\n      </Card.Footer>\n    </Card>\n  </FoForm>\n);\n\nexport default withTranslation()(withRouter(FinanceInvoicePaymentForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport {\n  Card,\n} from \"tabler-react\"\n\n\nimport { get_list_query_variables } from \"../tools\"\n\nimport { GET_INVOICE_QUERY, GET_INVOICES_QUERY } from \"../queries\"\nimport { GET_INPUT_VALUES_QUERY } from './queries'\nimport { FINANCE_INVOICE_PAYMENT_SCHEMA } from './yupSchema'\n// import ScheduleClassPriceForm from './ScheduleClassPriceForm'\nimport { dateToLocalISO } from '../../../../tools/date_tools'\n\nimport SiteWrapper from \"../../../SiteWrapper\"\n\nimport FinanceInvoicePaymentBase from \"./FinanceInvoicePaymentBase\"\nimport FinanceInvoicePaymentForm from \"./FinanceInvoicePaymentForm\"\n\n\nconst ADD_FINANCE_INVOICE_PAYMENT = gql`\n  mutation CreateFinanceInvoicePayment($input:CreateFinanceInvoicePaymentInput!) {\n    createFinanceInvoicePayment(input:$input) {\n      financeInvoicePayment {\n        id\n      } \n    }\n  }\n`\n\n\nfunction FinanceInvoicePaymentAdd({ t, history, match }) {\n  const invoiceId = match.params.invoice_id\n  const return_url = \"/finance/invoices/edit/\" + invoiceId\n  const { loading: queryLoading, error: queryError, data, } = useQuery(GET_INVOICE_QUERY, {\n    variables: {\n      id: invoiceId\n    }\n  })\n  const [addInvoicePayment, { mutationData, mutationLoading, mutationError, onCompleted }] = useMutation(ADD_FINANCE_INVOICE_PAYMENT, {\n    onCompleted: () => history.push(return_url),\n  })\n\n  if (queryLoading) return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <p>{t('general.loading_with_dots')}</p>\n      </div>\n    </SiteWrapper>\n  )\n  // Error\n  if (queryError) {\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          { console.log(queryError) }\n          <p>{t('general.error_sad_smiley')}</p>\n        </div>\n      </SiteWrapper>\n    )\n  }\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n\n\n  return (\n    <FinanceInvoicePaymentBase form_type={\"create\"}>\n      <Formik\n        initialValues={{ \n          date: new Date() ,\n          amount: inputData.financeInvoice.balance,\n          financePaymentMethod: \"\",\n          note: \"\"\n        }}\n        // validationSchema={FINANCE_INVOICE_PAYMENT_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n            addInvoicePayment({ variables: {\n              input: {\n                financeInvoice: invoiceId,\n                date: dateToLocalISO(values.date),\n                amount: values.amount,\n                financePaymentMethod: values.financePaymentMethod,\n                note: values.note\n              }\n            }, refetchQueries: [\n                {query: GET_INVOICES_QUERY, variables: get_list_query_variables() },\n                {query: GET_INVOICE_QUERY, variables: { id: invoiceId }},\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data);\n                toast.success((t('finance.invoice.payments.toast_add_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <FinanceInvoicePaymentForm\n            inputData={inputData}\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            return_url={return_url}\n          />\n        )}\n      </Formik>\n    </FinanceInvoicePaymentBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceInvoicePaymentAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport {\n  Card,\n} from \"tabler-react\"\n\nimport { get_list_query_variables } from \"../tools\"\n\nimport { GET_INVOICE_QUERY, GET_INVOICES_QUERY } from \"../queries\"\nimport { GET_INVOICE_PAYMENT_QUERY, UPDATE_FINANCE_INVOICE_PAYMENT } from './queries'\nimport { FINANCE_INVOICE_PAYMENT_SCHEMA } from './yupSchema'\n// import ScheduleClassPriceForm from './ScheduleClassPriceForm'\nimport { dateToLocalISO } from '../../../../tools/date_tools'\n\nimport SiteWrapper from \"../../../SiteWrapper\"\n\nimport FinanceInvoicePaymentBase from \"./FinanceInvoicePaymentBase\"\nimport FinanceInvoicePaymentForm from \"./FinanceInvoicePaymentForm\"\n\n\n\nfunction FinanceInvoicePaymentEdit({ t, history, match }) {\n  const invoiceId = match.params.invoice_id\n  const id = match.params.id\n  console.log(invoiceId)\n  console.log(id)\n\n  const return_url = \"/finance/invoices/edit/\" + invoiceId\n  const { loading: invoiceQueryLoading, error: invoiceQueryError, data: invoiceData, } = useQuery(GET_INVOICE_QUERY, {\n    variables: {\n      id: invoiceId\n    }\n  })\n  const { loading: paymentQueryLoading, error: paymentQueryError, data: paymentData, } = useQuery(GET_INVOICE_PAYMENT_QUERY, {\n    variables: {\n      id: id\n    }\n  })\n  const [updateInvoicePayment, { mutationData, mutationLoading, mutationError, onCompleted }] = useMutation(UPDATE_FINANCE_INVOICE_PAYMENT, {\n    onCompleted: () => history.push(return_url),\n  })\n\n  if (invoiceQueryLoading || paymentQueryLoading) return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <p>{t('general.loading_with_dots')}</p>\n      </div>\n    </SiteWrapper>\n  )\n  // Error\n  if (invoiceQueryError) {\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          { console.log(invoiceQueryError) }\n          <p>{t('general.error_sad_smiley')}</p>\n        </div>\n      </SiteWrapper>\n    )\n  }\n  // Error\n  if (paymentQueryError) {\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          { console.log(paymentQueryError) }\n          <p>{t('general.error_sad_smiley')}</p>\n        </div>\n      </SiteWrapper>\n    )\n  }\n\n  console.log('query data')\n  console.log(invoiceData)\n  console.log(paymentData)\n  const inputData = invoiceData\n  const initialValues = paymentData.financeInvoicePayment\n\n  let initialPaymentMethod\n  if (initialValues.financePaymentMethod) {\n    initialPaymentMethod = initialValues.financePaymentMethod.id\n  }\n\n  // DatePicker doesn't like a string as an initial value\n  // This makes it a happy DatePicker :)\n  let initialDate = null\n  if (initialValues.date) {\n    initialDate = new Date(initialValues.date)\n  }\n\n  return (\n    <FinanceInvoicePaymentBase form_type={\"update\"}>\n      <Formik\n        initialValues={{ \n          date: initialDate,\n          amount: initialValues.amount,\n          financePaymentMethod: initialPaymentMethod,\n          note: initialValues.note\n        }}\n        // validationSchema={FINANCE_INVOICE_PAYMENT_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n            updateInvoicePayment({ variables: {\n              input: {\n                id: id,\n                date: dateToLocalISO(values.date),\n                amount: values.amount,\n                financePaymentMethod: values.financePaymentMethod,\n                note: values.note\n              }\n            }, refetchQueries: [\n                {query: GET_INVOICES_QUERY, variables: get_list_query_variables() },\n                {query: GET_INVOICE_QUERY, variables: { id: invoiceId }},\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data);\n                toast.success((t('finance.invoice.payments.toast_edit_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n          }\n        }\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <FinanceInvoicePaymentForm\n            inputData={inputData}\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            return_url={return_url}\n          />\n        )}\n      </Formik>\n    </FinanceInvoicePaymentBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceInvoicePaymentEdit))","import CSLS from \"../../../tools/cs_local_storage\"\n\nexport function get_list_query_variables() {\n  let queryVars = {}\n\n  let status = localStorage.getItem(CSLS.FINANCE_ORDERS_FILTER_STATUS)\n  if (status) {\n    queryVars.status = status\n  } else {\n    queryVars.status = undefined\n  }\n  \n  console.log(queryVars)\n\n  return queryVars\n}\n\n","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport CSLS from \"../../../tools/cs_local_storage\"\nimport { get_list_query_variables } from './tools'\n\n\nfunction getDefaultValue(value) {\n  let defaultValue = localStorage.getItem(value)\n  console.log(defaultValue)\n\n  if (defaultValue) {\n    return defaultValue\n  } else {\n    console.log('return empty default')\n    return \"\"\n  }\n}\n\n\nfunction updateLocalStorageAndRefetch(key, value, refetch) {\n  localStorage.setItem(key, value)\n  refetch(get_list_query_variables())\n\n}\n\nconst selectClass = \"form-control mb-2\"\n\n\nconst FinanceOrdersFilter = ({ t, history, data, refetch }) => (\n  <div>\n    {/* Status */}\n    <select \n      className={selectClass}\n      value={getDefaultValue(CSLS.FINANCE_ORDERS_FILTER_STATUS)}\n      onChange={ (event) => {\n        updateLocalStorageAndRefetch(\n          CSLS.FINANCE_ORDERS_FILTER_STATUS,\n          event.target.value,\n          refetch\n        )\n      }}\n    >\n      <option value=\"\" key={v4()}>{t('finance.orders.statuses.all')}</option>\n      <option value=\"RECEIVED\" key={v4()}>{t('finance.orders.statuses.RECEIVED')}</option>\n      <option value=\"AWAITING_PAYMENT\" key={v4()}>{t('finance.orders.statuses.AWAITING_PAYMENT')}</option>\n      <option value=\"PAID\" key={v4()}>{t('finance.orders.statuses.PAID')}</option>\n      <option value=\"DELIVERED\" key={v4()}>{t('finance.orders.statuses.DELIVERED')}</option>\n      <option value=\"CANCELLED\" key={v4()}>{t('finance.orders.statuses.CANCELLED')}</option>\n    </select>\n  </div>\n);\n\nexport default withTranslation()(withRouter(FinanceOrdersFilter))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Container,\n  Grid,\n  Page\n} from \"tabler-react\";\n\nimport SiteWrapper from \"../../SiteWrapper\"\n\nimport FinanceOrdersFilter from \"./FinanceOrdersFilter\"\nimport FinanceMenu from \"../FinanceMenu\"\n\n\nconst FinanceOrdersBase = ({ t, history, children, refetch }) => (\n  <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Container>\n        <Page.Header title={t(\"finance.title\")}>\n          <div className=\"page-options d-flex\">\n          </div>\n        </Page.Header>\n        <Grid.Row>\n          <Grid.Col md={9}>\n            {children}\n          </Grid.Col>\n          <Grid.Col md={3}>\n            <h5 className=\"mt-2 pt-1\">{t(\"general.filter\")}</h5>\n            <FinanceOrdersFilter refetch={refetch}/>\n            <h5>{t(\"general.menu\")}</h5>\n            <FinanceMenu activeLink='orders'/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n    </div>\n  </SiteWrapper>\n)\n\nexport default withTranslation()(withRouter(FinanceOrdersBase))","// @flow\n\nimport React, { Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Badge\n} from \"tabler-react\";\n\n\nclass FinanceOrderStatus extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"finance order status props:\")\n    console.log(props)\n  }\n\n  // ('RECEIVED', _(\"Received\")),\n  // ('AWAITING_PAYMENT', _(\"Awaiting payment\")),\n  // ('PAID', _(\"Paid\")),\n  // ('DELIVERED', _(\"Delivered\")),\n  // ('CANCELLED', _(\"Cancelled\")),\n\n  render() {\n    const t = this.props.t\n    const history = this.props.history\n    const status = this.props.status\n\n    switch (status) {\n      case \"RECEIVED\":\n        return <Badge color=\"secondary\">{t('finance.orders.statuses.RECEIVED')}</Badge>\n        break\n      case \"AWAITING_PAYMENT\":\n        return <Badge color=\"primary\">{t('finance.orders.statuses.AWAITING_PAYMENT')}</Badge>\n        break\n      case \"PAID\":\n        return <Badge color=\"success\">{t('finance.orders.statuses.PAID')}</Badge>\n        break\n      case \"DELIVERED\":\n        return <Badge color=\"success\">{t('finance.orders.statuses.DELIVERED')}</Badge>\n        break\n      case \"CANCELLED\":\n        return <Badge color=\"warning\">{t('finance.orders.statuses.CANCELLED')}</Badge>\n        break\n      default:\n        return t('finance.orders.statuses.NOT_FOUND') \n    }\n  }\n}\n\n\nexport default withTranslation()(withRouter(FinanceOrderStatus))","import { gql } from \"@apollo/client\"\n\nexport const GET_ORDERS_QUERY = gql`\n  query FinanceOrders($after: String, $before: String, $status: String) {\n    financeOrders(first: 15, before: $before, after: $after, status: $status) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          orderNumber\n          account {\n            id\n            fullName\n          }\n          message\n          status\n          total\n          totalDisplay\n          createdAt\n        }\n      }\n    }\n  }\n`\n\nexport const GET_ORDER_QUERY = gql`\n  query FinanceOrder($id: ID!) {\n    financeOrder(id: $id) {\n      id\n      orderNumber\n      account {\n        id\n        fullName\n      }\n      message\n      status\n      total\n      totalDisplay\n      createdAt\n      items {\n        edges {\n          node {\n            id\n            productName\n          }\n        }\n      }\n      \n    }\n  }\n`\n\n\nexport const UPDATE_FINANCE_ORDER = gql`\n  mutation UpdateFinanceOrder($input: UpdateFinanceOrderInput!) {\n    updateFinanceOrder(input: $input) {\n      financeOrder {\n        id\n      }\n    }\n  }\n`\n\nexport const DELETE_FINANCE_ORDER = gql`\n  mutation DeleteFinanceOrder($input: DeleteFinanceOrderInput!) {\n    deleteFinanceOrder(input: $input) {\n      ok\n    }\n  }\n`\n","import React, { useContext } from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n// import { get_list_query_variables } from \"../tools\"\nimport { DELETE_FINANCE_ORDER, GET_ORDERS_QUERY } from \"./queries\"\nimport confirm_delete from \"../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\nimport moment from 'moment'\nimport AppSettingsContext from '../../context/AppSettingsContext'\n\nimport { get_list_query_variables } from \"./tools\"\n\n\nfunction FinanceOrderDelete({t, match, node}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const [deleteOrder, { data }] = useMutation(DELETE_FINANCE_ORDER)\n\n    return (\n      <button className=\"icon btn btn-link btn-sm\" \n        title={t('general.delete')} \n        href=\"\"\n        onClick={() => {\n          confirm_delete({\n            t: t,\n            msgConfirm: t(\"finance.orders.delete_confirm_msg\"),\n            msgDescription: <p>{t(\"general.order\")} # { node.orderNumber }</p>,\n            msgSuccess: t('finance.orders.deleted'),\n            deleteFunction: deleteOrder,\n            functionVariables: { \n              variables: {\n                input: {\n                  id: node.id\n                }\n              }, \n              refetchQueries: [\n                {query: GET_ORDERS_QUERY, variables: get_list_query_variables() },\n              ]\n            }\n          })\n      }}>\n        <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n      </button>\n    )\n}\n\n\nexport default withTranslation()(withRouter(FinanceOrderDelete))\n","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table, \n  Text\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport { get_list_query_variables } from \"./tools\"\nimport ContentCard from \"../../general/ContentCard\"\nimport FinanceOrdersBase from './FinanceOrdersBase'\nimport FinanceOrderStatus from \"./FinanceOrderStatus\"\nimport FinanceOrderDelete from \"./FinanceOrderDelete\"\n\nimport { GET_ORDERS_QUERY, DELETE_FINANCE_ORDER } from \"./queries\"\n\nimport confirm_delete from \"../../../tools/confirm_delete\"\nimport moment from 'moment'\n\n\n\nfunction FinanceOrders({t, match, history}) {\n  const title = t(\"shop.home.title\")\n  const { loading, error, data, refetch, fetchMore } = useQuery(GET_ORDERS_QUERY, {\n    variables: {get_list_query_variables},\n    fetchPolicy: \"network-only\"\n  })\n\n  if (loading) return (\n    <FinanceOrdersBase title={title}>\n      {t(\"general.loading_with_dots\")}\n    </FinanceOrdersBase>\n  )\n\n  if (error) return (\n    <FinanceOrdersBase title={title}>\n      {t(\"finance.orders.error_loading\")}\n    </FinanceOrdersBase>\n  )\n\n  console.log(data)\n  const orders = data.financeOrders\n  console.log(orders)\n\n  // Empty list\n  if (!orders.edges.length) { return (\n    <FinanceOrdersBase refetch={refetch}>\n      <ContentCard cardTitle={t('finance.orders.title')}>\n        <p>\n          {t('finance.orders.empty_list')}\n        </p>\n      </ContentCard>\n    </FinanceOrdersBase>\n  )}\n\n  return (\n    <FinanceOrdersBase title={title} refetch={refetch}>\n      <ContentCard \n        cardTitle={t('finance.orders.title')} \n        pageInfo={orders.pageInfo}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: orders.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.financeOrders.edges\n              const pageInfo = fetchMoreResult.financeOrders.pageInfo\n\n              return newEdges.length\n                ? {\n                    // Put the new invoices at the end of the list and update `pageInfo`\n                    // so we have the new `endCursor` and `hasNextPage` values\n                    financeOrders: {\n                      __typename: previousResult.financeOrders.__typename,\n                      edges: [ ...previousResult.financeOrders.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                : previousResult\n            }\n          })\n        }} \n      >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.status')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.orders.order_number')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.orders.relation')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.orders.date')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.total')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {orders.edges.map(({ node }) => (        \n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    <FinanceOrderStatus status={node.status} />\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    # {node.orderNumber}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.account.fullName}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {moment(node.createdAt).format('LL')}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.totalDisplay}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    <Link to={\"/finance/orders/edit/\" + node.id}>\n                      <Button className='btn-sm' \n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    </Link>\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    <FinanceOrderDelete node={node}/>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </FinanceOrdersBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceOrders))","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Icon,\n  List\n} from \"tabler-react\"\n\n\nexport function get_list_query_variables(batchType) {\n  let queryVars = {\n    batchType: batchType.toUpperCase()\n  }\n\n  console.log(queryVars)\n\n  return queryVars\n}\n\n\nexport function get_add_options_collection(t, batchType) {\n  return (\n    <List unstyled>\n      <List.Item>\n        <Link to={`/finance/paymentbatches/${batchType}/add/invoices`}>\n          <b>{t(\"finance.payment_batch_collections.invoices_batch\")} <Icon name=\"chevron-right\" /></b>\n        </Link><br />\n        <p>{t(\"finance.payment_batch_collections.invoices_batch_description\")}</p>\n      </List.Item>\n      <List.Item>\n        <Link to={`/finance/paymentbatches/${batchType}/add/category`}>\n          <b>{t(\"finance.payment_batch_collections.category_batch\")} <Icon name=\"chevron-right\" /></b>\n        </Link><br />\n        <p>{t(\"finance.payment_batch_collections.category_batch_description\")}</p>\n      </List.Item>\n    </List>\n  )\n}\n\n\nexport function get_add_options_payment(t, batchType) {\n  return (\n    <List unstyled>\n      <List.Item>\n        <Link to={`/finance/paymentbatches/${batchType}/add/category`}>\n          <b>{t(\"finance.payment_batch_payments.category_batch\")} <Icon name=\"chevron-right\" /></b>\n        </Link><br />\n        <p>{t(\"finance.payment_batch_payments.category_batch_description\")}</p>\n      </List.Item>\n    </List>\n  )\n}","import React from 'react'\nimport { withTranslation } from 'react-i18next'\n\nimport {\n  Badge\n} from \"tabler-react\"\n\n\nfunction BadgeFinancePaymentBatchStatus({ t, status }) {\n  switch (status) {\n    case \"SENT_TO_BANK\":\n      return <Badge color=\"success\">{t('finance.payment_batches.status.SENT_TO_BANK')}</Badge> \n      break\n    case \"APPROVED\":\n      return <Badge color=\"success\">{t('finance.payment_batches.status.APPROVED')}</Badge> \n      break\n    case \"AWAITING_APPROVAL\":\n      return <Badge color=\"primary\">{t('finance.payment_batches.status.AWAITING_APPROVAL')}</Badge> \n      break\n    case \"REJECTED\":\n      return <Badge color=\"danger\">{t('finance.payment_batches.status.REJECTED')}</Badge> \n      break\n    default:\n      return t(\"finance.payment_batches.status.invalid_type\")\n  }\n}\n\nexport default withTranslation()(BadgeFinancePaymentBatchStatus)\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport FinanceMenu from \"../FinanceMenu\"\n\n\nfunction FinancePaymentBatchesBase({t, history, match, children, showAdd=false, showBack=false, returnUrl=\"\"}) {\n  const batchType = match.params.batch_type\n\n  let activeLink\n  if (batchType == 'collection') {\n    activeLink = 'payment_batch_collections'\n  } else {\n    activeLink = 'payment_batch_payments'\n  }\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"finance.title\")} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showAdd) ?\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"financepaymentbatch\">\n                  <Link to={`/finance/paymentbatches/${batchType}/add_what`}>\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('finance.payment_batches.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n                : \"\" \n              }\n              {(showBack) ?\n                <HasPermissionWrapper permission=\"view\"\n                                      resource=\"financepaymentbatch\">\n                  <Link to={returnUrl}>\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n                : \"\" \n              }\n              <FinanceMenu activeLink={activeLink} />\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(FinancePaymentBatchesBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_PAYMENT_BATCHES_QUERY = gql`\n  query FinancePaymentBatches($after: String, $before: String, $batchType: String!) {\n    financePaymentBatches(first: 15, before: $before, after: $after, batchType: $batchType) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n          status\n          financePaymentBatchCategory {\n            id\n            name\n          }\n          description\n          batchType\n          year\n          month\n          includeZeroAmounts\n          note\n        }\n      }\n    }\n  }\n`\n\nexport const GET_PAYMENT_BATCH_QUERY = gql`\n  query FinancePaymentBatch($id: ID!) {\n    financePaymentBatch(id:$id) {\n      id\n      name\n      status\n      financePaymentBatchCategory {\n        id\n        name\n      }\n      description\n      batchType\n      year\n      month\n      includeZeroAmounts\n      note\n      totalDisplay\n      countItems\n      items {\n        pageInfo {\n          startCursor\n          endCursor\n          hasNextPage\n          hasPreviousPage\n        }\n        edges {\n          node {\n            id\n            account {\n              id\n              fullName\n            }\n            financeInvoice {\n              id\n              invoiceNumber\n            }\n            accountHolder\n            accountNumber\n            accountBic\n            mandateReference\n            mandateSignatureDate\n            amount\n            amountDisplay\n            currency\n            description\n          }\n        }\n      }\n      exports {\n        pageInfo {\n          startCursor\n          endCursor\n          hasNextPage\n          hasPreviousPage\n        }\n        edges {\n          node {\n            id\n            account {\n              id\n              fullName\n            }\n            createdAt\n          }\n        }\n      }\n    }\n  }\n`\n\n\nexport const GET_INPUT_VALUES = gql`\n  query InputValues($after: String, $before: String, $batchCategoryType: String!) {\n    financePaymentBatchCategories(first: 1000, before:$before, after:$after, archived:false, batchCategoryType: $batchCategoryType) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\n\nexport const ADD_PAYMENT_BATCH = gql`\n  mutation CreateFinancePaymentBatch($input:CreateFinancePaymentBatchInput!) {\n    createFinancePaymentBatch(input: $input) {\n      financePaymentBatch {\n        id\n      }\n    }\n  }\n`\n\n\nexport const UPDATE_PAYMENT_BATCH = gql`\n  mutation UpdateFinancePaymentBatch($input:UpdateFinancePaymentBatchInput!) {\n    updateFinancePaymentBatch(input: $input) {\n      financePaymentBatch {\n        id\n      }\n    }\n  }\n`\n\n\nexport const DELETE_PAYMENT_BATCH = gql`\n  mutation DeleteFinancePaymentBatch($input: DeleteFinancePaymentBatchInput!) {\n    deleteFinancePaymentBatch(input: $input) {\n      ok\n    }\n  }\n`\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\n\nimport AppSettingsContext from '../../context/AppSettingsContext'\n\nimport { get_list_query_variables } from \"./tools\"\n\n// import FinancePaymentBatchCategory from \"../../ui/FinancePaymentBatchCategory\"\nimport BadgeFinancePaymentBatchStatus from \"../../ui/BadgeFinancePaymentBatchStatus\"\nimport ContentCard from \"../../general/ContentCard\"\nimport FinanceMenu from \"../FinanceMenu\"\nimport FinancePaymentBatchesBase from \"./FinancePaymentBatchesBase\"\nimport CSLS from \"../../../tools/cs_local_storage\"\nimport confirm_delete from \"../../../tools/confirm_delete\"\n\nimport { GET_PAYMENT_BATCHES_QUERY, DELETE_PAYMENT_BATCH } from \"./queries\"\nimport moment from 'moment'\n\nfunction FinancePaymentBatches({t, history, match }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const batchType = match.params.batch_type\n\n  const { loading, error, data, fetchMore, refetch } = useQuery(GET_PAYMENT_BATCHES_QUERY, {\n    variables: get_list_query_variables(batchType),\n  })\n  const [deletePaymentBatch] = useMutation(DELETE_PAYMENT_BATCH)\n\n  let cardTitle\n  let msgEmptyList\n  if (batchType == \"collection\") {\n    cardTitle = t('finance.payment_batch_collections.title')\n    msgEmptyList = t('finance.payment_batch_collections.empty_list')\n  } else {\n    cardTitle = t('finance.payment_batch_payments.title')\n    msgEmptyList = t('finance.payment_batch_payments.empty_list')\n  }\n\n  // Loading\n  if (loading) return (\n    <FinancePaymentBatchesBase showAdd={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </FinancePaymentBatchesBase>\n  )\n  // Error\n  if (error) return (\n    <FinancePaymentBatchesBase showAdd={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('finance.payment_batches.error_loading')}</p>\n      </ContentCard>\n      </FinancePaymentBatchesBase>\n  )\n\n  let financePaymentBatches = data.financePaymentBatches\n  // Empty list\n  if (!financePaymentBatches.edges.length) { return (\n    <FinancePaymentBatchesBase showAdd={true}>\n      <ContentCard cardTitle={cardTitle} >\n        <p>{msgEmptyList}</p>\n      </ContentCard>\n    </FinancePaymentBatchesBase>\n  )}\n\n  return (\n    <FinancePaymentBatchesBase showAdd={true}>\n      <ContentCard cardTitle={cardTitle}\n        pageInfo={financePaymentBatches.pageInfo}\n        onLoadMore={() => {\n        fetchMore({\n          variables: {\n            after: financePaymentBatches.pageInfo.endCursor\n          },\n          updateQuery: (previousResult, { fetchMoreResult }) => {\n            const newEdges = fetchMoreResult.financePaymentBatches.edges\n            const pageInfo = fetchMoreResult.financePaymentBatches.pageInfo\n\n            return newEdges.length\n              ? {\n                  // Put the new payment_methods at the end of the list and update `pageInfo`\n                  // so we have the new `endCursor` and `hasNextPage` values\n                  financePaymentBatches: {\n                    __typename: previousResult.financePaymentBatches.__typename,\n                    edges: [ ...previousResult.financePaymentBatches.edges, ...newEdges ],\n                    pageInfo\n                  }\n                }\n              : previousResult\n            }\n        })\n      }} >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.status')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.payment_batches.execution_date')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.payment_batches.batch_category')}</Table.ColHeader>             \n              <Table.ColHeader></Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {financePaymentBatches.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col key={v4()}>\n                  <BadgeFinancePaymentBatchStatus status={node.status} />\n                </Table.Col>\n                <Table.Col key={v4()}>\n                  {node.name}\n                </Table.Col>\n                <Table.Col>\n                  {moment(node.executionDate).format(dateFormat)}\n                </Table.Col>\n                <Table.Col>\n                  {(node.financePaymentBatchCategory) ? node.financePaymentBatchCategory.name : t(\"general.invoices\")}\n                  {(node.year) ? <div><small className=\"text-muted\">{node.year} - {node.month}</small></div> : \"\"}\n                </Table.Col>\n                <Table.Col>\n                  <Link to={`/finance/paymentbatches/${batchType}/view/${node.id}`}>\n                    <Button className='btn-sm' \n                            color=\"secondary\">\n                      {t('general.view')}\n                    </Button>\n                  </Link>\n                </Table.Col>\n                <Table.Col className=\"text-right\" key={v4()}>\n                  <button className=\"icon btn btn-link btn-sm\" \n                    title={t('general.delete')} \n                    href=\"\"\n                    onClick={() => {\n                      confirm_delete({\n                        t: t,\n                        msgConfirm: t(\"finance.payment_batches.delete_confirm_msg\"),\n                        msgDescription: <p>{node.name}</p>,\n                        msgSuccess: t('finance.payment_batches.deleted'),\n                        deleteFunction: deletePaymentBatch,\n                        functionVariables: { variables: {\n                          input: {\n                            id: node.id\n                          }\n                        }, refetchQueries: [\n                          {query: GET_PAYMENT_BATCHES_QUERY, variables: get_list_query_variables(batchType) } \n                        ]}\n                      })\n                  }}>\n                    <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n                  </button>\n                </Table.Col>\n              </Table.Row>\n            ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </FinancePaymentBatchesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(FinancePaymentBatches))","// @flow\n\nimport React, { Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Badge\n} from \"tabler-react\";\n\n\nclass FinancePaymentBatchCategory extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"finance payment batch category props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const categoryType = this.props.categoryType\n\n    switch (categoryType) {\n      case \"COLLECTION\":\n        return <Badge color=\"success\">{t('finance.payment_batch_categories.payment_batch_category_type.COLLECTION')}</Badge>\n        break\n      case \"PAYMENT\":\n        return <Badge color=\"warning\">{t('finance.payment_batch_categories.payment_batch_category_type.PAYMENT')}</Badge>\n        break\n      default:\n        return t('finance.payment_batch_categories.payment_batch_category_type.NOT_FOUND') \n    }\n  }\n}\n\n\nexport default withTranslation()(withRouter(FinancePaymentBatchCategory))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport FinancePaymentBatchCategory from \"../../ui/FinancePaymentBatchCategory\"\nimport ContentCard from \"../../general/ContentCard\"\nimport FinancePaymentBatchesBase from \"./FinancePaymentBatchesBase\"\n\nimport { get_add_options_collection, get_add_options_payment } from './tools'\n\n\nfunction FinancePaymentBatchAddWhat({t, history, match }) {\n  const batchType = match.params.batch_type\n  const returnUrl = `/finance/paymentbatches/${batchType}`\n\n  let cardTitle\n  let options\n  if (batchType == \"collection\") {\n    cardTitle = t('finance.payment_batch_collections.title_add_what')\n    options = get_add_options_collection(t, batchType)\n  } else {\n    cardTitle = t('finance.payment_batch_payments.title_add_what')\n    options = get_add_options_payment(t, batchType)\n  }\n\n  return (\n    <FinancePaymentBatchesBase showBack={true} returnUrl={returnUrl}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle}</Card.Title>\n        </Card.Header>\n        <Card.Body>\n          {options}\n        </Card.Body>\n      </Card>\n    </FinancePaymentBatchesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(FinancePaymentBatchAddWhat))","// @flow\n\nimport React, {useState} from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { useMutation } from \"@apollo/client\"\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\nimport { toast } from 'react-toastify'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport { UPDATE_PAYMENT_BATCH, GET_PAYMENT_BATCHES_QUERY } from \"./queries\"\nimport { get_list_query_variables } from \"./tools\"\n\n\nfunction FinancePaymentBatchViewBase({t, history, match, children, status}) {\n  const batchId = match.params.id\n  const batchType = match.params.batch_type\n  const returnUrl = `/finance/paymentbatches/${batchType}`\n  const exportUrl = `/d/export/finance_payment_batch/csv/${batchId}`\n  const [disabled, setDisabled] = useState(false)\n\n  const [updateFinancePaymentBatch] = useMutation(UPDATE_PAYMENT_BATCH)\n\n  let sentToBankColor = \"secondary\"\n  let approvedColor = \"secondary\"\n  let awaitingApprovalColor = \"secondary\"\n  let rejectedColor = \"secondary\"\n\n  switch (status) {\n    case \"SENT_TO_BANK\":\n      sentToBankColor = \"success\"\n      break\n    case \"APPROVED\":\n      approvedColor = \"success\"\n      break\n    case \"AWAITING_APPROVAL\":\n      awaitingApprovalColor = \"primary\"\n      break\n    case \"REJECTED\":\n      rejectedColor = \"danger\"\n      break\n    default:\n      break\n  }\n\n  function onClickStatusButton(newStatus) {\n    setDisabled(true)\n\n    updateFinancePaymentBatch({ \n      variables: { input: {id: batchId, status: newStatus} }, \n      refetchQueries: [\n        {query: GET_PAYMENT_BATCHES_QUERY, variables: get_list_query_variables(batchType)}\n    ]})\n    .then(({ data }) => {\n        console.log('got data', data);\n        toast.success((t('finance.payment_batches.toast_edit_status_success')), {\n            position: toast.POSITION.BOTTOM_RIGHT\n          })\n        if (status != \"SENT_TO_BANK\") {\n          console.log(status)\n          setDisabled(false)\n        }\n      }).catch((error) => {\n        toast.error((t('general.toast_server_error')) + ': ' +  error, {\n            position: toast.POSITION.BOTTOM_RIGHT\n          })\n        console.log('there was an error sending the query', error)\n        if (status != \"SENT_TO_BANK\") {\n          console.log(status)\n          setDisabled(false)\n        }\n      })\n  }\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"finance.title\")} subTitle={t('finance.payment_batch.title_view')}>\n            <div className=\"page-options d-flex\">\n                <Link to={returnUrl} \n                      className='btn btn-secondary mr-2'>\n                  <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back')}\n                </Link>\n                {/* Export as PDF */}\n                <a href={exportUrl} \n                    className='btn btn-secondary mr-2'>\n                    <Icon prefix=\"fe\" name=\"download\" /> {t('general.export')} \n                </a>\n                <Link to={`/finance/paymentbatches/${batchType}/edit/${batchId}`} \n                      className='btn btn-secondary mr-2'>\n                  <Icon name=\"edit-2\" /> {t('general.edit')}\n                </Link>\n                {(status) ? \n                  (status == \"SENT_TO_BANK\") ?\n                    <Button.List>\n                      <Button \n                        icon=\"mail\"\n                        disabled={true}\n                        color={sentToBankColor}\n                        onClick={() => onClickStatusButton(\"SENT_TO_BANK\")}\n                      >\n                        {t('finance.payment_batch.status.SENT_TO_BANK')}\n                      </Button>\n                    </Button.List>\n                  :\n                    <Button.List>\n                      <Button \n                        icon=\"mail\"\n                        disabled={disabled}\n                        color={sentToBankColor}\n                        onClick={() => onClickStatusButton(\"SENT_TO_BANK\")}\n                      >\n                        {t('finance.payment_batch.status.SENT_TO_BANK')}\n                      </Button>\n                      <Button \n                        icon=\"check\"\n                        disabled={disabled}\n                        color={approvedColor}\n                        onClick={() => onClickStatusButton(\"APPROVED\")}\n                      >\n                        {t('finance.payment_batch.status.APPROVED')}\n                      </Button>\n                      <Button \n                        icon=\"clock\"\n                        disabled={disabled}\n                        color={awaitingApprovalColor}\n                        onClick={() => onClickStatusButton(\"AWAITING_APPROVAL\")}\n                      >\n                        {t('finance.payment_batch.status.AWAITING_APPROVAL')}\n                      </Button>\n                      <Button \n                        icon=\"x\"\n                        disabled={disabled}\n                        color={rejectedColor}\n                        onClick={() => onClickStatusButton(\"REJECTED\")}\n                      >\n                        {t('finance.payment_batch.status.REJECTED')}\n                      </Button>\n                    </Button.List>\n                  : \"\"\n                }\n            </div>\n          </Page.Header>\n          {children}\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(FinancePaymentBatchViewBase))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid,\n} from \"tabler-react\"\n\nimport CSDatePicker from \"../../ui/CSDatePicker\"\n\n\nconst FinancePaymentCollectionBatchForm = (\n  { t, history, isSubmitting, setFieldTouched, setFieldValue, errors, values, inputData, returnUrl, create=false, category=false }\n  ) => (\n  <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.name')}>\n              <Field type=\"text\" \n                      name=\"name\" \n                      className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          {(create) ? \n            <Grid.Col>\n              <Form.Group label={t('finance.payment_batches.execution_date')}>\n                <CSDatePicker \n                  selected={values.executionDate}\n                  onChange={(executionDate) => {\n                    setFieldValue(\"executionDate\", executionDate)\n                    setFieldTouched(\"executionDate\", true)\n                  }}\n                  onBlur={() => setFieldTouched(\"executionDate\", true)}\n                  placeholderText={t('')}\n                />\n                <ErrorMessage name=\"executionDate\" component=\"span\" className=\"invalid-feedback\" />\n              </Form.Group>\n            </Grid.Col>\n            : \"\" \n          }\n        </Grid.Row>\n        {(create && category) ?\n          <Grid.Row>\n            <Grid.Col>\n              <Form.Group label={t('general.category')}>\n                <Field component=\"select\" \n                        name=\"financePaymentBatchCategory\" \n                        className={(errors.financePaymentBatchCategory) ? \"form-control is-invalid\" : \"form-control\"} \n                        autoComplete=\"off\">\n                  <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n                  {inputData.financePaymentBatchCategories.edges.map(({ node }) =>\n                    <option value={node.id} key={v4()}>{node.name}</option>\n                  )}\n                </Field>\n                <ErrorMessage name=\"financePaymentBatchCategory\" component=\"span\" className=\"invalid-feedback\" />\n              </Form.Group>\n            </Grid.Col>\n            <Grid.Col>\n              <Form.Group label={t('general.year')} >\n                <Field type=\"text\" \n                      name=\"year\" \n                      className={(errors.year) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n                <ErrorMessage name=\"year\" component=\"span\" className=\"invalid-feedback\" />\n              </Form.Group>\n            </Grid.Col>\n            <Grid.Col>\n              <Form.Group label={t('general.month')} >\n                <Field type=\"text\" \n                      name=\"month\" \n                      className={(errors.month) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n                <ErrorMessage name=\"month\" component=\"span\" className=\"invalid-feedback\" />\n              </Form.Group>\n            </Grid.Col>\n          </Grid.Row> \n          : \"\"\n        }\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.note')}>\n              <Field type=\"textarea\"\n                     component=\"textarea\" \n                     name=\"note\" \n                     className={(errors.note) ? \"form-control is-invalid\" : \"form-control\"} \n                     autoComplete=\"off\" />\n              <ErrorMessage name=\"note\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        {(create) ? \n          <Grid.Row>\n            <Grid.Col>\n              <Form.Group>\n                <Form.Label className=\"custom-switch\">\n                  <Field \n                  className=\"custom-switch-input\"\n                  type=\"checkbox\" \n                  name=\"includeZeroAmounts\" \n                  checked={values.includeZeroAmounts} />\n                  <span className=\"custom-switch-indicator\" ></span>\n                  <span className=\"custom-switch-description\">{t('finance.payment_batches.include_zero_amounts')}</span>\n                </Form.Label>\n                <ErrorMessage name=\"includeZeroAmounts\" component=\"div\" />   \n              </Form.Group>  \n            </Grid.Col>\n          </Grid.Row>\n          : \"\" \n        }\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Link to={returnUrl}>\n            <Button \n              type=\"button\" \n              color=\"link\">\n                {t('general.cancel')}\n            </Button>\n          </Link>\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(FinancePaymentCollectionBatchForm))","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport moment from 'moment'\n\nimport { GET_PAYMENT_BATCHES_QUERY, GET_PAYMENT_BATCH_QUERY } from './queries'\n// import { PAYMENT_BATCH_CATEGORY_SCHEMA } from './yupSchema'\nimport { get_list_query_variables } from \"./tools\"\n\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Table,\n  List,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { dateToLocalISO } from '../../../tools/date_tools'\nimport BooleanBadge from \"../../ui/BadgeBoolean\"\nimport FinancePaymentBatchCategory from \"../../ui/FinancePaymentBatchCategory\"\nimport AppSettingsContext from '../../context/AppSettingsContext'\n\nimport FinanceMenu from '../FinanceMenu'\nimport FinancePaymentBatchViewBase from './FinancePaymentBatchViewBase'\nimport FinancePaymentCollectionBatchForm from './FinancePaymentCollectionBatchForm'\nimport BadgeBoolean from '../../ui/BadgeBoolean';\n\nfunction FinancePaymentBatchView({ t, history, match }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  const dateTimeFormat = dateFormat + ' ' + timeFormat\n  const batchType = match.params.batch_type\n  const batchId = match.params.id\n  const returnUrl = `/finance/paymentbatches/${batchType}`\n\n  const { loading, error, data } = useQuery(GET_PAYMENT_BATCH_QUERY, {\n    variables: { id: batchId }\n  })\n  // const [updateFinancePaymentBatch] = useMutation(UPDATE_PAYMENT_BATCH)\n\n  // Loading\n  if (loading) return (\n    <FinancePaymentBatchViewBase>\n      <p>{t(\"general.loading_with_dots\")}</p>\n    </FinancePaymentBatchViewBase>\n  )\n  // Error\n  if (error) return (\n    <FinancePaymentBatchViewBase>\n      <p>{t('finance.payment_batch.error_loading')}</p>\n    </FinancePaymentBatchViewBase>\n  )\n\n  const financePaymentBatch = data.financePaymentBatch\n  console.log(financePaymentBatch)\n\n  return (\n    <FinancePaymentBatchViewBase status={financePaymentBatch.status}>\n      <Grid.Row>\n        <Grid.Col md={4}>\n          <Card title={t(\"finance.payment_batch.title_batch_info\")}>\n            <Table cards>\n              <Table.Body>\n                <Table.Row>\n                  <Table.Col>\n                    {t(\"general.name\")}\n                  </Table.Col>\n                  <Table.Col>\n                    {financePaymentBatch.name}\n                  </Table.Col>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Col>\n                    {t('finance.payment_batch_categories.batch_category_type')}\n                  </Table.Col>\n                  <Table.Col>\n                    <FinancePaymentBatchCategory categoryType={financePaymentBatch.batchType} />\n                  </Table.Col>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Col>\n                    {t('finance.payment_batches.batch_category')}\n                  </Table.Col>\n                  <Table.Col>\n                    {\n                      (financePaymentBatch.financePaymentBatchCategory) ? \n                        <div>\n                          {financePaymentBatch.financePaymentBatchCategory.name}\n                          <div><small className=\"text-muted\">{financePaymentBatch.year} - {financePaymentBatch.month}</small></div>\n                        </div> : \n                        t(\"general.invoices\")\n                    }\n                  </Table.Col>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Col>\n                    {t('finance.payment_batches.execution_date')}\n                  </Table.Col>\n                  <Table.Col>\n                    {moment(financePaymentBatch.executionDate).format(dateFormat)}\n                  </Table.Col>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Col>\n                    {t('finance.payment_batches.include_zero_amounts')}\n                  </Table.Col>\n                  <Table.Col>\n                    <BadgeBoolean value={financePaymentBatch.includeZeroAmounts} />\n                  </Table.Col>\n                </Table.Row>\n              </Table.Body>\n            </Table>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={4}>\n          <Card title={t(\"finance.payment_batch.title_batch_totals\")}>\n            <Table cards>\n              <Table.Row>\n                <Table.Col>\n                  {t('general.total')}\n                </Table.Col>\n                <Table.Col>\n                  {financePaymentBatch.totalDisplay}\n                </Table.Col>\n              </Table.Row>\n              <Table.Row>\n                <Table.Col>\n                  {t('general.items')}\n                </Table.Col>\n                <Table.Col>\n                  {financePaymentBatch.countItems}\n                </Table.Col>\n              </Table.Row>\n            </Table>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={4}>\n          <Card title={t(\"finance.payment_batch.title_batch_exports\")}>\n            <Card.Body>\n              <List unstyled>\n              {financePaymentBatch.exports.edges.map(({ node }) => (\n                <List.Item>\n                  {moment(node.createdAt).format(dateTimeFormat)} <br /> \n                  <small>{node.account.fullName}</small>\n                </List.Item>\n              ))}\n              </List>\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n      </Grid.Row>\n      {(financePaymentBatch.note) ?\n        <Grid.Row>\n          <Grid.Col md={12}>\n              <Card title={t(\"finance.payment_batch.title_batch_note\")}>\n                <Card.Body>\n                  {financePaymentBatch.note}\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n          </Grid.Row>\n      : \"\" }\n      <Grid.Row>\n        <Grid.Col>\n          <Card title={t(\"finance.payment_batch.title_batch_items\")}>\n            <small>\n              <Table cards >\n                <Table.Header>\n                  <Table.Row>\n                    <Table.ColHeader>\n                      {t(\"general.line\")}\n                    </Table.ColHeader>\n                    <Table.ColHeader>\n                      {t(\"general.account\")}\n                    </Table.ColHeader>\n                    <Table.ColHeader>\n                      {t(\"relations.account.bank_accounts.holder\")}\n                    </Table.ColHeader>\n                    <Table.ColHeader>\n                      {t(\"relations.account.bank_accounts.number\")}\n                    </Table.ColHeader>\n                    <Table.ColHeader>\n                      {t(\"general.description\")}\n                    </Table.ColHeader>\n                    <Table.ColHeader>\n                      {t(\"settings.finance.currency.title\")}\n                    </Table.ColHeader>\n                    <Table.ColHeader>\n                      {t(\"general.amount\")}\n                    </Table.ColHeader>\n                    <Table.ColHeader>\n                      {t(\"finance.invoices.invoice_number\")}\n                    </Table.ColHeader>\n                  </Table.Row>\n                </Table.Header>\n                <Table.Body>\n                  {financePaymentBatch.items.edges.map(({ node }, index) => (\n                    <Table.Row>\n                      <Table.Col>{index + 1}</Table.Col>\n                      <Table.Col>\n                        <Link to={`/relations/accounts/${node.account.id}/profile`}>\n                          {node.account.fullName}\n                        </Link>\n                      </Table.Col>\n                      <Table.Col>\n                        {node.accountHolder}\n                      </Table.Col>\n                      <Table.Col>\n                        {node.accountNumber} {(node.accountBic) ? <div>{node.accountBic}</div> : \"\"}\n                      </Table.Col>\n                      <Table.Col>\n                        {node.description}\n                      </Table.Col>\n                      <Table.Col>\n                        {node.currency}\n                      </Table.Col>\n                      <Table.Col>\n                        {node.amountDisplay}\n                      </Table.Col>\n                      <Table.Col>\n                        {(node.financeInvoice) ?\n                          <Link to={`/finance/invoices/edit/${node.financeInvoice.id}`}>\n                            {node.financeInvoice.invoiceNumber}\n                          </Link> : \"\" }\n                      </Table.Col>\n                    </Table.Row>\n                  ))}\n                </Table.Body>\n              </Table>\n            </small>\n          </Card>\n        </Grid.Col>\n      </Grid.Row>\n      {/* <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle}</Card.Title>\n        </Card.Header>\n        <Formik\n          initialValues={{ name: '', description: '', executionDate: new Date() }}\n          // validationSchema={PAYMENT_BATCH_CATEGORY_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n            let input = {\n                batchType: batchType.toUpperCase(),\n                name: values.name, \n                executionDate: dateToLocalISO(values.executionDate),\n                description: values.description,\n                note: values.note,\n                includeZeroAmounts: values.includeZeroAmounts\n            }\n\n            if (categoryType == \"category\") {\n              input.year = values.year\n              input.month = values.month\n              input.financePaymentBatchCategory = values.financePaymentBatchCategory\n            }\n\n            addFinancePaymentBatch({ \n              variables: { input: input }, \n              refetchQueries: [\n                {query: GET_PAYMENT_BATCHES_QUERY, variables: get_list_query_variables(batchType)}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data);\n                toast.success((t('finance.payment_batches.toast_add_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n          }}\n          >\n          {({ isSubmitting, errors, values, setFieldValue, setFieldTouched }) => (\n              <FinancePaymentCollectionBatchForm\n                inputValues={inputValues}\n                create={true}\n                invoices={invoices}\n                category={category}\n                isSubmitting={isSubmitting}\n                setFieldTouched={setFieldTouched}\n                setFieldValue={setFieldValue}\n                values={values}\n                errors={errors}\n                returnUrl={returnUrl}\n              />\n          )}\n        </Formik>\n      </Card> */}\n    </FinancePaymentBatchViewBase>\n  )\n}\n\nexport default withTranslation()(withRouter(FinancePaymentBatchView))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const PAYMENT_BATCH_INVOICES_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n    executionDate: Yup.date()\n      .required(t('yup.field_required')),\n    note: Yup.string(),\n    includeZeroAmounts: Yup.boolean()\n  })\n\nexport const PAYMENT_BATCH_CATEGORY_SCHEMA = Yup.object().shape({\n  name: Yup.string()\n    .min(3, t('yup.min_len_3'))\n    .required(t('yup.field_required')),\n  executionDate: Yup.date()\n    .required(t('yup.field_required')),\n  financePaymentBatchCategory: Yup.string()\n  .required(t('yup.field_required')),\n  year: Yup.number()\n    .required()\n    .positive()\n    .min(1000)\n    .max(9999),\n  month: Yup.number()\n    .required()\n    .positive()\n    .min(1)\n    .max(12),\n  note: Yup.string(),\n  includeZeroAmounts: Yup.boolean()\n  })\n\nexport const PAYMENT_BATCH_EDIT_SCHEMA = Yup.object().shape({\n  name: Yup.string()\n    .min(3, t('yup.min_len_3'))\n    .required(t('yup.field_required')),\n})","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { ADD_PAYMENT_BATCH, GET_PAYMENT_BATCHES_QUERY, GET_INPUT_VALUES } from './queries'\nimport { PAYMENT_BATCH_INVOICES_SCHEMA, PAYMENT_BATCH_CATEGORY_SCHEMA } from './yupSchema'\nimport { get_list_query_variables } from \"./tools\"\n\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { dateToLocalISO } from '../../../tools/date_tools'\n\nimport FinanceMenu from '../FinanceMenu'\nimport FinancePaymentBatchesBase from './FinancePaymentBatchesBase'\nimport FinancePaymentCollectionBatchForm from './FinancePaymentCollectionBatchForm'\n\n\nfunction FinancePaymentCollectionBatchAdd({ t, history, match }) {\n  const batchType = match.params.batch_type\n  const returnUrl = `/finance/paymentbatches/${batchType}`\n  const categoryType = match.params.category_type\n  const cardTitle = t('finance.payment_batch.title_add')\n\n\n  let invoices = false\n  let category = false\n  switch (categoryType) {\n    case \"invoices\":\n      invoices = true\n      break\n    case \"category\":\n      category = true\n      break\n    default:\n      break\n  }\n\n  let batchCategoryType\n  switch (batchType) {\n    case \"collection\":\n      batchCategoryType = \"COLLECTION\"\n      break\n    case \"payment\":\n      batchCategoryType = \"PAYMENT\"\n      break\n    default:\n      break\n  }\n\n  const { loading, error, data } = useQuery(GET_INPUT_VALUES, { variables: {\n    batchCategoryType: batchCategoryType\n  }})\n  const [addFinancePaymentBatch] = useMutation(ADD_PAYMENT_BATCH)\n\n  // Loading\n  if (loading) return (\n    <FinancePaymentBatchesBase showAdd={true}>\n      <Card cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </Card>\n    </FinancePaymentBatchesBase>\n  )\n  // Error\n  if (error) return (\n    <FinancePaymentBatchesBase showAdd={true}>\n      <Card cardTitle={cardTitle}>\n        <p>{t('finance.payment_batches.error_loading_input_values')}</p>\n      </Card>\n      </FinancePaymentBatchesBase>\n  )\n\n  const inputData = data\n\n  let initialValues = { name: '', description: '', executionDate: new Date() }\n  let yupSchema\n  if (categoryType == \"category\") {\n    initialValues.year = new Date().getFullYear()\n    initialValues.month = new Date().getMonth() + 1\n    yupSchema = PAYMENT_BATCH_CATEGORY_SCHEMA\n  } else {\n    yupSchema = PAYMENT_BATCH_INVOICES_SCHEMA\n  }\n\n  return (\n    <FinancePaymentBatchesBase showBack={true}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle}</Card.Title>\n        </Card.Header>\n        <Formik\n          initialValues={initialValues}\n          validationSchema={yupSchema}\n          onSubmit={(values, { setSubmitting }) => {\n            let input = {\n                batchType: batchType.toUpperCase(),\n                name: values.name, \n                executionDate: dateToLocalISO(values.executionDate),\n                description: values.description,\n                note: values.note,\n                includeZeroAmounts: values.includeZeroAmounts\n            }\n\n            if (categoryType == \"category\") {\n              input.year = values.year\n              input.month = values.month\n              input.financePaymentBatchCategory = values.financePaymentBatchCategory\n            }\n\n            addFinancePaymentBatch({ \n              variables: { input: input }, \n              refetchQueries: [\n                {query: GET_PAYMENT_BATCHES_QUERY, variables: get_list_query_variables(batchType)}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data);\n                const id = data.createFinancePaymentBatch.financePaymentBatch.id\n                history.push(`/finance/paymentbatches/${batchType}/view/${id}`)\n                toast.success((t('finance.payment_batches.toast_add_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n          }}\n          >\n          {({ isSubmitting, errors, values, setFieldValue, setFieldTouched }) => (\n              <FinancePaymentCollectionBatchForm\n                inputData={inputData}\n                create={true}\n                invoices={invoices}\n                category={category}\n                isSubmitting={isSubmitting}\n                setFieldTouched={setFieldTouched}\n                setFieldValue={setFieldValue}\n                values={values}\n                errors={errors}\n                returnUrl={returnUrl}\n              />\n          )}\n        </Formik>\n      </Card>\n    </FinancePaymentBatchesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(FinancePaymentCollectionBatchAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { UPDATE_PAYMENT_BATCH, GET_PAYMENT_BATCH_QUERY, GET_PAYMENT_BATCHES_QUERY } from './queries'\nimport { PAYMENT_BATCH_EDIT_SCHEMA } from './yupSchema'\nimport { get_list_query_variables } from \"./tools\"\n\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { dateToLocalISO } from '../../../tools/date_tools'\n\nimport FinanceMenu from '../FinanceMenu'\nimport FinancePaymentBatchesBase from './FinancePaymentBatchesBase'\nimport FinancePaymentCollectionBatchForm from './FinancePaymentCollectionBatchForm'\n\n\nfunction FinancePaymentCollectionBatchEdit({ t, history, match }) {\n  const batchType = match.params.batch_type\n  const batchId = match.params.id\n  const returnUrl = `/finance/paymentbatches/${batchType}/view/${batchId}`\n  const cardTitle = t('finance.payment_batch.title_edit')\n\n\n  const { loading, error, data } = useQuery(GET_PAYMENT_BATCH_QUERY, {\n    variables: { id: batchId }\n  })\n  const [updateFinancePaymentBatch] = useMutation(UPDATE_PAYMENT_BATCH)\n\n  // Loading\n  if (loading) return (\n    <FinancePaymentBatchesBase showAdd={false} returnUrl={returnUrl}>\n      <Card title={cardTitle}>\n        <Card.Body>\n          <Dimmer active={true} loader={true} />\n        </Card.Body>\n      </Card>\n    </FinancePaymentBatchesBase>\n  )\n  // Error\n  if (error) return (\n    <FinancePaymentBatchesBase showAdd={true} returnUrl={returnUrl}>\n      <Card title={cardTitle}>\n        <p>{t('finance.payment_batches.error_loading_input_values')}</p>\n      </Card>\n      </FinancePaymentBatchesBase>\n  )\n\n  const inputValues = data.financePaymentBatch\n\n  return (\n    <FinancePaymentBatchesBase showBack={true} returnUrl={returnUrl}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle}</Card.Title>\n        </Card.Header>\n        <Formik\n          initialValues={{ name: inputValues.name , note: inputValues.note }}\n          validationSchema={PAYMENT_BATCH_EDIT_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n            let input = {\n                id: batchId,\n                name: values.name, \n                note: values.note,\n            }\n\n            updateFinancePaymentBatch({ \n              variables: { input: input }, \n              refetchQueries: [\n                {query: GET_PAYMENT_BATCHES_QUERY, variables: get_list_query_variables(batchType)}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data);\n                toast.success((t('finance.payment_batches.toast_edit_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                setSubmitting(false)\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n          }}\n          >\n          {({ isSubmitting, errors, values, setFieldValue, setFieldTouched }) => (\n              <FinancePaymentCollectionBatchForm\n                create={false}\n                isSubmitting={isSubmitting}\n                setFieldTouched={setFieldTouched}\n                setFieldValue={setFieldValue}\n                values={values}\n                errors={errors}\n                returnUrl={returnUrl}\n              />\n          )}\n        </Formik>\n      </Card>\n    </FinancePaymentBatchesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(FinancePaymentCollectionBatchEdit))","import CSLS from \"../../../tools/cs_local_storage\"\n\nexport function get_list_query_variables() {\n  let showArchive = localStorage.getItem(CSLS.FINANCE_PAYMENT_BATCH_CATEGORIES_SHOW_ARCHIVE)\n  if (showArchive === null) {\n    showArchive = \"false\"\n  }\n\n  let queryVars = {\n    archived: (showArchive === \"true\") ? true : false,\n  }\n\n  console.log(queryVars)\n\n  return queryVars\n}\n\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport FinanceMenu from \"../FinanceMenu\"\n\n\nfunction FinancePaymentBatchCategoriesBase({t, history, children, showAdd=false, showBack=false}) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"finance.title\")} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showAdd) ?\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"financepaymentbatchcategory\">\n                  <Link to={\"/finance/paymentbatchcategories/add\"}>\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('finance.payment_batch_categories.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n                : \"\" \n              }\n              {(showBack) ?\n                <HasPermissionWrapper permission=\"view\"\n                                      resource=\"financepaymentbatchcategory\">\n                  <Link to=\"/finance/paymentbatchcategories\">\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n                : \"\" \n              }\n              <FinanceMenu activeLink='payment_batch_categories'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(FinancePaymentBatchCategoriesBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_PAYMENT_BATCH_CATEGORIES_QUERY = gql`\n  query FinancePaymentBatchCategories($after: String, $before: String, $archived: Boolean) {\n    financePaymentBatchCategories(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          description\n          batchCategoryType\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const GET_PAYMENT_BATCH_CATEGORY_QUERY = gql`\n  query FinancePaymentBatchCategory($id: ID!) {\n    financePaymentBatchCategory(id:$id) {\n      id\n      name\n      description\n      archived\n    }\n  }\n`\n\n\nexport const ARCHIVE_PAYMENT_BATCH_CATEGORY = gql`\n  mutation ArchiveFinancePaymentBatchCategory($input: ArchiveFinancePaymentBatchCategoryInput!) {\n    archiveFinancePaymentBatchCategory(input: $input) {\n      financePaymentBatchCategory {\n        id\n        archived\n      }\n    }\n  }\n`\n","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport { get_list_query_variables } from \"./tools\"\n\nimport FinancePaymentBatchCategory from \"../../ui/FinancePaymentBatchCategory\"\nimport ContentCard from \"../../general/ContentCard\"\nimport FinanceMenu from \"../FinanceMenu\"\nimport FinancePaymentBatchCategoriesBase from \"./FinancePaymentBatchCategoriesBase\"\nimport CSLS from \"../../../tools/cs_local_storage\"\n\nimport { GET_PAYMENT_BATCH_CATEGORIES_QUERY, ARCHIVE_PAYMENT_BATCH_CATEGORY } from \"./queries\"\n\nfunction FinancePaymentBatchCategories({t, history}) {\n  const { loading, error, data, fetchMore, refetch } = useQuery(GET_PAYMENT_BATCH_CATEGORIES_QUERY, {\n    variables: get_list_query_variables(),\n  })\n  const [archivePaymentBatchCategory] = useMutation(ARCHIVE_PAYMENT_BATCH_CATEGORY)\n\n  // TODO: use local storage for archive buttons\n  const headerOptions = <Card.Options>\n    <Button color={(localStorage.getItem(CSLS.FINANCE_PAYMENT_BATCH_CATEGORIES_SHOW_ARCHIVE) != \"true\") ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {\n              localStorage.setItem(CSLS.FINANCE_PAYMENT_BATCH_CATEGORIES_SHOW_ARCHIVE, false)\n              refetch(get_list_query_variables())\n            }\n    }>\n      {t('general.current')}\n    </Button>\n    <Button color={(localStorage.getItem(CSLS.FINANCE_PAYMENT_BATCH_CATEGORIES_SHOW_ARCHIVE) === \"true\") ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {\n              localStorage.setItem(CSLS.FINANCE_PAYMENT_BATCH_CATEGORIES_SHOW_ARCHIVE, true)\n              refetch(get_list_query_variables())\n            }\n    }>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  // Loading\n  if (loading) return (\n    <FinancePaymentBatchCategoriesBase showAdd={true}>\n      <ContentCard cardTitle={t('finance.payment_batch_categories.title')}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </FinancePaymentBatchCategoriesBase>\n  )\n  // Error\n  if (error) return (\n    <FinancePaymentBatchCategoriesBase showAdd={true}>\n      <ContentCard cardTitle={t('finance.payment_batch_categories.title')}>\n        <p>{t('finance.payment_batch_categories.error_loading')}</p>\n      </ContentCard>\n      </FinancePaymentBatchCategoriesBase>\n  )\n\n  let payment_batch_categories = data.financePaymentBatchCategories\n  // Empty list\n  if (!payment_batch_categories.edges.length) { return (\n    <FinancePaymentBatchCategoriesBase showAdd={true}>\n      <ContentCard cardTitle={t('finance.payment_batch_categories.title')}\n                    headerContent={headerOptions}>\n        <p>\n          { (localStorage.getItem(CSLS.FINANCE_PAYMENT_BATCH_CATEGORIES_SHOW_ARCHIVE === \"true\")) ? \n              t(\"finance.payment_batch_categories.empty_archive\") :\n              t('finance.payment_batch_categories.empty_list')\n          }\n        </p>\n      </ContentCard>\n    </FinancePaymentBatchCategoriesBase>\n  )}\n\n  return (\n    <FinancePaymentBatchCategoriesBase showAdd={true}>\n      <ContentCard cardTitle={t('finance.payment_batch_categories.title')}\n        headerContent={headerOptions}\n        pageInfo={payment_batch_categories.pageInfo}\n        onLoadMore={() => {\n        fetchMore({\n          variables: {\n            after: payment_batch_categories.pageInfo.endCursor\n          },\n          updateQuery: (previousResult, { fetchMoreResult }) => {\n            const newEdges = fetchMoreResult.financePaymentBatchCategories.edges\n            const pageInfo = fetchMoreResult.financePaymentBatchCategories.pageInfo\n\n            return newEdges.length\n              ? {\n                  // Put the new payment_methods at the end of the list and update `pageInfo`\n                  // so we have the new `endCursor` and `hasNextPage` values\n                  financePaymentBatchCategories: {\n                    __typename: previousResult.financePaymentBatchCategories.__typename,\n                    edges: [ ...previousResult.financePaymentBatchCategories.edges, ...newEdges ],\n                    pageInfo\n                  }\n                }\n              : previousResult\n            }\n        })\n      }} >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.payment_batch_categories.batch_category_type')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {payment_batch_categories.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col key={v4()}>\n                  {node.name}\n                </Table.Col>\n                <Table.Col key={v4()}>\n                  <FinancePaymentBatchCategory categoryType={node.batchCategoryType} />\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <Link to={`/finance/paymentbatchcategories/edit/${node.id}`}>\n                    <Button className='btn-sm' \n                            color=\"secondary\">\n                      {t('general.edit')}\n                    </Button>\n                  </Link>\n                </Table.Col>\n                <Table.Col className=\"text-right\" key={v4()}>\n                  <button className=\"icon btn btn-link btn-sm\" \n                      title={t('general.archive')} \n                      onClick={() => {\n                        console.log(\"clicked archived\")\n                        let id = node.id\n                        archivePaymentBatchCategory({ variables: {\n                          input: {\n                          id,\n                          archived: !node.archived\n                        }\n                      }, refetchQueries: [\n                          {query: GET_PAYMENT_BATCH_CATEGORIES_QUERY, variables: get_list_query_variables()}\n                      ]}).then(({ data }) => {\n                        console.log('got data', data);\n                        toast.success(\n                          (node.archived) ? t('general.unarchived'): t('general.archived'), {\n                            position: toast.POSITION.BOTTOM_RIGHT\n                          })\n                      }).catch((error) => {\n                        toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                            position: toast.POSITION.BOTTOM_RIGHT\n                          })\n                        console.log('there was an error sending the query', error);\n                        })\n                      }}>\n                    <Icon prefix=\"fa\" name=\"inbox\" />\n                  </button>\n                </Table.Col>\n              </Table.Row>\n            ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </FinancePaymentBatchCategoriesBase>\n  )\n}\n\n\n\n// const FinancePaymentMethods = ({ t, history, archived=false }) => (\n//   <SiteWrapper>\n//     <div className=\"my-3 my-md-5\">\n//       <Container>\n//         <Page.Header title={t(\"finance.title\")} />\n//         <Grid.Row>\n//           <Grid.Col md={9}>\n//             <Query query={GET_PAYMENT_METHODS_QUERY} variables={{ archived }}>\n//              {({ loading, error, data: {financePaymentMethods: payment_methods}, refetch, fetchMore }) => {\n//                 // Loading\n//                 if (loading) return (\n//                   <ContentCard cardTitle={t('finance.payment_methods.title')}>\n//                     <Dimmer active={true}\n//                             loader={true}>\n//                     </Dimmer>\n//                   </ContentCard>\n//                 )\n//                 // Error\n//                 if (error) return (\n//                   <ContentCard cardTitle={t('finance.payment_methods.title')}>\n//                     <p>{t('finance.payment_methods.error_loading')}</p>\n//                   </ContentCard>\n//                 )\n//                 const headerOptions = <Card.Options>\n//                   <Button color={(!archived) ? 'primary': 'secondary'}  \n//                           size=\"sm\"\n//                           onClick={() => {archived=false; refetch({archived});}}>\n//                     {t('general.current')}\n//                   </Button>\n//                   <Button color={(archived) ? 'primary': 'secondary'} \n//                           size=\"sm\" \n//                           className=\"ml-2\" \n//                           onClick={() => {archived=true; refetch({archived});}}>\n//                     {t('general.archive')}\n//                   </Button>\n//                 </Card.Options>\n                \n//                 // Empty list\n//                 if (!payment_methods.edges.length) { return (\n//                   <ContentCard cardTitle={t('finance.payment_methods.title')}\n//                                headerContent={headerOptions}>\n//                     <p>\n//                     {(!archived) ? t('finance.payment_methods.empty_list') : t(\"finance.payment_methods.empty_archive\")}\n//                     </p>\n                   \n//                   </ContentCard>\n//                 )} else {   \n//                 // Life's good! :)\n//                 return (\n//                   <ContentCard cardTitle={t('finance.payment_methods.title')}\n//                                headerContent={headerOptions}\n//                                pageInfo={payment_methods.pageInfo}\n//                                onLoadMore={() => {\n//                                 fetchMore({\n//                                   variables: {\n//                                     after: payment_methods.pageInfo.endCursor\n//                                   },\n//                                   updateQuery: (previousResult, { fetchMoreResult }) => {\n//                                     const newEdges = fetchMoreResult.financePaymentMethods.edges\n//                                     const pageInfo = fetchMoreResult.financePaymentMethods.pageInfo\n\n//                                     return newEdges.length\n//                                       ? {\n//                                           // Put the new payment_methods at the end of the list and update `pageInfo`\n//                                           // so we have the new `endCursor` and `hasNextPage` values\n//                                           financePaymentMethods: {\n//                                             __typename: previousResult.financePaymentMethods.__typename,\n//                                             edges: [ ...previousResult.financePaymentMethods.edges, ...newEdges ],\n//                                             pageInfo\n//                                           }\n//                                         }\n//                                       : previousResult\n//                                   }\n//                                 })\n//                               }} >\n//                     <Table>\n//                           <Table.Header>\n//                             <Table.Row key={v4()}>\n//                               <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n//                               <Table.ColHeader>{t('finance.code')}</Table.ColHeader>\n//                             </Table.Row>\n//                           </Table.Header>\n//                           <Table.Body>\n//                               {payment_methods.edges.map(({ node }) => (\n//                                 <Table.Row key={v4()}>\n//                                   <Table.Col key={v4()}>\n//                                     {node.name}\n//                                   </Table.Col>\n//                                   <Table.Col key={v4()}>\n//                                     {node.code}\n//                                   </Table.Col>\n//                                   <Table.Col className=\"text-right\" key={v4()}>\n//                                     {(node.archived) ? \n//                                       <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n//                                       <Button className='btn-sm' \n//                                               onClick={() => history.push(\"/finance/paymentmethods/edit/\" + node.id)}\n//                                               color=\"secondary\">\n//                                         {t('general.edit')}\n//                                       </Button>\n//                                     }\n//                                   </Table.Col>\n//                                   {(node.systemMethod) ? \n//                                     <Table.Col></Table.Col> :\n//                                     <Mutation mutation={ARCHIVE_PAYMENT_METHOD} key={v4()}>\n//                                       {(archivePaymentMethod, { data }) => (\n//                                         <Table.Col className=\"text-right\" key={v4()}>\n//                                           <button className=\"icon btn btn-link btn-sm\" \n//                                             title={t('general.archive')} \n//                                             href=\"\"\n//                                             onClick={() => {\n//                                               console.log(\"clicked archived\")\n//                                               let id = node.id\n//                                               archivePaymentMethod({ variables: {\n//                                                 input: {\n//                                                   id,\n//                                                   archived: !archived\n//                                                 }\n//                                           }, refetchQueries: [\n//                                               {query: GET_PAYMENT_METHODS_QUERY, variables: {\"archived\": archived }}\n//                                           ]}).then(({ data }) => {\n//                                             console.log('got data', data);\n//                                             toast.success(\n//                                               (archived) ? t('general.unarchived'): t('general.archived'), {\n//                                                 position: toast.POSITION.BOTTOM_RIGHT\n//                                               })\n//                                           }).catch((error) => {\n//                                             toast.error((t('general.toast_server_error')) + ': ' +  error, {\n//                                                 position: toast.POSITION.BOTTOM_RIGHT\n//                                               })\n//                                             console.log('there was an error sending the query', error);\n//                                           })\n//                                           }}>\n//                                             <Icon prefix=\"fa\" name=\"inbox\" />\n//                                           </button>\n//                                         </Table.Col>\n//                                       )}\n//                                     </Mutation>\n//                                   }\n//                                 </Table.Row>\n//                               ))}\n//                           </Table.Body>\n//                         </Table>\n//                   </ContentCard>\n//                 )}}\n//              }\n//             </Query>\n//           </Grid.Col>\n//           <Grid.Col md={3}>\n//             <HasPermissionWrapper permission=\"add\"\n//                                   resource=\"financepaymentmethod\">\n//               <Button color=\"primary btn-block mb-6\"\n//                       onClick={() => history.push(\"/finance/paymentmethods/add\")}>\n//                 <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('finance.payment_methods.add')}\n//               </Button>\n//             </HasPermissionWrapper>\n//             <FinanceMenu activeLink='payment_methods'/>\n//           </Grid.Col>\n//         </Grid.Row>\n//       </Container>\n//     </div>\n//   </SiteWrapper>\n// );\n\nexport default withTranslation()(withRouter(FinancePaymentBatchCategories))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const PAYMENT_BATCH_CATEGORY_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n    description: Yup.string()\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid,\n} from \"tabler-react\"\n\n\nconst FinancePaymentBatchCategoryForm = ({ t, history, isSubmitting, errors, values, returnUrl, create=false }) => (\n  <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.name')}>\n              <Field type=\"text\" \n                      name=\"name\" \n                      className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        {(create) ?\n          <Grid.Row>\n            <Grid.Col>\n              <Form.Group label={t('finance.payment_batch_categories.batch_category_type')}>\n                <Field component=\"select\" \n                        name=\"batchCategoryType\" \n                        className={(errors.batchCategoryType) ? \"form-control is-invalid\" : \"form-control\"} \n                        autoComplete=\"off\">\n                  <option value=\"COLLECTION\" key={v4()}>{t('general.collection')}</option>\n                  <option value=\"PAYMENT\" key={v4()}>{t('general.payment')}</option>\n                </Field>\n                <ErrorMessage name=\"batchCategoryType\" component=\"span\" className=\"invalid-feedback\" />\n              </Form.Group>\n            </Grid.Col>\n          </Grid.Row> \n          : \"\"\n        }\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.description')}>\n              <Field type=\"text\" \n                      name=\"description\" \n                      className={(errors.description) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Link to={returnUrl}>\n            <Button \n              type=\"button\" \n              color=\"link\">\n                {t('general.cancel')}\n            </Button>\n          </Link>\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(FinancePaymentBatchCategoryForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { GET_PAYMENT_BATCH_CATEGORIES_QUERY } from './queries'\nimport { PAYMENT_BATCH_CATEGORY_SCHEMA } from './yupSchema'\nimport { get_list_query_variables } from \"./tools\"\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport FinanceMenu from '../FinanceMenu'\nimport FinancePaymentBatchCategoriesBase from './FinancePaymentBatchCategoriesBase'\nimport FinancePaymentBatchCategoryForm from './FinancePaymentBatchCategoryForm'\n\nconst ADD_PAYMENT_BATCH_CATEGORY = gql`\n  mutation CreateFinancePaymentBatchCategory($input:CreateFinancePaymentBatchCategoryInput!) {\n    createFinancePaymentBatchCategory(input: $input) {\n      financePaymentBatchCategory {\n        id\n      }\n    }\n  }\n`\n\nfunction FinancePaymentBatchCategoryAdd({ t, history }) {\n  const returnUrl = \"/finance/paymentbatchcategories\"\n  const [addFinancePaymentBatchCategory] = useMutation(ADD_PAYMENT_BATCH_CATEGORY, {\n    onCompleted: () => history.push(returnUrl),\n  })\n\n  return (\n    <FinancePaymentBatchCategoriesBase showBack={true}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('finance.payment_batch_categories.title_add')}</Card.Title>\n        </Card.Header>\n        <Formik\n          initialValues={{ name: '', batchCategoryType: \"COLLECTION\", description: '' }}\n          validationSchema={PAYMENT_BATCH_CATEGORY_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n            addFinancePaymentBatchCategory({ variables: {\n              input: {\n                name: values.name, \n                batchCategoryType: values.batchCategoryType,\n                description: values.description\n              }\n            }, refetchQueries: [\n                {query: GET_PAYMENT_BATCH_CATEGORIES_QUERY, variables: get_list_query_variables()}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data);\n                toast.success((t('finance.payment_batch_categories.toast_add_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n          }}\n          >\n          {({ isSubmitting, errors }) => (\n              <FinancePaymentBatchCategoryForm\n                create={true}\n                isSubmitting={isSubmitting}\n                errors={errors}\n                returnUrl={returnUrl}\n              />\n          )}\n        </Formik>\n      </Card>\n    </FinancePaymentBatchCategoriesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(FinancePaymentBatchCategoryAdd))","// @flow\n\nimport React from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_PAYMENT_BATCH_CATEGORIES_QUERY, GET_PAYMENT_BATCH_CATEGORY_QUERY } from './queries'\nimport { get_list_query_variables } from './tools'\nimport { PAYMENT_BATCH_CATEGORY_SCHEMA } from './yupSchema'\n\n\n\nimport {\n  Card,\n  Dimmer,\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport FinancePaymentBatchCategoriesBase from './FinancePaymentBatchCategoriesBase'\nimport FinancePaymentBatchCategoryForm from './FinancePaymentBatchCategoryForm'\n\n\nconst UPDATE_PAYMENT_BATCH_CATEGORY = gql`\n  mutation UpdateFinancePaymentBatchCategory($input: UpdateFinancePaymentBatchCategoryInput!) {\n    updateFinancePaymentBatchCategory(input: $input) {\n      financePaymentBatchCategory {\n        id\n      }\n    }\n  }\n`\n\nfunction FinancePaymentBatchCategoryEdit({ t, history, match }) {\n  const returnUrl = \"/finance/paymentbatchcategories\"\n  const paymentBatchCategoryId = match.params.id\n\n  const { loading, error, data } = useQuery(GET_PAYMENT_BATCH_CATEGORY_QUERY, {\n    variables: {'id': paymentBatchCategoryId},\n  })\n  const [updateFinancePaymentBatchCategory] = useMutation(UPDATE_PAYMENT_BATCH_CATEGORY)\n\n  // Loading\n  if (loading) return (\n    <FinancePaymentBatchCategoriesBase showBack={true}>\n      <Card cardTitle={t('finance.payment_batch_categories.title')}>\n        <Card.Body>\n          <Dimmer active={true}\n                  loader={true} />\n        </Card.Body>\n      </Card>\n    </FinancePaymentBatchCategoriesBase>\n  )\n  // Error\n  if (error) return (\n    <FinancePaymentBatchCategoriesBase showBack={true}>\n      <Card cardTitle={t('finance.payment_batch_categories.title')}>\n        <Card.Body>\n          <p>{t('finance.payment_batch_categories.error_loading')}</p>\n        </Card.Body>\n      </Card>\n    </FinancePaymentBatchCategoriesBase>\n  )\n\n  const initialData = data.financePaymentBatchCategory\n\n  return (\n    <FinancePaymentBatchCategoriesBase showBack={true}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('finance.payment_batch_categories.title_edit')}</Card.Title>\n        </Card.Header>\n          <Formik\n            initialValues={{ \n              name: initialData.name, \n              batchCategoryType: initialData.batchCategoryType,\n              description: initialData.description,\n            }}\n            validationSchema={PAYMENT_BATCH_CATEGORY_SCHEMA}\n            onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              updateFinancePaymentBatchCategory({ variables: {\n                input: {\n                  id: match.params.id,\n                  name: values.name, \n                  batchCategoryType: values.batchCategoryType,\n                  description: values.description\n                }\n              }, refetchQueries: [\n                {query: GET_PAYMENT_BATCH_CATEGORIES_QUERY, variables: get_list_query_variables()}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  toast.success((t('finance.payment_batch_categories.toast_edit_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                  setSubmitting(false)\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n              }}\n            >\n            {({ isSubmitting, errors, values }) => (\n                <FinancePaymentBatchCategoryForm\n                  isSubmitting={isSubmitting}\n                  errors={errors}\n                  values={values}\n                  returnUrl={returnUrl}\n                />\n               \n            )}\n          </Formik>\n      </Card>\n    </FinancePaymentBatchCategoriesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(FinancePaymentBatchCategoryEdit))","import { gql } from \"@apollo/client\"\n\nexport const GET_FINANCE_ORDER_QUERY = gql`\n  query FinanceOrder($id: ID!) {\n    financeOrder(id: $id) {\n      id\n      account {\n        id\n        fullName\n      }\n      orderNumber\n      status\n      message\n      createdAt\n      total\n      totalDisplay\n      balanceDisplay\n      items(first: 100) {\n        pageInfo {\n          hasNextPage\n          hasPreviousPage\n          startCursor\n          endCursor\n        }\n        edges {\n          node {\n            id\n            organizationClasspass {\n              id\n              name\n            }\n            productName \n            description\n            quantity\n            price\n            priceDisplay\n            financeTaxRate {\n              name\n            }\n            subtotalDisplay\n            taxDisplay\n            totalDisplay\n            financeGlaccount {\n              name\n            }\n          \tfinanceCostcenter {\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n`\n\n\nexport const UPDATE_ORDER = gql`\n  mutation UpdateFinanceOrder($input: UpdateFinanceOrderInput!) {\n    updateFinanceOrder(input: $input) {\n      financeOrder {\n        id\n      }\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from \"uuid\"\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid,\n  Icon\n} from \"tabler-react\";\n\n\nconst FinanceOrderEditForm = ({ t, isSubmitting, errors, values, returnUrl }) => (\n  <FoForm>\n    <Card title={t('general.status')}>\n      <Card.Body> \n        <Grid.Row>\n          <Grid.Col md={10}>\n            <Form.Group>\n              <Field component=\"select\" \n                     name=\"status\" \n                     className={(errors.status) ? \"form-control is-invalid\" : \"form-control\"} \n                     autoComplete=\"off\">\n                <option value={\"RECEIVED\"} key={v4()}>{t(\"finance.orders.statuses.RECEIVED\")}</option>\n                <option value={\"AWAITING_PAYMENT\"} key={v4()}>{t(\"finance.orders.statuses.AWAITING_PAYMENT\")}</option>\n                <option value={\"PAID\"} key={v4()}>{t(\"finance.orders.statuses.PAID\")}</option>\n                <option value={\"DELIVERED\"} key={v4()}>{t(\"finance.orders.statuses.DELIVERED\")}</option>\n                <option value={\"CANCELLED\"} key={v4()}>{t(\"finance.orders.statuses.CANCELLED\")}</option>\n                <option value={\"NOT_FOUND\"} key={v4()}>{t(\"finance.orders.statuses.NOT_FOUND\")}</option>\n              </Field>\n              <ErrorMessage name=\"status\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n            <span className=\"text-muted\">\n              <Icon name=\"info\" /> {' '}\n              {t(\"finance.orders.set_status_to_delivered_to_deliver_manually\")}\n            </span>\n          </Grid.Col>\n          <Grid.Col md={2}>\n          <Button \n                className=\"pull-right\"\n                color=\"primary\"\n                disabled={isSubmitting}\n                type=\"submit\"\n              >\n                {t('general.submit')}\n              </Button>\n          </Grid.Col>\n        </Grid.Row> \n      </Card.Body>\n    </Card>\n  </FoForm>\n)\n\n\nexport default withTranslation()(withRouter(FinanceOrderEditForm))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Button,\n  Container,\n  Grid,\n  Icon,\n  Page\n} from \"tabler-react\";\n\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport FinanceMenu from \"../../FinanceMenu\"\n\n\nfunction FinanceOrderEditBase ({ t, match, history, children, refetch }) {\n  const returnUrl = \"/finance/orders\"\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"finance.title\")}>\n            <div className=\"page-options d-flex\">\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <HasPermissionWrapper permission=\"change\"\n                                    resource=\"financeorder\">\n                <Link to={returnUrl}>\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n              </HasPermissionWrapper>            \n              <h5>{t(\"general.menu\")}</h5>\n              <FinanceMenu activeLink='orders'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(FinanceOrderEditBase))","// @flow\n\nimport React, { useContext } from 'react'\n\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport { v4 } from \"uuid\"\nimport moment from 'moment'\n\nimport { GET_ORDERS_QUERY } from '../queries'\nimport { GET_FINANCE_ORDER_QUERY, UPDATE_ORDER } from './queries'\nimport FinanceOrderEditForm from \"./FinanceOrderEditForm\"\nimport FinanceOrderEditBase from './FinanceOrderEditBase'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Table,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport { dateToLocalISO } from '../../../../tools/date_tools'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\n\nfunction FinanceOrderEdit({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  const dateTimeFormat = dateFormat + ' ' + timeFormat\n\n  const id = match.params.id\n  const returnUrl = \"/finance/orders\"\n  \n  const { loading, error, data } = useQuery(GET_FINANCE_ORDER_QUERY, {\n    variables: { id: id },\n  })\n  const [updateOrder] = useMutation(UPDATE_ORDER)\n\n\n  // Loading\n  if (loading) return (\n    <FinanceOrderEditBase>\n      <p>{t('general.loading_with_dots')}</p>\n    </FinanceOrderEditBase>\n  )\n  // Error\n  if (error) {\n    console.log(error)\n    return (\n      <FinanceOrderEditBase>\n        <p>{t('general.error_sad_smiley')}</p>\n      </FinanceOrderEditBase>\n    )\n  }\n\n  console.log(data) \n  const order = data.financeOrder\n  \n\n  return(\n    <FinanceOrderEditBase>\n      {/* Start info row */}\n      <Grid.Row>\n        <Grid.Col md={6}>\n          <Card title={t(\"finance.orders.edit_details\")}>\n            <Table cards>\n              <Table.Body>\n                <Table.Row>\n                  <Table.ColHeader>{t(\"general.order\")} #</Table.ColHeader>\n                  <Table.Col>{order.orderNumber}</Table.Col>\n                </Table.Row>\n                <Table.Row>\n                  <Table.ColHeader>{t(\"general.account\")}</Table.ColHeader>\n                  <Table.Col>{order.account.fullName}</Table.Col>\n                </Table.Row>\n                <Table.Row>\n                  <Table.ColHeader>{t(\"finance.orders.placed_at\")}</Table.ColHeader>\n                  <Table.Col>{moment(order.createdAt).format(dateTimeFormat)}</Table.Col>\n                </Table.Row>\n              </Table.Body>\n            </Table>\n          </Card>\n\n        </Grid.Col>\n        <Grid.Col md={6}>\n          {(order.status != \"DELIVERED\") ? \n            <Formik\n              initialValues={{ \n                status: order.status, \n              }}\n              // validationSchema={GLACCOUNT_SCHEMA}\n              onSubmit={(values, { setSubmitting }) => {\n                  console.log('submit values:')\n                  console.log(values)\n\n                  updateOrder({ variables: {\n                    input: {\n                      id: match.params.id,\n                      status: values.status\n                    }\n                  }, refetchQueries: [\n                      {query: GET_ORDERS_QUERY }\n                  ]})\n                  .then(({ data }) => {\n                      console.log('got data', data)\n                      toast.success((t('finance.orders.toast_edit_success')), {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                      setSubmitting(false)\n                    }).catch((error) => {\n                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                      console.log('there was an error sending the query', error)\n                      setSubmitting(false)\n                    })\n              }}\n              >\n              {({ isSubmitting, errors, values }) => (\n                <FinanceOrderEditForm\n                  isSubmitting={isSubmitting}\n                  errors={errors}\n                  values={values}\n                  returnUrl={returnUrl}\n                />\n              )}\n            </Formik>\n            :     \n            <Card title={t('general.status')}>\n              <Card.Body> \n                <span className=\"text-green\"><Icon name=\"check\" /></span> {t(\"finance.orders.statuses.DELIVERED\")}\n              </Card.Body>\n            </Card>\n          }\n        </Grid.Col>\n      </Grid.Row> \n      {/* End information row */}\n      {/* Start items row */}\n      <Grid.Row>\n        <Grid.Col md={12}>\n          <Card title={t(\"general.items\")}>\n            <Table cards>\n              <Table.Header>\n                <Table.Row>\n                  <Table.ColHeader>{t(\"general.product\")}</Table.ColHeader>\n                  <Table.ColHeader>{t(\"general.description\")}</Table.ColHeader>\n                  <Table.ColHeader>{t(\"general.quantity_short_and_price\")}</Table.ColHeader>\n                  <Table.ColHeader>{t(\"general.tax\")}</Table.ColHeader>\n                  <Table.ColHeader>{t(\"general.total\")}</Table.ColHeader>\n                  <Table.ColHeader></Table.ColHeader>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                { order.items.edges.map(({ node }) => (        \n                  <Table.Row key={v4()}>\n                    <Table.Col>\n                      {node.productName}\n                    </Table.Col>\n                    <Table.Col>\n                      {node.description}\n                    </Table.Col>\n                    <Table.Col>\n                      {node.quantity} <br />\n                      {node.priceDisplay}\n                    </Table.Col>\n                    <Table.Col>\n                      {(node.financeTaxRate) ? node.financeTaxRate.name : \"\"}\n                    </Table.Col>\n                    <Table.Col>\n                      {node.totalDisplay}\n                    </Table.Col>\n                  </Table.Row>\n                ))}\n              </Table.Body>                \n            </Table>\n          </Card>\n        </Grid.Col>\n      </Grid.Row>\n      {/* End items row */}\n      {/* Start note row */}\n      { (order.message) ?\n        <Grid.Row>\n          <Grid.Col md={12}>\n            <Card title={t('finance.orders.customer_message')}>\n              <Card.Body>\n                {order.message}\n              </Card.Body>\n            </Card>\n          </Grid.Col>\n        </Grid.Row> : \"\"\n      }\n      {/* End note row */}\n    </FinanceOrderEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceOrderEdit))\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport FinanceMenu from \"../FinanceMenu\"\n\n\nfunction FinancePaymentMethodsBase({ t, history, children, showBack=false }) {\n  return (\n    <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Container>\n        <Page.Header title={t(\"finance.title\")} />\n        <Grid.Row>\n          <Grid.Col md={9}>\n            {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ?\n                <Link to=\"/finance/paymentmethods\">\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                    </Button>\n                </Link>\n              :\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"financepaymentmethod\">\n                  <Link to=\"/finance/paymentmethods/add\">\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('finance.payment_methods.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n              }\n              <FinanceMenu activeLink='payment_methods'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinancePaymentMethodsBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_PAYMENT_METHODS_QUERY = gql`\n  query FinancePaymentMethods($after: String, $before: String, $archived: Boolean) {\n    financePaymentMethods(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          systemMethod\n          name\n          code\n        }\n      }\n    }\n  }\n`\n\nexport const GET_PAYMENT_METHOD_QUERY = gql`\n  query FinancePaymentMethod($id: ID!) {\n    financePaymentMethod(id:$id) {\n      id\n      name\n      code\n      archived\n    }\n  }\n`\n\nexport const ADD_PAYMENT_METHOD = gql`\nmutation CreateFinancePaymentMethod($input:CreateFinancePaymentMethodInput!) {\n  createFinancePaymentMethod(input: $input) {\n    financePaymentMethod{\n      id\n      archived\n      name\n      code\n    }\n  }\n}\n`\n\nexport const UPDATE_PAYMENT_METHOD = gql`\nmutation UpdateFinancePaymentMethod($input: UpdateFinancePaymentMethodInput!) {\n  updateFinancePaymentMethod(input: $input) {\n    financePaymentMethod {\n      id\n      name\n      code\n    }\n  }\n}\n`\n\nexport const ARCHIVE_PAYMENT_METHOD = gql`\nmutation ArchiveFinancePaymentMethod($input: ArchiveFinancePaymentMethodInput!) {\n  archiveFinancePaymentMethod(input: $input) {\n    financePaymentMethod {\n      id\n      archived\n    }\n  }\n}\n`","// @flow\n\nimport React, { useState } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Table\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../general/ContentCard\"\nimport FinancePaymentMethodsBase from './FinancePaymentMethodsBase'\n\nimport { GET_PAYMENT_METHODS_QUERY, ARCHIVE_PAYMENT_METHOD } from \"./queries\"\n\n\nfunction FinancePaymentMethods({ t, history }) {\n  let [archived, setArchived] = useState(false)\n  const cardTitle = t('finance.payment_methods.title')\n  const { loading, error, data, refetch, fetchMore } = useQuery(GET_PAYMENT_METHODS_QUERY, {\n    variables: { archived: archived }\n  })\n\n  const [ archivePaymentMethod ] = useMutation(ARCHIVE_PAYMENT_METHOD)\n\n  const headerOptions = <Card.Options>\n    <Button color={(!archived) ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {setArchived(false); refetch({archived: false});}}>\n      {t('general.current')}\n    </Button>\n    <Button color={(archived) ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {setArchived(true); refetch({archived: true});}}>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  if (loading) return (\n    <FinancePaymentMethodsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </FinancePaymentMethodsBase>\n  )\n\n  if (error) return (\n    <FinancePaymentMethodsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('finance.payment_methods.error_loading')}</p>\n      </ContentCard>\n    </FinancePaymentMethodsBase>\n  )\n\n  const paymentMethods = data.financePaymentMethods\n\n  // Empty list\n  if (!paymentMethods.edges.length) { return (\n    <FinancePaymentMethodsBase>\n      <ContentCard cardTitle={cardTitle}\n                    headerContent={headerOptions}>\n        <p>\n          {(!archived) ? t('finance.payment_methods.empty_list') : t(\"finance.payment_methods.empty_archive\")}\n        </p>\n      </ContentCard>\n    </FinancePaymentMethodsBase>\n  )}\n\n  return (\n    <FinancePaymentMethodsBase>\n      <ContentCard cardTitle={cardTitle}\n                    headerContent={headerOptions}\n                    pageInfo={paymentMethods.pageInfo}\n                    onLoadMore={() => {\n                    fetchMore({\n                      variables: {\n                        after: paymentMethods.pageInfo.endCursor\n                      },\n                      updateQuery: (previousResult, { fetchMoreResult }) => {\n                        const newEdges = fetchMoreResult.financePaymentMethods.edges\n                        const pageInfo = fetchMoreResult.financePaymentMethods.pageInfo\n\n                        return newEdges.length\n                          ? {\n                              // Put the new paymentMethods at the end of the list and update `pageInfo`\n                              // so we have the new `endCursor` and `hasNextPage` values\n                              financePaymentMethods: {\n                                __typename: previousResult.financePaymentMethods.__typename,\n                                edges: [ ...previousResult.financePaymentMethods.edges, ...newEdges ],\n                                pageInfo\n                              }\n                            }\n                          : previousResult\n                      }\n                    })\n                  }} >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.code')}</Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {paymentMethods.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    {node.name}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.code}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    {(node.archived) ? \n                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                      <Link to={`/finance/paymentmethods/edit/${node.id}`}>\n                        <Button className='btn-sm' \n                                color=\"secondary\">\n                          {t('general.edit')}\n                        </Button>\n                      </Link>\n                    }\n                  </Table.Col>\n                  {(node.systemMethod) ? \n                    <Table.Col></Table.Col> :\n                    <Table.Col className=\"text-right\" key={v4()}>\n                      <button className=\"icon btn btn-link btn-sm\" \n                        title={t('general.archive')} \n                        href=\"\"\n                        onClick={() => {\n                          console.log(\"clicked archived\")\n                          let id = node.id\n                          archivePaymentMethod({ variables: {\n                            input: {\n                              id,\n                              archived: !archived\n                            }\n                      }, refetchQueries: [\n                          {query: GET_PAYMENT_METHODS_QUERY, variables: {\"archived\": archived }}\n                      ]}).then(({ data }) => {\n                        console.log('got data', data);\n                        toast.success(\n                          (archived) ? t('general.unarchived'): t('general.archived'), {\n                            position: toast.POSITION.BOTTOM_RIGHT\n                          })\n                      }).catch((error) => {\n                        toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                            position: toast.POSITION.BOTTOM_RIGHT\n                          })\n                        console.log('there was an error sending the query', error);\n                      })\n                      }}>\n                        <Icon prefix=\"fa\" name=\"inbox\" />\n                      </button>\n                    </Table.Col>\n                  }\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>      \n    </FinancePaymentMethodsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinancePaymentMethods))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const PAYMENT_METHOD_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\n\nconst FinancePaymentMethodForm = ({ t, history, isSubmitting, errors, values, returnUrl }) => (\n  <FoForm>\n      <Card.Body>\n          <Form.Group label={t('general.name')}>\n            <Field type=\"text\" \n                    name=\"name\" \n                    className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          <Form.Group label={t('finance.code')}>\n            <Field type=\"text\" \n                    name=\"code\" \n                    className={(errors.code) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"code\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Link to={returnUrl}>\n            <Button \n              type=\"button\" \n              color=\"link\">\n                {t('general.cancel')}\n            </Button>\n          </Link>\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(FinancePaymentMethodForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { GET_PAYMENT_METHODS_QUERY, ADD_PAYMENT_METHOD } from './queries'\nimport { PAYMENT_METHOD_SCHEMA } from './yupSchema'\n\n\nimport {\n  Card,\n} from \"tabler-react\"\n\nimport FinancePaymentMethodsBase from './FinancePaymentMethodsBase';\nimport FinancePaymentMethodForm from './FinancePaymentMethodForm'\n\n\nfunction FinancePaymentMethodAdd({ t, history }) {\n  const returnUrl = \"/finance/paymentmethods\"\n  const [ addPaymentMethod ] = useMutation(ADD_PAYMENT_METHOD)\n\n  return (\n    <FinancePaymentMethodsBase showBack={true}>\n      <Card title={t('finance.payment_methods.title_add')}>\n        <Formik\n          initialValues={{ name: '', code: '' }}\n          validationSchema={PAYMENT_METHOD_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              addPaymentMethod({ variables: {\n                input: {\n                  name: values.name, \n                  code: values.code\n                }\n              }, refetchQueries: [\n                  {query: GET_PAYMENT_METHODS_QUERY, variables: {\"archived\": false }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data);\n                  history.push(returnUrl)\n                  toast.success((t('finance.payment_methods.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors }) => (\n              <FinancePaymentMethodForm\n                isSubmitting={isSubmitting}\n                errors={errors}\n                returnUrl={returnUrl}\n              />\n          )}\n        </Formik>\n      </Card>\n    </FinancePaymentMethodsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinancePaymentMethodAdd))","import React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_PAYMENT_METHODS_QUERY, GET_PAYMENT_METHOD_QUERY, UPDATE_PAYMENT_METHOD } from './queries'\nimport { PAYMENT_METHOD_SCHEMA } from './yupSchema'\n\nimport {\n  Card,\n  Dimmer,\n} from \"tabler-react\";\n\nimport ContentCard from \"../../general/ContentCard\"\nimport FinancePaymentMethodsBase from './FinancePaymentMethodsBase';\nimport FinancePaymentMethodForm from './FinancePaymentMethodForm'\n\n\nfunction FinancePaymentMethodEdit({ t, history, match }) {\n  const id = match.params.id\n  const cardTitle = t('finance.payment_methods.title_edit')\n  const returnUrl = \"/finance/paymentmethods\"\n\n  const { loading, error, data } = useQuery(GET_PAYMENT_METHOD_QUERY, {\n    variables: { id: id }\n  })\n  const [ updatePaymentMethod ] = useMutation(UPDATE_PAYMENT_METHOD)\n\n  if (loading) return (\n    <FinancePaymentMethodsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </FinancePaymentMethodsBase>\n  )\n\n  if (error) return (\n    <FinancePaymentMethodsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </FinancePaymentMethodsBase>\n  )\n\n  const initialData = data.financePaymentMethod;\n  console.log('query data')\n  console.log(data)\n\n  return (\n    <FinancePaymentMethodsBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n          initialValues={{ \n            name: initialData.name, \n            code: initialData.code\n          }}\n          validationSchema={PAYMENT_METHOD_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              updatePaymentMethod({ variables: {\n                input: {\n                  id: match.params.id,\n                  name: values.name,\n                  code: values.code\n                }\n              }, refetchQueries: [\n                  {query: GET_PAYMENT_METHODS_QUERY, variables: {\"archived\": false }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('finance.payment_methods.toast_edit_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors, values }) => (\n              <FinancePaymentMethodForm\n                isSubmitting={isSubmitting}\n                errors={errors}\n                values={values}\n                returnUrl={returnUrl}\n              />\n          )}\n        </Formik>\n      </Card>\n    </FinancePaymentMethodsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinancePaymentMethodEdit))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport FinanceMenu from \"../FinanceMenu\"\n\n\nfunction FinanceTaxRatesBase({ t, history, children, showBack=false }) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"finance.title\")} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ?\n                <Link to=\"/finance/taxrates\"  >\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n              :\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"financetaxrate\">\n                  <Link to=\"/finance/taxrates/add\">\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('finance.taxrates.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n              }\n              <FinanceMenu activeLink='taxrates'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceTaxRatesBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_TAXRATES_QUERY = gql`\n  query FinanceTaxRates($after: String, $before: String, $archived: Boolean) {\n    financeTaxRates(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          percentage\n          rateType\n          code\n        }\n      }\n    }\n  }\n`\n\nexport const GET_TAXRATE_QUERY = gql`\n  query FinanceTaxRate($id: ID!) {\n    financeTaxRate(id:$id) {\n      id\n      archived\n      name\n      percentage\n      rateType\n      code\n    }\n  }\n`\n\nexport const ADD_TAXRATE = gql`\nmutation CreateFinanceTaxRate($input:CreateFinanceTaxRateInput!) {\n  createFinanceTaxRate(input: $input) {\n    financeTaxRate{\n      id\n      archived\n      name\n      percentage\n      rateType\n      code\n    }\n  }\n}\n`\n\nexport const UPDATE_TAXRATE = gql`\nmutation UpdateFinanceTaxRate($input: UpdateFinanceTaxRateInput!) {\n  updateFinanceTaxRate(input: $input) {\n    financeTaxRate {\n      id\n      archived\n      name\n      percentage\n      rateType\n      code\n    }\n  }\n}\n`\n\nexport const ARCHIVE_TAXRATE = gql`\nmutation ArchiveFinanceTaxRate($input: ArchiveFinanceTaxRateInput!) {\n  archiveFinanceTaxRate(input: $input) {\n    financeTaxRate {\n      id\n      archived\n    }\n  }\n}\n`\n","// @flow\n\nimport React, { useState } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Table\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../general/ContentCard\"\nimport FinanceTaxRatesBase from './FinanceTaxRatesBase'\n\nimport { GET_TAXRATES_QUERY, ARCHIVE_TAXRATE } from \"./queries\"\n\nfunction FinanceTaxRates({t, history}) {\n  let [archived, setArchived] = useState(false)\n  const cardTitle = t('finance.taxrates.title')\n  const { loading, error, data, refetch, fetchMore } = useQuery(GET_TAXRATES_QUERY, {\n    variables: { archived: archived }\n  })\n  const [ archiveTaxrate ] = useMutation(ARCHIVE_TAXRATE)\n\n  const headerOptions = <Card.Options>\n    <Button color={(!archived) ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {setArchived(false); refetch({archived: false});}}>\n      {t('general.current')}\n    </Button>\n    <Button color={(archived) ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {setArchived(true); refetch({archived: true});}}>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  if (loading) return (\n    <FinanceTaxRatesBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </FinanceTaxRatesBase>\n  )\n\n  if (error) return (\n    <FinanceTaxRatesBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('finance.glaccounts.error_loading')}</p>\n      </ContentCard>\n    </FinanceTaxRatesBase>\n  )\n\n  const taxrates = data.financeTaxRates\n\n  // Empty list\n  if (!taxrates.edges.length) { return (\n    <FinanceTaxRatesBase>\n      <ContentCard cardTitle={cardTitle}\n                    headerContent={headerOptions}>\n        <p>\n          {(!archived) ? t('finance.taxrates.empty_list') : t(\"finance.taxrates.empty_archive\")}\n        </p>\n      </ContentCard>\n    </FinanceTaxRatesBase>\n  )}\n\n  return (\n    <FinanceTaxRatesBase>\n      <ContentCard cardTitle={cardTitle}\n                    headerContent={headerOptions}\n                    pageInfo={taxrates.pageInfo}\n                    onLoadMore={() => {\n                    fetchMore({\n                      variables: {\n                        after: taxrates.pageInfo.endCursor\n                      },\n                      updateQuery: (previousResult, { fetchMoreResult }) => {\n                        const newEdges = fetchMoreResult.financeTaxRates.edges\n                        const pageInfo = fetchMoreResult.financeTaxRates.pageInfo\n\n                        return newEdges.length\n                          ? {\n                              // Put the new taxrates at the end of the list and update `pageInfo`\n                              // so we have the new `endCursor` and `hasNextPage` values\n                              financeTaxRates: {\n                                __typename: previousResult.financeTaxRates.__typename,\n                                edges: [ ...previousResult.financeTaxRates.edges, ...newEdges ],\n                                pageInfo\n                              }\n                            }\n                          : previousResult\n                      }\n                    })\n                  }} >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.taxrates.percentage')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.taxrates.rateType')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.code')}</Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {taxrates.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    {node.name}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.percentage} %\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.rateType}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.code}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    {(node.archived) ? \n                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                      <Button className='btn-sm' \n                              onClick={() => history.push(\"/finance/taxrates/edit/\" + node.id)}\n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    }\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                        title={t('general.archive')} \n                        href=\"\"\n                        onClick={() => {\n                          console.log(\"clicked archived\")\n                          let id = node.id\n                          archiveTaxrate({ variables: {\n                            input: {\n                            id,\n                            archived: !archived\n                            }\n                    }, refetchQueries: [\n                        {query: GET_TAXRATES_QUERY, variables: {\"archived\": archived }}\n                    ]}).then(({ data }) => {\n                      console.log('got data', data);\n                      toast.success(\n                        (archived) ? t('general.unarchived'): t('general.archived'), {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                    }).catch((error) => {\n                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                      console.log('there was an error sending the query', error);\n                    })\n                    }}>\n                      <Icon prefix=\"fa\" name=\"inbox\" />\n                    </button>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </FinanceTaxRatesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(FinanceTaxRates))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const TAX_RATE_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n    percentage: Yup.number()\n      .max(100)\n      .typeError(t('yup.field_has_to_be_number'))\n      .required(t('yup.field_required')),\n  })\n","import React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport { GET_TAXRATES_QUERY, ADD_TAXRATE } from './queries'\nimport { TAX_RATE_SCHEMA } from './yupSchema'\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\nimport FinanceTaxRatesBase from './FinanceTaxRatesBase';\n\n\nfunction FinanceTaxRateAdd({t, history}) {\n  const returnUrl = \"/finance/taxrates\"\n  const [ addFinanceTaxrate ] = useMutation(ADD_TAXRATE)\n\n  return (\n    <FinanceTaxRatesBase showBack={true}>\n      <Card title={t('finance.taxrates.title_add')}>\n        <Formik\n            initialValues={{ name: \"\", percentage: \"\", rateType: \"IN\", code: \"\" }}\n            validationSchema={TAX_RATE_SCHEMA}\n            onSubmit={(values, { setSubmitting }) => {\n                addFinanceTaxrate({ variables: {\n                  input: {\n                    name: values.name,\n                    percentage: values.percentage,\n                    rateType: values.rateType, \n                    code: values.code,\n                  }\n                }, refetchQueries: [\n                    {query: GET_TAXRATES_QUERY, variables: {\"archived\": false }}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data);\n                    history.push(returnUrl)\n                    toast.success((t('finance.taxrates.toast_add_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, errors }) => (\n              <FoForm>\n                  <Card.Body>\n                      <Form.Group label={t('general.name')}>\n                        <Field type=\"text\" \n                                name=\"name\" \n                                className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                                autoComplete=\"off\" />\n                        <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                      </Form.Group>\n                      <Form.Group label={t('finance.taxrates.percentage')}>\n                        <Field type=\"text\" \n                                name=\"percentage\" \n                                className={(errors.percentage) ? \"form-control is-invalid\" : \"form-control\"} \n                                autoComplete=\"off\" />\n                        <ErrorMessage name=\"percentage\" component=\"span\" className=\"invalid-feedback\" />\n                      </Form.Group>\n                      <Form.Group label={t('finance.taxrates.rateType')}>\n                        <Field component=\"select\" \n                                name=\"rateType\" \n                                className={(errors.rateType) ? \"form-control is-invalid\" : \"form-control\"} \n                                autoComplete=\"off\">\n                          <option value=\"IN\">{t('finance.taxrates.including')}</option>\n                          <option value=\"EX\">{t('finance.taxrates.excluding')}</option>\n                        </Field>\n                        <ErrorMessage name=\"rateType\" component=\"span\" className=\"invalid-feedback\" />\n                      </Form.Group>\n                      <Form.Group label={t('finance.code')}>\n                        <Field type=\"text\" \n                                name=\"code\" \n                                className={(errors.code) ? \"form-control is-invalid\" : \"form-control\"} \n                                autoComplete=\"off\" />\n                        <ErrorMessage name=\"code\" component=\"span\" className=\"invalid-feedback\" />\n                      </Form.Group>\n                  </Card.Body>\n                  <Card.Footer>\n                      <Button \n                        color=\"primary\"\n                        className=\"pull-right\" \n                        type=\"submit\" \n                        disabled={isSubmitting}\n                      >\n                        {t('general.submit')}\n                      </Button>\n                      <Link to={returnUrl}>\n                        <Button color=\"link\">\n                            {t('general.cancel')}\n                        </Button>\n                      </Link>\n                  </Card.Footer>\n              </FoForm>\n            )}\n        </Formik>\n      </Card>\n    </FinanceTaxRatesBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceTaxRateAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport { GET_TAXRATES_QUERY, GET_TAXRATE_QUERY, UPDATE_TAXRATE } from './queries'\nimport { TAX_RATE_SCHEMA } from './yupSchema'\n\nimport {\n  Button,\n  Card,\n  Dimmer,\n  Form\n} from \"tabler-react\";\n\nimport ContentCard from \"../../general/ContentCard\"\nimport FinanceTaxRatesBase from './FinanceTaxRatesBase';\n\n\nfunction FinanceTaxRateEdit({t, match, history}) {\n  const id = match.params.id\n  const returnUrl = \"/finance/taxrates\"\n  const cardTitle = t('finance.taxrates.title_edit')\n  const { loading, error, data } = useQuery(GET_TAXRATE_QUERY, {\n    variables: { id: id }\n  })\n  const [ updateTaxrate ] = useMutation(UPDATE_TAXRATE)\n\n  if (loading) return (\n    <FinanceTaxRatesBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </FinanceTaxRatesBase>\n  )\n\n  if (error) return (\n    <FinanceTaxRatesBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('finance.taxrates.error_loading')}</p>\n      </ContentCard>\n    </FinanceTaxRatesBase>\n  )\n\n  const initialData = data.financeTaxRate;\n  console.log('query data')\n  console.log(data)\n\n  return (\n    <FinanceTaxRatesBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n            initialValues={{ \n              name: initialData.name, \n              percentage: initialData.percentage,\n              rateType: initialData.rateType,\n              code: initialData.code,\n            }}\n            validationSchema={TAX_RATE_SCHEMA}\n            onSubmit={(values, { setSubmitting }) => {\n                console.log('submit values:')\n                console.log(values)\n\n                updateTaxrate({ variables: {\n                  input: {\n                    id: match.params.id,\n                    name: values.name,\n                    percentage: values.percentage,\n                    rateType: values.rateType,\n                    code: values.code,\n                  }\n                }, refetchQueries: [\n                    {query: GET_TAXRATES_QUERY, variables: {\"archived\": false }}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    history.push(returnUrl)\n                    toast.success((t('finance.taxrates.toast_edit_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, errors, values }) => (\n                <FoForm>\n                    <Card.Body>\n                      <Form.Group label={t('general.name')}>\n                        <Field type=\"text\" \n                                name=\"name\" \n                                className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                                autoComplete=\"off\" />\n                        <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                      </Form.Group>\n                      <Form.Group label={t('finance.taxrates.percentage')}>\n                        <Field type=\"text\" \n                              name=\"percentage\" \n                              className={(errors.percentage) ? \"form-control is-invalid\" : \"form-control\"} \n                              autoComplete=\"off\" />\n                        <ErrorMessage name=\"percentage\" component=\"span\" className=\"invalid-feedback\" />\n                      </Form.Group>\n                      <Form.Group label={t('finance.taxrates.rateType')}>\n                        <Field component=\"select\" \n                              name=\"rateType\" \n                              className={(errors.rateType) ? \"form-control is-invalid\" : \"form-control\"} \n                              autoComplete=\"off\">\n                          <option value=\"IN\">{t('finance.taxrates.including')}</option>\n                          <option value=\"EX\">{t('finance.taxrates.excluding')}</option>\n                        </Field>\n                        <ErrorMessage name=\"rateType\" component=\"span\" className=\"invalid-feedback\" />\n                      </Form.Group>\n                      <Form.Group label={t('finance.code')}>\n                        <Field type=\"text\" \n                                name=\"code\" \n                                className={(errors.code) ? \"form-control is-invalid\" : \"form-control\"} \n                                autoComplete=\"off\" />\n                        <ErrorMessage name=\"code\" component=\"span\" className=\"invalid-feedback\" />\n                      </Form.Group>\n                    </Card.Body>\n                    <Card.Footer>\n                        <Button \n                          className=\"pull-right\"\n                          color=\"primary\"\n                          disabled={isSubmitting}\n                          type=\"submit\"\n                        >\n                          {t('general.submit')}\n                        </Button>\n                        <Link to={returnUrl}>\n                          <Button\n                            type=\"button\" \n                            color=\"link\" \n                          >\n                              {t('general.cancel')}\n                          </Button>\n                        </Link>\n                    </Card.Footer>\n                </FoForm>\n            )}\n        </Formik>\n      </Card>\n    </FinanceTaxRatesBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(FinanceTaxRateEdit))","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\n\nimport {\n  List\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../HasPermissionWrapper\"\n\n\nlet classpasses_active\nlet subscriptions_active\n\n\nconst InsightMenu = ({ t, activeLink }) => (\n    <List.Group transparent={true}>\n        {(activeLink === 'classpasses') ? classpasses_active = true: classpasses_active = false}\n        {(activeLink === 'subscriptions') ? subscriptions_active = true: subscriptions_active = false}\n        \n        <HasPermissionWrapper \n            permission=\"view\"\n            resource=\"insight\"\n        >\n          <List.GroupItem\n              key={v4()}\n              className=\"d-flex align-items-center\"\n              to=\"#/insight/classpasses\"\n              icon=\"credit-card\"\n              active={classpasses_active}\n              >\n              {t('insight.classpass.title')}\n          </List.GroupItem>\n        </HasPermissionWrapper>\n        <HasPermissionWrapper \n            permission=\"view\"\n            resource=\"insight\"\n        >\n          <List.GroupItem\n              key={v4()}\n              className=\"d-flex align-items-center\"\n              to=\"#/insight/subscriptions\"\n              icon=\"edit\"\n              active={subscriptions_active}\n              >\n              {t('insight.subscriptions.title')}\n          </List.GroupItem>\n        </HasPermissionWrapper>\n        {/* <HasPermissionWrapper \n            permission=\"view\"\n            resource=\"organizationlocation\">\n            <List.GroupItem\n                key={v4()}\n                className=\"d-flex align-items-center\"\n                to=\"#/organization/locations\"\n                icon=\"home\"\n                active={location_active}\n                >\n            Locations\n            </List.GroupItem>\n        </HasPermissionWrapper> */}\n    </List.Group>\n);\n\nexport default withTranslation()(InsightMenu)","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Page,\n  Grid,\n  Container,\n  StampCard\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport InsightMenu from \"../InsightMenu\"\n\n\nclass InsightHome extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Insight home props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const match = this.props.match\n    const history = this.props.history\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title={t(\"insight.title\")} />\n            <Grid.Row>\n              <Grid.Col md={9}>\n                <Grid.Row>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/insight/classpasses'>\n                      <StampCard header={<small>{t('insight.classpasses.title')}</small>} footer={t('')} color=\"blue\" icon=\"credit-card\" />\n                    </Link>\n                  </Grid.Col>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/insight/subscriptions'>\n                      <StampCard header={<small>{t('insight.subscriptions.title')}</small>} footer={t('')} color=\"blue\" icon=\"edit\" />\n                    </Link>\n                  </Grid.Col>\n                </Grid.Row>\n              </Grid.Col>\n              <Grid.Col md={3}>\n                <InsightMenu />\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n    </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(InsightHome))","import { gql } from \"@apollo/client\"\n\n\nexport const GET_CLASSPASSES_SOLD_QUERY = gql`\n  query InsightAccountClasspassesSold($year: Int!) {\n    insightAccountClasspassesSold(year: $year) {\n      description\n      data\n      year\n    }\n  }\n`\n\n\nexport const GET_CLASSPASSES_ACTIVE_QUERY = gql`\n  query InsightAccountClasspassesActive($year: Int!) {\n    insightAccountClasspassesActive(year: $year) {\n      description\n      data\n      year\n    }\n  }\n`","\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Icon,\n} from \"tabler-react\";\n\nconst InsightBackHome = ({ t }) => (\n  <div className=\"page-options d-flex\">\n    <Link to=\"/insight\" \n          className='btn btn-secondary mr-4'>\n        <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back_to')} {t('insight.title')}\n    </Link>\n  </div>\n)\n\nexport default withTranslation()(InsightBackHome)","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport moment from 'moment'\n\nimport {\n  Button,\n  Container,\n  Grid,\n  Page\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport InsightBackHome from '../InsightBackHome'\n\nimport CSLS from \"../../../tools/cs_local_storage\"\n\n// Set some initial values for dates, if not found\nif (!localStorage.getItem(CSLS.INSIGHT_CLASSPASSES_YEAR)) {\n  console.log('year from not found... defaulting to today...')\n  localStorage.setItem(CSLS.INSIGHT_CLASSPASSES_YEAR, moment().format('YYYY')) \n} \n\nfunction InsightClasspassesBase ({ t, history, children, year, refetchData=f=>f }) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"insight.title\")} subTitle={t(\"general.classpasses\") + \" \" + year}>\n            <div className=\"page-options d-flex\">\n              <InsightBackHome />\n              <Button.List className=\"schedule-list-page-options-btn-list\">\n                <Button \n                  icon=\"chevron-left\"\n                  color=\"secondary\"\n                  onClick={ () => {\n                    let previousYear = parseInt(localStorage.getItem(CSLS.INSIGHT_CLASSPASSES_YEAR)) - 1                    \n                    localStorage.setItem(CSLS.INSIGHT_CLASSPASSES_YEAR, previousYear) \n\n                    refetchData(previousYear)\n                }} />\n                <Button \n                  icon=\"sunset\"\n                  color=\"secondary\"\n                  onClick={ () => {\n                    let currentYear = moment().format('YYYY')\n                    localStorage.setItem(CSLS.INSIGHT_CLASSPASSES_YEAR, currentYear) \n                    \n                    refetchData(currentYear)\n                }} />\n                <Button \n                  icon=\"chevron-right\"\n                  color=\"secondary\"\n                  onClick={ () => {\n                    let nextYear = parseInt(localStorage.getItem(CSLS.INSIGHT_CLASSPASSES_YEAR)) + 1                    \n                    localStorage.setItem(CSLS.INSIGHT_CLASSPASSES_YEAR, nextYear) \n\n                    refetchData(nextYear)\n                }} />\n              </Button.List> \n            </div>\n          </Page.Header>\n          <Grid.Row>\n            {children}\n          </Grid.Row>\n        </Container>  \n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(InsightClasspassesBase))","import React, { useContext } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport C3Chart from \"react-c3js\"\n\nimport AppSettingsContext from '../../context/AppSettingsContext'\nimport CSLS from \"../../../tools/cs_local_storage\"\nimport { refreshTokenAndOpenExportLinkInNewTab } from \"../../../tools/refresh_token_and_open_export_link\"\n\nimport {\n  colors,\n  Grid,\n  Button,\n  Card,\n} from \"tabler-react\";\n// import ContentCard from \"../../general/ContentCard\"\nimport { GET_CLASSPASSES_SOLD_QUERY, GET_CLASSPASSES_ACTIVE_QUERY } from './queries'\nimport { TOKEN_REFRESH } from \"../../../queries/system/auth\"\nimport InsightClasspassesBase from './InsightClasspassesBase'\n\nfunction InsightClasspasses ({ t, history }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  const year = localStorage.getItem(CSLS.INSIGHT_CLASSPASSES_YEAR)\n  const export_url_active = \"/d/export/insight/classpasses/active/\" + year\n  const export_url_sold = \"/d/export/insight/classpasses/sold/\" + year\n\n  const [doTokenRefresh] = useMutation(TOKEN_REFRESH)\n\n  const { \n    loading: loadingSold, \n    error: errorSold, \n    data: dataSold,\n    refetch: refetchSold\n   } = useQuery(GET_CLASSPASSES_SOLD_QUERY, {\n    variables: { year: year }\n  })\n\n  const { \n    loading: loadingActive, \n    error: errorActive, \n    data: dataActive,\n    refetch: refetchActive\n   } = useQuery(GET_CLASSPASSES_ACTIVE_QUERY, {\n    variables: { year: year }\n  })\n\n\n  if (loadingSold || loadingActive) {\n    return (\n      <InsightClasspassesBase year={year}>\n        {t(\"general.loading_with_dots\")}\n      </InsightClasspassesBase>\n    )\n  }\n\n  if (errorSold || errorActive) {\n    return (\n      <InsightClasspassesBase year={year}>\n        {t(\"general.error_sad_smiley\")}\n      </InsightClasspassesBase>\n    )\n  }\n\n  function refetchData(year) {\n    refetchActive({year: year})\n    refetchSold({year: year})\n  }\n\n  console.log(dataSold)\n  console.log(dataActive)\n\n  const data_sold_label = t(\"insight.classpasses.sold.title\")\n  const chart_data_sold = dataSold.insightAccountClasspassesSold.data\n  console.log(\"chart_data sold\")\n  console.log(data_sold_label, ...chart_data_sold)\n\n  const data_active_label = t(\"insight.classpasses.active.title\")\n  const chart_data_active = dataActive.insightAccountClasspassesActive.data\n  console.log(\"chart_data active\")\n  console.log(data_sold_label, ...chart_data_active)\n\n\n  return (\n    <InsightClasspassesBase year={year} refetchData={refetchData}>\n      {/* <Grid.Row> */}\n        <Grid.Col md={9}>\n          <Card title={t('general.chart')}>\n            <Card.Body>\n              <C3Chart\n                style={{ height: \"16rem\" }}\n                data={{\n                  x: 'x',\n                  columns: [\n                    // each columns data as array, starting with \"name\" and then containing data\n                    [ 'x',\n                      t(\"datetime.months.short_january\"),\n                      t(\"datetime.months.short_february\"),\n                      t(\"datetime.months.short_march\"),\n                      t(\"datetime.months.short_april\"),\n                      t(\"datetime.months.short_may\"),\n                      t(\"datetime.months.short_june\"),\n                      t(\"datetime.months.short_july\"),\n                      t(\"datetime.months.short_august\"),\n                      t(\"datetime.months.short_september\"),\n                      t(\"datetime.months.short_october\"),\n                      t(\"datetime.months.short_november\"),\n                      t(\"datetime.months.short_decemer\"),\n                    ],\n                    [ 'sold', ...chart_data_sold],\n                    [ 'active', ...chart_data_active],\n                  ],\n                  type: \"area\", // default type of chart\n                  groups: [['sold'], ['active']],\n                  colors: {\n                    sold: colors[\"blue\"],\n                    active: colors[\"green\"],\n                  },\n                  names: {\n                    // name of each serie\n                    sold: data_sold_label,\n                    active: data_active_label,\n                  },\n                  \n                }}\n                axis={{\n                  y: {\n                    padding: {\n                      bottom: 0,\n                    },\n                    show: true,\n                  },\n                  x: {\n                    padding: {\n                      left: 0,\n                      right: 0,\n                    },\n                    type: 'category',\n                    show: true,\n                  },\n                }}\n                tooltip={{\n                  format: {\n                    title: function(x) {\n                      return \"\";\n                    },\n                  },\n                }}\n                padding={{\n                  bottom: 0,\n                  // left: -1,\n                  right: -1,\n                }}\n                point={{\n                  show: false,\n                }}\n              />\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={3}>\n          {/* Export as sold as excel sheet */}\n          <Button\n            block\n            color=\"secondary\"\n            RootComponent=\"a\"\n            icon=\"download-cloud\"\n            onClick={() => refreshTokenAndOpenExportLinkInNewTab(\n              doTokenRefresh, history, export_url_sold\n            )}\n          >\n            {t(\"insight.classpasses.sold.export_excel\")}\n          </Button>\n          {/* Export as active as excel sheet */}\n          <Button\n            block\n            color=\"secondary\"\n            RootComponent=\"a\"\n            icon=\"download-cloud\"\n            onClick={() => refreshTokenAndOpenExportLinkInNewTab(\n              doTokenRefresh, history, export_url_active\n            )}\n          >\n            {t(\"insight.classpasses.active.export_excel\")}\n          </Button>\n        </Grid.Col>\n      {/* </Grid.Row> */}\n    </InsightClasspassesBase>\n  //   <SiteWrapper>\n  //     <div className=\"my-3 my-md-5\">\n  //       <Container>\n  //         <Page.Header title={t(\"insight.title\")} subTitle={t(\"general.classpasses\") + \" \" + year}>\n  //           <div className=\"page-options d-flex\">\n  //             <InsightBackHome />\n  //           </div>\n  //         </Page.Header>\n\n  //       </Container>  \n  //     </div>\n  //   </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(InsightClasspasses))","import { gql } from \"@apollo/client\"\n\n\nexport const GET_SUBSCRIPTIONS_SOLD_QUERY = gql`\n  query InsightAccountSubscriptionsSold($year: Int!) {\n    insightAccountSubscriptionsSold(year: $year) {\n      description\n      data\n      year\n    }\n  }\n`\n\n\nexport const GET_SUBSCRIPTIONS_ACTIVE_QUERY = gql`\n  query InsightAccountSubscriptionsActive($year: Int!) {\n    insightAccountSubscriptionsActive(year: $year) {\n      description\n      data\n      year\n    }\n  }\n`","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport moment from 'moment'\n\nimport {\n  Button,\n  Page,\n  Grid,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport InsightBackHome from '../InsightBackHome'\n\nimport CSLS from \"../../../tools/cs_local_storage\"\n\n// Set some initial values for dates, if not found\nif (!localStorage.getItem(CSLS.INSIGHT_SUBSCRIPTIONS_YEAR)) {\n  console.log('year from not found... defaulting to today...')\n  localStorage.setItem(CSLS.INSIGHT_SUBSCRIPTIONS_YEAR, moment().format('YYYY')) \n} \n\nfunction InsightSubscriptionsBase ({ t, history, children, year, refetchData=f=>f}) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"insight.title\")} subTitle={t(\"general.subscriptions\") + \" \" + year}>\n            <div className=\"page-options d-flex\">\n              <InsightBackHome />\n              <Button.List className=\"schedule-list-page-options-btn-list\">\n                <Button \n                  icon=\"chevron-left\"\n                  color=\"secondary\"\n                  onClick={ () => {\n                    let previousYear = parseInt(localStorage.getItem(CSLS.INSIGHT_SUBSCRIPTIONS_YEAR)) - 1                    \n                    localStorage.setItem(CSLS.INSIGHT_SUBSCRIPTIONS_YEAR, previousYear) \n\n                    refetchData(previousYear)\n                }} />\n                <Button \n                  icon=\"sunset\"\n                  color=\"secondary\"\n                  onClick={ () => {\n                    let currentYear = moment().format('YYYY')\n                    localStorage.setItem(CSLS.INSIGHT_SUBSCRIPTIONS_YEAR, currentYear) \n                    \n                    refetchData(currentYear)\n                }} />\n                <Button \n                  icon=\"chevron-right\"\n                  color=\"secondary\"\n                  onClick={ () => {\n                    let nextYear = parseInt(localStorage.getItem(CSLS.INSIGHT_SUBSCRIPTIONS_YEAR)) + 1                    \n                    localStorage.setItem(CSLS.INSIGHT_SUBSCRIPTIONS_YEAR, nextYear) \n\n                    refetchData(nextYear)\n                }} />\n              </Button.List> \n            </div>\n          </Page.Header>\n          <Grid.Row>\n            {children}\n          </Grid.Row>\n        </Container>  \n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(InsightSubscriptionsBase))","import React, { useContext } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport C3Chart from \"react-c3js\"\n\nimport AppSettingsContext from '../../context/AppSettingsContext'\nimport CSLS from \"../../../tools/cs_local_storage\"\nimport { refreshTokenAndOpenExportLinkInNewTab } from \"../../../tools/refresh_token_and_open_export_link\"\n\nimport {\n  colors,\n  Grid,\n  Button,\n  Card,\n} from \"tabler-react\";\n// import ContentCard from \"../../general/ContentCard\"\nimport { GET_SUBSCRIPTIONS_SOLD_QUERY, GET_SUBSCRIPTIONS_ACTIVE_QUERY } from './queries'\nimport { TOKEN_REFRESH } from \"../../../queries/system/auth\"\nimport InsightSubscriptionsBase from './InsightSubscriptionsBase'\n\nfunction InsightSubscriptions ({ t, history }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  const year = localStorage.getItem(CSLS.INSIGHT_SUBSCRIPTIONS_YEAR)\n  const export_url_active = \"/d/export/insight/subscriptions/active/\" + year\n  const export_url_sold = \"/d/export/insight/subscriptions/sold/\" + year\n\n  const [doTokenRefresh] = useMutation(TOKEN_REFRESH)\n\n  const { \n    loading: loadingSold, \n    error: errorSold, \n    data: dataSold,\n    refetch: refetchSold\n   } = useQuery(GET_SUBSCRIPTIONS_SOLD_QUERY, {\n    variables: { year: 2020 }\n  })\n\n  const { \n    loading: loadingActive, \n    error: errorActive, \n    data: dataActive,\n    refetch: refetchActive\n   } = useQuery(GET_SUBSCRIPTIONS_ACTIVE_QUERY, {\n    variables: { year: 2020 }\n  })\n\n\n  if (loadingSold || loadingActive) {\n    return (\n      <InsightSubscriptionsBase year={year}>\n        {t(\"general.loading_with_dots\")}\n      </InsightSubscriptionsBase>\n    )\n  }\n\n  if (errorSold || errorActive) {\n    return (\n      <InsightSubscriptionsBase year={year}>\n        {t(\"general.error_sad_smiley\")}\n      </InsightSubscriptionsBase>\n    )\n  }\n\n\n  function refetchData(year) {\n    refetchActive({year: year})\n    refetchSold({year: year})\n  }\n\n  console.log(dataSold)\n  console.log(dataActive)\n\n  const data_sold_label = t(\"insight.subscriptions.sold.title\")\n  const chart_data_sold = dataSold.insightAccountSubscriptionsSold.data\n  console.log(\"chart_data sold\")\n  console.log(data_sold_label, ...chart_data_sold)\n\n  const data_active_label = t(\"insight.subscriptions.active.title\")\n  const chart_data_active = dataActive.insightAccountSubscriptionsActive.data\n  console.log(\"chart_data active\")\n  console.log(data_sold_label, ...chart_data_active)\n\n\n  return (\n    <InsightSubscriptionsBase year={year} refetchData={refetchData}>\n      {/* <Grid.Row> */}\n        <Grid.Col md={9}>\n          <Card title={t('general.chart')}>\n            <Card.Body>\n              <C3Chart\n                style={{ height: \"16rem\" }}\n                data={{\n                  x: 'x',\n                  columns: [\n                    // each columns data as array, starting with \"name\" and then containing data\n                    [ 'x',\n                      t(\"datetime.months.short_january\"),\n                      t(\"datetime.months.short_february\"),\n                      t(\"datetime.months.short_march\"),\n                      t(\"datetime.months.short_april\"),\n                      t(\"datetime.months.short_may\"),\n                      t(\"datetime.months.short_june\"),\n                      t(\"datetime.months.short_july\"),\n                      t(\"datetime.months.short_august\"),\n                      t(\"datetime.months.short_september\"),\n                      t(\"datetime.months.short_october\"),\n                      t(\"datetime.months.short_november\"),\n                      t(\"datetime.months.short_decemer\"),\n                    ],\n                    [ 'sold', ...chart_data_sold],\n                    [ 'active', ...chart_data_active],\n                  ],\n                  type: \"area\", // default type of chart\n                  groups: [['sold'], ['active']],\n                  colors: {\n                    sold: colors[\"blue\"],\n                    active: colors[\"green\"],\n                  },\n                  names: {\n                    // name of each serie\n                    sold: data_sold_label,\n                    active: data_active_label,\n                  },\n                  \n                }}\n                axis={{\n                  y: {\n                    padding: {\n                      bottom: 0,\n                    },\n                    show: true,\n                  },\n                  x: {\n                    padding: {\n                      left: 0,\n                      right: 0,\n                    },\n                    type: 'category',\n                    show: true,\n                  },\n                }}\n                tooltip={{\n                  format: {\n                    title: function(x) {\n                      return \"\";\n                    },\n                  },\n                }}\n                padding={{\n                  bottom: 0,\n                  // left: -1,\n                  right: -1,\n                }}\n                point={{\n                  show: false,\n                }}\n              />\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={3}>\n          {/* Export as sold as excel sheet */}\n          <Button\n            block\n            color=\"secondary\"\n            RootComponent=\"a\"\n            icon=\"download-cloud\"\n            onClick={() => refreshTokenAndOpenExportLinkInNewTab(\n              doTokenRefresh, history, export_url_sold\n            )}\n          >\n            {t(\"insight.subscriptions.sold.export_excel\")}\n          </Button>\n          {/* Export as active as excel sheet */}\n          <Button\n            block\n            color=\"secondary\"\n            RootComponent=\"a\"\n            href={export_url_active}\n            icon=\"download-cloud\"\n            onClick={() => refreshTokenAndOpenExportLinkInNewTab(\n              doTokenRefresh, history, export_url_active\n            )}\n          >\n            {t(\"insight.subscriptions.active.export_excel\")}\n          </Button>\n        </Grid.Col>\n      {/* </Grid.Row> */}\n    </InsightSubscriptionsBase>\n  //   <SiteWrapper>\n  //     <div className=\"my-3 my-md-5\">\n  //       <Container>\n  //         <Page.Header title={t(\"insight.title\")} subTitle={t(\"general.classpasses\") + \" \" + year}>\n  //           <div className=\"page-options d-flex\">\n  //             <InsightBackHome />\n  //           </div>\n  //         </Page.Header>\n\n  //       </Container>  \n  //     </div>\n  //   </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(InsightSubscriptions))","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\n\nimport {\n  List\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../HasPermissionWrapper\"\n\n\nlet classpasses_active\nlet classtypes_active\nlet discoveries_active\nlet languages_active\nlet locations_active\nlet levels_active\nlet memberships_active\nlet subscriptions_active\nlet appointments_active\nlet organization_active\nlet organization_branding_active\nlet announcements_active\n\nconst OrganizationMenu = ({ t, activeLink }) => (\n    <List.Group transparent={true}>\n        {(activeLink === 'classpasses') ? classpasses_active = true: classpasses_active = false}\n        {(activeLink === 'classtypes') ? classtypes_active = true: classtypes_active = false}\n        {(activeLink === 'discoveries') ? discoveries_active = true: discoveries_active = false}\n        {(activeLink === 'languages') ? languages_active = true: languages_active = false}\n        {(activeLink === 'locations') ? locations_active = true: locations_active = false}\n        {(activeLink === 'levels') ? levels_active = true: levels_active = false}\n        {(activeLink === 'memberships') ? memberships_active = true: memberships_active = false}\n        {(activeLink === 'subscriptions') ? subscriptions_active = true: subscriptions_active = false}\n        {(activeLink === 'appointments') ? appointments_active = true: appointments_active = false}\n        {(activeLink === 'organization') ? organization_active = true: organization_active = false}\n        {(activeLink === 'organization_branding') ? organization_branding_active = true: organization_branding_active = false}\n        {(activeLink === 'announcements') ? announcements_active = true: announcements_active = false}\n        \n\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/organization/edit/T3JnYW5pemF0aW9uTm9kZToxMDA=\"\n            icon=\"layout\"\n            active={organization_active}\n            >\n            {t('organization.organization.title')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/organization/locations\"\n            icon=\"home\"\n            active={locations_active}\n            >\n            {t('organization.locations.title')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/organization/classtypes\"\n            icon=\"book-open\"\n            active={classtypes_active}\n            >\n            {t('organization.classtypes.title')}\n        </List.GroupItem>\n        {/* <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/organization/memberships\"\n            icon=\"clipboard\"\n            active={memberships_active}\n            >\n            {t('organization.memberships.title')}\n        </List.GroupItem> */}\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/organization/classpasses\"\n            icon=\"credit-card\"\n            active={classpasses_active}\n            >\n            {t('organization.classpasses.title')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/organization/subscriptions\"\n            icon=\"edit\"\n            active={subscriptions_active}\n            >\n            {t('organization.subscriptions.title')}\n        </List.GroupItem>\n        {/* <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/organization/appointment_categories\"\n            icon=\"calendar\"\n            active={appointments_active}\n            >\n            {t('organization.appointments.title')}\n        </List.GroupItem> */}\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/organization/levels\"\n            icon=\"tag\"\n            active={levels_active}\n            >\n            {t('organization.levels.title')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/organization/discoveries\"\n            icon=\"compass\"\n            active={discoveries_active}\n            >\n            {t('organization.discoveries.title')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/organization/langauges\"\n            icon=\"flag\"\n            active={languages_active}\n            >\n            {t('organization.languages.title')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/organization/edit/T3JnYW5pemF0aW9uTm9kZToxMDA=/branding\"\n            icon=\"image\"\n            active={organization_branding_active}\n            >\n            {t('organization.organization.branding.title')}\n        </List.GroupItem>\n        <HasPermissionWrapper permission=\"view\"\n                              resource=\"organizationannouncement\">\n            <List.GroupItem\n                key={v4()}\n                className=\"d-flex align-items-center\"\n                to=\"#/organization/announcements\"\n                icon=\"message-square\"\n                active={announcements_active}\n                >\n                {t('organization.announcements.title')}\n            </List.GroupItem>\n        </HasPermissionWrapper>\n    </List.Group>\n);\n\nexport default withTranslation()(OrganizationMenu)","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Page,\n  Grid,\n  Container,\n  StampCard\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nclass OrganizationHome extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"School home props:\")\n    console.log(props)\n  }\n\n\n  render() {\n    const t = this.props.t\n    const match = this.props.match\n    const history = this.props.history\n    const id = match.params.id\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title={t(\"organization.title\")} />\n            <Grid.Row>\n              <Grid.Col md={9}>\n                <Grid.Row>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/organization/edit/T3JnYW5pemF0aW9uTm9kZToxMDA='>\n                      <StampCard header={<small>{t('organization.organization.title')}</small>} footer={t('')} color=\"blue\" icon=\"layout\" />\n                    </Link>\n                  </Grid.Col>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/organization/locations'>\n                      <StampCard header={<small>{t('organization.locations.title')}</small>} footer={t('')} color=\"blue\" icon=\"home\" />\n                    </Link>\n                  </Grid.Col>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/organization/classtypes'>\n                      <StampCard header={<small>{t('organization.classtypes.title')}</small>} footer={t('')} color=\"blue\" icon=\"book-open\" />\n                    </Link>\n                  </Grid.Col>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/organization/classpasses'>\n                      <StampCard header={<small>{t('organization.classpasses.title')}</small>} footer={t('')} color=\"blue\" icon=\"credit-card\" />\n                    </Link>\n                  </Grid.Col>\n                  {/* <Grid.Col md={4} lg={4}>\n                    <Link to='/organization/memberships'>\n                      <StampCard header={<small>{t('organization.memberships.title')}</small>} footer={t('')} color=\"blue\" icon=\"clipboard\" />\n                    </Link>\n                  </Grid.Col> */}\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/organization/subscriptions'>\n                      <StampCard header={<small>{t('organization.subscriptions.title')}</small>} footer={t('')} color=\"blue\" icon=\"edit\" />\n                    </Link>\n                  </Grid.Col>\n                  {/* <Grid.Col md={4} lg={4}>\n                    <Link to='/organization/appointment_categories'>\n                      <StampCard header={<small>{t('organization.appointments.title')}</small>} footer={t('')} color=\"blue\" icon=\"calendar\" />\n                    </Link>\n                  </Grid.Col> */}\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/organization/levels'>\n                      <StampCard header={<small>{t('organization.levels.title')}</small>} footer={t('')} color=\"blue\" icon=\"tag\" />\n                    </Link>\n                  </Grid.Col>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/organization/discoveries'>\n                      <StampCard header={<small>{t('organization.discoveries.title')}</small>} footer={t('')} color=\"blue\" icon=\"compass\" />\n                    </Link>\n                  </Grid.Col>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/organization/languages'>\n                      <StampCard header={<small>{t('organization.languages.title')}</small>} footer={t('')} color=\"blue\" icon=\"flag\" />\n                    </Link>\n                  </Grid.Col>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/organization/edit/T3JnYW5pemF0aW9uTm9kZToxMDA=/branding'>\n                      <StampCard header={<small>{t('organization.organization.branding.title')}</small>} footer={t('')} color=\"blue\" icon=\"image\" />\n                    </Link>\n                  </Grid.Col>\n                  <HasPermissionWrapper permission=\"view\"\n                                        resource=\"organizationannouncement\">\n                    <Grid.Col md={4} lg={4}>\n                      <Link to='/organization/announcements'>\n                        <StampCard header={<small>{t('organization.announcements.title')}</small>} footer={t('')} color=\"blue\" icon=\"message-square\" />\n                      </Link>\n                    </Grid.Col>\n                  </HasPermissionWrapper>\n                </Grid.Row>\n              </Grid.Col>\n              <Grid.Col md={3}>\n                <OrganizationMenu />\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n    </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(OrganizationHome))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const ORGANIZATION_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .required(t('yup.field_required')),\n    address: Yup.string(),\n    phone: Yup.string(),\n    email: Yup.string()\n      .email(t('yup.email')),\n    registration: Yup.string(),\n    taxRegistration: Yup.string(),\n  })\n","export const customFileInputLabelStyle = {\n    whiteSpace: \"nowrap\",\n    display: \"block\",\n    overflow: \"hidden\"\n  }  \n  ","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n    Button,\n    Card,\n    Form,\n    Grid\n  } from \"tabler-react\"\n  import { Form as FoForm, Field, ErrorMessage } from 'formik'\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../plugin_config/tinymce\"\nimport { customFileInputLabelStyle } from \"../../../tools/custom_file_input_label_style\"\n\n\nconst OrganizationForm = ({ \n  t, \n  history, \n  isSubmitting, \n  errors, \n  values, \n  setFieldTouched, \n  setFieldValue,\n}) => (\n    <FoForm>\n      <Card.Body>\n        <Form.Group label={t('general.name')}>\n          <Field type=\"text\" \n                  name=\"name\" \n                  className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\" />\n          <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group>\n        <Form.Group label={t('general.address')}>\n          <Editor\n              textareaName=\"address\"\n              initialValue={values.address}\n              init={tinymceBasicConf}\n              onChange={(e) => setFieldValue(\"address\", e.target.getContent())}\n              onBlur={() => setFieldTouched(\"address\", true)}\n            />\n          <ErrorMessage name=\"address\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.phone')}>\n              <Field type=\"text\" \n                      name=\"phone\" \n                      className={(errors.phone) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"phone\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.email')}>\n              <Field type=\"text\" \n                      name=\"email\" \n                      className={(errors.email) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"email\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('organization.organization.registration')}>\n              <Field type=\"text\" \n                      name=\"registration\" \n                      className={(errors.registration) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"registration\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('organization.organization.tax_registration')}>\n              <Field type=\"text\" \n                      name=\"taxRegistration\" \n                      className={(errors.taxRegistration) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"taxRegistration\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n          color=\"primary\"\n          // className=\"pull-right\" \n          type=\"submit\" \n          disabled={isSubmitting}\n          >\n          {t('general.submit')}\n          </Button>\n      </Card.Footer>\n    </FoForm>\n)\n  \n  \n  export default withTranslation()(withRouter(OrganizationForm))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\n\nimport {\n  Page,\n  Grid,\n  Button,\n  Card,\n  Container\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nfunction OrganizationEditBase({t, match, history, children}) {\n  const id = match.params.id\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('organization.title')}>\n            <div className=\"page-options d-flex\">\n              <Link to={`/organization/documents/${id}`}>\n                <Button \n                  icon=\"briefcase\"\n                  className=\"mr-2\"\n                  color=\"secondary\"\n                >\n                  {t('general.documents')}\n                </Button>\n              </Link>\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n            <Card>\n              <Card.Header>\n                <Card.Title>{t('organization.organization.title_edit')}</Card.Title>\n              </Card.Header>\n              {children}\n            </Card>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <h5>{t(\"general.menu\")}</h5>\n              <OrganizationMenu activeLink='organization'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationEditBase))","// @flow\n\nimport React, { useState, useRef } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ORGANIZATION_QUERY } from './queries'\nimport { ORGANIZATION_SCHEMA } from './yupSchema'\nimport OrganizationForm from './OrganizationForm'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationEditBase from \"./OrganizationEditBase\"\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nconst UPDATE_ORGANIZATION = gql`\n  mutation UpdateOrganization($input: UpdateOrganizationInput!) {\n    updateOrganization(input: $input) {\n      organization {\n        id\n        name\n      }\n    }\n  }\n`\n\n\nfunction OrganizationEdit({t, match, history}) {\n  const id = match.params.id\n\n  const [updateOrganization] = useMutation(UPDATE_ORGANIZATION)\n  const { loading, error, data, fetchMore } = useQuery(GET_ORGANIZATION_QUERY, {\n    variables: {\n      id: id\n  }})\n\n  if (loading) return (\n    <OrganizationEditBase>\n      {t(\"general.loading_with_dots\")}\n    </OrganizationEditBase>\n  )\n  if (error) return (\n    <OrganizationEditBase>\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </OrganizationEditBase>\n  )\n\n  const initialData = data.organization\n\n  return (\n \n    <OrganizationEditBase>\n      <Formik\n        initialValues={{ \n          name: initialData.name, \n          address: initialData.address,\n          phone: initialData.phone,\n          email: initialData.email,\n          registration: initialData.registration,\n          taxRegistration: initialData.taxRegistration,\n        }}\n        validationSchema={ORGANIZATION_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log('submit values:')\n          console.log(values)\n\n          updateOrganization({ variables: {\n            input: {\n              id: match.params.id,\n              name: values.name,\n              address: values.address,\n              phone: values.phone,\n              email: values.email,\n              registration: values.registration,\n              taxRegistration: values.taxRegistration,\n            }\n          }})\n          .then(({ data }) => {\n              console.log('got data', data)\n              toast.success((t('organization.organization.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              setSubmitting(false)\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n          }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <OrganizationForm \n            isSubmitting={isSubmitting}\n            values={values}\n            errors={errors}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n          />\n        )}\n      </Formik>\n    </OrganizationEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationEdit))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\n\nimport {\n  Page,\n  Grid,\n  Button,\n  Card,\n  Container\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../../OrganizationMenu\"\n\n\nfunction OrganizationBrandingBase({t, match, history, children}) {\n  const id = match.params.id\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('organization.title')} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n              <h3>{t('organization.organization.branding.title')}</h3>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <h5>{t(\"general.menu\")}</h5>\n              <OrganizationMenu activeLink='organization_branding'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationBrandingBase))","// @flow\n\nimport React, { useState, useRef } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ORGANIZATION_QUERY } from '../queries'\n\nimport {\n  Button,\n  GalleryCard,\n  Grid,\n  Icon\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport OrganizationBrandingBase from \"./OrganizationBrandingBase\"\n\n\nconst UPDATE_ORGANIZATION = gql`\n  mutation UpdateOrganization($input: UpdateOrganizationInput!) {\n    updateOrganization(input: $input) {\n      organization {\n        id\n        name\n      }\n    }\n  }\n`\n\n\nfunction OrganizationBranding({t, match, history}) {\n  const id = match.params.id\n\n  const [updateOrganization] = useMutation(UPDATE_ORGANIZATION)\n  const { loading, error, data, fetchMore } = useQuery(GET_ORGANIZATION_QUERY, {\n    variables: {\n      id: id\n  }})\n\n  if (loading) return (\n    <OrganizationBrandingBase>\n      {t(\"general.loading_with_dots\")}\n    </OrganizationBrandingBase>\n  )\n  if (error) return (\n    <OrganizationBrandingBase>\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </OrganizationBrandingBase>\n  )\n\n  const organization = data.organization\n\n  return (\n \n    <OrganizationBrandingBase>\n        <Grid.Row>\n          <Grid.Col md={4}>\n            <GalleryCard>\n              <h5>{t('organization.branding.logo_login')}</h5>\n              <GalleryCard.Image\n                src={organization.urlLogoLogin}\n              >\n              </GalleryCard.Image>\n              <GalleryCard.Details>\n                <Link to={`/organization/edit/${id}/branding/logoLogin`}>\n                  <Button block color=\"secondary\">\n                    {t(\"organization.branding.link_change\")} <Icon name=\"chevron-right\" />\n                  </Button>\n                </Link>\n              </GalleryCard.Details>\n            </GalleryCard>\n          </Grid.Col>\n          <Grid.Col md={4}>\n            <GalleryCard>\n              <h5>{t('organization.branding.logo_invoice')}</h5>\n              <GalleryCard.Image\n                src={organization.urlLogoInvoice}\n              >\n              </GalleryCard.Image>\n              <GalleryCard.Details>\n                <Link to={`/organization/edit/${id}/branding/logoInvoice`}>\n                  <Button block color=\"secondary\">\n                    {t(\"organization.branding.link_change\")} <Icon name=\"chevron-right\" />\n                  </Button>\n                </Link>\n              </GalleryCard.Details>\n            </GalleryCard>\n          </Grid.Col>\n          <Grid.Col md={4}>\n            <GalleryCard>\n              <h5>{t('organization.branding.logo_email')}</h5>\n              <GalleryCard.Image\n                src={organization.urlLogoEmail}\n              >\n              </GalleryCard.Image>\n              <GalleryCard.Details>\n                <Link to={`/organization/edit/${id}/branding/logoEmail`}>\n                  <Button block color=\"secondary\">\n                    {t(\"organization.branding.link_change\")} <Icon name=\"chevron-right\" />\n                  </Button>\n                </Link>\n              </GalleryCard.Details>\n            </GalleryCard>\n          </Grid.Col>\n          <Grid.Col md={4}>\n            <GalleryCard>\n              <h5>{t('organization.branding.logo_shop_header')}</h5>\n              <GalleryCard.Image\n                src={organization.urlLogoShopHeader}\n              >\n              </GalleryCard.Image>\n              <GalleryCard.Details>\n                <Link to={`/organization/edit/${id}/branding/logoShopHeader`}>\n                  <Button block color=\"secondary\">\n                    {t(\"organization.branding.link_change\")} <Icon name=\"chevron-right\" />\n                  </Button>\n                </Link>\n              </GalleryCard.Details>\n            </GalleryCard>\n          </Grid.Col>\n          <Grid.Col md={4}>\n            <GalleryCard>\n              <h5>{t('organization.branding.logo_self_checkin')}</h5>\n              <GalleryCard.Image\n                src={organization.urlLogoSelfCheckin}\n              >\n              </GalleryCard.Image>\n              <GalleryCard.Details>\n                <Link to={`/organization/edit/${id}/branding/logoSelfCheckin`}>\n                  <Button block color=\"secondary\">\n                    {t(\"organization.branding.link_change\")} <Icon name=\"chevron-right\" />\n                  </Button>\n                </Link>\n              </GalleryCard.Details>\n            </GalleryCard>\n          </Grid.Col>\n        </Grid.Row>\n    </OrganizationBrandingBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationBranding))","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n    Button,\n    Card,\n    Form,\n    Grid\n  } from \"tabler-react\"\n  import { Form as FoForm, Field, ErrorMessage } from 'formik'\n\nimport { customFileInputLabelStyle } from \"../../../../tools/custom_file_input_label_style\"\n\n\nconst OrganizationBrandingEditForm = ({ \n  t, \n  history, \n  formTitle,\n  isSubmitting, \n  inputFileName, \n  fileInputLabel, \n  handleFileInputChange=f=>f\n}) => (\n    <FoForm>\n      <Card title={formTitle}>\n        <Card.Body>\n          <Grid.Row>\n            <Grid.Col>\n              <Form.Group label={t('general.custom_file_input_label')}>\n                <div className=\"custom-file\">\n                  <input type=\"file\" ref={inputFileName} className=\"custom-file-input\" onChange={handleFileInputChange} />\n                  <label className=\"custom-file-label\" style={customFileInputLabelStyle}>\n                    {fileInputLabel}\n                  </label>\n                </div>\n              </Form.Group>\n            </Grid.Col>\n          </Grid.Row>\n        </Card.Body>\n        <Card.Footer>\n            <Button \n            color=\"primary\"\n            // className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n            >\n            {t('general.submit')}\n            </Button>\n        </Card.Footer>\n      </Card>\n    </FoForm>\n)\n  \n  \n  export default withTranslation()(withRouter(OrganizationBrandingEditForm))","// @flow\n\nimport React, { useState, useRef } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ORGANIZATION_QUERY } from '../queries'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container\n} from \"tabler-react\";\n\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport OrganizationBrandingBase from \"./OrganizationBrandingBase\"\nimport OrganizationBrandingEditForm from \"./OrganizationBrandingEditForm\"\nimport { updateLocale } from 'moment'\n\n\nconst UPDATE_ORGANIZATION = gql`\n  mutation UpdateOrganization($input: UpdateOrganizationInput!) {\n    updateOrganization(input: $input) {\n      organization {\n        id\n      }\n    }\n  }\n`\n\n\nfunction OrganizationBrandingEdit({t, match, history}) {\n  const id = match.params.id\n  const updateField = match.params.update_field\n  const returnUrl = `/organization/edit/${id}/branding`\n\n  let formTitle = \"\"\n  switch (updateField) {\n    case \"logoLogin\":\n      formTitle = t(\"organization.branding.logo_login\")\n      break\n    default:\n      break\n  }\n\n\n  const [updateOrganization] = useMutation(UPDATE_ORGANIZATION)\n\n  // Vars for document file input field start\n  const [fileName, setFileName] = useState(\"\")\n  const inputFileName = useRef(null)\n  const fileInputLabel = fileName || t(\"general.custom_file_input_inner_label\")\n\n  const handleFileInputChange = (event) => {\n    console.log('on change triggered')\n    setFileName(event.target.files[0].name)\n  }\n\n  return (\n \n    <OrganizationBrandingBase>\n      <Formik\n        initialValues={{}}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"Submit values\")\n          console.log(values)\n          console.log(fileName)\n\n          let inputVars = {\n            id: id\n          }\n\n          let reader = new FileReader()\n          reader.onload = function(reader_event) {\n            console.log(reader_event.target.result)\n            let b64_enc_file = reader_event.target.result\n            console.log(b64_enc_file)\n            // Add uploaded document b64 encoded blob to input vars\n            switch(updateField) {\n              case \"logoLogin\":\n                inputVars.logoLoginFileName = fileName\n                inputVars.logoLogin = b64_enc_file\n                break\n              case \"logoInvoice\":\n                inputVars.logoInvoiceFileName = fileName\n                inputVars.logoInvoice = b64_enc_file\n                break\n              case \"logoEmail\":\n                inputVars.logoEmailFileName = fileName\n                inputVars.logoEmail = b64_enc_file\n                break\n              case \"logoShopHeader\":\n                inputVars.logoShopHeaderFileName = fileName\n                inputVars.logoShopHeader = b64_enc_file\n                break\n              case \"logoSelfCheckin\":\n                inputVars.logoSelfCheckinFileName = fileName\n                inputVars.logoSelfCheckin = b64_enc_file\n                break\n              default:\n                break              \n            }\n            \n            updateOrganization({ variables: {\n              input: inputVars\n            }, refetchQueries: [\n                {query: GET_ORGANIZATION_QUERY, variables: {id: id}}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data);\n                setSubmitting(false)\n                history.push(returnUrl)\n                toast.success((t('organization.branding.toast_edit_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                })\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n          }\n          \n          let file = inputFileName.current.files[0]\n          if (file && file.size < 5242880) {\n            reader.readAsDataURL(file)\n          } else if (file && file.size > 5242880) { \n            toast.error(t(\"error_messages.selected_file_exceeds_max_filesize\"), {\n              position: toast.POSITION.BOTTOM_RIGHT\n            })\n            setSubmitting(false)\n          } else {\n            toast.error(t(\"general.please_select_a_file\"), {\n              position: toast.POSITION.BOTTOM_RIGHT\n            })\n            setSubmitting(false)\n          }\n        }}\n      >\n        {({ isSubmitting }) => (\n          <OrganizationBrandingEditForm \n            isSubmitting={isSubmitting}\n            formTitle={formTitle}\n            inputFileName={inputFileName}\n            fileInputLabel={fileInputLabel}\n            handleFileInputChange={handleFileInputChange}\n          />\n        )}\n      </Formik>\n    </OrganizationBrandingBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationBrandingEdit))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nfunction OrganizationAnnouncementsBase({t, history, children, showEditBack=false}) {\n  return (\n    <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Container>\n        <Page.Header title={t(\"organization.title\")} />\n        <Grid.Row>\n          <Grid.Col md={9}>\n            {children}\n          </Grid.Col>\n          <Grid.Col md={3}>\n            {(showEditBack) ?\n              <Link to=\"/organization/announcements\">\n                <Button color=\"primary btn-block mb-6\">\n                  <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                </Button>\n              </Link>\n            :\n              <HasPermissionWrapper permission=\"add\"\n                          resource=\"organizationlevel\">\n                <Link to=\"/organization/announcements/add\">\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.announcements.add')}\n                  </Button>\n                </Link>\n                </HasPermissionWrapper>\n            }\n            <OrganizationMenu activeLink='announcements'/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n    </div>\n  </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationAnnouncementsBase))\n","import { gql } from \"@apollo/client\"\n\nexport const GET_ANNOUNCEMENTS_QUERY = gql`\n  query OrganizationAnnouncements($after: String, $before: String) {\n    organizationAnnouncements(first: 15, before: $before, after: $after) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          displayPublic\n          displayShop\n          displayBackend\n          title\n          content\n          dateStart\n          dateEnd\n          priority\n        }\n      }\n    }\n  }\n`\n\nexport const GET_ANNOUNCEMENT_QUERY = gql`\n  query OrganizationAnnouncement($id: ID!) {\n    organizationAnnouncement(id:$id) {\n      id\n      displayPublic\n      displayShop\n      displayBackend\n      title\n      content\n      dateStart\n      dateEnd\n      priority\n    }\n  }\n`\n\nexport const ADD_ANNOUNCEMENT = gql`\n  mutation CreateOrganizationAnnouncement($input:CreateOrganizationAnnouncementInput!) {\n    createOrganizationAnnouncement(input: $input) {\n      organizationAnnouncement {\n        id\n      }\n    }\n  }\n`\n\nexport const UPDATE_ANNOUNCEMENT = gql`\n  mutation UpdateOrganizationAnnouncement($input: UpdateOrganizationAnnouncementInput!) {\n    updateOrganizationAnnouncement(input: $input) {\n      organizationAnnouncement {\n        id\n      }\n    }\n  }\n`\n\nexport const DELETE_ANNOUNCEMENT = gql`\nmutation DeleteOrganizationAnnouncement($input: DeleteOrganizationAnnouncementInput!) {\n  deleteOrganizationAnnouncement(input: $input) {\n    ok\n  }\n}\n`\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\nimport moment from 'moment'\n\nimport {\n  Dimmer,\n  Button,\n  Icon,\n  Table\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport confirm_delete from \"../../../tools/confirm_delete\"\nimport AppSettingsContext from '../../context/AppSettingsContext'\nimport ContentCard from \"../../general/ContentCard\"\nimport BadgeBoolean from \"../../ui/BadgeBoolean\"\nimport OrganizationAnnouncementsBase from \"./OrganizationAnnouncementsBase\"\n\nimport { GET_ANNOUNCEMENTS_QUERY, DELETE_ANNOUNCEMENT } from \"./queries\"\n\nfunction OrganizationAnnouncements({ t, history }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n\n  const { loading, error, data, fetchMore } = useQuery(GET_ANNOUNCEMENTS_QUERY)\n  const [ deleteAnnouncement ] = useMutation(DELETE_ANNOUNCEMENT)\n\n  const cardTitle = t('organization.announcements.title')\n\n  // Loading\n  if (loading) return (\n    <OrganizationAnnouncementsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationAnnouncementsBase>\n  )\n  // Error\n  if (error) return (\n    <OrganizationAnnouncementsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('organization.announcements.error_loading')}</p>\n      </ContentCard>\n    </OrganizationAnnouncementsBase>\n  )\n\n  const organizationAnnouncements = data.organizationAnnouncements\n\n  // Empty list\n  if (!organizationAnnouncements.edges.length) { return (\n    <OrganizationAnnouncementsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('organization.announcements.empty_list')}</p>\n      </ContentCard>\n    </OrganizationAnnouncementsBase>\n  )}\n\n  return (\n    <OrganizationAnnouncementsBase>\n      <ContentCard cardTitle={cardTitle}\n                    pageInfo={organizationAnnouncements.pageInfo}\n                    onLoadMore={() => {\n                    fetchMore({\n                      variables: {\n                        after: organizationAnnouncements.pageInfo.endCursor\n                      },\n                      updateQuery: (previousResult, { fetchMoreResult }) => {\n                        const newEdges = fetchMoreResult.organizationAnnouncements.edges\n                        const pageInfo = fetchMoreResult.organizationAnnouncements.pageInfo\n\n                        return newEdges.length\n                          ? {\n                              // Put the new organizationAnnouncements at the end of the list and update `pageInfo`\n                              // so we have the new `endCursor` and `hasNextPage` values\n                              organizationAnnouncements: {\n                                __typename: previousResult.organizationAnnouncements.__typename,\n                                edges: [ ...previousResult.organizationAnnouncements.edges, ...newEdges ],\n                                pageInfo\n                              }\n                            }\n                          : previousResult\n                      }\n                    })\n                  }} >\n        <Table>\n              <Table.Header>\n                <Table.Row key={v4()}>\n                  <Table.ColHeader>{t('general.title')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.display_public')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.shop')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.backend')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.date_start')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.date_end')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.priority')}</Table.ColHeader>\n                  <Table.ColHeader></Table.ColHeader>\n                  <Table.ColHeader></Table.ColHeader>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                  {organizationAnnouncements.edges.map(({ node }) => (\n                    <Table.Row key={v4()}>\n                      <Table.Col key={v4()}>\n                        {node.title}\n                      </Table.Col>\n                      <Table.Col><BadgeBoolean value={node.displayPublic} /></Table.Col>\n                      <Table.Col><BadgeBoolean value={node.displayShop} /></Table.Col>\n                      <Table.Col><BadgeBoolean value={node.displayBackend} /></Table.Col>\n                      <Table.Col>{moment(node.dateStart).format(dateFormat)}</Table.Col>\n                      <Table.Col>{(node.dateEnd) ? moment(node.dateEnd).format(dateFormat): \"\"}</Table.Col>\n                      <Table.Col>{node.priority}</Table.Col>\n                      <Table.Col className=\"text-right\" key={v4()}>\n                        <Link to={`/organization/announcements/edit/${node.id}`}>\n                          <Button className='btn-sm' \n                                  color=\"secondary\">\n                            {t('general.edit')}\n                          </Button>\n                        </Link>\n                      </Table.Col>\n                      <Table.Col>\n                        <button \n                          className=\"icon btn btn-link btn-sm\" \n                          title={t('general.delete')} \n                          href=\"\"\n                          onClick={() => {\n                            confirm_delete({\n                              t: t,\n                              msgConfirm: t(\"organization.announcements.delete_confirm_msg\"),\n                              msgDescription: <p><br />{node.title}</p>,\n                              msgSuccess: t('organization.announcements.deleted'),\n                              deleteFunction: deleteAnnouncement,\n                              functionVariables: { variables: {\n                                input: {\n                                  id: node.id\n                                }\n                              }, refetchQueries: [\n                                {query: GET_ANNOUNCEMENTS_QUERY} \n                              ]}\n                            })\n                        }}>\n                          <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n                        </button>\n                      </Table.Col>\n                      {/* <Mutation mutation={ARCHIVE_LEVEL} key={v4()}>\n                        {(archiveCostcenter, { data }) => (\n                          <Table.Col className=\"text-right\" key={v4()}>\n                            <button className=\"icon btn btn-link btn-sm\" \n                                title={t('general.archive')} \n                                href=\"\"\n                                onClick={() => {\n                                  console.log(\"clicked archived\")\n                                  let id = node.id\n                                  archiveCostcenter({ variables: {\n                                    input: {\n                                    id,\n                                    archived: !archived\n                                    }\n                            }, refetchQueries: [\n                                {query: GET_LEVELS_QUERY, variables: {\"archived\": archived }}\n                            ]}).then(({ data }) => {\n                              console.log('got data', data);\n                              toast.success(\n                                (archived) ? t('general.unarchived'): t('general.archived'), {\n                                  position: toast.POSITION.BOTTOM_RIGHT\n                                })\n                            }).catch((error) => {\n                              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                  position: toast.POSITION.BOTTOM_RIGHT\n                                })\n                              console.log('there was an error sending the query', error);\n                            })\n                            }}>\n                              <Icon prefix=\"fa\" name=\"inbox\" />\n                            </button>\n                          </Table.Col>\n                        )}\n                      </Mutation> */}\n                    </Table.Row>\n                  ))}\n              </Table.Body>\n            </Table>\n      </ContentCard>\n    </OrganizationAnnouncementsBase>\n  )\n}\n\n\n// const OrganizationLevels = ({ t, history, archived=false }) => (\n//   <SiteWrapper>\n//     <div className=\"my-3 my-md-5\">\n//       <Container>\n//         <Page.Header title={t(\"organization.title\")} />\n//         <Grid.Row>\n//           <Grid.Col md={9}>\n//             <Query query={GET_LEVELS_QUERY} variables={{ archived }}>\n//              {({ loading, error, data: {organizationLevels: levels}, refetch, fetchMore }) => {\n//                 // Loading\n//                 if (loading) return (\n//                   <ContentCard cardTitle={t('organization.levels.title')}>\n//                     <Dimmer active={true}\n//                             loader={true}>\n//                     </Dimmer>\n//                   </ContentCard>\n//                 )\n//                 // Error\n//                 if (error) return (\n//                   <ContentCard cardTitle={t('organization.levels.title')}>\n//                     <p>{t('organization.levels.error_loading')}</p>\n//                   </ContentCard>\n//                 )\n//                 const headerOptions = <Card.Options>\n//                   <Button color={(!archived) ? 'primary': 'secondary'}  \n//                           size=\"sm\"\n//                           onClick={() => {archived=false; refetch({archived});}}>\n//                     {t('general.current')}\n//                   </Button>\n//                   <Button color={(archived) ? 'primary': 'secondary'} \n//                           size=\"sm\" \n//                           className=\"ml-2\" \n//                           onClick={() => {archived=true; refetch({archived});}}>\n//                     {t('general.archive')}\n//                   </Button>\n//                 </Card.Options>\n                \n//                 // Empty list\n//                 if (!levels.edges.length) { return (\n//                   <ContentCard cardTitle={t('organization.levels.title')}\n//                                headerContent={headerOptions}>\n//                     <p>\n//                     {(!archived) ? t('organization.levels.empty_list') : t(\"organization.levels.empty_archive\")}\n//                     </p>\n                   \n//                   </ContentCard>\n//                 )} else {   \n//                 // Life's good! :)\n//                 return (\n//                   <ContentCard cardTitle={t('organization.levels.title')}\n//                                headerContent={headerOptions}\n//                                pageInfo={levels.pageInfo}\n//                                onLoadMore={() => {\n//                                 fetchMore({\n//                                   variables: {\n//                                     after: levels.pageInfo.endCursor\n//                                   },\n//                                   updateQuery: (previousResult, { fetchMoreResult }) => {\n//                                     const newEdges = fetchMoreResult.organizationLevels.edges\n//                                     const pageInfo = fetchMoreResult.organizationLevels.pageInfo\n\n//                                     return newEdges.length\n//                                       ? {\n//                                           // Put the new levels at the end of the list and update `pageInfo`\n//                                           // so we have the new `endCursor` and `hasNextPage` values\n//                                           organizationLevels: {\n//                                             __typename: previousResult.organizationLevels.__typename,\n//                                             edges: [ ...previousResult.organizationLevels.edges, ...newEdges ],\n//                                             pageInfo\n//                                           }\n//                                         }\n//                                       : previousResult\n//                                   }\n//                                 })\n//                               }} >\n//                     <Table>\n//                           <Table.Header>\n//                             <Table.Row key={v4()}>\n//                               <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n//                             </Table.Row>\n//                           </Table.Header>\n//                           <Table.Body>\n//                               {levels.edges.map(({ node }) => (\n//                                 <Table.Row key={v4()}>\n//                                   <Table.Col key={v4()}>\n//                                     {node.name}\n//                                   </Table.Col>\n//                                   <Table.Col className=\"text-right\" key={v4()}>\n//                                     {(node.archived) ? \n//                                       <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n//                                       <Button className='btn-sm' \n//                                               onClick={() => history.push(\"/organization/levels/edit/\" + node.id)}\n//                                               color=\"secondary\">\n//                                         {t('general.edit')}\n//                                       </Button>\n//                                     }\n//                                   </Table.Col>\n//                                   <Mutation mutation={ARCHIVE_LEVEL} key={v4()}>\n//                                     {(archiveCostcenter, { data }) => (\n//                                       <Table.Col className=\"text-right\" key={v4()}>\n//                                         <button className=\"icon btn btn-link btn-sm\" \n//                                            title={t('general.archive')} \n//                                            href=\"\"\n//                                            onClick={() => {\n//                                              console.log(\"clicked archived\")\n//                                              let id = node.id\n//                                              archiveCostcenter({ variables: {\n//                                                input: {\n//                                                 id,\n//                                                 archived: !archived\n//                                                }\n//                                         }, refetchQueries: [\n//                                             {query: GET_LEVELS_QUERY, variables: {\"archived\": archived }}\n//                                         ]}).then(({ data }) => {\n//                                           console.log('got data', data);\n//                                           toast.success(\n//                                             (archived) ? t('general.unarchived'): t('general.archived'), {\n//                                               position: toast.POSITION.BOTTOM_RIGHT\n//                                             })\n//                                         }).catch((error) => {\n//                                           toast.error((t('general.toast_server_error')) + ': ' +  error, {\n//                                               position: toast.POSITION.BOTTOM_RIGHT\n//                                             })\n//                                           console.log('there was an error sending the query', error);\n//                                         })\n//                                         }}>\n//                                           <Icon prefix=\"fa\" name=\"inbox\" />\n//                                         </button>\n//                                       </Table.Col>\n//                                     )}\n//                                   </Mutation>\n//                                 </Table.Row>\n//                               ))}\n//                           </Table.Body>\n//                         </Table>\n//                   </ContentCard>\n//                 )}}\n//              }\n//             </Query>\n//           </Grid.Col>\n//           <Grid.Col md={3}>\n//             <HasPermissionWrapper permission=\"add\"\n//                                   resource=\"organizationlevel\">\n//               <Link to={\"/organization/announcements/add\"}\n//               <Button color=\"primary btn-block mb-6\"\n//                       onClick={() => history.push(\"\")}>\n//                 <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.levels.add')}\n//               </Button>\n//             </HasPermissionWrapper>\n//             <OrganizationMenu activeLink='levels'/>\n//           </Grid.Col>\n//         </Grid.Row>\n//       </Container>\n//     </div>\n//   </SiteWrapper>\n// );\n\nexport default withTranslation()(withRouter(OrganizationAnnouncements))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const ANNOUNCEMENT_SCHEMA = Yup.object().shape({\n    title: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n    content: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n    dateStart: Yup.date()\n      .required(t('yup.field_required')),\n    dateEnd: Yup.date()\n      .required(t('yup.field_required')),\n    priority: Yup.number()\n  })\n","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n    Button,\n    Card,\n    Form,\n    Grid\n  } from \"tabler-react\"\n  import { Form as FoForm, Field, ErrorMessage } from 'formik'\n\nimport CSDatePicker from \"../../ui/CSDatePicker\"\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../plugin_config/tinymce\"\n\nfunction OrganizationAnnouncementForm({ t, history, isSubmitting, values, errors, setFieldTouched, setFieldValue, returnUrl }) {\n  return (\n    <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group>\n              <Form.Label className=\"custom-switch\">\n                  <Field \n                  className=\"custom-switch-input\"\n                  type=\"checkbox\" \n                  name=\"displayPublic\" \n                  checked={values.displayPublic} />\n                  <span className=\"custom-switch-indicator\" ></span>\n                  <span className=\"custom-switch-description\">{t('organization.announcements.display_public')}</span>\n              </Form.Label>\n              <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n            </Form.Group>  \n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group>\n              <Form.Label className=\"custom-switch\">\n                  <Field \n                  className=\"custom-switch-input\"\n                  type=\"checkbox\" \n                  name=\"displayShop\" \n                  checked={values.displayShop} />\n                  <span className=\"custom-switch-indicator\" ></span>\n                  <span className=\"custom-switch-description\">{t('organization.announcements.display_shop')}</span>\n              </Form.Label>\n              <ErrorMessage name=\"displayShop\" component=\"div\" />   \n            </Form.Group>  \n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group>\n              <Form.Label className=\"custom-switch\">\n                  <Field \n                  className=\"custom-switch-input\"\n                  type=\"checkbox\" \n                  name=\"displayBackend\" \n                  checked={values.displayBackend} />\n                  <span className=\"custom-switch-indicator\" ></span>\n                  <span className=\"custom-switch-description\">{t('organization.announcements.display_backend')}</span>\n              </Form.Label>\n              <ErrorMessage name=\"displayBackend\" component=\"div\" />   \n            </Form.Group>  \n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.title')}>\n              <Field type=\"text\" \n                      name=\"title\" \n                      className={(errors.title) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"title\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('organization.announcements.content')}>\n              <Editor\n                tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n                textareaName=\"content\"\n                initialValue={values.content}\n                init={tinymceBasicConf}\n                onBlur={(e) => {\n                  setFieldTouched(\"content\", true)\n                  setFieldValue(\"content\", e.target.getContent())\n                }}\n                />\n              <ErrorMessage name=\"content\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.date_start')}>\n              <CSDatePicker \n                selected={values.dateStart}\n                onChange={(date) => setFieldValue(\"dateStart\", date)}\n                onBlur={() => setFieldTouched(\"dateStart\", true)}\n              />\n              <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.date_end')}>\n              <CSDatePicker \n                selected={values.dateEnd}\n                onChange={(date) => setFieldValue(\"dateEnd\", date)}\n                onBlur={() => setFieldTouched(\"dateEnd\", true)}\n              />\n              <ErrorMessage name=\"dateEnd\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.priority')}>\n              <Field type=\"text\" \n                      name=\"priority\" \n                      className={(errors.priority) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"priority\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n          color=\"primary\"\n          className=\"pull-right\" \n          type=\"submit\" \n          disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Link to={returnUrl}>\n            <Button color=\"link\">\n                {t('general.cancel')}\n            </Button>\n          </Link>\n      </Card.Footer>\n    </FoForm>\n  )\n}\n  \n  \nexport default withTranslation()(withRouter(OrganizationAnnouncementForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport { GET_ANNOUNCEMENTS_QUERY, ADD_ANNOUNCEMENT } from './queries'\nimport { ANNOUNCEMENT_SCHEMA } from './yupSchema'\nimport OrganizationAnnouncementForm from './OrganizationAnnouncementForm'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationMenu from '../OrganizationMenu'\nimport { dateToLocalISO } from '../../../tools/date_tools'\n\nfunction OrganizationAnnouncementAdd({t, history}) {\n  const returnUrl = \"/organization/announcements\"\n  const [addAnnouncement] = useMutation(ADD_ANNOUNCEMENT)\n  \n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('organization.title')} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n            <Card>\n              <Card.Header>\n                <Card.Title>{t('organization.announcements.title_add')}</Card.Title>\n              </Card.Header>\n                <Formik\n                    initialValues={{ \n                      displayPublic: false,\n                      displayShop: false,\n                      displayBackend: false,\n                      title: '', \n                      content: '',\n                      dateStart: new Date(),\n                      dateEnd: new Date(),\n                      priority: 100,\n                    }}\n                    validationSchema={ANNOUNCEMENT_SCHEMA}\n                    onSubmit={(values, { setSubmitting }) => {\n                      let inputValues = {\n                        displayPublic: values.displayPublic,\n                        displayBackend: values.displayBackend,\n                        displayShop: values.displayShop,\n                        title: values.title, \n                        content: values.content,\n                        dateStart: dateToLocalISO(values.dateStart),\n                        dateEnd: dateToLocalISO(values.dateEnd),\n                        priority: values.priority\n                      }\n\n                      addAnnouncement({ variables: {\n                        input: inputValues\n                      }, refetchQueries: [\n                          {query: GET_ANNOUNCEMENTS_QUERY}\n                      ]})\n                      .then(({ data }) => {\n                          console.log('got data', data)\n                          history.push(returnUrl)\n                          toast.success((t('organization.announcements.toast_add_success')), {\n                              position: toast.POSITION.BOTTOM_RIGHT\n                            })\n                        }).catch((error) => {\n                          toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                              position: toast.POSITION.BOTTOM_RIGHT\n                            })\n                          console.log('there was an error sending the query', error)\n                          setSubmitting(false)\n                        })\n                    }}\n                    >\n                    {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n                        <OrganizationAnnouncementForm \n                          isSubmitting={isSubmitting}\n                          values={values}\n                          errors={errors}\n                          setFieldTouched={setFieldTouched}\n                          setFieldValue={setFieldValue}\n                          returnUrl={returnUrl}\n                        />\n                    )}\n                </Formik>\n            </Card>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <HasPermissionWrapper permission=\"add\"\n                                    resource=\"organizationannouncement\">\n                <Link to={returnUrl}>\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n              </HasPermissionWrapper>\n              <OrganizationMenu activeLink='announcements'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationAnnouncementAdd))","// @flow\n\nimport React from 'react'\nimport { useMutation, useQuery } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ANNOUNCEMENTS_QUERY, GET_ANNOUNCEMENT_QUERY, UPDATE_ANNOUNCEMENT } from './queries'\nimport { ANNOUNCEMENT_SCHEMA } from './yupSchema'\nimport OrganizationAnnouncementForm from './OrganizationAnnouncementForm'\n\n\nimport {\n  Card,\n} from \"tabler-react\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationAnnouncementsBase from \"./OrganizationAnnouncementsBase\"\nimport { dateToLocalISO } from '../../../tools/date_tools'\n\nfunction OrganizationAnnouncementEdit({t, history, match}) {\n  const announcementId = match.params.id\n  const cardTitle = t(\"organization.announcements.title_edit\")\n  const returnUrl = \"/organization/announcements\"\n  \n  const { loading, error, data } = useQuery(GET_ANNOUNCEMENT_QUERY, { variables: {\n    id: announcementId\n  }})\n  const [updateAnnouncement] = useMutation(UPDATE_ANNOUNCEMENT)\n\n  if (loading) return (\n    <OrganizationAnnouncementsBase showEditBack={true}>\n      <Card title={cardTitle}>\n        <Card.Body>\n          {t(\"general.loading_with_dots\")}\n        </Card.Body>\n      </Card>\n    </OrganizationAnnouncementsBase>\n  )\n\n  if (error) return (\n    <OrganizationAnnouncementsBase showEditBack={true}>\n      <Card title={cardTitle}>\n        <Card.Body>\n          {t(\"general.error_sad_smiley\")}\n        </Card.Body>\n      </Card>\n    </OrganizationAnnouncementsBase>\n  )\n\n  const organizationAnnouncement = data.organizationAnnouncement\n  \n  return (\n    <OrganizationAnnouncementsBase showEditBack={true}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle}</Card.Title>\n        </Card.Header>\n          <Formik\n              initialValues={{ \n                displayPublic: organizationAnnouncement.displayPublic,\n                displayShop: organizationAnnouncement.displayShop,\n                displayBackend: organizationAnnouncement.displayBackend,\n                title: organizationAnnouncement.title, \n                content: organizationAnnouncement.content,\n                dateStart: organizationAnnouncement.dateStart,\n                dateEnd: organizationAnnouncement.dateEnd,\n                priority: organizationAnnouncement.priority,\n              }}\n              validationSchema={ANNOUNCEMENT_SCHEMA}\n              onSubmit={(values, { setSubmitting }) => {\n                let inputValues = {\n                  id: announcementId,\n                  displayPublic: values.displayPublic,\n                  displayBackend: values.displayBackend,\n                  displayShop: values.displayShop,\n                  title: values.title, \n                  content: values.content,\n                  dateStart: dateToLocalISO(values.dateStart),\n                  dateEnd: dateToLocalISO(values.dateEnd),\n                  priority: values.priority\n                }\n\n                updateAnnouncement({ variables: {\n                  input: inputValues\n                }, refetchQueries: [\n                    {query: GET_ANNOUNCEMENTS_QUERY}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    history.push(returnUrl)\n                    toast.success((t('organization.announcements.toast_edit_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n              }}\n              >\n              {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n                  <OrganizationAnnouncementForm \n                    isSubmitting={isSubmitting}\n                    values={values}\n                    errors={errors}\n                    setFieldTouched={setFieldTouched}\n                    setFieldValue={setFieldValue}\n                    returnUrl={returnUrl}\n                  />\n              )}\n          </Formik>\n      </Card>\n    </OrganizationAnnouncementsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationAnnouncementEdit))","import { gql } from \"@apollo/client\"\n\nexport const GET_APPOINTMENTS_QUERY = gql`\n  query OrganizationAppointments($after: String, $before: String, $organizationAppointmentCategory: ID!, $archived: Boolean!) {\n    organizationAppointments(first: 15, before: $before, after: $after, organizationAppointmentCategory: $organizationAppointmentCategory, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          organizationAppointmentCategory {\n            id\n            name\n          }\n          archived,\n          displayPublic\n          name\n        }\n      }\n    }\n    organizationAppointmentCategory(id: $organizationAppointmentCategory) {\n      id\n      name\n    }\n  }\n`\n\nexport const GET_APPOINTMENT_QUERY = gql`\n  query OrganizationAppointment($id: ID!, $after: String, $before: String) {\n    organizationAppointment(id:$id) {\n      id\n      name\n      displayPublic\n      archived\n      financeGlaccount {\n        id \n        name\n      }\n      financeCostcenter {\n        id\n        name\n      }\n    }\n    financeGlaccounts(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    financeCostcenters(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n  }\n`\n\n\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query AppointmentInputValues($after: String, $before: String, $archived: Boolean) {\n    financeGlaccounts(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    financeCostcenters(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Alert,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../../general/ContentCard\"\nimport CardHeaderSeparator from \"../../../general/CardHeaderSeparator\"\nimport OrganizationMenu from \"../../OrganizationMenu\"\n\nimport { GET_APPOINTMENTS_QUERY } from \"./queries\"\n\nconst ARCHIVE_APPOINTMENT = gql`\n  mutation ArchiveOrganizationAppointment($input: ArchiveOrganizationAppointmentInput!) {\n    archiveOrganizationAppointment(input: $input) {\n      organizationAppointment {\n        id\n        archived\n      }\n    }\n  }\n`\n\nconst OrganizationAppointments = ({ t, history, match, archived=false }) => (\n  <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Container>\n        <Page.Header title={t(\"organization.title\")}>\n          <div className=\"page-options d-flex\">\n            <Link to=\"/organization/appointment_categories\" \n                  className='btn btn-outline-secondary btn-sm'>\n                <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back_to')} {t('organization.appointment_categories.title')}\n            </Link>\n          </div>\n        </Page.Header>\n        <Grid.Row>\n          <Grid.Col md={9}>\n            <Query query={GET_APPOINTMENTS_QUERY} variables={{ archived, organizationAppointmentCategory: match.params.category_id }}>\n             {({ loading, error, data: {organizationAppointments: appointments, organizationAppointmentCategory: location}, refetch, fetchMore }) => {\n                // Loading\n                if (loading) return (\n                  <ContentCard cardTitle={t('organization.appointments.title')}>\n                    <Dimmer active={true}\n                            loader={true}>\n                    </Dimmer>\n                  </ContentCard>\n                )\n                // Error\n                if (error) return (\n                  <ContentCard cardTitle={t('organization.appointments.title')}>\n                    <p>{t('organization.appointments.error_loading')}</p>\n                  </ContentCard>\n                )\n                const headerOptions = <Card.Options>\n                  <Button color={(!archived) ? 'primary': 'secondary'}  \n                          size=\"sm\"\n                          onClick={() => {archived=false; refetch({archived});}}>\n                    {t('general.current')}\n                  </Button>\n                  <Button color={(archived) ? 'primary': 'secondary'} \n                          size=\"sm\" \n                          className=\"ml-2\" \n                          onClick={() => {archived=true; refetch({archived});}}>\n                    {t('general.archive')}\n                  </Button>\n                </Card.Options>\n\n                // Empty list\n                if (!appointments.edges.length) { return (\n                  <ContentCard cardTitle={t('organization.appointments.title')}\n                               headerContent={headerOptions}>\n                    <p>\n                    {(!archived) ? t('organization.appointments.empty_list') : t(\"organization.appointments.empty_archive\")}\n                    </p>\n                   \n                  </ContentCard>\n                )} else {   \n                // Life's good! :)\n                return (\n                  <ContentCard cardTitle={t('organization.appointments.title')}\n                               headerContent={headerOptions}\n                               pageInfo={appointments.pageInfo}\n                               onLoadMore={() => {\n                                fetchMore({\n                                  variables: {\n                                    after: appointments.pageInfo.endCursor\n                                  },\n                                  updateQuery: (previousResult, { fetchMoreResult }) => {\n                                    const newEdges = fetchMoreResult.organizationAppointmentPrices.edges\n                                    const pageInfo = fetchMoreResult.organizationAppointmentPrices.pageInfo\n\n                                    return newEdges.length\n                                      ? {\n                                          // Put the new locations at the end of the list and update `pageInfo`\n                                          // so we have the new `endCursor` and `hasNextPage` values\n                                          organizationAppointmentPrices: {\n                                            __typename: previousResult.organizationAppointmentPrices.__typename,\n                                            edges: [ ...previousResult.organizationAppointmentPrices.edges, ...newEdges ],\n                                            pageInfo\n                                          }\n                                        }\n                                      : previousResult\n                                  }\n                                })\n                              }} >\n                    <div>\n                      <Alert type=\"primary\">\n                        <strong>{t('general.appointment_category')}</strong> {location.name}\n                      </Alert>\n\n                      <Table>\n                        <Table.Header>\n                          <Table.Row key={v4()}>\n                            <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                            <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n                          </Table.Row>\n                        </Table.Header>\n                        <Table.Body>\n                            {appointments.edges.map(({ node }) => (\n                              <Table.Row key={v4()}>\n                                <Table.Col key={v4()}>\n                                  {node.name}\n                                </Table.Col>\n                                <Table.Col key={v4()}>\n                                  {(node.displayPublic) ? \n                                    <Badge color=\"success\">{t('general.yes')}</Badge>: \n                                    <Badge color=\"danger\">{t('general.no')}</Badge>}\n                                </Table.Col>\n                                <Table.Col className=\"text-right\" key={v4()}>\n                                  {(node.archived) ? \n                                    <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                                    <span>\n                                      <Button className='btn-sm' \n                                              onClick={() => history.push(\"/organization/appointment_categories/\" + match.params.category_id + \"/appointments/edit/\" + node.id)}\n                                              color=\"secondary\">\n                                        {t('general.edit')}\n                                      </Button>\n                                      <Button className='btn-sm' \n                                              onClick={() => history.push(\"/organization/appointment_categories/\" + match.params.category_id + \"/appointments/prices/\" + node.id)}\n                                              color=\"secondary\">\n                                        {t('organization.appointments.teacher_prices')}\n                                      </Button>\n                                    </span>\n                                  }\n                                </Table.Col>\n                                <Mutation mutation={ARCHIVE_APPOINTMENT} key={v4()}>\n                                  {(archiveAppointmentCategorysRoom, { data }) => (\n                                    <Table.Col className=\"text-right\" key={v4()}>\n                                      <button className=\"icon btn btn-link btn-sm\" \n                                          title={t('general.archive')} \n                                          href=\"\"\n                                          onClick={() => {\n                                            console.log(\"clicked archived\")\n                                            let id = node.id\n                                            archiveAppointmentCategorysRoom({ variables: {\n                                              input: {\n                                              id,\n                                              archived: !archived\n                                              }\n                                      }, refetchQueries: [\n                                          { \n                                            query: GET_APPOINTMENTS_QUERY, \n                                            variables: {\"archived\": archived, organizationAppointmentCategory: match.params.category_id }\n                                          }\n                                      ]}).then(({ data }) => {\n                                        console.log('got data', data);\n                                        toast.success(\n                                          (archived) ? t('general.unarchived'): t('general.archived'), {\n                                            position: toast.POSITION.BOTTOM_RIGHT\n                                          })\n                                      }).catch((error) => {\n                                        toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                            position: toast.POSITION.BOTTOM_RIGHT\n                                          })\n                                        console.log('there was an error sending the query', error);\n                                      })\n                                      }}>\n                                        <Icon prefix=\"fa\" name=\"inbox\" />\n                                      </button>\n                                    </Table.Col>\n                                  )}\n                                </Mutation>\n                              </Table.Row>\n                            ))}\n                        </Table.Body>\n                      </Table>\n                      </div>\n                  </ContentCard>\n                )}}\n             }\n            </Query>\n          </Grid.Col>\n          <Grid.Col md={3}>\n            <HasPermissionWrapper permission=\"add\"\n                                  resource=\"organizationappointment\">\n              <Button color=\"primary btn-block mb-6\"\n                      onClick={() => history.push(\"/organization/appointment_categories/\" + match.params.category_id + \"/appointments/add/\")}>\n                <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.appointments.add')}\n              </Button>\n            </HasPermissionWrapper>\n            <OrganizationMenu activeLink='appointments'/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n    </div>\n  </SiteWrapper>\n);\n\nexport default withTranslation()(withRouter(OrganizationAppointments))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const APPOINTMENT_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid,\n} from \"tabler-react\"\n\n\nconst OrganizationAppointmentForm = ({ t, history, match, inputData, isSubmitting, errors, values, return_url }) => (\n  <FoForm>\n      <Card.Body>\n          <Form.Group>\n            <Form.Label className=\"custom-switch\">\n              <Field \n                className=\"custom-switch-input\"\n                type=\"checkbox\" \n                name=\"displayPublic\" \n                checked={values.displayPublic} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('organization.appointments.public')}</span>\n            </Form.Label>\n            <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n          </Form.Group>    \n\n          <Form.Group label={t('general.name')}>\n            <Field type=\"text\" \n                    name=\"name\" \n                    className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.glaccount')}>\n              <Field component=\"select\" \n                    name=\"financeGlaccount\" \n                    className={(errors.financeGlaccount) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\" key={v4()}></option>\n                {inputData.financeGlaccounts.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.name} ({node.code})</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"financeGlaccount\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n            <Form.Group label={t('general.costcenter')}>\n              <Field component=\"select\" \n                    name=\"financeCostcenter\" \n                    className={(errors.financeCostcenter) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\" key={v4()}></option>\n                {inputData.financeCostcenters.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.name} ({node.code})</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"financeCostcenter\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Link to={return_url}>\n            <Button color=\"link\" type=\"button\">\n                {t('general.cancel')}\n            </Button>\n          </Link>\n      </Card.Footer>\n  </FoForm>\n);\n\nexport default withTranslation()(withRouter(OrganizationAppointmentForm))","// @flow\n\nimport React from 'react'\nimport { Mutation, Query } from \"@apollo/client\";\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { GET_APPOINTMENTS_QUERY, GET_INPUT_VALUES_QUERY } from './queries'\nimport { APPOINTMENT_SCHEMA } from './yupSchema'\nimport OrganizationAppointmentForm from './OrganizationAppointmentForm'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../../OrganizationMenu\"\n\n\nconst ADD_APPOINTMENT = gql`\n  mutation CreateOrganizationAppointment($input: CreateOrganizationAppointmentInput!) {\n    createOrganizationAppointment(input: $input) {\n      organizationAppointment {\n        id\n        organizationAppointmentCategory {\n          id\n          name\n        }\n        archived\n        displayPublic\n        name\n      }\n    }\n  }\n`\n\nconst return_url = \"/organization/appointment_categories/appointments/\"\n\nconst OrganizationAppointmentAdd = ({ t, history, match }) => (\n  <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Container>\n        <Page.Header title={t('organization.title')} />\n        <Grid.Row>\n          <Grid.Col md={9}>\n          <Card>\n            <Card.Header>\n              <Card.Title>{t('organization.appointments.title_add')}</Card.Title>\n            </Card.Header>\n            <Query query={GET_INPUT_VALUES_QUERY} variables = {{archived: false}} >\n              {({ loading, error, data, refetch }) => {\n                // Loading\n                if (loading) return <p>{t('general.loading_with_dots')}</p>\n                // Error\n                if (error) {\n                  console.log(error)\n                  return <p>{t('general.error_sad_smiley')}</p>\n                }\n                \n                console.log('query data')\n                console.log(data)\n                const inputData = data\n\n                return (\n                  <Mutation mutation={ADD_APPOINTMENT} onCompleted={() => history.push(\"/organization/appointment_categories/\" + match.params.category_id + \"/appointments\")}> \n                      {(addAppointment, { data }) => (\n                          <Formik\n                              initialValues={{ name: '', displayPublic: true }}\n                              validationSchema={APPOINTMENT_SCHEMA}\n                              onSubmit={(values, { setSubmitting }) => {\n                                  addAppointment({ variables: {\n                                    input: {\n                                      organizationAppointmentCategory: match.params.category_id,\n                                      name: values.name, \n                                      displayPublic: values.displayPublic,\n                                      financeGlaccount: values.financeGlaccount,\n                                      financeCostcenter: values.financeCostcenter\n                                    }\n                                  }, refetchQueries: [\n                                      {query: GET_APPOINTMENTS_QUERY,\n                                      variables: {\"archived\": false, \"organizationAppointmentCategory\": match.params.category_id }}\n                                  ]})\n                                  .then(({ data }) => {\n                                      console.log('got data', data);\n                                      toast.success((t('organization.appointments.toast_add_success')), {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                    }).catch((error) => {\n                                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                      console.log('there was an error sending the query', error)\n                                      setSubmitting(false)\n                                    })\n                              }}\n                              >\n                              {({ isSubmitting, errors, values }) => (\n                                <OrganizationAppointmentForm\n                                  inputData={inputData}\n                                  isSubmitting={isSubmitting}\n                                  errors={errors}\n                                  values={values}\n                                  return_url={\"/organization/appointment_categories/\" + match.params.category_id + \"/appointments\"}\n                                  />\n                              )}\n                          </Formik>\n                      )}\n                    </Mutation>\n                )}}\n              </Query>                    \n          </Card>\n          </Grid.Col>\n          <Grid.Col md={3}>\n            <HasPermissionWrapper permission=\"add\"\n                                  resource=\"organizationappointment\">\n              <Button color=\"primary btn-block mb-6\"\n                      onClick={() => history.push(return_url + match.params.category_id)}>\n                <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n              </Button>\n            </HasPermissionWrapper>\n            <OrganizationMenu activeLink='appointments'/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n    </div>\n  </SiteWrapper>\n);\n\nexport default withTranslation()(withRouter(OrganizationAppointmentAdd))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { Query, Mutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_APPOINTMENTS_QUERY, GET_APPOINTMENT_QUERY } from './queries'\nimport { APPOINTMENT_SCHEMA } from './yupSchema'\nimport OrganizationAppointmentForm from './OrganizationAppointmentForm'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../../OrganizationMenu\"\n\n\nconst UPDATE_APPOINTMENT = gql`\n  mutation UpdateOrganizationAppointment($input: UpdateOrganizationAppointmentInput!) {\n    updateOrganizationAppointment(input: $input) {\n      organizationAppointment {\n        id\n        name\n        displayPublic\n      }\n    }\n  }\n`\n\n\nclass OrganizationAppointmentEdit extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Organization appointment edit props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const match = this.props.match\n    const history = this.props.history\n    const id = match.params.id\n    const category_id = match.params.category_id\n    const return_url = \"/organization/appointment_categories/\" + match.params.category_id + \"/appointments\"\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title={t('organization.title')} />\n            <Grid.Row>\n              <Grid.Col md={9}>\n              <Card>\n                <Card.Header>\n                  <Card.Title>{t('organization.appointments.title_edit')}</Card.Title>\n                  {console.log(match.params.id)}\n                </Card.Header>\n                <Query query={GET_APPOINTMENT_QUERY} variables={{ id }} >\n                {({ loading, error, data, refetch }) => {\n                    // Loading\n                    if (loading) return <p>{t('general.loading_with_dots')}</p>\n                    // Error\n                    if (error) {\n                      console.log(error)\n                      return <p>{t('general.error_sad_smiley')}</p>\n                    }\n                    \n                    const inputData = data\n                    const initialData = data.organizationAppointment\n                    console.log('query data')\n                    console.log(data)\n\n                    let initialGlaccount = \"\"\n                    if (initialData.financeGlaccount) {\n                      initialGlaccount =  initialData.financeGlaccount.id\n                    } \n\n                    let initialCostcenter = \"\"\n                    if (initialData.financeCostcenter) {\n                      initialCostcenter =  initialData.financeCostcenter.id\n                    } \n\n                    return (\n                      \n                      <Mutation mutation={UPDATE_APPOINTMENT} onCompleted={() => history.push(return_url)}> \n                      {(updateLocation, { data }) => (\n                          <Formik\n                              initialValues={{ \n                                name: initialData.name, \n                                displayPublic: initialData.displayPublic,\n                                financeGlaccount: initialGlaccount,\n                                financeCostcenter: initialCostcenter,\n                              }}\n                              validationSchema={APPOINTMENT_SCHEMA}\n                              onSubmit={(values, { setSubmitting }) => {\n                                  console.log('submit values:')\n                                  console.log(values)\n\n                                  updateLocation({ variables: {\n                                    input: {\n                                      id: match.params.id,\n                                      name: values.name,\n                                      displayPublic: values.displayPublic,\n                                      financeGlaccount: values.financeGlaccount,\n                                      financeCostcenter: values.financeCostcenter\n                                    }\n                                  }, refetchQueries: [\n                                    {query: GET_APPOINTMENTS_QUERY,\n                                      variables: {\"archived\": false, \"organizationAppointmentCategory\": match.params.category_id }}\n                                  ]})\n                                  .then(({ data }) => {\n                                      console.log('got data', data)\n                                      toast.success((t('organization.appointments.toast_edit_success')), {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                    }).catch((error) => {\n                                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                      console.log('there was an error sending the query', error)\n                                      setSubmitting(false)\n                                    })\n                              }}\n                              >\n                              {({ isSubmitting, errors, values }) => (\n                                <OrganizationAppointmentForm\n                                  inputData={inputData}\n                                  isSubmitting={isSubmitting}\n                                  errors={errors}\n                                  values={values}\n                                  return_url={return_url}\n                                />\n                              )}\n                          </Formik>\n                      )}\n                      </Mutation>\n                      )}}\n                </Query>\n              </Card>\n              </Grid.Col>\n              <Grid.Col md={3}>\n                <HasPermissionWrapper permission=\"change\"\n                                      resource=\"organizationappointment\">\n                  <Button color=\"primary btn-block mb-6\"\n                          onClick={() => history.push(return_url)}>\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </HasPermissionWrapper>\n                <OrganizationMenu activeLink='appointments'/>\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n    </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(OrganizationAppointmentEdit))","import { gql } from \"@apollo/client\"\n\nexport const GET_APPOINTMENT_CATEGORIES_QUERY = gql`\n  query OrganizationAppointmentCategories($after: String, $before: String, $archived: Boolean) {\n    organizationAppointmentCategories(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id,\n          archived,\n          displayPublic,\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const GET_APPOINTMENT_CATEGORY_QUERY = gql`\n  query OrganizationAppointmentCategory($id: ID!) {\n    organizationAppointmentCategory(id:$id) {\n      id\n      name\n      displayPublic\n      archived\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationMenu from \"../OrganizationMenu\"\n\nimport { GET_APPOINTMENT_CATEGORIES_QUERY } from \"./queries\"\n\nconst ARCHIVE_APPOINTMENT_CATEGORY = gql`\n  mutation ArchiveOrganizationAppointmentCategory($input: ArchiveOrganizationAppointmentCategoryInput!) {\n    archiveOrganizationAppointmentCategory(input: $input) {\n      organizationAppointmentCategory {\n        id\n        archived\n      }\n    }\n  }\n`\n\nconst OrganizationAppointmentCategories = ({ t, history, archived=false }) => (\n  <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Container>\n        <Page.Header title={t('organization.title')} />\n        <Grid.Row>\n          <Grid.Col md={9}>\n            <Query query={GET_APPOINTMENT_CATEGORIES_QUERY} variables={{ archived }}>\n             {({ loading, error, data: {organizationAppointmentCategories: appointment_categories}, refetch, fetchMore }) => {\n                // Loading\n                if (loading) return (\n                  <ContentCard cardTitle={t('organization.appointment_categories.title')}>\n                    <Dimmer active={true}\n                            loader={true}>\n                    </Dimmer>\n                  </ContentCard>\n                )\n                // Error\n                if (error) return (\n                  <ContentCard cardTitle={t('organization.appointment_categories.title')}>\n                    <p>{t('organization.appointment_categories.error_loading')}</p>\n                  </ContentCard>\n                )\n                const headerOptions = <Card.Options>\n                  <Button color={(!archived) ? 'primary': 'secondary'}  \n                          size=\"sm\"\n                          onClick={() => {archived=false; refetch({archived});}}>\n                    {t('general.current')}\n                  </Button>\n                  <Button color={(archived) ? 'primary': 'secondary'} \n                          size=\"sm\" \n                          className=\"ml-2\" \n                          onClick={() => {archived=true; refetch({archived});}}>\n                    {t('general.archive')}\n                  </Button>\n                </Card.Options>\n                \n                // Empty list\n                if (!appointment_categories.edges.length) { return (\n                  <ContentCard cardTitle={t('organization.appointment_categories.title')}\n                               headerContent={headerOptions}>\n                    <p>\n                    {(!archived) ? t('organization.appointment_categories.empty_list') : t(\"organization.appointment_categories.empty_archive\")}\n                    </p>\n                   \n                  </ContentCard>\n                )} else {   \n                // Life's good! :)\n                return (\n                  <ContentCard cardTitle={t('organization.appointment_categories.title')}\n                               headerContent={headerOptions}\n                               pageInfo={appointment_categories.pageInfo}\n                               onLoadMore={() => {\n                                fetchMore({\n                                  variables: {\n                                    after: appointment_categories.pageInfo.endCursor\n                                  },\n                                  updateQuery: (previousResult, { fetchMoreResult }) => {\n                                    const newEdges = fetchMoreResult.organizationAppointmentCategories.edges\n                                    const pageInfo = fetchMoreResult.organizationAppointmentCategories.pageInfo\n\n                                    return newEdges.length\n                                      ? {\n                                          // Put the new appointment_categories at the end of the list and update `pageInfo`\n                                          // so we have the new `endCursor` and `hasNextPage` values\n                                          organizationAppointmentCategories: {\n                                            __typename: previousResult.organizationAppointmentCategories.__typename,\n                                            edges: [ ...previousResult.organizationAppointmentCategories.edges, ...newEdges ],\n                                            pageInfo\n                                          }\n                                        }\n                                      : previousResult\n                                  }\n                                })\n                              }} >\n                    <Table>\n                          <Table.Header>\n                            <Table.Row key={v4()}>\n                              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                              <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n                            </Table.Row>\n                          </Table.Header>\n                          <Table.Body>\n                              {appointment_categories.edges.map(({ node }) => (\n                                <Table.Row key={v4()}>\n                                  <Table.Col key={v4()}>\n                                    {node.name}\n                                  </Table.Col>\n                                  <Table.Col key={v4()}>\n                                    {(node.displayPublic) ? \n                                      <Badge color=\"success\">{t('general.yes')}</Badge>: \n                                      <Badge color=\"danger\">{t('general.no')}</Badge>}\n                                  </Table.Col>\n                                  <Table.Col className=\"text-right\" key={v4()}>\n                                    {(node.archived) ? \n                                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                                      <div>\n                                        <Button className='btn-sm' \n                                                onClick={() => history.push(\"/organization/appointment_categories/edit/\" + node.id)}\n                                                color=\"secondary\">\n                                          {t('general.edit')}\n                                        </Button>\n                                        <Button className='btn-sm' \n                                                onClick={() => history.push(\"/organization/appointment_categories/\" + node.id + \"/appointments/\")}\n                                                color=\"secondary\">\n                                          {t('organization.appointments.title')}\n                                        </Button>\n                                      </div>\n                                    }\n                                  </Table.Col>\n                                  <Mutation mutation={ARCHIVE_APPOINTMENT_CATEGORY} key={v4()}>\n                                    {(archiveLocation, { data }) => (\n                                      <Table.Col className=\"text-right\" key={v4()}>\n                                        <button className=\"icon btn btn-link btn-sm\" \n                                           title={t('general.archive')} \n                                           href=\"\"\n                                           onClick={() => {\n                                             console.log(\"clicked archived\")\n                                             let id = node.id\n                                             archiveLocation({ variables: {\n                                               input: {\n                                                id,\n                                                archived: !archived\n                                               }\n                                        }, refetchQueries: [\n                                            {query: GET_APPOINTMENT_CATEGORIES_QUERY, variables: {\"archived\": archived }}\n                                        ]}).then(({ data }) => {\n                                          console.log('got data', data);\n                                          toast.success(\n                                            (archived) ? t('general.unarchived'): t('general.archived'), {\n                                              position: toast.POSITION.BOTTOM_RIGHT\n                                            })\n                                        }).catch((error) => {\n                                          toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                              position: toast.POSITION.BOTTOM_RIGHT\n                                            })\n                                          console.log('there was an error sending the query', error);\n                                        })\n                                        }}>\n                                          <Icon prefix=\"fa\" name=\"inbox\" />\n                                        </button>\n                                      </Table.Col>\n                                    )}\n                                  </Mutation>\n                                </Table.Row>\n                              ))}\n                          </Table.Body>\n                        </Table>\n                  </ContentCard>\n                )}}\n             }\n            </Query>\n          </Grid.Col>\n          <Grid.Col md={3}>\n            <HasPermissionWrapper permission=\"add\"\n                                  resource=\"organizationappointmentcategory\">\n              <Button color=\"primary btn-block mb-6\"\n                      onClick={() => history.push(\"/organization/appointment_categories/add\")}>\n                <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.appointment_categories.add')}\n              </Button>\n            </HasPermissionWrapper>\n            <OrganizationMenu activeLink='appointments'/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n    </div>\n  </SiteWrapper>\n);\n\nexport default withTranslation()(withRouter(OrganizationAppointmentCategories))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const APPOINTMENT_CATEGORY_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  })\n","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n    Button,\n    Card,\n    Form\n  } from \"tabler-react\"\n  import { Form as FoForm, Field, ErrorMessage } from 'formik'\n\nconst OrganizationAppointmentCategoryForm = ({ t, history, isSubmitting, values, errors, return_url }) => (\n  <FoForm>\n    <Card.Body>\n        <Form.Group>\n          <Form.Label className=\"custom-switch\">\n            <Field \n              className=\"custom-switch-input\"\n              type=\"checkbox\" \n              name=\"displayPublic\" \n              checked={values.displayPublic} />\n            <span className=\"custom-switch-indicator\" ></span>\n            <span className=\"custom-switch-description\">{t('organization.appointment_category.public')}</span>\n          </Form.Label>\n          <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n        </Form.Group>    \n\n        <Form.Group label={t('general.name')}>\n          <Field type=\"text\" \n                  name=\"name\" \n                  className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\" />\n          <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group>\n    </Card.Body>\n    <Card.Footer>\n        <Button \n          color=\"primary\"\n          className=\"pull-right\" \n          type=\"submit\" \n          disabled={isSubmitting}\n        >\n          {t('general.submit')}\n        </Button>\n        <Link to={return_url}>\n          <Button color=\"link\" type=\"button\">\n              {t('general.cancel')}\n          </Button>\n        </Link>\n    </Card.Footer>\n  </FoForm>\n)\n  \n  \n  export default withTranslation()(withRouter(OrganizationAppointmentCategoryForm))","// @flow\n\nimport React from 'react'\nimport { Mutation } from \"@apollo/client\";\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { GET_APPOINTMENT_CATEGORIES_QUERY } from './queries'\nimport { APPOINTMENT_CATEGORY_SCHEMA } from './yupSchema'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationAppointmentCategoryForm from \"./OrganizationAppointmentCategoryForm\"\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nconst ADD_ORGANIZATION_APPOINTMENT_CATEGORY = gql`\n  mutation CreateOrganizationAppointmentCategory($input: CreateOrganizationAppointmentCategoryInput!) {\n    createOrganizationAppointmentCategory(input: $input) {\n      organizationAppointmentCategory {\n        id\n        archived\n        displayPublic\n        name\n      }\n    }\n  }\n`\n\nconst return_url = \"/organization/appointment_categories\"\n\nconst OrganizationAppointmentCategoryAdd = ({ t, history }) => (\n  <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Container>\n        <Page.Header title={t('organization.title')} />\n        <Grid.Row>\n          <Grid.Col md={9}>\n          <Card>\n            <Card.Header>\n              <Card.Title>{t('organization.appointment_categories.title_add')}</Card.Title>\n            </Card.Header>\n            <Mutation mutation={ADD_ORGANIZATION_APPOINTMENT_CATEGORY} onCompleted={() => history.push(return_url)}> \n                {(addAppointmentCategory, { data }) => (\n                    <Formik\n                        initialValues={{ name: '', displayPublic: true }}\n                        validationSchema={APPOINTMENT_CATEGORY_SCHEMA}\n                        onSubmit={(values, { setSubmitting }) => {\n                            addAppointmentCategory({ variables: {\n                              input: {\n                                name: values.name, \n                                displayPublic: values.displayPublic\n                              }\n                            }, refetchQueries: [\n                                {query: GET_APPOINTMENT_CATEGORIES_QUERY, variables: {\"archived\": false }}\n                            ]})\n                            .then(({ data }) => {\n                                console.log('got data', data);\n                                toast.success((t('organization.appointment_categories.toast_add_success')), {\n                                    position: toast.POSITION.BOTTOM_RIGHT\n                                  })\n                              }).catch((error) => {\n                                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                    position: toast.POSITION.BOTTOM_RIGHT\n                                  })\n                                console.log('there was an error sending the query', error)\n                                setSubmitting(false)\n                              })\n                        }}\n                        >\n                        {({ isSubmitting, errors, values }) => (\n                          <OrganizationAppointmentCategoryForm\n                            isSubmitting={isSubmitting}\n                            errors={errors}\n                            values={values}\n                            return_url={return_url}\n                          />\n                        )}\n                    </Formik>\n                )}\n                </Mutation>\n          </Card>\n          </Grid.Col>\n          <Grid.Col md={3}>\n            <HasPermissionWrapper permission=\"add\"\n                                  resource=\"organizationappointmentcategory\">\n              <Button color=\"primary btn-block mb-6\"\n                      onClick={() => history.push(return_url)}>\n                <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n              </Button>\n            </HasPermissionWrapper>\n            <OrganizationMenu activeLink='appointment_categories'/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n    </div>\n  </SiteWrapper>\n);\n\nexport default withTranslation()(withRouter(OrganizationAppointmentCategoryAdd))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { Query, Mutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_APPOINTMENT_CATEGORIES_QUERY, GET_APPOINTMENT_CATEGORY_QUERY } from './queries'\nimport { APPOINTMENT_CATEGORY_SCHEMA } from './yupSchema'\n\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../OrganizationMenu\"\nimport OrganizationAppointmentCategoryForm from \"./OrganizationAppointmentCategoryForm\"\n\n\nconst UPDATE_APPOINTMENT_CATEGORY = gql`\n  mutation UpdateOrganizationAppointmentCategory($input: UpdateOrganizationAppointmentCategoryInput!) {\n    updateOrganizationAppointmentCategory(input: $input) {\n      organizationAppointmentCategory {\n        id\n        name\n        displayPublic\n      }\n    }\n  }\n`\n\n\nclass OrganizationAppointmentCategoryEdit extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Organization location edit props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const match = this.props.match\n    const history = this.props.history\n    const id = match.params.id\n    const return_url = \"/organization/appointment_categories\"\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title={t('organization.title')} />\n            <Grid.Row>\n              <Grid.Col md={9}>\n              <Card>\n                <Card.Header>\n                  <Card.Title>{t('organization.appointment_categories.title_edit')}</Card.Title>\n                  {console.log(match.params.id)}\n                </Card.Header>\n                <Query query={GET_APPOINTMENT_CATEGORY_QUERY} variables={{ id }} >\n                {({ loading, error, data, refetch }) => {\n                    // Loading\n                    if (loading) return <p>{t('general.loading_with_dots')}</p>\n                    // Error\n                    if (error) {\n                      console.log(error)\n                      return <p>{t('general.error_sad_smiley')}</p>\n                    }\n                    \n                    const initialData = data.organizationAppointmentCategory;\n                    console.log('query data')\n                    console.log(data)\n\n                    return (\n                      \n                      <Mutation mutation={UPDATE_APPOINTMENT_CATEGORY} onCompleted={() => history.push(return_url)}> \n                      {(updateAppointmentCategory, { data }) => (\n                          <Formik\n                              initialValues={{ \n                                name: initialData.name, \n                                displayPublic: initialData.displayPublic \n                              }}\n                              validationSchema={APPOINTMENT_CATEGORY_SCHEMA}\n                              onSubmit={(values, { setSubmitting }) => {\n                                  console.log('submit values:')\n                                  console.log(values)\n\n                                  updateAppointmentCategory({ variables: {\n                                    input: {\n                                      id: match.params.id,\n                                      name: values.name,\n                                      displayPublic: values.displayPublic \n                                    }\n                                  }, refetchQueries: [\n                                      {query: GET_APPOINTMENT_CATEGORIES_QUERY, variables: {\"archived\": false }}\n                                  ]})\n                                  .then(({ data }) => {\n                                      console.log('got data', data)\n                                      toast.success((t('organization.appointment_categories.toast_edit_success')), {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                    }).catch((error) => {\n                                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                      console.log('there was an error sending the query', error)\n                                      setSubmitting(false)\n                                    })\n                              }}\n                              >\n                              {({ isSubmitting, errors, values }) => (\n                                  <OrganizationAppointmentCategoryForm\n                                    isSubmitting={isSubmitting}\n                                    errors={errors}\n                                    values={values}\n                                    return_url={return_url}\n                                  />\n                              )}\n                          </Formik>\n                      )}\n                      </Mutation>\n                      )}}\n                </Query>\n              </Card>\n              </Grid.Col>\n              <Grid.Col md={3}>\n                <HasPermissionWrapper permission=\"change\"\n                                      resource=\"organizationappointmentcategory\">\n                  <Button color=\"primary btn-block mb-6\"\n                          onClick={() => history.push(return_url)}>\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </HasPermissionWrapper>\n                <OrganizationMenu activeLink='appointment_categories'/>\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n    </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(OrganizationAppointmentCategoryEdit))","import { gql } from \"@apollo/client\"\n\nexport const GET_APPOINTMENT_PRICES_QUERY = gql`\n  query OrganizationAppointmentPrices($after: String, $before: String, $organizationAppointment: ID!) {\n    organizationAppointmentPrices(first: 15, before: $before, after: $after, organizationAppointment: $organizationAppointment) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          account {\n            id\n            fullName\n          }\n          price\n          priceDisplay\n          financeTaxRate {\n            id\n            name\n          }\n        }\n      }\n    }\n    organizationAppointment(id: $organizationAppointment) {\n      id\n      name\n    }\n  }\n`\n\nexport const GET_APPOINTMENT_PRICE_QUERY = gql`\n  query OrganizationAppointment($id: ID!, $after: String, $before: String) {\n    organizationAppointmentPrice(id:$id) {\n      id\n      price\n      account {\n        id\n        fullName\n      }\n      financeTaxRate {\n        id\n        name\n      }\n    }\n    financeTaxRates(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    accountTeacherProfiles(first: 100, before: $before, after: $after, appointments: true, account_IsActive: true) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          account {\n            id\n            fullName\n          }\n        }\n      }\n    }\n  }\n`\n\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query AppointmentInputValues($after: String, $before: String, $archived: Boolean) {\n    financeTaxRates(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    accountTeacherProfiles(first: 100, before: $before, after: $after, appointments: true, account_IsActive: true) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          account {\n            id\n            fullName\n          }\n        }\n      }\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Alert,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\nimport confirm_delete from \"../../../../../tools/confirm_delete\"\n\nimport ContentCard from \"../../../../general/ContentCard\"\nimport CardHeaderSeparator from \"../../../../general/CardHeaderSeparator\"\nimport OrganizationMenu from \"../../../OrganizationMenu\"\n\nimport { GET_APPOINTMENT_PRICES_QUERY } from \"./queries\"\n\nconst DELETE_APPOINTMENT_PRICE = gql`\n  mutation DeleteOrganizationAppointmentPrice($input: DeleteOrganizationAppointmentPriceInput!) {\n    deleteOrganizationAppointmentPrice(input: $input) {\n      ok\n    }\n  }\n`\n\nconst OrganizationAppointmentPrices = ({ t, history, match }) => (\n  <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Container>\n        <Page.Header title={t(\"organization.title\")}>\n          <div className=\"page-options d-flex\">\n            <Link to={\"/organization/appointment_categories/\" + match.params.category_id + \"/appointments\"}\n                  className='btn btn-outline-secondary btn-sm'>\n                <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back_to')} {t('general.appointment')}\n            </Link>\n          </div>\n        </Page.Header>\n        <Grid.Row>\n          <Grid.Col md={9}>\n            <Query query={GET_APPOINTMENT_PRICES_QUERY} variables={{ organizationAppointment: match.params.appointment_id }}>\n             {({ loading, error, data, refetch, fetchMore }) => {\n                // Loading\n                if (loading) return (\n                  <ContentCard cardTitle={t('organization.appointment_prices.title')}>\n                    <Dimmer active={true}\n                            loader={true}>\n                    </Dimmer>\n                  </ContentCard>\n                )\n                // Error\n                if (error) return (\n                  <ContentCard cardTitle={t('organization.appointment_prices.title')}>\n                    <p>{t('organization.appointment_prices.error_loading')}</p>\n                  </ContentCard>\n                )\n\n                const prices = data.organizationAppointmentPrices\n\n                // Empty list\n                if (!prices.edges.length) { return (\n                  <ContentCard cardTitle={t('organization.appointment_prices.title')}>\n                    <p>\n                      {t('organization.appointment_prices.empty_list')}\n                    </p>\n                   \n                  </ContentCard>\n                )} else {   \n                // Life's good! :)\n                return (\n                  <ContentCard cardTitle={t('organization.appointment_prices.title')}\n                               pageInfo={prices.pageInfo}\n                               onLoadMore={() => {\n                                fetchMore({\n                                  variables: {\n                                    after: prices.pageInfo.endCursor\n                                  },\n                                  updateQuery: (previousResult, { fetchMoreResult }) => {\n                                    const newEdges = fetchMoreResult.organizationAppointmentPrices.edges\n                                    const pageInfo = fetchMoreResult.organizationAppointmentPrices.pageInfo\n\n                                    return newEdges.length\n                                      ? {\n                                          // Put the new locations at the end of the list and update `pageInfo`\n                                          // so we have the new `endCursor` and `hasNextPage` values\n                                          organizationAppointmentPrices: {\n                                            __typename: previousResult.organizationAppointmentPrices.__typename,\n                                            edges: [ ...previousResult.organizationAppointmentPrices.edges, ...newEdges ],\n                                            pageInfo\n                                          }\n                                        }\n                                      : previousResult\n                                  }\n                                })\n                              }} >\n                    <div>\n                      <Alert type=\"primary\">\n                        <strong>{t('general.prices_for')} {t('general.appointment')}</strong> {data.organizationAppointment.name}\n                      </Alert>\n\n                      <Table>\n                        <Table.Header>\n                          <Table.Row key={v4()}>\n                            <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                            <Table.ColHeader>{t('general.price')}</Table.ColHeader>\n                          </Table.Row>\n                        </Table.Header>\n                        <Table.Body>\n                            {prices.edges.map(({ node }) => (\n                              <Table.Row key={v4()}>\n                                {console.log(node)}\n                                <Table.Col key={v4()}>\n                                  {node.account.fullName}\n                                </Table.Col>\n                                <Table.Col key={v4()}>\n                                  {node.priceDisplay}\n                                </Table.Col>\n                                <Table.Col className=\"text-right\" key={v4()}>\n                                  {(node.archived) ? \n                                    <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                                    <span>\n                                      <Button className='btn-sm' \n                                              onClick={() => history.push(\"/organization/appointment_categories/\" + \n                                                match.params.category_id + \"/appointments/prices/\" + match.params.appointment_id + \"/edit/\" + node.id)}\n                                              color=\"secondary\">\n                                        {t('general.edit')}\n                                      </Button>\n                                    </span>\n                                  }\n                                </Table.Col>\n                                <Mutation mutation={DELETE_APPOINTMENT_PRICE} key={v4()}>\n                                  {(deleteAppointmentPrice, { data }) => (\n                                    <Table.Col className=\"text-right\" key={v4()}>\n                                      <button className=\"icon btn btn-link btn-sm\" \n                                        title={t('general.delete')} \n                                        href=\"\"\n                                        onClick={() => {\n                                          confirm_delete({\n                                            t: t,\n                                            msgConfirm: t(\"organization.appointment_prices.delete_confirm_msg\"),\n                                            msgDescription: <p>{node.account.fullName} {node.priceDisplay}</p>,\n                                            msgSuccess: t('organization.appointment_prices.deleted'),\n                                            deleteFunction: deleteAppointmentPrice,\n                                            functionVariables: { variables: {\n                                              input: {\n                                                id: node.id\n                                              }\n                                            }, refetchQueries: [\n                                              {query: GET_APPOINTMENT_PRICES_QUERY, variables: { organizationAppointment: match.params.appointment_id }} \n                                            ]}\n                                          })\n                                      }}>\n                                        <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n                                      </button>\n                                    </Table.Col>\n                                  )}\n                                </Mutation>\n                              </Table.Row>\n                            ))}\n                        </Table.Body>\n                      </Table>\n                      </div>\n                  </ContentCard>\n                )}}\n             }\n            </Query>\n          </Grid.Col>\n          <Grid.Col md={3}>\n            <HasPermissionWrapper permission=\"add\"\n                                  resource=\"organizationappointment\">\n              <Button color=\"primary btn-block mb-6\"\n                      onClick={() => history.push(\"/organization/appointment_categories/\" + match.params.category_id + \"/appointments/prices/\" + match.params.appointment_id + \"/add\")}>\n                <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.appointment_prices.add')}\n              </Button>\n            </HasPermissionWrapper>\n            <OrganizationMenu activeLink='appointments'/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n    </div>\n  </SiteWrapper>\n);\n\nexport default withTranslation()(withRouter(OrganizationAppointmentPrices))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const APPOINTMENT_PRICE_SCHEMA = Yup.object().shape({\n    account: Yup.string()\n      .required(t('yup.field_required')),\n    price: Yup.number()\n      .required(t('yup.field_required')),\n    financeTaxRate: Yup.string()\n      .required(t('yup.field_required'))\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid,\n} from \"tabler-react\"\n\n\nconst OrganizationAppointmentForm = ({ t, history, match, inputData, isSubmitting, errors, values, return_url }) => (\n  <FoForm>\n      <Card.Body>\n         <Form.Group label={t('general.teacher')}>\n            <Field component=\"select\" \n                    name=\"account\" \n                    className={(errors.account) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n              <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n              {inputData.accountTeacherProfiles.edges.map(({ node }) =>\n                <option value={node.account.id} key={v4()}>{node.account.fullName}</option>\n              )}\n            </Field>\n            <ErrorMessage name=\"account\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.price')}>\n              <Field type=\"text\" \n                    name=\"price\" \n                    className={(errors.price) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n              <ErrorMessage name=\"price\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n            <Form.Group label={t('general.taxrate')}>\n              <Field component=\"select\" \n                      name=\"financeTaxRate\" \n                      className={(errors.financeTaxRate) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                {console.log(\"query data in appointment price form:\")}\n                {console.log(inputData)}\n                <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n                {inputData.financeTaxRates.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.name} ({node.percentage}% {node.rateType})</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"financeTaxRate\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Link to={return_url}>\n            <Button color=\"link\" type=\"button\">\n                {t('general.cancel')}\n            </Button>\n          </Link>\n      </Card.Footer>\n  </FoForm>\n);\n\nexport default withTranslation()(withRouter(OrganizationAppointmentForm))","// @flow\n\nimport React from 'react'\nimport { Mutation, Query } from \"@apollo/client\";\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { GET_APPOINTMENT_PRICES_QUERY, GET_INPUT_VALUES_QUERY } from './queries'\nimport { APPOINTMENT_PRICE_SCHEMA } from './yupSchema'\nimport OrganizationAppointmentPriceForm from './OrganizationAppointmentPriceForm'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../../../OrganizationMenu\"\n\n\nconst ADD_APPOINTMENT_PRICE = gql`\n  mutation CreateOrganizationAppointmentPrice($input: CreateOrganizationAppointmentPriceInput!) {\n    createOrganizationAppointmentPrice(input: $input) {\n      organizationAppointmentPrice {\n        id\n        account {\n          id\n          fullName\n        }\n        organizationAppointment {\n          id\n          name\n        }\n        price\n        financeTaxRate {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\nconst return_url = \"/organization/appointment_categories/appointments/\"\n\nconst OrganizationAppointmentPriceAdd = ({ t, history, match }) => (\n  <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Container>\n        <Page.Header title={t('organization.title')} />\n        <Grid.Row>\n          <Grid.Col md={9}>\n          <Card>\n            <Card.Header>\n              <Card.Title>{t('organization.appointment_prices.title_add')}</Card.Title>\n            </Card.Header>\n            <Query query={GET_INPUT_VALUES_QUERY} variables = {{archived: false}} >\n              {({ loading, error, data, refetch }) => {\n                // Loading\n                if (loading) return <p>{t('general.loading_with_dots')}</p>\n                // Error\n                if (error) {\n                  console.log(error)\n                  return <p>{t('general.error_sad_smiley')}</p>\n                }\n                \n                console.log('query data')\n                console.log(data)\n                const inputData = data\n\n                return (\n                  <Mutation mutation={ADD_APPOINTMENT_PRICE} onCompleted={\n                    () => history.push(\"/organization/appointment_categories/\" + match.params.category_id + \"/appointments/prices/\" + match.params.appointment_id)}> \n                      {(addAppointment, { data }) => (\n                          <Formik\n                              initialValues={{ \n                                organizationAppointment: '', \n                                account: '',\n                                price: '',\n                                financeTaxRate: \"\",\n                              }}\n                              validationSchema={APPOINTMENT_PRICE_SCHEMA}\n                              onSubmit={(values, { setSubmitting }) => {\n                                  addAppointment({ variables: {\n                                    input: {\n                                      organizationAppointment: match.params.appointment_id,\n                                      account: values.account,\n                                      price: values.price, \n                                      financeTaxRate: values.financeTaxRate,\n                                    }\n                                  }, refetchQueries: [\n                                      {query: GET_APPOINTMENT_PRICES_QUERY,\n                                      variables: {\"organizationAppointment\": match.params.appointment_id }}\n                                  ]})\n                                  .then(({ data }) => {\n                                      console.log('got data', data);\n                                      toast.success((t('organization.appointment_prices.toast_add_success')), {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                    }).catch((error) => {\n                                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                      console.log('there was an error sending the query', error)\n                                      setSubmitting(false)\n                                    })\n                              }}\n                              >\n                              {({ isSubmitting, errors, values }) => (\n                                <OrganizationAppointmentPriceForm\n                                  inputData={inputData}\n                                  isSubmitting={isSubmitting}\n                                  errors={errors}\n                                  values={values}\n                                  return_url={\"/organization/appointment_categories/\" + match.params.category_id + \"/appointments/prices/\" + match.params.appointment_id}\n                                />\n                              )}\n                          </Formik>\n                      )}\n                    </Mutation>\n                )}}\n              </Query>                    \n          </Card>\n          </Grid.Col>\n          <Grid.Col md={3}>\n            <HasPermissionWrapper permission=\"add\"\n                                  resource=\"organizationappointmentprice\">\n              <Button color=\"primary btn-block mb-6\"\n                      onClick={() => history.push(\"/organization/appointment_categories/\" + match.params.category_id + \"/appointments/prices/\" + match.params.appointment_id)}>\n                <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n              </Button>\n            </HasPermissionWrapper>\n            <OrganizationMenu activeLink='appointments'/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n    </div>\n  </SiteWrapper>\n);\n\nexport default withTranslation()(withRouter(OrganizationAppointmentPriceAdd))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { Query, Mutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_APPOINTMENT_PRICES_QUERY, GET_APPOINTMENT_PRICE_QUERY } from './queries'\nimport { APPOINTMENT_PRICE_SCHEMA } from './yupSchema'\nimport OrganizationAppointmentPriceForm from './OrganizationAppointmentPriceForm'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../../../OrganizationMenu\"\n\n\nconst UPDATE_APPOINTMENT_PRICE = gql`\n  mutation UpdateOrganizationAppointmentPrice($input: UpdateOrganizationAppointmentPriceInput!) {\n    updateOrganizationAppointmentPrice(input: $input) {\n      organizationAppointmentPrice {\n        id\n        account {\n          id\n          fullName\n        }\n        organizationAppointment {\n          id\n          name\n        }\n        price\n        financeTaxRate {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\n\nclass OrganizationAppointmentPriceEdit extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Organization appointment edit props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const match = this.props.match\n    const history = this.props.history\n    const id = match.params.id\n    const appointment_id = match.params.appointment_id\n    const category_id = match.params.category_id\n    const return_url = \"/organization/appointment_categories/\" + category_id + \"/appointments/prices/\" + appointment_id\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title={t('organization.title')} />\n            <Grid.Row>\n              <Grid.Col md={9}>\n              <Card>\n                <Card.Header>\n                  <Card.Title>{t('organization.appointment_prices.title_edit')}</Card.Title>\n                  {console.log(match.params.id)}\n                </Card.Header>\n                <Query query={GET_APPOINTMENT_PRICE_QUERY} variables={{ id: id }} >\n                {({ loading, error, data, refetch }) => {\n                    // Loading\n                    if (loading) return <p>{t('general.loading_with_dots')}</p>\n                    // Error\n                    if (error) {\n                      console.log(error)\n                      return <p>{t('general.error_sad_smiley')}</p>\n                    }\n                    \n                    const inputData = data\n                    const initialData = data.organizationAppointmentPrice\n                    console.log('query data')\n                    console.log(data)\n\n                    let initialAccount = \"\"\n                    if (initialData.account) {\n                      initialAccount = initialData.account.id\n                    }\n\n                    let initialFinanceTaxRate = \"\"\n                    if (initialData.financeTaxRate) {\n                      initialFinanceTaxRate =  initialData.financeTaxRate.id\n                    } \n\n                    return (\n                      \n                      <Mutation mutation={UPDATE_APPOINTMENT_PRICE} onCompleted={() => history.push(return_url)}> \n                      {(updateLocation, { data }) => (\n                          <Formik\n                              initialValues={{ \n                                account: initialAccount,\n                                price: initialData.price, \n                                financeTaxRate: initialFinanceTaxRate,\n                              }}\n                              validationSchema={APPOINTMENT_PRICE_SCHEMA}\n                              onSubmit={(values, { setSubmitting }) => {\n                                  console.log('submit values:')\n                                  console.log(values)\n\n                                  updateLocation({ variables: {\n                                    input: {\n                                      id: match.params.id,\n                                      account: values.account,\n                                      price: values.price,\n                                      financeTaxRate: values.financeTaxRate,\n                                    }\n                                  }, refetchQueries: [\n                                    {query: GET_APPOINTMENT_PRICES_QUERY,\n                                      variables: {organizationAppointment: match.params.appointment_id }}\n                                  ]})\n                                  .then(({ data }) => {\n                                      console.log('got data', data)\n                                      toast.success((t('organization.appointment_prices.toast_edit_success')), {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                    }).catch((error) => {\n                                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                      console.log('there was an error sending the query', error)\n                                      setSubmitting(false)\n                                    })\n                              }}\n                              >\n                              {({ isSubmitting, errors, values }) => (\n                                <OrganizationAppointmentPriceForm\n                                  inputData={inputData}\n                                  isSubmitting={isSubmitting}\n                                  errors={errors}\n                                  values={values}\n                                  return_url={return_url}\n                                />\n                              )}\n                          </Formik>\n                      )}\n                      </Mutation>\n                      )}}\n                </Query>\n              </Card>\n              </Grid.Col>\n              <Grid.Col md={3}>\n                <HasPermissionWrapper permission=\"change\"\n                                      resource=\"organizationappointmentprice\">\n                  <Button color=\"primary btn-block mb-6\"\n                          onClick={() => history.push(return_url)}>\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </HasPermissionWrapper>\n                <OrganizationMenu activeLink='appointments'/>\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n    </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(OrganizationAppointmentPriceEdit))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nfunction OrganizationClasspassesBase({t, children, showBack=false}) {\n  const activeLink = \"classpasses\"\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"organization.title\")}>\n            <div className=\"page-options d-flex\">\n              <Link to=\"/organization/classpasses/groups\" \n                    className='btn btn-outline-secondary btn-sm'>\n                  <Icon prefix=\"fe\" name=\"folder\" /> {t('general.groups')}\n              </Link>\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ?\n                <Link to=\"/organization/classpasses/\">\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-let\" /> {t('general.back')}\n                  </Button>\n                </Link>            \n              :\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"organizationclasspass\">\n                  <Link to=\"/organization/classpasses/add\">\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.classpasses.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>              \n              }\n\n              <OrganizationMenu activeLink={activeLink}/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  ) \n}\n\n\nexport default withTranslation()(withRouter(OrganizationClasspassesBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_CLASSPASSES_QUERY = gql`\n  query OrganizationClasspasses($after: String, $before: String, $archived: Boolean) {\n    organizationClasspasses(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          displayPublic\n          displayShop\n          trialPass\n          name\n          description\n          price\n          priceDisplay\n          financeTaxRate {\n            id\n            name\n          }\n          validity\n          validityUnit\n          validityUnitDisplay\n          classes\n          unlimited\n          organizationMembership {\n            id\n            name\n          }\n          quickStatsAmount\n          financeGlaccount {\n            id \n            name\n          }\n          financeCostcenter {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`\n\nexport const GET_CLASSPASS_QUERY = gql`\n  query OrganizationClasspass($id: ID!, $after: String, $before: String) {\n    organizationClasspass(id:$id) {\n      id\n      archived\n      displayPublic\n      displayShop\n      trialPass\n      trialTimes\n      name\n      description\n      price\n      priceDisplay\n      financeTaxRate {\n        id\n        name\n      }\n      validity\n      validityUnit\n      validityUnitDisplay\n      classes\n      unlimited\n      organizationMembership {\n        id\n        name\n      }\n      quickStatsAmount\n      financeGlaccount {\n        id \n        name\n      }\n      financeCostcenter {\n        id\n        name\n      }\n    }\n    organizationMemberships(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    financeTaxRates(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          percentage\n          rateType\n        }\n      }\n    }\n    financeGlaccounts(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    financeCostcenters(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n  }\n`\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query InputValues($after: String, $before: String) {\n    organizationMemberships(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    financeTaxRates(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          percentage\n          rateType\n        }\n      }\n    }\n    financeGlaccounts(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    financeCostcenters(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n  }\n`\n\nexport const CREATE_CLASSPASS = gql`\nmutation CreateClasspass($input: CreateOrganizationClasspassInput!) {\n  createOrganizationClasspass(input: $input) {\n    organizationClasspass {\n      id\n      displayPublic\n      displayShop\n      name\n      description\n      price\n      financeTaxRate {\n        id\n        name\n      }\n      validity\n      validityUnit\n      classes\n      unlimited\n      organizationMembership {\n        id\n        name\n      }\n      quickStatsAmount\n      financeGlaccount {\n        id\n        name\n      }\n      financeCostcenter {\n        id\n        name\n      }\n    }\n  }\n}\n`\n\nexport const UPDATE_CLASSPASS = gql`\n  mutation UpdateOrganizationClasspass($input: UpdateOrganizationClasspassInput!) {\n    updateOrganizationClasspass(input: $input) {\n      organizationClasspass {\n        id\n        displayPublic\n        displayShop\n        name\n        description\n        price\n        financeTaxRate {\n          id\n          name\n        }\n        validity\n        validityUnit\n        classes\n        unlimited\n        organizationMembership {\n          id\n          name\n        }\n        quickStatsAmount\n        financeGlaccount {\n          id\n          name\n        }\n        financeCostcenter {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const ARCHIVE_CLASSPASS = gql`\nmutation ArchiveOrganizationClasspass($input: ArchiveOrganizationClasspassInput!) {\n  archiveOrganizationClasspass(input: $input) {\n    organizationClasspass {\n      id\n      archived\n    }\n  }\n}\n`\n","// @flow\n\nimport React, { useState } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Table\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport BadgeBoolean from \"../../ui/BadgeBoolean\"\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationClasspassesBase from './OrganizationClasspassesBase'\n\nimport { GET_CLASSPASSES_QUERY, ARCHIVE_CLASSPASS } from \"./queries\"\n\n\nfunction OrganizationClasspasses({t, history}) {\n  const cardTitle = t('organization.classpasses.title')\n  let [archived, setArchived] = useState(false)\n\n  const { loading, error, data, refetch, fetchMore } = useQuery(GET_CLASSPASSES_QUERY)\n  const [ archiveClasspass ] = useMutation(ARCHIVE_CLASSPASS)\n\n  const headerOptions = <Card.Options>\n    <Button color={(!archived) ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {setArchived(false); refetch({archived: archived});}}>\n      {t('general.current')}\n    </Button>\n    <Button color={(archived) ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {setArchived(true); refetch({archived: archived});}}>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  if (loading) return (\n    <OrganizationClasspassesBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationClasspassesBase>\n  )\n\n  if (error) return (\n    <OrganizationClasspassesBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('organization.classpasses.error_loading')}</p>\n      </ContentCard>\n    </OrganizationClasspassesBase>\n  )\n\n  let classpasses = data.organizationClasspasses\n\n  // Empty list\n  if (!classpasses.edges.length) { return (\n    <OrganizationClasspassesBase>\n      <ContentCard cardTitle={cardTitle}\n                    headerContent={headerOptions}>\n        <p>\n          {(!archived) ? t('organization.classpasses.empty_list') : t(\"organization.classpasses.empty_archive\")}\n        </p>\n      </ContentCard>\n    </OrganizationClasspassesBase>\n  )}\n\n  return (\n    <OrganizationClasspassesBase>\n      <ContentCard \n        cardTitle={cardTitle}\n        headerContent={headerOptions}\n        pageInfo={classpasses.pageInfo}\n        onLoadMore={() => {\n        fetchMore({\n          variables: {\n            after: classpasses.pageInfo.endCursor\n          },\n          updateQuery: (previousResult, { fetchMoreResult }) => {\n            const newEdges = fetchMoreResult.organizationClasspasses.edges\n            const pageInfo = fetchMoreResult.organizationClasspasses.pageInfo\n\n            return newEdges.length\n              ? {\n                  // Put the new memberships at the end of the list and update `pageInfo`\n                  // so we have the new `endCursor` and `hasNextPage` values\n                  organizationMemberships: {\n                    __typename: previousResult.organizationClasspasses.__typename,\n                    edges: [ ...previousResult.organizationClasspasses.edges, ...newEdges ],\n                    pageInfo\n                  }\n                }\n              : previousResult\n            }\n          })\n        }} \n      >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.shop')}</Table.ColHeader>\n              <Table.ColHeader>{t('organization.classpasses.trial_pass')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.classes')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.price')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.validity')}</Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {classpasses.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    {node.name}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    <BadgeBoolean value={node.displayPublic} />\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    <BadgeBoolean value={node.displayShop} />\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    <BadgeBoolean value={node.trialPass} />\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {(node.unlimited) ? t('general.unlimited') : node.classes }\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.priceDisplay} <br />\n                    {(node.financeTaxRate) ? \n                      <span className=\"text-muted\">{node.financeTaxRate.name}</span>\n                      : \"\"\n                    }\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.validity} <br />\n                    <span className=\"text-muted\">\n                      {node.validityUnitDisplay}\n                    </span>\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    {(node.archived) ? \n                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                      <Button className='btn-sm' \n                              onClick={() => history.push(\"/organization/classpasses/edit/\" + node.id)}\n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    }\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                        title={t('general.archive')} \n                        href=\"\"\n                        onClick={() => {\n                          console.log(\"clicked archived\")\n                          let id = node.id\n                          archiveClasspass({ variables: {\n                            input: {\n                            id,\n                            archived: !archived\n                            }\n                    }, refetchQueries: [\n                        {query: GET_CLASSPASSES_QUERY, variables: {\"archived\": archived }}\n                    ]}).then(({ data }) => {\n                      console.log('got data', data);\n                      toast.success(\n                        (archived) ? t('general.unarchived'): t('general.archived'), {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                    }).catch((error) => {\n                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                      console.log('there was an error sending the query', error);\n                    })\n                    }}>\n                      <Icon prefix=\"fa\" name=\"inbox\" />\n                    </button>\n                      </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </OrganizationClasspassesBase>\n  )\n}\n\n\n// const OrganizationClasspasses = ({ t, history, archived=false }) => (\n//   <SiteWrapper>\n//     <div className=\"my-3 my-md-5\">\n//       <Container>\n//         <Page.Header title={t(\"organization.title\")}>\n//          <div className=\"page-options d-flex\">\n//             <Link to=\"/organization/classpasses/groups\" \n//                   className='btn btn-outline-secondary btn-sm'>\n//                 <Icon prefix=\"fe\" name=\"folder\" /> {t('general.groups')}\n//             </Link>\n//           </div>\n//         </Page.Header>\n//         <Grid.Row>\n//           <Grid.Col md={9}>\n//             <Query query={GET_CLASSPASSES_QUERY} variables={{ archived }}>\n//              {({ loading, error, data: {organizationClasspasses: classpasses}, refetch, fetchMore }) => {\n//                 // Loading\n//                 if (loading) return (\n//                   <ContentCard cardTitle={t('organization.classpasses.title')}>\n//                     <Dimmer active={true}\n//                             loader={true}>\n//                     </Dimmer>\n//                   </ContentCard>\n//                 )\n//                 // Error\n//                 if (error) return (\n//                   <ContentCard cardTitle={t('organization.classpasses.title')}>\n//                     <p>{t('organization.classpasses.error_loading')}</p>\n//                   </ContentCard>\n//                 )\n//                 const headerOptions = <Card.Options>\n//                   {/* <Link to=\"/organization/classpasses/groups\">\n//                     <Button color='secondary'  \n//                             size=\"sm\"\n//                             icon=\"folder\"\n//                             // onClick={() => {archived=false; refetch({archived});}}>\n//                             >\n//                       {t('general.groups')}\n//                     </Button>\n//                   </Link>\n//                   <CardHeaderSeparator /> */}\n//                   <Button color={(!archived) ? 'primary': 'secondary'}  \n//                           size=\"sm\"\n//                           onClick={() => {archived=false; refetch({archived});}}>\n//                     {t('general.current')}\n//                   </Button>\n//                   <Button color={(archived) ? 'primary': 'secondary'} \n//                           size=\"sm\" \n//                           className=\"ml-2\" \n//                           onClick={() => {archived=true; refetch({archived});}}>\n//                     {t('general.archive')}\n//                   </Button>\n//                 </Card.Options>\n                \n//                 // Empty list\n//                 if (!classpasses.edges.length) { return (\n//                   <ContentCard cardTitle={t('organization.classpasses.title')}\n//                                headerContent={headerOptions}>\n//                     <p>\n//                     {(!archived) ? t('organization.classpasses.empty_list') : t(\"organization.classpasses.empty_archive\")}\n//                     </p>\n                   \n//                   </ContentCard>\n//                 )} else {   \n//                 // Life's good! :)\n//                 return (\n//                   <ContentCard cardTitle={t('organization.classpasses.title')}\n//                                headerContent={headerOptions}\n//                                pageInfo={classpasses.pageInfo}\n//                                onLoadMore={() => {\n//                                 fetchMore({\n//                                   variables: {\n//                                     after: classpasses.pageInfo.endCursor\n//                                   },\n//                                   updateQuery: (previousResult, { fetchMoreResult }) => {\n//                                     const newEdges = fetchMoreResult.organizationClasspasses.edges\n//                                     const pageInfo = fetchMoreResult.organizationClasspasses.pageInfo\n\n//                                     return newEdges.length\n//                                       ? {\n//                                           // Put the new memberships at the end of the list and update `pageInfo`\n//                                           // so we have the new `endCursor` and `hasNextPage` values\n//                                           organizationMemberships: {\n//                                             __typename: previousResult.organizationClasspasses.__typename,\n//                                             edges: [ ...previousResult.organizationClasspasses.edges, ...newEdges ],\n//                                             pageInfo\n//                                           }\n//                                         }\n//                                       : previousResult\n//                                   }\n//                                 })\n//                               }} >\n//                     <Table>\n//                           <Table.Header>\n//                             <Table.Row key={v4()}>\n//                               <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n//                               <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n//                               <Table.ColHeader>{t('general.shop')}</Table.ColHeader>\n//                               <Table.ColHeader>{t('organization.classpasses.trial_pass')}</Table.ColHeader>\n//                               <Table.ColHeader>{t('general.classes')}</Table.ColHeader>\n//                               <Table.ColHeader>{t('general.price')}</Table.ColHeader>\n//                               <Table.ColHeader>{t('general.validity')}</Table.ColHeader>\n//                             </Table.Row>\n//                           </Table.Header>\n//                           <Table.Body>\n//                               {classpasses.edges.map(({ node }) => (\n//                                 <Table.Row key={v4()}>\n//                                   <Table.Col key={v4()}>\n//                                     {node.name}\n//                                   </Table.Col>\n//                                   <Table.Col key={v4()}>\n//                                     <BadgeBoolean value={node.displayPublic} />\n//                                   </Table.Col>\n//                                   <Table.Col key={v4()}>\n//                                     <BadgeBoolean value={node.displayShop} />\n//                                   </Table.Col>\n//                                   <Table.Col key={v4()}>\n//                                     <BadgeBoolean value={node.trialPass} />\n//                                   </Table.Col>\n//                                   <Table.Col key={v4()}>\n//                                     {(node.unlimited) ? t('general.unlimited') : node.classes }\n//                                   </Table.Col>\n//                                   <Table.Col key={v4()}>\n//                                     {node.priceDisplay} <br />\n//                                     {(node.financeTaxRate) ? \n//                                       <span className=\"text-muted\">{node.financeTaxRate.name}</span>\n//                                       : \"\"\n//                                     }\n//                                   </Table.Col>\n//                                   <Table.Col key={v4()}>\n//                                     {node.validity} <br />\n//                                     <span className=\"text-muted\">\n//                                       {node.validityUnitDisplay}\n//                                     </span>\n//                                   </Table.Col>\n//                                   <Table.Col className=\"text-right\" key={v4()}>\n//                                     {(node.archived) ? \n//                                       <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n//                                       <Button className='btn-sm' \n//                                               onClick={() => history.push(\"/organization/classpasses/edit/\" + node.id)}\n//                                               color=\"secondary\">\n//                                         {t('general.edit')}\n//                                       </Button>\n//                                     }\n//                                   </Table.Col>\n//                                   <Table.Col className=\"text-right\" key={v4()}>\n//                                     <button className=\"icon btn btn-link btn-sm\" \n//                                         title={t('general.archive')} \n//                                         href=\"\"\n//                                         onClick={() => {\n//                                           console.log(\"clicked archived\")\n//                                           let id = node.id\n//                                           archiveClasspass({ variables: {\n//                                             input: {\n//                                             id,\n//                                             archived: !archived\n//                                             }\n//                                     }, refetchQueries: [\n//                                         {query: GET_CLASSPASSES_QUERY, variables: {\"archived\": archived }}\n//                                     ]}).then(({ data }) => {\n//                                       console.log('got data', data);\n//                                       toast.success(\n//                                         (archived) ? t('general.unarchived'): t('general.archived'), {\n//                                           position: toast.POSITION.BOTTOM_RIGHT\n//                                         })\n//                                     }).catch((error) => {\n//                                       toast.error((t('general.toast_server_error')) + ': ' +  error, {\n//                                           position: toast.POSITION.BOTTOM_RIGHT\n//                                         })\n//                                       console.log('there was an error sending the query', error);\n//                                     })\n//                                     }}>\n//                                       <Icon prefix=\"fa\" name=\"inbox\" />\n//                                     </button>\n//                                       </Table.Col>\n//                                 </Table.Row>\n//                               ))}\n//                           </Table.Body>\n//                         </Table>\n//                   </ContentCard>\n//                 )}}\n//              }\n//             </Query>\n//           </Grid.Col>\n//           <Grid.Col md={3}>\n//             <HasPermissionWrapper permission=\"add\"\n//                                   resource=\"organizationclasspass\">\n//               <Button color=\"primary btn-block mb-6\"\n//                       onClick={() => history.push(\"/organization/classpasses/add\")}>\n//                 <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.classpasses.add')}\n//               </Button>\n//             </HasPermissionWrapper>\n//             <OrganizationMenu activeLink='classpasses'/>\n//           </Grid.Col>\n//         </Grid.Row>\n//       </Container>\n//     </div>\n//   </SiteWrapper>\n// );\n\nexport default withTranslation()(withRouter(OrganizationClasspasses))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const CLASSPASS_SCHEMA = Yup.object().shape({\n  name: Yup.string()\n  .min(3, t('yup.min_len_3'))\n  .required(t('yup.field_required')),\n  price: Yup.number()\n    .required(t('yup.field_required')),\n  financeTaxRate: Yup.string()\n    .required(t('yup.field_required')),\n  validity: Yup.number()\n    .positive(t('yup.positive_number_required'))\n    .required(t('yup.field_required')),\n  validityUnit: Yup.string()\n    .required(t('yup.field_required')),\n  classes: Yup.number(),\n  quickStatsAmount: Yup.number()\n})\n\n","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from \"uuid\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../plugin_config/tinymce\"\n\n\nimport {\n  Grid,\n  Button,\n  Card,\n  Form\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\n\nclass OrganizationClasspassForm extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Organization classpass form props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const match = this.props.match\n    const history = this.props.history\n    const id = match.params.id\n    const return_url = \"/organization/classpasses\"\n    const initialData = this.props.initialData\n    const isSubmitting = this.props.isSubmitting\n    const setFieldValue = this.props.setFieldValue\n    const setFieldTouched = this.props.setFieldTouched\n    const errors = this.props.errors\n    const values = this.props.values\n\n    return (\n        <FoForm>\n            <Card.Body> \n            <Form.Group>\n                <Form.Label className=\"custom-switch\">\n                    <Field \n                    className=\"custom-switch-input\"\n                    type=\"checkbox\" \n                    name=\"displayPublic\" \n                    checked={values.displayPublic} />\n                    <span className=\"custom-switch-indicator\" ></span>\n                    <span className=\"custom-switch-description\">{t('organization.classpass.public')}</span>\n                </Form.Label>\n                <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n            </Form.Group>      \n            <Form.Group>\n                <Form.Label className=\"custom-switch\">\n                    <Field \n                    className=\"custom-switch-input\"\n                    type=\"checkbox\" \n                    name=\"displayShop\" \n                    checked={values.displayShop} />\n                    <span className=\"custom-switch-indicator\" ></span>\n                    <span className=\"custom-switch-description\">{t('organization.classpass.shop')}</span>\n                </Form.Label>\n                <ErrorMessage name=\"displayShop\" component=\"div\" />   \n            </Form.Group> \n            <Grid.Row>\n              <Grid.Col>\n                <Form.Group>\n                  <Form.Label className=\"custom-switch\">\n                      <Field \n                      className=\"custom-switch-input\"\n                      type=\"checkbox\" \n                      name=\"trialPass\" \n                      checked={values.trialPass} />\n                      <span className=\"custom-switch-indicator\" ></span>\n                      <span className=\"custom-switch-description\">{t('organization.classpass.trial_pass')}</span>\n                  </Form.Label>\n                  <ErrorMessage name=\"displayShop\" component=\"div\" />   \n                </Form.Group>\n              </Grid.Col>\n            </Grid.Row>  \n            { (!values.trialPass) ? \"\" : \n              <Form.Group label={t('organization.classpass.trial_times')} >\n                <Field type=\"text\" \n                    name=\"trialTimes\" \n                    className={(errors.trialTimes) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n                <ErrorMessage name=\"trialTimes\" component=\"span\" className=\"invalid-feedback\" />\n              </Form.Group>\n            }                \n            <Form.Group label={t('general.name')} >\n                <Field type=\"text\" \n                    name=\"name\" \n                    className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n                <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n            <Form.Group label={t('general.description')}>\n                <Editor\n                  tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n                  textareaName=\"description\"\n                  initialValue={values.description}\n                  init={tinymceBasicConf}\n                  onBlur={(e) => {\n                    setFieldTouched(\"description\", true)\n                    setFieldValue(\"description\", e.target.getContent())\n                  }}\n                />\n                <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n            <Grid.Row>\n              <Grid.Col>\n                <Form.Group label={t('general.price')}>\n                    <Field type=\"text\" \n                        name=\"price\" \n                        className={(errors.price) ? \"form-control is-invalid\" : \"form-control\"} \n                        autoComplete=\"off\" />\n                    <ErrorMessage name=\"price\" component=\"span\" className=\"invalid-feedback\" />\n                </Form.Group>\n              </Grid.Col>\n              <Grid.Col>\n                <Form.Group label={t('general.taxrate')}>\n                  <Field component=\"select\" \n                          name=\"financeTaxRate\" \n                          className={(errors.financeTaxRate) ? \"form-control is-invalid\" : \"form-control\"} \n                          autoComplete=\"off\">\n                  {console.log(\"query data in classpass add:\")}\n                  {console.log(initialData)}\n                  <option value=\"\" key={v4()}></option>\n                  {initialData.financeTaxRates.edges.map(({ node }) =>\n                      <option value={node.id} key={v4()}>{node.name} ({node.percentage}% {node.rateType})</option>\n                  )}\n                  </Field>\n                  <ErrorMessage name=\"financeTaxRate\" component=\"span\" className=\"invalid-feedback\" />\n                </Form.Group>\n              </Grid.Col>\n            </Grid.Row>\n            <Grid.Row>\n              <Grid.Col>\n                <Form.Group label={t('general.validity')}>\n                  <Field type=\"text\" \n                      name=\"validity\" \n                      className={(errors.validity) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n                  <ErrorMessage name=\"validity\" component=\"span\" className=\"invalid-feedback\" />\n                </Form.Group>\n              </Grid.Col>\n              <Grid.Col>\n                <Form.Group label={t('general.validity_unit')}>\n                  <Field component=\"select\" \n                          name=\"validityUnit\" \n                          className={(errors.validityUnit) ? \"form-control is-invalid\" : \"form-control\"} \n                          autoComplete=\"off\">\n                  <option value=\"DAYS\" key={v4()}>{t('validity.days')}</option>\n                  <option value=\"WEEKS\" key={v4()}>{t('validity.weeks')}</option>\n                  <option value=\"MONTHS\" key={v4()}>{t('validity.months')}</option>\n                  </Field>\n                  <ErrorMessage name=\"validityUnit\" component=\"span\" className=\"invalid-feedback\" />\n                </Form.Group>\n              </Grid.Col>\n            </Grid.Row>\n            <Form.Group>\n                <Form.Label className=\"custom-switch\">\n                    <Field \n                    className=\"custom-switch-input\"\n                    type=\"checkbox\" \n                    name=\"unlimited\" \n                    checked={values.unlimied} />\n                    <span className=\"custom-switch-indicator\" ></span>\n                    <span className=\"custom-switch-description\">{t('general.unlimited')}</span>\n                </Form.Label>\n                <ErrorMessage name=\"unlimited\" component=\"div\" />   \n            </Form.Group>  \n            { (values.unlimited) ? \"\" :\n            <Form.Group label={t('general.classes')}>\n                <Field type=\"text\" \n                        name=\"classes\" \n                        className={(errors.classes) ? \"form-control is-invalid\" : \"form-control\"} \n                        autoComplete=\"off\" />\n                <ErrorMessage name=\"classes\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> } \n            {/* <Form.Group label={t('general.membership')}>\n                <Field component=\"select\" \n                        name=\"organizationMembership\" \n                        className={(errors.organizationMembership) ? \"form-control is-invalid\" : \"form-control\"} \n                        autoComplete=\"off\">\n                <option value=\"\" key={v4()}>{t(\"general.membership_not_required\")}</option>\n                {initialData.organizationMemberships.edges.map(({ node }) =>\n                    <option value={node.id} key={v4()}>{node.name} ({node.code})</option>\n                )}\n                </Field>\n                <ErrorMessage name=\"organizationMembership\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>  */}\n            { (values.unlimited) ? \n                    <Form.Group label={t('general.quickStatsAmount')}>\n                    <Field type=\"text\" \n                            name=\"quickStatsAmount\" \n                            className={(errors.quickStatsAmount) ? \"form-control is-invalid\" : \"form-control\"} \n                            autoComplete=\"off\" />\n                    <ErrorMessage name=\"quickStatsAmount\" component=\"span\" className=\"invalid-feedback\" />\n                    </Form.Group>\n                    : \"\"\n            }\n            <Grid.Row>\n              <Grid.Col>\n                <Form.Group label={t('general.glaccount')}>\n                  <Field component=\"select\" \n                          name=\"financeGlaccount\" \n                          className={(errors.financeGlaccount) ? \"form-control is-invalid\" : \"form-control\"} \n                          autoComplete=\"off\">\n                  <option value=\"\" key={v4()}></option>\n                  {initialData.financeGlaccounts.edges.map(({ node }) =>\n                      <option value={node.id} key={v4()}>{node.name} ({node.code})</option>\n                  )}\n                  </Field>\n                  <ErrorMessage name=\"financeGlaccount\" component=\"span\" className=\"invalid-feedback\" />\n                </Form.Group>\n              </Grid.Col>\n              <Grid.Col>\n                <Form.Group label={t('general.costcenter')}>\n                  <Field component=\"select\" \n                          name=\"financeCostcenter\" \n                          className={(errors.financeCostcenter) ? \"form-control is-invalid\" : \"form-control\"} \n                          autoComplete=\"off\">\n                  <option value=\"\" key={v4()}></option>\n                  {initialData.financeCostcenters.edges.map(({ node }) =>\n                      <option value={node.id} key={v4()}>{node.name} ({node.code})</option>\n                  )}\n                  </Field>\n                  <ErrorMessage name=\"financeCostcenter\" component=\"span\" className=\"invalid-feedback\" />\n                </Form.Group>\n              </Grid.Col>\n            </Grid.Row>\n            </Card.Body>\n            <Card.Footer>\n                <Button \n                className=\"pull-right\"\n                color=\"primary\"\n                disabled={isSubmitting}\n                type=\"submit\"\n                >\n                {t('general.submit')}\n                </Button>\n                <Button\n                type=\"button\" \n                color=\"link\" \n                onClick={() => history.push(return_url)}\n                >\n                    {t('general.cancel')}\n                </Button>\n            </Card.Footer>\n        </FoForm>\n    ) \n  }\n}\n\n\nexport default withTranslation()(withRouter(OrganizationClasspassForm))","import React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_CLASSPASSES_QUERY, GET_INPUT_VALUES_QUERY, CREATE_CLASSPASS } from './queries'\nimport { CLASSPASS_SCHEMA } from './yupSchema'\n\nimport {\n  Card,\n  Dimmer\n} from \"tabler-react\";\n\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationClasspassesBase from './OrganizationClasspassesBase';\nimport OrganizationClasspassForm from \"./OrganizationClasspassForm\"\n\n\nfunction OrganizationClasspassAdd({t, match, history}) {\n  const cardTitle = t('organization.classpasses.title_add')\n  const returnUrl = \"/organization/classpasses\"\n  const { loading, error, data } = useQuery(GET_INPUT_VALUES_QUERY)\n  const [createClasspass] = useMutation(CREATE_CLASSPASS)\n\n  if (loading) return (\n    <OrganizationClasspassesBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationClasspassesBase>\n  )\n\n  if (error) return (\n    <OrganizationClasspassesBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </OrganizationClasspassesBase>\n  )\n\n                    \n  console.log('query data')\n  console.log(data)\n  const initialData = data\n\n  return (\n    <OrganizationClasspassesBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n          initialValues={{ \n            displayPublic: true,\n            displayShop: true,\n            trialPass: false,\n            trialTimes: 1,\n            name: \"\",\n            description: \"\",\n            price: 0,\n            financeTaxRate: \"\",\n            validity: 1,\n            validityUnit: \"MONTHS\",\n            classes: 1,\n            unlimited: false,\n            organizationMembership: \"\",\n            quickStatsAmount: 0,\n            financeGlaccount: \"\",\n            financeCostcenter: \"\"\n          }}\n          validationSchema={CLASSPASS_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              createClasspass({ variables: {\n                input: {\n                  displayPublic: values.displayPublic,\n                  displayShop: values.displayShop,\n                  trialPass: values.trialPass,\n                  trialTimes: values.trialTimes,\n                  name: values.name,\n                  description: values.description,\n                  price: values.price,\n                  financeTaxRate: values.financeTaxRate,\n                  validity: values.validity,\n                  validityUnit: values.validityUnit,\n                  classes: values.classes,\n                  unlimited: values.unlimited,\n                  organizationMembership: values.organizationMembership,\n                  quickStatsAmount: values.quickStatsAmount,\n                  financeGlaccount: values.financeGlaccount,\n                  financeCostcenter: values.financeCostcenter\n                }\n              }, refetchQueries: [\n                  {query: GET_CLASSPASSES_QUERY, variables: {\"archived\": false }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('organization.classpasses.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n            <OrganizationClasspassForm \n              initialData = {initialData}\n              isSubmitting = {isSubmitting}\n              setFieldValue = {setFieldValue}\n              setFieldTouched = {setFieldTouched}\n              errors = {errors}\n              values = {values}\n            />\n          )}\n        </Formik>\n      </Card>\n    </OrganizationClasspassesBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationClasspassAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_CLASSPASSES_QUERY, GET_CLASSPASS_QUERY, UPDATE_CLASSPASS } from './queries'\nimport { CLASSPASS_SCHEMA } from './yupSchema'\n\nimport {\n  Card,\n  Dimmer\n} from \"tabler-react\";\n\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationClasspassesBase from './OrganizationClasspassesBase'\nimport OrganizationClasspassForm from \"./OrganizationClasspassForm\"\n\n\nfunction OrganizationClasspassEdit({ t, match, history}) {\n  const id = match.params.id\n  const returnUrl = \"/organization/classpasses\"\n  const cardTitle = t('organization.classpasses.title_edit')\n  const { loading, error, data } = useQuery(GET_CLASSPASS_QUERY, {\n    variables: { id: id }\n  })\n  const [updateClasspass] = useMutation(UPDATE_CLASSPASS)\n\n  if (loading) return (\n    <OrganizationClasspassesBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationClasspassesBase>\n  )\n\n  if (error) return (\n    <OrganizationClasspassesBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </OrganizationClasspassesBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  const initialData = data\n\n  let initialMembership = \"\"\n  if (initialData.organizationClasspass.organizationMembership) {\n    initialMembership = initialData.organizationClasspass.organizationMembership.id\n  }\n\n  let initialGlaccount = \"\"\n  if (initialData.organizationClasspass.financeGlaccount) {\n    initialGlaccount =  initialData.organizationClasspass.financeGlaccount.id\n  } \n\n  let initialCostcenter = \"\"\n  if (initialData.organizationClasspass.financeCostcenter) {\n    initialCostcenter =  initialData.organizationClasspass.financeCostcenter.id\n  } \n\n  return (\n    <OrganizationClasspassesBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n          initialValues={{ \n            displayPublic: initialData.organizationClasspass.displayPublic,\n            displayShop: initialData.organizationClasspass.displayShop,\n            trialPass: initialData.organizationClasspass.trialPass,\n            trialTimes: initialData.organizationClasspass.trialTimes,\n            name: initialData.organizationClasspass.name,\n            description: initialData.organizationClasspass.description,\n            price: initialData.organizationClasspass.price,\n            financeTaxRate: initialData.organizationClasspass.financeTaxRate.id,\n            validity: initialData.organizationClasspass.validity,\n            validityUnit: initialData.organizationClasspass.validityUnit,\n            classes: initialData.organizationClasspass.classes,\n            unlimited: initialData.organizationClasspass.unlimited,\n            organizationMembership: initialMembership,\n            quickStatsAmount: initialData.organizationClasspass.quickStatsAmount,\n            financeGlaccount:  initialGlaccount,\n            financeCostcenter: initialCostcenter\n          }}\n          validationSchema={CLASSPASS_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              updateClasspass({ variables: {\n                input: {\n                  id: match.params.id,\n                  displayPublic: values.displayPublic,\n                  displayShop: values.displayShop,\n                  trialPass: values.trialPass,\n                  trialTimes: values.trialTimes,\n                  name: values.name,\n                  description: values.description,\n                  price: values.price,\n                  financeTaxRate: values.financeTaxRate,\n                  validity: values.validity,\n                  validityUnit: values.validityUnit,\n                  classes: values.classes,\n                  unlimited: values.unlimited,\n                  organizationMembership: values.organizationMembership,\n                  quickStatsAmount: values.quickStatsAmount,\n                  financeGlaccount: values.financeGlaccount,\n                  financeCostcenter: values.financeCostcenter\n                }\n              }, refetchQueries: [\n                  {query: GET_CLASSPASSES_QUERY, variables: {\"archived\": false }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  toast.success((t('organization.classpasses.toast_edit_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  setSubmitting(false)\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n            <OrganizationClasspassForm \n              initialData = {initialData}\n              isSubmitting = {isSubmitting}\n              setFieldValue = {setFieldValue}\n              setFieldTouched = {setFieldTouched}\n              errors = {errors}\n              values = {values}\n            />\n          )}\n        </Formik>\n      </Card>\n    </OrganizationClasspassesBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationClasspassEdit))","// @flow\n\nimport React, { Children } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\n\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nfunction OrganizationClasspassesGroupsBase({ t, history, children, showBack=false }) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"organization.title\")}>\n            <div className=\"page-options d-flex\">\n              <Link to=\"/organization/classpasses\" \n                    className='btn btn-outline-secondary btn-sm'>\n                  <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back_to')} {t('organization.classpasses.title')}\n              </Link>\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ?\n                <Link to={\"/organization/classpasses/groups\"}>\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t(\"general.back\")}\n                  </Button>\n                </Link>\n              :\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"organizationclasspassgroup\">\n                  <Button color=\"primary btn-block mb-6\"\n                          onClick={() => history.push(\"/organization/classpasses/groups/add\")}>\n                    <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.classpass_groups.add')}\n                  </Button>\n                </HasPermissionWrapper>              \n              }\n              <OrganizationMenu activeLink=''/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationClasspassesGroupsBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_CLASSPASS_GROUPS_QUERY = gql`\n  query OrganizationClasspassGroups($after: String, $before: String) {\n    organizationClasspassGroups(first: 15, before: $before, after: $after) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n          description\n        }\n      }\n    }\n  }\n`\n\n\nexport const GET_CLASSPASS_GROUP_QUERY = gql`\n  query OrganizationClasspassGroup($id: ID!) {\n    organizationClasspassGroup(id:$id) {\n      id\n      name\n      description\n    }\n  }\n`\n\n\nexport const GET_CLASSPASS_GROUP_PASSES_QUERY = gql`\n  query GetPassesAndGroupMembership($after: String, $before: String, $id:ID!) {\n    organizationClasspasses(first: 15, before: $before, after: $after) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n    organizationClasspassGroup(id: $id) {\n      id\n      name\n      description\n      organizationClasspasses {\n        edges {\n          node {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`\n\nexport const ADD_CLASSPASS_GROUP = gql`\nmutation CreateOrganizationClasspassGroup($input:CreateOrganizationClasspassGroupInput!) {\n  createOrganizationClasspassGroup(input: $input) {\n    organizationClasspassGroup{\n      id\n    }\n  }\n}\n`\n\nexport const UPDATE_CLASSPASS_GROUP = gql`\nmutation UpdateOrganizationClasspassGroup($input: UpdateOrganizationClasspassGroupInput!) {\n  updateOrganizationClasspassGroup(input: $input) {\n    organizationClasspassGroup {\n      id\n      name\n    }\n  }\n}\n`\n\nexport const DELETE_CLASSPASS_GROUP = gql`\n  mutation DeleteClasspassGroup($input: DeleteOrganizationClasspassGroupInput!) {\n    deleteOrganizationClasspassGroup(input: $input) {\n      ok\n    }\n  }\n`\n\nexport const ADD_CARD_TO_GROUP = gql`\n  mutation AddCardToGroup($input: CreateOrganizationClasspassGroupClasspassInput!) {\n    createOrganizationClasspassGroupClasspass(input:$input) {\n      organizationClasspassGroupClasspass {\n        id\n        organizationClasspass {\n          id\n          name\n        }\n        organizationClasspassGroup {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const DELETE_CARD_FROM_GROUP = gql`\n  mutation DeleteCardFromGroup($input: DeleteOrganizationClasspassGroupClasspassInput!) {\n    deleteOrganizationClasspassGroupClasspass(input:$input) {\n      ok\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Icon,\n  Dimmer,\n  Button,\n  Table\n} from \"tabler-react\";\n\nimport confirm_delete from \"../../../tools/confirm_delete\"\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationClasspassesGroupsBase from \"./OrganizationClasspassesGroupsBase\"\n\nimport { GET_CLASSPASS_GROUPS_QUERY, DELETE_CLASSPASS_GROUP } from \"./queries\"\n\n\nfunction OrganizationClasspassesGroups({ t, history}) {\n  const { loading, error, data, fetchMore } = useQuery(GET_CLASSPASS_GROUPS_QUERY)\n  const [deleteClasspassGroup] = useMutation(DELETE_CLASSPASS_GROUP)\n\n  // Loading\n  if (loading) return (\n    <OrganizationClasspassesGroupsBase>\n      <ContentCard cardTitle={t('organization.classpass_groups.title')}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationClasspassesGroupsBase>\n  )\n  // Error\n  if (error) return (\n    <OrganizationClasspassesGroupsBase>\n      <ContentCard cardTitle={t('organization.classpass_groups.title')}>\n        <p>{t('organization.classpass_groups.error_loading')}</p>\n      </ContentCard>\n    </OrganizationClasspassesGroupsBase>\n  )\n  \n  const classpass_groups = data.organizationClasspassGroups\n\n  // Empty list\n  if (!classpass_groups.edges.length) { return (\n    <OrganizationClasspassesGroupsBase>\n      <ContentCard cardTitle={t('organization.classpass_groups.title')}>\n        <p>{t('organization.classpass_groups.empty_list')}</p>\n      </ContentCard>\n    </OrganizationClasspassesGroupsBase>\n  )} \n\n  \n  // We have data\n  return (\n    <OrganizationClasspassesGroupsBase>\n      <ContentCard cardTitle={t('organization.classpass_groups.title')}\n                    pageInfo={classpass_groups.pageInfo}\n                    onLoadMore={() => {\n                    fetchMore({\n                      variables: {\n                        after: classpass_groups.pageInfo.endCursor\n                      },\n                      updateQuery: (previousResult, { fetchMoreResult }) => {\n                        const newEdges = fetchMoreResult.organizationClasspassGroups.edges\n                        const pageInfo = fetchMoreResult.organizationClasspassGroups.pageInfo\n\n                        return newEdges.length\n                          ? {\n                              // Put the new classpass_groups at the end of the list and update `pageInfo`\n                              // so we have the new `endCursor` and `hasNextPage` values\n                              organizationClasspassGroups: {\n                                __typename: previousResult.organizationClasspassGroups.__typename,\n                                edges: [ ...previousResult.organizationClasspassGroups.edges, ...newEdges ],\n                                pageInfo\n                              }\n                            }\n                          : previousResult\n                      }\n                    })\n                  }} >\n            <Table>\n              <Table.Header>\n                <Table.Row key={v4()}>\n                  <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.description')}</Table.ColHeader>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {classpass_groups.edges.map(({ node }) => (\n                  <Table.Row key={v4()}>\n                    <Table.Col key={v4()}>\n                      {node.name}\n                    </Table.Col>\n                    <Table.Col key={v4()}>\n                      {node.description.substring(0, 24)}\n                    </Table.Col>\n                    <Table.Col className=\"text-right\" key={v4()}>\n                        <Button className='btn-sm' \n                                onClick={() => history.push(\"/organization/classpasses/groups/edit/\" + node.id)}\n                                color=\"secondary\">\n                          {t('general.edit')}\n                        </Button>\n                        <Button className='btn-sm' \n                                onClick={() => history.push(\"/organization/classpasses/groups/edit/passes/\" + node.id)}\n                                color=\"secondary\">\n                          {t('organization.classpasses.groups.edit_passes')}\n                        </Button>\n                    </Table.Col>\n                    <Table.Col>\n                      <button className=\"icon btn btn-link btn-sm float-right\" \n                        title={t('general.delete')} \n                        href=\"\"\n                        onClick={() => {\n                          confirm_delete({\n                            t: t,\n                            msgConfirm: t(\"organization.classpasses.groups.delete_confirm_msg\"),\n                            msgDescription: <p>{node.name}</p>,\n                            msgSuccess: t('organization.classpasses.groups.deleted'),\n                            deleteFunction: deleteClasspassGroup,\n                            functionVariables: { variables: {\n                              input: {\n                                id: node.id\n                              }\n                            }, refetchQueries: [\n                              {query: GET_CLASSPASS_GROUPS_QUERY} \n                            ]}\n                          })\n                      }}>\n                        <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n                      </button>\n                    </Table.Col>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n      </ContentCard>\n    </OrganizationClasspassesGroupsBase>\n   )\n\n}\n\n\n\n// const OrganizationClasspassesGroups = ({ t, history }) => (\n//   <SiteWrapper>\n//     <div className=\"my-3 my-md-5\">\n//       <Container>\n//         <Page.Header title={t(\"organization.title\")}>\n//           <div className=\"page-options d-flex\">\n//             <Link to=\"/organization/classpasses\" \n//                   className='btn btn-outline-secondary btn-sm'>\n//                 <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back_to')} {t('organization.classpasses.title')}\n//             </Link>\n//           </div>\n//         </Page.Header>\n//         <Grid.Row>\n//           <Grid.Col md={9}>\n//             <Query query={GET_CLASSPASS_GROUPS_QUERY} >\n//              {({ loading, error, data: {organizationClasspassGroups: classpass_groups}, refetch, fetchMore }) => {\n//                 // Loading\n//                 if (loading) return (\n//                   <ContentCard cardTitle={t('organization.classpass_groups.title')}>\n//                     <Dimmer active={true}\n//                             loader={true}>\n//                     </Dimmer>\n//                   </ContentCard>\n//                 )\n//                 // Error\n//                 if (error) return (\n//                   <ContentCard cardTitle={t('organization.classpass_groups.title')}>\n//                     <p>{t('organization.classpass_groups.error_loading')}</p>\n//                   </ContentCard>\n//                 )\n                \n//                 // Empty list\n//                 if (!classpass_groups.edges.length) { return (\n//                   <ContentCard cardTitle={t('organization.classpass_groups.title')}>\n//                     <p>{t('organization.classpass_groups.empty_list')}</p>\n//                   </ContentCard>\n//                 )} else {   \n//                 // Life's good! :)\n//                 return (\n//                   <ContentCard cardTitle={t('organization.classpass_groups.title')}\n//                                pageInfo={classpass_groups.pageInfo}\n//                                onLoadMore={() => {\n//                                 fetchMore({\n//                                   variables: {\n//                                     after: classpass_groups.pageInfo.endCursor\n//                                   },\n//                                   updateQuery: (previousResult, { fetchMoreResult }) => {\n//                                     const newEdges = fetchMoreResult.organizationClasspassGroups.edges\n//                                     const pageInfo = fetchMoreResult.organizationClasspassGroups.pageInfo\n\n//                                     return newEdges.length\n//                                       ? {\n//                                           // Put the new classpass_groups at the end of the list and update `pageInfo`\n//                                           // so we have the new `endCursor` and `hasNextPage` values\n//                                           organizationClasspassGroups: {\n//                                             __typename: previousResult.organizationClasspassGroups.__typename,\n//                                             edges: [ ...previousResult.organizationClasspassGroups.edges, ...newEdges ],\n//                                             pageInfo\n//                                           }\n//                                         }\n//                                       : previousResult\n//                                   }\n//                                 })\n//                               }} >\n//                         <Table>\n//                           <Table.Header>\n//                             <Table.Row key={v4()}>\n//                               <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n//                             </Table.Row>\n//                           </Table.Header>\n//                           <Table.Body>\n//                               {classpass_groups.edges.map(({ node }) => (\n//                                 <Table.Row key={v4()}>\n//                                   <Table.Col key={v4()}>\n//                                     {node.name}\n//                                   </Table.Col>\n//                                   <Table.Col className=\"text-right\" key={v4()}>\n//                                       <Button className='btn-sm' \n//                                               onClick={() => history.push(\"/organization/classpasses/groups/edit/\" + node.id)}\n//                                               color=\"secondary\">\n//                                         {t('general.edit')}\n//                                       </Button>\n//                                       <Button className='btn-sm' \n//                                               onClick={() => history.push(\"/organization/classpasses/groups/edit/passes/\" + node.id)}\n//                                               color=\"secondary\">\n//                                         {t('organization.classpasses.groups.edit_passes')}\n//                                       </Button>\n//                                   </Table.Col>\n//                                   {/* <Mutation mutation={ARCHIVE_CLASSPASS_GROUP} key={v4()}>\n//                                     {(archiveCostcenter, { data }) => (\n//                                       <Table.Col className=\"text-right\" key={v4()}>\n//                                         <button className=\"icon btn btn-link btn-sm\" \n//                                            title={t('general.archive')} \n//                                            href=\"\"\n//                                            onClick={() => {\n//                                              console.log(\"clicked archived\")\n//                                              let id = node.id\n//                                              archiveCostcenter({ variables: {\n//                                                input: {\n//                                                 id,\n//                                                 archived: !archived\n//                                                }\n//                                         }, refetchQueries: [\n//                                             {query: GET_CLASSPASS_GROUPS_QUERY, variables: {\"archived\": archived }}\n//                                         ]}).then(({ data }) => {\n//                                           console.log('got data', data);\n//                                           toast.success(\n//                                             (archived) ? t('general.unarchived'): t('general.archived'), {\n//                                               position: toast.POSITION.BOTTOM_RIGHT\n//                                             })\n//                                         }).catch((error) => {\n//                                           toast.error((t('general.toast_server_error')) + ': ' +  error, {\n//                                               position: toast.POSITION.BOTTOM_RIGHT\n//                                             })\n//                                           console.log('there was an error sending the query', error);\n//                                         })\n//                                         }}>\n//                                           <Icon prefix=\"fa\" name=\"inbox\" />\n//                                         </button>\n//                                       </Table.Col>\n//                                     )}\n//                                   </Mutation> */}\n//                                 </Table.Row>\n//                               ))}\n//                           </Table.Body>\n//                         </Table>\n//                   </ContentCard>\n//                 )}}\n//              }\n//             </Query>\n//           </Grid.Col>\n//           <Grid.Col md={3}>\n//             <HasPermissionWrapper permission=\"add\"\n//                                   resource=\"organizationclasspassgroup\">\n//               <Button color=\"primary btn-block mb-6\"\n//                       onClick={() => history.push(\"/organization/classpasses/groups/add\")}>\n//                 <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.classpass_groups.add')}\n//               </Button>\n//             </HasPermissionWrapper>\n//             <OrganizationMenu activeLink=''/>\n//           </Grid.Col>\n//         </Grid.Row>\n//       </Container>\n//     </div>\n//   </SiteWrapper>\n// )\n\nexport default withTranslation()(withRouter(OrganizationClasspassesGroups))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const CLASSPASS_GROUP_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  })\n","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport { GET_CLASSPASS_GROUPS_QUERY, ADD_CLASSPASS_GROUP } from './queries'\nimport { CLASSPASS_GROUP_SCHEMA } from './yupSchema'\n\nimport {\n  Alert,\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\nimport OrganizationClasspassesGroupsBase from './OrganizationClasspassesGroupsBase';\n\n\nfunction OrganizationClasspassGroupAdd({t, history}) {\n  const returnUrl = \"/organization/classpasses/groups\"\n  const [ addClasspassGroup ] = useMutation(ADD_CLASSPASS_GROUP)\n\n  return (\n    <OrganizationClasspassesGroupsBase showBack={true}>\n      <Card title={t('organization.classpass_groups.title_add')}>\n        <Formik\n          initialValues={{ name: '', description: '' }}\n          validationSchema={CLASSPASS_GROUP_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              addClasspassGroup({ variables: {\n                input: {\n                  name: values.name, \n                  description: values.description, \n                }\n              }, refetchQueries: [\n                  {query: GET_CLASSPASS_GROUPS_QUERY}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data);\n                  history.push(returnUrl)\n                  toast.success((t('organization.classpass_groups.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors }) => (\n              <FoForm>\n                  <Card.Body>\n                    <Form.Group label={t('general.name')}>\n                      <Field type=\"text\" \n                              name=\"name\" \n                              className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                              autoComplete=\"off\" />\n                      <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                    </Form.Group>\n                    <Form.Group label={t('general.description')}>\n                      <Field type=\"text\" \n                              name=\"description\" \n                              className={(errors.description) ? \"form-control is-invalid\" : \"form-control\"} \n                              autoComplete=\"off\" />\n                      <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                    </Form.Group>\n                  </Card.Body>\n                  <Card.Footer>\n                      <Button \n                        color=\"primary\"\n                        className=\"pull-right\" \n                        type=\"submit\" \n                        disabled={isSubmitting}\n                      >\n                        {t('general.submit')}\n                      </Button>\n                      <Link to={returnUrl}>\n                        <Button color=\"link\">\n                            {t('general.cancel')}\n                        </Button>\n                      </Link>\n                      {(isSubmitting) ? \n                        <Alert type=\"primary\" hasExtraSpace>\n                          <strong>{t('general.please_wait')}</strong> {t('organization.classpass_groups.toast_creating_might_take_a_while')}\n                        </Alert> : \n                        \"\"\n                      }\n                  </Card.Footer>\n              </FoForm>\n          )}\n        </Formik>\n      </Card>\n    </OrganizationClasspassesGroupsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationClasspassGroupAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport { GET_CLASSPASS_GROUPS_QUERY, GET_CLASSPASS_GROUP_QUERY, UPDATE_CLASSPASS_GROUP } from './queries'\nimport { CLASSPASS_GROUP_SCHEMA } from './yupSchema'\n\nimport {\n  Card,\n  Dimmer,\n  Button,\n  Form\n} from \"tabler-react\";\n\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationClasspassesGroupsBase from './OrganizationClasspassesGroupsBase';\n\n\nfunction OrganizationClasspassGroupEdit({t, match, history}) {\n  const id = match.params.id\n  const cardTitle = t('organization.classpass_groups.title_edit')\n  const returnUrl = \"/organization/classpasses/groups\"\n  const { loading, error, data } = useQuery(GET_CLASSPASS_GROUP_QUERY, {\n    variables: {id: id}\n  })\n  const [ updateClasspassGroup ] = useMutation(UPDATE_CLASSPASS_GROUP)\n\n  // Loading\n  if (loading) return (\n    <OrganizationClasspassesGroupsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationClasspassesGroupsBase>\n  )\n  // Error\n  if (error) return (\n    <OrganizationClasspassesGroupsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </OrganizationClasspassesGroupsBase>\n  )\n    \n\n  const initialData = data.organizationClasspassGroup;\n  console.log('query data')\n  console.log(data)\n\n  return (\n    <OrganizationClasspassesGroupsBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n          initialValues={{ \n            name: initialData.name, \n            description: initialData.description,\n          }}\n          validationSchema={CLASSPASS_GROUP_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              updateClasspassGroup({ variables: {\n                input: {\n                  id: match.params.id,\n                  name: values.name,\n                  description: values.description,\n                }\n              }, refetchQueries: [\n                  {query: GET_CLASSPASS_GROUPS_QUERY}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('organization.classpass_groups.toast_edit_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors, values }) => (\n              <FoForm>\n                  <Card.Body>    \n                      <Form.Group label={t('general.name')} >\n                        <Field type=\"text\" \n                              name=\"name\" \n                              className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                              autoComplete=\"off\" />\n                        <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                      </Form.Group>\n                      <Form.Group label={t('general.description')}>\n                        <Field type=\"text\" \n                                name=\"description\" \n                                className={(errors.description) ? \"form-control is-invalid\" : \"form-control\"} \n                                autoComplete=\"off\" />\n                        <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                      </Form.Group>\n                  </Card.Body>\n                  <Card.Footer>\n                      <Button \n                        className=\"pull-right\"\n                        color=\"primary\"\n                        disabled={isSubmitting}\n                        type=\"submit\"\n                      >\n                        {t('general.submit')}\n                      </Button>\n                      <Link to={returnUrl}>\n                        <Button\n                          type=\"button\" \n                          color=\"link\" \n                        >\n                            {t('general.cancel')}\n                        </Button>\n                      </Link>\n                  </Card.Footer>\n              </FoForm>\n          )}\n        </Formik>\n      </Card>\n    </OrganizationClasspassesGroupsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationClasspassGroupEdit))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { toast } from 'react-toastify'\n\nimport { GET_CLASSPASS_GROUP_PASSES_QUERY, ADD_CARD_TO_GROUP, DELETE_CARD_FROM_GROUP } from './queries'\n\nimport {\n  Dimmer,\n  Alert,\n  Icon,\n  Button,\n  Card,\n  Table,\n} from \"tabler-react\";\n\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationClasspassesGroupsBase from './OrganizationClasspassesGroupsBase';\n\n\nfunction OrganizationClasspassGroupEditPasses({ t, match, history }) {\n  const groupId = match.params.id\n  const returnUrl = \"/organization/classpasses/groups\"\n  const cardTitle = t('organization.classpass_group_classpasses.title_edit')\n  const { loading, error, data } = useQuery(GET_CLASSPASS_GROUP_PASSES_QUERY, { \n    variables: { id: groupId }\n  })\n  const [ addCardToGroup ] = useMutation(ADD_CARD_TO_GROUP)\n  const [ deleteCardFromGroup ] = useMutation(DELETE_CARD_FROM_GROUP)\n\n  // Loading\n  if (loading) return (\n    <OrganizationClasspassesGroupsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationClasspassesGroupsBase>\n  )\n  // Error\n  if (error) return (\n    <OrganizationClasspassesGroupsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </OrganizationClasspassesGroupsBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  const passes = data.organizationClasspasses\n  const group = data.organizationClasspassGroup\n\n  let group_passes = {}\n  if (group.organizationClasspasses.edges) {\n    group.organizationClasspasses.edges.map(({ node}) => (\n      group_passes[node.id] = true\n    ))\n  }\n\n  return (\n    <OrganizationClasspassesGroupsBase showBack={true}>\n      <Card title={cardTitle}>\n        <Card.Body>\n          <Alert type=\"primary\">\n            <strong>{t('general.group')}</strong> {group.name}\n          </Alert>\n          <Table>\n            <Table.Header>\n              <Table.Row key={v4()}>\n                <Table.ColHeader>{t('')}</Table.ColHeader>\n                <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                <Table.ColHeader>{t('')}</Table.ColHeader>\n              </Table.Row>\n            </Table.Header>\n            <Table.Body>\n                {passes.edges.map(({ node }) => (\n                  <Table.Row key={v4()}>\n                    <Table.Col key={v4()}>\n                      {(node.id in group_passes) ? \n                        <Icon name=\"check-circle\" className=\"text-green\" /> : <Icon name=\"x-circle\" className=\"text-red\" />\n                      }\n                    </Table.Col>\n                    <Table.Col key={v4()}>\n                      {node.name}\n                    </Table.Col>\n                    {console.log((node.id in group_passes))}\n                    {(!(node.id in group_passes)) ?\n                      // Add\n                      <Table.Col className=\"text-right text-green\" key={v4()}>\n                        <Button color=\"link\"\n                          size=\"sm\"\n                          title={t('general.add_to_group')} \n                          href=\"\"\n                          onClick={() => {\n                            console.log(\"clicked add\")\n                            let pass_id = node.id\n                            addCardToGroup({ variables: {\n                              input: {\n                                organizationClasspass: pass_id,\n                                organizationClasspassGroup: groupId\n                              }\n                        }, refetchQueries: [\n                            {query: GET_CLASSPASS_GROUP_PASSES_QUERY, variables: {\"id\": groupId }}\n                        ]}).then(({ data }) => {\n                          console.log('got data', data);\n                          toast.success(t('general.added_to_group'), {\n                            position: toast.POSITION.BOTTOM_RIGHT\n                          })\n                        }).catch((error) => {\n                          toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                              position: toast.POSITION.BOTTOM_RIGHT\n                            })\n                          console.log('there was an error sending the query', error);\n                        })\n                        }}>\n                          <Icon prefix=\"fe\" name=\"plus-circle\" /> { ' ' }\n                          {t('general.add_to_group')} \n                        </Button>\n                      </Table.Col>\n                      :\n                      // Delete\n                      <Table.Col className=\"text-right text-red\" key={v4()}>\n                        <Button color=\"link\"\n                          size=\"sm\"\n                          title={t('general.delete_from_group')} \n                          href=\"\"\n                          onClick={() => {\n                            console.log(\"clicked delete\")\n                            console.log(node.id)\n                            let pass_id = node.id\n                            deleteCardFromGroup({ variables: {\n                              input: {\n                                organizationClasspass: pass_id,\n                                organizationClasspassGroup: groupId\n                              }\n                        }, refetchQueries: [\n                            {query: GET_CLASSPASS_GROUP_PASSES_QUERY, variables: {\"id\": groupId }}\n                        ]}).then(({ data }) => {\n                          console.log('got data', data);\n                          toast.success(t('general.deleted_from_group'), {\n                            position: toast.POSITION.BOTTOM_RIGHT\n                          })\n                        }).catch((error) => {\n                          toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                              position: toast.POSITION.BOTTOM_RIGHT\n                            })\n                          console.log('there was an error sending the query', error);\n                        })\n                        }}>\n                          <Icon prefix=\"fe\" name=\"minus-circle\" /> { ' ' }\n                          {t('general.delete_from_group')}\n                        </Button>\n                      </Table.Col>\n                      }\n                  </Table.Row>\n                ))}\n            </Table.Body>\n          </Table>\n        </Card.Body>\n      </Card>\n    </OrganizationClasspassesGroupsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationClasspassGroupEditPasses))","import CSLS from \"../../../tools/cs_local_storage\"\n\nexport function get_list_query_variables() {\n  let archived = localStorage.getItem(CSLS.ORGANIZATION_CLASSTYPES_ARCHIVED)\n  if (archived === null) {\n    archived = false\n  }\n\n  let queryVars = {\n    archived: (archived === \"true\") ? true : false,\n  }\n\n  console.log(queryVars)\n\n  return queryVars\n}\n","import { gql } from \"@apollo/client\"\n\nexport const GET_CLASSTYPES_QUERY = gql`\nquery OrganizationClasstypes($after: String, $before: String, $archived: Boolean) {\n  organizationClasstypes(first: 15, before: $before, after: $after, archived: $archived) {\n    pageInfo {\n      startCursor\n      endCursor\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      node {\n        id\n        archived\n        displayPublic\n        name\n        description\n        urlWebsite\n        urlImage\n        urlImageThumbnailSmall\n      }\n    }\n  }\n}\n`\n\nexport const GET_CLASSTYPE_QUERY = gql`\nquery getOrganizationClasstype($id: ID!) {\n  organizationClasstype(id:$id) {\n    id\n    archived\n    name\n    description\n    displayPublic\n    urlWebsite\n    urlImage\n  }\n}\n`\n\nexport const ADD_CLASSTYPE = gql`\nmutation CreateOrganizationClasstype($input: CreateOrganizationClasstypeInput!) {\n  createOrganizationClasstype(input: $input) {\n    organizationClasstype {\n      id\n      archived\n      name\n      description\n      displayPublic\n      urlWebsite\n      image\n    }\n  }\n}\n`\n\nexport const UPDATE_CLASSTYPE = gql`\n  mutation UpdateOrganizationClasstype($input: UpdateOrganizationClasstypeInput!) {\n    updateOrganizationClasstype(input: $input) {\n      organizationClasstype {\n        id\n        archived\n        name\n        description\n        displayPublic\n        urlWebsite\n      }\n    }\n  }\n`\n\nexport const UPDATE_CLASSTYPE_IMAGE = gql`\nmutation UploadOrganizationClasstypeImage($input: UploadOrganizationClasstypeImageInput!) {\n  uploadOrganizationClasstypeImage(input: $input) {\n    organizationClasstype {\n      id\n      archived\n      name\n      description\n      displayPublic\n      urlWebsite\n      image\n    }\n  }\n}\n`\n\nexport const ARCHIVE_CLASSTYPE = gql`\nmutation ArchiveOrganizationClasstype($input: ArchiveOrganizationClasstypeInput!) {\n    archiveOrganizationClasstype(input: $input) {\n      organizationClasstype {\n        id\n        archived\n      }\n    }\n}\n`\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nfunction OrganizationClasstypesBase({t, history, children, showBack=false}) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title=\"Organization\" />\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ?\n                <Link to=\"/organization/classtypes/\">\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n              :\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"organizationclasstype\">\n                  <Link to=\"/organization/classtypes/add\">\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.classtypes.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n              }\n              <OrganizationMenu activeLink='classtypes'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>          \n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationClasstypesBase))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Avatar,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Table\n} from \"tabler-react\";\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport CSLS from \"../../../tools/cs_local_storage\"\nimport ContentCard from \"../../general/ContentCard\"\n\nimport { get_list_query_variables } from './tools'\nimport { GET_CLASSTYPES_QUERY, ARCHIVE_CLASSTYPE } from \"./queries\"\nimport OrganizationClasstypesBase from \"./OrganizationClasstypesBase\"\n\n\nfunction OrganizationClasstypes({t, history, archived=false}) {\n  const {loading, error, data, refetch, fetchMore} = useQuery(GET_CLASSTYPES_QUERY, { \n    variables: get_list_query_variables()\n  })\n  const [archiveClasstype] = useMutation(ARCHIVE_CLASSTYPE)\n\n  if (loading) return (\n    <OrganizationClasstypesBase>\n      <ContentCard cardTitle={t('organization.classtypes.title')}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationClasstypesBase>\n  )\n  // Error\n  if (error) return (\n    <OrganizationClasstypesBase>\n      <ContentCard cardTitle={t('organization.classtypes.title')}>\n        <p>{t('organization.classtypes.error_loading')}</p>\n      </ContentCard>\n    </OrganizationClasstypesBase>\n  )\n  const headerOptions = <Card.Options>\n    <Button color={(localStorage.getItem(CSLS.ORGANIZATION_CLASSTYPES_ARCHIVED) === \"false\") ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {\n              localStorage.setItem(CSLS.ORGANIZATION_CLASSTYPES_ARCHIVED, false)\n              refetch(get_list_query_variables())\n            }\n    }>\n      {t('general.active')}\n    </Button>\n    <Button color={(localStorage.getItem(CSLS.ORGANIZATION_CLASSTYPES_ARCHIVED) === \"true\") ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {\n              localStorage.setItem(CSLS.ORGANIZATION_CLASSTYPES_ARCHIVED, true)\n              refetch(get_list_query_variables())\n            }\n    }>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n  \n  const classtypes = data.organizationClasstypes\n  // Empty list\n  if (!classtypes.edges.length) { return (\n    <OrganizationClasstypesBase>\n      <ContentCard cardTitle={t('organization.classtypes.title')}\n                  headerContent={headerOptions}>\n        <p>\n        {(!archived) ? t('organization.classtypes.empty_list') : t(\"organization.classtypes.empty_archive\")}\n        </p>\n      </ContentCard>\n    </OrganizationClasstypesBase>\n  )}   \n\n  return (\n    <OrganizationClasstypesBase>\n      <ContentCard cardTitle={t('organization.classtypes.title')}\n                   headerContent={headerOptions}\n                   pageInfo={classtypes.pageInfo}\n                   onLoadMore={() => {\n                    fetchMore({\n                      variables: {\n                        after: classtypes.pageInfo.endCursor\n                      },\n                      updateQuery: (previousResult, { fetchMoreResult }) => {\n                        const newEdges = fetchMoreResult.organizationClasstypes.edges\n                        const pageInfo = fetchMoreResult.organizationClasstypes.pageInfo\n\n                        return newEdges.length\n                          ? {\n                              // Put the new locations at the end of the list and update `pageInfo`\n                              // so we have the new `endCursor` and `hasNextPage` values\n                              organizationClasstypes: {\n                                __typename: previousResult.organizationClasstypes.__typename,\n                                edges: [ ...previousResult.organizationClasstypes.edges, ...newEdges ],\n                                pageInfo\n                              }\n                            }\n                          : previousResult\n                      }\n                    })\n                  }} \n      >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {classtypes.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    <Avatar size=\"lg\" imageURL={node.urlImageThumbnailSmall} />\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.name}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {(node.displayPublic) ? \n                      <Badge color=\"success\">{t('general.yes')}</Badge>: \n                      <Badge color=\"danger\">{t('general.no')}</Badge>}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    {(localStorage.getItem(CSLS.ORGANIZATION_CLASSTYPES_ARCHIVED) === \"true\") ? \n                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                      <div>\n                        <Button className='btn-sm' \n                                onClick={() => history.push(\"/organization/classtypes/edit/\" + node.id)}\n                                color=\"secondary\">\n                          {t('general.edit')}\n                        </Button>\n                        <Button className='btn-sm' \n                                onClick={() => history.push(\"/organization/classtypes/edit_image/\" + node.id)}\n                                color=\"secondary\">\n                          {t('organization.classtypes.edit_image')}\n                        </Button>\n                      </div>\n                    }\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                        title={t('general.archive')} \n                        onClick={() => {\n                          console.log(\"clicked archived\")\n                          archiveClasstype({ variables: {\n                            input: {\n                              id: node.id,\n                              archived: !node.archived\n                            }\n                    }, refetchQueries: [\n                        {query: GET_CLASSTYPES_QUERY, variables: get_list_query_variables()}\n                    ]}).then(({ data }) => {\n                      console.log('got data', data);\n                      toast.success(\n                        (node.archived) ? t('general.unarchived'): t('general.archived'), {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                    }).catch((error) => {\n                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                      console.log('there was an error sending the query', error);\n                    })\n                    }}>\n                      <Icon name=\"inbox\" />\n                    </button>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </OrganizationClasstypesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationClasstypes))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const CLASSTYPE_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n    description: Yup.string(),\n    urlWebsite: Yup.string()\n      .url(t(\"yup.url\")),\n  })\n","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../plugin_config/tinymce\"\n\nimport { GET_CLASSTYPES_QUERY, ADD_CLASSTYPE } from './queries'\nimport { CLASSTYPE_SCHEMA } from './yupSchema'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\nimport { get_list_query_variables } from './tools'\nimport OrganizationClasstypesBase from './OrganizationClasstypesBase';\n\n\nfunction OrganizationClasstypeAdd({t, history}) {\n  const returnUrl = \"/organization/classtypes\"\n  const [addClasstype] = useMutation(ADD_CLASSTYPE)\n\n  return (\n    <OrganizationClasstypesBase showBack={true}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('organization.classtypes.title_add')}</Card.Title>\n        </Card.Header>\n        <Formik\n          initialValues={{ name: \"\", description: \"\", displayPublic: true, urlWebsite: '' }}\n          validationSchema={CLASSTYPE_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              addClasstype({ variables: {\n                input: {\n                  name: values.name, \n                  description: values.description,\n                  displayPublic: values.displayPublic,\n                  urlWebsite: values.urlWebsite,\n                  image: values.image\n                },\n                // file: values.image\n              }, refetchQueries: [\n                  {query: GET_CLASSTYPES_QUERY, variables: get_list_query_variables()}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data);\n                  history.push(returnUrl)\n                  toast.success((t('organization.classtypes.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n            }}\n            >\n            {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n                <FoForm>\n                  {/* {console.log('values in FoForm')}\n                  {console.log(values)} */}\n                    <Card.Body>\n                        <Form.Group>\n                          <Form.Label className=\"custom-switch\">\n                            <Field \n                              className=\"custom-switch-input\"\n                              type=\"checkbox\" \n                              name=\"displayPublic\" \n                              checked={values.displayPublic} />\n                            <span className=\"custom-switch-indicator\" ></span>\n                            <span className=\"custom-switch-description\">{t('organization.classtype.public')}</span>\n                          </Form.Label>\n                          <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n                        </Form.Group>    \n                        <Form.Group label={t('general.name')}>\n                          <Field type=\"text\" \n                                  name=\"name\" \n                                  className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                                  autoComplete=\"off\" />\n                          <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                        </Form.Group>\n                        <Form.Group label={t('general.description')}>\n                          <Editor\n                              tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n                              textareaName=\"description\"\n                              initialValue={values.description}\n                              init={tinymceBasicConf}\n                              onBlur={(e) => {\n                                setFieldValue(\"description\", e.target.getContent())\n                                setFieldTouched(\"description\", true)\n                              }}\n                            />\n                          <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n                        </Form.Group>\n                        <Form.Group label={t('organization.classtype.url_website')}>\n                          <Field type=\"text\" \n                                name=\"urlWebsite\" \n                                className={(errors.urlWebsite) ? \"form-control is-invalid\" : \"form-control\"} \n                                autoComplete=\"off\" />\n                          <ErrorMessage name=\"urlWebsite\" component=\"span\" className=\"invalid-feedback\" />\n                        </Form.Group>\n                    </Card.Body>\n                    <Card.Footer>\n                        <Button \n                          color=\"primary\"\n                          className=\"pull-right\" \n                          type=\"submit\" \n                          disabled={isSubmitting}\n                        >\n                          {t('general.submit')}\n                        </Button>\n                        <Button color=\"link\" onClick={() => history.push(returnUrl)}>\n                            {t('general.cancel')}\n                        </Button>\n                    </Card.Footer>\n                </FoForm>\n            )}\n        </Formik>\n      </Card>\n    </OrganizationClasstypesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationClasstypeAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from \"react-router-dom\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../plugin_config/tinymce\"\n\nimport { GET_CLASSTYPES_QUERY, GET_CLASSTYPE_QUERY, UPDATE_CLASSTYPE } from './queries'\nimport { CLASSTYPE_SCHEMA } from './yupSchema'\n\nimport {\n  Button,\n  Card,\n  Dimmer,\n  Form,\n} from \"tabler-react\";\n\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationClasstypesBase from './OrganizationClasstypesBase';\n\n\nfunction OrganizationClasstypeEdit({ t, history, match }) {\n  const id = match.params.id\n  const cardTitle = t('organization.classtypes.title_edit')\n  const returnUrl = \"/organization/classtypes\"\n  const { loading, error, data } = useQuery(GET_CLASSTYPE_QUERY, { variables: {\n    id: id\n  }})\n  const [ updateClasstype ] = useMutation(UPDATE_CLASSTYPE)\n\n  if (loading) return (\n    <OrganizationClasstypesBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationClasstypesBase>\n  )\n  // Error\n  if (error) return (\n    <OrganizationClasstypesBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </OrganizationClasstypesBase>\n  )\n\n                      \n  const initialData = data.organizationClasstype\n  console.log('query data')\n  console.log(data)\n\n  return (\n    <OrganizationClasstypesBase showBack={true}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle}</Card.Title>\n        </Card.Header>\n        <Formik\n            initialValues={{ \n              name: initialData.name, \n              description: initialData.description,\n              displayPublic: initialData.displayPublic,\n              urlWebsite: initialData.urlWebsite\n            }}\n            validationSchema={CLASSTYPE_SCHEMA}\n            onSubmit={(values, { setSubmitting }) => {\n                console.log('submit values:')\n                console.log(values)\n\n                updateClasstype({ variables: {\n                  input: {\n                    id: id,\n                    name: values.name,\n                    description: (values.description) ? values.description: '',\n                    displayPublic: values.displayPublic,\n                    urlWebsite: (values.urlWebsite) ? values.urlWebsite: ''\n                  }\n                }, refetchQueries: [\n                    {query: GET_CLASSTYPES_QUERY, variables: {\"archived\": false }}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    toast.success((t('organization.classtypes.toast_edit_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    setSubmitting(false)\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error);\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, errors, values, setFieldValue, setFieldTouched }) => (\n                <FoForm>\n                    {console.log(values)}\n                    <Card.Body>\n                        <Form.Group>\n                          <Form.Label className=\"custom-switch\">\n                            <Field \n                              className=\"custom-switch-input\"\n                              type=\"checkbox\" \n                              name=\"displayPublic\" \n                              checked={values.displayPublic} />\n                            <span className=\"custom-switch-indicator\" ></span>\n                            <span className=\"custom-switch-description\">{t('organization.classtype.public')}</span>\n                          </Form.Label>\n                          <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n                        </Form.Group>     \n                        <Form.Group label={t('general.name')} >\n                          <Field type=\"text\" \n                                name=\"name\" \n                                className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                                autoComplete=\"off\" />\n                          <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                        </Form.Group>\n                        <Form.Group label={t('general.description')}>\n                          <Editor\n                            tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n                            textareaName=\"description\"\n                            initialValue={values.description}\n                            init={tinymceBasicConf}\n                            onBlur={(e) => {\n                              setFieldValue(\"description\", e.target.getContent())\n                              setFieldTouched(\"description\", true)\n                            }}\n                          />\n                          <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n                        </Form.Group>\n                        <Form.Group label={t('organization.classtype.url_website')}>\n                          <Field type=\"text\" \n                                name=\"urlWebsite\" \n                                className={(errors.urlWebsite) ? \"form-control is-invalid\" : \"form-control\"} \n                                autoComplete=\"off\" />\n                          <ErrorMessage name=\"urlWebsite\" component=\"span\" className=\"invalid-feedback\" />\n                        </Form.Group>\n                    </Card.Body>\n                    <Card.Footer>\n                        <Button \n                          className=\"pull-right\"\n                          color=\"primary\"\n                          disabled={isSubmitting}\n                          type=\"submit\"\n                        >\n                          {t('general.submit')}\n                        </Button>\n                        <Link to={returnUrl}>\n                          <Button\n                            type=\"button\" \n                            color=\"link\" \n                          >\n                              {t('general.cancel')}\n                          </Button>\n                        </Link>\n                    </Card.Footer>\n                </FoForm>\n            )}\n        </Formik>\n      </Card>\n    </OrganizationClasstypesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationClasstypeEdit))","// @flow\n\nimport React, { useState, useRef } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\nimport { \n  Formik,\n  Form as FoForm, \n  Field, \n  ErrorMessage \n} from 'formik'\n\n\nimport { GET_CLASSTYPES_QUERY, GET_CLASSTYPE_QUERY, UPDATE_CLASSTYPE_IMAGE } from './queries'\nimport { CLASSTYPE_SCHEMA } from './yupSchema'\n\nimport {\n  Dimmer,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form,\n} from \"tabler-react\";\n\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationClasstypesBase from './OrganizationClasstypesBase';\n\n\nconst customFileInputLabelStyle = {\n  whiteSpace: \"nowrap\",\n  display: \"block\",\n  overflow: \"hidden\"\n}\n\n\nfunction OrganizationClasstypeEditImage({t, history, match}) {\n  const classtypeId = match.params.id\n  const returnUrl = \"/organization/classtypes\"\n  const cardTitle = t('organization.classtypes.edit_image')\n  const { loading, error, data } = useQuery(GET_CLASSTYPE_QUERY, {\n    variables: { id: classtypeId }\n  })\n  const [ uploadImage ] = useMutation(UPDATE_CLASSTYPE_IMAGE)\n\n  // Vars for document file input field start\n  const [fileName, setFileName] = useState(\"\")\n  const inputFileName = useRef(null)\n  const fileInputLabel = fileName || t(\"general.custom_file_input_inner_label\")\n\n  const handleFileInputChange = (event) => {\n    console.log('on change triggered')\n    setFileName(event.target.files[0].name)\n\n    console.log(inputFileName)\n    console.log(inputFileName.current)\n    console.log(inputFileName.current.files)\n  }\n\n  if (loading) return (\n    <OrganizationClasstypesBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationClasstypesBase>\n  )\n  // Error\n  if (error) return (\n    <OrganizationClasstypesBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </OrganizationClasstypesBase>\n  )\n\n  const initialData = data.organizationClasstype\n  console.log('query data')\n  console.log(data)\n\n  return (\n    <OrganizationClasstypesBase>\n      <Card title={cardTitle}>\n       <Formik\n          initialValues={{}}\n          // validationSchema={DOCUMENT_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n            let reader = new FileReader()\n            reader.onload = function(reader_event) {\n              console.log(reader_event.target.result)\n              let b64_enc_image = reader_event.target.result\n\n              uploadImage({ variables: {\n                input: {\n                  id: classtypeId,\n                  image: b64_enc_image\n                }\n              }, refetchQueries: [\n                  {query: GET_CLASSTYPES_QUERY, variables: {\"archived\": true }},\n                  {query: GET_CLASSTYPES_QUERY, variables: {\"archived\": false }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('organization.classtypes.toast_image_save_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error);\n                })\n            }\n            let file = inputFileName.current.files[0]\n            reader.readAsDataURL(file)\n          }}\n          >\n          {({ isSubmitting, errors, values }) => (\n            <FoForm>\n            <Card.Body>\n              <Grid.Row>\n                <Grid.Col>\n                  <Form.Group label={t('general.custom_file_input_label')}>\n                    <div className=\"custom-file\">\n                      <input type=\"file\" ref={inputFileName} className=\"custom-file-input\" onChange={handleFileInputChange} />\n                      <label className=\"custom-file-label\" style={customFileInputLabelStyle}>\n                        {fileInputLabel}\n                      </label>\n                    </div>\n                  </Form.Group>\n                </Grid.Col>\n              </Grid.Row>\n            </Card.Body>\n            <Card.Footer>\n              <Button \n                color=\"primary\"\n                className=\"pull-right\" \n                type=\"submit\" \n                disabled={isSubmitting}\n              >\n                {t('general.submit')}\n              </Button>\n              <Link to={returnUrl}>\n                <Button color=\"link\">\n                  {t('general.cancel')}\n                </Button>\n              </Link>\n            </Card.Footer>\n          </FoForm>\n          )}\n        </Formik>\n      </Card>\n    </OrganizationClasstypesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationClasstypeEditImage))","import { gql } from \"@apollo/client\"\n\nexport const GET_DISCOVERIES_QUERY = gql`\n  query OrganizationDiscoveries($after: String, $before: String, $archived: Boolean) {\n    organizationDiscoveries(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const GET_DISCOVERY_QUERY = gql`\n  query SchoolDiscovery($id: ID!) {\n    organizationDiscovery(id:$id) {\n      id\n      name\n      archived\n    }\n  }\n`\n\nexport const ADD_DISCOVERY = gql`\n  mutation CreateOrganizationDiscovery($input:CreateOrganizationDiscoveryInput!) {\n    createOrganizationDiscovery(input: $input) {\n      organizationDiscovery{\n        id\n        archived\n        name\n      }\n    }\n  }\n`\n\nexport const UPDATE_DISCOVERY = gql`\nmutation UpdateOrganizationDiscovery($input: UpdateOrganizationDiscoveryInput!) {\n  updateOrganizationDiscovery(input: $input) {\n    organizationDiscovery {\n      id\n      name\n    }\n  }\n}\n`\n\nexport const ARCHIVE_DISCOVERY = gql`\nmutation ArchiveOrganizationDiscovery($input: ArchiveOrganizationDiscoveryInput!) {\n  archiveOrganizationDiscovery(input: $input) {\n    organizationDiscovery {\n      id\n      archived\n    }\n  }\n}\n`\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nfunction OrganizationDiscoveriesBase({ t, history, children, showBack=false }) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"organization.title\")} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ?\n                <Link to=\"/organization/discoveries\">\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n             :\n              <HasPermissionWrapper permission=\"add\"\n                                    resource=\"organizationdiscovery\">\n                <Link to=\"/organization/discoveries/add\">\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.discoveries.add')}\n                  </Button>\n                </Link>\n              </HasPermissionWrapper>\n              }\n              <OrganizationMenu activeLink='discoveries'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n)}\n\n\nexport default withTranslation()(withRouter(OrganizationDiscoveriesBase))","// @flow\n\nimport React, { useState } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../general/ContentCard\"\n\nimport { GET_DISCOVERIES_QUERY, ARCHIVE_DISCOVERY } from \"./queries\"\nimport OrganizationDiscoveriesBase from './OrganizationDiscoveriesBase'\n\n\nfunction OrganizationDiscoveries({ t, history }) {\n  let [archived, setArchived] = useState(false)\n  const cardTitle = t('organization.discoveries.title')\n  const { loading, error, data, refetch, fetchMore } = useQuery(GET_DISCOVERIES_QUERY, {\n    variables: { archived: archived }\n  })\n  const [ archiveDiscovery ] = useMutation(ARCHIVE_DISCOVERY)\n\n  const headerOptions = <Card.Options>\n    <Button color={(!archived) ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {setArchived(false); refetch({archived: false});}}>\n      {t('general.current')}\n    </Button>\n    <Button color={(archived) ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {setArchived(true); refetch({archived: true});}}>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  if (loading) return (\n    <OrganizationDiscoveriesBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationDiscoveriesBase>\n  )\n\n  if (error) return (\n    <OrganizationDiscoveriesBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('organization.discoveries.error_loading')}</p>\n      </ContentCard>\n    </OrganizationDiscoveriesBase>\n  )\n\n  const discoveries = data.organizationDiscoveries\n\n  // Empty list\n  if (!discoveries.edges.length) { return (\n    <OrganizationDiscoveriesBase>\n      <ContentCard cardTitle={cardTitle}\n                  headerContent={headerOptions}>\n        <p> \n          {(!archived) ? t('organization.discoveries.empty_list') : t(\"organization.discoveries.empty_archive\")}\n        </p>\n      </ContentCard>\n    </OrganizationDiscoveriesBase>\n  )}\n\n  return (\n    <OrganizationDiscoveriesBase>\n      <ContentCard cardTitle={cardTitle}\n                    headerContent={headerOptions}\n                    pageInfo={discoveries.pageInfo}\n                    onLoadMore={() => {\n                    fetchMore({\n                      variables: {\n                        after: discoveries.pageInfo.endCursor\n                      },\n                      updateQuery: (previousResult, { fetchMoreResult }) => {\n                        const newEdges = fetchMoreResult.organizationDiscoveries.edges\n                        const pageInfo = fetchMoreResult.organizationDiscoveries.pageInfo\n\n                        return newEdges.length\n                          ? {\n                              // Put the new discoveries at the end of the list and update `pageInfo`\n                              // so we have the new `endCursor` and `hasNextPage` values\n                              organizationDiscoveries: {\n                                __typename: previousResult.organizationDiscoveries.__typename,\n                                edges: [ ...previousResult.organizationDiscoveries.edges, ...newEdges ],\n                                pageInfo\n                              }\n                            }\n                          : previousResult\n                      }\n                    })\n                  }} >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {discoveries.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    {node.name}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    {(node.archived) ? \n                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                      <Button className='btn-sm' \n                              onClick={() => history.push(\"/organization/discoveries/edit/\" + node.id)}\n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    }\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                        title={t('general.archive')} \n                        href=\"\"\n                        onClick={() => {\n                          console.log(\"clicked archived\")\n                          let id = node.id\n                          archiveDiscovery({ variables: {\n                            input: {\n                            id,\n                            archived: !archived\n                            }\n                    }, refetchQueries: [\n                        {query: GET_DISCOVERIES_QUERY, variables: {\"archived\": archived }}\n                    ]}).then(({ data }) => {\n                      console.log('got data', data);\n                      toast.success(\n                        (archived) ? t('general.unarchived'): t('general.archived'), {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                    }).catch((error) => {\n                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                      console.log('there was an error sending the query', error);\n                    })\n                    }}>\n                      <Icon prefix=\"fa\" name=\"inbox\" />\n                    </button>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </OrganizationDiscoveriesBase>\n  ) \n}\n\n\nexport default withTranslation()(withRouter(OrganizationDiscoveries))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const DISCOVERY_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  })\n","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from \"react-router-dom\"\n\n\nimport { GET_DISCOVERIES_QUERY, ADD_DISCOVERY } from './queries'\nimport { DISCOVERY_SCHEMA } from './yupSchema'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\nimport OrganizationDiscoveriesBase from './OrganizationDiscoveriesBase';\n\n\nfunction OrganizationDiscoveryAdd({t, history}) {\n  const returnUrl = \"/organization/discoveries\"\n  const [ addDiscovery ] = useMutation(ADD_DISCOVERY)\n\n  return (\n    <OrganizationDiscoveriesBase showBack={true}>\n      <Card title={t('organization.discoveries.title_add')}>\n        <Formik\n            initialValues={{ name: '', code: '' }}\n            validationSchema={DISCOVERY_SCHEMA}\n            onSubmit={(values, { setSubmitting }) => {\n                addDiscovery({ variables: {\n                  input: {\n                    name: values.name, \n                  }\n                }, refetchQueries: [\n                    {query: GET_DISCOVERIES_QUERY, variables: {\"archived\": false }}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data);\n                    history.push(returnUrl)\n                    toast.success((t('organization.discoveries.toast_add_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, errors }) => (\n                <FoForm>\n                    <Card.Body>\n                        <Form.Group label={t('general.name')}>\n                          <Field type=\"text\" \n                                  name=\"name\" \n                                  className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                                  autoComplete=\"off\" />\n                          <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                        </Form.Group>\n                    </Card.Body>\n                    <Card.Footer>\n                        <Button \n                          color=\"primary\"\n                          className=\"pull-right\" \n                          type=\"submit\" \n                          disabled={isSubmitting}\n                        >\n                          {t('general.submit')}\n                        </Button>\n                        <Link to={returnUrl}>\n                          <Button color=\"link\">\n                              {t('general.cancel')}\n                          </Button>\n                        </Link>\n                    </Card.Footer>\n                </FoForm>\n            )}\n        </Formik>\n      </Card>\n    </OrganizationDiscoveriesBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationDiscoveryAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from \"react-router-dom\"\n\nimport { GET_DISCOVERIES_QUERY, GET_DISCOVERY_QUERY, UPDATE_DISCOVERY } from './queries'\nimport { DISCOVERY_SCHEMA } from './yupSchema'\n\nimport {\n  Dimmer,\n  Button,\n  Card,\n  Form\n} from \"tabler-react\";\n\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationDiscoveriesBase from './OrganizationDiscoveriesBase';\n\n\nfunction OrganizationDiscoveryEdit({t, history, match}) {\n  const id = match.params.id\n  const returnUrl = \"/organization/discoveries\"\n  const cardTitle = t('organization.discoveries.title_edit')\n  const { loading, error, data } = useQuery(GET_DISCOVERY_QUERY, {\n    variables: {id: id}\n  })\n  const [ updateDiscovery ] = useMutation(UPDATE_DISCOVERY)\n\n  if (loading) return (\n    <OrganizationDiscoveriesBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationDiscoveriesBase>\n  )\n\n  if (error) return (\n    <OrganizationDiscoveriesBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </OrganizationDiscoveriesBase>\n  )\n\n  const initialData = data.organizationDiscovery;\n\n  return (\n    <OrganizationDiscoveriesBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n            initialValues={{ \n              name: initialData.name, \n            }}\n            validationSchema={DISCOVERY_SCHEMA}\n            onSubmit={(values, { setSubmitting }) => {\n                console.log('submit values:')\n                console.log(values)\n\n                updateDiscovery({ variables: {\n                  input: {\n                    id: match.params.id,\n                    name: values.name,\n                  }\n                }, refetchQueries: [\n                    {query: GET_DISCOVERIES_QUERY, variables: {\"archived\": false }}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    history.push(returnUrl)\n                    toast.success((t('organization.discoveries.toast_edit_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, errors, values }) => (\n                <FoForm>\n                    <Card.Body>    \n                        <Form.Group label={t('general.name')} >\n                          <Field type=\"text\" \n                                name=\"name\" \n                                className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                                autoComplete=\"off\" />\n                          <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                        </Form.Group>\n                    </Card.Body>\n                    <Card.Footer>\n                        <Button \n                          className=\"pull-right\"\n                          color=\"primary\"\n                          disabled={isSubmitting}\n                          type=\"submit\"\n                        >\n                          {t('general.submit')}\n                        </Button>\n                        <Link to={returnUrl}>\n                          <Button\n                            type=\"button\" \n                            color=\"link\" \n                          >\n                              {t('general.cancel')}\n                          </Button>\n                        </Link>\n                    </Card.Footer>\n                </FoForm>\n            )}\n        </Formik>\n      </Card>\n    </OrganizationDiscoveriesBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationDiscoveryEdit))","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport OrganizationMenu from \"../../OrganizationMenu\"\n\n\nfunction OrganizationDocuments({ t, match }) {\n  const organizationId = match.params.organization_id\n  const docTypes = [\n    [ \"TERMS_AND_CONDITIONS\", t(\"general.terms_and_conditions\")],\n    [ \"PRIVACY_POLICY\", t(\"general.privacy_policy\")],\n  ]\n\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('organization.title')}>\n            <div className=\"page-options d-flex\">\n              <Link to={`/organization/edit/${organizationId}`}>\n                <Button \n                  icon=\"arrow-left\"\n                  className=\"mr-2\"\n                  outline\n                  color=\"secondary\"\n                >\n                  {t('general.back_to')} {t('organization.title')}\n                </Button>\n              </Link>\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              <Card>\n                <Card.Header>\n                  <Card.Title>{t('organization.documents.title')}</Card.Title>\n                </Card.Header>\n                <Card.Body>\n                  <Table>\n                    <Table.Header>\n                      <Table.Row key={v4()}>\n                        <Table.ColHeader>{t('general.document')}</Table.ColHeader>\n                        <Table.ColHeader></Table.ColHeader>\n                      </Table.Row>\n                    </Table.Header>\n                    <Table.Body>\n                        {docTypes.map((docType) => (\n                          <Table.Row key={v4()}>\n                            <Table.Col key={v4()}>\n                              {docType[1]}\n                            </Table.Col>\n                            <Table.Col className=\"text-right\" key={v4()}>\n                              <Link to={`/organization/documents/${organizationId}/${docType[0]}`}>\n                                <Button className='btn-sm' \n                                        color=\"secondary\">\n                                  {t('general.manage')} <Icon name=\"chevron-right\" />\n                                </Button>\n                              </Link>\n                            </Table.Col>\n                          </Table.Row>\n                        ))}\n                    </Table.Body>\n                  </Table>\n                </Card.Body>\n              </Card>        \n            </Grid.Col>\n            <Grid.Col md={3}>\n              <OrganizationMenu activeLink='organization'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationDocuments))","import React, { useContext } from 'react'\nimport moment from 'moment'\n\nimport AppSettingsContext from '../context/AppSettingsContext'\n\n\nfunction FormatISODateStr({ ISODateStr }) {\n    const appSettings = useContext(AppSettingsContext)\n    const dateFormat = appSettings.dateFormat\n\n    return (\n        moment(ISODateStr).format(dateFormat)    \n    )\n}\n\nexport default FormatISODateStr\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\n\nimport {\n  Button\n} from \"tabler-react\";\n\nconst FileDownloadTableButton = ({ t, mediaUrl, className=\"\", target=\"_blank\" }) => {\n  return <Button \n           color={\"secondary \" + className}\n           size=\"sm\"\n           icon=\"download-cloud\"\n           target={target}\n           RootComponent=\"a\" \n           href={mediaUrl}\n          >\n           {t('general.download')}\n          </Button>\n}\n\nexport default withTranslation()(FileDownloadTableButton)\n\n\n\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Page,\n  Grid,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport OrganizationMenu from \"../../OrganizationMenu\"\n\n\nfunction OrganizationDocumentsBase({ t, children, headerLinks, sidebarButton }) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('organization.title')}>\n            <div className=\"page-options d-flex\">\n              {headerLinks}\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}        \n            </Grid.Col>\n            <Grid.Col md={3}>\n              {sidebarButton}\n              <OrganizationMenu activeLink='organization'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationDocumentsBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_DOCUMENTS_QUERY = gql`\n  query OrganizationDocuments($documentType: String!) {\n    organizationDocuments(documentType:$documentType) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          documentType\n          version\n          dateStart\n          dateEnd\n          document\n          urlDocument\n        }\n      }\n    }\n  }\n`\n\nexport const GET_DOCUMENT_QUERY = gql`\n  query OrganizationDocument($id: ID!) {\n    organizationDocument(id:$id) {\n      id\n      version\n      dateStart\n      dateEnd\n      document\n    }\n  }\n`\n\nexport const ADD_DOCUMENT = gql`\n  mutation CreateOrganizationDocument($input:CreateOrganizationDocumentInput!) {\n    createOrganizationDocument(input: $input) {\n      organizationDocument{\n        id\n        version\n        dateStart\n        dateEnd\n      }\n    }\n  }\n`\n\nexport const UPDATE_DOCUMENT = gql`\n  mutation UpdateOrganizationDocument($input:UpdateOrganizationDocumentInput!) {\n    updateOrganizationDocument(input: $input) {\n      organizationDocument{\n        id\n        version\n        dateStart\n        dateEnd\n      }\n    }\n  }\n`\n\nexport const DELETE_DOCUMENT = gql`\n  mutation DeleteOrganizationDocument($input:DeleteOrganizationDocumentInput!) {\n    deleteOrganizationDocument(input: $input) {\n      ok\n    }\n  }\n`","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { DELETE_DOCUMENT, GET_DOCUMENTS_QUERY } from \"./queries\"\nimport confirmDelete from \"../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\nfunction OrganizationDocumentDelete({t, match, node}) {\n  const [deleteOrganizationDocument, { data }] = useMutation(DELETE_DOCUMENT)\n\n  return (\n    <button className=\"icon btn btn-link btn-sm\" \n      title={t('general.delete')} \n      href=\"\"\n      onClick={() => {\n        confirmDelete({\n          t: t,\n          msgConfirm: t(\"organization.documents.delete_confirm_msg\"),\n          msgDescription: <p> {t(\"general.version\")}: {node.version}</p>,\n          msgSuccess: t('organization.documents.deleted'),\n          deleteFunction: deleteOrganizationDocument,\n          functionVariables: { \n            variables: {\n              input: { id: node.id }\n            }, \n            refetchQueries: [\n              {query: GET_DOCUMENTS_QUERY, variables: { documentType: node.documentType} },\n            ]\n          }\n        })\n    }}>\n      <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n    </button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationDocumentDelete))\n","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport { toast } from 'react-toastify'\n\nimport ISODateString from \"../../../ui/ISODateString\"\nimport FileDownloadTableButton from \"../../../ui/FileDownloadTableButton\"\nimport ContentCard from \"../../../general/ContentCard\"\nimport OrganizationMenu from \"../../OrganizationMenu\"\nimport OrganizationDocumentsBase from \"./OrganizationDocumentsBase\"\nimport OrganizationDocumentsDelete from \"./OrganizationDocumentDelete\"\n\nimport { GET_DOCUMENTS_QUERY, DELETE_DOCUMENT } from \"./queries\"\n\n\nfunction OrganizationListDocuments({ t, match, history }) {\n  const organizationId = match.params.organization_id\n  const documentType = match.params.document_type\n  const back = <Link to={`/organization/documents/${organizationId}`}>\n    <Button \n      icon=\"arrow-left\"\n      className=\"mr-2\"\n      outline\n      color=\"secondary\"\n    >\n      {t('general.back_to')} {t('organization.documents.title')}\n    </Button>\n  </Link>\n  const sidebarButton = <HasPermissionWrapper \n    permission=\"add\"\n    resource=\"organizationdocument\">\n      <Link to={`/organization/documents/${organizationId}/${documentType}/add`} >\n        <Button color=\"primary btn-block mb-6\" >\n          <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.documents.add')}\n        </Button>\n      </Link>\n  </HasPermissionWrapper>\n\n  const { loading, error, data, fetchMore } = useQuery(GET_DOCUMENTS_QUERY, {\n    variables: { documentType: documentType }\n  })\n\n  if (loading) {\n    return (\n      <OrganizationDocumentsBase headerLinks={back}>\n        {t('general.loading_with_dots')}\n      </OrganizationDocumentsBase>\n    )\n  }\n\n  if (error) {\n    return (\n      <OrganizationDocumentsBase headerLinks={back}>\n        {t('organization.documents.error_loading')}\n      </OrganizationDocumentsBase>\n    )\n  }\n  \n\n  return (\n    <OrganizationDocumentsBase headerLinks={back} sidebarButton={sidebarButton}>\n      <ContentCard \n        cardTitle={t('organization.documents.title')}\n        pageInfo={data.organizationDocuments.pageInfo}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: data.organizationDocuments.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.organizationDocuments.edges\n              const pageInfo = fetchMoreResult.organizationDocuments.pageInfo\n\n              return newEdges.length\n                ? {\n                    // Put the fetched documents at the end of the list and update `pageInfo`\n                    // so we have the new `endCursor` and `hasNextPage` values\n                    organizationDocuments: {\n                      __typename: previousResult.organizationDocuments.__typename,\n                      edges: [ ...previousResult.organizationDocuments.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                : previousResult\n            }\n          })\n        }}\n      >\n        <Table>\n              <Table.Header>\n                <Table.Row key={v4()}>\n                  <Table.ColHeader>{t('general.date')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.version')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.download')}</Table.ColHeader>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                  {data.organizationDocuments.edges.map(({ node }) => (\n                    <Table.Row key={v4()}>\n                      <Table.Col key={v4()}>\n                        <ISODateString ISODateStr={node.dateStart} />\n                        {(node.dateEnd) ? <span> - <ISODateString ISODateStr={node.dateEnd} /></span> : \"\"}\n                      </Table.Col>\n                      <Table.Col key={v4()}>\n                        {node.version}\n                      </Table.Col>\n                      <Table.Col key={v4()}>\n                        <FileDownloadTableButton mediaUrl={node.urlDocument} />\n                      </Table.Col>\n                      <Table.Col className=\"text-right\" key={v4()}>\n                        <Link to={`/organization/documents/${organizationId}/${documentType}/edit/${node.id}`} >\n                          <Button className='btn-sm' \n                                  color=\"secondary\">\n                            {t('general.edit')}\n                          </Button>\n                        </Link>\n                        <OrganizationDocumentsDelete node={node} />\n                      </Table.Col>\n                    </Table.Row>\n                  ))}\n              </Table.Body>\n            </Table>\n      </ContentCard>\n    </OrganizationDocumentsBase>\n  )\n\n}\n\nexport default withTranslation()(withRouter(OrganizationListDocuments))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const LEVEL_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  })\n","\nexport function getSubtitle(t, documentType) {\n  switch (documentType) {\n    case \"TERMS_AND_CONDITIONS\":\n      return t('general.terms_and_conditions')\n    case \"PRIVACY_POLICY\":\n      return t('general.privacy_policy')\n    default:\n      return \"Invalid document type\"\n  }\n}\n  ","// @flow\n\nimport React, { useState, useRef } from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { \n  Formik,\n  Form as FoForm, \n  Field, \n  ErrorMessage \n} from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport { ADD_DOCUMENT, GET_DOCUMENTS_QUERY } from \"./queries\"\nimport { DOCUMENT_SCHEMA } from './yupSchema'\nimport { dateToLocalISO } from \"../../../../tools/date_tools\"\n// import OrganizationDocumentForm from './OrganizationDocumentForm'\nimport CSDatePicker from \"../../../ui/CSDatePicker\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form,\n} from \"tabler-react\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport OrganizationDocumentsBase from \"./OrganizationDocumentsBase\"\nimport { getSubtitle } from './tools'\n\n\nconst customFileInputLabelStyle = {\n  whiteSpace: \"nowrap\",\n  display: \"block\",\n  overflow: \"hidden\"\n}  \n\n\nfunction OrganizationDocumentAdd({ t, match, history }) {\n  const organizationId = match.params.organization_id\n  const documentType = match.params.document_type\n  const subTitle = getSubtitle(t, documentType)\n\n  // Vars for document file input field start\n  const [fileName, setFileName] = useState(\"\")\n  const inputFileName = useRef(null)\n  const fileInputLabel = fileName || t(\"general.custom_file_input_inner_label\")\n\n  const handleFileInputChange = (event) => {\n    console.log('on change triggered')\n    setFileName(event.target.files[0].name)\n  }\n\n  // Vars for document file input field end\n  \n  const returnUrl = `/organization/documents/${organizationId}/${documentType}`\n  const sidebarButton = <HasPermissionWrapper \n    permission=\"add\"\n    resource=\"organizationdocument\">\n      <Link to={returnUrl} >\n        <Button color=\"primary btn-block mb-6\" >\n          <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n        </Button>\n      </Link>\n  </HasPermissionWrapper>\n\n  const [addDocument, { data }] = useMutation(ADD_DOCUMENT, {\n    onCompleted: () => history.push(returnUrl)\n  })\n\n  return (\n    <OrganizationDocumentsBase sidebarButton={sidebarButton}>\n      <Card title={t('organization.documents.add') + ' - ' + subTitle}>\n        <Formik\n          initialValues={{ \n            version: '',\n            dateStart: '', \n            dateEnd: '',\n            document: ''\n          }}\n          // validationSchema={DOCUMENT_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n            console.log(\"Submit values\")\n            console.log(values)\n            console.log(fileName)\n\n            let inputVars = {\n              documentType: documentType,\n              version: values.version,\n              dateStart: dateToLocalISO(values.dateStart),\n              documentFileName: fileName,\n            }\n\n            if (values.dateEnd) {\n              inputVars.dateEnd = dateToLocalISO(values.dateEnd)\n            }\n\n            let reader = new FileReader()\n            reader.onload = function(reader_event) {\n              console.log(reader_event.target.result)\n              let b64_enc_file = reader_event.target.result\n              console.log(b64_enc_file)\n              // Add uploaded document b64 encoded blob to input vars\n              inputVars.document = b64_enc_file\n\n              addDocument({ variables: {\n                input: inputVars\n              }, refetchQueries: [\n                  {query: GET_DOCUMENTS_QUERY, variables: {documentType: documentType}}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data);\n                  toast.success((t('organization.documents.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                    setSubmitting(false)\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n            }\n            \n            let file = inputFileName.current.files[0]\n            reader.readAsDataURL(file)\n          }}\n          >\n          {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n            <FoForm>\n            <Card.Body>\n              <Grid.Row>\n                <Grid.Col>\n                  <Form.Group label={t('general.version')}>\n                    <Field type=\"text\" \n                          name=\"version\" \n                          className={(errors.version) ? \"form-control is-invalid\" : \"form-control\"} \n                          autoComplete=\"off\" />\n                    <ErrorMessage name=\"version\" component=\"span\" className=\"invalid-feedback\" />\n                  </Form.Group>\n                </Grid.Col>\n                <Grid.Col>\n                  <Form.Group label={t('general.custom_file_input_label')}>\n                    <div className=\"custom-file\">\n                      <input type=\"file\" ref={inputFileName} className=\"custom-file-input\" onChange={handleFileInputChange} />\n                      <label className=\"custom-file-label\" style={customFileInputLabelStyle}>\n                        {fileInputLabel}\n                      </label>\n                    </div>\n                  </Form.Group>\n                </Grid.Col>\n              </Grid.Row>\n              <Grid.Row>\n                <Grid.Col>\n                  <Form.Group label={t('general.date_start')}>\n                    <CSDatePicker \n                      selected={values.dateStart}\n                      onChange={(date) => setFieldValue(\"dateStart\", date)}\n                      onBlur={() => setFieldTouched(\"dateStart\", true)}\n                    />\n                    <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n                  </Form.Group>\n                </Grid.Col>\n                <Grid.Col>\n                  <Form.Group label={t('general.date_end')}>\n                    <CSDatePicker \n                      selected={values.dateEnd}\n                      onChange={(date) => setFieldValue(\"dateEnd\", date)}\n                      onBlur={() => setFieldTouched(\"dateEnd\", true)}\n                    />\n                    <ErrorMessage name=\"dateEnd\" component=\"span\" className=\"invalid-feedback\" />\n                  </Form.Group>\n                </Grid.Col>\n              </Grid.Row>\n            </Card.Body>\n            <Card.Footer>\n              <Button \n                color=\"primary\"\n                className=\"pull-right\" \n                type=\"submit\" \n                disabled={isSubmitting}\n              >\n                {t('general.submit')}\n              </Button>\n              <Button color=\"link\" onClick={() => history.push(returnUrl)}>\n                {t('general.cancel')}\n              </Button>\n            </Card.Footer>\n          </FoForm>\n          )}\n        </Formik>\n      </Card>\n    </OrganizationDocumentsBase>\n  )\n}\n\nexport default withTranslation()(OrganizationDocumentAdd)\n\n\n// const OrganizationLevelAdd = ({ t, history }) => (\n//   <SiteWrapper>\n//     <div className=\"my-3 my-md-5\">\n//       <Container>\n//         <Page.Header title={t('organization.title')} />\n//         <Grid.Row>\n//           <Grid.Col md={9}>\n//           <Card>\n//             <Card.Header>\n//               <Card.Title>{t('organization.levels.title_add')}</Card.Title>\n//             </Card.Header>\n//             <Mutation mutation={ADD_LEVEL} onCompleted={() => history.push(return_url)}> \n//                 {(addLocation, { data }) => (\n//                     <Formik\n//                         initialValues={{ name: '', code: '' }}\n//                         validationSchema={LEVEL_SCHEMA}\n//                         onSubmit={(values, { setSubmitting }) => {\n//                             addLocation({ variables: {\n//                               input: {\n//                                 name: values.name, \n//                               }\n//                             }, refetchQueries: [\n//                                 {query: GET_LEVELS_QUERY, variables: {\"archived\": false }}\n//                             ]})\n//                             .then(({ data }) => {\n//                                 console.log('got data', data);\n//                                 toast.success((t('organization.levels.toast_add_success')), {\n//                                     position: toast.POSITION.BOTTOM_RIGHT\n//                                   })\n//                               }).catch((error) => {\n//                                 toast.error((t('general.toast_server_error')) + ': ' +  error, {\n//                                     position: toast.POSITION.BOTTOM_RIGHT\n//                                   })\n//                                 console.log('there was an error sending the query', error)\n//                                 setSubmitting(false)\n//                               })\n//                         }}\n//                         >\n//                         {({ isSubmitting, errors }) => (\n//                             <OrganizationLevelForm \n//                               isSubmitting={isSubmitting}\n//                               errors={errors}\n//                               return_url={return_url}\n//                             />\n//                         )}\n//                     </Formik>\n//                 )}\n//                 </Mutation>\n//           </Card>\n//           </Grid.Col>\n//           <Grid.Col md={3}>\n//             <HasPermissionWrapper permission=\"add\"\n//                                   resource=\"organizationlevel\">\n//               <Button color=\"primary btn-block mb-6\"\n//                       onClick={() => history.push(return_url)}>\n//                 <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n//               </Button>\n//             </HasPermissionWrapper>\n//             <OrganizationMenu activeLink='levels'/>\n//           </Grid.Col>\n//         </Grid.Row>\n//       </Container>\n//     </div>\n//   </SiteWrapper>\n// )\n\n// export default withTranslation()(withRouter(OrganizationLevelAdd))","// @flow\n\nimport React from 'react'\nimport { useMutation, useQuery } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { \n  Formik,\n  Form as FoForm, \n  Field, \n  ErrorMessage \n} from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport { UPDATE_DOCUMENT, GET_DOCUMENT_QUERY, GET_DOCUMENTS_QUERY } from \"./queries\"\nimport { DOCUMENT_SCHEMA } from './yupSchema'\nimport { dateToLocalISO } from \"../../../../tools/date_tools\"\n// import OrganizationDocumentForm from './OrganizationDocumentForm'\nimport CSDatePicker from \"../../../ui/CSDatePicker\"\n\nimport {\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport OrganizationDocumentsBase from \"./OrganizationDocumentsBase\"\nimport { getSubtitle } from './tools'\n\n\nfunction OrganizationDocumentEdit({ t, match, history }) {\n  const organizationId = match.params.organization_id\n  const documentType = match.params.document_type\n  const id = match.params.id\n  const subTitle = getSubtitle(t, documentType)\n  \n  const returnUrl = `/organization/documents/${organizationId}/${documentType}`\n  const sidebarButton = <HasPermissionWrapper \n    permission=\"change\"\n    resource=\"organizationdocument\">\n      <Link to={returnUrl} >\n        <Button color=\"primary btn-block mb-6\" >\n          <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n        </Button>\n      </Link>\n  </HasPermissionWrapper>\n\n  const [updateDocument, { data: dataUpdate }] = useMutation(UPDATE_DOCUMENT, {\n    onCompleted: () => history.push(returnUrl)\n  })\n  const { loading, error, data } = useQuery(GET_DOCUMENT_QUERY, {\n    variables: { \"id\": id }\n  })\n\n  if (loading) {\n    return (\n      <OrganizationDocumentsBase sidebarButton={sidebarButton}>\n        {t(\"general.loading_with_dots\")}\n      </OrganizationDocumentsBase>\n    )\n  }\n\n  if (error) {\n    return (\n      <OrganizationDocumentsBase sidebarButton={sidebarButton}>\n        {t(\"organization.documents.error_loading\")}\n      </OrganizationDocumentsBase>\n    )\n  }\n\n\n  return (\n    <OrganizationDocumentsBase sidebarButton={sidebarButton}>\n      <Card>\n        <Card.Header>\n          <Card.Title>\n            {t('organization.documents.edit') + ' - ' + subTitle}\n          </Card.Title>\n        </Card.Header>\n        <Formik\n          initialValues={{ \n            version: data.organizationDocument.version,\n            dateStart: data.organizationDocument.dateStart, \n            dateEnd: data.organizationDocument.dateEnd,\n          }}\n          // validationSchema={DOCUMENT_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n            console.log(\"Submit values\")\n            console.log(values)\n\n            let inputVars = {\n              id: id,\n              version: values.version,\n              dateStart: dateToLocalISO(values.dateStart),\n            }\n\n            if (values.dateEnd) {\n              inputVars.dateEnd = dateToLocalISO(values.dateEnd)\n            }\n\n            updateDocument({ variables: {\n              input: inputVars\n            }, refetchQueries: [\n                {query: GET_DOCUMENTS_QUERY, variables: {documentType: documentType}}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data);\n                toast.success((t('organization.documents.toast_edit_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                  setSubmitting(false)\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n          }}\n          >\n          {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n            <FoForm>\n            <Card.Body>\n              <Grid.Row>\n                <Grid.Col>\n                  <Form.Group label={t('general.version')}>\n                    <Field type=\"text\" \n                          name=\"version\" \n                          className={(errors.version) ? \"form-control is-invalid\" : \"form-control\"} \n                          autoComplete=\"off\" />\n                    <ErrorMessage name=\"version\" component=\"span\" className=\"invalid-feedback\" />\n                  </Form.Group>\n                </Grid.Col>\n                {/* <Grid.Col>\n                  <Form.Group label={t('general.custom_file_input_label')}>\n                    <div className=\"custom-file\">\n                      <input type=\"file\" ref={inputFileName} className=\"custom-file-input\" onChange={handleFileInputChange} />\n                      <label className=\"custom-file-label\" style={customFileInputLabelStyle}>\n                        {fileInputLabel}\n                      </label>\n                    </div>\n                  </Form.Group>\n                </Grid.Col> */}\n              </Grid.Row>\n              <Grid.Row>\n                <Grid.Col>\n                  <Form.Group label={t('general.date_start')}>\n                    <CSDatePicker \n                      selected={values.dateStart}\n                      onChange={(date) => setFieldValue(\"dateStart\", date)}\n                      onBlur={() => setFieldTouched(\"dateStart\", true)}\n                    />\n                    <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n                  </Form.Group>\n                </Grid.Col>\n                <Grid.Col>\n                  <Form.Group label={t('general.date_end')}>\n                    <CSDatePicker \n                      selected={values.dateEnd}\n                      onChange={(date) => setFieldValue(\"dateEnd\", date)}\n                      onBlur={() => setFieldTouched(\"dateEnd\", true)}\n                    />\n                    <ErrorMessage name=\"dateEnd\" component=\"span\" className=\"invalid-feedback\" />\n                  </Form.Group>\n                </Grid.Col>\n              </Grid.Row>\n            </Card.Body>\n            <Card.Footer>\n              <Button \n                color=\"primary\"\n                className=\"pull-right\" \n                type=\"submit\" \n                disabled={isSubmitting}\n              >\n                {t('general.submit')}\n              </Button>\n              <Button color=\"link\" onClick={() => history.push(returnUrl)}>\n                {t('general.cancel')}\n              </Button>\n            </Card.Footer>\n          </FoForm>\n          )}\n        </Formik>\n      </Card>\n    </OrganizationDocumentsBase>\n  )\n}\n\nexport default withTranslation()(OrganizationDocumentEdit)\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nfunction OrganizationLanguagesBase({t, history, children, showBack=false}) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"organization.title\")} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ?\n                <Link to=\"/organization/languages\">\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>  \n                :\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"organizationlanguage\">\n                  <Link to=\"/organization/languages/add\">\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.languages.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n              }     \n              <OrganizationMenu activeLink='languages'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationLanguagesBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_LANGUAGES_QUERY = gql`\n  query OrganizationLanguages($after: String, $before: String, $archived: Boolean) {\n    organizationLanguages(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const GET_LANGUAGE_QUERY = gql`\n  query OrganizationLanguage($id: ID!) {\n    organizationLanguage(id:$id) {\n      id\n      name\n      archived\n    }\n  }\n`\n\nexport const ADD_LANGUAGE = gql`\nmutation CreateOrganizationLanguage($input:CreateOrganizationLanguageInput!) {\n  createOrganizationLanguage(input: $input) {\n    organizationLanguage{\n      id\n      archived\n      name\n    }\n  }\n}\n`\n\nexport const UPDATE_LANGUAGE = gql`\nmutation UpdateOrganizationLanguage($input: UpdateOrganizationLanguageInput!) {\n  updateOrganizationLanguage(input: $input) {\n    organizationLanguage {\n      id\n      name\n    }\n  }\n}\n`\n\nexport const ARCHIVE_LANGUAGE = gql`\nmutation ArchiveOrganizationLanguage($input: ArchiveOrganizationLanguageInput!) {\n  archiveOrganizationLanguage(input: $input) {\n    organizationLanguage {\n      id\n      archived\n    }\n  }\n}\n`","// @flow\n\nimport React, { useState } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Table\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationLanguagesBase from './OrganizationLanguagesBase'\n\nimport { GET_LANGUAGES_QUERY, ARCHIVE_LANGUAGE } from \"./queries\"\n\n\nfunction OrganizationLanguages({t, history}) {\n  let [archived, setArchived] = useState(false)\n  const cardTitle = t('organization.languages.title')\n  const { loading, error, data, refetch, fetchMore } = useQuery(GET_LANGUAGES_QUERY, {\n    variables: { archived: archived }\n  })\n  const [ archiveLanguage ] = useMutation(ARCHIVE_LANGUAGE)\n\n  const headerOptions = <Card.Options>\n    <Button color={(!archived) ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {setArchived(false); refetch({archived: false});}}>\n      {t('general.current')}\n    </Button>\n    <Button color={(archived) ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {setArchived(true); refetch({archived: true});}}>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  if (loading) return (\n    <OrganizationLanguagesBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationLanguagesBase>\n  )\n\n  if (error) return (\n    <OrganizationLanguagesBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('organization.languages.error_loading')}</p>\n      </ContentCard>\n    </OrganizationLanguagesBase>\n  )\n\n  let languages = data.organizationLanguages\n\n  // Empty list\n  if (!languages.edges.length) { return (\n    <OrganizationLanguagesBase>\n      <ContentCard cardTitle={t('organization.languages.title')}\n                    headerContent={headerOptions}>\n        <p>\n          {(!archived) ? t('organization.languages.empty_list') : t(\"organization.languages.empty_archive\")}\n        </p>\n      </ContentCard>\n    </OrganizationLanguagesBase>\n  )}\n\n\n  return (\n    <OrganizationLanguagesBase>\n      <ContentCard \n        cardTitle={cardTitle}\n        headerContent={headerOptions}\n        pageInfo={languages.pageInfo}\n        onLoadMore={() => {\n        fetchMore({\n          variables: {\n            after: languages.pageInfo.endCursor\n          },\n          updateQuery: (previousResult, { fetchMoreResult }) => {\n            const newEdges = fetchMoreResult.organizationLanguages.edges\n            const pageInfo = fetchMoreResult.organizationLanguages.pageInfo\n\n            return newEdges.length\n              ? {\n                  // Put the new languages at the end of the list and update `pageInfo`\n                  // so we have the new `endCursor` and `hasNextPage` values\n                  organizationLanguages: {\n                    __typename: previousResult.organizationLanguages.__typename,\n                    edges: [ ...previousResult.organizationLanguages.edges, ...newEdges ],\n                    pageInfo\n                  }\n                }\n              : previousResult\n          }\n        })\n      }} >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {languages.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    {node.name}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    {(node.archived) ? \n                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                      <Button className='btn-sm' \n                              onClick={() => history.push(\"/organization/languages/edit/\" + node.id)}\n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    }\n                    <button className=\"icon btn btn-link btn-sm\" \n                        title={t('general.archive')} \n                        href=\"\"\n                        onClick={() => {\n                          console.log(\"clicked archived\")\n                          let id = node.id\n                          archiveLanguage({ variables: {\n                            input: {\n                            id,\n                            archived: !archived\n                            }\n                    }, refetchQueries: [\n                        {query: GET_LANGUAGES_QUERY, variables: {\"archived\": archived }}\n                    ]}).then(({ data }) => {\n                      console.log('got data', data);\n                      toast.success(\n                        (archived) ? t('general.unarchived'): t('general.archived'), {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                    }).catch((error) => {\n                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                      console.log('there was an error sending the query', error);\n                    })\n                    }}>\n                      <Icon prefix=\"fe\" name=\"inbox\" />\n                    </button>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </OrganizationLanguagesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationLanguages))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const LANGUAGE_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(2, t('yup.min_len_2'))\n      .required(t('yup.field_required')),\n  })\n","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n    Button,\n    Card,\n    Form\n  } from \"tabler-react\"\n  import { Form as FoForm, Field, ErrorMessage } from 'formik'\n\nconst OrganizationLanguageForm = ({ t, history, isSubmitting, errors, returnUrl }) => (\n    <FoForm>\n        <Card.Body>\n            <Form.Group label={t('general.name')}>\n            <Field type=\"text\" \n                    name=\"name\" \n                    className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n        </Card.Body>\n        <Card.Footer>\n            <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n            >\n            {t('general.submit')}\n            </Button>\n            <Link to={returnUrl}>\n                <Button color=\"link\">\n                    {t('general.cancel')}\n                </Button>\n            </Link>\n        </Card.Footer>\n    </FoForm>\n)\n  \n  \n  export default withTranslation()(withRouter(OrganizationLanguageForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { GET_LANGUAGES_QUERY, ADD_LANGUAGE } from './queries'\nimport { LANGUAGE_SCHEMA } from './yupSchema'\nimport OrganizationLanguageForm from './OrganizationLanguageForm'\n\n\nimport {\n  Card,\n} from \"tabler-react\"\n\nimport OrganizationLanguagesBase from './OrganizationLanguagesBase';\n\n\nfunction OrganizationLanguageAdd({t, history}) {\n  const returnUrl = \"/organization/languages\"\n  const [ addLanguage ] = useMutation(ADD_LANGUAGE)\n  \n  return (\n   <OrganizationLanguagesBase showBack={true}>\n    <Card>\n      <Card.Header>\n        <Card.Title>{t('organization.languages.title_add')}</Card.Title>\n      </Card.Header>\n      <Formik\n          initialValues={{ name: '', code: '' }}\n          validationSchema={LANGUAGE_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              addLanguage({ variables: {\n                input: {\n                  name: values.name, \n                }\n              }, refetchQueries: [\n                  {query: GET_LANGUAGES_QUERY, variables: {\"archived\": false }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data);\n                  history.push(returnUrl)\n                  toast.success((t('organization.languages.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors }) => (\n            <OrganizationLanguageForm \n              isSubmitting={isSubmitting}\n              errors={errors}\n              returnUrl={returnUrl}\n            />\n          )}\n      </Formik>\n    </Card>\n   </OrganizationLanguagesBase> \n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationLanguageAdd))","import React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_LANGUAGES_QUERY, GET_LANGUAGE_QUERY, UPDATE_LANGUAGE } from './queries'\nimport { LANGUAGE_SCHEMA } from './yupSchema'\nimport OrganizationLanguageForm from './OrganizationLanguageForm'\n\nimport {\n  Dimmer,\n  Card,\n} from \"tabler-react\";\nimport OrganizationLanguagesBase from './OrganizationLanguagesBase';\nimport ContentCard from \"../../general/ContentCard\"\n\n\nfunction OrganizationLanguageEdit({t, match, history}) {\n  const id = match.params.id\n  const cardTitle = t('organization.languages.title_edit')\n  const returnUrl = \"/organization/languages\"\n  const { loading, error, data } = useQuery(GET_LANGUAGE_QUERY, {\n    variables: { id: id }\n  })\n  const [ updateLanguage ] = useMutation(UPDATE_LANGUAGE)\n\n  if (loading) return (\n    <OrganizationLanguagesBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationLanguagesBase>\n  )\n\n  if (error) return (\n    <OrganizationLanguagesBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </OrganizationLanguagesBase>\n  )\n                    \n  const initialData = data.organizationLanguage;\n  console.log('query data')\n  console.log(data)\n\n  return (\n    <OrganizationLanguagesBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n            initialValues={{ \n              name: initialData.name, \n            }}\n            validationSchema={LANGUAGE_SCHEMA}\n            onSubmit={(values, { setSubmitting }) => {\n                console.log('submit values:')\n                console.log(values)\n\n                updateLanguage({ variables: {\n                  input: {\n                    id: match.params.id,\n                    name: values.name,\n                  }\n                }, refetchQueries: [\n                    {query: GET_LANGUAGES_QUERY, variables: {\"archived\": false }}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    history.push(returnUrl)\n                    toast.success((t('organization.languages.toast_edit_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, errors }) => (\n              <OrganizationLanguageForm \n                isSubmitting={isSubmitting}\n                errors={errors}\n                returnUrl={returnUrl}\n              />\n            )}\n        </Formik>\n      </Card>\n    </OrganizationLanguagesBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationLanguageEdit))","import { gql } from \"@apollo/client\"\n\nexport const GET_LOCATIONS_QUERY = gql`\n  query OrganizationLocations($after: String, $before: String, $archived: Boolean) {\n    organizationLocations(first: 100, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id,\n          archived,\n          displayPublic,\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const GET_LOCATION_QUERY = gql`\n  query OrganizationLocation($id: ID!) {\n    organizationLocation(id:$id) {\n      id\n      name\n      displayPublic\n      archived\n    }\n  }\n`\n\nexport const ADD_LOCATION = gql`\nmutation CreateOrganizationLocation($input: CreateOrganizationLocationInput!) {\n  createOrganizationLocation(input: $input) {\n    organizationLocation {\n      id\n      archived\n      displayPublic\n      name\n    }\n  }\n}\n`\n\nexport const UPDATE_LOCATION = gql`\nmutation UpdateOrganizationLocation($input: UpdateOrganizationLocationInput!) {\n  updateOrganizationLocation(input: $input) {\n    organizationLocation {\n      id\n      name\n      displayPublic\n    }\n  }\n}\n`\n\nexport const ARCHIVE_LOCATION = gql`\nmutation ArchiveOrganizationLocation($input: ArchiveOrganizationLocationInput!) {\n  archiveOrganizationLocation(input: $input) {\n    organizationLocation {\n      id\n      archived\n    }\n  }\n}\n`\n","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nfunction OrganizationLocationsBase({t, history, children, showBack=false}) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title=\"Organization\" />\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ? \n                <Link to=\"/organization/locations\">\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button> \n                </Link>\n                :\n                <HasPermissionWrapper permission=\"add\"\n                                resource=\"organizationlocation\">\n                  <Link to=\"/organization/locations/add\">\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.locations.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n              }\n              <OrganizationMenu activeLink='locations'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>  \n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationLocationsBase))","// @flow\n\nimport React, { useState } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Table\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../general/ContentCard\"\n\nimport { GET_LOCATIONS_QUERY, ARCHIVE_LOCATION } from \"./queries\"\nimport OrganizationLocationsBase from \"./OrganizationLocationsBase\"\n\nfunction OrganizationLocations({t, history}) {\n  let [archived, setArchived] = useState(false)\n  const cardTitle = t('organization.locations.title')\n  const { loading, error, data, refetch, fetchMore } = useQuery(GET_LOCATIONS_QUERY, {\n    variables: { archived: archived }\n  })\n  const [ archiveLocation ] = useMutation(ARCHIVE_LOCATION)\n\n  const headerOptions = <Card.Options>\n    <Button color={(!archived) ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {setArchived(false); refetch({archived: false});}}>\n      {t('general.current')}\n    </Button>\n    <Button color={(archived) ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {setArchived(true); refetch({archived: true});}}>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  // Loading\n  if (loading) return (\n    <OrganizationLocationsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationLocationsBase>\n  )\n  // Error\n  if (error) return (\n    <OrganizationLocationsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('organization.locations.error_loading')}</p>\n      </ContentCard>\n    </OrganizationLocationsBase>\n  )\n\n  let locations = data.organizationLocations\n\n  // Empty list\n  if (!locations.edges.length) { return (\n    <OrganizationLocationsBase>\n      <ContentCard cardTitle={cardTitle}\n                  headerContent={headerOptions}>\n        <p>\n        {(!archived) ? t('organization.locations.empty_list') : t(\"organization.locations.empty_archive\")}\n        </p>\n      </ContentCard>\n    </OrganizationLocationsBase>\n  )}\n\n  return (\n    <OrganizationLocationsBase>\n      <ContentCard cardTitle={cardTitle}\n                headerContent={headerOptions}\n                pageInfo={locations.pageInfo}\n                onLoadMore={() => {\n                fetchMore({\n                  variables: {\n                    after: locations.pageInfo.endCursor\n                  },\n                  updateQuery: (previousResult, { fetchMoreResult }) => {\n                    const newEdges = fetchMoreResult.organizationLocations.edges\n                    const pageInfo = fetchMoreResult.organizationLocations.pageInfo\n\n                    return newEdges.length\n                      ? {\n                          // Put the new locations at the end of the list and update `pageInfo`\n                          // so we have the new `endCursor` and `hasNextPage` values\n                          organizationLocations: {\n                            __typename: previousResult.organizationLocations.__typename,\n                            edges: [ ...previousResult.organizationLocations.edges, ...newEdges ],\n                            pageInfo\n                          }\n                        }\n                      : previousResult\n                  }\n                })\n              }} >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {locations.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    {node.name}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {(node.displayPublic) ? \n                      <Badge color=\"success\">{t('general.yes')}</Badge>: \n                      <Badge color=\"danger\">{t('general.no')}</Badge>}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    {(node.archived) ? \n                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                      <div>\n                        <Button className='btn-sm' \n                                onClick={() => history.push(\"/organization/locations/edit/\" + node.id)}\n                                color=\"secondary\">\n                          {t('general.edit')}\n                        </Button>\n                        <Button className='btn-sm' \n                                onClick={() => history.push(\"/organization/locations/rooms/\" + node.id)}\n                                color=\"secondary\">\n                          {t('general.rooms')}\n                        </Button>\n                      </div>\n                    }\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                        title={t('general.archive')} \n                        href=\"\"\n                        onClick={() => {\n                          console.log(\"clicked archived\")\n                          let id = node.id\n                          archiveLocation({ variables: {\n                            input: {\n                            id,\n                            archived: !archived\n                            }\n                    }, refetchQueries: [\n                        {query: GET_LOCATIONS_QUERY, variables: {\"archived\": archived }}\n                    ]}).then(({ data }) => {\n                      console.log('got data', data);\n                      toast.success(\n                        (archived) ? t('general.unarchived'): t('general.archived'), {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                    }).catch((error) => {\n                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                      console.log('there was an error sending the query', error);\n                    })\n                    }}>\n                      <Icon prefix=\"fa\" name=\"inbox\" />\n                    </button>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </OrganizationLocationsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationLocations))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const LOCATION_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  })\n","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport { GET_LOCATIONS_QUERY, ADD_LOCATION } from './queries'\nimport { LOCATION_SCHEMA } from './yupSchema'\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\nimport OrganizationLocationsBase from \"./OrganizationLocationsBase\"\n\nfunction OrganizationLocationAdd({ t, history }) {\n  const returnUrl = \"/organization/locations\"\n  const cardTitle = t('organization.locations.title_add')\n  const [ addLocation ] = useMutation(ADD_LOCATION)\n\n  return (\n    <OrganizationLocationsBase showBack={true}>\n      <Card>    \n        <Card.Header>\n          <Card.Title>{cardTitle}</Card.Title>\n        </Card.Header>\n        <Formik\n          initialValues={{ name: '', displayPublic: true }}\n          validationSchema={LOCATION_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              addLocation({ variables: {\n                input: {\n                  name: values.name, \n                  displayPublic: values.displayPublic\n                }\n              }, refetchQueries: [\n                  {query: GET_LOCATIONS_QUERY, variables: {\"archived\": false }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data);\n                  history.push(returnUrl)\n                  toast.success((t('organization.locations.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors, values }) => (\n            <FoForm>\n                <Card.Body>\n                    <Form.Group>\n                      <Form.Label className=\"custom-switch\">\n                        <Field \n                          className=\"custom-switch-input\"\n                          type=\"checkbox\" \n                          name=\"displayPublic\" \n                          checked={values.displayPublic} />\n                        <span className=\"custom-switch-indicator\" ></span>\n                        <span className=\"custom-switch-description\">{t('organization.location.public')}</span>\n                      </Form.Label>\n                      <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n                    </Form.Group>    \n\n                    <Form.Group label={t('general.name')}>\n                      <Field type=\"text\" \n                              name=\"name\" \n                              className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                              autoComplete=\"off\" />\n                      <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                    </Form.Group>\n                </Card.Body>\n                <Card.Footer>\n                    <Button \n                      color=\"primary\"\n                      className=\"pull-right\" \n                      type=\"submit\" \n                      disabled={isSubmitting}\n                    >\n                      {t('general.submit')}\n                    </Button>\n                    <Link to={returnUrl}>\n                      <Button color=\"link\">\n                          {t('general.cancel')}\n                      </Button>\n                    </Link>\n                </Card.Footer>\n            </FoForm>\n          )}\n        </Formik>\n      </Card>\n    </OrganizationLocationsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationLocationAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport { GET_LOCATIONS_QUERY, GET_LOCATION_QUERY, UPDATE_LOCATION } from './queries'\nimport { LOCATION_SCHEMA } from './yupSchema'\n\nimport {\n  Button,\n  Card,\n  Dimmer,\n  Form\n} from \"tabler-react\";\n\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationLocationsBase from \"./OrganizationLocationsBase\"\n\n\nfunction OrganizationLocationEdit({t, match, history}) {\n  const id = match.params.id\n  const cardTitle = t('organization.locations.title_edit')\n  const returnUrl = \"/organization/locations\"\n  const { loading, error, data } = useQuery(GET_LOCATION_QUERY, {\n    variables: { id: id }\n  })\n  const [ updateLocation ] = useMutation(UPDATE_LOCATION)\n\n  // Loading\n  if (loading) return (\n    <OrganizationLocationsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationLocationsBase>\n  )\n  // Error\n  if (error) return (\n    <OrganizationLocationsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('organization.locations.error_loading')}</p>\n      </ContentCard>\n    </OrganizationLocationsBase>\n  )\n\n  const initialData = data.organizationLocation;\n  console.log('query data')\n  console.log(data)\n\n  return (\n    <OrganizationLocationsBase showBack={true}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle}</Card.Title>\n          {console.log(match.params.id)}\n        </Card.Header>                    \n        <Formik\n            initialValues={{ \n              name: initialData.name, \n              displayPublic: initialData.displayPublic \n            }}\n            validationSchema={LOCATION_SCHEMA}\n            onSubmit={(values, { setSubmitting }) => {\n                console.log('submit values:')\n                console.log(values)\n\n                updateLocation({ variables: {\n                  input: {\n                    id: match.params.id,\n                    name: values.name,\n                    displayPublic: values.displayPublic \n                  }\n                }, refetchQueries: [\n                    {query: GET_LOCATIONS_QUERY, variables: {\"archived\": false }}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    history.push(returnUrl)\n                    toast.success((t('organization.locations.toast_edit_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, errors, values }) => (\n              <FoForm>\n                  <Card.Body>\n                      <Form.Group>\n                        <Form.Label className=\"custom-switch\">\n                          <Field \n                            className=\"custom-switch-input\"\n                            type=\"checkbox\" \n                            name=\"displayPublic\" \n                            checked={values.displayPublic} />\n                          <span className=\"custom-switch-indicator\" ></span>\n                          <span className=\"custom-switch-description\">{t('organization.location.public')}</span>\n                        </Form.Label>\n                        <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n                      </Form.Group>     \n                      <Form.Group label={t('general.name')} >\n                        <Field type=\"text\" \n                              name=\"name\" \n                              className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                              autoComplete=\"off\" />\n                        <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                      </Form.Group>\n                  </Card.Body>\n                  <Card.Footer>\n                      <Button \n                        className=\"pull-right\"\n                        color=\"primary\"\n                        disabled={isSubmitting}\n                        type=\"submit\"\n                      >\n                        {t('general.submit')}\n                      </Button>\n                      <Link to={returnUrl}>\n                        <Button\n                          type=\"button\" \n                          color=\"link\" \n                        >\n                            {t('general.cancel')}\n                        </Button>\n                      </Link>\n                    </Card.Footer>\n                </FoForm>\n              )}\n            </Formik>\n          </Card>\n    </OrganizationLocationsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationLocationEdit))","import { gql } from \"@apollo/client\"\n\nexport const GET_LOCATION_ROOMS_QUERY = gql`\n  query OrganizationLocationRooms($after: String, $before: String, $organizationLocation: ID!, $archived: Boolean!) {\n    organizationLocationRooms(first: 15, before: $before, after: $after, organizationLocation: $organizationLocation, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          organizationLocation {\n            id\n            name\n          }\n          archived,\n          displayPublic\n          name\n        }\n      }\n    }\n    organizationLocation(id: $organizationLocation) {\n      id\n      name\n    }\n  }\n`\n\nexport const GET_LOCATION_ROOM_QUERY = gql`\n  query OrganizationLocationRoom($id: ID!) {\n    organizationLocationRoom(id:$id) {\n      id\n      organizationLocation {\n        id\n        name\n      }\n      name\n      displayPublic\n      archived\n    }\n  }\n`\n\nexport const ADD_LOCATION_ROOM = gql`\n  mutation CreateOrganizationLocationRoom($input: CreateOrganizationLocationRoomInput!) {\n    createOrganizationLocationRoom(input: $input) {\n      organizationLocationRoom {\n        id\n        organizationLocation {\n          id\n          name\n        }\n        archived\n        displayPublic\n        name\n      }\n    }\n  }\n`\n\nexport const UPDATE_LOCATION_ROOM = gql`\nmutation UpdateOrganizationLocationRoom($input: UpdateOrganizationLocationRoomInput!) {\n  updateOrganizationLocationRoom(input: $input) {\n    organizationLocationRoom {\n      id\n      organizationLocation {\n        id\n        name\n      }\n      name\n      displayPublic\n    }\n  }\n}\n`\n\nexport const ARCHIVE_LOCATION_ROOM = gql`\nmutation ArchiveOrganizationLocationRoom($input: ArchiveOrganizationLocationRoomInput!) {\n  archiveOrganizationLocationRoom(input: $input) {\n    organizationLocationRoom {\n      id\n      archived\n    }\n  }\n}\n`","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../../OrganizationMenu\"\n\n\nfunction OrganizationLocationRoomsBase({t, history, match, children, showBack=false}) {\n  const locationId = match.params.location_id\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"organization.title\")}>\n            <div className=\"page-options d-flex\">\n              <Link to=\"/organization/locations\" \n                    className='btn btn-outline-secondary btn-sm'>\n                  <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back_to')} {t('organization.locations.title')}\n              </Link>\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ?\n                <Link to={`/organization/locations/rooms/${locationId}`}>\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n              :\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"organizationlocationroom\">\n                  <Link to={`/organization/locations/rooms/add/${match.params.location_id}`}>\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.location_rooms.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n              }\n            <OrganizationMenu activeLink='locations'/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n    </div>\n  </SiteWrapper>        \n)}\n\n\nexport default withTranslation()(withRouter(OrganizationLocationRoomsBase))","// @flow\n\nimport React, { useState } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Alert,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Table\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../../general/ContentCard\"\n\nimport { GET_LOCATION_ROOMS_QUERY, ARCHIVE_LOCATION_ROOM } from \"./queries\"\nimport OrganizationLocationRoomsBase from './OrganizationLocationRoomsBase'\n\n\nfunction OrganizationLocationsRooms({ t, history, match }) {\n  const organizationLocationId = match.params.location_id\n  const cardTitle = t('organization.location_rooms.title')\n  let [archived, setArchived] = useState(false)\n  const { loading, error, data, refetch, fetchMore } = useQuery(GET_LOCATION_ROOMS_QUERY, {\n    variables: { archived: archived, organizationLocation: organizationLocationId }\n  })\n  const [ archiveLocationRoom ] = useMutation(ARCHIVE_LOCATION_ROOM)\n\n  const headerOptions = <Card.Options>\n    <Button color={(!archived) ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {setArchived(false); refetch({archived: false});}}>\n      {t('general.current')}\n    </Button>\n    <Button color={(archived) ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {setArchived(true); refetch({archived: true});}}>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  // Loading\n  if (loading) return (\n    <OrganizationLocationRoomsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationLocationRoomsBase>\n  )\n  // Error\n  if (error) return (\n    <OrganizationLocationRoomsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('organization.location_rooms.error_loading')}</p>\n      </ContentCard>\n    </OrganizationLocationRoomsBase>\n  )\n\n  let locationRooms = data.organizationLocationRooms\n  let location = data.organizationLocation\n\n  // Empty list\n  if (!locationRooms.edges.length) { return (\n    <OrganizationLocationRoomsBase>\n      <ContentCard cardTitle={cardTitle}\n                  headerContent={headerOptions}>\n        <p>\n          {(!archived) ? t('organization.location_rooms.empty_list') : t(\"organization.location_rooms.empty_archive\")}\n        </p>\n      </ContentCard>\n    </OrganizationLocationRoomsBase>\n  )}\n\n  return (\n    <OrganizationLocationRoomsBase>\n      <ContentCard \n        cardTitle={cardTitle}\n                    headerContent={headerOptions}\n                    pageInfo={locationRooms.pageInfo}\n                    onLoadMore={() => {\n                    fetchMore({\n                      variables: {\n                        after: locationRooms.pageInfo.endCursor\n                      },\n                      updateQuery: (previousResult, { fetchMoreResult }) => {\n                        const newEdges = fetchMoreResult.organizationLocationsRooms.edges\n                        const pageInfo = fetchMoreResult.organizationLocationsRooms.pageInfo\n\n                        return newEdges.length\n                          ? {\n                              // Put the new locations at the end of the list and update `pageInfo`\n                              // so we have the new `endCursor` and `hasNextPage` values\n                              organizationLocationsRooms: {\n                                __typename: previousResult.organizationLocationsRooms.__typename,\n                                edges: [ ...previousResult.organizationLocationsRooms.edges, ...newEdges ],\n                                pageInfo\n                              }\n                            }\n                          : previousResult\n                      }\n                    })\n                  }} >\n        <div>\n          <Alert type=\"primary\">\n            <strong>{t('general.location')}</strong> {location.name}\n          </Alert>\n\n          <Table>\n            <Table.Header>\n              <Table.Row key={v4()}>\n                <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n              </Table.Row>\n            </Table.Header>\n            <Table.Body>\n                {locationRooms.edges.map(({ node }) => (\n                  <Table.Row key={v4()}>\n                    <Table.Col key={v4()}>\n                      {node.name}\n                    </Table.Col>\n                    <Table.Col key={v4()}>\n                      {(node.displayPublic) ? \n                        <Badge color=\"success\">{t('general.yes')}</Badge>: \n                        <Badge color=\"danger\">{t('general.no')}</Badge>}\n                    </Table.Col>\n                    <Table.Col className=\"text-right\" key={v4()}>\n                      {(node.archived) ? \n                        <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                        <Button className='btn-sm' \n                                onClick={() => history.push(\"/organization/locations/rooms/edit/\" + match.params.location_id + '/' + node.id)}\n                                color=\"secondary\">\n                          {t('general.edit')}\n                        </Button>\n                      }\n                    </Table.Col>\n                      <Table.Col className=\"text-right\" key={v4()}>\n                        <button className=\"icon btn btn-link btn-sm\" \n                            title={t('general.archive')} \n                            href=\"\"\n                            onClick={() => {\n                              console.log(\"clicked archived\")\n                              let id = node.id\n                              archiveLocationRoom({ variables: {\n                                input: {\n                                id,\n                                archived: !archived\n                                }\n                        }, refetchQueries: [\n                            { \n                              query: GET_LOCATION_ROOMS_QUERY, \n                              variables: {archived: archived, organizationLocation: organizationLocationId }\n                            }\n                        ]}).then(({ data }) => {\n                          console.log('got data', data);\n                          toast.success(\n                            (archived) ? t('general.unarchived'): t('general.archived'), {\n                              position: toast.POSITION.BOTTOM_RIGHT\n                            })\n                        }).catch((error) => {\n                          toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                              position: toast.POSITION.BOTTOM_RIGHT\n                            })\n                          console.log('there was an error sending the query', error);\n                        })\n                        }}>\n                          <Icon prefix=\"fa\" name=\"inbox\" />\n                        </button>\n                      </Table.Col>\n                  </Table.Row>\n                ))}\n            </Table.Body>\n          </Table>\n          </div>\n      </ContentCard>\n    </OrganizationLocationRoomsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationLocationsRooms))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const LOCATION_ROOM_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\n\nconst OrganizationLocationRoomForm = ({ t, history, match, isSubmitting, errors, values, returnUrl }) => (\n  <FoForm>\n      <Card.Body>\n          <Form.Group>\n            <Form.Label className=\"custom-switch\">\n              <Field \n                className=\"custom-switch-input\"\n                type=\"checkbox\" \n                name=\"displayPublic\" \n                checked={values.displayPublic} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('organization.location_room.public')}</span>\n            </Form.Label>\n            <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n          </Form.Group>    \n\n          <Form.Group label={t('general.name')}>\n            <Field type=\"text\" \n                    name=\"name\" \n                    className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Link to={returnUrl}>\n            <Button color=\"link\">\n                {t('general.cancel')}\n            </Button>\n          </Link>\n      </Card.Footer>\n  </FoForm>\n);\n\nexport default withTranslation()(withRouter(OrganizationLocationRoomForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { GET_LOCATION_ROOMS_QUERY, ADD_LOCATION_ROOM } from './queries'\nimport { LOCATION_ROOM_SCHEMA } from './yupSchema'\nimport OrganizationLocationRoomForm from './OrganizationLocationRoomForm'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../../OrganizationMenu\"\nimport OrganizationLocationRoomsBase from './OrganizationLocationRoomsBase';\n\n\nfunction OrganizationLocationRoomAdd({ t, history, match }) {\n  const locationId = match.params.location_id\n  const returnUrl = `/organization/locations/rooms/${locationId}`\n  const [ addLocationRoom ] = useMutation(ADD_LOCATION_ROOM)\n\n  return (\n    <OrganizationLocationRoomsBase showBack={true}>\n      <Card title={t(\"organization.location_rooms.title_add\")}>\n        <Formik\n          initialValues={{ name: '', displayPublic: true }}\n          validationSchema={LOCATION_ROOM_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              addLocationRoom({ variables: {\n                input: {\n                  organizationLocation: locationId,\n                  name: values.name, \n                  displayPublic: values.displayPublic\n                }\n              }, refetchQueries: [\n                  {query: GET_LOCATION_ROOMS_QUERY,\n                    variables: {\"archived\": false, \"organizationLocation\": locationId }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data);\n                  history.push(returnUrl)\n                  toast.success((t('organization.location_rooms.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors, values }) => (\n            <OrganizationLocationRoomForm\n              isSubmitting={isSubmitting}\n              errors={errors}\n              values={values}\n              returnUrl={returnUrl}\n              />\n          )}\n        </Formik>\n      </Card>\n    </OrganizationLocationRoomsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationLocationRoomAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_LOCATION_ROOMS_QUERY, GET_LOCATION_ROOM_QUERY, UPDATE_LOCATION_ROOM } from './queries'\nimport { LOCATION_ROOM_SCHEMA } from './yupSchema'\nimport OrganizationLocationRoomForm from './OrganizationLocationRoomForm'\n\nimport {\n  Card,\n  Dimmer\n} from \"tabler-react\";\n\nimport ContentCard from \"../../../general/ContentCard\"\nimport OrganizationLocationRoomsBase from './OrganizationLocationRoomsBase'\n\n\nfunction OrganizationLocationRoomEdit({t, history, match}) {\n  const id = match.params.id\n  const locationId = match.params.location_id\n  const returnUrl = `/organization/locations/rooms/${locationId}`\n  const cardTitle = t('organization.location_rooms.title_edit')\n  const { loading, error, data } = useQuery(GET_LOCATION_ROOM_QUERY, {\n    variables: { id: id }\n  })\n  const [ updateLocationRoom ] = useMutation(UPDATE_LOCATION_ROOM)\n\n  // Loading\n  if (loading) return (\n    <OrganizationLocationRoomsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationLocationRoomsBase>\n  )\n  // Error\n  if (error) return (\n    <OrganizationLocationRoomsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </OrganizationLocationRoomsBase>\n  )\n\n  const initialData = data.organizationLocationRoom;\n  console.log('query data')\n  console.log(data)\n\n  return (\n    <OrganizationLocationRoomsBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n          initialValues={{ \n            name: initialData.name, \n            displayPublic: initialData.displayPublic \n          }}\n          validationSchema={LOCATION_ROOM_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              updateLocationRoom({ variables: {\n                input: {\n                  id: match.params.id,\n                  name: values.name,\n                  displayPublic: values.displayPublic \n                }\n              }, refetchQueries: [\n                {query: GET_LOCATION_ROOMS_QUERY,\n                  variables: {\"archived\": false, \"organizationLocation\": match.params.location_id }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('organization.location_rooms.toast_edit_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors, values }) => (\n            <OrganizationLocationRoomForm\n            isSubmitting={isSubmitting}\n            errors={errors}\n            values={values}\n            returnUrl={returnUrl}\n            />\n          )}\n        </Formik>\n      </Card>\n    </OrganizationLocationRoomsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationLocationRoomEdit))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nfunction OrganizationLevelsBase({t, history, children, showBack=false}) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"organization.title\")} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ?\n                <Link to=\"/organization/levels\">\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>  \n                :\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"organizationlevel\">\n                  <Link to=\"/organization/levels/add\">\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.levels.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n              }     \n              <OrganizationMenu activeLink='levels'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationLevelsBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_LEVELS_QUERY = gql`\n  query OrganizationLevels($after: String, $before: String, $archived: Boolean) {\n    organizationLevels(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const GET_LEVEL_QUERY = gql`\n  query SchoolLevel($id: ID!) {\n    organizationLevel(id:$id) {\n      id\n      name\n      archived\n    }\n  }\n`\n\nexport const ADD_LEVEL = gql`\nmutation CreateOrganizationLevel($input:CreateOrganizationLevelInput!) {\n  createOrganizationLevel(input: $input) {\n    organizationLevel{\n      id\n      archived\n      name\n    }\n  }\n}\n`\n\nexport const UPDATE_LEVEL = gql`\nmutation UpdateOrganizationLevel($input: UpdateOrganizationLevelInput!) {\n  updateOrganizationLevel(input: $input) {\n    organizationLevel {\n      id\n      name\n    }\n  }\n}\n`\n\nexport const ARCHIVE_LEVEL = gql`\nmutation ArchiveOrganizationLevel($input: ArchiveOrganizationLevelInput!) {\n  archiveOrganizationLevel(input: $input) {\n    organizationLevel {\n      id\n      archived\n    }\n  }\n}\n`","// @flow\n\nimport React, { useState } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\n\nimport {\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Table\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationLevelsBase from './OrganizationLevelsBase'\n\nimport { GET_LEVELS_QUERY, ARCHIVE_LEVEL } from \"./queries\"\n\n\nfunction OrganizationLevels({t, history}) {\n  let [archived, setArchived] = useState(false)\n  const cardTitle = t('organization.levels.title')\n  const { loading, error, data, refetch, fetchMore } = useQuery(GET_LEVELS_QUERY, {\n    variables: { archived: archived }\n  })\n  const [ archiveLevel ] = useMutation(ARCHIVE_LEVEL)\n\n  const headerOptions = <Card.Options>\n    <Button color={(!archived) ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {setArchived(false); refetch({archived: false});}}>\n      {t('general.current')}\n    </Button>\n    <Button color={(archived) ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {setArchived(true); refetch({archived: true});}}>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  if (loading) return (\n    <OrganizationLevelsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationLevelsBase>\n  )\n\n  if (error) return (\n    <OrganizationLevelsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('organization.levels.error_loading')}</p>\n      </ContentCard>\n    </OrganizationLevelsBase>\n  )\n\n  let levels = data.organizationLevels\n\n  // Empty list\n  if (!levels.edges.length) { return (\n    <OrganizationLevelsBase>\n      <ContentCard cardTitle={t('organization.levels.title')}\n                    headerContent={headerOptions}>\n        <p>\n          {(!archived) ? t('organization.levels.empty_list') : t(\"organization.levels.empty_archive\")}\n        </p>\n      </ContentCard>\n    </OrganizationLevelsBase>\n  )}\n\n\n  return (\n    <OrganizationLevelsBase>\n      <ContentCard \n        cardTitle={cardTitle}\n        headerContent={headerOptions}\n        pageInfo={levels.pageInfo}\n        onLoadMore={() => {\n        fetchMore({\n          variables: {\n            after: levels.pageInfo.endCursor\n          },\n          updateQuery: (previousResult, { fetchMoreResult }) => {\n            const newEdges = fetchMoreResult.organizationLevels.edges\n            const pageInfo = fetchMoreResult.organizationLevels.pageInfo\n\n            return newEdges.length\n              ? {\n                  // Put the new levels at the end of the list and update `pageInfo`\n                  // so we have the new `endCursor` and `hasNextPage` values\n                  organizationLevels: {\n                    __typename: previousResult.organizationLevels.__typename,\n                    edges: [ ...previousResult.organizationLevels.edges, ...newEdges ],\n                    pageInfo\n                  }\n                }\n              : previousResult\n          }\n        })\n      }} >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {levels.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    {node.name}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    {(node.archived) ? \n                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                      <Button className='btn-sm' \n                              onClick={() => history.push(\"/organization/levels/edit/\" + node.id)}\n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    }\n                    <button className=\"icon btn btn-link btn-sm\" \n                        title={t('general.archive')} \n                        href=\"\"\n                        onClick={() => {\n                          console.log(\"clicked archived\")\n                          let id = node.id\n                          archiveLevel({ variables: {\n                            input: {\n                            id,\n                            archived: !archived\n                            }\n                    }, refetchQueries: [\n                        {query: GET_LEVELS_QUERY, variables: {\"archived\": archived }}\n                    ]}).then(({ data }) => {\n                      console.log('got data', data);\n                      toast.success(\n                        (archived) ? t('general.unarchived'): t('general.archived'), {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                    }).catch((error) => {\n                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                      console.log('there was an error sending the query', error);\n                    })\n                    }}>\n                      <Icon prefix=\"fe\" name=\"inbox\" />\n                    </button>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </OrganizationLevelsBase>\n  )\n}\n\n\n\nexport default withTranslation()(withRouter(OrganizationLevels))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const LEVEL_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  })\n","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n    Button,\n    Card,\n    Form\n  } from \"tabler-react\"\n  import { Form as FoForm, Field, ErrorMessage } from 'formik'\n\nconst OrganizationLevelForm = ({ t, history, isSubmitting, errors, returnUrl }) => (\n    <FoForm>\n        <Card.Body>\n            <Form.Group label={t('general.name')}>\n            <Field type=\"text\" \n                    name=\"name\" \n                    className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n        </Card.Body>\n        <Card.Footer>\n            <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n            >\n            {t('general.submit')}\n            </Button>\n            <Link to={returnUrl}>\n                <Button color=\"link\">\n                    {t('general.cancel')}\n                </Button>\n            </Link>\n        </Card.Footer>\n    </FoForm>\n)\n  \n  \n  export default withTranslation()(withRouter(OrganizationLevelForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { GET_LEVELS_QUERY, ADD_LEVEL } from './queries'\nimport { LEVEL_SCHEMA } from './yupSchema'\nimport OrganizationLevelForm from './OrganizationLevelForm'\n\n\nimport {\n  Card,\n} from \"tabler-react\"\n\nimport OrganizationLevelsBase from './OrganizationLevelsBase';\n\n\nfunction OrganizationLevelAdd({t, history}) {\n  const returnUrl = \"/organization/levels\"\n  const [ addLevel ] = useMutation(ADD_LEVEL)\n  \n  return (\n   <OrganizationLevelsBase showBack={true}>\n    <Card>\n      <Card.Header>\n        <Card.Title>{t('organization.levels.title_add')}</Card.Title>\n      </Card.Header>\n      <Formik\n          initialValues={{ name: '', code: '' }}\n          validationSchema={LEVEL_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              addLevel({ variables: {\n                input: {\n                  name: values.name, \n                }\n              }, refetchQueries: [\n                  {query: GET_LEVELS_QUERY, variables: {\"archived\": false }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data);\n                  history.push(returnUrl)\n                  toast.success((t('organization.levels.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors }) => (\n            <OrganizationLevelForm \n              isSubmitting={isSubmitting}\n              errors={errors}\n              returnUrl={returnUrl}\n            />\n          )}\n      </Formik>\n    </Card>\n   </OrganizationLevelsBase> \n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationLevelAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_LEVELS_QUERY, GET_LEVEL_QUERY, UPDATE_LEVEL } from './queries'\nimport { LEVEL_SCHEMA } from './yupSchema'\nimport OrganizationLevelForm from './OrganizationLevelForm'\n\n\nimport {\n  Dimmer,\n  Card,\n} from \"tabler-react\";\nimport OrganizationLevelsBase from './OrganizationLevelsBase';\nimport ContentCard from \"../../general/ContentCard\"\n\n\nfunction OrganizationLevelEdit({t, match, history}) {\n  const id = match.params.id\n  const cardTitle = t('organization.levels.title_edit')\n  const returnUrl = \"/organization/levels\"\n  const { loading, error, data } = useQuery(GET_LEVEL_QUERY, {\n    variables: { id: id }\n  })\n  const [ updateLevel ] = useMutation(UPDATE_LEVEL)\n\n  if (loading) return (\n    <OrganizationLevelsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationLevelsBase>\n  )\n\n  if (error) return (\n    <OrganizationLevelsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </OrganizationLevelsBase>\n  )\n                    \n  const initialData = data.organizationLevel;\n  console.log('query data')\n  console.log(data)\n\n  return (\n    <OrganizationLevelsBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n            initialValues={{ \n              name: initialData.name, \n            }}\n            validationSchema={LEVEL_SCHEMA}\n            onSubmit={(values, { setSubmitting }) => {\n                console.log('submit values:')\n                console.log(values)\n\n                updateLevel({ variables: {\n                  input: {\n                    id: match.params.id,\n                    name: values.name,\n                  }\n                }, refetchQueries: [\n                    {query: GET_LEVELS_QUERY, variables: {\"archived\": false }}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    history.push(returnUrl)\n                    toast.success((t('organization.levels.toast_edit_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, errors }) => (\n              <OrganizationLevelForm \n                isSubmitting={isSubmitting}\n                errors={errors}\n                returnUrl={returnUrl}\n              />\n            )}\n        </Formik>\n      </Card>\n    </OrganizationLevelsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationLevelEdit))","// @flow\n\nimport { Component } from 'react'\nimport { withTranslation } from 'react-i18next'\n\n\nclass Validity extends Component {\n    render() {\n      const t = this.props.t\n      const validity = this.props.validity\n\n      switch(validity) {\n        case \"DAYS\":\n            return t('validity.days')\n            break\n        case \"WEEKS\":\n            return t('validity.weeks')\n            break\n        case \"MONTHS\":\n            return t('validity.months')\n            break\n        case \"YEARS\":\n            return t('validity.years')\n            break\n        default:\n            return \"\"\n            break\n        }\n    }\n}\n  \nexport default withTranslation()(Validity)\n","import { gql } from \"@apollo/client\"\n\nexport const GET_MEMBERSHIPS_QUERY = gql`\n  query OrganizationMemberships($after: String, $before: String, $archived: Boolean) {\n    organizationMemberships(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          displayPublic\n          displayShop\n          name\n          description\n          price\n          priceDisplay\n          financeTaxRate {\n            id\n            name\n          }\n          validity\n          validityUnit\n          validityUnitDisplay\n          termsAndConditions\n          financeGlaccount {\n            id \n            name\n          }\n          financeCostcenter {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`\n\nexport const GET_MEMBERSHIP_QUERY = gql`\n  query OrganizationMembership($id: ID!, $after: String, $before: String, $archived: Boolean!) {\n    organizationMembership(id:$id) {\n      id\n      archived\n      displayPublic\n      displayShop\n      name\n      description\n      price\n      financeTaxRate {\n        id\n        name\n      }\n      validity\n      validityUnit\n      termsAndConditions\n      financeGlaccount {\n        id \n        name\n      }\n      financeCostcenter {\n        id\n        name\n      }\n    }\n    financeTaxRates(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          percentage\n          rateType\n        }\n      }\n    }\n    financeGlaccounts(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    financeCostcenters(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n  }\n`\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query FinanceInputValues($after: String, $before: String, $archived: Boolean) {\n    financeTaxRates(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          percentage\n          rateType\n        }\n      }\n    }\n    financeGlaccounts(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    financeCostcenters(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport BadgeBoolean from \"../../ui/BadgeBoolean\"\nimport Validity from \"../../ui/Validity\"\n\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationMenu from \"../OrganizationMenu\"\n\nimport { GET_MEMBERSHIPS_QUERY } from \"./queries\"\n\nconst ARCHIVE_MEMBERSHIP = gql`\n  mutation ArchiveOrganizationMembership($input: ArchiveOrganizationMembershipInput!) {\n    archiveOrganizationMembership(input: $input) {\n      organizationMembership {\n        id\n        archived\n      }\n    }\n  }\n`\n\n\nconst OrganizationMemberships = ({ t, history, archived=false }) => (\n  <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Container>\n        <Page.Header title={t(\"organization.title\")} />\n        <Grid.Row>\n          <Grid.Col md={9}>\n            <Query query={GET_MEMBERSHIPS_QUERY} variables={{ archived }}>\n             {({ loading, error, data: {organizationMemberships: memberships}, refetch, fetchMore }) => {\n                // Loading\n                if (loading) return (\n                  <ContentCard cardTitle={t('organization.memberships.title')}>\n                    <Dimmer active={true}\n                            loader={true}>\n                    </Dimmer>\n                  </ContentCard>\n                )\n                // Error\n                if (error) return (\n                  <ContentCard cardTitle={t('organization.memberships.title')}>\n                    <p>{t('organization.memberships.error_loading')}</p>\n                  </ContentCard>\n                )\n                const headerOptions = <Card.Options>\n                  <Button color={(!archived) ? 'primary': 'secondary'}  \n                          size=\"sm\"\n                          onClick={() => {archived=false; refetch({archived});}}>\n                    {t('general.current')}\n                  </Button>\n                  <Button color={(archived) ? 'primary': 'secondary'} \n                          size=\"sm\" \n                          className=\"ml-2\" \n                          onClick={() => {archived=true; refetch({archived});}}>\n                    {t('general.archive')}\n                  </Button>\n                </Card.Options>\n                \n                // Empty list\n                if (!memberships.edges.length) { return (\n                  <ContentCard cardTitle={t('organization.memberships.title')}\n                               headerContent={headerOptions}>\n                    <p>\n                    {(!archived) ? t('organization.memberships.empty_list') : t(\"organization.memberships.empty_archive\")}\n                    </p>\n                   \n                  </ContentCard>\n                )} else {   \n                // Life's good! :)\n                return (\n                  <ContentCard cardTitle={t('organization.memberships.title')}\n                               headerContent={headerOptions}\n                               pageInfo={memberships.pageInfo}\n                               onLoadMore={() => {\n                                fetchMore({\n                                  variables: {\n                                    after: memberships.pageInfo.endCursor\n                                  },\n                                  updateQuery: (previousResult, { fetchMoreResult }) => {\n                                    const newEdges = fetchMoreResult.organizationMemberships.edges\n                                    const pageInfo = fetchMoreResult.organizationMemberships.pageInfo\n\n                                    return newEdges.length\n                                      ? {\n                                          // Put the new memberships at the end of the list and update `pageInfo`\n                                          // so we have the new `endCursor` and `hasNextPage` values\n                                          organizationMemberships: {\n                                            __typename: previousResult.organizationMemberships.__typename,\n                                            edges: [ ...previousResult.organizationMemberships.edges, ...newEdges ],\n                                            pageInfo\n                                          }\n                                        }\n                                      : previousResult\n                                  }\n                                })\n                              }} >\n                    <Table>\n                          <Table.Header>\n                            <Table.Row key={v4()}>\n                              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                              <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n                              <Table.ColHeader>{t('general.shop')}</Table.ColHeader>\n                              <Table.ColHeader>{t('general.price')}</Table.ColHeader>\n                              <Table.ColHeader>{t('general.validity')}</Table.ColHeader>\n                            </Table.Row>\n                          </Table.Header>\n                          <Table.Body>\n                              {memberships.edges.map(({ node }) => (\n                                <Table.Row key={v4()}>\n                                  <Table.Col key={v4()}>\n                                    {node.name}\n                                  </Table.Col>\n                                  <Table.Col key={v4()}>\n                                    <BadgeBoolean value={node.displayPublic} />\n                                  </Table.Col>\n                                  <Table.Col key={v4()}>\n                                    <BadgeBoolean value={node.displayShop} />\n                                  </Table.Col>\n                                  <Table.Col key={v4()}>\n                                    {node.priceDisplay} <br />\n                                    {(node.financeTaxRate) ? \n                                      <span className=\"text-muted\">{node.financeTaxRate.name}</span>\n                                      : \"\"\n                                    }\n                                  </Table.Col>\n                                  <Table.Col key={v4()}>\n                                    {node.validity} <br />\n                                    <span className=\"text-muted\">\n                                      {node.validityUnitDisplay}\n                                    </span>\n                                  </Table.Col>\n                                  <Table.Col className=\"text-right\" key={v4()}>\n                                    {(node.archived) ? \n                                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                                      <Button className='btn-sm' \n                                              onClick={() => history.push(\"/organization/memberships/edit/\" + node.id)}\n                                              color=\"secondary\">\n                                        {t('general.edit')}\n                                      </Button>\n                                    }\n                                  </Table.Col>\n                                  <Mutation mutation={ARCHIVE_MEMBERSHIP} key={v4()}>\n                                    {(archiveMembership, { data }) => (\n                                      <Table.Col className=\"text-right\" key={v4()}>\n                                        <button className=\"icon btn btn-link btn-sm\" \n                                           title={t('general.archive')} \n                                           href=\"\"\n                                           onClick={() => {\n                                             console.log(\"clicked archived\")\n                                             let id = node.id\n                                             archiveMembership({ variables: {\n                                               input: {\n                                                id,\n                                                archived: !archived\n                                               }\n                                        }, refetchQueries: [\n                                            {query: GET_MEMBERSHIPS_QUERY, variables: {\"archived\": archived }}\n                                        ]}).then(({ data }) => {\n                                          console.log('got data', data);\n                                          toast.success(\n                                            (archived) ? t('general.unarchived'): t('general.archived'), {\n                                              position: toast.POSITION.BOTTOM_RIGHT\n                                            })\n                                        }).catch((error) => {\n                                          toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                              position: toast.POSITION.BOTTOM_RIGHT\n                                            })\n                                          console.log('there was an error sending the query', error);\n                                        })\n                                        }}>\n                                          <Icon prefix=\"fa\" name=\"inbox\" />\n                                        </button>\n                                      </Table.Col>\n                                    )}\n                                  </Mutation>\n                                </Table.Row>\n                              ))}\n                          </Table.Body>\n                        </Table>\n                  </ContentCard>\n                )}}\n             }\n            </Query>\n          </Grid.Col>\n          <Grid.Col md={3}>\n            <HasPermissionWrapper permission=\"add\"\n                                  resource=\"organizationmembership\">\n              <Button color=\"primary btn-block mb-6\"\n                      onClick={() => history.push(\"/organization/memberships/add\")}>\n                <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.memberships.add')}\n              </Button>\n            </HasPermissionWrapper>\n            <OrganizationMenu activeLink='memberships'/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n    </div>\n  </SiteWrapper>\n);\n\nexport default withTranslation()(withRouter(OrganizationMemberships))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const MEMBERSHIP_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n    price: Yup.number()\n      .required(t('yup.field_required')),\n    financeTaxRate: Yup.string()\n      .required(t('yup.field_required')),\n    validity: Yup.number()\n      .positive(t('yup.positive_number_required'))\n      .required(t('yup.field_required')),\n    validityUnit: Yup.string()\n      .required(t('yup.field_required')),\n  })\n","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { Query, Mutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { v4 } from \"uuid\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../plugin_config/tinymce\"\n\nimport { GET_MEMBERSHIPS_QUERY, GET_INPUT_VALUES_QUERY } from './queries'\nimport { MEMBERSHIP_SCHEMA } from './yupSchema'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nconst CREATE_MEMBERSHIP = gql`\n  mutation CreateMembership($input: CreateOrganizationMembershipInput!) {\n    createOrganizationMembership(input: $input) {\n      organizationMembership {\n        id\n        displayPublic\n        displayShop\n        name\n        description\n        price\n        financeTaxRate {\n          id\n          name\n        }\n        validity\n        validityUnit\n        termsAndConditions\n        financeGlaccount {\n          id\n          name\n        }\n        financeCostcenter {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\n\nclass OrganizationMembershipAdd extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Organization membership add props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const match = this.props.match\n    const history = this.props.history\n    const id = match.params.id\n    const return_url = \"/organization/memberships\"\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title=\"Organization\" />\n            <Grid.Row>\n              <Grid.Col md={9}>\n              <Card>\n                <Card.Header>\n                  <Card.Title>{t('organization.memberships.title_add')}</Card.Title>\n                  {console.log(match.params.id)}\n                </Card.Header>\n                <Query query={GET_INPUT_VALUES_QUERY} variables={{ id }} >\n                {({ loading, error, data, refetch }) => {\n                    // Loading\n                    if (loading) return <p>{t('general.loading_with_dots')}</p>\n                    // Error\n                    if (error) {\n                      console.log(error)\n                      return <p>{t('general.error_sad_smiley')}</p>\n                    }\n                    \n                    console.log('query data')\n                    console.log(data)\n                    const inputData = data\n\n                    return (\n                      \n                      <Mutation mutation={CREATE_MEMBERSHIP} onCompleted={() => history.push(return_url)}> \n                      {(createMembership, { data }) => (\n                          <Formik\n                              initialValues={{ \n                                displayPublic: true,\n                                displayShop: true,\n                                name: \"\",\n                                description: \"\",\n                                price: 0,\n                                financeTaxRate: \"\",\n                                validity: 1,\n                                validityUnit: \"MONTHS\",\n                                termsAndConditions: \"\",\n                                financeGlaccount: \"\",\n                                financeCostcenter: \"\"\n                              }}\n                              validationSchema={MEMBERSHIP_SCHEMA}\n                              onSubmit={(values, { setSubmitting }) => {\n                                  console.log('submit values:')\n                                  console.log(values)\n\n                                  createMembership({ variables: {\n                                    input: {\n                                      displayPublic: values.displayPublic,\n                                      displayShop: values.displayShop,\n                                      name: values.name,\n                                      description: values.description,\n                                      price: values.price,\n                                      financeTaxRate: values.financeTaxRate,\n                                      validity: values.validity,\n                                      validityUnit: values.validityUnit,\n                                      termsAndConditions: values.termsAndConditions,\n                                      financeGlaccount: values.financeGlaccount,\n                                      financeCostcenter: values.financeCostcenter\n                                    }\n                                  }, refetchQueries: [\n                                      {query: GET_MEMBERSHIPS_QUERY, variables: {\"archived\": false }}\n                                  ]})\n                                  .then(({ data }) => {\n                                      console.log('got data', data)\n                                      toast.success((t('organization.memberships.toast_add_success')), {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                    }).catch((error) => {\n                                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                      console.log('there was an error sending the query', error)\n                                      setSubmitting(false)\n                                    })\n                              }}\n                              >\n                              {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n                                  <FoForm>\n                                      <Card.Body> \n                                        <Form.Group>\n                                          <Form.Label className=\"custom-switch\">\n                                              <Field \n                                                className=\"custom-switch-input\"\n                                                type=\"checkbox\" \n                                                name=\"displayPublic\" \n                                                checked={values.displayPublic} />\n                                              <span className=\"custom-switch-indicator\" ></span>\n                                              <span className=\"custom-switch-description\">{t('organization.membership.public')}</span>\n                                            </Form.Label>\n                                          <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n                                        </Form.Group>      \n                                        <Form.Group>\n                                          <Form.Label className=\"custom-switch\">\n                                              <Field \n                                                className=\"custom-switch-input\"\n                                                type=\"checkbox\" \n                                                name=\"displayShop\" \n                                                checked={values.displayShop} />\n                                              <span className=\"custom-switch-indicator\" ></span>\n                                              <span className=\"custom-switch-description\">{t('organization.membership.shop')}</span>\n                                            </Form.Label>\n                                          <ErrorMessage name=\"displayShop\" component=\"div\" />   \n                                        </Form.Group>      \n                                        <Form.Group label={t('general.name')} >\n                                          <Field type=\"text\" \n                                                name=\"name\" \n                                                className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                                                autoComplete=\"off\" />\n                                          <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.description')}>\n                                          <Editor\n                                              textareaName=\"description\"\n                                              initialValue={values.description}\n                                              init={tinymceBasicConf}\n                                              onChange={(e) => setFieldValue(\"description\", e.target.getContent())}\n                                              onBlur={() => setFieldTouched(\"description\", true)}\n                                            />\n                                          <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.price')}>\n                                          <Field type=\"text\" \n                                                name=\"price\" \n                                                className={(errors.price) ? \"form-control is-invalid\" : \"form-control\"} \n                                                autoComplete=\"off\" />\n                                          <ErrorMessage name=\"price\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.taxrate')}>\n                                          <Field component=\"select\" \n                                                 name=\"financeTaxRate\" \n                                                 className={(errors.financeTaxRate) ? \"form-control is-invalid\" : \"form-control\"} \n                                                 autoComplete=\"off\">\n                                            {console.log(\"query data in membership add:\")}\n                                            {console.log(inputData)}\n                                            <option value=\"\" key={v4()}></option>\n                                            {inputData.financeTaxRates.edges.map(({ node }) =>\n                                              <option value={node.id} key={v4()}>{node.name} ({node.percentage}% {node.rateType})</option>\n                                            )}\n                                          </Field>\n                                          <ErrorMessage name=\"financeTaxRate\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.validity')}>\n                                          <Field type=\"text\" \n                                                name=\"validity\" \n                                                className={(errors.validity) ? \"form-control is-invalid\" : \"form-control\"} \n                                                autoComplete=\"off\" />\n                                          <ErrorMessage name=\"validity\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.validity_unit')}>\n                                          <Field component=\"select\" \n                                                 name=\"validityUnit\" \n                                                 className={(errors.validityUnit) ? \"form-control is-invalid\" : \"form-control\"} \n                                                 autoComplete=\"off\">\n                                            <option value=\"DAYS\" key={v4()}>{t('validity.days')}</option>\n                                            <option value=\"WEEKS\" key={v4()}>{t('validity.weeks')}</option>\n                                            <option value=\"MONTHS\" key={v4()}>{t('validity.months')}</option>\n                                          </Field>\n                                          <ErrorMessage name=\"validityUnit\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.terms_and_conditions')}>\n                                          <Editor\n                                              textareaName=\"termsAndConditions\"\n                                              initialValue={values.termsAndConditions}\n                                              init={tinymceBasicConf}\n                                              onChange={(e) => setFieldValue(\"termsAndConditions\", e.target.getContent())}\n                                              onBlur={() => setFieldTouched(\"termsAndConditions\", true)}\n                                            />\n                                          <ErrorMessage name=\"termsAndConditions\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.glaccount')}>\n                                          <Field component=\"select\" \n                                                 name=\"financeGlaccount\" \n                                                 className={(errors.financeGlaccount) ? \"form-control is-invalid\" : \"form-control\"} \n                                                 autoComplete=\"off\">\n                                            <option value=\"\" key={v4()}></option>\n                                            {inputData.financeGlaccounts.edges.map(({ node }) =>\n                                              <option value={node.id} key={v4()}>{node.name} ({node.code})</option>\n                                            )}\n                                          </Field>\n                                          <ErrorMessage name=\"financeGlaccount\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.costcenter')}>\n                                          <Field component=\"select\" \n                                                 name=\"financeCostcenter\" \n                                                 className={(errors.financeCostcenter) ? \"form-control is-invalid\" : \"form-control\"} \n                                                 autoComplete=\"off\">\n                                            <option value=\"\" key={v4()}></option>\n                                            {inputData.financeCostcenters.edges.map(({ node }) =>\n                                              <option value={node.id} key={v4()}>{node.name} ({node.code})</option>\n                                            )}\n                                          </Field>\n                                          <ErrorMessage name=\"financeCostcenter\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                      </Card.Body>\n                                      <Card.Footer>\n                                          <Button \n                                            className=\"pull-right\"\n                                            color=\"primary\"\n                                            disabled={isSubmitting}\n                                            type=\"submit\"\n                                          >\n                                            {t('general.submit')}\n                                          </Button>\n                                          <Button\n                                            type=\"button\" \n                                            color=\"link\" \n                                            onClick={() => history.push(return_url)}\n                                          >\n                                              {t('general.cancel')}\n                                          </Button>\n                                      </Card.Footer>\n                                  </FoForm>\n                              )}\n                          </Formik>\n                      )}\n                      </Mutation>\n                      )}}\n                </Query>\n              </Card>\n              </Grid.Col>\n              <Grid.Col md={3}>\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"organizationmembership\">\n                  <Button color=\"primary btn-block mb-6\"\n                          onClick={() => history.push(return_url)}>\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </HasPermissionWrapper>\n                <OrganizationMenu activeLink='memberships'/>\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n    </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(OrganizationMembershipAdd))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { Query, Mutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\nimport { v4 } from \"uuid\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../plugin_config/tinymce\"\n\nimport { GET_MEMBERSHIPS_QUERY, GET_MEMBERSHIP_QUERY } from './queries'\nimport { MEMBERSHIP_SCHEMA } from './yupSchema'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nconst UPDATE_MEMBERSHIP = gql`\n  mutation UpdateOrganizationMembership($input: UpdateOrganizationMembershipInput!) {\n    updateOrganizationMembership(input: $input) {\n        organizationMembership {\n          id\n          displayPublic\n          displayShop\n          name\n          description\n          price\n          financeTaxRate {\n            id\n            name\n          }\n          validity\n          validityUnit\n          termsAndConditions\n          financeGlaccount {\n            id\n            name\n          }\n          financeCostcenter {\n            id\n            name\n          }\n        }\n    }\n  }\n`\n\n\nclass OrganizationMembershipEdit extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Organization membership edit props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const match = this.props.match\n    const history = this.props.history\n    const id = match.params.id\n    const return_url = \"/organization/memberships\"\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title=\"Organization\" />\n            <Grid.Row>\n              <Grid.Col md={9}>\n              <Card>\n                <Card.Header>\n                  <Card.Title>{t('organization.memberships.title_edit')}</Card.Title>\n                  {console.log(match.params.id)}\n                </Card.Header>\n                <Query query={GET_MEMBERSHIP_QUERY} variables={{ \"id\": id, \"archived\": false}} >\n                {({ loading, error, data, refetch }) => {\n                    // Loading\n                    if (loading) return <p>{t('general.loading_with_dots')}</p>\n                    // Error\n                    if (error) {\n                      console.log(error)\n                      return <p>{t('general.error_sad_smiley')}</p>\n                    }\n                    \n                    console.log('query data')\n                    console.log(data)\n                    const initialData = data\n\n                    let initialGlaccount = \"\"\n                    if (initialData.organizationMembership.financeGlaccount) {\n                      initialGlaccount =  initialData.organizationMembership.financeGlaccount.id\n                    } \n\n                    let initialCostcenter = \"\"\n                    if (initialData.organizationMembership.financeCostcenter) {\n                      initialCostcenter =  initialData.organizationMembership.financeCostcenter.id\n                    } \n\n                    return (\n                      <Mutation mutation={UPDATE_MEMBERSHIP} onCompleted={() => history.push(return_url)}> \n                      {(createMembership, { data }) => (\n                          <Formik\n                              initialValues={{ \n                                displayPublic: initialData.organizationMembership.displayPublic,\n                                displayShop: initialData.organizationMembership.displayShop,\n                                name: initialData.organizationMembership.name,\n                                description: initialData.organizationMembership.description,\n                                price: initialData.organizationMembership.price,\n                                financeTaxRate: initialData.organizationMembership.financeTaxRate.id,\n                                validity: initialData.organizationMembership.validity,\n                                validityUnit: initialData.organizationMembership.validityUnit,\n                                termsAndConditions: initialData.organizationMembership.termsAndConditions,\n                                financeGlaccount:  initialGlaccount,\n                                financeCostcenter: initialCostcenter\n                              }}\n                              validationSchema={MEMBERSHIP_SCHEMA}\n                              onSubmit={(values, { setSubmitting }) => {\n                                  console.log('submit values:')\n                                  console.log(values)\n\n                                  createMembership({ variables: {\n                                    input: {\n                                      id: match.params.id,\n                                      displayPublic: values.displayPublic,\n                                      displayShop: values.displayShop,\n                                      name: values.name,\n                                      description: values.description,\n                                      price: values.price,\n                                      financeTaxRate: values.financeTaxRate,\n                                      validity: values.validity,\n                                      validityUnit: values.validityUnit,\n                                      termsAndConditions: values.termsAndConditions,\n                                      financeGlaccount: values.financeGlaccount,\n                                      financeCostcenter: values.financeCostcenter\n                                    }\n                                  }, refetchQueries: [\n                                      {query: GET_MEMBERSHIPS_QUERY, variables: {\"archived\": false }}\n                                  ]})\n                                  .then(({ data }) => {\n                                      console.log('got data', data)\n                                      toast.success((t('organization.memberships.toast_edit_success')), {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                    }).catch((error) => {\n                                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                      console.log('there was an error sending the query', error)\n                                      setSubmitting(false)\n                                    })\n                              }}\n                              >\n                              {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n                                  <FoForm>\n                                      <Card.Body> \n                                        <Form.Group>\n                                          <Form.Label className=\"custom-switch\">\n                                              <Field \n                                                className=\"custom-switch-input\"\n                                                type=\"checkbox\" \n                                                name=\"displayPublic\" \n                                                checked={values.displayPublic} />\n                                              <span className=\"custom-switch-indicator\" ></span>\n                                              <span className=\"custom-switch-description\">{t('organization.membership.public')}</span>\n                                            </Form.Label>\n                                          <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n                                        </Form.Group>      \n                                        <Form.Group>\n                                          <Form.Label className=\"custom-switch\">\n                                              <Field \n                                                className=\"custom-switch-input\"\n                                                type=\"checkbox\" \n                                                name=\"displayShop\" \n                                                checked={values.displayShop} />\n                                              <span className=\"custom-switch-indicator\" ></span>\n                                              <span className=\"custom-switch-description\">{t('organization.membership.shop')}</span>\n                                            </Form.Label>\n                                          <ErrorMessage name=\"displayShop\" component=\"div\" />   \n                                        </Form.Group>      \n                                        <Form.Group label={t('general.name')} >\n                                          <Field type=\"text\" \n                                                name=\"name\" \n                                                className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                                                autoComplete=\"off\" />\n                                          <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.description')}>\n                                          <Editor\n                                              textareaName=\"description\"\n                                              initialValue={values.description}\n                                              init={tinymceBasicConf}\n                                              onChange={(e) => setFieldValue(\"description\", e.target.getContent())}\n                                              onBlur={() => setFieldTouched(\"description\", true)}\n                                            />\n                                          <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.price')}>\n                                          <Field type=\"text\" \n                                                name=\"price\" \n                                                className={(errors.price) ? \"form-control is-invalid\" : \"form-control\"} \n                                                autoComplete=\"off\" />\n                                          <ErrorMessage name=\"price\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.taxrate')}>\n                                          <Field component=\"select\" \n                                                 name=\"financeTaxRate\" \n                                                 className={(errors.financeTaxRate) ? \"form-control is-invalid\" : \"form-control\"} \n                                                 autoComplete=\"off\">\n                                            {initialData.financeTaxRates.edges.map(({ node }) =>\n                                              <option value={node.id} key={v4()}>{node.name} ({node.percentage}% {node.rateType})</option>\n                                            )}\n                                          </Field>\n                                          <ErrorMessage name=\"financeTaxRate\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.validity')}>\n                                          <Field type=\"text\" \n                                                name=\"validity\" \n                                                className={(errors.validity) ? \"form-control is-invalid\" : \"form-control\"} \n                                                autoComplete=\"off\" />\n                                          <ErrorMessage name=\"validity\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.validity_unit')}>\n                                          <Field component=\"select\" \n                                                 name=\"validityUnit\" \n                                                 className={(errors.validityUnit) ? \"form-control is-invalid\" : \"form-control\"} \n                                                 autoComplete=\"off\">\n                                            <option value=\"DAYS\" key={v4()}>{t('validity.days')}</option>\n                                            <option value=\"WEEKS\" key={v4()}>{t('validity.weeks')}</option>\n                                            <option value=\"MONTHS\" key={v4()}>{t('validity.months')}</option>\n                                          </Field>\n                                          <ErrorMessage name=\"validityUnit\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.terms_and_conditions')}>\n                                          <Editor\n                                              textareaName=\"termsAndConditions\"\n                                              initialValue={values.termsAndConditions}\n                                              init={tinymceBasicConf}\n                                              onChange={(e) => setFieldValue(\"termsAndConditions\", e.target.getContent())}\n                                              onBlur={() => setFieldTouched(\"termsAndConditions\", true)}\n                                            />\n                                          <ErrorMessage name=\"termsAndConditions\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.glaccount')}>\n                                          <Field component=\"select\" \n                                                 name=\"financeGlaccount\" \n                                                 className={(errors.financeGlaccount) ? \"form-control is-invalid\" : \"form-control\"} \n                                                 autoComplete=\"off\">\n                                            <option value=\"\" key={v4()}></option>\n                                            {initialData.financeGlaccounts.edges.map(({ node }) =>\n                                              <option value={node.id} key={v4()}>{node.name} ({node.code})</option>\n                                            )}\n                                          </Field>\n                                          <ErrorMessage name=\"financeGlaccount\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                        <Form.Group label={t('general.costcenter')}>\n                                          <Field component=\"select\" \n                                                 name=\"financeCostcenter\" \n                                                 className={(errors.financeCostcenter) ? \"form-control is-invalid\" : \"form-control\"} \n                                                 autoComplete=\"off\">\n                                            <option value=\"\" key={v4()}></option>\n                                            {initialData.financeCostcenters.edges.map(({ node }) =>\n                                              <option value={node.id} key={v4()}>{node.name} ({node.code})</option>\n                                            )}\n                                          </Field>\n                                          <ErrorMessage name=\"financeCostcenter\" component=\"span\" className=\"invalid-feedback\" />\n                                        </Form.Group>\n                                      </Card.Body>\n                                      <Card.Footer>\n                                          <Button \n                                            className=\"pull-right\"\n                                            color=\"primary\"\n                                            disabled={isSubmitting}\n                                            type=\"submit\"\n                                          >\n                                            {t('general.submit')}\n                                          </Button>\n                                          <Button\n                                            type=\"button\" \n                                            color=\"link\" \n                                            onClick={() => history.push(return_url)}\n                                          >\n                                              {t('general.cancel')}\n                                          </Button>\n                                      </Card.Footer>\n                                  </FoForm>\n                              )}\n                          </Formik>\n                      )}\n                      </Mutation>\n                      )}}\n                </Query>\n              </Card>\n              </Grid.Col>\n              <Grid.Col md={3}>\n                <HasPermissionWrapper permission=\"change\"\n                                      resource=\"organizationmembership\">\n                  <Button color=\"primary btn-block mb-6\"\n                          onClick={() => history.push(return_url)}>\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </HasPermissionWrapper>\n                <OrganizationMenu activeLink='memberships'/>\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n    </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(OrganizationMembershipEdit))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nfunction OrganizationSubscriptionsBase({t, children, showBack=false}) {\n  const activeLink = \"subscriptions\"\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"organization.title\")}>\n            <div className=\"page-options d-flex\">\n              <Link to=\"/organization/subscriptions/groups\" \n                    className='btn btn-outline-secondary btn-sm'>\n                  <Icon prefix=\"fe\" name=\"folder\" /> {t('general.groups')}\n              </Link>\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ? \n                <Link to=\"/organization/subscriptions/\">\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n              :\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"organizationsubscription\">\n                  <Link to=\"/organization/subscriptions/add\">\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.subscriptions.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n              }\n              <OrganizationMenu activeLink={activeLink}/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  ) \n}\n\n\nexport default withTranslation()(withRouter(OrganizationSubscriptionsBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_SUBSCRIPTIONS_QUERY = gql`\n  query OrganizationSubscriptions($after: String, $before: String, $archived: Boolean) {\n    organizationSubscriptions(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          priceTodayDisplay\n          displayPublic\n          displayShop\n          name\n          description\n          sortOrder\n          minDuration\n          classes\n          subscriptionUnit\n          subscriptionUnitDisplay\n          reconciliationClasses\n          creditValidity\n          unlimited\n          termsAndConditions\n          registrationFee\n          organizationMembership {\n            id\n            name\n          }\n          quickStatsAmount\n          financeGlaccount {\n            id \n            name\n          }\n          financeCostcenter {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`\n\nexport const GET_SUBSCRIPTION_QUERY = gql`\n  query OrganizationSubscription($id: ID!, $after: String, $before: String) {\n    organizationSubscription(id:$id) {\n      id\n      archived\n      displayPublic\n      displayShop\n      name\n      description\n      sortOrder\n      minDuration\n      classes\n      subscriptionUnit\n      subscriptionUnitDisplay\n      reconciliationClasses\n      creditValidity\n      unlimited\n      termsAndConditions\n      registrationFee\n      organizationMembership {\n        id\n        name\n      }\n      quickStatsAmount\n      financeGlaccount {\n        id \n        name\n      }\n      financeCostcenter {\n        id\n        name\n      }\n    }\n    organizationMemberships(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    financeGlaccounts(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    financeCostcenters(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n  }\n`\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query SubscriptionInputValues($after: String, $before: String) {\n    organizationMemberships(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    financeGlaccounts(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    financeCostcenters(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n  }\n`\n\n\nexport const CREATE_SUBSCRIPTION = gql`\n  mutation CreateSubscription($input: CreateOrganizationSubscriptionInput!) {\n    createOrganizationSubscription(input: $input) {\n      organizationSubscription {\n        id\n        displayPublic\n        displayShop\n        name\n        description\n        sortOrder\n        minDuration\n        classes\n        subscriptionUnit\n        subscriptionUnitDisplay\n        reconciliationClasses\n        creditValidity\n        unlimited\n        termsAndConditions\n        organizationMembership {\n          id\n          name\n        }\n        quickStatsAmount\n        financeGlaccount {\n          id\n          name\n        }\n        financeCostcenter {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\n\nexport const UPDATE_SUBSCRIPTION = gql`\n  mutation UpdateOrganizationSubscription($input: UpdateOrganizationSubscriptionInput!) {\n    updateOrganizationSubscription(input: $input) {\n      organizationSubscription {\n        id\n        displayPublic\n        displayShop\n        name\n        description\n        sortOrder\n        minDuration\n        classes\n        subscriptionUnit\n        subscriptionUnitDisplay\n        reconciliationClasses\n        creditValidity\n        unlimited\n        termsAndConditions\n        organizationMembership {\n          id\n          name\n        }\n        quickStatsAmount\n        financeGlaccount {\n          id\n          name\n        }\n        financeCostcenter {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\n\nexport const ARCHIVE_SUBSCRIPTION = gql`\nmutation ArchiveOrganizationSubscription($input: ArchiveOrganizationSubscriptionInput!) {\n  archiveOrganizationSubscription(input: $input) {\n    organizationSubscription {\n      id\n      archived\n    }\n  }\n}\n`","// @flow\n\nimport React, { useState } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Table\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport BadgeBoolean from \"../../ui/BadgeBoolean\"\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationSubscriptionsBase from './OrganizationSubscriptionsBase'\n\nimport { GET_SUBSCRIPTIONS_QUERY, ARCHIVE_SUBSCRIPTION } from \"./queries\"\n\n\nfunction OrganizationSubscriptions({t, history}) {\n  const cardTitle = t('organization.subscriptions.title')\n  let [archived, setArchived] = useState(false)\n  const {loading, error, data, refetch, fetchMore} = useQuery(GET_SUBSCRIPTIONS_QUERY, {\n    variables: {archived: archived}\n  })\n  const [archiveSubscription] = useMutation(ARCHIVE_SUBSCRIPTION)\n  const headerOptions = <Card.Options>\n    <Button color={(!archived) ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {setArchived(false); refetch({archived: archived});}}>\n      {t('general.current')}\n    </Button>\n    <Button color={(archived) ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {setArchived(true); refetch({archived: archived});}}>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  if (loading) return (\n    <OrganizationSubscriptionsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationSubscriptionsBase>\n  )\n\n  if (error) return (\n    <OrganizationSubscriptionsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('organization.subscriptions.error_loading')}</p>\n      </ContentCard>\n    </OrganizationSubscriptionsBase>\n  )\n\n  let subscriptions = data.organizationSubscriptions\n\n  // Empty list\n  if (!subscriptions.edges.length) { return (\n    <OrganizationSubscriptionsBase>\n      <ContentCard cardTitle={cardTitle}\n                    headerContent={headerOptions}>\n        <p>\n          {(!archived) ? t('organization.subscriptions.empty_list') : t(\"organization.subscriptions.empty_archive\")}\n        </p>\n      </ContentCard>\n    </OrganizationSubscriptionsBase>\n  )}\n\n  return (\n    <OrganizationSubscriptionsBase>\n      <ContentCard cardTitle={t('organization.subscriptions.title')}\n                  headerContent={headerOptions}\n                  pageInfo={subscriptions.pageInfo}\n                  onLoadMore={() => {\n                    fetchMore({\n                      variables: {\n                        after: subscriptions.pageInfo.endCursor\n                      },\n                      updateQuery: (previousResult, { fetchMoreResult }) => {\n                        const newEdges = fetchMoreResult.organizationSubscriptions.edges\n                        const pageInfo = fetchMoreResult.organizationSubscriptions.pageInfo\n\n                        return newEdges.length\n                          ? {\n                              // Put the new subscriptions at the end of the list and update `pageInfo`\n                              // so we have the new `endCursor` and `hasNextPage` values\n                              organizationSubscriptions: {\n                                __typename: previousResult.organizationSubscriptions.__typename,\n                                edges: [ ...previousResult.organizationSubscriptions.edges, ...newEdges ],\n                                pageInfo\n                              }\n                            }\n                          : previousResult\n                      }\n                    })\n                  }} >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.shop')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.classes')}</Table.ColHeader>\n              <Table.ColHeader><span className=\"pull-right\">{t('general.price')}</span></Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {subscriptions.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col key={v4()}>\n                  {node.name}\n                </Table.Col>\n                <Table.Col key={v4()}>\n                  <BadgeBoolean value={node.displayPublic} />\n                </Table.Col>\n                <Table.Col key={v4()}>\n                  <BadgeBoolean value={node.displayShop} />\n                </Table.Col>\n                <Table.Col key={v4()}>\n                  {\n                    (node.unlimited) ? t(\"general.unlimited\"):\n                    <div>\n                      {node.classes} <br />\n                      <span className=\"text-muted\"> {t(\"general.a\")} {node.subscriptionUnitDisplay}</span>\n                    </div>\n                  }\n                </Table.Col>\n                <Table.Col className=\"text-right\" key={v4()}>\n                  {node.priceTodayDisplay} <br />\n                  <Link to={\"/organization/subscriptions/prices/\" + node.id}\n                        className='btn btn-link btn-sm'>\n                      {/* <Icon prefix=\"fe\" name=\"dollar-sign\" />  */}\n                      {t('general.edit_price')}\n                  </Link>\n                </Table.Col>\n                <Table.Col className=\"text-right\" key={v4()}>\n                  {(node.archived) ? \n                    <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                    <Button className='btn-sm' \n                            onClick={() => history.push(\"/organization/subscriptions/edit/\" + node.id)}\n                            color=\"secondary\">\n                      {t('general.edit')}\n                    </Button>\n                  }\n                </Table.Col>\n                <Table.Col className=\"text-right\" key={v4()}>\n                  <button className=\"icon btn btn-link btn-sm\" \n                      title={t('general.archive')} \n                      href=\"\"\n                      onClick={() => {\n                        console.log(\"clicked archived\")\n                        let id = node.id\n                        archiveSubscription({ variables: {\n                          input: {\n                          id,\n                          archived: !archived\n                          }\n                  }, refetchQueries: [\n                      {query: GET_SUBSCRIPTIONS_QUERY, variables: {\"archived\": archived }}\n                  ]}).then(({ data }) => {\n                    console.log('got data', data);\n                    toast.success(\n                      (archived) ? t('general.unarchived'): t('general.archived'), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error);\n                  })\n                  }}>\n                    <Icon prefix=\"fa\" name=\"inbox\" />\n                  </button>\n                </Table.Col>\n              </Table.Row>\n            ))}\n        </Table.Body>\n      </Table>\n    </ContentCard>\n  </OrganizationSubscriptionsBase>\n)}\n\n\nexport default withTranslation()(withRouter(OrganizationSubscriptions))","import { t } from 'i18next'\nimport * as Yup from 'yup'\nimport { yupToFormErrors } from 'formik';\n\nexport const SUBSCRIPTION_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n    description: Yup.string(),\n    sortOrder: Yup.number()\n      .min(0),\n    minDuration: Yup.number()\n      .min(0),\n    classes: Yup.number()\n      .min(0),\n    subscriptionUnit: Yup.string(),\n    creditValidity: Yup.number()\n      .min(0),\n    quickStatsAmount: Yup.number()\n      .min(0),\n    termsAndConditions: Yup.string()\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from \"uuid\"\nimport { Link } from \"react-router-dom\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../plugin_config/tinymce\"\n\n\nimport {\n  Button,\n  Card,\n  Form\n} from \"tabler-react\";\n\n\nconst OrganizationSubscriptionForm = ({ t, history, inputData, isSubmitting, setFieldValue, setFieldTouched, errors, values, returnUrl }) => (\n  <FoForm>\n    <Card.Body> \n      <Form.Group>\n        <Form.Label className=\"custom-switch\">\n            <Field \n              className=\"custom-switch-input\"\n              type=\"checkbox\" \n              name=\"displayPublic\" \n              checked={values.displayPublic} />\n            <span className=\"custom-switch-indicator\" ></span>\n            <span className=\"custom-switch-description\">{t('organization.subscription.public')}</span>\n          </Form.Label>\n        <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n      </Form.Group>      \n      <Form.Group>\n        <Form.Label className=\"custom-switch\">\n            <Field \n              className=\"custom-switch-input\"\n              type=\"checkbox\" \n              name=\"displayShop\" \n              checked={values.displayShop} />\n            <span className=\"custom-switch-indicator\" ></span>\n            <span className=\"custom-switch-description\">{t('organization.subscription.shop')}</span>\n          </Form.Label>\n        <ErrorMessage name=\"displayShop\" component=\"div\" />   \n      </Form.Group>      \n      <Form.Group label={t('general.name')} >\n        <Field type=\"text\" \n              name=\"name\" \n              className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\" />\n        <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('general.description')}>\n        <Editor\n            tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n            textareaName=\"description\"\n            initialValue={values.description}\n            init={tinymceBasicConf}\n            onBlur={(e) => {\n              setFieldValue(\"description\", e.target.getContent())\n              setFieldTouched(\"description\", true)\n            }}\n          />\n        <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('general.sort_order')}>\n        <Field type=\"text\" \n              name=\"sortOrder\" \n              className={(errors.sortOrder) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\" />\n        <ErrorMessage name=\"sortOrder\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('general.min_duration')}>\n        <Field type=\"text\" \n              name=\"minDuration\" \n              className={(errors.minDuration) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\" />\n        <ErrorMessage name=\"minDuration\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group>\n        <Form.Label className=\"custom-switch\">\n            <Field \n              className=\"custom-switch-input\"\n              type=\"checkbox\" \n              name=\"unlimited\" \n              checked={values.unlimied} />\n            <span className=\"custom-switch-indicator\" ></span>\n            <span className=\"custom-switch-description\">{t('general.unlimited')}</span>\n          </Form.Label>\n        <ErrorMessage name=\"unlimited\" component=\"div\" />   \n      </Form.Group>  \n      {/* Show if unlimited */}\n      { (values.unlimited) ? \"\"\n        : \n        // Show if not unlimited\n        <span>\n          <Form.Group label={t('general.classes')}>\n            <Field type=\"text\" \n                  name=\"classes\" \n                  className={(errors.classes) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\" />\n            <ErrorMessage name=\"classes\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group> \n          <Form.Group label={t('general.subscription_unit')}>\n            <Field component=\"select\" \n                  name=\"subscriptionUnit\" \n                  className={(errors.subscriptionUnit) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\">\n              <option value=\"WEEK\" key={v4()}>{t('subscription_unit.week')}</option>\n              <option value=\"MONTH\" key={v4()}>{t('subscription_unit.month')}</option>\n            </Field>\n            <ErrorMessage name=\"subscriptionUnit\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          <Form.Group label={t('general.credit_validity')}>\n            <Field type=\"text\" \n                  name=\"creditValidity\" \n                  className={(errors.creditValidity) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\" />\n            <ErrorMessage name=\"creditValidity\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </span>\n      } \n      <Form.Group label={t('general.quickStatsAmount')}>\n        <Field type=\"text\" \n              name=\"quickStatsAmount\" \n              className={(errors.quickStatsAmount) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\" />\n        <ErrorMessage name=\"quickStatsAmount\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('general.terms_and_conditions')}>\n        <Editor\n            tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n            textareaName=\"termsAndConditions\"\n            initialValue={values.termsAndConditions}\n            init={tinymceBasicConf}\n            onBlur={(e) => {\n              setFieldValue(\"termsAndConditions\", e.target.getContent())\n              setFieldTouched(\"termsAndConditions\", true)\n            }}\n          />\n        <ErrorMessage name=\"termsAndConditions\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      {/* <Form.Group label={t('general.membership')}>\n        <Field component=\"select\" \n              name=\"organizationMembership\" \n              className={(errors.organizationMembership) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\">\n          <option value=\"\" key={v4()}>{t(\"general.membership_not_required\")}</option>\n          {inputData.organizationMemberships.edges.map(({ node }) =>\n            <option value={node.id} key={v4()}>{node.name} ({node.code})</option>\n          )}\n        </Field>\n        <ErrorMessage name=\"organizationMembership\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>  */}\n      <Form.Group label={t('general.glaccount')}>\n        <Field component=\"select\" \n              name=\"financeGlaccount\" \n              className={(errors.financeGlaccount) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\">\n          <option value=\"\" key={v4()}></option>\n          {inputData.financeGlaccounts.edges.map(({ node }) =>\n            <option value={node.id} key={v4()}>{node.name} ({node.code})</option>\n          )}\n        </Field>\n        <ErrorMessage name=\"financeGlaccount\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('general.costcenter')}>\n        <Field component=\"select\" \n              name=\"financeCostcenter\" \n              className={(errors.financeCostcenter) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\">\n          <option value=\"\" key={v4()}></option>\n          {inputData.financeCostcenters.edges.map(({ node }) =>\n            <option value={node.id} key={v4()}>{node.name} ({node.code})</option>\n          )}\n        </Field>\n        <ErrorMessage name=\"financeCostcenter\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n    </Card.Body>\n    <Card.Footer>\n        <Button \n          className=\"pull-right\"\n          color=\"primary\"\n          disabled={isSubmitting}\n          type=\"submit\"\n        >\n          {t('general.submit')}\n        </Button>\n        <Link to={returnUrl}>\n          <Button\n            type=\"button\" \n            color=\"link\"\n          >\n              {t('general.cancel')}\n          </Button>\n        </Link>\n    </Card.Footer>\n  </FoForm>\n)\n\n\nexport default withTranslation()(withRouter(OrganizationSubscriptionForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SUBSCRIPTIONS_QUERY, GET_INPUT_VALUES_QUERY, CREATE_SUBSCRIPTION } from './queries'\nimport { SUBSCRIPTION_SCHEMA } from './yupSchema'\nimport OrganizationSubscriptionForm from './OrganizationSubscriptionForm'\n\nimport {\n  Card,\n  Dimmer\n} from \"tabler-react\";\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationSubscriptionsBase from \"./OrganizationSubscriptionsBase\"\n\n\nfunction OrganizationSubscriptionAdd({ t, history }) {\n  const cardTitle = t('organization.subscriptions.title_add')\n  const returnUrl =  \"/organization/subscriptions\"\n  const {loading, error, data} = useQuery(GET_INPUT_VALUES_QUERY)\n  const [createSubscription] = useMutation(CREATE_SUBSCRIPTION)\n\n  if (loading) return (\n    <OrganizationSubscriptionsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationSubscriptionsBase>\n  )\n\n  if (error) return (\n    <OrganizationSubscriptionsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </OrganizationSubscriptionsBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n\n  return (\n    <OrganizationSubscriptionsBase showBack={true}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle}</Card.Title>\n        </Card.Header>\n        <Formik\n            initialValues={{ \n              displayPublic: true,\n              displayShop: true,\n              name: \"\",\n              description: \"\",\n              sortOrder: 0,\n              minDuration: 1,\n              classes: 1,\n              subscriptionUnit: \"WEEK\",\n              reconciliationClasses: 0,\n              creditValidity: 1,\n              unlimited: false,\n              termsAndConditions: \"\",\n              organizationMembership: \"\",\n              quickStatsAmount: 0,\n              financeGlaccount: \"\",\n              financeCostcenter: \"\"\n            }}\n            validationSchema={SUBSCRIPTION_SCHEMA}\n            onSubmit={(values, { setSubmitting }) => {\n                console.log('submit values:')\n                console.log(values)\n\n                createSubscription({ variables: {\n                  input: {\n                    displayPublic: values.displayPublic,\n                    displayShop: values.displayShop,\n                    name: values.name,\n                    description: values.description,\n                    sortOrder: values.sortOrder,\n                    minDuration: values.minDuration,\n                    classes: values.classes,\n                    subscriptionUnit: values.subscriptionUnit,\n                    reconciliationClasses: values.reconciliationClasses,\n                    creditValidity: values.creditValidity,\n                    unlimited: values.unlimited,\n                    termsAndConditions: values.termsAndConditions,\n                    quickStatsAmount: values.quickStatsAmount,\n                    financeGlaccount: values.financeGlaccount,\n                    financeCostcenter: values.financeCostcenter\n                  }\n                }, refetchQueries: [\n                    {query: GET_SUBSCRIPTIONS_QUERY, variables: {archived: false }}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    history.push(returnUrl)\n                    toast.success((t('organization.subscriptions.toast_add_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n              }}\n            >\n            {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n              <OrganizationSubscriptionForm\n                inputData={inputData}\n                isSubmitting={isSubmitting}\n                setFieldValue={setFieldValue}\n                setFieldTouched={setFieldTouched}\n                errors={errors}\n                values={values}\n                returnUrl={returnUrl}\n              />\n            )}\n        </Formik>\n      </Card>\n    </OrganizationSubscriptionsBase>\n  )\n}\n\n\n\n// class OrganizationSubscriptionAdd extends Component {\n//   constructor(props) {\n//     super(props)\n//     console.log(\"Organization subscription add props:\")\n//     console.log(props)\n//   }\n\n//   render() {\n//     const t = this.props.t\n//     const history = this.props.history\n//     const return_url = \"/organization/subscriptions\"\n\n//     return (\n//       <SiteWrapper>\n//         <div className=\"my-3 my-md-5\">\n//           <Container>\n//             <Page.Header title=\"Organization\" />\n//             <Grid.Row>\n//               <Grid.Col md={9}>\n\n//               </Grid.Col>\n//               <Grid.Col md={3}>\n//                 <HasPermissionWrapper permission=\"add\"\n//                                       resource=\"organizationsubscription\">\n//                   <Button color=\"primary btn-block mb-6\"\n//                           onClick={() => history.push(return_url)}>\n//                     <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n//                   </Button>\n//                 </HasPermissionWrapper>\n//                 <OrganizationMenu activeLink='subscriptions'/>\n//               </Grid.Col>\n//             </Grid.Row>\n//           </Container>\n//         </div>\n//     </SiteWrapper>\n//     )}\n//   }\n\n\nexport default withTranslation()(withRouter(OrganizationSubscriptionAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SUBSCRIPTIONS_QUERY, GET_SUBSCRIPTION_QUERY, UPDATE_SUBSCRIPTION } from './queries'\nimport { SUBSCRIPTION_SCHEMA } from './yupSchema'\nimport OrganizationSubscriptionForm from './OrganizationSubscriptionForm'\n\n\nimport {\n  Card,\n  Dimmer\n} from \"tabler-react\";\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationSubscriptionsBase from './OrganizationSubscriptionsBase';\n\n\nfunction OrganizationSubscriptionEdit({t, match, history}) {\n  const id = match.params.id\n  const returnUrl = \"/organization/subscriptions\"\n  const cardTitle = t('organization.subscriptions.title_edit')\n\n  const { loading, error, data } = useQuery(GET_SUBSCRIPTION_QUERY, { \n    variables: { id: id }\n  })\n  const [ updateSubscription ] = useMutation(UPDATE_SUBSCRIPTION)\n\n  if (loading) return (\n    <OrganizationSubscriptionsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationSubscriptionsBase>\n  )\n\n  if (error) return (\n    <OrganizationSubscriptionsBase showBack={true}>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </OrganizationSubscriptionsBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  const initialData = data\n\n  let initialMembership = \"\"\n  if (initialData.organizationSubscription.organizationMembership) {\n    initialMembership =  initialData.organizationSubscription.organizationMembership.id\n  } \n\n  let initialGlaccount = \"\"\n  if (initialData.organizationSubscription.financeGlaccount) {\n    initialGlaccount =  initialData.organizationSubscription.financeGlaccount.id\n  } \n\n  let initialCostcenter = \"\"\n  if (initialData.organizationSubscription.financeCostcenter) {\n    initialCostcenter =  initialData.organizationSubscription.financeCostcenter.id\n  } \n\n  return (\n    <OrganizationSubscriptionsBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n          initialValues={{ \n            displayPublic: initialData.organizationSubscription.displayPublic,\n            displayShop: initialData.organizationSubscription.displayShop,\n            name: initialData.organizationSubscription.name,\n            description: initialData.organizationSubscription.description,\n            sortOrder: initialData.organizationSubscription.sortOrder,\n            minDuration: initialData.organizationSubscription.minDuration,\n            classes: initialData.organizationSubscription.classes,\n            subscriptionUnit: initialData.organizationSubscription.subscriptionUnit,\n            reconciliationClasses: initialData.organizationSubscription.reconciliationClasses,\n            creditValidity: initialData.organizationSubscription.creditValidity,\n            unlimited: initialData.organizationSubscription.unlimited,\n            termsAndConditions: initialData.organizationSubscription.termsAndConditions,\n            organizationMembership: initialMembership,\n            quickStatsAmount: initialData.organizationSubscription.quickStatsAmount,\n            financeGlaccount:  initialGlaccount,\n            financeCostcenter: initialCostcenter\n          }}\n          validationSchema={SUBSCRIPTION_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              updateSubscription({ variables: {\n                input: {\n                  id: match.params.id,\n                  displayPublic: values.displayPublic,\n                  displayShop: values.displayShop,\n                  name: values.name,\n                  description: values.description,\n                  sortOrder: values.sortOrder,\n                  minDuration: values.minDuration,\n                  classes: values.classes,\n                  subscriptionUnit: values.subscriptionUnit,\n                  reconciliationClasses: values.reconciliationClasses,\n                  creditValidity: values.creditValidity,\n                  unlimited: values.unlimited,\n                  termsAndConditions: values.termsAndConditions,\n                  quickStatsAmount: values.quickStatsAmount,\n                  financeGlaccount: values.financeGlaccount,\n                  financeCostcenter: values.financeCostcenter\n                }\n              }, refetchQueries: [\n                  {query: GET_SUBSCRIPTIONS_QUERY, variables: {\"archived\": false }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  toast.success((t('organization.subscriptions.toast_edit_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  setSubmitting(false)\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n            <OrganizationSubscriptionForm\n              inputData={initialData}\n              isSubmitting={isSubmitting}\n              setFieldValue={setFieldValue}\n              setFieldTouched={setFieldTouched}\n              errors={errors}\n              values={values}\n              returnUrl={returnUrl}\n            />\n          )}\n        </Formik>\n      </Card>\n    </OrganizationSubscriptionsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationSubscriptionEdit))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../OrganizationMenu\"\n\n\nfunction OrganizationSubscriptionsGroupsBase({ t, history, children, showBack=false }) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"organization.title\")}>\n            <div className=\"page-options d-flex\">\n              <Link to=\"/organization/subscriptions\" \n                    className='btn btn-outline-secondary btn-sm'>\n                  <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back_to')} {t('organization.subscriptions.title')}\n              </Link>\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showBack) ? \n                <Link to=\"/organization/subscriptions/groups\">\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n                :\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"organizationsubscriptiongroup\">\n                  <Link to=\"/organization/subscriptions/groups/add\">\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.subscription_groups.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n              }\n              <OrganizationMenu activeLink=''/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(OrganizationSubscriptionsGroupsBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_SUBSCRIPTION_GROUPS_QUERY = gql`\n  query OrganizationSubscriptionGroups($after: String, $before: String) {\n    organizationSubscriptionGroups(first: 100, before: $before, after: $after) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n          description\n        }\n      }\n    }\n  }\n`\n\n\nexport const GET_SUBSCRIPTION_GROUP_QUERY = gql`\n  query OrganizationSubscriptionGroup($id: ID!) {\n    organizationSubscriptionGroup(id:$id) {\n      id\n      name\n      description\n    }\n  }\n`\n\n\nexport const GET_SUBSCRIPTION_GROUP_SUBSCRIPTIONS_QUERY = gql`\n  query GetPassesAndGroupMembership($after: String, $before: String, $id:ID!) {\n    organizationSubscriptions(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n    organizationSubscriptionGroup(id: $id) {\n      id\n      name\n      description\n      organizationSubscriptions {\n        edges {\n          node {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`\n\nexport const ADD_SUBSCRIPTION_GROUP = gql`\n  mutation CreateOrganizationSubscriptionGroup($input:CreateOrganizationSubscriptionGroupInput!) {\n    createOrganizationSubscriptionGroup(input: $input) {\n      organizationSubscriptionGroup{\n        id\n      }\n    }\n  }\n`\n\nexport const UPDATE_SUBSCRIPTION_GROUP = gql`\nmutation UpdateOrganizationSubscriptionGroup($input: UpdateOrganizationSubscriptionGroupInput!) {\n  updateOrganizationSubscriptionGroup(input: $input) {\n    organizationSubscriptionGroup {\n      id\n    }\n  }\n}\n`\n\nexport const DELETE_SUBSCRIPTION_GROUP = gql`\n  mutation DeleteSubscriptionGroup($input: DeleteOrganizationSubscriptionGroupInput!) {\n    deleteOrganizationSubscriptionGroup(input: $input) {\n      ok\n    }\n  }\n`\n\nexport const ADD_CARD_TO_GROUP = gql`\n  mutation AddCardToGroup($input: CreateOrganizationSubscriptionGroupSubscriptionInput!) {\n    createOrganizationSubscriptionGroupSubscription(input:$input) {\n      organizationSubscriptionGroupSubscription {\n        id\n        organizationSubscription {\n          id\n          name\n        }\n        organizationSubscriptionGroup {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\n\nexport const DELETE_CARD_FROM_GROUP = gql`\n  mutation DeleteCardFromGroup($input: DeleteOrganizationSubscriptionGroupSubscriptionInput!) {\n    deleteOrganizationSubscriptionGroupSubscription(input:$input) {\n      ok\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport confirm_delete from \"../../../tools/confirm_delete\"\nimport ContentCard from \"../../general/ContentCard\"\nimport CardHeaderSeparator from \"../../general/CardHeaderSeparator\"\nimport OrganizationMenu from \"../OrganizationMenu\"\nimport OrganizationGroupsSubscriptionsBase from \"./OrganizationSubscriptionsGroupsBase\"\n\nimport { GET_SUBSCRIPTION_GROUPS_QUERY, DELETE_SUBSCRIPTION_GROUP } from \"./queries\"\n\n\nfunction OrganizationSubscriptionsGroups({ t, history }) {\n  const { loading, error, data, fetchMore } = useQuery(GET_SUBSCRIPTION_GROUPS_QUERY)\n  const [deleteSubscriptionGroup] = useMutation(DELETE_SUBSCRIPTION_GROUP)\n\n  if (loading) return (\n    <OrganizationGroupsSubscriptionsBase>\n      <ContentCard cardTitle={t('organization.subscription_groups.title')}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationGroupsSubscriptionsBase>\n  )\n  // Error\n  if (error) return (\n    <OrganizationGroupsSubscriptionsBase>\n      <ContentCard cardTitle={t('organization.subscription_groups.title')}>\n        <p>{t('organization.subscription_groups.error_loading')}</p>\n      </ContentCard>\n    </OrganizationGroupsSubscriptionsBase>\n  )\n\n  const subscription_groups = data.organizationSubscriptionGroups\n  \n  // Empty list\n  if (!subscription_groups.edges.length) return (\n    <OrganizationGroupsSubscriptionsBase>\n      <ContentCard cardTitle={t('organization.subscription_groups.title')}>\n        <p>{t('organization.subscription_groups.empty_list')}</p>\n      </ContentCard>\n    </OrganizationGroupsSubscriptionsBase>\n  )\n\n  return (\n    <OrganizationGroupsSubscriptionsBase>\n      <ContentCard cardTitle={t('organization.subscription_groups.title')}\n            pageInfo={subscription_groups.pageInfo}\n            onLoadMore={() => {\n            fetchMore({\n              variables: {\n                after: subscription_groups.pageInfo.endCursor\n              },\n              updateQuery: (previousResult, { fetchMoreResult }) => {\n                const newEdges = fetchMoreResult.organizationSubscriptionGroups.edges\n                const pageInfo = fetchMoreResult.organizationSubscriptionGroups.pageInfo\n\n                return newEdges.length\n                  ? {\n                      // Put the new subscription_groups at the end of the list and update `pageInfo`\n                      // so we have the new `endCursor` and `hasNextPage` values\n                      organizationSubscriptionGroups: {\n                        __typename: previousResult.organizationSubscriptionGroups.__typename,\n                        edges: [ ...previousResult.organizationSubscriptionGroups.edges, ...newEdges ],\n                        pageInfo\n                      }\n                    }\n                  : previousResult\n              }\n            })\n          }} >\n        <Table>\n          <Table.Header>\n          <Table.Row key={v4()}>\n            <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.description')}</Table.ColHeader>\n          </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {subscription_groups.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col key={v4()}>\n                  {node.name}\n                </Table.Col>\n                <Table.Col key={v4()}>\n                  {node.description.substring(0, 24)}\n                </Table.Col>\n                <Table.Col className=\"text-right\" key={v4()}>\n                  <span>\n                    <Button className='btn-sm' \n                            onClick={() => history.push(\"/organization/subscriptions/groups/edit/\" + node.id)}\n                            color=\"secondary\">\n                      {t('general.edit')}\n                    </Button>\n                    <Button className='btn-sm' \n                            onClick={() => history.push(\"/organization/subscriptions/groups/edit/subscriptions/\" + node.id)}\n                            color=\"secondary\">\n                      {t('organization.subscriptions.groups.edit_subscriptions')}\n                    </Button>\n                  </span>\n                </Table.Col>\n                <Table.Col>\n                  <button className=\"icon btn btn-link btn-sm float-right\" \n                    title={t('general.delete')} \n                    href=\"\"\n                    onClick={() => {\n                      confirm_delete({\n                        t: t,\n                        msgConfirm: t(\"organization.subscriptions.groups.delete_confirm_msg\"),\n                        msgDescription: <p>{node.name}</p>,\n                        msgSuccess: t('organization.subscriptions.groups.deleted'),\n                        deleteFunction: deleteSubscriptionGroup,\n                        functionVariables: { variables: {\n                          input: {\n                            id: node.id\n                          }\n                        }, refetchQueries: [\n                          {query: GET_SUBSCRIPTION_GROUPS_QUERY} \n                        ]}\n                      })\n                  }}>\n                    <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n                  </button>\n                </Table.Col>\n              </Table.Row>\n            ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </OrganizationGroupsSubscriptionsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationSubscriptionsGroups))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const SUBSCRIPTION_GROUP_SCHEMA = Yup.object().shape({\n    name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Alert,\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\nconst OrganizationSubscriptionGroupForm = ({ t, history, isSubmitting, errors, returnUrl }) => (\n  <FoForm>\n      <Card.Body>\n          <Form.Group label={t('general.name')}>\n            <Field type=\"text\" \n                    name=\"name\" \n                    className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          <Form.Group label={t('general.description')}>\n            <Field type=\"text\" \n                    name=\"description\" \n                    className={(errors.description) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n      </Card.Body>\n      <Card.Footer>\n        {(isSubmitting) ?\n        <Button \n          color=\"primary\"\n          className=\"pull-right\" \n          type=\"submit\" \n          loading\n          disabled={isSubmitting}\n        >\n          {t(\"general.submit\")}\n        </Button>\n        :\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n        }\n        <Link to={returnUrl}>\n          <Button color=\"link\">\n              {t('general.cancel')}\n          </Button>\n        </Link>\n        {(isSubmitting) ? \n          <Alert type=\"primary\" hasExtraSpace>\n            <strong>{t('general.please_wait')}</strong> {t('organization.subscription_groups.toast_creating_might_take_a_while')}\n          </Alert> : \n          \"\"\n        }\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(OrganizationSubscriptionGroupForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SUBSCRIPTION_GROUPS_QUERY, ADD_SUBSCRIPTION_GROUP } from './queries'\nimport { SUBSCRIPTION_GROUP_SCHEMA } from './yupSchema'\nimport OrganizationSubscriptionGroupForm from './OrganizationSubscriptionsGroupForm'\n\nimport {\n  Card,\n} from \"tabler-react\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationSubscriptionsGroupsBase from './OrganizationSubscriptionsGroupsBase';\n\nfunction OrganizationSubscriptionGroupAdd({t, history}) {\n  const returnUrl = \"/organization/subscriptions/groups\"\n  const [addSubscriptionGroup] = useMutation(ADD_SUBSCRIPTION_GROUP)\n\n  return (\n    <OrganizationSubscriptionsGroupsBase showBack={true}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('organization.subscription_groups.title_add')}</Card.Title>\n        </Card.Header>\n        <Formik\n          initialValues={{ name: '', description: '' }}\n          validationSchema={SUBSCRIPTION_GROUP_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n            addSubscriptionGroup({ variables: {\n              input: {\n                name: values.name, \n                description: values.description,\n              }\n            }, refetchQueries: [\n                {query: GET_SUBSCRIPTION_GROUPS_QUERY}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data);\n                history.push(returnUrl)\n                toast.success((t('organization.subscription_groups.toast_add_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n            }}\n            >\n            {({ isSubmitting, errors }) => (\n              <OrganizationSubscriptionGroupForm\n                isSubmitting={isSubmitting}\n                errors={errors}\n                returnUrl={returnUrl}\n              />\n            )}\n        </Formik>\n      </Card>\n    </OrganizationSubscriptionsGroupsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationSubscriptionGroupAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SUBSCRIPTION_GROUPS_QUERY, GET_SUBSCRIPTION_GROUP_QUERY, UPDATE_SUBSCRIPTION_GROUP } from './queries'\nimport { SUBSCRIPTION_GROUP_SCHEMA } from './yupSchema'\nimport OrganizationSubscriptionGroupForm from './OrganizationSubscriptionsGroupForm'\n\n\nimport {\n  Card,\n  Dimmer,\n} from \"tabler-react\";\n\nimport ContentCard from \"../../general/ContentCard\"\nimport OrganizationSubscriptionsGroupsBase from './OrganizationSubscriptionsGroupsBase';\n\n\nfunction OrganizationSubscriptionGroupEdit({t, match, history}) {\n  const id = match.params.id\n  const returnUrl = \"/organization/subscriptions/groups\"\n  const cardTitle = t('organization.subscription_groups.title_edit')\n  const {loading, error, data} = useQuery(GET_SUBSCRIPTION_GROUP_QUERY, {\n    variables: { id: id }\n  })\n  const [ updateSubscriptionGroup ] = useMutation(UPDATE_SUBSCRIPTION_GROUP)\n  \n  if (loading) return (\n    <OrganizationSubscriptionsGroupsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationSubscriptionsGroupsBase>\n  )\n  // Error\n  if (error) return (\n    <OrganizationSubscriptionsGroupsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('organization.subscription_groups.error_loading')}</p>\n      </ContentCard>\n    </OrganizationSubscriptionsGroupsBase>\n  )\n\n  const initialData = data.organizationSubscriptionGroup;\n\n  return (\n    <OrganizationSubscriptionsGroupsBase>\n      <Card title={cardTitle}>\n        <Formik\n          initialValues={{ \n            name: initialData.name, \n            description: initialData.description,\n          }}\n          validationSchema={SUBSCRIPTION_GROUP_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n            console.log('submit values:')\n            console.log(values)\n\n            updateSubscriptionGroup({ variables: {\n              input: {\n                id: match.params.id,\n                name: values.name,\n                description: values.description,\n              }\n            }, refetchQueries: [\n                {query: GET_SUBSCRIPTION_GROUPS_QUERY}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                history.push(returnUrl)\n                toast.success((t('organization.subscription_groups.toast_edit_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n          }}\n          >\n          {({ isSubmitting, errors, values }) => (\n            <OrganizationSubscriptionGroupForm\n              isSubmitting={isSubmitting}\n              errors={errors}\n              returnUrl={returnUrl}\n            />\n          )}\n        </Formik>\n      </Card>\n    </OrganizationSubscriptionsGroupsBase>\n  )\n}\n\n\n// class OrganizationSubscriptionGroupEdit extends Component {\n//   constructor(props) {\n//     super(props)\n//     console.log(\"Organization subscriptiongroup edit props:\")\n//     console.log(props)\n//   }\n\n//   render() {\n//     const t = this.props.t\n//     const match = this.props.match\n//     const history = this.props.history\n//     const id = match.params.id\n//     const return_url = \"/organization/subscriptions/groups\"\n\n//     return (\n//       <SiteWrapper>\n//         <div className=\"my-3 my-md-5\">\n//           <Container>\n//             <Page.Header title=\"Organization\" />\n//             <Grid.Row>\n//               <Grid.Col md={9}>\n//               <Card>\n//                 <Card.Header>\n//                   <Card.Title>{t('organization.subscription_groups.title_edit')}</Card.Title>\n//                   {console.log(match.params.id)}\n//                 </Card.Header>\n//                 <Query query={GET_SUBSCRIPTION_GROUP_QUERY} variables={{ id }} >\n//                 {({ loading, error, data, refetch }) => {\n//                     // Loading\n//                     if (loading) return <p>{t('general.loading_with_dots')}</p>\n//                     // Error\n//                     if (error) {\n//                       console.log(error)\n//                       return <p>{t('general.error_sad_smiley')}</p>\n//                     }\n                    \n//                     const initialData = data.organizationSubscriptionGroup;\n//                     console.log('query data')\n//                     console.log(data)\n\n//                     return (\n                      \n//                       <Mutation mutation={UPDATE_SUBSCRIPTION_GROUP} onCompleted={() => history.push(return_url)}> \n//                       {(updateSubscriptionGroup, { data }) => (\n//                           <Formik\n//                               initialValues={{ \n//                                 name: initialData.name, \n//                                 description: initialData.description,\n//                               }}\n//                               validationSchema={SUBSCRIPTION_GROUP_SCHEMA}\n//                               onSubmit={(values, { setSubmitting }) => {\n//                                   console.log('submit values:')\n//                                   console.log(values)\n\n//                                   updateSubscriptionGroup({ variables: {\n//                                     input: {\n//                                       id: match.params.id,\n//                                       name: values.name,\n//                                       description: values.description,\n//                                     }\n//                                   }, refetchQueries: [\n//                                       {query: GET_SUBSCRIPTION_GROUPS_QUERY}\n//                                   ]})\n//                                   .then(({ data }) => {\n//                                       console.log('got data', data)\n//                                       toast.success((t('organization.subscription_groups.toast_edit_success')), {\n//                                           position: toast.POSITION.BOTTOM_RIGHT\n//                                         })\n//                                     }).catch((error) => {\n//                                       toast.error((t('general.toast_server_error')) + ': ' +  error, {\n//                                           position: toast.POSITION.BOTTOM_RIGHT\n//                                         })\n//                                       console.log('there was an error sending the query', error)\n//                                       setSubmitting(false)\n//                                     })\n//                               }}\n//                               >\n//                               {({ isSubmitting, errors, values }) => (\n//                                 <OrganizationSubscriptionGroupForm\n//                                   isSubmitting={isSubmitting}\n//                                   errors={errors}\n//                                   return_url={return_url}\n//                                 />\n//                               )}\n//                           </Formik>\n//                       )}\n//                       </Mutation>\n//                       )}}\n//                 </Query>\n//               </Card>\n//               </Grid.Col>\n//               <Grid.Col md={3}>\n//                 <HasPermissionWrapper permission=\"change\"\n//                                       resource=\"organizationsubscriptiongroup\">\n//                   <Button color=\"primary btn-block mb-6\"\n//                           onClick={() => history.push(return_url)}>\n//                     <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n//                   </Button>\n//                 </HasPermissionWrapper>\n//                 <OrganizationMenu activeLink=''/>\n//               </Grid.Col>\n//             </Grid.Row>\n//           </Container>\n//         </div>\n//     </SiteWrapper>\n//     )}\n//   }\n\n\nexport default withTranslation()(withRouter(OrganizationSubscriptionGroupEdit))","// @flow\n\nimport React from 'react'\nimport { useMutation, useQuery } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { toast } from 'react-toastify'\n\nimport { GET_SUBSCRIPTION_GROUP_SUBSCRIPTIONS_QUERY, ADD_CARD_TO_GROUP, DELETE_CARD_FROM_GROUP } from './queries'\n\n\nimport {\n  Alert,\n  Icon,\n  Button,\n  Card,\n  Dimmer,\n  Table,\n} from \"tabler-react\";\n\nimport ContentCard from '../../general/ContentCard'\nimport OrganizationSubscriptionsGroupsBase from './OrganizationSubscriptionsGroupsBase';\n\nfunction OrganizationSubscriptionGroupEditSubscriptions({t, match, history}) {\n  const groupId = match.params.id\n  const returnUrl = \"/organization/subscriptions/groups\"\n  const cardTitle = t('organization.subscription_group_subscriptions.title_edit')\n  const { loading, error, data } = useQuery(GET_SUBSCRIPTION_GROUP_SUBSCRIPTIONS_QUERY, {\n    variables: { id: groupId }\n  })\n  const [ addCardToGroup ] = useMutation(ADD_CARD_TO_GROUP)\n  const [ deleteCardFromGroup ] = useMutation(DELETE_CARD_FROM_GROUP)\n\n  if (loading) return (\n    <OrganizationSubscriptionsGroupsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </OrganizationSubscriptionsGroupsBase>\n  )\n  // Error\n  if (error) return (\n    <OrganizationSubscriptionsGroupsBase>\n      <ContentCard cardTitle={cardTitle}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ContentCard>\n    </OrganizationSubscriptionsGroupsBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  const subscriptions = data.organizationSubscriptions\n  const group = data.organizationSubscriptionGroup\n\n  let group_subscriptions = {}\n  if (group.organizationSubscriptions.edges) {\n    group.organizationSubscriptions.edges.map(({ node }) => (\n      group_subscriptions[node.id] = true\n    ))\n  }\n\n  console.log(\"group_subscriptions\")\n  console.log(group_subscriptions)\n\n\n  return (\n    <OrganizationSubscriptionsGroupsBase>\n      <Card title={cardTitle}>\n      {\n      (!subscriptions.edges) ? \"\" : \n        <Card.Body>\n          <Alert type=\"primary\">\n            <strong>{t('general.group')}</strong> {group.name}\n          </Alert>\n          <Table>\n            <Table.Header>\n              <Table.Row key={v4()}>\n                <Table.ColHeader>{t('')}</Table.ColHeader>\n                <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                <Table.ColHeader>{t('')}</Table.ColHeader>\n              </Table.Row>\n            </Table.Header>\n            <Table.Body>\n                {subscriptions.edges.map(({ node }) => (\n                  <Table.Row key={v4()}>\n                    <Table.Col key={v4()}>\n                      {(node.id in group_subscriptions) ? \n                        <Icon name=\"check-circle\" className=\"text-green\" /> : <Icon name=\"x-circle\" className=\"text-red\" />\n                      }\n                    </Table.Col>\n                    <Table.Col key={v4()}>\n                      {node.name}\n                    </Table.Col>\n                    {console.log((node.id in group_subscriptions))}\n                    {(!(node.id in group_subscriptions)) ?\n                      // Add\n                      <Table.Col className=\"text-right text-green\" key={v4()}>\n                        <Button color=\"link\"\n                          size=\"sm\"\n                          title={t('general.add_to_group')} \n                          href=\"\"\n                          onClick={() => {\n                            console.log(\"clicked add\")\n                            let pass_id = node.id\n                            addCardToGroup({ variables: {\n                              input: {\n                                organizationSubscription: pass_id,\n                                organizationSubscriptionGroup: groupId\n                              }\n                        }, refetchQueries: [\n                            {query: GET_SUBSCRIPTION_GROUP_SUBSCRIPTIONS_QUERY, variables: {\"id\": groupId, \"archived\": false }}\n                        ]}).then(({ data }) => {\n                          console.log('got data', data);\n                          toast.success(t('general.added_to_group'), {\n                            position: toast.POSITION.BOTTOM_RIGHT\n                          })\n                        }).catch((error) => {\n                          toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                              position: toast.POSITION.BOTTOM_RIGHT\n                            })\n                          console.log('there was an error sending the query', error);\n                        })\n                        }}>\n                          <Icon prefix=\"fe\" name=\"plus-circle\" /> { ' ' }\n                          {t('general.add_to_group')} \n                        </Button>\n                      </Table.Col>\n                      :\n                      // Delete\n                      <Table.Col className=\"text-right text-red\" key={v4()}>\n                        <Button color=\"link\"\n                          size=\"sm\"\n                          title={t('general.delete_from_group')} \n                          href=\"\"\n                          onClick={() => {\n                            console.log(\"clicked delete\")\n                            console.log(node.id)\n                            let pass_id = node.id\n                            deleteCardFromGroup({ variables: {\n                              input: {\n                                organizationSubscription: pass_id,\n                                organizationSubscriptionGroup: groupId\n                              }\n                        }, refetchQueries: [\n                            {query: GET_SUBSCRIPTION_GROUP_SUBSCRIPTIONS_QUERY, variables: {\"id\": groupId, \"archived\": false }}\n                        ]}).then(({ data }) => {\n                          console.log('got data', data);\n                          toast.success(t('general.deleted_from_group'), {\n                            position: toast.POSITION.BOTTOM_RIGHT\n                          })\n                        }).catch((error) => {\n                          toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                              position: toast.POSITION.BOTTOM_RIGHT\n                            })\n                          console.log('there was an error sending the query', error);\n                        })\n                        }}>\n                          <Icon prefix=\"fe\" name=\"minus-circle\" /> { ' ' }\n                          {t('general.delete_from_group')}\n                        </Button>\n                      </Table.Col>\n                      }\n                  </Table.Row>\n                ))}\n            </Table.Body>\n          </Table>\n        </Card.Body>\n      }\n    </Card>\n  </OrganizationSubscriptionsGroupsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationSubscriptionGroupEditSubscriptions))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\n\nimport {\n  Alert\n} from \"tabler-react\"\n\nconst AlertInfo = ({ t, title, message }) => (\n  <Alert type=\"primary\">\n      <strong>{title}</strong> {message}\n  </Alert> \n)\n\nexport default withTranslation()(AlertInfo)\n\n\n\n","import { gql } from \"@apollo/client\"\n\nexport const GET_SUBSCRIPTION_PRICES_QUERY = gql`\n  query OrganizationSubscriptionPrices($after: String, $before: String, $organizationSubscription: ID!) {\n    organizationSubscriptionPrices(first: 15, before: $before, after: $after, organizationSubscription: $organizationSubscription) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          organizationSubscription {\n            id\n            name\n          }\n          price\n          priceDisplay\n          financeTaxRate {\n            id\n            name\n          }\n          dateStart\n          dateEnd\n        }\n      }\n    }\n    organizationSubscription(id: $organizationSubscription) {\n      id\n      name\n    }\n  }\n`\n\nexport const GET_SUBSCRIPTION_PRICE_QUERY = gql`\n  query OrganizationSubscriptionPrice($id: ID!, $after: String, $before: String, $archived: Boolean!) {\n    organizationSubscriptionPrice(id:$id) {\n      id\n      organizationSubscription {\n        id\n        name\n      }\n      price\n      priceDisplay\n      financeTaxRate {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n    }\n    financeTaxRates(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          percentage\n          rateType\n        }\n      }\n    }\n  }\n`\n\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query InputValues($after: String, $before: String, $archived: Boolean) {\n    financeTaxRates(first: 15, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          percentage\n          rateType\n        }\n      }\n    }\n  }\n`","// @flow\n\nimport React, { useContext } from 'react'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Button,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport { toast } from 'react-toastify'\nimport { confirmAlert } from 'react-confirm-alert'\n\nimport ContentCard from \"../../../general/ContentCard\"\nimport OrganizationMenu from \"../../OrganizationMenu\"\nimport AlertInfo from \"../../../ui/AlertInfo\"\n\nimport { GET_SUBSCRIPTION_PRICES_QUERY } from \"./queries\"\nimport { GET_SUBSCRIPTIONS_QUERY } from \"../queries\"\n\nimport moment from 'moment'\n\n\nconst DELETE_SUBSCRIPTION_PRICE = gql`\n  mutation DeleteOrganizationSubscriptionPrice($input: DeleteOrganizationSubscriptionPriceInput!) {\n    deleteOrganizationSubscriptionPrice(input: $input) {\n      ok\n    }\n  }\n`\n\n\nconst confirmDelete = (t, match, deleteSubscriptionPrice, node) => {\n  console.log(\"clicked delete\")\n  let id = node.id\n\n  confirmAlert({\n    customUI: ({ onClose }) => {\n      return (\n        <div className='custom-ui'>\n          <h1>{t('general.confirm_delete')}</h1>\n          <p>{t('organization.subscription_prices.delete_confirm_msg')}</p>\n          <p>\n            {node.priceDisplay} {node.financeTaxRate.name} <br />\n            <span className=\"text-muted\">\n              {node.dateStart} {(node.dateEnd) ? ' - ' + node.dateEnd : \"\"}\n            </span>\n          </p>\n          <button className=\"btn btn-link pull-right\" onClick={onClose}>{t('general.confirm_delete_no')}</button>\n          <button\n            className=\"btn btn-danger\"\n            onClick={() => {\n            deleteSubscriptionPrice({ variables: {\n                input: {\n                id\n                }\n              }, refetchQueries: [\n                  {query: GET_SUBSCRIPTION_PRICES_QUERY, variables: { organizationSubscription: match.params.subscription_id }},\n                  {query: GET_SUBSCRIPTIONS_QUERY, variables: {archived: false}},\n              ]}).then(({ data }) => {\n                console.log('got data', data);\n                toast.success(\n                  t('organization.subscription_prices.deleted'), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error);\n              })\n              onClose()\n            }}\n          >\n            <Icon name=\"trash-2\" /> {t('general.confirm_delete_yes')}\n          </button>\n          \n        </div>\n      );\n    }\n  })\n}\n\n\nfunction OrganizationSubscriptionsPrices ({ t, history, match, archived=false }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"organization.title\")}>\n            <div className=\"page-options d-flex\">\n              <Link to=\"/organization/subscriptions\" \n                    className='btn btn-outline-secondary btn-sm'>\n                  <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back_to')} {t('organization.subscriptions.title')}\n              </Link>\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              <Query query={GET_SUBSCRIPTION_PRICES_QUERY} variables={{ organizationSubscription: match.params.subscription_id }}>\n              {({ loading, error, data: {organizationSubscriptionPrices: subscription_prices, organizationSubscription: subscription}, refetch, fetchMore }) => {\n                  // Loading\n                  if (loading) return (\n                    <ContentCard cardTitle={t('organization.subscription_prices.title')}>\n                      <Dimmer active={true}\n                              loader={true}>\n                      </Dimmer>\n                    </ContentCard>\n                  )\n                  // Error\n                  if (error) return (\n                    <ContentCard cardTitle={t('organization.subscription_prices.title')}>\n                      <p>{t('organization.subscription_prices.error_loading')}</p>\n                    </ContentCard>\n                  )\n                  const headerOptions = null\n\n                  // Empty list\n                  if (!subscription_prices.edges.length) { return (\n                    <ContentCard cardTitle={t('organization.subscription_prices.title')}\n                                headerContent={headerOptions}>\n                      <AlertInfo title={t('general.subscription')} message={subscription.name} />\n                      <p>\n                      {(!archived) ? t('organization.subscription_prices.empty_list') : t(\"organization.subscription_prices.empty_archive\")}\n                      </p>\n                    \n                    </ContentCard>\n                  )} else {   \n                  // Life's good! :)\n                  return (\n                    <ContentCard cardTitle={t('organization.subscription_prices.title')}\n                                headerContent={headerOptions}\n                                pageInfo={subscription_prices.pageInfo}\n                                onLoadMore={() => {\n                                  fetchMore({\n                                    variables: {\n                                      after: subscription_prices.pageInfo.endCursor\n                                    },\n                                    updateQuery: (previousResult, { fetchMoreResult }) => {\n                                      const newEdges = fetchMoreResult.organizationSubscriptionsPrices.edges\n                                      const pageInfo = fetchMoreResult.organizationSubscriptionsPrices.pageInfo\n\n                                      return newEdges.length\n                                        ? {\n                                            // Put the new subscriptions at the end of the list and update `pageInfo`\n                                            // so we have the new `endCursor` and `hasNextPage` values\n                                            organizationSubscriptionsPrices: {\n                                              __typename: previousResult.organizationSubscriptionsPrices.__typename,\n                                              edges: [ ...previousResult.organizationSubscriptionsPrices.edges, ...newEdges ],\n                                              pageInfo\n                                            }\n                                          }\n                                        : previousResult\n                                    }\n                                  })\n                                }} >\n                      <div>\n                        <AlertInfo title={t('general.subscription')} message={subscription.name} />\n\n                        <Table>\n                          <Table.Header>\n                            <Table.Row key={v4()}>\n                              <Table.ColHeader>{t('general.date_start')}</Table.ColHeader>\n                              <Table.ColHeader>{t('general.date_end')}</Table.ColHeader>\n                              <Table.ColHeader>{t('general.price')}</Table.ColHeader>\n                              <Table.ColHeader></Table.ColHeader>\n                            </Table.Row>\n                          </Table.Header>\n                          <Table.Body>\n                              {subscription_prices.edges.map(({ node }) => (\n                                <Table.Row key={v4()}>\n                                  <Table.Col key={v4()}>\n                                    {moment(node.dateStart).format(dateFormat)}\n                                  </Table.Col>\n                                  <Table.Col key={v4()}>\n                                    {(node.dateEnd) ? moment(node.dateEnd).format(dateFormat) : \"\"}\n                                  </Table.Col>\n                                  <Table.Col key={v4()}>\n                                    {node.priceDisplay} <br />\n                                    <span className=\"text-muted\">{node.financeTaxRate.name}</span>\n                                  </Table.Col>\n                                  <Table.Col className=\"text-right\" key={v4()}>\n                                    {(node.archived) ? \n                                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                                      <Button className='btn-sm' \n                                              onClick={() => history.push(\"/organization/subscriptions/prices/edit/\" + match.params.subscription_id + '/' + node.id)}\n                                              color=\"secondary\">\n                                        {t('general.edit')}\n                                      </Button>\n                                    }\n                                  </Table.Col>\n                                  <Mutation mutation={DELETE_SUBSCRIPTION_PRICE} key={v4()}>\n                                      {(deleteSubscriptionPrice, { data }) => (\n                                        <Table.Col className=\"text-right\" key={v4()}>\n                                          <button className=\"icon btn btn-link btn-sm\" \n                                            title={t('general.delete')} \n                                            href=\"\"\n                                            onClick={() => {confirmDelete(t, match, deleteSubscriptionPrice, node)}}\n                                          >\n                                            <span className=\"text-red\">\n                                              <Icon prefix=\"fe\" name=\"trash-2\" />\n                                            </span>\n                                          </button>\n                                        </Table.Col>\n                                      )}\n                                    </Mutation>\n                                </Table.Row>\n                              ))}\n                          </Table.Body>\n                        </Table>\n                        </div>\n                    </ContentCard>\n                  )}}\n              }\n              </Query>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <HasPermissionWrapper permission=\"add\"\n                                    resource=\"organizationsubscriptionprice\">\n                <Button color=\"primary btn-block mb-6\"\n                        onClick={() => history.push(\"/organization/subscriptions/prices/add/\" + match.params.subscription_id)}>\n                  <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.subscription_prices.add')}\n                </Button>\n              </HasPermissionWrapper>\n              <OrganizationMenu activeLink='subscriptions'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(OrganizationSubscriptionsPrices))","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\n\nimport {\n  List\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../HasPermissionWrapper\"\n\n\nlet accounts_active\nlet b2b_active\nlet suppliers_active\n\n\nconst RelationsMenu = ({ t, activeLink }) => (\n    <List.Group transparent={true}>\n        {(activeLink === 'accounts') ? accounts_active = true: accounts_active = false}\n        {(activeLink === 'b2b') ? b2b_active = true: b2b_active = false}\n        {(activeLink === 'suppliers') ? suppliers_active = true: suppliers_active = false}\n        \n\n        <List.GroupItem\n          key={v4()}\n          className=\"d-flex align-items-center\"\n          to=\"#/relations/accounts\"\n          icon=\"users\"\n          active={accounts_active}\n        >\n          {t('relations.accounts.title')}\n        </List.GroupItem>\n        {/* <HasPermissionWrapper \n          permission=\"view\"\n          resource=\"business\">\n          <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/relations/suppliers\"\n            icon=\"package\"\n            active={suppliers_active}\n          >\n            {t('relations.suppliers.title')}\n          </List.GroupItem>\n        </HasPermissionWrapper> */}\n        <HasPermissionWrapper \n          permission=\"view\"\n          resource=\"business\">\n          <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to=\"#/relations/b2b\"\n            icon=\"briefcase\"\n            active={b2b_active}\n          >\n            {t('relations.b2b.title')}\n          </List.GroupItem>\n        </HasPermissionWrapper>\n    </List.Group>\n);\n\nexport default withTranslation()(RelationsMenu)","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const SUBSCRIPTION_PRICE_SCHEMA = Yup.object().shape({\n    price: Yup.number()\n      .typeError(t('yup.type_error_number'))\n      .required(t('yup.field_required'))\n      .max(99999999999999999999, t('yup.max_decimal_number')),\n    financeTaxRate: Yup.string()\n      .required(t('yup.field_required')),\n    dateStart: Yup.date()\n      .required(t('yup.field_required')),\n    // dateEnd: Yup.date(),\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from \"uuid\"\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\nimport CSDatePicker from \"../../../ui/CSDatePicker\"\n\n\nconst OrganizationSubscriptionPriceForm = (\n  { t, history, inputData, isSubmitting, errors, values, setFieldTouched, setFieldValue, return_url }\n  ) => (\n  <FoForm>\n    <Card.Body>\n      <Form.Group label={t('general.price')}>\n        <Field type=\"text\" \n              name=\"price\" \n              className={(errors.price) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\" />\n        <ErrorMessage name=\"price\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('general.taxrate')}>\n        <Field component=\"select\" \n                name=\"financeTaxRate\" \n                className={(errors.financeTaxRate) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\">\n          {console.log(\"query data in subscription price add:\")}\n          {console.log(inputData)}\n          <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n          {inputData.financeTaxRates.edges.map(({ node }) =>\n            <option value={node.id} key={v4()}>{node.name} ({node.percentage}% {node.rateType})</option>\n          )}\n        </Field>\n        <ErrorMessage name=\"financeTaxRate\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('general.date_start')}>\n        <CSDatePicker \n          selected={values.dateStart}\n          onChange={(date) => setFieldValue(\"dateStart\", date)}\n          onBlur={() => setFieldTouched(\"dateStart\", true)}\n        />\n        <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('general.date_end')}>\n        <CSDatePicker \n          selected={values.dateEnd}\n          onChange={(date) => setFieldValue(\"dateEnd\", date)}\n          onBlur={() => setFieldTouched(\"dateEnd\", true)}\n        />\n        <ErrorMessage name=\"dateEnd\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n    </Card.Body>\n    <Card.Footer>\n      <Button \n        color=\"primary\"\n        className=\"pull-right\" \n        type=\"submit\" \n        disabled={isSubmitting}\n      >\n        {t('general.submit')}\n      </Button>\n      <Button color=\"link\" onClick={() => history.push(return_url)}>\n        {t('general.cancel')}\n      </Button>\n    </Card.Footer>\n  </FoForm>\n);\n\nexport default withTranslation()(withRouter(OrganizationSubscriptionPriceForm))","// @flow\n\nimport React from 'react'\nimport { Query, Mutation } from \"@apollo/client\";\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { GET_SUBSCRIPTION_PRICES_QUERY, GET_INPUT_VALUES_QUERY } from './queries'\nimport { GET_SUBSCRIPTIONS_QUERY } from '../queries'\nimport { SUBSCRIPTION_PRICE_SCHEMA } from './yupSchema'\nimport OrganizationSubscriptionPriceForm from './OrganizationSubscriptionPriceForm'\nimport { dateToLocalISO } from '../../../../tools/date_tools'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../../OrganizationMenu\"\n\n\nconst ADD_SUBSCRIPTION_PRICE = gql`\n  mutation CreateOrganizationSubscriptionPrice($input: CreateOrganizationSubscriptionPriceInput!) {\n    createOrganizationSubscriptionPrice(input: $input) {\n      organizationSubscriptionPrice {\n        id\n        organizationSubscription {\n          id\n          name\n        }\n        price\n        financeTaxRate {\n          id\n          name\n        }\n        dateStart\n        dateEnd\n      }\n    }\n  }\n`\n\nconst return_url = \"/organization/subscriptions/prices/\"\n\nconst OrganizationSubscriptionPriceAdd = ({ t, history, match }) => (\n  <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Container>\n        <Page.Header title=\"Organization\" />\n        <Grid.Row>\n          <Grid.Col md={9}>\n          <Card>\n            <Card.Header>\n              <Card.Title>{t('organization.subscription_prices.title_add')}</Card.Title>\n            </Card.Header>\n            <Query query={GET_INPUT_VALUES_QUERY} variables={{ archived: false }} >\n              {({ loading, error, data, refetch }) => {\n                  // Loading\n                  if (loading) return <p>{t('general.loading_with_dots')}</p>\n                  // Error\n                  if (error) {\n                    console.log(error)\n                    return <p>{t('general.error_sad_smiley')}</p>\n                  }\n                  \n                  console.log('query data')\n                  console.log(data)\n                  const inputData = data\n\n                  return (\n                    <Mutation mutation={ADD_SUBSCRIPTION_PRICE} onCompleted={() => history.push(return_url + match.params.subscription_id)}> \n                      {(addSubscription, { data }) => (\n                          <Formik\n                              initialValues={{ price: \"\", dateStart: new Date() }}\n                              validationSchema={SUBSCRIPTION_PRICE_SCHEMA}\n                              onSubmit={(values, { setSubmitting }) => {\n\n                                  let dateEnd\n                                  if (values.dateEnd) {\n                                    dateEnd = dateToLocalISO(values.dateEnd)\n                                  } else {\n                                    dateEnd = values.dateEnd\n                                  }\n\n                                  addSubscription({ variables: {\n                                    input: {\n                                      organizationSubscription: match.params.subscription_id,\n                                      price: values.price,\n                                      financeTaxRate: values.financeTaxRate,\n                                      dateStart: dateToLocalISO(values.dateStart),\n                                      dateEnd: dateEnd\n                                    }\n                                  }, refetchQueries: [\n                                      {query: GET_SUBSCRIPTION_PRICES_QUERY, variables: {\"organizationSubscription\": match.params.subscription_id }},\n                                      {query: GET_SUBSCRIPTIONS_QUERY, variables: {\"archived\": false }},\n                                  ]})\n                                  .then(({ data }) => {\n                                      console.log('got data', data);\n                                      toast.success((t('organization.subscription_prices.toast_add_success')), {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                    }).catch((error) => {\n                                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                      console.log('there was an error sending the query', error)\n                                      setSubmitting(false)\n                                    })\n                              }}\n                              >\n                              {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n                                <OrganizationSubscriptionPriceForm\n                                  inputData={inputData}\n                                  isSubmitting={isSubmitting}\n                                  setFieldTouched={setFieldTouched}\n                                  setFieldValue={setFieldValue}\n                                  errors={errors}\n                                  values={values}\n                                  return_url={return_url}\n                                />\n                              )}\n                          </Formik>\n                      )}\n                    </Mutation>\n                  )}}\n                </Query>\n          </Card>\n          </Grid.Col>\n          <Grid.Col md={3}>\n            <HasPermissionWrapper permission=\"add\"\n                                  resource=\"organizationsubscriptionprice\">\n              <Button color=\"primary btn-block mb-6\"\n                      onClick={() => history.push(return_url + match.params.subscription_id)}>\n                <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n              </Button>\n            </HasPermissionWrapper>\n            <OrganizationMenu activeLink='subscriptions'/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n    </div>\n  </SiteWrapper>\n);\n\nexport default withTranslation()(withRouter(OrganizationSubscriptionPriceAdd))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { Query, Mutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SUBSCRIPTION_PRICES_QUERY, GET_SUBSCRIPTION_PRICE_QUERY } from './queries'\nimport { GET_SUBSCRIPTIONS_QUERY } from '../queries'\n\nimport { SUBSCRIPTION_PRICE_SCHEMA } from './yupSchema'\nimport OrganizationSubscriptionPriceForm from './OrganizationSubscriptionPriceForm'\nimport { dateToLocalISO } from '../../../../tools/date_tools'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport OrganizationMenu from \"../../OrganizationMenu\"\n\n\nconst UPDATE_SUBSCRIPTION_PRICE = gql`\n  mutation UpdateOrganizationSubscriptionPrice($input: UpdateOrganizationSubscriptionPriceInput!) {\n    updateOrganizationSubscriptionPrice(input: $input) {\n      organizationSubscriptionPrice {\n        id\n        organizationSubscription {\n          id\n          name\n        }\n        price\n        financeTaxRate {\n          id\n          name\n        }\n        dateStart\n        dateEnd\n      }\n    }\n  }\n`\n\n\nclass OrganizationSubscriptionPriceEdit extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Organization location room edit props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const match = this.props.match\n    const history = this.props.history\n    const id = match.params.id\n    const subscription_id = match.params.subscription_id\n    const return_url = \"/organization/subscriptions/prices/\" + subscription_id\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title=\"Organization\" />\n            <Grid.Row>\n              <Grid.Col md={9}>\n              <Card>\n                <Card.Header>\n                  <Card.Title>{t('organization.subscription_prices.title_edit')}</Card.Title>\n                  {console.log(match.params.id)}\n                </Card.Header>\n                <Query query={GET_SUBSCRIPTION_PRICE_QUERY} variables={{ id, archived: false }} >\n                {({ loading, error, data, refetch }) => {\n                    // Loading\n                    if (loading) return <p>{t('general.loading_with_dots')}</p>\n                    // Error\n                    if (error) {\n                      console.log(error)\n                      return <p>{t('general.error_sad_smiley')}</p>\n                    }\n                    \n                    const initialData = data.organizationSubscriptionPrice\n                    console.log('query data')\n                    console.log(data)\n                    const inputData = data\n\n                    return (\n                      \n                      <Mutation mutation={UPDATE_SUBSCRIPTION_PRICE} onCompleted={() => history.push(return_url)}> \n                      {(updateSubscriptionPrice, { data }) => (\n                          <Formik\n                              initialValues={{ \n                                price: initialData.price, \n                                financeTaxRate: initialData.financeTaxRate.id,\n                                dateStart: initialData.dateStart,\n                                dateEnd: initialData.dateEnd,\n                              }}\n                              validationSchema={SUBSCRIPTION_PRICE_SCHEMA}\n                              onSubmit={(values, { setSubmitting }) => {\n                                  console.log('submit values:')\n                                  console.log(values)\n\n                                  let dateEnd\n                                  if (values.dateEnd) {\n                                    if (values.dateEnd instanceof Date) {\n                                      dateEnd = dateToLocalISO(values.dateEnd)\n                                    } else {\n                                      dateEnd = values.dateEnd\n                                    }\n                                  } else {\n                                    dateEnd = values.dateEnd\n                                  }\n\n                                  let dateStart\n                                  if (values.dateStart instanceof Date) {\n                                    dateStart = dateToLocalISO(values.dateStart)\n                                  } else {\n                                    // Input hasn't changed and DatePicket hasn't made a Date object out of it\n                                    dateStart = values.dateStart\n                                  }\n\n                                  updateSubscriptionPrice({ variables: {\n                                    input: {\n                                      id: match.params.id,\n                                      price: values.price,\n                                      financeTaxRate: values.financeTaxRate,\n                                      dateStart: dateStart,\n                                      dateEnd: dateEnd,\n                                    }\n                                  }, refetchQueries: [\n                                    {query: GET_SUBSCRIPTION_PRICES_QUERY, variables: { organizationSubscription: match.params.subscription_id }},\n                                    {query: GET_SUBSCRIPTIONS_QUERY, variables: { \"archived\": false }}\n                                  ]})\n                                  .then(({ data }) => {\n                                      console.log('got data', data)\n                                      toast.success((t('organization.subscription_prices.toast_edit_success')), {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                    }).catch((error) => {\n                                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                      console.log('there was an error sending the query', error)\n                                      setSubmitting(false)\n                                    })\n                              }}\n                              >\n                              {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n                                <OrganizationSubscriptionPriceForm\n                                  inputData={inputData}\n                                  isSubmitting={isSubmitting}\n                                  setFieldTouched={setFieldTouched}\n                                  setFieldValue={setFieldValue}\n                                  errors={errors}\n                                  values={values}\n                                  return_url={return_url}\n                                >\n                                  {console.log(errors)}\n                                </OrganizationSubscriptionPriceForm>\n                              )}\n                          </Formik>\n                      )}\n                      </Mutation>\n                      )}}\n                </Query>\n              </Card>\n              </Grid.Col>\n              <Grid.Col md={3}>\n                <HasPermissionWrapper permission=\"change\"\n                                      resource=\"organizationlocationroom\">\n                  <Button color=\"primary btn-block mb-6\"\n                          onClick={() => history.push(return_url)}>\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </HasPermissionWrapper>\n                <OrganizationMenu activeLink='locations'/>\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n    </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(OrganizationSubscriptionPriceEdit))","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Page,\n  Grid,\n  Container,\n  StampCard\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport RelationsMenu from \"../RelationsMenu\"\n\n\nclass RelationsHome extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"School home props:\")\n    console.log(props)\n  }\n\n\n  render() {\n    const t = this.props.t\n    const match = this.props.match\n    const history = this.props.history\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title={t(\"relations.title\")} />\n            <Grid.Row>\n              <Grid.Col md={9}>\n                <Grid.Row>\n                  <Grid.Col md={4} lg={4}>\n                    <Link to='/relations/accounts'>\n                      <StampCard header={<small>{t('relations.accounts.title')}</small>} footer={t('')} color=\"blue\" icon=\"users\" />\n                    </Link>\n                  </Grid.Col>\n                  {/* <HasPermissionWrapper permission=\"view\"\n                                        resource=\"business\">\n                    <Grid.Col md={4} lg={4}>\n                      <Link to='/relations/suppliers')}>\n                        <StampCard header={<small>{t('relations.suppliers.title')}</small>} footer={t('')} color=\"blue\" icon=\"package\" />\n                      </Link>\n                    </Grid.Col>\n                  </HasPermissionWrapper> */}\n                  <HasPermissionWrapper permission=\"view\"\n                                        resource=\"business\">\n                    <Grid.Col md={4} lg={4}>\n                      <Link to='/relations/b2b'>\n                        <StampCard header={<small>{t('relations.b2b.title')}</small>} footer={t('')} color=\"blue\" icon=\"briefcase\" />\n                      </Link>\n                    </Grid.Col>\n                  </HasPermissionWrapper>\n                </Grid.Row>\n              </Grid.Col>\n              <Grid.Col md={3}>\n                <RelationsMenu />\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n    </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(RelationsHome))","// @flow\n\nimport React, { Component } from 'react'\nimport { withTranslation } from 'react-i18next'\n\nimport {\n    Button,\n    Icon\n  } from \"tabler-react\"\n\nimport CSLS from \"../../tools/cs_local_storage\"\n\nclass InputSearch extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Input search props:\")\n    console.log(props)\n    this.input = React.createRef()\n    let inputValue\n    const initialValue = localStorage.getItem(this.props.initialValueKey)\n    if (initialValue) {\n      inputValue = initialValue \n    } else {\n      inputValue = \"\"\n    }\n\n    this.state = {\n      inputValue: inputValue,\n      submitValue: \"\",\n      doneTypingInterval: 500\n    }\n  }\n  \n  componentDidMount() {\n    this.typingTimer = null\n    this.input.current.focus()\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.typingTimer)\n  }\n\n\n  onInputKeyUp() {\n    // Clear timeout\n    if (this.typingTimer) {\n      clearTimeout(this.typingTimer)\n    }\n    \n    this.typingTimer = setTimeout(() => {\n      // console.log(this.input.current.value)  \n      this.setState({submitValue: this.input.current.value})\n      this.props.onChange(this.state.submitValue)\n    }, this.state.doneTypingInterval)\n  }\n\n\n  onInputChange(event) {\n    this.setState({inputValue: event.target.value})\n  }\n\n\n  render() {\n    const t = this.props.t\n    const placeholder = this.props.placeholder\n\n    return(\n        <div className=\"row row gutters-xs\">\n          <div className=\"col\">\n            <div className=\"input-icon\">\n              <span className=\"input-icon-addon\">\n                <Icon name=\"search\" />\n              </span>\n              <input \n                ref={this.input}\n                className=\"form-control\" \n                type=\"text\" \n                placeholder={placeholder} \n                value={this.state.inputValue}\n                onKeyUp={this.onInputKeyUp.bind(this)}\n                onChange={this.onInputChange.bind(this)}\n              />\n            </div>\n          </div>\n          <div className=\"col col-auto\">\n            <Button\n              color=\"secondary\"\n              icon=\"x\"\n              disabled={!(this.state.inputValue)}\n              onClick={() => {\n                this.setState({inputValue: \"\", submitValue: \"\"}, () => {\n                  // setState callback, this makes sure the onChange function is calles with new values\n                  console.log(this.state)\n                  this.props.onChange(this.state.submitValue) \n                })\n              }}\n            >\n            </Button>\n          </div>\n        </div>\n    )\n  }\n}\n\nInputSearch.defaultProps = {\n  onChange: f=>f,\n  onClear: f=>f,\n}\n  \nexport default withTranslation()(InputSearch)","import CSLS from \"../../../tools/cs_local_storage\"\n\nexport function get_list_query_variables() {\n  let isActive = localStorage.getItem(CSLS.RELATIONS_ACCOUNTS_IS_ACTIVE)\n  if (isActive === null) {\n    isActive = true\n  }\n\n  let queryVars = {\n    isActive: (isActive === \"true\") ? true : false,\n    customer: undefined,\n    teacher: undefined,\n    employee: undefined\n  }\n\n  let search = localStorage.getItem(CSLS.RELATIONS_ACCOUNTS_SEARCH)\n  queryVars.searchName = search\n\n  let type_filter = localStorage.getItem(CSLS.RELATIONS_ACCOUNTS_FILTER_TYPE)\n  switch (type_filter) {\n    case \"customer\":\n      queryVars.customer = true\n      break\n    case \"teacher\":\n      queryVars.teacher = true\n      break\n    case \"employee\":\n      queryVars.employee = true\n      break\n  }\n\n\n  console.log(queryVars)\n\n  return queryVars\n}\n\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Page,\n  Form,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport InputSearch from \"../../general/InputSearch\"\nimport RelationsMenu from \"../RelationsMenu\"\n\nimport CSLS from \"../../../tools/cs_local_storage\"\nimport { get_list_query_variables } from \"./tools\"\n\n\nfunction RelationsAccountsBase({t, history, children, refetch}) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"relations.title\")}>\n            <div className=\"page-options d-flex\">\n              <Form.Select\n                className=\"w-auto mr-2\"\n                onChange={(event) => {\n                  console.log(event.target.value)\n                  localStorage.setItem(CSLS.RELATIONS_ACCOUNTS_FILTER_TYPE, event.target.value)\n                  console.log('fire refetch')\n                  console.log(refetch(get_list_query_variables()))\n                }}\n              >\n                <option value=\"\">{t(\"general.all_accounts\")}</option>\n                <option value=\"customer\">{t(\"general.customers\")}</option>\n                <option value=\"teacher\">{t(\"general.teachers\")}</option>\n                <option value=\"employee\">{t(\"general.employees\")}</option>\n              </Form.Select>\n              <InputSearch \n                initialValueKey={CSLS.RELATIONS_ACCOUNTS_SEARCH}\n                placeholder=\"Search...\"\n                onChange={(value) => {\n                  console.log(value)\n                  localStorage.setItem(CSLS.RELATIONS_ACCOUNTS_SEARCH, value)\n                  refetch(get_list_query_variables())\n                }}\n              />\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <HasPermissionWrapper permission=\"add\"\n                                    resource=\"account\">\n                <Button color=\"primary btn-block mb-6\"\n                        onClick={() => history.push(\"/relations/accounts/add\")}>\n                  <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('relations.accounts.add')}\n                </Button>\n              </HasPermissionWrapper>\n              <RelationsMenu activeLink='accounts'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>        \n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(RelationsAccountsBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNTS_QUERY = gql`\nquery Accounts(\n  $after: String, \n  $before: String, \n  $isActive: Boolean!, \n  $searchName: String,\n  $customer: Boolean,\n  $teacher: Boolean,\n  $employee: Boolean\n  \n) {\n  accounts(\n    first: 15, \n    before: $before, \n    after: $after, \n    isActive: $isActive, \n    fullName_Icontains: $searchName,\n    customer: $customer,\n    teacher: $teacher,\n    employee: $employee\n  ) {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n    edges {\n      node {\n        id\n        customer\n        teacher\n        employee\n        firstName\n        lastName\n        fullName\n        email\n        isActive\n        subscriptions(last: 2) {\n          edges {\n            node {\n              organizationSubscription {\n                id\n                name\n              }\n              dateStart\n              dateEnd\n            }\n          }\n        }\n        classpasses(last: 2) {\n          edges {\n            node {\n              id\n              organizationClasspass {\n                id\n                name\n              }\n              dateStart\n              dateEnd\n              classesRemaining\n              classesRemainingDisplay\n              isExpired\n            }\n          }\n        }\n      }\n    }\n  }\n}\n`\n\nexport const GET_ACCOUNT_QUERY = gql`\n  query Account($id: ID!) {\n    account(id:$id) {\n      id\n      customer\n      teacher\n      employee\n      firstName\n      lastName\n      email\n      dateOfBirth\n      gender\n      address\n      postcode\n      city\n      country\n      phone\n      mobile\n      emergency\n      isActive\n      keyNumber\n      organizationDiscovery {\n        id\n      }\n      organizationLanguage {\n        id\n      }\n    }\n    organizationDiscoveries(first: 100){\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n    organizationLanguages(first: 100) {\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const ADD_ACCOUNT = gql`\n  mutation CreateAccount($input:CreateAccountInput!) {\n    createAccount(input: $input) {\n      account {\n        id\n        firstName\n        lastName\n        email\n      }\n    }\n  }\n`\n\nexport const UPDATE_ACCOUNT = gql`\n  mutation UpdateAccount($input:UpdateAccountInput!) {\n    updateAccount(input: $input) {\n      account {\n        id\n        firstName\n        lastName\n        email\n      }\n    }\n  }\n`\n\nexport const UPDATE_ACCOUNT_ACTIVE = gql`\n  mutation UpdateAccountActive($input: UpdateAccountActiveInput!) {\n    updateAccountActive(input: $input) {\n      account {\n        id\n        isActive\n      }\n    }\n  }\n`\n\nexport const DELETE_ACCOUNT = gql`\n  mutation DeleteAccount($input: DeleteAccountInput!) {\n    deleteAccount(input: $input) {\n      ok\n    }\n  }\n`","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\nimport moment from 'moment'\n\nimport {\n  Badge,\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { confirmAlert } from 'react-confirm-alert'\nimport { toast } from 'react-toastify'\n\nimport CSLS from \"../../../tools/cs_local_storage\"\n\nimport ContentCard from \"../../general/ContentCard\"\nimport RelationsAccountsBase from \"./RelationsAccountsBase\"\nimport { GET_ACCOUNTS_QUERY, UPDATE_ACCOUNT_ACTIVE, DELETE_ACCOUNT } from \"./queries\"\nimport { get_list_query_variables } from \"./tools\"\nimport AppSettingsContext from '../../context/AppSettingsContext'\n\n// Set some initial value for isActive, if not found\nif (!localStorage.getItem(CSLS.RELATIONS_ACCOUNTS_IS_ACTIVE)) {\n  localStorage.setItem(CSLS.RELATIONS_ACCOUNTS_IS_ACTIVE, true) \n} \n\nconst confirm_delete = ({t, msgConfirm, msgDescription, msgSuccess, deleteFunction, functionVariables}) => {\n  confirmAlert({\n    customUI: ({ onClose }) => {\n      return (\n        <div className='custom-ui'>\n          <h1>{t('general.confirm_delete')}</h1>\n          {msgConfirm}\n          {msgDescription}\n          <button className=\"btn btn-link pull-right\" onClick={onClose}>{t('general.confirm_delete_no')}</button>\n          <button\n            className=\"btn btn-danger\"\n            onClick={() => {\n              deleteFunction(functionVariables)\n                .then(({ data }) => {\n                  console.log('got data', data);\n                  toast.success(\n                    msgSuccess, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error);\n                })\n              onClose()\n            }}\n          >\n            <Icon name=\"trash-2\" /> {t('general.confirm_delete_yes')}\n          </button>\n        </div>\n      )\n    }\n  })\n}\n\n\nfunction RelationsAccounts({t, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const {loading, error, data, fetchMore, refetch} = useQuery(GET_ACCOUNTS_QUERY, {\n    variables: get_list_query_variables(),\n    fetchPolicy: \"network-only\"\n  })\n  const [updateAccountActive] = useMutation(UPDATE_ACCOUNT_ACTIVE)\n  const [deleteAccount] = useMutation(DELETE_ACCOUNT)\n\n  if (loading || (data && !data.accounts)) return (\n    <RelationsAccountsBase>\n      <ContentCard cardTitle={t('relations.accounts.title')}>\n        <Dimmer active={true}\n                loader={true}>\n        </Dimmer>\n      </ContentCard>\n    </RelationsAccountsBase>\n  )\n  \n  if (error) return (\n    <RelationsAccountsBase>\n      <Container>\n        <ContentCard cardTitle={t('relations.accounts.title')}>\n          <p>{t('relations.accounts.error_loading')}</p>\n        </ContentCard>\n      </Container>\n    </RelationsAccountsBase>\n  )\n\n  const headerOptions = <Card.Options>\n    <Button color={(localStorage.getItem(CSLS.RELATIONS_ACCOUNTS_IS_ACTIVE) === \"true\") ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {\n              localStorage.setItem(CSLS.RELATIONS_ACCOUNTS_IS_ACTIVE, true)\n              refetch(get_list_query_variables())\n            }\n    }>\n      {t('general.active')}\n    </Button>\n    <Button color={(localStorage.getItem(CSLS.RELATIONS_ACCOUNTS_IS_ACTIVE) === \"false\") ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {\n              localStorage.setItem(CSLS.RELATIONS_ACCOUNTS_IS_ACTIVE, false)\n              refetch(get_list_query_variables())\n            }\n    }>\n      {t('general.deleted')}\n    </Button>\n  </Card.Options>\n\n  let accounts = data.accounts\n\n  // Empty list\n  if (!accounts.edges.length) { return (\n    <RelationsAccountsBase refetch={refetch}>\n      <ContentCard cardTitle={t('relations.accounts.title')}\n                    headerContent={headerOptions}>\n        <p>\n          {(localStorage.getItem(CSLS.RELATIONS_ACCOUNTS_IS_ACTIVE) === \"true\") ? t('relations.accounts.empty_list') : t(\"relations.accounts.empty_archive\")}\n        </p>\n      </ContentCard>\n    </RelationsAccountsBase>\n  )}\n\n  // Data\n  return (\n    <RelationsAccountsBase refetch={refetch}>\n      <ContentCard \n        cardTitle={t('relations.accounts.title')}\n        headerContent={headerOptions}\n        pageInfo={data.accounts.pageInfo}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: data.accounts.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.accounts.edges\n              const pageInfo = fetchMoreResult.accounts.pageInfo \n\n              return newEdges.length\n                ? {\n                    // Put the new accounts at the end of the list and update `pageInfo`\n                  accounts: {\n                    __typename: previousResult.accounts.__typename,\n                    edges: [ ...previousResult.accounts.edges, ...newEdges ],\n                    pageInfo\n                  }\n                }\n              : previousResult\n            }\n          })\n        }} \n      >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.products')}</Table.ColHeader>\n              {/* <Table.ColHeader>{t('general.info')}</Table.ColHeader> */}\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {accounts.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    <span className=\"bold\">{node.fullName}</span>\n                    <div className=\"text-muted\">\n                      <a href={`mailto:${node.email}`}>{node.email}</a>\n                    </div>\n                    {(node.customer) ? <span>\n                        <Badge color=\"primary\" className=\"mr-1\">{t(\"general.customer\")}</Badge>\n                      </span> : null}\n                    {(node.teacher) ? <span>\n                        <Badge color=\"info\" className=\"mr-1\">{t(\"general.teacher\")}</Badge>\n                      </span> : null}\n                    {(node.employee) ? <span>\n                        <Badge color=\"secondary\">{t(\"general.employee\")}</Badge>\n                      </span> : null}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {(node.subscriptions) ? \n                      // This is a workaround that reserves the array. Not yet figured out how to get the sorting right on subqueries in the backend\n                      node.subscriptions.edges.slice(0).reverse().map(({ node: subscription }) => (\n                        <div>\n                          <small>\n                          <Icon name=\"edit\" /> {' '}\n                          { subscription.organizationSubscription.name } <br />\n                          <div className=\"text-muted \">\n                            <small>\n                              { moment(subscription.dateStart).format(dateFormat) } \n                              {(subscription.dateEnd) ? \n                                <span> - {moment(subscription.dateEnd).format(dateFormat)}</span>  \n                                : \"\"\n                              }\n                            </small>\n                          </div>\n                          </small>\n                        </div>\n                      )) \n                      : \"\"\n                    }\n                    {(node.classpasses) ? \n                      // This is a workaround that reserves the array. Not yet figured out how to get the sorting right on subqueries in the backend\n                      node.classpasses.edges.slice(0).reverse().map(({ node: classpass }) => (\n                        <div>\n                          <small>\n                          <Icon name=\"credit-card\" /> {' '}\n                          { classpass.organizationClasspass.name } <br />\n                          <div className=\"text-muted \">\n                            <small>\n                              { moment(classpass.dateStart).format(dateFormat) } {\" - \"}\n                              { moment(classpass.dateEnd).format(dateFormat)} { \" | \" }  \n                              { t(\"general.classes_remaining\") }: { classpass.classesRemainingDisplay }\n                            </small>\n                          </div>\n                          </small>\n                        </div>\n                      )) \n                      : \"\"\n                    }\n                  </Table.Col>\n                  {/* <Table.Col key={v4()}>\n                    {(node.customer) ? <span>\n                        <Badge color=\"primary\" className=\"mb-1\">{t(\"general.customer\")}</Badge> <br />\n                      </span> : null}\n                    {(node.teacher) ? <span>\n                        <Badge color=\"info\" className=\"mb-1\">{t(\"general.teacher\")}</Badge> <br />\n                      </span> : null}\n                    {(node.employee) ? <span>\n                        <Badge color=\"secondary\" className=\"mb-1\">{t(\"general.employee\")}</Badge> <br />\n                      </span> : null}\n                  </Table.Col> */}\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    {(!node.isActive) ? \n                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                      <Link to={`/relations/accounts/${node.id}/profile`}>\n                        <Button className='btn-sm' \n                                color=\"secondary\">\n                          {t('general.edit')}\n                        </Button>\n                      </Link>\n                    }\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                      title={t('general.deactivate')} \n                      href=\"\"\n                      onClick={() => {\n                        console.log(\"clicked isActive\")\n                        let id = node.id\n                        let isActive \n                        if (localStorage.getItem(CSLS.RELATIONS_ACCOUNTS_IS_ACTIVE) == \"true\") {\n                          isActive = true\n                        } else {\n                          isActive = false\n                        }\n\n                        updateAccountActive({ variables: {\n                          input: {\n                            id,\n                            isActive: !isActive // invert, as we need the opposite from the list currently displayed\n                          }\n                    }, refetchQueries: [\n                        {query: GET_ACCOUNTS_QUERY, variables: get_list_query_variables()}\n                    ]}).then(({ data }) => {\n                      console.log('got data', data);\n                      toast.success(\n                        (isActive) ? t('relations.accounts.deactivated'): t('relations.accounts.restored'), {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                    }).catch((error) => {\n                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                          position: toast.POSITION.BOTTOM_RIGHT\n                        })\n                      console.log('there was an error sending the query', error);\n                    })\n                    }}>\n                      {\n                        (node.isActive) ?\n                          <Icon prefix=\"fe\" name=\"trash-2\" /> :\n                          t(\"general.restore\")\n                      }\n                    </button>\n                  </Table.Col>\n                  {\n                    (node.isActive) ? '' :\n                      <Table.Col className=\"text-right\" key={v4()}>\n                        <button className=\"icon btn btn-link btn-sm\" \n                          title={t('general.delete')} \n                          href=\"\"\n                          onClick={() => {\n                            confirm_delete({\n                              t: t,\n                              msgConfirm: t(\"relations.accounts.delete_confirm_msg\"),\n                              msgDescription: <p>{node.first_name} {node.last_name}</p>,\n                              msgSuccess: t('relations.accounts.deleted'),\n                              deleteFunction: deleteAccount,\n                              functionVariables: { variables: {\n                                input: {\n                                  id: node.id\n                                }\n                              }, refetchQueries: [\n                                {query: GET_ACCOUNTS_QUERY, variables: get_list_query_variables()}\n                              ]}\n                            })\n                        }}>\n                          <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n                        </button>\n                      </Table.Col>\n                  }\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </RelationsAccountsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(RelationsAccounts))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const ACCOUNT_SCHEMA = Yup.object().shape({\n    firstName: Yup.string()\n      .min(2, t('yup.min_len_2'))\n      .required(t('yup.field_required')),\n    lastName: Yup.string()\n      .min(2, t('yup.min_len_2'))\n      .required(t('yup.field_required')),\n    email: Yup.string()\n      .email(t('yup.email'))\n      .required(t('yup.field_required')),\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid\n} from \"tabler-react\"\n\n\nconst RelationsAccountForm = ({ t, history, isSubmitting, errors, return_url }) => (\n  <FoForm>\n      <Card.Body>\n          <Grid.Row>\n            <Grid.Col>\n              <Form.Group label={t('general.first_name')}>\n                <Field type=\"text\" \n                        name=\"firstName\" \n                        className={(errors.firstName) ? \"form-control is-invalid\" : \"form-control\"} \n                        autoComplete=\"off\" />\n                <ErrorMessage name=\"firstName\" component=\"span\" className=\"invalid-feedback\" />\n              </Form.Group>\n            </Grid.Col>\n            <Grid.Col>\n              <Form.Group label={t('general.last_name')}>\n                <Field type=\"text\" \n                        name=\"lastName\" \n                        className={(errors.lastName) ? \"form-control is-invalid\" : \"form-control\"} \n                        autoComplete=\"off\" />\n                <ErrorMessage name=\"lastName\" component=\"span\" className=\"invalid-feedback\" />\n              </Form.Group>\n            </Grid.Col>\n          </Grid.Row>\n          <Form.Group label={t('general.email')}>\n            <Field type=\"text\" \n                    name=\"email\" \n                    className={(errors.email) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"email\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Button color=\"link\" onClick={() => history.push(return_url)}>\n              {t('general.cancel')}\n          </Button>\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(RelationsAccountForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNTS_QUERY, ADD_ACCOUNT } from './queries'\nimport { ACCOUNT_SCHEMA } from './yupSchema'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport { get_list_query_variables } from \"./tools\"\nimport RelationsAccountForm from \"./RelationsAccountForm\"\nimport RelationsMenu from '../RelationsMenu'\n\nconst returnUrl = \"/relations/accounts\"\n\nfunction RelationsAccountAdd({t, history}) {\n  const [addAccount] = useMutation(ADD_ACCOUNT)\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('relations.title')} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n            <Card>\n              <Card.Header>\n                <Card.Title>{t('relations.accounts.title_add')}</Card.Title>\n              </Card.Header>\n                <Formik\n                    initialValues={{ name: '', code: '' }}\n                    validationSchema={ACCOUNT_SCHEMA}\n                    onSubmit={(values, { setSubmitting }) => {\n                        addAccount({ variables: {\n                          input: {\n                            firstName: values.firstName,\n                            lastName: values.lastName,\n                            email: values.email\n                          }\n                        }, refetchQueries: [\n                            {query: GET_ACCOUNTS_QUERY, variables: get_list_query_variables()}\n                        ]})\n                        .then(({ data }) => {\n                            console.log('got data', data);\n                            const accountId = data.createAccount.account.id\n                            history.push(`/relations/accounts/${accountId}/profile`)\n                            toast.success((t('relations.accounts.toast_add_success')), {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                          }).catch((error) => {\n                            toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                            console.log('there was an error sending the query', error)\n                            setSubmitting(false)\n                          })\n                    }}\n                    >\n                    {({ isSubmitting, errors }) => (\n                        <RelationsAccountForm\n                          isSubmitting={isSubmitting}\n                          errors={errors}\n                          returnUrl={returnUrl}\n                        />\n                    )}\n                </Formik>\n            </Card>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <HasPermissionWrapper permission=\"add\"\n                                    resource=\"account\">\n                <Button color=\"primary btn-block mb-6\"\n                        onClick={() => history.push(returnUrl)}>\n                  <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                </Button>\n              </HasPermissionWrapper>\n              <RelationsMenu activeLink='accounts'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(RelationsAccountAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\n\nimport { GET_ACCOUNT_QUERY } from './queries'\n\nimport {\n  List\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\n\nlet profile_active\nlet memberships_active\nlet subscriptions_active\nlet classpasses_active\nlet classes_active\nlet tickets_active\nlet teacher_profile_active\nlet orders_active\nlet invoices_active\nlet bank_account_active\nlet notes_active\nlet finance_payment_batch_category_item_active\nlet accepted_documents_active\n\nfunction ProfileMenu({t, accountId, activeLink}) {\n    const {loading, error, data} = useQuery(GET_ACCOUNT_QUERY, {\n        variables: {id: accountId}\n    })\n\n    if (loading) return <p>{t('general.loading_with_dots')}</p>\n    // Error\n    if (error) {\n      console.log(error)\n      return <p>{t('general.error_sad_smiley')}</p>\n    }\n    const account = data.account\n    console.log('account in profile menu')\n    console.log(account)\n\n    return (\n      <List.Group transparent={true}>\n        {(activeLink === 'profile') ? profile_active = true: profile_active = false}\n        {(activeLink === 'memberships') ? memberships_active = true: memberships_active = false}\n        {(activeLink === 'subscriptions') ? subscriptions_active = true: subscriptions_active = false}\n        {(activeLink === 'classpasses') ? classpasses_active = true: classpasses_active = false}\n        {(activeLink === 'classes') ? classes_active = true: classes_active = false}\n        {(activeLink === 'tickets') ? tickets_active = true: tickets_active = false}\n        {(activeLink === 'teacher_profile') ? teacher_profile_active = true: teacher_profile_active = false}\n        {(activeLink === 'orders') ? orders_active = true: orders_active = false}\n        {(activeLink === 'invoices') ? invoices_active = true: invoices_active = false}\n        {(activeLink === 'bank_account') ? bank_account_active = true: bank_account_active = false}\n        {(activeLink === 'notes') ? notes_active = true: notes_active = false}\n        {(activeLink === 'finance_payment_batch_category_item') ? \n            finance_payment_batch_category_item_active = true : \n            finance_payment_batch_category_item_active = false }\n        {(activeLink === 'accepted_documents') ? accepted_documents_active = true: accepted_documents_active = false}\n        \n\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to={\"#/relations/accounts/\" + accountId + \"/profile\"}\n            icon=\"user\"\n            active={profile_active}\n        >\n            {t('relations.accounts.profile')}\n        </List.GroupItem>\n        {/* <HasPermissionWrapper \n            permission=\"view\"\n            resource=\"accountmembership\">\n            <List.GroupItem\n                key={v4()}\n                className=\"d-flex align-items-center\"\n                to={\"#/relations/accounts/\" + accountId + \"/memberships\"}\n                icon=\"clipboard\"\n                active={memberships_active}\n                >\n            {t('relations.account.memberships.title')}\n            </List.GroupItem>\n        </HasPermissionWrapper> */}\n        <HasPermissionWrapper \n            permission=\"view\"\n            resource=\"accountsubscription\">\n            <List.GroupItem\n                key={v4()}\n                className=\"d-flex align-items-center\"\n                to={\"#/relations/accounts/\" + accountId + \"/subscriptions\"}\n                icon=\"edit\"\n                active={subscriptions_active}\n                >\n            {t('relations.account.subscriptions.title')}\n            </List.GroupItem>\n        </HasPermissionWrapper>\n        <HasPermissionWrapper \n            permission=\"view\"\n            resource=\"accountclasspass\">\n            <List.GroupItem\n                key={v4()}\n                className=\"d-flex align-items-center\"\n                to={\"#/relations/accounts/\" + accountId + \"/classpasses\"}\n                icon=\"credit-card\"\n                active={classpasses_active}\n                >\n            {t('relations.account.classpasses.title')}\n            </List.GroupItem>\n        </HasPermissionWrapper>\n        <HasPermissionWrapper \n            permission=\"view\"\n            resource=\"scheduleitemattendance\">\n            <List.GroupItem\n                key={v4()}\n                className=\"d-flex align-items-center\"\n                to={\"#/relations/accounts/\" + accountId + \"/classes\"}\n                icon=\"book\"\n                active={classes_active}\n                >\n            {t('relations.account.classes.title')}\n            </List.GroupItem>\n        </HasPermissionWrapper>\n        <HasPermissionWrapper \n            permission=\"view\"\n            resource=\"accountscheduleeventticket\">\n            <List.GroupItem\n                key={v4()}\n                className=\"d-flex align-items-center\"\n                to={\"#/relations/accounts/\" + accountId + \"/event_tickets\"}\n                icon=\"clipboard\"\n                active={tickets_active}\n                >\n            {t('relations.account.event_tickets.title')}\n            </List.GroupItem>\n        </HasPermissionWrapper>\n        <HasPermissionWrapper \n            permission=\"view\"\n            resource=\"financeorder\">\n            <List.GroupItem\n                key={v4()}\n                className=\"d-flex align-items-center\"\n                to={\"#/relations/accounts/\" + accountId + \"/orders\"}\n                icon=\"file-plus\"\n                active={orders_active}\n                >\n            {t('relations.account.orders.title')}\n            </List.GroupItem>\n        </HasPermissionWrapper>\n        <HasPermissionWrapper \n            permission=\"view\"\n            resource=\"financeinvoice\">\n            <List.GroupItem\n                key={v4()}\n                className=\"d-flex align-items-center\"\n                to={\"#/relations/accounts/\" + accountId + \"/invoices\"}\n                icon=\"file-text\"\n                active={invoices_active}\n                >\n            {t('relations.account.invoices.title')}\n            </List.GroupItem>\n        </HasPermissionWrapper>\n        <HasPermissionWrapper \n            permission=\"view\"\n            resource=\"accountbankaccount\">\n            <List.GroupItem\n                key={v4()}\n                className=\"d-flex align-items-center\"\n                to={\"#/relations/accounts/\" + accountId + \"/bank_accounts\"}\n                icon=\"briefcase\"\n                active={bank_account_active}\n                >\n            {t('relations.account.bank_accounts.title')}\n            </List.GroupItem>\n        </HasPermissionWrapper>\n        <HasPermissionWrapper \n            permission=\"view\"\n            resource=\"accountnote\">\n            <List.GroupItem\n                key={v4()}\n                className=\"d-flex align-items-center\"\n                to={\"#/relations/accounts/\" + accountId + \"/notes\"}\n                icon=\"message-square\"\n                active={notes_active}\n                >\n            {t('relations.account.notes.title')}\n            </List.GroupItem>\n        </HasPermissionWrapper>\n        <HasPermissionWrapper \n            permission=\"view\"\n            resource=\"accountfinancepaymentbatchcategoryitem\">\n            <List.GroupItem\n                key={v4()}\n                className=\"d-flex align-items-center\"\n                to={\"#/relations/accounts/\" + accountId + \"/finance_payment_batch_category_items\"}\n                icon=\"list\"\n                active={finance_payment_batch_category_item_active}\n                >\n            {t('relations.account.finance_payment_batch_category_items.title')}\n            </List.GroupItem>\n        </HasPermissionWrapper>\n        { (account.teacher) ?\n            <HasPermissionWrapper \n                permission=\"view\"\n                resource=\"accountteacherprofile\">\n                <List.GroupItem\n                    key={v4()}\n                    className=\"d-flex align-items-center\"\n                    to={\"#/relations/accounts/\" + accountId + \"/teacher_profile\"}\n                    icon=\"paperclip\"\n                    active={teacher_profile_active}\n                    >\n                {t('relations.account.teacher_profile.title')}\n                </List.GroupItem>\n            </HasPermissionWrapper>\n        : \"\" }\n        <HasPermissionWrapper \n            permission=\"view\"\n            resource=\"accountaccepteddocument\">\n            <List.GroupItem\n                key={v4()}\n                className=\"d-flex align-items-center\"\n                to={\"#/relations/accounts/\" + accountId + \"/accepted_documents\"}\n                icon=\"check-square\"\n                active={accepted_documents_active}\n                >\n            {t('relations.account.accepted_documents.title')}\n            </List.GroupItem>\n        </HasPermissionWrapper>\n    </List.Group>\n  )\n}\n\nexport default withTranslation()(ProfileMenu)","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\n\nimport {\n  Avatar,\n  Card,\n  Icon,\n  List,\n  Media,\n  SocialNetworksList,\n  Tooltip,\n} from \"tabler-react\"\n\nconst ProfileCardSmall = ({ t, value, user, avatarSize='md' }) => (\n  <Card>\n    <Card.Body>\n      {(!user) ? \"\" : \n        <Media>\n          {(user.imageURL) ? \n            <Avatar size={avatarSize + \" mr-5\"} imageURL=\"avatarImageURL\" /> :\n            <Avatar size={avatarSize + \" mr-5\"} icon=\"user\" />\n          }\n          <Media.Body>\n            <h4 className=\"mb-2\">{user.firstName + \" \" + user.lastName}</h4>\n            <div className=\"text-muted mb-0\">\n              <SocialNetworksList className=\"mb-0 mt-2\">\n\n                {\n                  (user.phone) ? \n                    <List.Item inline>\n                      <Tooltip content={user.phone} placement=\"top\">\n                        <span>\n                          <Icon prefix=\"fe\" name=\"phone\" />\n                        </span>\n                      </Tooltip>\n                    </List.Item>\n                  // No phone number found\n                  : \"\"\n                }\n                {\n                  (user.mobile) ?\n                    <List.Item inline>\n                      <Tooltip content={user.mobile} placement=\"top\">\n                        <span>\n                          <Icon prefix=\"fe\" name=\"smartphone\" />\n                        </span>\n                      </Tooltip>\n                    </List.Item> \n                    // No mobile number found\n                    : \"\"\n                }\n\n                <List.Item inline>\n                  <Tooltip content={user.email} placement=\"top\">\n                    <a href={\"mailto:\" + user.email}>\n                      <Icon prefix=\"fe\" name=\"mail\" />\n                    </a>\n                  </Tooltip>\n                </List.Item>\n\n              </SocialNetworksList>\n              {/* items={[\n                <a href={\"mailto:\" + user.email}\n                  title={user.email}>\n                  <Icon prefix=\"fe\" name=\"mail\" />\n                </a>,\n                <span title=\"Phone number here\">\n                  <Icon prefix=\"fe\" name=\"phone\" />\n                </span>,\n                <span title=\"Phone number here\">\n                  <Icon prefix=\"fe\" name=\"mobile\" />\n                </span>,\n                \n              ]}\n            /> */}\n              {/* <Text.Small>\n                <Icon name=\"mail\" />  <a href={\"mailto:\" + user.email}>{user.email}</a> <br/>\n                <Icon name=\"phone\" /> user phone nr here... <br />\n                <Icon name=\"smartphone\" /> user mobile nr here...\n              </Text.Small> */}\n            </div>\n            {/* <SocialNetworksList\n              items={[\n                <a href=\"http://www.twitter.com\">\n                  <Icon prefix=\"fa\" name=\"twitter\" />\n                </a>,\n                <a href=\"http://www.facebook.com\">\n                  <Icon prefix=\"fa\" name=\"facebook\" />\n                </a>,\n              ]}\n            /> */}\n          </Media.Body>\n        </Media>\n      }\n    </Card.Body>\n  </Card>\n)\n\nexport default withTranslation()(ProfileCardSmall)","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Icon,\n} from \"tabler-react\";\n\nconst RelationsAccountsBack = ({ t }) => (\n  <div className=\"page-options d-flex\">\n    <Link to=\"/relations/accounts\" \n          className='btn btn-outline-secondary btn-sm'>\n        <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back_to')} {t('relations.accounts.title')}\n    </Link>\n  </div>\n)\n\nexport default withTranslation()(RelationsAccountsBack)","import { t } from 'i18next'\n\nconst ISO_COUNTRY_CODES = [{\"Name\":t(\"countries.Afghanistan\"),\"Code\":\"AF\"},{\"Name\":t(\"countries.Åland_Islands\"),\"Code\":\"AX\"},{\"Name\":t(\"countries.Albania\"),\"Code\":\"AL\"},{\"Name\":t(\"countries.Algeria\"),\"Code\":\"DZ\"},{\"Name\":t(\"countries.American_Samoa\"),\"Code\":\"AS\"},{\"Name\":t(\"countries.Andorra\"),\"Code\":\"AD\"},{\"Name\":t(\"countries.Angola\"),\"Code\":\"AO\"},{\"Name\":t(\"countries.Anguilla\"),\"Code\":\"AI\"},{\"Name\":t(\"countries.Antarctica\"),\"Code\":\"AQ\"},{\"Name\":t(\"countries.Antigua_and_Barbuda\"),\"Code\":\"AG\"},{\"Name\":t(\"countries.Argentina\"),\"Code\":\"AR\"},{\"Name\":t(\"countries.Armenia\"),\"Code\":\"AM\"},{\"Name\":t(\"countries.Aruba\"),\"Code\":\"AW\"},{\"Name\":t(\"countries.Australia\"),\"Code\":\"AU\"},{\"Name\":t(\"countries.Austria\"),\"Code\":\"AT\"},{\"Name\":t(\"countries.Azerbaijan\"),\"Code\":\"AZ\"},{\"Name\":t(\"countries.Bahamas\"),\"Code\":\"BS\"},{\"Name\":t(\"countries.Bahrain\"),\"Code\":\"BH\"},{\"Name\":t(\"countries.Bangladesh\"),\"Code\":\"BD\"},{\"Name\":t(\"countries.Barbados\"),\"Code\":\"BB\"},{\"Name\":t(\"countries.Belarus\"),\"Code\":\"BY\"},{\"Name\":t(\"countries.Belgium\"),\"Code\":\"BE\"},{\"Name\":t(\"countries.Belize\"),\"Code\":\"BZ\"},{\"Name\":t(\"countries.Benin\"),\"Code\":\"BJ\"},{\"Name\":t(\"countries.Bermuda\"),\"Code\":\"BM\"},{\"Name\":t(\"countries.Bhutan\"),\"Code\":\"BT\"},{\"Name\":t(\"countries.Bolivia,_Plurinational_State_of\"),\"Code\":\"BO\"},{\"Name\":t(\"countries.Bonaire,_Sint_Eustatius_and_Saba\"),\"Code\":\"BQ\"},{\"Name\":t(\"countries.Bosnia_and_Herzegovina\"),\"Code\":\"BA\"},{\"Name\":t(\"countries.Botswana\"),\"Code\":\"BW\"},{\"Name\":t(\"countries.Bouvet_Island\"),\"Code\":\"BV\"},{\"Name\":t(\"countries.Brazil\"),\"Code\":\"BR\"},{\"Name\":t(\"countries.British_Indian_Ocean_Territory\"),\"Code\":\"IO\"},{\"Name\":t(\"countries.Brunei_Darussalam\"),\"Code\":\"BN\"},{\"Name\":t(\"countries.Bulgaria\"),\"Code\":\"BG\"},{\"Name\":t(\"countries.Burkina_Faso\"),\"Code\":\"BF\"},{\"Name\":t(\"countries.Burundi\"),\"Code\":\"BI\"},{\"Name\":t(\"countries.Cambodia\"),\"Code\":\"KH\"},{\"Name\":t(\"countries.Cameroon\"),\"Code\":\"CM\"},{\"Name\":t(\"countries.Canada\"),\"Code\":\"CA\"},{\"Name\":t(\"countries.Cape_Verde\"),\"Code\":\"CV\"},{\"Name\":t(\"countries.Cayman_Islands\"),\"Code\":\"KY\"},{\"Name\":t(\"countries.Central_African_Republic\"),\"Code\":\"CF\"},{\"Name\":t(\"countries.Chad\"),\"Code\":\"TD\"},{\"Name\":t(\"countries.Chile\"),\"Code\":\"CL\"},{\"Name\":t(\"countries.China\"),\"Code\":\"CN\"},{\"Name\":t(\"countries.Christmas_Island\"),\"Code\":\"CX\"},{\"Name\":t(\"countries.Cocos_(Keeling)_Islands\"),\"Code\":\"CC\"},{\"Name\":t(\"countries.Colombia\"),\"Code\":\"CO\"},{\"Name\":t(\"countries.Comoros\"),\"Code\":\"KM\"},{\"Name\":t(\"countries.Congo\"),\"Code\":\"CG\"},{\"Name\":t(\"countries.Congo,_the_Democratic_Republic_of_the\"),\"Code\":\"CD\"},{\"Name\":t(\"countries.Cook_Islands\"),\"Code\":\"CK\"},{\"Name\":t(\"countries.Costa_Rica\"),\"Code\":\"CR\"},{\"Name\":t(\"countries.Côte_d'Ivoire\"),\"Code\":\"CI\"},{\"Name\":t(\"countries.Croatia\"),\"Code\":\"HR\"},{\"Name\":t(\"countries.Cuba\"),\"Code\":\"CU\"},{\"Name\":t(\"countries.Curaçao\"),\"Code\":\"CW\"},{\"Name\":t(\"countries.Cyprus\"),\"Code\":\"CY\"},{\"Name\":t(\"countries.Czech_Republic\"),\"Code\":\"CZ\"},{\"Name\":t(\"countries.Denmark\"),\"Code\":\"DK\"},{\"Name\":t(\"countries.Djibouti\"),\"Code\":\"DJ\"},{\"Name\":t(\"countries.Dominica\"),\"Code\":\"DM\"},{\"Name\":t(\"countries.Dominican_Republic\"),\"Code\":\"DO\"},{\"Name\":t(\"countries.Ecuador\"),\"Code\":\"EC\"},{\"Name\":t(\"countries.Egypt\"),\"Code\":\"EG\"},{\"Name\":t(\"countries.El_Salvador\"),\"Code\":\"SV\"},{\"Name\":t(\"countries.Equatorial_Guinea\"),\"Code\":\"GQ\"},{\"Name\":t(\"countries.Eritrea\"),\"Code\":\"ER\"},{\"Name\":t(\"countries.Estonia\"),\"Code\":\"EE\"},{\"Name\":t(\"countries.Ethiopia\"),\"Code\":\"ET\"},{\"Name\":t(\"countries.Falkland_Islands_(Malvinas)\"),\"Code\":\"FK\"},{\"Name\":t(\"countries.Faroe_Islands\"),\"Code\":\"FO\"},{\"Name\":t(\"countries.Fiji\"),\"Code\":\"FJ\"},{\"Name\":t(\"countries.Finland\"),\"Code\":\"FI\"},{\"Name\":t(\"countries.France\"),\"Code\":\"FR\"},{\"Name\":t(\"countries.French_Guiana\"),\"Code\":\"GF\"},{\"Name\":t(\"countries.French_Polynesia\"),\"Code\":\"PF\"},{\"Name\":t(\"countries.French_Southern_Territories\"),\"Code\":\"TF\"},{\"Name\":t(\"countries.Gabon\"),\"Code\":\"GA\"},{\"Name\":t(\"countries.Gambia\"),\"Code\":\"GM\"},{\"Name\":t(\"countries.Georgia\"),\"Code\":\"GE\"},{\"Name\":t(\"countries.Germany\"),\"Code\":\"DE\"},{\"Name\":t(\"countries.Ghana\"),\"Code\":\"GH\"},{\"Name\":t(\"countries.Gibraltar\"),\"Code\":\"GI\"},{\"Name\":t(\"countries.Greece\"),\"Code\":\"GR\"},{\"Name\":t(\"countries.Greenland\"),\"Code\":\"GL\"},{\"Name\":t(\"countries.Grenada\"),\"Code\":\"GD\"},{\"Name\":t(\"countries.Guadeloupe\"),\"Code\":\"GP\"},{\"Name\":t(\"countries.Guam\"),\"Code\":\"GU\"},{\"Name\":t(\"countries.Guatemala\"),\"Code\":\"GT\"},{\"Name\":t(\"countries.Guernsey\"),\"Code\":\"GG\"},{\"Name\":t(\"countries.Guinea\"),\"Code\":\"GN\"},{\"Name\":t(\"countries.Guinea-Bissau\"),\"Code\":\"GW\"},{\"Name\":t(\"countries.Guyana\"),\"Code\":\"GY\"},{\"Name\":t(\"countries.Haiti\"),\"Code\":\"HT\"},{\"Name\":t(\"countries.Heard_Island_and_McDonald_Islands\"),\"Code\":\"HM\"},{\"Name\":t(\"countries.Holy_See_(Vatican_City_State)\"),\"Code\":\"VA\"},{\"Name\":t(\"countries.Honduras\"),\"Code\":\"HN\"},{\"Name\":t(\"countries.Hong_Kong\"),\"Code\":\"HK\"},{\"Name\":t(\"countries.Hungary\"),\"Code\":\"HU\"},{\"Name\":t(\"countries.Iceland\"),\"Code\":\"IS\"},{\"Name\":t(\"countries.India\"),\"Code\":\"IN\"},{\"Name\":t(\"countries.Indonesia\"),\"Code\":\"ID\"},{\"Name\":t(\"countries.Iran,_Islamic_Republic_of\"),\"Code\":\"IR\"},{\"Name\":t(\"countries.Iraq\"),\"Code\":\"IQ\"},{\"Name\":t(\"countries.Ireland\"),\"Code\":\"IE\"},{\"Name\":t(\"countries.Isle_of_Man\"),\"Code\":\"IM\"},{\"Name\":t(\"countries.Israel\"),\"Code\":\"IL\"},{\"Name\":t(\"countries.Italy\"),\"Code\":\"IT\"},{\"Name\":t(\"countries.Jamaica\"),\"Code\":\"JM\"},{\"Name\":t(\"countries.Japan\"),\"Code\":\"JP\"},{\"Name\":t(\"countries.Jersey\"),\"Code\":\"JE\"},{\"Name\":t(\"countries.Jordan\"),\"Code\":\"JO\"},{\"Name\":t(\"countries.Kazakhstan\"),\"Code\":\"KZ\"},{\"Name\":t(\"countries.Kenya\"),\"Code\":\"KE\"},{\"Name\":t(\"countries.Kiribati\"),\"Code\":\"KI\"},{\"Name\":t(\"countries.Korea,_Democratic_People's_Republic_of\"),\"Code\":\"KP\"},{\"Name\":t(\"countries.Korea,_Republic_of\"),\"Code\":\"KR\"},{\"Name\":t(\"countries.Kuwait\"),\"Code\":\"KW\"},{\"Name\":t(\"countries.Kyrgyzstan\"),\"Code\":\"KG\"},{\"Name\":t(\"countries.Lao_People's_Democratic_Republic\"),\"Code\":\"LA\"},{\"Name\":t(\"countries.Latvia\"),\"Code\":\"LV\"},{\"Name\":t(\"countries.Lebanon\"),\"Code\":\"LB\"},{\"Name\":t(\"countries.Lesotho\"),\"Code\":\"LS\"},{\"Name\":t(\"countries.Liberia\"),\"Code\":\"LR\"},{\"Name\":t(\"countries.Libya\"),\"Code\":\"LY\"},{\"Name\":t(\"countries.Liechtenstein\"),\"Code\":\"LI\"},{\"Name\":t(\"countries.Lithuania\"),\"Code\":\"LT\"},{\"Name\":t(\"countries.Luxembourg\"),\"Code\":\"LU\"},{\"Name\":t(\"countries.Macao\"),\"Code\":\"MO\"},{\"Name\":t(\"countries.Macedonia,_the_Former_Yugoslav_Republic_of\"),\"Code\":\"MK\"},{\"Name\":t(\"countries.Madagascar\"),\"Code\":\"MG\"},{\"Name\":t(\"countries.Malawi\"),\"Code\":\"MW\"},{\"Name\":t(\"countries.Malaysia\"),\"Code\":\"MY\"},{\"Name\":t(\"countries.Maldives\"),\"Code\":\"MV\"},{\"Name\":t(\"countries.Mali\"),\"Code\":\"ML\"},{\"Name\":t(\"countries.Malta\"),\"Code\":\"MT\"},{\"Name\":t(\"countries.Marshall_Islands\"),\"Code\":\"MH\"},{\"Name\":t(\"countries.Martinique\"),\"Code\":\"MQ\"},{\"Name\":t(\"countries.Mauritania\"),\"Code\":\"MR\"},{\"Name\":t(\"countries.Mauritius\"),\"Code\":\"MU\"},{\"Name\":t(\"countries.Mayotte\"),\"Code\":\"YT\"},{\"Name\":t(\"countries.Mexico\"),\"Code\":\"MX\"},{\"Name\":t(\"countries.Micronesia,_Federated_States_of\"),\"Code\":\"FM\"},{\"Name\":t(\"countries.Moldova,_Republic_of\"),\"Code\":\"MD\"},{\"Name\":t(\"countries.Monaco\"),\"Code\":\"MC\"},{\"Name\":t(\"countries.Mongolia\"),\"Code\":\"MN\"},{\"Name\":t(\"countries.Montenegro\"),\"Code\":\"ME\"},{\"Name\":t(\"countries.Montserrat\"),\"Code\":\"MS\"},{\"Name\":t(\"countries.Morocco\"),\"Code\":\"MA\"},{\"Name\":t(\"countries.Mozambique\"),\"Code\":\"MZ\"},{\"Name\":t(\"countries.Myanmar\"),\"Code\":\"MM\"},{\"Name\":t(\"countries.Namibia\"),\"Code\":\"NA\"},{\"Name\":t(\"countries.Nauru\"),\"Code\":\"NR\"},{\"Name\":t(\"countries.Nepal\"),\"Code\":\"NP\"},{\"Name\":t(\"countries.Netherlands\"),\"Code\":\"NL\"},{\"Name\":t(\"countries.New_Caledonia\"),\"Code\":\"NC\"},{\"Name\":t(\"countries.New_Zealand\"),\"Code\":\"NZ\"},{\"Name\":t(\"countries.Nicaragua\"),\"Code\":\"NI\"},{\"Name\":t(\"countries.Niger\"),\"Code\":\"NE\"},{\"Name\":t(\"countries.Nigeria\"),\"Code\":\"NG\"},{\"Name\":t(\"countries.Niue\"),\"Code\":\"NU\"},{\"Name\":t(\"countries.Norfolk_Island\"),\"Code\":\"NF\"},{\"Name\":t(\"countries.Northern_Mariana_Islands\"),\"Code\":\"MP\"},{\"Name\":t(\"countries.Norway\"),\"Code\":\"NO\"},{\"Name\":t(\"countries.Oman\"),\"Code\":\"OM\"},{\"Name\":t(\"countries.Pakistan\"),\"Code\":\"PK\"},{\"Name\":t(\"countries.Palau\"),\"Code\":\"PW\"},{\"Name\":t(\"countries.Palestine,_State_of\"),\"Code\":\"PS\"},{\"Name\":t(\"countries.Panama\"),\"Code\":\"PA\"},{\"Name\":t(\"countries.Papua_New_Guinea\"),\"Code\":\"PG\"},{\"Name\":t(\"countries.Paraguay\"),\"Code\":\"PY\"},{\"Name\":t(\"countries.Peru\"),\"Code\":\"PE\"},{\"Name\":t(\"countries.Philippines\"),\"Code\":\"PH\"},{\"Name\":t(\"countries.Pitcairn\"),\"Code\":\"PN\"},{\"Name\":t(\"countries.Poland\"),\"Code\":\"PL\"},{\"Name\":t(\"countries.Portugal\"),\"Code\":\"PT\"},{\"Name\":t(\"countries.Puerto_Rico\"),\"Code\":\"PR\"},{\"Name\":t(\"countries.Qatar\"),\"Code\":\"QA\"},{\"Name\":t(\"countries.Réunion\"),\"Code\":\"RE\"},{\"Name\":t(\"countries.Romania\"),\"Code\":\"RO\"},{\"Name\":t(\"countries.Russian_Federation\"),\"Code\":\"RU\"},{\"Name\":t(\"countries.Rwanda\"),\"Code\":\"RW\"},{\"Name\":t(\"countries.Saint_Barthélemy\"),\"Code\":\"BL\"},{\"Name\":t(\"countries.Saint_Helena,_Ascension_and_Tristan_da_Cunha\"),\"Code\":\"SH\"},{\"Name\":t(\"countries.Saint_Kitts_and_Nevis\"),\"Code\":\"KN\"},{\"Name\":t(\"countries.Saint_Lucia\"),\"Code\":\"LC\"},{\"Name\":t(\"countries.Saint_Martin_(French_part)\"),\"Code\":\"MF\"},{\"Name\":t(\"countries.Saint_Pierre_and_Miquelon\"),\"Code\":\"PM\"},{\"Name\":t(\"countries.Saint_Vincent_and_the_Grenadines\"),\"Code\":\"VC\"},{\"Name\":t(\"countries.Samoa\"),\"Code\":\"WS\"},{\"Name\":t(\"countries.San_Marino\"),\"Code\":\"SM\"},{\"Name\":t(\"countries.Sao_Tome_and_Principe\"),\"Code\":\"ST\"},{\"Name\":t(\"countries.Saudi_Arabia\"),\"Code\":\"SA\"},{\"Name\":t(\"countries.Senegal\"),\"Code\":\"SN\"},{\"Name\":t(\"countries.Serbia\"),\"Code\":\"RS\"},{\"Name\":t(\"countries.Seychelles\"),\"Code\":\"SC\"},{\"Name\":t(\"countries.Sierra_Leone\"),\"Code\":\"SL\"},{\"Name\":t(\"countries.Singapore\"),\"Code\":\"SG\"},{\"Name\":t(\"countries.Sint_Maarten_(Dutch_part)\"),\"Code\":\"SX\"},{\"Name\":t(\"countries.Slovakia\"),\"Code\":\"SK\"},{\"Name\":t(\"countries.Slovenia\"),\"Code\":\"SI\"},{\"Name\":t(\"countries.Solomon_Islands\"),\"Code\":\"SB\"},{\"Name\":t(\"countries.Somalia\"),\"Code\":\"SO\"},{\"Name\":t(\"countries.South_Africa\"),\"Code\":\"ZA\"},{\"Name\":t(\"countries.South_Georgia_and_the_South_Sandwich_Islands\"),\"Code\":\"GS\"},{\"Name\":t(\"countries.South_Sudan\"),\"Code\":\"SS\"},{\"Name\":t(\"countries.Spain\"),\"Code\":\"ES\"},{\"Name\":t(\"countries.Sri_Lanka\"),\"Code\":\"LK\"},{\"Name\":t(\"countries.Sudan\"),\"Code\":\"SD\"},{\"Name\":t(\"countries.Suriname\"),\"Code\":\"SR\"},{\"Name\":t(\"countries.Svalbard_and_Jan_Mayen\"),\"Code\":\"SJ\"},{\"Name\":t(\"countries.Swaziland\"),\"Code\":\"SZ\"},{\"Name\":t(\"countries.Sweden\"),\"Code\":\"SE\"},{\"Name\":t(\"countries.Switzerland\"),\"Code\":\"CH\"},{\"Name\":t(\"countries.Syrian_Arab_Republic\"),\"Code\":\"SY\"},{\"Name\":t(\"countries.Taiwan,_Province_of_China\"),\"Code\":\"TW\"},{\"Name\":t(\"countries.Tajikistan\"),\"Code\":\"TJ\"},{\"Name\":t(\"countries.Tanzania,_United_Republic_of\"),\"Code\":\"TZ\"},{\"Name\":t(\"countries.Thailand\"),\"Code\":\"TH\"},{\"Name\":t(\"countries.Timor-Leste\"),\"Code\":\"TL\"},{\"Name\":t(\"countries.Togo\"),\"Code\":\"TG\"},{\"Name\":t(\"countries.Tokelau\"),\"Code\":\"TK\"},{\"Name\":t(\"countries.Tonga\"),\"Code\":\"TO\"},{\"Name\":t(\"countries.Trinidad_and_Tobago\"),\"Code\":\"TT\"},{\"Name\":t(\"countries.Tunisia\"),\"Code\":\"TN\"},{\"Name\":t(\"countries.Turkey\"),\"Code\":\"TR\"},{\"Name\":t(\"countries.Turkmenistan\"),\"Code\":\"TM\"},{\"Name\":t(\"countries.Turks_and_Caicos_Islands\"),\"Code\":\"TC\"},{\"Name\":t(\"countries.Tuvalu\"),\"Code\":\"TV\"},{\"Name\":t(\"countries.Uganda\"),\"Code\":\"UG\"},{\"Name\":t(\"countries.Ukraine\"),\"Code\":\"UA\"},{\"Name\":t(\"countries.United_Arab_Emirates\"),\"Code\":\"AE\"},{\"Name\":t(\"countries.United_Kingdom\"),\"Code\":\"GB\"},{\"Name\":t(\"countries.United_States\"),\"Code\":\"US\"},{\"Name\":t(\"countries.United_States_Minor_Outlying_Islands\"),\"Code\":\"UM\"},{\"Name\":t(\"countries.Uruguay\"),\"Code\":\"UY\"},{\"Name\":t(\"countries.Uzbekistan\"),\"Code\":\"UZ\"},{\"Name\":t(\"countries.Vanuatu\"),\"Code\":\"VU\"},{\"Name\":t(\"countries.Venezuela,_Bolivarian_Republic_of\"),\"Code\":\"VE\"},{\"Name\":t(\"countries.Viet_Nam\"),\"Code\":\"VN\"},{\"Name\":t(\"countries.Virgin_Islands_British\"),\"Code\":\"VG\"},{\"Name\":t(\"countries.Virgin_Islands_US\"),\"Code\":\"VI\"},{\"Name\":t(\"countries.Wallis_and_Futuna\"),\"Code\":\"WF\"},{\"Name\":t(\"countries.Western_Sahara\"),\"Code\":\"EH\"},{\"Name\":t(\"countries.Yemen\"),\"Code\":\"YE\"},{\"Name\":t(\"countries.Zambia\"),\"Code\":\"ZM\"},{\"Name\":t(\"countries.Zimbabwe\"),\"Code\":\"ZW\"}]\n\nexport default ISO_COUNTRY_CODES","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { v4 } from 'uuid'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid\n} from \"tabler-react\"\n\n\nimport CSDatePicker from \"../../ui/CSDatePicker\"\nimport ISO_COUNTRY_CODES from \"../../../tools/iso_country_codes\"\nimport { GraphQLID } from 'graphql'\n\n\nconst RelationsAccountProfileForm = ({ t, history, isSubmitting, errors, values, inputData, setFieldTouched, setFieldValue }) => (\n  <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group>\n              <Form.Label className=\"custom-switch\">\n                  <Field \n                  className=\"custom-switch-input\"\n                  type=\"checkbox\" \n                  name=\"customer\" \n                  checked={values.customer} />\n                  <span className=\"custom-switch-indicator\" ></span>\n                  <span className=\"custom-switch-description\">{t('general.customer')}</span>\n              </Form.Label>\n              <ErrorMessage name=\"customer\" component=\"div\" />   \n            </Form.Group>  \n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group>\n              <Form.Label className=\"custom-switch\">\n                  <Field \n                  className=\"custom-switch-input\"\n                  type=\"checkbox\" \n                  name=\"teacher\" \n                  checked={values.teacher} />\n                  <span className=\"custom-switch-indicator\" ></span>\n                  <span className=\"custom-switch-description\">{t('general.teacher')}</span>\n              </Form.Label>\n              <ErrorMessage name=\"teacher\" component=\"div\" />   \n            </Form.Group>  \n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group>\n              <Form.Label className=\"custom-switch\">\n                  <Field \n                  className=\"custom-switch-input\"\n                  type=\"checkbox\" \n                  name=\"employee\" \n                  checked={values.employee} />\n                  <span className=\"custom-switch-indicator\" ></span>\n                  <span className=\"custom-switch-description\">{t('general.employee')}</span>\n              </Form.Label>\n              <ErrorMessage name=\"employee\" component=\"div\" />   \n            </Form.Group>  \n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.first_name')}>\n              <Field type=\"text\" \n                      name=\"firstName\" \n                      className={(errors.firstName) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"firstName\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.last_name')}>\n              <Field type=\"text\" \n                      name=\"lastName\" \n                      className={(errors.lastName) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"lastName\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n         <Grid.Col>\n            <Form.Group label={t('general.date_of_birth')}>\n              <CSDatePicker \n                selected={values.dateOfBirth}\n                onChange={(date) => setFieldValue(\"dateOfBirth\", date)}\n                onBlur={() => setFieldTouched(\"dateOfBirth\", true)}\n              />\n              <ErrorMessage name=\"dateOfBirth\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.gender')}>\n              <Field component=\"select\" \n                    name=\"gender\" \n                    className={(errors.organizationMembership) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\"></option>\n                <option value=\"F\">{t(\"genders.female\")}</option>\n                <option value=\"M\">{t(\"genders.male\")}</option>\n                <option value=\"X\">{t(\"genders.other\")}</option>\n              </Field>\n              <ErrorMessage name=\"gender\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.email')}>\n              <Field type=\"text\" \n                      name=\"email\" \n                      className={(errors.email) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"email\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('relations.accounts.emergency')}>\n              <Field type=\"text\" \n                     name=\"emergency\" \n                     className={(errors.emergency) ? \"form-control is-invalid\" : \"form-control\"} \n                     autoComplete=\"off\" />\n              <ErrorMessage name=\"emergency\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.phone')}>\n              <Field type=\"text\" \n                      name=\"phone\" \n                      className={(errors.phone) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"phone\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.mobile')}>\n              <Field type=\"text\" \n                     name=\"mobile\" \n                     className={(errors.mobile) ? \"form-control is-invalid\" : \"form-control\"} \n                     autoComplete=\"off\" />\n              <ErrorMessage name=\"mobile\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.address')}>\n              <Field type=\"text\" \n                      name=\"address\" \n                      className={(errors.address) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"address\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.postcode')}>\n              <Field type=\"text\" \n                     name=\"postcode\" \n                     className={(errors.postcode) ? \"form-control is-invalid\" : \"form-control\"} \n                     autoComplete=\"off\" />\n              <ErrorMessage name=\"postcode\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.city')}>\n              <Field type=\"text\" \n                      name=\"city\" \n                      className={(errors.city) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"city\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.country')}>\n              <Field component=\"select\" \n                     name=\"country\" \n                     className={(errors.country) ? \"form-control is-invalid\" : \"form-control\"} \n                     autoComplete=\"off\">\n                <option value=\"\"></option>\n                { ISO_COUNTRY_CODES.map(\n                    country => <option value={country.Code} key={v4()}>{country.Name}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"country\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.discovery')}>\n              <Field component=\"select\" \n                    name=\"organizationDiscovery\" \n                    className={(errors.organizationDiscovery) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\" key={v4()}></option>\n                {inputData.organizationDiscoveries.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.name}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"organizationDiscovery\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.language')}>\n              <Field component=\"select\" \n                    name=\"organizationLanguage\" \n                    className={(errors.organizationLanguage) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\" key={v4()}></option>\n                {inputData.organizationLanguages.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.name}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"organizationLanguage\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row> \n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.key_number')}>\n              <Field type=\"text\" \n                      name=\"keyNumber\" \n                      className={(errors.keyNumber) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"keyNumber\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            // className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          \n          {/* <Button color=\"link\" onClick={() => history.push(return_url)}>\n              {t('general.cancel')}\n          </Button> */}\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(RelationsAccountProfileForm))\n\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Page,\n  Grid,\n  Card,\n  Container\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport ProfileCardSmall from \"../../ui/ProfileCardSmall\"\n\nimport RelationsAccountsBack from \"./RelationsAccountsBack\"\nimport ProfileMenu from \"./ProfileMenu\"\n\nfunction RelationsAccountProfileBase({t, match, children, sidebarButton=\"\", activeLink=\"\", user={}}) {\n  const accountId = match.params.account_id\n  let headerTitle = \"\"\n  if (user) {\n    headerTitle = `${user.firstName} ${user.lastName}`\n  }\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={headerTitle}>\n            <RelationsAccountsBack />\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>                                    \n            <Grid.Col md={3}>\n              <ProfileCardSmall user={user}/>\n              {sidebarButton}\n              <ProfileMenu \n                activeLink={activeLink}\n                accountId={accountId}\n              /> \n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(RelationsAccountProfileBase))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNTS_QUERY, GET_ACCOUNT_QUERY, UPDATE_ACCOUNT } from './queries'\nimport { ACCOUNT_SCHEMA } from './yupSchema'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { dateToLocalISO } from '../../../tools/date_tools'\nimport ProfileCardSmall from \"../../ui/ProfileCardSmall\"\n\nimport { get_list_query_variables } from \"./tools\"\nimport RelationsAccountsBack from \"./RelationsAccountsBack\"\nimport RelationsAccountProfileForm from \"./RelationsAccountProfileForm\"\n\n// import OrganizationMenu from \"../OrganizationMenu\"\nimport ProfileMenu from \"./ProfileMenu\"\nimport RelationsAccountProfileBase from './RelationsAccountProfileBase'\n\nfunction RelationsAccountProfile({t, match}) {\n  const accountId = match.params.account_id\n  const activeLink = \"profile\"\n  const returnUrl = \"/relations/accounts\"\n\n  const {loading, error, data} = useQuery(GET_ACCOUNT_QUERY, {\n    variables: {id: accountId}\n  })\n  const [updateAccount] = useMutation(UPDATE_ACCOUNT)\n\n  if (loading) return (\n    <RelationsAccountProfileBase activeLink={activeLink}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('relations.accounts.profile')}</Card.Title>\n        </Card.Header>\n        <Card.Body>\n          <p>{t('general.loading_with_dots')}</p>  \n        </Card.Body>\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n\n  if (error) return (\n    <RelationsAccountProfileBase activeLink={activeLink}>\n      {console.log(error)}\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('relations.accounts.profile')}</Card.Title>\n        </Card.Header>\n        <Card.Body>\n          <p>{t('general.error_sad_smiley')}</p>\n        </Card.Body>\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n\n  const account = data.account\n  console.log(account)\n\n  // DatePicker doesn't like a string as an initial value\n  // This makes it a happy DatePicker :)\n  let dateOfBirth = null\n  if (account.dateOfBirth) {\n    dateOfBirth = new Date(account.dateOfBirth)\n  }\n\n  let initialValues = { \n    customer: account.customer, \n    teacher: account.teacher, \n    employee: account.employee, \n    firstName: account.firstName, \n    lastName: account.lastName, \n    email: account.email,\n    dateOfBirth: dateOfBirth,\n    gender: account.gender,\n    emergency: account.emergency,\n    phone: account.phone,\n    mobile: account.mobile,\n    address: account.address,\n    postcode: account.postcode,\n    city: account.city,\n    country: account.country,\n    keyNumber: account.keyNumber\n  }\n\n  if (account.organizationDiscovery) {\n    initialValues.organizationDiscovery = account.organizationDiscovery.id\n  }\n\n  if (account.organizationLanguage) {\n    initialValues.organizationLanguage = account.organizationLanguage.id\n  }\n\n  return (\n    <RelationsAccountProfileBase \n      user={account}\n      activeLink={activeLink}\n    >\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('relations.accounts.profile')}</Card.Title>\n        </Card.Header>\n        <Card.Body>\n        <Formik\n            initialValues={initialValues}\n            validationSchema={ACCOUNT_SCHEMA}\n            onSubmit={(values, { setSubmitting }) => {\n                console.log('submit values:')\n                console.log(values)\n\n                let input_vars = {\n                  id: accountId,\n                  customer: values.customer,\n                  teacher: values.teacher,\n                  employee: values.employee,\n                  firstName: values.firstName,\n                  lastName: values.lastName,\n                  email: values.email,\n                  gender: values.gender,\n                  emergency: values.emergency,\n                  phone: values.phone,\n                  mobile: values.mobile,\n                  address: values.address,\n                  postcode: values.postcode,\n                  city: values.city,\n                  country: values.country,\n                  keyNumber: values.keyNumber,\n                  organizationDiscovery: values.organizationDiscovery,\n                  organizationLanguage: values.organizationLanguage\n                }\n\n                if (values.dateOfBirth) {\n                  input_vars['dateOfBirth'] = dateToLocalISO(values.dateOfBirth)\n                } \n\n                updateAccount({ variables: {\n                  input: input_vars\n                }, refetchQueries: [\n                    // Refetch list\n                    {query: GET_ACCOUNTS_QUERY, variables: get_list_query_variables()},\n                    // Refresh local cached results for this account\n                    {query: GET_ACCOUNT_QUERY, variables: {id: accountId}}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    toast.success((t('relations.accounts.toast_edit_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    setSubmitting(false)\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n              <RelationsAccountProfileForm\n                isSubmitting={isSubmitting}\n                setFieldTouched={setFieldTouched}\n                setFieldValue={setFieldValue}\n                errors={errors}\n                values={values}\n                inputData={data}\n              />\n            )}\n          </Formik>\n        </Card.Body>\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n}\n\nexport default withTranslation()(withRouter(RelationsAccountProfile))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\n\nconst DocumentType = ({ t, documentType }) => {\n  switch (documentType) {\n    case \"TERMS_AND_CONDITIONS\":  \n      return t('general.terms_and_conditions')\n      break\n    case \"PRIVACY_POLICY\":\n      return t('general.privacy_policy')\n      break\n    default:\n      return t('general.unknown_document_type')\n  }\n}\n\nexport default withTranslation()(DocumentType)\n\n\n\n","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_ACCEPTED_DOCUMENTS_QUERY = gql`\n  query AccountAcceptedDocuments($after: String, $before: String, $account: ID!) {\n    accountAcceptedDocuments(first: 15, before:$before, after:$after, account: $account) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          document {\n            id\n            documentType\n            version\n            urlDocument\n          }\n          dateAccepted\n          clientIp\n        }\n      }\n    }\n    account(id:$account) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport { toast } from 'react-toastify'\n\nimport BadgeBoolean from \"../../../ui/BadgeBoolean\"\nimport RelationsAccountsBack from \"../RelationsAccountsBack\"\nimport DocumentType from \"../../../ui/DocumentType\"\nimport FileDownloadTableButton from \"../../../ui/FileDownloadTableButton\"\n\nimport ContentCard from \"../../../general/ContentCard\"\nimport ProfileMenu from \"../ProfileMenu\"\nimport ProfileCardSmall from \"../../../ui/ProfileCardSmall\"\n\nimport { GET_ACCOUNT_ACCEPTED_DOCUMENTS_QUERY } from \"./queries\"\n\nimport moment from 'moment'\n\n\nfunction AccountAcceptedDocuments({ t, history, match }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n\n  const accountId = match.params.account_id\n  const { loading, error, data, fetchMore } = useQuery(GET_ACCOUNT_ACCEPTED_DOCUMENTS_QUERY, {\n    variables: {\n      account: accountId\n    }\n  })\n\n  // Loading\n  if (loading) return <p>{t('general.loading_with_dots')}</p>\n  // Error\n  if (error) {\n    console.log(error)\n    return <p>{t('general.error_sad_smiley')}</p>\n  }\n\n  console.log(data)\n  \n  const account = data.account\n  const acceptedDocuments = data.accountAcceptedDocuments\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={account.firstName + \" \" + account.lastName} >\n            <RelationsAccountsBack />\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              <ContentCard \n                cardTitle={t('relations.account.accepted_documents.title')}\n                pageInfo={acceptedDocuments.pageInfo}\n                onLoadMore={() => {\n                  fetchMore({\n                    variables: {\n                      after: data.accountAcceptedDocuments.pageInfo.endCursor\n                    },\n                    updateQuery: (previousResult, { fetchMoreResult }) => {\n                      const newEdges = fetchMoreResult.accountAcceptedDocuments.edges\n                      const pageInfo = fetchMoreResult.accountAcceptedDocuments.pageInfo\n\n                      return newEdges.length\n                        ? {\n                            // Put the new acceptedDocuments at the end of the list and update `pageInfo`\n                            // so we have the new `endCursor` and `hasNextPage` values\n                            accountAcceptedDocuments: {\n                              __typename: previousResult.accountAcceptedDocuments.__typename,\n                              edges: [ ...previousResult.accountAcceptedDocuments.edges, ...newEdges ],\n                              pageInfo\n                            }\n                          }\n                        : previousResult\n                    }\n                  })\n                }} \n              >\n                <Table>\n                  <Table.Header>\n                    <Table.Row key={v4()}>\n                      <Table.ColHeader>{t('general.document_type')}</Table.ColHeader>\n                      <Table.ColHeader>{t('general.date_accepted')}</Table.ColHeader>\n                      <Table.ColHeader>{t('relations.account.accepted_documents.accepted_from_address')}</Table.ColHeader>\n                      <Table.ColHeader><span className=\"pull-right\">{t('general.document')}</span></Table.ColHeader>\n                    </Table.Row>\n                  </Table.Header>\n                  <Table.Body>\n                      {acceptedDocuments.edges.map(({ node }) => (\n                        <Table.Row key={v4()}>\n                          <Table.Col key={v4()}>\n                            <DocumentType documentType={node.document.documentType} />\n                          </Table.Col>\n                          <Table.Col key={v4()}>\n                            {moment(node.dateAccepted).format(dateFormat)}\n                          </Table.Col>\n                          <Table.Col>\n                            {node.clientIp}\n                          </Table.Col>\n                          <Table.Col key={v4()}>\n                            <FileDownloadTableButton mediaUrl={node.document.urlDocument} className=\"pull-right\" />\n                          </Table.Col>\n                        </Table.Row>\n                      ))}\n                  </Table.Body>\n                </Table>\n              </ContentCard>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <ProfileCardSmall user={account}/>\n              <ProfileMenu \n                activeLink='accepted_documents' \n                accountId={match.params.account_id}\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n      \n        \nexport default withTranslation()(withRouter(AccountAcceptedDocuments))","import { gql } from \"@apollo/client\"\n\n\nexport const GET_ACCOUNT_BANK_ACCOUNTS_QUERY = gql`\n  query AccountBankAccounts($after: String, $before: String, $account: ID!) {\n    accountBankAccounts(\n      first: 1, \n      before: $before, \n      after: $after, \n      account: $account\n    ) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          number\n          holder\n          bic\n          mandates(first: 100) {\n            pageInfo {\n              hasNextPage\n              hasPreviousPage\n              startCursor\n              endCursor\n            }\n            edges {\n              node {\n                id\n                reference\n                content\n                signatureDate\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`\n\n// export const GET_ACCOUNT_QUERY = gql`\n//   query Account($id: ID!) {\n//     account(id:$id) {\n//       id\n//       customer\n//       teacher\n//       employee\n//       firstName\n//       lastName\n//       email\n//       dateOfBirth\n//       gender\n//       address\n//       postcode\n//       city\n//       country\n//       phone\n//       mobile\n//       emergency\n//       isActive\n//     }\n//   }\n// `\n\nexport const UPDATE_ACCOUNT_BANK_ACCOUNT = gql`\n  mutation UpdateAccountBanKAccount($input:UpdateAccountBankAccountInput!) {\n    updateAccountBankAccount(input: $input) {\n      accountBankAccount {\n        id\n        number\n        holder\n        bic\n      }\n    }\n  }\n`\n","import { gql } from \"@apollo/client\"\n\n\nexport const GET_ACCOUNT_BANK_ACCOUNT_MANDATE_QUERY = gql`\n  query AccountBankAccountMandate($id: ID!) {\n    accountBankAccountMandate(id:$id) {\n      id\n      reference\n      content\n      signatureDate\n    }\n  }\n`\n\n\nexport const CREATE_ACCOUNT_BANK_ACCOUNT_MANDATE = gql`\n  mutation CreateAccountBankAccountMandate($input:CreateAccountBankAccountMandateInput!) {\n    createAccountBankAccountMandate(input: $input) {\n      accountBankAccountMandate {\n        id\n      }\n    }\n  }\n`\n\n\nexport const UPDATE_ACCOUNT_BANK_ACCOUNT_MANDATE = gql`\n  mutation UpdateAccountBankAccountMandate($input:UpdateAccountBankAccountMandateInput!) {\n    updateAccountBankAccountMandate(input: $input) {\n      accountBankAccountMandate {\n        id\n      }\n    }\n  }\n`\n\n\nexport const DELETE_ACCOUNT_BANK_ACCOUNT_MANDATE = gql`\n  mutation DeleteAccountBankAccountMandate($input:DeleteAccountBankAccountMandateInput!) {\n    deleteAccountBankAccountMandate(input: $input) {\n      ok\n    }\n  }\n`\n","// @flow\n\nimport React from 'react'\nimport { useQuery } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport { GET_ACCOUNT_QUERY } from '../queries'\n\nimport {\n  Button,\n  Icon,\n  Page,\n  Grid,\n  Container\n} from \"tabler-react\"\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport ProfileCardSmall from \"../../../ui/ProfileCardSmall\"\n\nimport RelationsAccountsBack from \"../RelationsAccountsBack\"\nimport ProfileMenu from \"../ProfileMenu\"\n\n\nfunction RelationsAccountBankAccountBase({ t, match, history, children, bankAccountId=\"\", showBack=false }) {\n  const accountId = match.params.account_id\n\n  const { loading, error, data } = useQuery(GET_ACCOUNT_QUERY, {\n    variables: { id: accountId }\n  })\n\n  if (loading) return <p>{t('general.loading_with_dots')}</p>\n  // Error\n  if (error) {\n    console.log(error)\n    return <p>{t('general.error_sad_smiley')}</p>\n  }\n\n  const account = data.account\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={account.firstName + \" \" + account.lastName}>\n            <RelationsAccountsBack />\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <ProfileCardSmall user={account}/>\n              {((bankAccountId) && !(showBack)) ?\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"accountbankaccountmandate\">\n                  <Link to={`/relations/accounts/${match.params.account_id}/bank_accounts/${bankAccountId}/mandates/add`}>\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('relations.account.bank_accounts.mandates.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n                : \"\" \n              }\n              {(showBack) ?\n                <HasPermissionWrapper permission=\"view\"\n                                      resource=\"accountbankaccount\">\n                  <Link to={`/relations/accounts/${match.params.account_id}/bank_accounts/`}>\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n                : \"\"\n              }\n              <ProfileMenu \n                activeLink='bank_account'\n                accountId={accountId}\n              /> \n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(RelationsAccountBankAccountBase))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid\n} from \"tabler-react\"\n\n\nconst RelationsAccountBankAccountForm = ({ t, history, isSubmitting, errors, values, }) => (\n  <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('relations.account.bank_accounts.holder')}>\n              <Field type=\"text\" \n                      name=\"holder\" \n                      className={(errors.holder) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"bic\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('relations.account.bank_accounts.number')}>\n              <Field type=\"text\" \n                      name=\"number\" \n                      className={(errors.number) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"number\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('relations.account.bank_accounts.bic')}>\n              <Field type=\"text\" \n                      name=\"bic\" \n                      className={(errors.bic) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"bic\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            // className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          \n          {/* <Button color=\"link\" onClick={() => history.push(return_url)}>\n              {t('general.cancel')}\n          </Button> */}\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(RelationsAccountBankAccountForm))\n\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport moment from 'moment'\n\nimport { GET_ACCOUNT_BANK_ACCOUNTS_QUERY, UPDATE_ACCOUNT_BANK_ACCOUNT } from './queries'\nimport { DELETE_ACCOUNT_BANK_ACCOUNT_MANDATE } from './mandates/queries'\n// import { ACCOUNT_SCHEMA } from './yupSchema'\n\nimport {\n  Button,\n  Card, \n  Grid,\n  Icon\n} from \"tabler-react\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport RelationsAccountBankAccountBase from \"./RelationsAccountBankAccountBase\"\nimport RelationsAccountBankAccountForm from \"./RelationsAccountBankAccountForm\"\n\n\n\nfunction RelationsAccountBankAccount({ t, match, history }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  \n  const accountId = match.params.account_id\n  const returnUrl = \"/relations/accounts\"\n\n  const { loading, error, data } = useQuery(GET_ACCOUNT_BANK_ACCOUNTS_QUERY, {\n    variables: { account: accountId }\n  })\n\n  const [ updateAccountBankAccount ] = useMutation(UPDATE_ACCOUNT_BANK_ACCOUNT)\n  const [ deleteAccountBankAccountMandate ] = useMutation(DELETE_ACCOUNT_BANK_ACCOUNT_MANDATE)\n\n  if (loading) return (\n    <RelationsAccountBankAccountBase>\n      <p>{t('general.loading_with_dots')}</p>\n    </RelationsAccountBankAccountBase>\n  )\n  // Error\n  if (error) {\n    console.log(error)\n    return (\n      <RelationsAccountBankAccountBase>\n        <p>{t('general.loading_with_dots')}</p><p>{t('general.error_sad_smiley')}</p>\n      </RelationsAccountBankAccountBase>\n    )\n  }\n\n  const accountBankAccounts = data.accountBankAccounts\n  const accountBankAccount = accountBankAccounts.edges[0].node\n  const mandates = accountBankAccount.mandates\n  console.log(accountBankAccount)\n\n  return (\n    <RelationsAccountBankAccountBase bankAccountId={accountBankAccount.id}>\n      <Card title={t('relations.account.bank_accounts.title')}>\n        <Formik\n          initialValues={{ \n            number: accountBankAccount.number,\n            holder: accountBankAccount.holder,\n            bic: accountBankAccount.bic\n          }}\n          // validationSchema={ACCOUNT_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              let input_vars = {\n                id: accountBankAccount.id,\n                number: values.number,\n                holder: values.holder,\n                bic: values.bic              \n              }\n\n              updateAccountBankAccount({ variables: {\n                input: input_vars\n              }, refetchQueries: [\n                  // Refresh local cached results for this account\n                  {query: GET_ACCOUNT_BANK_ACCOUNTS_QUERY, variables: { account: accountId }}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  toast.success((t('relations.account.bank_accounts.toast_edit_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  setSubmitting(false)\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n            <RelationsAccountBankAccountForm\n              isSubmitting={isSubmitting}\n              errors={errors}\n              values={values}\n            />\n          )}\n        </Formik>\n      </Card>\n      {(mandates.edges.length) ? <h5>{t(\"relations.account.bank_accounts.mandates.title\")}</h5> : \"\"}\n      <Grid.Row>\n      {mandates.edges.map(({ node }) => (\n        <Grid.Col md={6}>\n          <Card title={t(\"general.ID\") + \": \" + node.reference}>\n            <Card.Body>\n              {t(\"relations.account.bank_accounts.mandates.signature_date\")} {moment(node.signatureDate).format(dateFormat)}\n              <div dangerouslySetInnerHTML={{ __html: node.content}} />\n            </Card.Body>\n            <Card.Footer>\n              <Button \n                className=\"pull-right\"\n                color=\"danger\"\n                type=\"button\"\n                onClick={() => {\n                  confirm_delete({\n                    t: t,\n                    msgConfirm: t(\"relations.account.bank_accounts.mandates.delete_confirm_msg\"),\n                    msgDescription: <p>{node.reference}</p>,\n                    msgSuccess: t('relations.account.bank_accounts.mandates.deleted'),\n                    deleteFunction: deleteAccountBankAccountMandate,\n                    functionVariables: { \n                      variables: {\n                        input: {\n                          id: node.id\n                        }\n                      }, \n                      refetchQueries: [\n                        {query: GET_ACCOUNT_BANK_ACCOUNTS_QUERY, variables: { account: accountId} } \n                      ]\n                    }\n                  })\n                }}\n              >\n                <Icon name=\"trash-2\" />\n              </Button>\n              <Link to={`/relations/accounts/${accountId}/bank_accounts/${accountBankAccount.id}/mandates/edit/${node.id}`}>\n                <Button\n                  type=\"button\" \n                  color=\"secondary\" \n                >\n                    {t('general.edit')}\n                </Button>\n              </Link>\n            </Card.Footer>\n          </Card>\n        </Grid.Col>\n      ))}\n      </Grid.Row>\n    </RelationsAccountBankAccountBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(RelationsAccountBankAccount))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from \"uuid\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid,\n} from \"tabler-react\";\n\nimport CSDatePicker from \"../../../../ui/CSDatePicker\"\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../../plugin_config/tinymce\"\n\n\nconst RelationsAccountBankAccountMandateForm = ({ t, history, inputData, isSubmitting, setFieldValue, setFieldTouched, errors, values, returnUrl }) => (\n  <FoForm>\n    <Card.Body>\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('relations.account.bank_accounts.mandates.reference')}>\n            <Field type=\"text\" \n                    name=\"reference\" \n                    className={(errors.reference) ? \"form-control is-invalid\" : \"form-control\"}\n                    placeholder={t('relations.account.bank_accounts.mandates.reference_placeholder')}\n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"reference\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n        <Grid.Col>\n          <Form.Group label={t('relations.account.bank_accounts.mandates.signature_date')}>\n            <CSDatePicker \n              selected={values.signatureDate}\n              onChange={(date) => setFieldValue(\"signatureDate\", date)}\n              onBlur={() => setFieldTouched(\"signatureDate\", true)}\n            />\n            <ErrorMessage name=\"signatureDate\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('relations.account.bank_accounts.mandates.content')}>\n            <Editor\n              textareaName=\"content\"\n              initialValue={values.content}\n              init={tinymceBasicConf}\n              onChange={(e) => setFieldValue(\"content\", e.target.getContent())}\n              onBlur={() => setFieldTouched(\"content\", true)}\n              />\n            <ErrorMessage name=\"content\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row>\n    </Card.Body>\n    <Card.Footer>\n        <Button \n          className=\"pull-right\"\n          color=\"primary\"\n          disabled={isSubmitting}\n          type=\"submit\"\n        >\n          {t('general.submit')}\n        </Button>\n        <Link to={returnUrl}>\n          <Button\n            type=\"button\" \n            color=\"link\" \n          >\n              {t('general.cancel')}\n          </Button>\n        </Link>\n    </Card.Footer>\n  </FoForm>\n)\n\n\nexport default withTranslation()(withRouter(RelationsAccountBankAccountMandateForm))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from '@apollo/client'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { CREATE_ACCOUNT_BANK_ACCOUNT_MANDATE } from './queries'\nimport { GET_ACCOUNT_BANK_ACCOUNTS_QUERY } from '../queries'\n// import { SUBSCRIPTION_SCHEMA } from './yupSchema'\nimport RelationsAccountBankAccountMandateForm from './RelationsAccountBankAccountMandateForm'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\n\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport { dateToLocalISO } from '../../../../../tools/date_tools'\n\nimport RelationsAccountBankAccountBase from '../RelationsAccountBankAccountBase'\n\n\nfunction RelationsAccountBankAccountMandateAdd({ t, match, history }) {\n  const accountId = match.params.account_id\n  const bankAccountId = match.params.bank_account_id\n  const returnUrl = `/relations/accounts/${accountId}/bank_accounts`\n\n  const [createAccountBankAccountMandate] = useMutation(CREATE_ACCOUNT_BANK_ACCOUNT_MANDATE) \n \n\n  return (\n    <RelationsAccountBankAccountBase showBack={true}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('relations.account.bank_accounts.mandates.title_add')}</Card.Title>\n        </Card.Header>\n        <Formik\n          initialValues={{\n            reference: \"\",\n            content: \"\",\n            signatureDate: new Date()\n          }}\n          // validationSchema={INVOICE_GROUP_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n            console.log('submit values:')\n            console.log(values)\n\n            createAccountBankAccountMandate({ variables: {\n              input: {\n                accountBankAccount: bankAccountId,\n                reference: values.refrence, \n                content: values.content,\n                signatureDate: dateToLocalISO(values.signatureDate)\n              }\n            }, refetchQueries: [\n              {query: GET_ACCOUNT_BANK_ACCOUNTS_QUERY, variables: { account: accountId }}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                history.push(returnUrl)\n                toast.success((t('relations.account.bank_accounts.mandates.toast_add_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                setSubmitting(false)\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n            }}\n        >\n          {({ isSubmitting, errors, values, submitForm, setFieldTouched, setFieldValue }) => (\n            <RelationsAccountBankAccountMandateForm\n              isSubmitting={isSubmitting}\n              errors={errors}\n              values={values}\n              submitForm={submitForm}\n              setFieldTouched={setFieldTouched}\n              setFieldValue={setFieldValue}\n              returnUrl={returnUrl}\n            >\n            </RelationsAccountBankAccountMandateForm>   \n          )}\n        </Formik>\n      </Card>\n    </RelationsAccountBankAccountBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(RelationsAccountBankAccountMandateAdd))\n","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from '@apollo/client'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_BANK_ACCOUNT_MANDATE_QUERY, UPDATE_ACCOUNT_BANK_ACCOUNT_MANDATE } from './queries'\nimport { GET_ACCOUNT_BANK_ACCOUNTS_QUERY } from '../queries'\n// import { SUBSCRIPTION_SCHEMA } from './yupSchema'\nimport RelationsAccountBankAccountMandateForm from './RelationsAccountBankAccountMandateForm'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\n\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport { dateToLocalISO } from '../../../../../tools/date_tools'\n\nimport RelationsAccountBankAccountBase from '../RelationsAccountBankAccountBase'\n\n\nfunction RelationsAccountBankAccountMandateEdit({ t, match, history }) {\n  const accountId = match.params.account_id\n  const bankAccountId = match.params.bank_account_id\n  const mandateId = match.params.id\n  const returnUrl = `/relations/accounts/${accountId}/bank_accounts`\n\n  const { loading, error, data } = useQuery(GET_ACCOUNT_BANK_ACCOUNT_MANDATE_QUERY, {\n    variables: {'id': mandateId},\n  })\n  const [updateAccountBankAccountMandate] = useMutation(UPDATE_ACCOUNT_BANK_ACCOUNT_MANDATE) \n\n  if (loading) return (\n    <RelationsAccountBankAccountBase>\n      <p>{t('general.loading_with_dots')}</p>\n    </RelationsAccountBankAccountBase>\n  )\n  // Error\n  if (error) {\n    console.log(error)\n    return (\n      <RelationsAccountBankAccountBase>\n        <p>{t('general.loading_with_dots')}</p><p>{t('general.error_sad_smiley')}</p>\n      </RelationsAccountBankAccountBase>\n    )\n  }\n\n  const mandate = data.accountBankAccountMandate\n \n\n  return (\n    <RelationsAccountBankAccountBase showBack={true}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('relations.account.bank_accounts.mandates.title_add')}</Card.Title>\n        </Card.Header>\n        <Formik\n          initialValues={{\n            reference: mandate.reference,\n            content: mandate.content,\n            signatureDate: mandate.signatureDate\n          }}\n          // validationSchema={INVOICE_GROUP_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n            console.log('submit values:')\n            console.log(values)\n\n            updateAccountBankAccountMandate({ variables: {\n              input: {\n                id: mandateId,\n                reference: values.refrence, \n                content: values.content,\n                signatureDate: dateToLocalISO(values.signatureDate)\n              }\n            }, refetchQueries: [\n              {query: GET_ACCOUNT_BANK_ACCOUNTS_QUERY, variables: { account: accountId }}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                toast.success((t('relations.account.bank_accounts.mandates.toast_edit_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                history.push(returnUrl)\n                setSubmitting(false)\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n            }}\n        >\n          {({ isSubmitting, errors, values, submitForm, setFieldTouched, setFieldValue }) => (\n            <RelationsAccountBankAccountMandateForm\n              isSubmitting={isSubmitting}\n              errors={errors}\n              values={values}\n              submitForm={submitForm}\n              setFieldTouched={setFieldTouched}\n              setFieldValue={setFieldValue}\n              returnUrl={returnUrl}\n            >\n            </RelationsAccountBankAccountMandateForm>   \n          )}\n        </Formik>\n      </Card>\n    </RelationsAccountBankAccountBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(RelationsAccountBankAccountMandateEdit))\n","import React from 'react'\nimport { withTranslation } from 'react-i18next'\n\nimport {\n  Badge\n} from \"tabler-react\"\n\n\nfunction BadgeBookingStatus({ t, status }) {\n  switch (status) {\n    case \"ATTENDING\":\n      return <Badge color=\"success\">{t('schedule.classes.class.attendance.booking_status.ATTENDING')}</Badge> \n      break\n    case \"BOOKED\":\n      return <Badge color=\"primary\">{t('schedule.classes.class.attendance.booking_status.BOOKED')}</Badge> \n      break\n    case \"CANCELLED\":\n      return <Badge color=\"warning\">{t('schedule.classes.class.attendance.booking_status.CANCELLED')}</Badge> \n      break\n    default:\n      return t(\"schedule.classes.class.attendance.booking_status.invalid_type\")\n  }\n}\n\nexport default withTranslation()(BadgeBookingStatus)","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Page,\n  Grid,\n  Container\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport RelationsAccountsBack from \"../RelationsAccountsBack\"\n\nimport ProfileMenu from \"../ProfileMenu\"\nimport ProfileCardSmall from \"../../../ui/ProfileCardSmall\"\n\n\nfunction AccountClassesBase({ t, match, history, children, account={} }) {\n  const accountId = match.params.account_id\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={account.fullName} >\n            <RelationsAccountsBack />\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <ProfileCardSmall user={account}/>\n                {/* <HasPermissionWrapper permission=\"view\"\n                                      resource=\"scheduleitemattendance\">\n                  <Link to={\"/relations/accounts/\" + match.params.account_id + \"/classes/add\"}>\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('relations.account.classes.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper> */}\n              <ProfileMenu \n                activeLink='classes' \n                accountId={accountId}\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountClassesBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_CLASSES_QUERY = gql`\n  query ScheduleItemAttendance($account: ID!, $before: String, $after: String) {\n    scheduleItemAttendances(first: 20, before: $before, after: $after, account: $account, accountScheduleEventTicket_Isnull: true) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          attendanceType\n          date\n          bookingStatus\n          scheduleItem {\n            id\n            timeStart\n            timeEnd\n            organizationLocationRoom {\n              name\n              organizationLocation {\n                name\n              }\n            }\n            organizationClasstype {\n              name\n            }\n          }\n        }\n      } \n    }\n    account(id:$account) {\n      id\n      firstName\n      lastName\n      fullName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\n// export const GET_ACCOUNT_CLASSPASS_QUERY = gql`\n//   query AccountClasspass($id: ID!, $accountId: ID!, $after: String, $before: String, $archived: Boolean!) {\n//     accountClasspass(id:$id) {\n//       id\n//       organizationClasspass {\n//         id\n//         name\n//       }\n//       dateStart\n//       dateEnd\n//       note\n//       createdAt\n//     }\n//     organizationClasspasses(first: 100, before: $before, after: $after, archived: $archived) {\n//       pageInfo {\n//         startCursor\n//         endCursor\n//         hasNextPage\n//         hasPreviousPage\n//       }\n//       edges {\n//         node {\n//           id\n//           archived\n//           name\n//         }\n//       }\n//     }\n//     account(id:$accountId) {\n//       id\n//       firstName\n//       lastName\n//       email\n//       phone\n//       mobile\n//       isActive\n//     }\n//   }\n// `\n","import { gql } from \"@apollo/client\"\n\n\nexport const GET_SCHEDULE_CLASS_ATTENDANCE_QUERY = gql`\n  query ScheduleItemAttendances($after: String, $before: String, $scheduleItem: ID!, $date: Date!) {\n    scheduleItemAttendances(first: 100, before: $before, after: $after, scheduleItem: $scheduleItem, date: $date) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          account {\n            id\n            fullName\n          }     \n          attendanceType\n          bookingStatus\n        }\n      }\n    }\n    scheduleItem(id:$scheduleItem) {\n      id\n      frequencyType\n      frequencyInterval\n      organizationLocationRoom {\n        id\n        name\n        organizationLocation {\n          id\n          name\n        }\n      }\n      organizationClasstype {\n        id\n        name\n      }\n      organizationLevel {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      timeStart\n      timeEnd\n      displayPublic\n    }\n  }\n`\n\nexport const DELETE_SCHEDULE_CLASS_ATTENDANCE = gql`\n  mutation DeleteScheduleItemAttendance($input: DeleteScheduleItemAttendanceInput!) {\n    deleteScheduleItemAttendance(input: $input) {\n      ok\n    }\n  }\n`\n\n\nexport const UPDATE_SCHEDULE_ITEM_ATTENDANCE = gql`\n  mutation UpdateScheduleItemAttendance($input: UpdateScheduleItemAttendanceInput!) {\n    updateScheduleItemAttendance(input:$input) {\n      scheduleItemAttendance {\n        id\n      }\n    }\n  }\n`\n\n\n// export const GET_SINGLE_SCHEDULE_CLASS_TEACHERS_QUERY = gql`\n//   query ScheduleItemTeacher($before: String, $after: String, $id: ID!) {\n//     scheduleItemTeacher(id: $id) {\n//       id\n//       account {\n//         id\n//         fullName\n//       }\n//       role\n//       account2 {\n//         id\n//         fullName\n//       }\n//       role2\n//       dateStart\n//       dateEnd       \n//     }\n//     accounts(first: 15, before: $before, after: $after, isActive: true, teacher: true) {\n//       pageInfo {\n//         startCursor\n//         endCursor\n//         hasNextPage\n//         hasPreviousPage\n//       }\n//       edges {\n//         node {\n//           id\n//           fullName\n//         }\n//       }\n//     }\n//   }\n// `\n\n\n// export const GET_INPUT_VALUES_QUERY = gql`\n//   query InputValues($after: String, $before: String) {\n//     accounts(first: 15, before: $before, after: $after, isActive: true, teacher: true) {\n//       pageInfo {\n//         startCursor\n//         endCursor\n//         hasNextPage\n//         hasPreviousPage\n//       }\n//       edges {\n//         node {\n//           id\n//           fullName\n//         }\n//       }\n//     }\n//   }\n// `","import React, { useContext } from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { GET_ACCOUNT_CLASSES_QUERY } from \"./queries\"\nimport { DELETE_SCHEDULE_CLASS_ATTENDANCE } from \"../../../schedule/classes/class/attendance/queries\"\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport moment from 'moment'\n\nimport {\n  Icon,\n  List\n} from \"tabler-react\"\n\n\nfunction AccountClassDelete({t, match, node, account}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  const [deleteScheduleItemAttendance, { data }] = useMutation(DELETE_SCHEDULE_CLASS_ATTENDANCE)\n\n  console.log(\"AccountClassDelete\")\n  console.log(node)\n  console.log(account)\n  console.log(\"---\")\n\n  return (\n    <button className=\"icon btn btn-link btn-sm pull-right\" \n      title={t('general.delete')} \n      href=\"\"\n      onClick={() => {\n        confirm_delete({\n          t: t,\n          msgConfirm: t(\"schedule.classes.class.attendance.delete_confirm_msg\"),\n          msgDescription: <p>\n            <List>\n              <List.Item>\n                {t(\"general.time\")}: { moment(node.date).format(dateFormat) } { ' ' }\n                {moment(node.date + ' ' + node.scheduleItem.timeStart).format(timeFormat)}\n              </List.Item>\n              <List.Item>\n                {t(\"general.class\")}: {node.scheduleItem.organizationClasstype.name} \n              </List.Item>\n              <List.Item>\n                {t(\"general.location\")}: {node.scheduleItem.organizationLocationRoom.organizationLocation.name} \n              </List.Item>\n            </List>    \n          </p>,\n          msgSuccess: t('schedule.classes.class.attendance.delete_success'),\n          deleteFunction: deleteScheduleItemAttendance,\n          functionVariables: { \n            variables: {\n              input: {\n                id: node.id\n              }\n            }, \n            refetchQueries: [\n              { query: GET_ACCOUNT_CLASSES_QUERY, \n                variables: { account: account.id } },\n            ]\n          }\n        })\n    }}>\n      <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n    </button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountClassDelete))\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport {\n  Card,\n  Table\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport BadgeBookingStatus from \"../../../ui/BadgeBookingStatus\"\n\nimport ContentCard from \"../../../general/ContentCard\"\nimport AccountClassesBase from \"./AccountClassesBase\"\nimport AccountClassDelete from \"./AccountClassDelete\"\n\nimport { GET_ACCOUNT_CLASSES_QUERY } from \"./queries\"\n\n\nfunction AccountClasses({ t, match, history }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  const account_id = match.params.account_id\n  const cardTitle = t('relations.account.classes.title')\n  const { loading, error, data, fetchMore } = useQuery(GET_ACCOUNT_CLASSES_QUERY, {\n    variables: {'account': account_id},\n    fetchPolicy: \"network-only\"\n  })\n\n  // Loading\n  if (loading) return (\n    <AccountClassesBase>\n      <Card title={cardTitle}>\n        <Card.Body>\n          <p>{t('general.loading_with_dots')}</p>\n        </Card.Body>\n      </Card>\n    </AccountClassesBase>\n  )\n  // Error\n  if (error) {\n    console.log(error)\n    return (\n      <AccountClassesBase>\n        <Card title={cardTitle}>\n          <Card.Body>\n            <p>{t('general.error_sad_smiley')}</p>\n          </Card.Body>\n        </Card>\n      </AccountClassesBase>\n    )\n  }\n\n  console.log(\"AccountClasses data:\")\n  console.log(data)\n  const account = data.account\n  const scheduleItemAttendances = data.scheduleItemAttendances\n  \n  // Empty list\n  if (!scheduleItemAttendances.edges.length) {\n    return (\n      <AccountClassesBase account={account}>\n        <Card title={cardTitle}>\n          <Card.Body>\n            <p>{t('relations.account.classes.empty_list')}</p>\n          </Card.Body>\n        </Card>\n      </AccountClassesBase>\n    )\n  }\n\n  // Return populated list\n  return (\n    <AccountClassesBase account={account}>\n      <ContentCard \n        cardTitle={cardTitle}\n        pageInfo={scheduleItemAttendances.pageInfo}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: scheduleItemAttendances.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.scheduleItemAttendances.edges\n              const pageInfo = fetchMoreResult.scheduleItemAttendances.pageInfo\n\n              return newEdges.length\n                ? {\n                    // Put the new scheduleItemAttendances at the end of the list and update `pageInfo`\n                    // so we have the new `endCursor` and `hasNextPage` values\n                    scheduleItemAttendances: {\n                      __typename: previousResult.scheduleItemAttendances.__typename,\n                      edges: [ ...previousResult.scheduleItemAttendances.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                : previousResult\n            }\n          })\n        }} \n      >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.time')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.class')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.location')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.booking_status')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>  \n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {scheduleItemAttendances.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                { console.log(node) }\n                { console.log(account) }\n                <Table.Col>\n                  { moment(node.date).format(dateFormat) } <br />\n                  <span className=\"text-muted\">\n                    {moment(node.date + ' ' + node.scheduleItem.timeStart).format(timeFormat)}\n                  </span>\n                </Table.Col>\n                <Table.Col>\n                  { node.scheduleItem.organizationClasstype.name }\n                </Table.Col>\n                <Table.Col>\n                  { node.scheduleItem.organizationLocationRoom.organizationLocation.name } <br />\n                  <span className=\"text-muted\">\n                    { node.scheduleItem.organizationLocationRoom.name }\n                  </span> \n                </Table.Col>\n                <Table.Col>\n                  <BadgeBookingStatus status={node.bookingStatus} />\n                </Table.Col>\n                <Table.Col>\n                  <AccountClassDelete account={account} node={node} />\n                </Table.Col>\n                {/* <Table.Col className=\"text-right\" key={v4()}>\n                  <Link to={\"/relations/accounts/\" + match.params.account_id + \"/classpasses/edit/\" + node.id}>\n                    <Button className='btn-sm' \n                            color=\"secondary\">\n                      {t('general.edit')}\n                    </Button>\n                  </Link>\n                </Table.Col> */}\n                {/* <Mutation mutation={DELETE_ACCOUNT_CLASSPASS} key={v4()}>\n                  {(deleteAccountClasspass, { data }) => (\n                    <Table.Col className=\"text-right\" key={v4()}>\n                      <button className=\"icon btn btn-link btn-sm\" \n                        title={t('general.delete')} \n                        href=\"\"\n                        onClick={() => {\n                          confirm_delete({\n                            t: t,\n                            msgConfirm: t(\"relations.account.classpasses.delete_confirm_msg\"),\n                            msgDescription: <p>{node.organizationClasspass.name} {node.dateStart}</p>,\n                            msgSuccess: t('relations.account.classpasses.deleted'),\n                            deleteFunction: deleteAccountClasspass,\n                            functionVariables: { variables: {\n                              input: {\n                                id: node.id\n                              }\n                            }, refetchQueries: [\n                              {query: GET_ACCOUNT_CLASSPASSES_QUERY, variables: { archived: archived, accountId: match.params.account_id }} \n                            ]}\n                          })\n                      }}>\n                        <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n                      </button>\n                    </Table.Col>\n                  )}\n                </Mutation> */}\n              </Table.Row>\n            ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </AccountClassesBase>\n  )\n}\n\n        \nexport default withTranslation()(withRouter(AccountClasses))","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_CLASSPASSES_QUERY = gql`\n  query AccountClasspasses($after: String, $before: String, $accountId: ID!) {\n    accountClasspasses(first: 15, before: $before, after: $after, account: $accountId) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          organizationClasspass {\n            id\n            name\n          }\n          dateStart\n          dateEnd\n          classesRemainingDisplay\n          createdAt\n        }\n      }\n    }\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\nexport const GET_ACCOUNT_CLASSPASS_QUERY = gql`\n  query AccountClasspass($id: ID!, $accountId: ID!, $after: String, $before: String) {\n    accountClasspass(id:$id) {\n      id\n      organizationClasspass {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      note\n      createdAt\n    }\n    organizationClasspasses(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query ClasspassInputValues($after: String, $before: String, $accountId: ID!) {\n    organizationClasspasses(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\nexport const CREATE_ACCOUNT_CLASSPASS = gql`\n  mutation CreateAccountClasspass($input: CreateAccountClasspassInput!) {\n    createAccountClasspass(input: $input) {\n      accountClasspass {\n        id\n        account {\n          id\n          firstName\n          lastName\n          email\n        }\n        organizationClasspass {\n          id\n          name\n        }\n        dateStart\n        dateEnd\n        note\n      }\n    }\n  }\n`\n\nexport const UPDATE_ACCOUNT_CLASSPASS = gql`\nmutation UpdateAccountClasspass($input: UpdateAccountClasspassInput!) {\n  updateAccountClasspass(input: $input) {\n    accountClasspass {\n      id\n      account {\n        id\n        firstName\n        lastName\n        email\n      }\n      organizationClasspass {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      note\n    }\n  }\n}\n`\n\nexport const DELETE_ACCOUNT_CLASSPASS = gql`\n  mutation DeleteAccountClasspass($input: DeleteAccountClasspassInput!) {\n    deleteAccountClasspass(input: $input) {\n      ok\n    }\n  }\n`\n","// @flow\n\nimport React from 'react'\nimport { useMutation, useQuery } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Icon,\n  Button,\n  Card,\n  Table\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport ContentCard from \"../../../general/ContentCard\"\nimport RelationsAccountProfileBase from '../RelationsAccountProfileBase'\n\nimport { GET_ACCOUNT_CLASSPASSES_QUERY, DELETE_ACCOUNT_CLASSPASS } from \"./queries\"\n\n\nfunction AccountClasspasses({t, match}) {\n  const accountId = match.params.account_id\n  const activeLink = \"classpasses\"\n  const cardTitle = t('relations.account.classpasses.title')\n  const sidebarButton = <HasPermissionWrapper \n    permission=\"add\"\n    resource=\"accountclasspass\">\n      <Link to={`/relations/accounts/${accountId}/classpasses/add`}>\n        <Button color=\"primary btn-block mb-6\">\n          <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('relations.account.classpasses.add')}\n        </Button>\n      </Link>\n  </HasPermissionWrapper>\n\n  const {loading, error, data, fetchMore} = useQuery(GET_ACCOUNT_CLASSPASSES_QUERY, {\n    variables: { accountId: accountId }\n  })\n  const [deleteAccountClasspass] = useMutation(DELETE_ACCOUNT_CLASSPASS)\n\n  if (loading) return(\n    <RelationsAccountProfileBase activeLink={activeLink} sidebarButton={sidebarButton}>\n      <Card title={cardTitle}>\n        {t('general.loading_with_dots')}\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n\n  if (error) return(\n    <RelationsAccountProfileBase activeLink={activeLink} sidebarButton={sidebarButton}>\n      {console.log(error)}\n      <Card title={cardTitle}>\n        {t('general.error_sad_smiley')}\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n\n  const account = data.account\n  const accountClasspasses = data.accountClasspasses\n\n  return (\n    <RelationsAccountProfileBase \n      user={account}\n      activeLink={activeLink}\n      sidebarButton={sidebarButton}\n    >\n      <ContentCard \n        cardTitle={t('relations.account.classpasses.title')}\n        pageInfo={accountClasspasses.pageInfo}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: accountClasspasses.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.accountClasspasses.edges\n              const pageInfo = fetchMoreResult.accountClasspasses.pageInfo\n\n              return newEdges.length\n                ? {\n                    // Put the new accountClasspasses at the end of the list and update `pageInfo`\n                    // so we have the new `endCursor` and `hasNextPage` values\n                    accountClasspasses: {\n                      __typename: previousResult.accountClasspasses.__typename,\n                      edges: [ ...previousResult.accountClasspasses.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                : previousResult\n            }\n          })\n        }} \n      >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.date_start')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.date_end')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.classes_remaining')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader> \n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {accountClasspasses.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    {node.organizationClasspass.name}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.dateStart}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.dateEnd}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.classesRemainingDisplay}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <Link to={\"/relations/accounts/\" + match.params.account_id + \"/classpasses/edit/\" + node.id}>\n                      <Button className='btn-sm' \n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    </Link>\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                      title={t('general.delete')} \n                      href=\"\"\n                      onClick={() => {\n                        confirm_delete({\n                          t: t,\n                          msgConfirm: t(\"relations.account.classpasses.delete_confirm_msg\"),\n                          msgDescription: <p>{node.organizationClasspass.name} {node.dateStart}</p>,\n                          msgSuccess: t('relations.account.classpasses.deleted'),\n                          deleteFunction: deleteAccountClasspass,\n                          functionVariables: { variables: {\n                            input: {\n                              id: node.id\n                            }\n                          }, refetchQueries: [\n                            {query: GET_ACCOUNT_CLASSPASSES_QUERY, variables: { accountId: accountId }} \n                          ]}\n                        })\n                    }}>\n                      <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n                    </button>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>    \n    </RelationsAccountProfileBase>\n  )\n}\n\n        \nexport default withTranslation()(withRouter(AccountClasspasses))","import { t } from 'i18next'\nimport * as Yup from 'yup'\nimport { yupToFormErrors } from 'formik';\n\nexport const CLASSPASS_SCHEMA = Yup.object().shape({\n  organizationClasspass: Yup.string()\n    .required(t('yup.field_required')),\n  dateStart: Yup.date()\n    .required(t('yup.field_required')),\n  dateEnd: Yup.date()\n    .nullable(),\n  note: Yup.string(),\n})\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from \"uuid\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../plugin_config/tinymce\"\nimport CSDatePicker from \"../../../ui/CSDatePicker\"\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid,\n} from \"tabler-react\";\n\n\nconst AccountClasspassForm = ({ t, history, inputData, isSubmitting, setFieldValue, setFieldTouched, errors, values, returnUrl }) => (\n  <FoForm>\n    <Card.Body> \n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.classpass')}>\n            <Field component=\"select\" \n                  name=\"organizationClasspass\" \n                  className={(errors.organizationClasspass) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\">\n              <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n              {inputData.organizationClasspasses.edges.map(({ node }) =>\n                <option value={node.id} key={v4()}>{node.name}</option>\n              )}\n            </Field>\n            <ErrorMessage name=\"organizationClasspass\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row> \n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.date_start')}>\n            <CSDatePicker \n              className={(errors.dateStart) ? \"form-control is-invalid\" : \"form-control\"} \n              selected={values.dateStart}\n              onChange={(date) => {\n                setFieldValue(\"dateStart\", date)\n                setFieldTouched(\"dateEnd\", true)\n              }}\n              onBlur={() => setFieldTouched(\"dateStart\", true)}\n            />\n            <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n        <Grid.Col>\n          <Form.Group label={t('general.date_end')}>\n            <CSDatePicker \n              selected={values.dateEnd}\n              onChange={(date) => {\n                setFieldValue(\"dateEnd\", date)\n                setFieldTouched(\"dateEnd\", true)\n              }}\n              onBlur={() => setFieldTouched(\"dateEnd\", true)}\n              placeholderText={t('schedule.classes.placeholder_enddate')}\n            />\n            <ErrorMessage name=\"dateEnd\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n        </Grid.Row>\n      <Form.Group label={t('general.note')}>\n        <Editor\n          tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n          textareaName=\"note\"\n          initialValue={values.note}\n          init={tinymceBasicConf}\n          onChange={(e) => setFieldValue(\"note\", e.target.getContent())}\n          onBlur={() => setFieldTouched(\"note\", true)}\n        />\n        <ErrorMessage name=\"note\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n    </Card.Body>\n    <Card.Footer>\n        <Button \n          className=\"pull-right\"\n          color=\"primary\"\n          disabled={isSubmitting}\n          type=\"submit\"\n        >\n          {t('general.submit')}\n        </Button>\n        <Button\n          type=\"button\" \n          color=\"link\" \n          onClick={() => history.push(returnUrl)}\n        >\n          {t('general.cancel')}\n        </Button>\n    </Card.Footer>\n  </FoForm>\n)\n\n\nexport default withTranslation()(withRouter(AccountClasspassForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_CLASSPASSES_QUERY, GET_INPUT_VALUES_QUERY, CREATE_ACCOUNT_CLASSPASS } from './queries'\nimport { CLASSPASS_SCHEMA } from './yupSchema'\nimport AccountClasspassForm from './AccountClasspassForm'\nimport RelationsAccountProfileBase from '../RelationsAccountProfileBase';\n\nimport {\n  Icon,\n  Button,\n  Card,\n} from \"tabler-react\";\nimport { dateToLocalISO } from '../../../../tools/date_tools'\n\n\n\nfunction AccountClasspassAdd({t, match, history}) {\n  const accountId = match.params.account_id\n  const activeLink = \"classpasses\"\n  const cardTitle = t('relations.account.classpasses.title_add')\n  const returnUrl = `/relations/accounts/${accountId}/classpasses`\n  \n  const {loading, error, data} = useQuery(GET_INPUT_VALUES_QUERY, { \n    variables: { accountId: accountId }\n  })\n  const [createAccountClasspass] = useMutation(CREATE_ACCOUNT_CLASSPASS)\n\n  const sidebarButton = <Link to={returnUrl}>\n    <Button color=\"primary btn-block mb-6\">\n      <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n    </Button>\n  </Link>\n\n  if (loading) return(\n    <RelationsAccountProfileBase activeLink={activeLink} sidebarButton={sidebarButton}>\n      <Card title={cardTitle}>\n        {t('general.loading_with_dots')}\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n\n  if (error) return (\n    <RelationsAccountProfileBase activeLink={activeLink} sidebarButton={sidebarButton}>\n      {console.log(error)}\n      <Card title={cardTitle}>\n        {t('general.error_sad_smiley')}\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n  \n  const inputData = data\n  const account = data.account\n\n  return (\n    <RelationsAccountProfileBase\n      activeLink={activeLink}\n      user={account}\n      sidebarButton={sidebarButton} \n    >\n      <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle}</Card.Title>\n        </Card.Header>\n        <Card.Body>\n          <Formik\n            initialValues={{ \n              organizationClasspass: \"\",\n              dateStart: new Date(),\n              note: \"\",\n            }}\n            validationSchema={CLASSPASS_SCHEMA}\n            onSubmit={(values, { setSubmitting }, errors) => {\n                console.log('submit values:')\n                console.log(values)\n                console.log(errors)\n\n                \n                let dateEnd\n                if (values.dateEnd) {\n                  dateEnd = dateToLocalISO(values.dateEnd)\n                } else {\n                  dateEnd = values.dateEnd\n                }\n\n                createAccountClasspass({ variables: {\n                  input: {\n                    account: accountId, \n                    organizationClasspass: values.organizationClasspass,\n                    dateStart: dateToLocalISO(values.dateStart),\n                    dateEnd: dateEnd,\n                    note: values.note,\n                  }\n                }, refetchQueries: [\n                    {query: GET_ACCOUNT_CLASSPASSES_QUERY, variables: { accountId: accountId}}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    const classpassId = data.createAccountClasspass.accountClasspass.id\n                    history.push(`/relations/accounts/${accountId}/classpasses/edit/${classpassId}`)\n                    toast.success((t('relations.account.classpasses.toast_add_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n              <AccountClasspassForm\n                inputData={inputData}\n                isSubmitting={isSubmitting}\n                setFieldValue={setFieldValue}\n                setFieldTouched={setFieldTouched}\n                errors={errors}\n                values={values}\n                returnUrl={returnUrl}\n              >\n                {console.log(errors)}\n              </AccountClasspassForm>\n            )}\n          </Formik>\n        </Card.Body>\n      </Card>\n    </RelationsAccountProfileBase>\n  ) \n}\n\nexport default withTranslation()(withRouter(AccountClasspassAdd))\n","// @flow\n\nimport React, {Component } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_CLASSPASSES_QUERY, GET_ACCOUNT_CLASSPASS_QUERY, UPDATE_ACCOUNT_CLASSPASS } from './queries'\nimport { CLASSPASS_SCHEMA } from './yupSchema'\nimport AccountClasspassForm from './AccountClasspassForm'\nimport RelationsAccountProfileBase from '../RelationsAccountProfileBase';\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport { dateToLocalISO } from '../../../../tools/date_tools'\n\nimport ProfileMenu from \"../ProfileMenu\"\n\n\nfunction AccountClasspassEdit({t, history, match}) {\n  const id = match.params.id\n  const accountId = match.params.account_id\n  const activeLink = \"classpasses\"\n  const cardTitle = t('relations.account.classpasses.title_edit')\n  const returnUrl = `/relations/accounts/${accountId}/classpasses`\n  \n  const {loading, error, data} = useQuery(GET_ACCOUNT_CLASSPASS_QUERY, {\n    variables: { id: id, accountId: accountId }\n  })\n  const [updateClasspass] = useMutation(UPDATE_ACCOUNT_CLASSPASS)\n\n  const sidebarButton = <Link to={returnUrl}>\n    <Button color=\"primary btn-block mb-6\">\n      <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n    </Button>\n  </Link>\n\n  if (loading) return(\n    <RelationsAccountProfileBase activeLink={activeLink} sidebarButton={sidebarButton}>\n      <Card title={cardTitle}>\n        {t('general.loading_with_dots')}\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n\n  if (error) return (\n    <RelationsAccountProfileBase activeLink={activeLink} sidebarButton={sidebarButton}>\n      {console.log(error)}\n      <Card title={cardTitle}>\n        {t('general.error_sad_smiley')}\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n\n  const inputData = data\n  const account = data.account\n  const initialdata = data.accountClasspass\n\n    // DatePicker doesn't like a string as an initial value\n  // This makes it a happy DatePicker :)\n  let dateStart = null\n  let dateEnd = null\n  if (initialdata.dateStart) {\n    dateStart = new Date(initialdata.dateStart)\n  }\n  if (initialdata.dateEnd) {\n    dateEnd = new Date(initialdata.dateEnd)\n  }\n\n  return (\n    <RelationsAccountProfileBase\n      activeLink={activeLink}\n      user={account}\n      sidebarButton={sidebarButton} \n    >\n      <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle}</Card.Title>\n        </Card.Header>\n        <Card.Body>\n          <Formik\n            initialValues={{ \n              organizationClasspass: initialdata.organizationClasspass.id,\n              dateStart: dateStart,\n              dateEnd: dateEnd,\n              note: initialdata.note,\n            }}\n            validationSchema={CLASSPASS_SCHEMA}\n            onSubmit={(values, { setSubmitting }, errors) => {\n                console.log('submit values:')\n                console.log(values)\n                console.log(errors)\n\n                \n                let dateEnd\n                if (values.dateEnd) {\n                  dateEnd = dateToLocalISO(values.dateEnd)\n                } else {\n                  dateEnd = values.dateEnd\n                }\n\n                updateClasspass({ variables: {\n                  input: {\n                    id: id,\n                    organizationClasspass: values.organizationClasspass,\n                    dateStart: dateToLocalISO(values.dateStart),\n                    dateEnd: dateEnd,\n                    note: values.note,\n                  }\n                }, refetchQueries: [\n                    {query: GET_ACCOUNT_CLASSPASSES_QUERY, variables: { accountId: accountId }}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    toast.success((t('relations.account.classpasses.toast_edit_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n              <AccountClasspassForm\n                inputData={inputData}\n                isSubmitting={isSubmitting}\n                setFieldValue={setFieldValue}\n                setFieldTouched={setFieldTouched}\n                errors={errors}\n                values={values}\n                returnUrl={returnUrl}\n              >\n                {console.log(errors)}\n              </AccountClasspassForm>\n            )}\n          </Formik>\n        </Card.Body>\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountClasspassEdit))\n","// @flow\n\nimport React from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport RelationsAccountsBack from \"../RelationsAccountsBack\"\n\nimport ProfileMenu from \"../ProfileMenu\"\nimport ProfileCardSmall from \"../../../ui/ProfileCardSmall\"\n\nimport { GET_ACCOUNT_QUERY } from '../queries'\n\n\nfunction AccountFinancePaymentBatchcAtegoryItemsBase({ t, history, match, children, showBack=false }) {\n  const accountId = match.params.account_id\n\n  const { loading, error, data } = useQuery(GET_ACCOUNT_QUERY, {\n    variables: { id: accountId }\n  })\n\n  if (loading) return <p>{t('general.loading_with_dots')}</p>\n  // Error\n  if (error) {\n    console.log(error)\n    return <p>{t('general.error_sad_smiley')}</p>\n  }\n\n  const account = data.account\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={account.firstName + \" \" + account.lastName}>\n            <RelationsAccountsBack />\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <ProfileCardSmall user={account}/>\n              {!(showBack) ?\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"accountfinancepaymentbatchcategoryitem\">\n                  <Link to={`/relations/accounts/${match.params.account_id}/finance_payment_batch_category_items/add`}>\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('relations.account.finance_payment_batch_category_items.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n                : \"\" \n              }\n              {(showBack) ?\n                <HasPermissionWrapper permission=\"view\"\n                                      resource=\"accountfinancepaymentbatchcategoryitem\">\n                  <Link to={`/relations/accounts/${match.params.account_id}/finance_payment_batch_category_items/`}>\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n                : \"\"\n              }\n              <ProfileMenu \n                activeLink='finance_payment_batch_category_item'\n                accountId={accountId}\n              /> \n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}    \n        \nexport default withTranslation()(withRouter(AccountFinancePaymentBatchcAtegoryItemsBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEMS_QUERY = gql`\n  query AccountFinancePaymentBatchCategoryItems($after: String, $before: String, $account: ID!) {\n    accountFinancePaymentBatchCategoryItems(first: 15, before: $before, after: $after, account: $account) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          financePaymentBatchCategory {\n            id\n            name\n          }\n          year\n          month\n          amountDisplay\n          description\n        }\n      }\n    }\n  }\n`\n\nexport const GET_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM_QUERY = gql`\n  query AccountFinancePaymentBatchCategoryItem($id: ID!) {\n    accountFinancePaymentBatchCategoryItem(id: $id) {\n      id\n      financePaymentBatchCategory {\n        id\n        name\n      }\n      year\n      month\n      amount\n      description\n    }\n    financePaymentBatchCategories(first: 100, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n          batchCategoryType\n        }\n      }\n    }\n  }\n`\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query AccountPaymentBatchCategoryItemInputValues($after: String, $before: String) {\n    financePaymentBatchCategories(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n          batchCategoryType\n        }\n      }\n    }\n  }\n`\n\nexport const CREATE_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM = gql`\n  mutation CreateAccountFinancePaymentBatchCategoryItem($input: CreateAccountFinancePaymentBatchCategoryItemInput!) {\n    createAccountFinancePaymentBatchCategoryItem(input: $input) {\n      accountFinancePaymentBatchCategoryItem {\n        id\n      }\n    }\n  }\n`\n\nexport const UPDATE_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM = gql`\n  mutation UpdateAccountFinancePaymentBatchCategoryItem($input: UpdateAccountFinancePaymentBatchCategoryItemInput!) {\n    updateAccountFinancePaymentBatchCategoryItem(input: $input) {\n      accountFinancePaymentBatchCategoryItem {\n        id\n      }\n    }\n  }\n`\n\nexport const DELETE_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM = gql`\n  mutation DeleteAccountFinancePaymentBatchCategoryItem($input: DeleteAccountFinancePaymentBatchCategoryItemInput!) {\n    deleteAccountFinancePaymentBatchCategoryItem(input: $input) {\n      ok\n    }\n  }\n`\n","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Icon,\n  Table\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport { toast } from 'react-toastify'\n\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport ContentCard from \"../../../general/ContentCard\"\nimport AccountFinancePaymentBatchCategoryItemsBase from \"./AccountFinancePaymentBatchCategoryItemsBase\"\n\nimport { \n  GET_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEMS_QUERY,\n  DELETE_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM\n} from \"./queries\"\n\n\n\nfunction AccountFinancePaymentBatchCategoryItems({ t, history, match }) {\n  const accountId = match.params.account_id\n\n  const { loading, error, data, fetchMore } = useQuery(GET_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEMS_QUERY, {\n    variables: { account: accountId }\n  })\n  const [deleteAccountFinancePaymentBatchCategoryItem] = useMutation(DELETE_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM)\n\n  if (loading) return (\n    <AccountFinancePaymentBatchCategoryItemsBase>\n      <p>{t('general.loading_with_dots')}</p>\n    </AccountFinancePaymentBatchCategoryItemsBase>\n  )\n  // Error\n  if (error) {\n    console.log(error)\n    return (\n      <AccountFinancePaymentBatchCategoryItemsBase>\n        <p>{t('general.error_sad_smiley')}</p>\n      </AccountFinancePaymentBatchCategoryItemsBase>\n    )\n  }\n\n  let batchCategoryItems = data.accountFinancePaymentBatchCategoryItems\n\n  return (\n    <AccountFinancePaymentBatchCategoryItemsBase>\n      <ContentCard \n        cardTitle={t('relations.account.finance_payment_batch_category_items.title')}\n        hasCardBody={false}\n        pageInfo={batchCategoryItems.pageInfo}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: batchCategoryItems.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.accountFinancePaymentBatchCategoryItems.edges\n              const pageInfo = fetchMoreResult.accountFinancePaymentBatchCategoryItems.pageInfo\n\n              return newEdges.length\n                ? {\n                    // Put the new accountClasspasses at the end of the list and update `pageInfo`\n                    // so we have the new `endCursor` and `hasNextPage` values\n                    batchCategoryItems: {\n                      __typename: previousResult.accountFinancePaymentBatchCategoryItems.__typename,\n                      edges: [ ...previousResult.accountFinancePaymentBatchCategoryItems.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                : previousResult\n            }\n          })\n        }} \n      >\n        <Table cards>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.year')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.month')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.amount')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.category')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.description')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader> \n              <Table.ColHeader></Table.ColHeader> \n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {batchCategoryItems.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    {node.year}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.month}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.amountDisplay}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.financePaymentBatchCategory.name}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.description.replace(/(.{28})..+/, \"$1...\")}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <Link to={`/relations/accounts/${match.params.account_id}/finance_payment_batch_category_items/edit/${node.id}`}>\n                      <Button className='btn-sm' \n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    </Link>\n                  </Table.Col>\n                  <Table.Col>\n                    <button \n                      className=\"icon btn btn-link btn-sm\" \n                      title={t('general.delete')} \n                      href=\"\"\n                      onClick={() => {\n                        confirm_delete({\n                          t: t,\n                          msgConfirm: t(\"relations.account.finance_payment_batch_category_items.delete_confirm_msg\"),\n                          msgDescription: <p><br />{node.financePaymentBatchCategory.name} {node.amountDisplay} <br/>{node.description}</p>,\n                          msgSuccess: t('relations.account.finance_payment_batch_category_items.deleted'),\n                          deleteFunction: deleteAccountFinancePaymentBatchCategoryItem,\n                          functionVariables: { variables: {\n                            input: {\n                              id: node.id\n                            }\n                          }, refetchQueries: [\n                            {query: GET_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEMS_QUERY, variables: { \n                              account: accountId\n                            }} \n                          ]}\n                        })\n                    }}>\n                      <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n                    </button>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </AccountFinancePaymentBatchCategoryItemsBase>\n  )\n}\n      \n        \nexport default withTranslation()(withRouter(AccountFinancePaymentBatchCategoryItems))\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\nimport { yupToFormErrors } from 'formik';\n\nexport const ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM_SCHEMA = Yup.object().shape({\n  financePaymentBatchCategory: Yup.string()\n    .required(t('yup.field_required')),\n  year: Yup.number()\n    .required()\n    .positive()\n    .min(1000)\n    .max(9999),\n  month: Yup.number()\n    .required()\n    .positive()\n    .min(1)\n    .max(12),\n  amount: Yup.number()\n    .required(t('yup.field_required')),\n  description: Yup.string(),\n})\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from \"uuid\"\nimport { Link } from \"react-router-dom\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../plugin_config/tinymce\"\nimport CSDatePicker from \"../../../ui/CSDatePicker\"\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid,\n} from \"tabler-react\";\n\n\nconst AccountFinancePaymentBatchCategoryItemsForm = ({ t, history, inputData, isSubmitting, errors, returnUrl }) => (\n  <FoForm>\n    <Card.Body> \n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.year')} >\n            <Field type=\"text\" \n                  name=\"year\" \n                  className={(errors.year) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\" />\n            <ErrorMessage name=\"year\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n        <Grid.Col>\n          <Form.Group label={t('general.month')} >\n            <Field type=\"text\" \n                  name=\"month\" \n                  className={(errors.month) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\" />\n            <ErrorMessage name=\"month\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.amount')} >\n            <Field type=\"text\" \n                  name=\"amount\" \n                  className={(errors.amount) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\" />\n            <ErrorMessage name=\"amount\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n        <Grid.Col>\n          <Form.Group label={t('general.category')}>\n            <Field component=\"select\" \n                  name=\"financePaymentBatchCategory\" \n                  className={(errors.financePaymentBatchCategory) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\">\n              <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n              {inputData.financePaymentBatchCategories.edges.map(({ node }) =>\n                <option value={node.id} key={v4()}>{node.name}</option>\n              )}\n            </Field>\n            <ErrorMessage name=\"financePaymentBatchCategory\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row> \n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.description')} >\n            <Field type=\"text\" \n                  name=\"description\" \n                  className={(errors.description) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\" />\n            <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row>\n    </Card.Body>\n    <Card.Footer>\n        <Button \n          className=\"pull-right\"\n          color=\"primary\"\n          disabled={isSubmitting}\n          type=\"submit\"\n        >\n          {t('general.submit')}\n        </Button>\n        <Link to={returnUrl}>\n          <Button\n            type=\"button\" \n            color=\"link\" \n          >\n            {t('general.cancel')}\n          </Button>\n        </Link>\n    </Card.Footer>\n  </FoForm>\n)\n\n\nexport default withTranslation()(withRouter(AccountFinancePaymentBatchCategoryItemsForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { \n  GET_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEMS_QUERY, \n  CREATE_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM,\n  GET_INPUT_VALUES_QUERY \n} from './queries'\nimport { ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM_SCHEMA } from './yupSchema'\nimport AccountFinancePaymentBatchCategoryItemsForm from './AccountFinancePaymentBatchCategoryItemsForm'\n\nimport {\n  Card,\n} from \"tabler-react\";\n\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport AccountFinancePaymentBatchCategoryItemsBase from \"./AccountFinancePaymentBatchCategoryItemsBase\"\n\nfunction AccountFinancePaymentBatchCategoryItemAdd({ t, history, match }) {\n  const accountId = match.params.account_id\n  const returnUrl = `/relations/accounts/${accountId}/finance_payment_batch_category_items`\n\n  const { loading, error, data } = useQuery(GET_INPUT_VALUES_QUERY)\n  const [addAccountFinancePaymentBatchCategoryItem] = useMutation(\n    CREATE_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM\n  )\n\n  if (loading) {\n    return (\n      <AccountFinancePaymentBatchCategoryItemsBase showBack={true}>\n        <Card title={t('relations.account.finance_payment_batch_category_items.title_add')}>\n          <Card.Body>\n            {t(\"general.loading_with_dots\")}\n          </Card.Body>\n        </Card>\n      </AccountFinancePaymentBatchCategoryItemsBase>\n    )\n  }\n\n  if (error) {\n    return (\n      <AccountFinancePaymentBatchCategoryItemsBase showBack={true}>\n        <Card title={t('relations.account.finance_payment_batch_category_items.title_add')}>\n          <Card.Body>\n            {t(\"relations.account.finance_payment_batch_category_items.error_loading\")}\n          </Card.Body>\n        </Card>\n      </AccountFinancePaymentBatchCategoryItemsBase>\n    )\n  }\n\n  const inputData = data\n\n  return (\n    <AccountFinancePaymentBatchCategoryItemsBase showBack={true}>\n      <Card title={t('relations.account.finance_payment_batch_category_items.title_add')}>\n        <Formik\n          initialValues={{ \n            financePaymentBatchCategory: \"\",\n            year: new Date().getFullYear(),\n            month: new Date().getMonth() + 1,\n            amount: \"\",\n            description: \"\"\n          }}\n          validationSchema={ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM_SCHEMA}\n          onSubmit={(values, { setSubmitting }, errors) => {\n              console.log('submit values:')\n              console.log(values)\n              console.log(errors)\n\n              addAccountFinancePaymentBatchCategoryItem({ variables: {\n                input: {\n                  account: accountId, \n                  amount: values.amount,\n                  year: values.year,\n                  month: values.month,\n                  financePaymentBatchCategory: values.financePaymentBatchCategory,\n                  description: values.description\n                }\n              }, refetchQueries: [\n                  {query: GET_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEMS_QUERY, variables: {account: accountId}}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('relations.account.finance_payment_batch_category_items.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors, values }) => (\n            <AccountFinancePaymentBatchCategoryItemsForm\n              inputData={inputData}\n              isSubmitting={isSubmitting}\n              errors={errors}\n              returnUrl={returnUrl}\n            >\n              {console.log(errors)}\n            </AccountFinancePaymentBatchCategoryItemsForm>\n          )}\n        </Formik>\n      </Card>\n    </AccountFinancePaymentBatchCategoryItemsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountFinancePaymentBatchCategoryItemAdd))\n","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { \n  GET_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEMS_QUERY, \n  GET_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM_QUERY, \n  UPDATE_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM\n} from './queries'\nimport { ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM_SCHEMA } from './yupSchema'\nimport AccountFinancePaymentBatchCategoryItemsForm from './AccountFinancePaymentBatchCategoryItemsForm'\n\nimport {\n  Card,\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport AccountFinancePaymentBatchCategoryItemsBase from \"./AccountFinancePaymentBatchCategoryItemsBase\"\n\nfunction AccountFinancePaymentBatchCategoryItemEdit({ t, history, match }) {\n  const accountId = match.params.account_id\n  const accountFinancePaymentBatchCategoryItemId = match.params.id\n  const returnUrl = `/relations/accounts/${accountId}/finance_payment_batch_category_items`\n  const cardTitle = t('relations.account.finance_payment_batch_category_items.title_edit')\n\n  const { loading, error, data } = useQuery(GET_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM_QUERY, { variables: {\n    id: accountFinancePaymentBatchCategoryItemId\n  }})\n  const [updateAccountFinancePaymentBatchCategoryItem] = useMutation(\n    UPDATE_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM\n  )\n\n  if (loading) {\n    return (\n      <AccountFinancePaymentBatchCategoryItemsBase showBack={true}>\n        <Card title={cardTitle}>\n          <Card.Body>\n            {t(\"general.loading_with_dots\")}\n          </Card.Body>\n        </Card>\n      </AccountFinancePaymentBatchCategoryItemsBase>\n    )\n  }\n\n  if (error) {\n    return (\n      <AccountFinancePaymentBatchCategoryItemsBase showBack={true}>\n        <Card title={cardTitle}>\n          <Card.Body>\n            {t(\"relations.account.finance_payment_batch_category_items.error_loading\")}\n          </Card.Body>\n        </Card>\n      </AccountFinancePaymentBatchCategoryItemsBase>\n    )\n  }\n\n  const inputData = data\n  const initialValues = data.accountFinancePaymentBatchCategoryItem\n\n  return (\n    <AccountFinancePaymentBatchCategoryItemsBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n          initialValues={{ \n            financePaymentBatchCategory: initialValues.financePaymentBatchCategory.id,\n            year: initialValues.year,\n            month: initialValues.month,\n            amount: initialValues.amount,\n            description: initialValues.description\n          }}\n          validationSchema={ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM_SCHEMA}\n          onSubmit={(values, { setSubmitting }, errors) => {\n              console.log('submit values:')\n              console.log(values)\n              console.log(errors)\n\n              updateAccountFinancePaymentBatchCategoryItem({ variables: {\n                input: {\n                  id: accountFinancePaymentBatchCategoryItemId, \n                  amount: values.amount,\n                  year: values.year,\n                  month: values.month,\n                  financePaymentBatchCategory: values.financePaymentBatchCategory,\n                  description: values.description\n                }\n              }, refetchQueries: [\n                  {query: GET_ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEMS_QUERY, variables: {account: accountId}}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('relations.account.finance_payment_batch_category_items.toast_edit_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors, values }) => (\n            <AccountFinancePaymentBatchCategoryItemsForm\n              inputData={inputData}\n              isSubmitting={isSubmitting}\n              errors={errors}\n              returnUrl={returnUrl}\n            >\n              {console.log(errors)}\n            </AccountFinancePaymentBatchCategoryItemsForm>\n          )}\n        </Formik>\n      </Card>\n    </AccountFinancePaymentBatchCategoryItemsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountFinancePaymentBatchCategoryItemEdit))\n","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_INVOICES_QUERY = gql`\n  query FinanceInvoices($after: String, $before: String, $status: String, $accountId: ID!) {\n    financeInvoices(first: 15, before: $before, after: $after, status: $status, account: $accountId) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          account {\n            id\n            fullName\n          }\n          invoiceNumber\n          status\n          summary\n          relationCompany\n          relationContactName\n          dateSent\n          dateDue\n          total\n          totalDisplay\n          balance\n          balanceDisplay\n        }\n      }\n    }\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      fullName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\nexport const GET_ACCOUNT_SUBSCRIPTION_QUERY = gql`\n  query AccountSubscription($id: ID!, $accountId: ID!, $after: String, $before: String) {\n    accountSubscription(id:$id) {\n      id\n      organizationSubscription {\n        id\n        name\n      }\n      financePaymentMethod {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      note\n      registrationFeePaid\n      createdAt\n    }\n    organizationSubscriptions(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    financePaymentMethods(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query InvoiceInputValues($after: String, $before: String, $accountId: ID!) {\n    financeInvoiceGroups(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\nexport const CREATE_ACCOUNT_INVOICE = gql`\n  mutation CreateFinanceInvoice($input: CreateFinanceInvoiceInput!) {\n    createFinanceInvoice(input: $input) {\n      financeInvoice {\n        id\n      }\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport RelationsAccountsBack from \"../RelationsAccountsBack\"\n\nimport ProfileMenu from \"../ProfileMenu\"\nimport ProfileCardSmall from \"../../../ui/ProfileCardSmall\"\n\nfunction AccountInvoicesBase({ t, match, history, children, account={} }) {\n  const accountId = match.params.account_id\n  let pageHeader\n  if (account) {\n    pageHeader = account.fullName\n  }\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={pageHeader} >\n            <RelationsAccountsBack />\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <ProfileCardSmall user={account}/>\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"financeinvoice\">\n                  <Link to={`/relations/accounts/${accountId}/invoices/add`}>\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('relations.account.invoices.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n              <ProfileMenu \n                activeLink='invoices' \n                accountId={accountId}\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountInvoicesBase))\n","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from '@apollo/client'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport moment from 'moment'\n\nimport {\n  Card,\n  Icon,\n  Button,\n  Table,\n  Text\n} from \"tabler-react\";\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport ContentCard from \"../../../general/ContentCard\"\n\nimport { GET_ACCOUNT_INVOICES_QUERY } from \"./queries\"\nimport CSLS from \"../../../../tools/cs_local_storage\"\nimport { DELETE_FINANCE_INVOICE } from \"../../../finance/invoices/queries\"\nimport FinanceInvoiceStatus from \"../../../ui/FinanceInvoiceStatus\"\nimport AccountInvoicesBase from './AccountInvoicesBase'\n\n\nfunction AccountInvoices({ t, location, match, history }) {\n  const accountId = match.params.account_id\n  const cardTitle = t('relations.account.invoices.title')\n\n  const { loading, error, data, fetchMore } = useQuery(GET_ACCOUNT_INVOICES_QUERY, {\n    variables: {accountId: accountId},\n    fetchPolicy: \"network-only\"\n  })\n  const [deleteFinanceInvoice] = useMutation(DELETE_FINANCE_INVOICE)\n\n  // Loading\n  if (loading) return (\n    <AccountInvoicesBase>\n      <Card title={cardTitle}>\n        <Card.Body>\n          <p>{t('general.loading_with_dots')}</p>\n        </Card.Body>\n      </Card>\n    </AccountInvoicesBase>\n  )\n  // Error\n  if (error) {\n    console.log(error)\n    return (\n      <AccountInvoicesBase>\n        <Card title={cardTitle}>\n          <Card.Body>\n            <p>{t('general.error_sad_smiley')}</p>\n          </Card.Body>\n        </Card>\n      </AccountInvoicesBase>\n    )\n  }\n\n  // Set back location for edit invoice\n  localStorage.setItem(CSLS.FINANCE_INVOICES_EDIT_RETURN, location.pathname)\n\n  let financeInvoices = data.financeInvoices\n  const account = data.account\n  \n  return (\n    <AccountInvoicesBase account={account}>\n      <ContentCard \n        cardTitle={cardTitle}\n        pageInfo={financeInvoices.pageInfo}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: financeInvoices.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.financeInvoices.edges\n              const pageInfo = fetchMoreResult.financeInvoices.pageInfo\n\n              return newEdges.length\n                ? {\n                    // Put the new financeInvoices at the end of the list and update `pageInfo`\n                    // so we have the new `endCursor` and `hasNextPage` values\n                    financeInvoices: {\n                      __typename: previousResult.financeInvoices.__typename,\n                      edges: [ ...previousResult.financeInvoices.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                : previousResult\n            }\n          })\n        }} \n      >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.invoices.invoice_number')} & {t('finance.invoices.summary')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.invoices.date')} & {t('finance.invoices.due')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.total')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.balance')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {financeInvoices.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    <FinanceInvoiceStatus status={node.status} />\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.invoiceNumber} <br />\n                    <Text.Small color=\"gray\">{node.summary.trunc(35)}</Text.Small>\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {moment(node.dateSent).format('LL')} <br />\n                    <Text.Small color=\"gray\">{moment(node.dateDue).format('LL')}</Text.Small>\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.totalDisplay}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.balanceDisplay}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <Button className='btn-sm' \n                            onClick={() => history.push(\"/finance/invoices/edit/\" + node.id)}\n                            color=\"secondary\">\n                      {t('general.edit')}\n                    </Button>\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                      title={t('general.delete')} \n                      href=\"\"\n                      onClick={() => {\n                        confirm_delete({\n                          t: t,\n                          msgConfirm: t(\"finance.invoices.delete_confirm_msg\"),\n                          msgDescription: <p>{node.invoiceNumber}</p>,\n                          msgSuccess: t('finance.invoices.deleted'),\n                          deleteFunction: deleteFinanceInvoice,\n                          functionVariables: { \n                            variables: {\n                              input: {\n                                id: node.id\n                              }\n                            }, \n                            refetchQueries: [\n                              {query: GET_ACCOUNT_INVOICES_QUERY, variables: {accountId: accountId}},\n                            ]\n                          }\n                        })\n                    }}>\n                      <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n                    </button>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </AccountInvoicesBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountInvoices))\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from \"uuid\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid,\n} from \"tabler-react\";\n\n\nconst AccountInvoiceAddForm = ({ t, history, inputData, isSubmitting, setFieldValue, setFieldTouched, errors, values, return_url }) => (\n  <FoForm>\n    <Card.Body>\n      <Form.Group label={t('general.finance_invoice_group')}>\n        <Field component=\"select\" \n              name=\"financeInvoiceGroup\" \n              className={(errors.financeInvoiceGroup) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\">\n          <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n          {inputData.financeInvoiceGroups.edges.map(({ node }) =>\n            <option value={node.id} key={v4()}>{node.name}</option>\n          )}\n        </Field>\n        <ErrorMessage name=\"financeInvoiceGroup\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('general.summary')}>\n        <Field type=\"text\" \n                name=\"summary\" \n                className={(errors.summary) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\" />\n        <ErrorMessage name=\"summary\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n    </Card.Body>\n    <Card.Footer>\n        <Button \n          className=\"pull-right\"\n          color=\"primary\"\n          disabled={isSubmitting}\n          type=\"submit\"\n        >\n          {t('general.submit')}\n        </Button>\n        <Link to={return_url}>\n          <Button\n            type=\"button\" \n            color=\"link\" \n          >\n              {t('general.cancel')}\n          </Button>\n        </Link>\n    </Card.Footer>\n  </FoForm>\n)\n\n\nexport default withTranslation()(withRouter(AccountInvoiceAddForm))","import { t } from 'i18next'\nimport * as Yup from 'yup'\nimport { yupToFormErrors } from 'formik';\n\nexport const SUBSCRIPTION_SCHEMA = Yup.object().shape({\n  organizationSubscription: Yup.string()\n    .required(t('yup.field_required')),\n  financePaymentMethod: Yup.string(),\n  dateStart: Yup.date()\n    .required(t('yup.field_required')),\n  dateEnd: Yup.date()\n    .nullable(),\n  registrationFeePaid: Yup.boolean(),\n  note: Yup.string(),\n})\n","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from '@apollo/client'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_SUBSCRIPTIONS_QUERY, GET_INPUT_VALUES_QUERY, CREATE_ACCOUNT_INVOICE } from './queries'\nimport { SUBSCRIPTION_SCHEMA } from './yupSchema'\nimport AccountInvoiceAddForm from './AccountInvoiceAddForm'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport { dateToLocalISO } from '../../../../tools/date_tools'\n\nimport ProfileMenu from \"../ProfileMenu\"\n\n\n\nfunction AccountInvoiceAdd({ t, match, history }) {\n  const account_id = match.params.account_id\n  const return_url = \"/relations/accounts/\" + account_id + '/invoices'\n  const { loading: queryLoading, error: queryError, data: queryData } = useQuery(\n    GET_INPUT_VALUES_QUERY, {\n      variables: {\n        accountId: account_id\n      }\n    }\n  )\n  const [createInvoice, { data }] = useMutation(CREATE_ACCOUNT_INVOICE, {\n    // onCompleted = () => history.push('/finance/invoices/edit/')\n  }) \n\n  // Query\n  // Loading\n  if (queryLoading) return <p>{t('general.loading_with_dots')}</p>\n  // Error\n  if (queryError) {\n    console.log(queryError)\n    return <p>{t('general.error_sad_smiley')}</p>\n  }\n  \n  console.log(queryData)\n  const account = queryData.account\n\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={account.firstName + \" \" + account.lastName} />\n          <Grid.Row>\n              <Grid.Col md={9}>\n                <Card>\n                  <Card.Header>\n                    <Card.Title>{t('relations.account.invoices.title_add')}</Card.Title>\n                  </Card.Header>\n                  <Formik\n                    initialValues={{\n                      financeInvoiceGroup: \"\",\n                      summary: \"\"\n                    }}\n                    // validationSchema={INVOICE_GROUP_SCHEMA}\n                    onSubmit={(values, { setSubmitting }) => {\n                      console.log('submit values:')\n                      console.log(values)\n\n                      createInvoice({ variables: {\n                        input: {\n                          account: account_id, \n                          financeInvoiceGroup: values.financeInvoiceGroup,\n                          summary: values.summary\n                        }\n                      }, refetchQueries: [\n                      ]})\n                      .then(({ data }) => {\n                          console.log('got data', data)\n                          toast.success((t('relations.account.invoices.title_add')), {\n                              position: toast.POSITION.BOTTOM_RIGHT\n                            })\n                          history.push('/finance/invoices/edit/' + data.createFinanceInvoice.financeInvoice.id)\n                          setSubmitting(false)\n                        }).catch((error) => {\n                          toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                              position: toast.POSITION.BOTTOM_RIGHT\n                            })\n                          console.log('there was an error sending the query', error)\n                          setSubmitting(false)\n                        })\n                      }}\n                  >\n                    {({ isSubmitting, errors, values, submitForm, setFieldTouched, setFieldValue }) => (\n                      <AccountInvoiceAddForm\n                        inputData={queryData}\n                        isSubmitting={isSubmitting}\n                        errors={errors}\n                        values={values}\n                        submitForm={submitForm}\n                        setFieldTouched={setFieldTouched}\n                        setFieldValue={setFieldValue}\n                        return_url={return_url}\n                      >\n                      </AccountInvoiceAddForm>   \n                    )}\n                  </Formik>\n                </Card>\n              </Grid.Col>\n              <Grid.Col md={3}>\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"accountsubscription\">\n                  <Link to={return_url}>\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n                <ProfileMenu \n                  activeLink='invoices'\n                  account_id={match.params.account_id}\n                />\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountInvoiceAdd))\n","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_MEMBERSHIPS_QUERY = gql`\n  query AccountMemberships($after: String, $before: String, $accountId: ID!) {\n    accountMemberships(first: 15, before: $before, after: $after, account: $accountId) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          organizationMembership {\n            id\n            name\n          }\n          financePaymentMethod {\n            id\n            name\n          }\n          dateStart\n          dateEnd\n          createdAt\n        }\n      }\n    }\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\nexport const GET_ACCOUNT_MEMBERSHIP_QUERY = gql`\n  query AccountMembership($id: ID!, $accountId: ID!, $after: String, $before: String, $archived: Boolean!) {\n    accountMembership(id:$id) {\n      id\n      organizationMembership {\n        id\n        name\n      }\n      financePaymentMethod {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      note\n      createdAt\n    }\n    organizationMemberships(first: 100, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    financePaymentMethods(first: 100, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query MembershipInputValues($after: String, $before: String, $archived: Boolean!, $accountId: ID!) {\n    organizationMemberships(first: 100, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    financePaymentMethods(first: 100, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport { toast } from 'react-toastify'\n\nimport BadgeBoolean from \"../../../ui/BadgeBoolean\"\nimport RelationsAccountsBack from \"../RelationsAccountsBack\"\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport ContentCard from \"../../../general/ContentCard\"\nimport ProfileMenu from \"../ProfileMenu\"\nimport ProfileCardSmall from \"../../../ui/ProfileCardSmall\"\n\nimport { GET_ACCOUNT_MEMBERSHIPS_QUERY } from \"./queries\"\n\nconst DELETE_ACCOUNT_MEMBERSHIP = gql`\n  mutation DeleteAccountMembership($input: DeleteAccountMembershipInput!) {\n    deleteAccountMembership(input: $input) {\n      ok\n    }\n  }\n`\n\n\nconst AccountMemberships = ({ t, history, match, archived=false }) => (\n  <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Query query={GET_ACCOUNT_MEMBERSHIPS_QUERY} variables={{ archived: archived, accountId: match.params.account_id }}> \n        {({ loading, error, data, refetch, fetchMore }) => {\n          // Loading\n          if (loading) return <p>{t('general.loading_with_dots')}</p>\n          // Error\n          if (error) {\n            console.log(error)\n            return <p>{t('general.error_sad_smiley')}</p>\n          }\n\n          const account = data.account\n          const accountMemberships = data.accountMemberships\n\n          return (\n            <Container>\n              <Page.Header title={account.firstName + \" \" + account.lastName} >\n                <RelationsAccountsBack />\n              </Page.Header>\n              <Grid.Row>\n                <Grid.Col md={9}>\n                  <ContentCard \n                    cardTitle={t('relations.account.memberships.title')}\n                    pageInfo={accountMemberships.pageInfo}\n                    onLoadMore={() => {\n                      fetchMore({\n                        variables: {\n                          after: accountMemberships.pageInfo.endCursor\n                        },\n                        updateQuery: (previousResult, { fetchMoreResult }) => {\n                          const newEdges = fetchMoreResult.accountMemberships.edges\n                          const pageInfo = fetchMoreResult.accountMemberships.pageInfo\n\n                          return newEdges.length\n                            ? {\n                                // Put the new accountMemberships at the end of the list and update `pageInfo`\n                                // so we have the new `endCursor` and `hasNextPage` values\n                                accountMemberships: {\n                                  __typename: previousResult.accountMemberships.__typename,\n                                  edges: [ ...previousResult.accountMemberships.edges, ...newEdges ],\n                                  pageInfo\n                                }\n                              }\n                            : previousResult\n                        }\n                      })\n                    }} \n                  >\n                    <Table>\n                      <Table.Header>\n                        <Table.Row key={v4()}>\n                          <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                          <Table.ColHeader>{t('general.date_start')}</Table.ColHeader>\n                          <Table.ColHeader>{t('general.date_end')}</Table.ColHeader>\n                          <Table.ColHeader>{t('general.payment_method')}</Table.ColHeader>\n                          <Table.ColHeader></Table.ColHeader> \n                        </Table.Row>\n                      </Table.Header>\n                      <Table.Body>\n                          {accountMemberships.edges.map(({ node }) => (\n                            <Table.Row key={v4()}>\n                              <Table.Col key={v4()}>\n                                {node.organizationMembership.name}\n                              </Table.Col>\n                              <Table.Col key={v4()}>\n                                {node.dateStart}\n                              </Table.Col>\n                              <Table.Col key={v4()}>\n                                {node.dateEnd}\n                              </Table.Col>\n                              <Table.Col key={v4()}>\n                                {(node.financePaymentMethod) ? node.financePaymentMethod.name : \"\"}\n                              </Table.Col>\n                              <Table.Col className=\"text-right\" key={v4()}>\n                                <Link to={\"/relations/accounts/\" + match.params.account_id + \"/memberships/edit/\" + node.id}>\n                                  <Button className='btn-sm' \n                                          color=\"secondary\">\n                                    {t('general.edit')}\n                                  </Button>\n                                </Link>\n                              </Table.Col>\n                              <Mutation mutation={DELETE_ACCOUNT_MEMBERSHIP} key={v4()}>\n                                {(deleteAccountMembership, { data }) => (\n                                  <Table.Col className=\"text-right\" key={v4()}>\n                                    <button className=\"icon btn btn-link btn-sm\" \n                                      title={t('general.delete')} \n                                      href=\"\"\n                                      onClick={() => {\n                                        confirm_delete({\n                                          t: t,\n                                          msgConfirm: t(\"relations.account.memberships.delete_confirm_msg\"),\n                                          msgDescription: <p>{node.organizationMembership.name} {node.dateStart}</p>,\n                                          msgSuccess: t('relations.account.memberships.deleted'),\n                                          deleteFunction: deleteAccountMembership,\n                                          functionVariables: { variables: {\n                                            input: {\n                                              id: node.id\n                                            }\n                                          }, refetchQueries: [\n                                            {query: GET_ACCOUNT_MEMBERSHIPS_QUERY, variables: { archived: archived, accountId: match.params.account_id }} \n                                          ]}\n                                        })\n                                    }}>\n                                      <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n                                    </button>\n                                  </Table.Col>\n                                )}\n                              </Mutation>\n                            </Table.Row>\n                          ))}\n                      </Table.Body>\n                    </Table>\n                  </ContentCard>\n                </Grid.Col>\n                <Grid.Col md={3}>\n                  <ProfileCardSmall user={account}/>\n                  <HasPermissionWrapper permission=\"add\"\n                                        resource=\"accountmembership\">\n                    <Link to={\"/relations/accounts/\" + match.params.account_id + \"/memberships/add\"}>\n                      <Button color=\"primary btn-block mb-6\">\n                              {/* //  onClick={() => history.push(\"/organization/memberships/add\")}> */}\n                        <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('relations.account.memberships.add')}\n                      </Button>\n                    </Link>\n                  </HasPermissionWrapper>\n                  <ProfileMenu \n                    activeLink='memberships' \n                    account_id={match.params.account_id}\n                  />\n                </Grid.Col>\n              </Grid.Row>\n            </Container>\n          )\n        }}\n      </Query>\n    </div>\n  </SiteWrapper>\n)\n      \n        \nexport default withTranslation()(withRouter(AccountMemberships))","import { t } from 'i18next'\nimport * as Yup from 'yup'\nimport { yupToFormErrors } from 'formik';\n\nexport const MEMBERSHIP_SCHEMA = Yup.object().shape({\n  organizationMembership: Yup.string()\n    .required(t('yup.field_required')),\n  financePaymentMethod: Yup.string(),\n  dateStart: Yup.date()\n    .required(t('yup.field_required')),\n  // dateEnd: Yup.date()\n  //   .nullable(),\n  note: Yup.string(),\n})\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from \"uuid\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../plugin_config/tinymce\"\nimport CSDatePicker from \"../../../ui/CSDatePicker\"\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid,\n} from \"tabler-react\";\n\n\nconst AccountMembershipForm = ({ t, history, inputData, isSubmitting, setFieldValue, setFieldTouched, errors, values, return_url }) => (\n  <FoForm>\n    <Card.Body> \n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.membership')}>\n            <Field component=\"select\" \n                  name=\"organizationMembership\" \n                  className={(errors.organizationMembership) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\">\n              <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n              {inputData.organizationMemberships.edges.map(({ node }) =>\n                <option value={node.id} key={v4()}>{node.name}</option>\n              )}\n            </Field>\n            <ErrorMessage name=\"organizationMembership\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n        <Grid.Col>\n          <Form.Group label={t('general.payment_method')}>\n            <Field component=\"select\" \n                  name=\"financePaymentMethod\" \n                  className={(errors.financePaymentMethod) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\">\n              <option value=\"\" key={v4()}></option>\n              {inputData.financePaymentMethods.edges.map(({ node }) =>\n                <option value={node.id} key={v4()}>{node.name}</option>\n              )}\n            </Field>\n            <ErrorMessage name=\"financePaymentMethod\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row> \n      <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={(values.frequencyType == \"SPECIFIC\") ? t('general.date') : t('general.date_start')}>\n              <CSDatePicker \n                className={(errors.dateStart) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.dateStart}\n                onChange={(date) => {\n                  setFieldValue(\"dateStart\", date)\n                  setFieldTouched(\"dateEnd\", true)\n                }}\n                onBlur={() => setFieldTouched(\"dateStart\", true)}\n              />\n              <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          { (values.frequencyType == \"SPECIFIC\") ? \"\" :\n            <Grid.Col>\n              <Form.Group label={t('general.date_end')}>\n                <CSDatePicker \n                  selected={values.dateEnd}\n                  onChange={(date) => {\n                    setFieldValue(\"dateEnd\", date)\n                    setFieldTouched(\"dateEnd\", true)\n                  }}\n                  onBlur={() => setFieldTouched(\"dateEnd\", true)}\n                  placeholderText={t('schedule.classes.placeholder_enddate')}\n                />\n                <ErrorMessage name=\"dateEnd\" component=\"span\" className=\"invalid-feedback\" />\n              </Form.Group>\n            </Grid.Col>\n          }\n        </Grid.Row>\n      <Form.Group label={t('general.note')}>\n        <Editor\n            textareaName=\"note\"\n            initialValue={values.note}\n            init={tinymceBasicConf}\n            onChange={(e) => setFieldValue(\"note\", e.target.getContent())}\n            onBlur={() => setFieldTouched(\"note\", true)}\n          />\n        <ErrorMessage name=\"note\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n    </Card.Body>\n    <Card.Footer>\n        <Button \n          className=\"pull-right\"\n          color=\"primary\"\n          disabled={isSubmitting}\n          type=\"submit\"\n        >\n          {t('general.submit')}\n        </Button>\n        <Button\n          type=\"button\" \n          color=\"link\" \n          onClick={() => history.push(return_url)}\n        >\n            {t('general.cancel')}\n        </Button>\n    </Card.Footer>\n  </FoForm>\n)\n\n\nexport default withTranslation()(withRouter(AccountMembershipForm))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { Query, Mutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_MEMBERSHIPS_QUERY, GET_INPUT_VALUES_QUERY } from './queries'\nimport { MEMBERSHIP_SCHEMA } from './yupSchema'\nimport AccountMembershipForm from './AccountMembershipForm'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport { dateToLocalISO } from '../../../../tools/date_tools'\n\nimport ProfileMenu from \"../ProfileMenu\"\n\n\nconst CREATE_ACCOUNT_MEMBERSHIP = gql`\n  mutation CreateAccountMembership($input: CreateAccountMembershipInput!) {\n    createAccountMembership(input: $input) {\n      accountMembership {\n        id\n        account {\n          id\n          firstName\n          lastName\n          email\n        }\n        organizationMembership {\n          id\n          name\n        }\n        financePaymentMethod {\n          id\n          name\n        }\n        dateStart\n        dateEnd\n        note     \n      }\n    }\n  }\n`\n\n\nclass AccountMembershipAdd extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Account membership add props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const history = this.props.history\n    const match = this.props.match\n    const account_id = match.params.account_id\n    const return_url = \"/relations/accounts/\" + account_id + \"/memberships\"\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n        <Query query={GET_INPUT_VALUES_QUERY} variables = {{archived: false, accountId: account_id}} >\n          {({ loading, error, data, refetch }) => {\n            // Loading\n            if (loading) return <p>{t('general.loading_with_dots')}</p>\n            // Error\n            if (error) {\n              console.log(error)\n              return <p>{t('general.error_sad_smiley')}</p>\n            }\n            \n            console.log('query data')\n            console.log(data)\n            const inputData = data\n            const account = data.account\n\n            return (\n              <Container>\n               <Page.Header title={account.firstName + \" \" + account.lastName} />\n               <Grid.Row>\n                  <Grid.Col md={9}>\n                  <Card>\n                    <Card.Header>\n                      <Card.Title>{t('relations.account.memberships.title_add')}</Card.Title>\n                    </Card.Header>\n                      <Mutation mutation={CREATE_ACCOUNT_MEMBERSHIP} onCompleted={() => history.push(return_url)}> \n                      {(createMembership, { data }) => (\n                          <Formik\n                              initialValues={{ \n                                organizationMembership: \"\",\n                                financePaymentMethod: \"\",\n                                dateStart: new Date(),\n                                note: \"\",\n                              }}\n                              validationSchema={MEMBERSHIP_SCHEMA}\n                              onSubmit={(values, { setSubmitting }, errors) => {\n                                  console.log('submit values:')\n                                  console.log(values)\n                                  console.log(errors)\n\n                                  \n                                  let dateEnd\n                                  if (values.dateEnd) {\n                                    dateEnd = dateToLocalISO(values.dateEnd)\n                                  } else {\n                                    dateEnd = values.dateEnd\n                                  }\n\n                                  createMembership({ variables: {\n                                    input: {\n                                      account: account_id, \n                                      organizationMembership: values.organizationMembership,\n                                      financePaymentMethod: values.financePaymentMethod,\n                                      dateStart: dateToLocalISO(values.dateStart),\n                                      dateEnd: dateEnd,\n                                      note: values.note,\n                                    }\n                                  }, refetchQueries: [\n                                      {query: GET_ACCOUNT_MEMBERSHIPS_QUERY, variables: {archived: false, accountId: account_id}}\n                                  ]})\n                                  .then(({ data }) => {\n                                      console.log('got data', data)\n                                      toast.success((t('relations.account.memberships.toast_add_success')), {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                    }).catch((error) => {\n                                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                      console.log('there was an error sending the query', error)\n                                      setSubmitting(false)\n                                    })\n                              }}\n                              >\n                              {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n                                <AccountMembershipForm\n                                  inputData={inputData}\n                                  isSubmitting={isSubmitting}\n                                  setFieldValue={setFieldValue}\n                                  setFieldTouched={setFieldTouched}\n                                  errors={errors}\n                                  values={values}\n                                  return_url={return_url}\n                                >\n                                  {console.log(errors)}\n                                </AccountMembershipForm>\n                              )}\n                          </Formik>\n                      )}\n                      </Mutation>\n                    </Card>\n                  </Grid.Col>\n                  <Grid.Col md={3}>\n                    <HasPermissionWrapper permission=\"add\"\n                                          resource=\"accountmembership\">\n                      <Link to={return_url}>\n                        <Button color=\"primary btn-block mb-6\">\n                          <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                        </Button>\n                      </Link>\n                    </HasPermissionWrapper>\n                    <ProfileMenu account_id={account_id} activeLink='memberships'/>\n                  </Grid.Col>\n                </Grid.Row>\n              </Container>\n            )}}\n          </Query>\n        </div>\n    </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(AccountMembershipAdd))\n","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { Query, Mutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_MEMBERSHIPS_QUERY, GET_ACCOUNT_MEMBERSHIP_QUERY } from './queries'\nimport { MEMBERSHIP_SCHEMA } from './yupSchema'\nimport AccountMembershipForm from './AccountMembershipForm'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport { dateToLocalISO } from '../../../../tools/date_tools'\n\nimport ProfileMenu from \"../ProfileMenu\"\n\n\nconst UPDATE_ACCOUNT_MEMBERSHIP = gql`\n  mutation UpdateAccountMembership($input: UpdateAccountMembershipInput!) {\n    updateAccountMembership(input: $input) {\n      accountMembership {\n        id\n        account {\n          id\n          firstName\n          lastName\n          email\n        }\n        organizationMembership {\n          id\n          name\n        }\n        financePaymentMethod {\n          id\n          name\n        }\n        dateStart\n        dateEnd\n        note\n      }\n    }\n  }\n`\n\n\nclass AccountMembershipEdit extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Account membership add props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const history = this.props.history\n    const match = this.props.match\n    const id = match.params.id\n    const account_id = match.params.account_id\n    const return_url = \"/relations/accounts/\" + account_id + \"/memberships\"\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n        <Query query={GET_ACCOUNT_MEMBERSHIP_QUERY} variables = {{archived: false,  accountId: account_id, id: id}} >\n          {({ loading, error, data, refetch }) => {\n            // Loading\n            if (loading) return <p>{t('general.loading_with_dots')}</p>\n            // Error\n            if (error) {\n              console.log(error)\n              return <p>{t('general.error_sad_smiley')}</p>\n            }\n            \n            console.log('query data')\n            console.log(data)\n            const inputData = data\n            const account = data.account\n            const initialdata = data.accountMembership\n\n            let initialPaymentMethod = \"\"\n            if (initialdata.financePaymentMethod) {\n              initialPaymentMethod = initialdata.financePaymentMethod.id\n            }\n\n            return (\n              <Container>\n               <Page.Header title={account.firstName + \" \" + account.lastName} />\n               <Grid.Row>\n                  <Grid.Col md={9}>\n                  <Card>\n                    <Card.Header>\n                      <Card.Title>{t('relations.account.memberships.title_edit')}</Card.Title>\n                    </Card.Header>\n                      <Mutation mutation={UPDATE_ACCOUNT_MEMBERSHIP} onCompleted={() => history.push(return_url)}> \n                      {(updateMembership, { data }) => (\n                          <Formik\n                              initialValues={{ \n                                organizationMembership: initialdata.organizationMembership.id,\n                                financePaymentMethod: initialPaymentMethod,\n                                dateStart: initialdata.dateStart,\n                                dateEnd: initialdata.dateEnd,\n                                note: initialdata.note,\n                                registrationFeePaid: initialdata.registrationFeePaid\n                              }}\n                              validationSchema={MEMBERSHIP_SCHEMA}\n                              onSubmit={(values, { setSubmitting }, errors) => {\n                                  console.log('submit values:')\n                                  console.log(values)\n                                  console.log(errors)\n\n                                  \n                                  let dateEnd\n                                  if (values.dateEnd) {\n                                    dateEnd = dateToLocalISO(values.dateEnd)\n                                  } else {\n                                    dateEnd = values.dateEnd\n                                  }\n\n                                  updateMembership({ variables: {\n                                    input: {\n                                      id: id,\n                                      organizationMembership: values.organizationMembership,\n                                      financePaymentMethod: values.financePaymentMethod,\n                                      dateStart: dateToLocalISO(values.dateStart),\n                                      dateEnd: dateEnd,\n                                      note: values.note,\n                                      registrationFeePaid: values.registrationFeePaid\n                                    }\n                                  }, refetchQueries: [\n                                      {query: GET_ACCOUNT_MEMBERSHIPS_QUERY, variables: {archived: false, accountId: account_id}}\n                                  ]})\n                                  .then(({ data }) => {\n                                      console.log('got data', data)\n                                      toast.success((t('relations.account.memberships.toast_edit_success')), {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                    }).catch((error) => {\n                                      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                          position: toast.POSITION.BOTTOM_RIGHT\n                                        })\n                                      console.log('there was an error sending the query', error)\n                                      setSubmitting(false)\n                                    })\n                              }}\n                              >\n                              {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n                                <AccountMembershipForm\n                                  inputData={inputData}\n                                  isSubmitting={isSubmitting}\n                                  setFieldValue={setFieldValue}\n                                  setFieldTouched={setFieldTouched}\n                                  errors={errors}\n                                  values={values}\n                                  return_url={return_url}\n                                >\n                                  {console.log(errors)}\n                                </AccountMembershipForm>\n                              )}\n                          </Formik>\n                      )}\n                      </Mutation>\n                    </Card>\n                  </Grid.Col>\n                  <Grid.Col md={3}>\n                    <HasPermissionWrapper permission=\"change\"\n                                          resource=\"accountmembership\">\n                      <Link to={return_url}>\n                        <Button color=\"primary btn-block mb-6\">\n                          <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                        </Button>\n                      </Link>\n                    </HasPermissionWrapper>\n                    <ProfileMenu account_id={account_id} activeLink='memberships'/>\n                  </Grid.Col>\n                </Grid.Row>\n              </Container>\n            )}}\n          </Query>\n        </div>\n    </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(AccountMembershipEdit))\n","import React, { Component } from 'react'\nimport { withTranslation } from 'react-i18next'\n\nimport {\n    Button,\n    Card,\n    Grid,\n  } from \"tabler-react\"\n\n\nclass LoadMoreOnBottomScroll extends Component {\n    componentDidMount() {\n      window.addEventListener(\"scroll\", this.handleOnScroll);\n    }\n  \n    componentWillUnmount() {\n      window.removeEventListener(\"scroll\", this.handleOnScroll);\n    }\n\n    handleOnScroll = () => {\n      // http://stackoverflow.com/questions/9439725/javascript-how-to-detect-if-browser-window-is-scrolled-to-bottom\n      var scrollTop =\n        (document.documentElement && document.documentElement.scrollTop) ||\n        document.body.scrollTop;\n      var scrollHeight =\n        (document.documentElement && document.documentElement.scrollHeight) ||\n        document.body.scrollHeight;\n      var clientHeight =\n        document.documentElement.clientHeight || window.innerHeight;\n      var scrolledToBottom = Math.ceil(scrollTop + clientHeight) >= scrollHeight;\n      if (scrolledToBottom) {\n        const pageInfo = this.props.pageInfo\n        if (pageInfo) {\n          if (pageInfo.hasNextPage) {\n            this.props.onLoadMore()\n          }\n        }\n      }\n    }\n\n    render() {\n      const t = this.props.t\n      const onLoadMore = this.props.onLoadMore \n      const pageInfo = this.props.pageInfo\n      const children = this.props.children\n\n\n      return(\n        <div>\n          <Grid.Row>\n            <Grid.Col md={12}>\n              {children}\n            </Grid.Col>\n          </Grid.Row>\n          <Grid.Row>\n            <Grid.Col md={12}>\n              <Card>\n                <Card.Body>\n                  {(!pageInfo) ? '':\n                    (pageInfo.hasNextPage) ? \n                      <Button \n                        link\n                        onClick={onLoadMore} \n                        >\n                        {t('general.load_more')}\n                      </Button>\n                    : t('general.loaded_all')\n                  }\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n          </Grid.Row>\n        </div>\n      )\n    }\n}\n\nLoadMoreOnBottomScroll.defaultProps = {\n  onLoadMore: f=>f\n}\n  \nexport default withTranslation()(LoadMoreOnBottomScroll)\n","// @flow\n\nimport React from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport RelationsAccountsBack from \"../RelationsAccountsBack\"\n\nimport ProfileMenu from \"../ProfileMenu\"\nimport ProfileCardSmall from \"../../../ui/ProfileCardSmall\"\n\nimport { GET_ACCOUNT_QUERY } from '../queries'\n\n\nfunction AccountNotesBase({ t, history, match, children, showBack=false }) {\n  const accountId = match.params.account_id\n\n  const { loading, error, data } = useQuery(GET_ACCOUNT_QUERY, {\n    variables: { id: accountId }\n  })\n\n  if (loading) return <p>{t('general.loading_with_dots')}</p>\n  // Error\n  if (error) {\n    console.log(error)\n    return <p>{t('general.error_sad_smiley')}</p>\n  }\n\n  const account = data.account\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={account.firstName + \" \" + account.lastName}>\n            <RelationsAccountsBack />\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <ProfileCardSmall user={account}/>\n              {!(showBack) ?\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"accountnote\">\n                  <Link to={`/relations/accounts/${match.params.account_id}/notes/add`}>\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('relations.account.notes.add')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n                : \"\" \n              }\n              {(showBack) ?\n                <HasPermissionWrapper permission=\"view\"\n                                      resource=\"accountnote\">\n                  <Link to={`/relations/accounts/${match.params.account_id}/notes/`}>\n                    <Button color=\"primary btn-block mb-6\">\n                      <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                    </Button>\n                  </Link>\n                </HasPermissionWrapper>\n                : \"\"\n              }\n              <ProfileMenu \n                activeLink='notes'\n                accountId={accountId}\n              /> \n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}    \n        \nexport default withTranslation()(withRouter(AccountNotesBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_NOTES_QUERY = gql`\n  query AccountNotes($after: String, $before: String, $account: ID!, $noteType: String!) {\n    accountNotes(first: 15, before: $before, after: $after, account: $account, noteType: $noteType ) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          note\n          injury\n          noteType\n          noteBy {\n            id\n            fullName\n          }\n          createdAt\n        }\n      }\n    }\n  }\n`\n\nexport const GET_ACCOUNT_NOTE_QUERY = gql`\n  query AccountNote($id: ID!) {\n    accountNote(id: $id) {\n      id\n      note\n      injury\n    }\n  }\n`\n\n\nexport const CREATE_ACCOUNT_NOTE = gql`\n  mutation CreateAccountNote($input: CreateAccountNoteInput!) {\n    createAccountNote(input: $input) {\n      accountNote {\n        id\n      }\n    }\n  }\n`\n\nexport const UPDATE_ACCOUNT_NOTE = gql`\n  mutation UpdateAccountNote($input: UpdateAccountNoteInput!) {\n    updateAccountNote(input: $input) {\n      accountNote {\n        id\n      }\n    }\n  }\n`\n\nexport const DELETE_ACCOUNT_NOTE = gql`\n  mutation DeleteAccountNote($input: DeleteAccountNoteInput!) {\n    deleteAccountNote(input: $input) {\n      ok\n    }\n  }\n`\n","import CSLS from \"../../../../tools/cs_local_storage\"\n\nexport function get_list_query_variables(accountId) {\n  let queryVars = {\n      account: accountId\n  }\n\n  let noteType = localStorage.getItem(CSLS.RELATIONS_ACCOUNT_NOTES_NOTE_TYPE)\n\n  queryVars.noteType = noteType  \n\n  console.log(queryVars)\n\n  return queryVars\n}\n\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport CSLS from \"../../../../tools/cs_local_storage\"\n\n\nimport {\n  BlogCard,\n  Button,\n  Badge,\n  Card,\n  Grid,\n  Icon,\n  Table\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport { toast } from 'react-toastify'\n\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport ContentCard from \"../../../general/ContentCard\"\nimport LoadMoreOnBottomScroll from \"../../../general/LoadMoreOnBottomScroll\"\nimport AccountNotesBase from \"./AccountNotesBase\"\n\nimport { \n  GET_ACCOUNT_NOTES_QUERY,\n  DELETE_ACCOUNT_NOTE\n} from \"./queries\"\n\nimport { get_list_query_variables } from \"./tools\"\n\n\n\nfunction AccountNotes({ t, history, match }) {\n  // Set some initial value for noteType, if not found\n  if (!localStorage.getItem(CSLS.RELATIONS_ACCOUNT_NOTES_NOTE_TYPE)) {\n    localStorage.setItem(CSLS.RELATIONS_ACCOUNT_NOTES_NOTE_TYPE, \"BACKOFFICE\") \n  }\n\n  const appSettings = useContext(AppSettingsContext)\n  const dateTimeFormatMoment = appSettings.dateTimeFormatMoment\n\n  const accountId = match.params.account_id\n\n  const { loading, error, data, fetchMore, refetch } = useQuery(GET_ACCOUNT_NOTES_QUERY, {\n    variables: get_list_query_variables(accountId)\n  })\n  const [deleteAccountNote] = useMutation(DELETE_ACCOUNT_NOTE)\n\n  if (loading) return (\n    <AccountNotesBase>\n      <p>{t('general.loading_with_dots')}</p>\n    </AccountNotesBase>\n  )\n  // Error\n  if (error) {\n    console.log(error)\n    return (\n      <AccountNotesBase>\n        <p>{t('general.error_sad_smiley')}</p>\n      </AccountNotesBase>\n    )\n  }\n\n  let notes = data.accountNotes\n\n  return (\n    <AccountNotesBase>\n      <Grid.Row>\n        <Grid.Col>\n          <div className=\"float-right mb-4\">\n            <Button.List>\n              <Button color={(localStorage.getItem(CSLS.RELATIONS_ACCOUNT_NOTES_NOTE_TYPE) === \"BACKOFFICE\") ? 'primary': 'secondary'}  \n                      size=\"\"\n                      onClick={() => {\n                        localStorage.setItem(CSLS.RELATIONS_ACCOUNT_NOTES_NOTE_TYPE, \"BACKOFFICE\")\n                        refetch(get_list_query_variables(accountId))\n                      }\n              }>\n                {t('relations.account.notes.backoffice')}\n              </Button>\n              <Button color={(localStorage.getItem(CSLS.RELATIONS_ACCOUNT_NOTES_NOTE_TYPE) === \"TEACHERS\") ? 'primary': 'secondary'} \n                      size=\"\" \n                      className=\"ml-2\" \n                      onClick={() => {\n                        localStorage.setItem(CSLS.RELATIONS_ACCOUNT_NOTES_NOTE_TYPE, \"TEACHERS\")\n                        refetch(get_list_query_variables(accountId))\n                      }\n              }>\n                {t('relations.account.notes.teachers')}\n              </Button>\n            </Button.List>\n          </div>\n        </Grid.Col>\n      </Grid.Row>\n      <LoadMoreOnBottomScroll \n        pageInfo={notes.pageInfo}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: notes.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.accountNotes.edges\n              const pageInfo = fetchMoreResult.accountNotes.pageInfo\n\n              return newEdges.length\n                ? {\n                    // Put the new accountClasspasses at the end of the list and update `pageInfo`\n                    // so we have the new `endCursor` and `hasNextPage` values\n                    accountNotes: {\n                      __typename: previousResult.accountNotes.__typename,\n                      edges: [ ...previousResult.accountNotes.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                : previousResult\n            }\n          })\n        }} \n      >\n        {notes.edges.map(({ node }) => (\n          <Card>\n            <Card.Body>\n              {(node.injury) ? <Badge color=\"danger\" className=\"float-right\">{t(\"general.injury\")}</Badge> : \"\"}\n              <div dangerouslySetInnerHTML={{__html: node.note}} />\n            </Card.Body>\n            <Card.Footer>\n              <Button \n                color=\"danger\"\n                size=\"sm\"\n                className=\"float-right\"\n                outline\n                onClick={() => {\n                  confirm_delete({\n                    t: t,\n                    msgConfirm: t(\"relations.account.notes.delete_confirm_msg\"),\n                    msgDescription: <p><div dangerouslySetInnerHTML={{__html: node.note}} /></p>,\n                    msgSuccess: t('relations.account.notes.deleted'),\n                    deleteFunction: deleteAccountNote,\n                    functionVariables: { \n                      variables: {\n                        input: {\n                          id: node.id\n                        }\n                      }, \n                      refetchQueries: [\n                        {query: GET_ACCOUNT_NOTES_QUERY, variables: get_list_query_variables(accountId) },\n                      ]\n                    }\n                  })\n                }}\n              >\n                <Icon name=\"trash-2\" />\n              </Button>\n              <Link to={`/relations/accounts/${match.params.account_id}/notes/edit/${node.id}`}>\n                <Button\n                  color=\"secondary\"\n                  size=\"sm\"\n                  className=\"float-right mr-4\"\n                  outline\n                >\n                  {t(\"general.edit\")}\n                </Button>\n              </Link>              \n              <small className=\"text-muted float-right mr-4\">{moment(node.createdAt).format(dateTimeFormatMoment)}</small>\n              {node.noteBy.fullName} <br />\n            </Card.Footer>\n          </Card>\n        ))}\n      </LoadMoreOnBottomScroll>\n    </AccountNotesBase>\n  )\n}\n      \n        \nexport default withTranslation()(withRouter(AccountNotes))\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { Link } from \"react-router-dom\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../plugin_config/tinymce\"\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid,\n} from \"tabler-react\";\n\n\nconst AccountNoteForm = ({ t, history, isSubmitting, values, errors, setFieldTouched, setFieldValue, returnUrl }) => (\n  <FoForm>\n    <Card.Body> \n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.note')}>\n          <Editor\n            tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n            textareaName=\"note\"\n            initialValue={values.note}\n            init={tinymceBasicConf}\n            onBlur={(e) => { \n              setFieldTouched(\"note\", true)\n              setFieldValue(\"note\", e.target.getContent())\n            }}\n          />\n          <ErrorMessage name=\"note\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group>\n            <Form.Label className=\"custom-switch\">\n                <Field \n                className=\"custom-switch-input\"\n                type=\"checkbox\" \n                name=\"injury\" \n                checked={values.injury} />\n                <span className=\"custom-switch-indicator\" ></span>\n                <span className=\"custom-switch-description\">{t('general.injury')}</span>\n            </Form.Label>\n            <ErrorMessage name=\"injury\" component=\"div\" />   \n          </Form.Group>  \n        </Grid.Col>\n      </Grid.Row>\n    </Card.Body>\n    <Card.Footer>\n        <Button \n          className=\"pull-right\"\n          color=\"primary\"\n          disabled={isSubmitting}\n          type=\"submit\"\n        >\n          {t('general.submit')}\n        </Button>\n        <Link to={returnUrl}>\n          <Button\n            type=\"button\" \n            color=\"link\" \n          >\n            {t('general.cancel')}\n          </Button>\n        </Link>\n    </Card.Footer>\n  </FoForm>\n)\n\n\nexport default withTranslation()(withRouter(AccountNoteForm))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport CSLS from \"../../../../tools/cs_local_storage\"\n\nimport { \n  GET_ACCOUNT_NOTES_QUERY, \n  CREATE_ACCOUNT_NOTE,\n} from './queries'\n// import { ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM_SCHEMA } from './yupSchema'\nimport AccountNoteForm from './AccountNoteForm'\n\nimport {\n  Card,\n} from \"tabler-react\";\n\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport AccountNotesBase from \"./AccountNotesBase\"\n\nimport { get_list_query_variables } from \"./tools\"\n\n\nfunction AccountNoteAdd({ t, history, match }) {\n  // Set some initial value for noteType, if not found\n  let noteType = localStorage.getItem(CSLS.RELATIONS_ACCOUNT_NOTES_NOTE_TYPE)\n  if (!noteType) {\n    localStorage.setItem(CSLS.RELATIONS_ACCOUNT_NOTES_NOTE_TYPE, \"BACKOFFICE\") \n  }\n\n  const accountId = match.params.account_id\n  const returnUrl = `/relations/accounts/${accountId}/notes`\n  const cardTitle = t('relations.account.notes.title_add')\n\n  const [addNote] = useMutation(\n    CREATE_ACCOUNT_NOTE\n  )\n\n  return (\n    <AccountNotesBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n          initialValues={{ \n            injury: false,\n            note: \"\"\n          }}\n          // validationSchema={ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM_SCHEMA}\n          onSubmit={(values, { setSubmitting }, errors) => {\n              console.log('submit values:')\n              console.log(values)\n              console.log(errors)\n\n              addNote({ variables: {\n                input: {\n                  account: accountId, \n                  noteType: noteType,\n                  injury: values.injury,\n                  note: values.note\n                }\n              }, refetchQueries: [\n                  {query: GET_ACCOUNT_NOTES_QUERY, variables: get_list_query_variables(accountId)}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('relations.account.notes.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n            <AccountNoteForm\n              isSubmitting={isSubmitting}\n              errors={errors}\n              values={values}\n              setFieldTouched={setFieldTouched}\n              setFieldValue={setFieldValue}\n              returnUrl={returnUrl}\n            >\n              {console.log(errors)}\n            </AccountNoteForm>\n          )}\n        </Formik>\n      </Card>\n    </AccountNotesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountNoteAdd))\n","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { \n  GET_ACCOUNT_NOTE_QUERY, \n  GET_ACCOUNT_NOTES_QUERY, \n  UPDATE_ACCOUNT_NOTE,\n} from './queries'\n// import { ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM_SCHEMA } from './yupSchema'\nimport AccountNoteForm from './AccountNoteForm'\n\nimport {\n  Card,\n} from \"tabler-react\";\n\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport AccountNotesBase from \"./AccountNotesBase\"\n\nimport { get_list_query_variables } from \"./tools\"\n\n\nfunction AccountNoteEdit({ t, history, match }) {\n  // Set some initial value for noteType, if not found\n\n  const accountId = match.params.account_id\n  const noteId = match.params.id\n  const returnUrl = `/relations/accounts/${accountId}/notes`\n  const cardTitle = t('relations.account.notes.title_edit')\n\n  const { loading, error, data } = useQuery(GET_ACCOUNT_NOTE_QUERY, {\n    variables: { id: noteId }\n  })\n  const [updateNote] = useMutation(\n    UPDATE_ACCOUNT_NOTE\n  )\n\n  if (loading) return (\n    <AccountNotesBase>\n      <p>{t('general.loading_with_dots')}</p>\n    </AccountNotesBase>\n  )\n  // Error\n  if (error) {\n    console.log(error)\n    return (\n      <AccountNotesBase>\n        <p>{t('general.error_sad_smiley')}</p>\n      </AccountNotesBase>\n    )\n  }\n\n  const note = data.accountNote\n\n  return (\n    <AccountNotesBase showBack={true}>\n      <Card title={cardTitle}>\n        <Formik\n          initialValues={{ \n            injury: note.injury,\n            note: note.note\n          }}\n          // validationSchema={ACCOUNT_FINANCE_PAYMENT_BATCH_CATEGORY_ITEM_SCHEMA}\n          onSubmit={(values, { setSubmitting }, errors) => {\n              console.log('submit values:')\n              console.log(values)\n              console.log(errors)\n\n              updateNote({ variables: {\n                input: {\n                  id: noteId,\n                  injury: values.injury,\n                  note: values.note\n                }\n              }, refetchQueries: [\n                  {query: GET_ACCOUNT_NOTES_QUERY, variables: get_list_query_variables(accountId)}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('relations.account.notes.toast_edit_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n            <AccountNoteForm\n              isSubmitting={isSubmitting}\n              errors={errors}\n              values={values}\n              setFieldTouched={setFieldTouched}\n              setFieldValue={setFieldValue}\n              returnUrl={returnUrl}\n            >\n              {console.log(errors)}\n            </AccountNoteForm>\n          )}\n        </Formik>\n      </Card>\n    </AccountNotesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountNoteEdit))\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Page,\n  Grid,\n  Container\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport RelationsAccountsBack from \"../RelationsAccountsBack\"\n\nimport ProfileMenu from \"../ProfileMenu\"\nimport ProfileCardSmall from \"../../../ui/ProfileCardSmall\"\n\n\nfunction AccountOrdersBase({ t, match, history, children, account={} }) {\n  const accountId = match.params.account_id\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={account.fullName} >\n            <RelationsAccountsBack />\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <ProfileCardSmall user={account}/>\n              <ProfileMenu \n                activeLink='orders' \n                accountId={accountId}\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountOrdersBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_ORDERS_QUERY = gql`\n  query FinanceOrders($after: String, $before: String, $status: String, $account: ID!) {\n    financeOrders(first: 15, before: $before, after: $after, status: $status, account: $account) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          orderNumber\n          account {\n            id\n            fullName\n          }\n          status\n          createdAt\n          total\n          totalDisplay\n          balanceDisplay\n        }\n      }\n    }\n    account(id:$account) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n","import React, { useContext } from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { GET_ACCOUNT_ORDERS_QUERY } from \"./queries\"\nimport { DELETE_FINANCE_ORDER } from \"../../../finance/orders/queries\"\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport moment from 'moment'\n\nimport {\n  Icon,\n  List\n} from \"tabler-react\"\n\n\nfunction AccountClassDelete({t, match, node, account}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  const [deleteOrder, { data }] = useMutation(DELETE_FINANCE_ORDER)\n\n  console.log(\"AccountOrderDelete\")\n  console.log(node)\n  console.log(account)\n  console.log(\"---\")\n\n  return (\n    <button className=\"icon btn btn-link btn-sm pull-right\" \n      title={t('general.delete')} \n      href=\"\"\n      onClick={() => {\n        confirm_delete({\n          t: t,\n          msgConfirm: t(\"relations.account.orders.delete_confirm_msg\"),\n          msgDescription: <p>\n            {t('general.order')}# {node.orderNumber}\n          </p>,\n          msgSuccess: t('relations.account.orders.delete_success'),\n          deleteFunction: deleteOrder,\n          functionVariables: { \n            variables: {\n              input: {\n                id: node.id\n              }\n            }, \n            refetchQueries: [\n              { query: GET_ACCOUNT_ORDERS_QUERY, \n                variables: { account: account.id } },\n            ]\n          }\n        })\n    }}>\n      <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n    </button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountClassDelete))\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport FinanceOrderStatus from \"../../../finance/orders/FinanceOrderStatus\"\n\nimport {\n  Button,\n  Card,\n  Table\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport BadgeBookingStatus from \"../../../ui/BadgeBookingStatus\"\n\nimport ContentCard from \"../../../general/ContentCard\"\nimport AccountOrdersBase from \"./AccountOrdersBase\"\nimport AccountOrderDelete from \"./AccountOrderDelete\"\n\nimport { GET_ACCOUNT_ORDERS_QUERY } from \"./queries\"\n\n\nfunction AccountOrders({ t, match, history }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  // const timeFormat = appSettings.timeFormatMoment\n  const cardTitle = t('relations.account.orders.title')\n  const account_id = match.params.account_id\n  const { loading, error, data, fetchMore } = useQuery(GET_ACCOUNT_ORDERS_QUERY, {\n    variables: {'account': account_id},\n  })\n\n  // Loading\n  if (loading) return (\n    <AccountOrdersBase>\n      <Card title={cardTitle}>\n        <Card.Body>\n          <p>{t('general.loading_with_dots')}</p>\n        </Card.Body>\n      </Card>\n    </AccountOrdersBase>\n  )\n  // Error\n  if (error) {\n    console.log(error)\n    return (\n      <AccountOrdersBase>\n        <Card title={cardTitle}>\n          <Card.Body>\n            <p>{t('general.error_sad_smiley')}</p>\n          </Card.Body>\n        </Card>\n      </AccountOrdersBase>\n    )\n  }\n\n  console.log(\"AccountClasses data:\")\n  console.log(data)\n  const account = data.account\n  const financeOrders = data.financeOrders\n  \n  // Empty list\n  if (!financeOrders.edges.length) {\n    return (\n      <AccountOrdersBase account={account}>\n        <Card title={cardTitle}>\n          <Card.Body>\n            <p>{t('relations.account.orders.empty_list')}</p>\n          </Card.Body>\n        </Card>\n      </AccountOrdersBase>\n    )\n  }\n\n  // Return populated list\n  return (\n    <AccountOrdersBase account={account}>\n      <ContentCard \n        cardTitle={t('relations.account.orders.title')}\n        pageInfo={financeOrders.pageInfo}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: financeOrders.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.financeOrders.edges\n              const pageInfo = fetchMoreResult.financeOrders.pageInfo\n\n              return newEdges.length\n                ? {\n                    // Put the new financeOrders at the end of the list and update `pageInfo`\n                    // so we have the new `endCursor` and `hasNextPage` values\n                    financeOrders: {\n                      __typename: previousResult.financeOrders.__typename,\n                      edges: [ ...previousResult.financeOrders.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                : previousResult\n            }\n          })\n        }} \n      >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n            <Table.ColHeader>{t('general.status')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.orders.order_number')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.orders.relation')}</Table.ColHeader>\n              <Table.ColHeader>{t('finance.orders.date')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.total')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {financeOrders.edges.map(({ node }) => (        \n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    <FinanceOrderStatus status={node.status} />\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    # {node.orderNumber}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.account.fullName}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {moment(node.createdAt).format('LL')}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.totalDisplay}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    <Link to={\"/finance/orders/edit/\" + node.id}>\n                      <Button className='btn-sm' \n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    </Link>\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    <AccountOrderDelete node={node} account={account} />\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </AccountOrdersBase>\n  )\n}\n      \n        \nexport default withTranslation()(withRouter(AccountOrders))","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY = gql`\n  query AccountScheduleEventTickets($after: String, $before: String, $account: ID!) {\n    accountScheduleEventTickets(first: 15, before: $before, after: $after, account: $account) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          cancelled\n          infoMailSent\n          scheduleEventTicket {\n            id\n            name\n            scheduleEvent {\n              id\n              name\n              dateStart\n              organizationLocation {\n                name\n              }\n            }\n          }\n          invoiceItems(first:1) {\n            edges {\n              node {\n                financeInvoice {\n                  id\n                  invoiceNumber\n                  status\n                }\n              }\n            }\n          }\n        }\n        \n      }\n    }\n  }\n`\n\nexport const GET_ACCOUNT_CLASSPASS_QUERY = gql`\n  query AccountClasspass($id: ID!, $accountId: ID!, $after: String, $before: String, $archived: Boolean!) {\n    accountClasspass(id:$id) {\n      id\n      organizationClasspass {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      note\n      createdAt\n    }\n    organizationClasspasses(first: 100, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query ClasspassInputValues($after: String, $before: String, $archived: Boolean!, $accountId: ID!) {\n    organizationClasspasses(first: 100, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT = gql`\n  query Account($accountId: ID!){\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n","// @flow\n\nimport React from 'react'\nimport { useQuery } from '@apollo/client'\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport { toast } from 'react-toastify'\n\nimport BadgeBoolean from \"../../../ui/BadgeBoolean\"\nimport RelationsAccountsBack from \"../RelationsAccountsBack\"\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport ContentCard from \"../../../general/ContentCard\"\nimport ProfileMenu from \"../ProfileMenu\"\nimport ProfileCardSmall from \"../../../ui/ProfileCardSmall\"\n\nimport { GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY } from \"./queries\"\nimport { GET_ACCOUNT } from \"../../../../queries/accounts/get_account\"\nimport ScheduleEventTickets from './AccountScheduleEventTickets'\n\n// const CANCEL_SCHEDULE_EVENT_TICKET = gql`\n//   mutation DeleteAccountClasspass($input: DeleteAccountClasspassInput!) {\n//     deleteAccountClasspass(input: $input) {\n//       ok\n//     }\n//   }\n// `\n\n\nfunction AccountScheduleEventTicketsBase({t, history, match, children}) {\n  const accountId = match.params.account_id\n  const { loading, error, data } = useQuery(GET_ACCOUNT, { variables: {\n    accountId: accountId\n  }})\n\n  if (loading) return (\n    <p>\n      {t(\"general.loading_with_dots\")}\n    </p>\n  )\n  if (error) return (\n    <p>\n      {t(\"relations.account.error_loading\")}\n    </p>\n  )\n\n  console.log(data)\n  const account = data.account\n  console.log(account)\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={account.firstName + \" \" + account.lastName} >\n            <RelationsAccountsBack />\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <ProfileCardSmall user={account}/>\n              {/* <HasPermissionWrapper permission=\"add\"\n                                    resource=\"accountclasspass\">\n                <Link to={\"/relations/accounts/\" + match.params.account_id + \"/classpasses/add\"}>\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('relations.account.classpasses.add')}\n                  </Button>\n                </Link>\n              </HasPermissionWrapper> */}\n              <ProfileMenu \n                activeLink='tickets' \n                accountId={accountId}\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountScheduleEventTicketsBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY = gql`\nquery AccountScheduleEventTickets($before:String, $after:String, $scheduleEventTicket:ID!) {\n  accountScheduleEventTickets(first: 100, before: $before, after: $after, scheduleEventTicket:$scheduleEventTicket) {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n    edges {\n      node {\n        id\n        account {\n          id\n          fullName\n        }\n        cancelled\n        paymentConfirmation\n        infoMailSent\n      }\n    }\n  }\n}\n`\n\nexport const GET_SCHEDULE_EVENT_TICKET_SCHEDULE_ITEM_QUERY = gql`\nquery ScheduleEventTicket($before:String, $after:String, $id:ID!) {\n  scheduleEventTicket(id: $id) {\n    id\n    displayPublic\n    name\n    description\n    price\n    financeTaxRate {\n      id\n      name\n    }\n    financeGlaccount {\n      id\n      name\n    }\n    financeCostcenter {\n      id\n      name\n    }\n  }\n  financeTaxRates(first: 100, before: $before, after: $after, archived: false) {\n    pageInfo {\n      startCursor\n      endCursor\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      node {\n        id\n        name\n      }\n    }\n  }\n  financeGlaccounts(first: 100, before: $before, after: $after, archived: false) {\n    pageInfo {\n      startCursor\n      endCursor\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      node {\n        id\n        name\n      }\n    }\n  }\n  financeCostcenters(first: 100, before: $before, after: $after, archived: false) {\n    pageInfo {\n      startCursor\n      endCursor\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      node {\n        id\n        name\n      }\n    }\n  }\n}\n`\n\nexport const UPDATE_ACCOUNT_SCHEDULE_EVENT_TICKET = gql`\n  mutation UpdateAccountScheduleEventTicket($input:UpdateAccountScheduleEventTicketInput!) {\n    updateAccountScheduleEventTicket(input: $input) {\n      accountScheduleEventTicket {\n        id\n      }\n    }\n  }\n`\n\nexport const DELETE_SCHEDULE_EVENT_TICKET = gql`\n  mutation DeleteScheduleEventTicket($input: DeleteScheduleEventTicketInput!) {\n    deleteScheduleEventTicket(input: $input) {\n      ok\n    }\n  }\n`\n\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery, useMutation } from '@apollo/client'\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport moment from 'moment'\n\nimport {\n  Badge,\n  Button,\n  Table\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport { toast } from 'react-toastify'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport BadgeBoolean from \"../../../ui/BadgeBoolean\"\nimport RelationsAccountsBack from \"../RelationsAccountsBack\"\n\nimport ContentCard from \"../../../general/ContentCard\"\nimport FinanceInvoicesStatus from \"../../../ui/FinanceInvoiceStatus\"\n\nimport AccountScheduleEventTicketsBase from \"./AccountScheduleEventTicketsBase\"\n\n\nimport { UPDATE_ACCOUNT_SCHEDULE_EVENT_TICKET } from \"../../../schedule/events/tickets/customers/queries\"\nimport { GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY } from \"./queries\"\n\n\n\nfunction AccountScheduleEventTickets({t, history, match}) {\n  // const title = t(\"relations.account.event_tickets.title\")\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n\n  const accountId = match.params.account_id\n  const { loading, error, data, fetchMore } = useQuery(GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY, { variables: {\n    account: accountId\n  }})\n  const [updateAccountScheduleEventTicket] = useMutation(UPDATE_ACCOUNT_SCHEDULE_EVENT_TICKET)\n\n\n  if (loading) return (\n    <AccountScheduleEventTicketsBase>\n      {t(\"general.loading_with_dots\")}\n    </AccountScheduleEventTicketsBase>\n  )\n  if (error) return (\n    <AccountScheduleEventTicketsBase>\n      {t(\"shop.classpasses.error_loading\")}\n    </AccountScheduleEventTicketsBase>\n  )\n\n  console.log(data)\n  const accountScheduleEventTickets = data.accountScheduleEventTickets\n  console.log(accountScheduleEventTickets)\n\n\n  return (\n    <AccountScheduleEventTicketsBase>\n      <ContentCard \n        cardTitle={t('relations.account.event_tickets.title')}\n        pageInfo={accountScheduleEventTickets.pageInfo}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: accountScheduleEventTickets.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.accountScheduleEventTickets.edges\n              const pageInfo = fetchMoreResult.accountScheduleEventTickets.pageInfo\n\n              return newEdges.length\n                ? {\n                    // Put the new accountScheduleEventTickets at the end of the list and update `pageInfo`\n                    // so we have the new `endCursor` and `hasNextPage` values\n                    accountScheduleEventTickets: {\n                      __typename: previousResult.accountScheduleEventTickets.__typename,\n                      edges: [ ...previousResult.accountScheduleEventTickets.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                : previousResult\n            }\n          })\n        }} \n      >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.ticket')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.start')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.invoice')}</Table.ColHeader>\n              <Table.ColHeader>{t('schedule.events.tickets.info_mail_sent')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader> \n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {accountScheduleEventTickets.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col>\n                    {node.scheduleEventTicket.scheduleEvent.name} <br />\n                    <Badge>{node.scheduleEventTicket.name}</Badge> {\" \"}\n                    {(node.cancelled) ? <Badge color=\"warning\">{t(\"general.cancelled\")}</Badge> : \"\"}\n                  </Table.Col>\n                  <Table.Col>\n                    {moment(node.scheduleEventTicket.scheduleEvent.dateStart).format(dateFormat)}\n                  </Table.Col>\n                  <Table.Col>\n                    {(node.invoiceItems.edges.length) ? \n                      <span>\n                        <Link to={`/finance/invoices/edit/${node.invoiceItems.edges[0].node.financeInvoice.id}`}>\n                          {node.invoiceItems.edges[0].node.financeInvoice.invoiceNumber}\n                        </Link> <br />\n                        <FinanceInvoicesStatus status={node.invoiceItems.edges[0].node.financeInvoice.status} />\n                        \n                      </span>\n                      : \"\"\n                    }\n                    \n                  </Table.Col>\n                  {/* <Table.Col key={v4()}>\n                    {node.dateStart}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.dateEnd}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.classesRemainingDisplay}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <Link to={\"/relations/accounts/\" + match.params.account_id + \"/classpasses/edit/\" + node.id}>\n                      <Button className='btn-sm' \n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    </Link>\n                  </Table.Col> */}\n                  <Table.Col>\n                    <BadgeBoolean value={node.infoMailSent} />\n                  </Table.Col>\n                  <Table.Col>\n                    {(node.cancelled) ?\n                      <Button \n                        className=\"pull-right\"\n                        color=\"warning\"\n                        onClick={() =>\n                          updateAccountScheduleEventTicket({ variables: {\n                            input: {\n                              id: node.id,\n                              cancelled: false\n                            }\n                          }, refetchQueries: [\n                            { \n                              query: GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY, \n                              variables: { account: accountId }\n                            },\n                          ]})\n                          .then(({ data }) => {\n                              console.log('got data', data);\n                              toast.success((t('schedule.events.tickets.customers.uncancelled')), {\n                                  position: toast.POSITION.BOTTOM_RIGHT\n                                })\n                            }).catch((error) => {\n                              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                  position: toast.POSITION.BOTTOM_RIGHT\n                                })\n                              console.log('there was an error sending the query', error)\n                            }\n                          )\n                        }\n                      >\n                        {t(\"general.uncancel\")}\n                      </Button>\n                    :\n                      <Button \n                        className=\"pull-right\"\n                        color=\"warning\"\n                        onClick={() =>\n                          updateAccountScheduleEventTicket({ variables: {\n                            input: {\n                              id: node.id,\n                              cancelled: true\n                            }\n                          }, refetchQueries: [\n                              { \n                                query: GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY, \n                                variables: { account: accountId }\n                              },\n                          ]})\n                          .then(({ data }) => {\n                              console.log('got data', data);\n                              toast.success((t('schedule.events.tickets.customers.cancelled')), {\n                                  position: toast.POSITION.BOTTOM_RIGHT\n                                })\n                            }).catch((error) => {\n                              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                  position: toast.POSITION.BOTTOM_RIGHT\n                                })\n                              console.log('there was an error sending the query', error)\n                            })\n                          }\n                        >\n                          {t(\"general.cancel\")}\n                        </Button>\n                    }\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </AccountScheduleEventTicketsBase>\n  )\n}\n\n\n\n// const AccountClasspasses = ({ t, history, match, archived=false }) => (\n//   <SiteWrapper>\n//     <div className=\"my-3 my-md-5\">\n//       <Query query={GET_ACCOUNT_CLASSPASSES_QUERY} variables={{ archived: archived, accountId: match.params.account_id }} \n//         fetchPolicy=\"network-only\"> \n//         {({ loading, error, data, refetch, fetchMore }) => {\n//           // Loading\n//           if (loading) return <p>{t('general.loading_with_dots')}</p>\n//           // Error\n//           if (error) {\n//             console.log(error)\n//             return <p>{t('general.error_sad_smiley')}</p>\n//           }\n\n//           const account = data.account\n//           const accountClasspasses = data.accountClasspasses\n\n//           return (\n//             <Container>\n//               <Page.Header title={account.firstName + \" \" + account.lastName} >\n//                 <RelationsAccountsBack />\n//               </Page.Header>\n//               <Grid.Row>\n//                 <Grid.Col md={9}>\n//                   <ContentCard \n//                     cardTitle={t('relations.account.classpasses.title')}\n//                     pageInfo={accountClasspasses.pageInfo}\n//                     onLoadMore={() => {\n//                       fetchMore({\n//                         variables: {\n//                           after: accountClasspasses.pageInfo.endCursor\n//                         },\n//                         updateQuery: (previousResult, { fetchMoreResult }) => {\n//                           const newEdges = fetchMoreResult.accountClasspasses.edges\n//                           const pageInfo = fetchMoreResult.accountClasspasses.pageInfo\n\n//                           return newEdges.length\n//                             ? {\n//                                 // Put the new accountClasspasses at the end of the list and update `pageInfo`\n//                                 // so we have the new `endCursor` and `hasNextPage` values\n//                                 accountClasspasses: {\n//                                   __typename: previousResult.accountClasspasses.__typename,\n//                                   edges: [ ...previousResult.accountClasspasses.edges, ...newEdges ],\n//                                   pageInfo\n//                                 }\n//                               }\n//                             : previousResult\n//                         }\n//                       })\n//                     }} \n//                   >\n//                     <Table>\n//                       <Table.Header>\n//                         <Table.Row key={v4()}>\n//                           <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n//                           <Table.ColHeader>{t('general.date_start')}</Table.ColHeader>\n//                           <Table.ColHeader>{t('general.date_end')}</Table.ColHeader>\n//                           <Table.ColHeader>{t('general.classes_remaining')}</Table.ColHeader>\n//                           <Table.ColHeader></Table.ColHeader> \n//                         </Table.Row>\n//                       </Table.Header>\n//                       <Table.Body>\n//                           {accountClasspasses.edges.map(({ node }) => (\n//                             <Table.Row key={v4()}>\n//                               <Table.Col key={v4()}>\n//                                 {node.organizationClasspass.name}\n//                               </Table.Col>\n//                               <Table.Col key={v4()}>\n//                                 {node.dateStart}\n//                               </Table.Col>\n//                               <Table.Col key={v4()}>\n//                                 {node.dateEnd}\n//                               </Table.Col>\n//                               <Table.Col key={v4()}>\n//                                 {node.classesRemainingDisplay}\n//                               </Table.Col>\n//                               <Table.Col className=\"text-right\" key={v4()}>\n//                                 <Link to={\"/relations/accounts/\" + match.params.account_id + \"/classpasses/edit/\" + node.id}>\n//                                   <Button className='btn-sm' \n//                                           color=\"secondary\">\n//                                     {t('general.edit')}\n//                                   </Button>\n//                                 </Link>\n//                               </Table.Col>\n//                               <Mutation mutation={DELETE_ACCOUNT_CLASSPASS} key={v4()}>\n//                                 {(deleteAccountClasspass, { data }) => (\n//                                   <Table.Col className=\"text-right\" key={v4()}>\n//                                     <button className=\"icon btn btn-link btn-sm\" \n//                                       title={t('general.delete')} \n//                                       href=\"\"\n//                                       onClick={() => {\n//                                         confirm_delete({\n//                                           t: t,\n//                                           msgConfirm: t(\"relations.account.classpasses.delete_confirm_msg\"),\n//                                           msgDescription: <p>{node.organizationClasspass.name} {node.dateStart}</p>,\n//                                           msgSuccess: t('relations.account.classpasses.deleted'),\n//                                           deleteFunction: deleteAccountClasspass,\n//                                           functionVariables: { variables: {\n//                                             input: {\n//                                               id: node.id\n//                                             }\n//                                           }, refetchQueries: [\n//                                             {query: GET_ACCOUNT_CLASSPASSES_QUERY, variables: { archived: archived, accountId: match.params.account_id }} \n//                                           ]}\n//                                         })\n//                                     }}>\n//                                       <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n//                                     </button>\n//                                   </Table.Col>\n//                                 )}\n//                               </Mutation>\n//                             </Table.Row>\n//                           ))}\n//                       </Table.Body>\n//                     </Table>\n//                   </ContentCard>\n//                 </Grid.Col>\n//                 <Grid.Col md={3}>\n//                   <ProfileCardSmall user={account}/>\n//                   <HasPermissionWrapper permission=\"add\"\n//                                         resource=\"accountclasspass\">\n//                     <Link to={\"/relations/accounts/\" + match.params.account_id + \"/classpasses/add\"}>\n//                       <Button color=\"primary btn-block mb-6\">\n//                               {/* //  onClick={() => history.push(\"/organization/classpasses/add\")}> */}\n//                         <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('relations.account.classpasses.add')}\n//                       </Button>\n//                     </Link>\n//                   </HasPermissionWrapper>\n//                   <ProfileMenu \n//                     activeLink='classpasses' \n//                     account_id={match.params.account_id}\n//                   />\n//                 </Grid.Col>\n//               </Grid.Row>\n//             </Container>\n//           )\n//         }}\n//       </Query>\n//     </div>\n//   </SiteWrapper>\n// )\n      \n        \nexport default withTranslation()(withRouter(AccountScheduleEventTickets))","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_SUBSCRIPTIONS_QUERY = gql`\n  query AccountSubscriptions($after: String, $before: String, $accountId: ID!) {\n    accountSubscriptions(first: 15, before: $before, after: $after, account: $accountId) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          organizationSubscription {\n            id\n            name\n          }\n          financePaymentMethod {\n            id\n            name\n          }\n          dateStart\n          dateEnd\n          creditTotal\n          registrationFeePaid\n          createdAt\n        }\n      }\n    }\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\nexport const GET_ACCOUNT_SUBSCRIPTION_QUERY = gql`\n  query AccountSubscription($id: ID!, $accountId: ID!, $after: String, $before: String) {\n    accountSubscription(id:$id) {\n      id\n      organizationSubscription {\n        id\n        name\n      }\n      financePaymentMethod {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      note\n      creditTotal\n      registrationFeePaid\n      createdAt\n    }\n    organizationSubscriptions(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    financePaymentMethods(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query SubscriptionInputValues($after: String, $before: String, $archived: Boolean!, $accountId: ID!) {\n    organizationSubscriptions(first: 100, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    financePaymentMethods(first: 100, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          code\n        }\n      }\n    }\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\n\nexport const GET_ACCOUNT_QUERY = gql`\n  query Account($accountId: ID!) {\n    account(id:$accountId) {\n      id\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\nexport const CREATE_ACCOUNT_SUBSCRIPTION = gql`\n  mutation CreateAccountSubscription($input: CreateAccountSubscriptionInput!) {\n    createAccountSubscription(input: $input) {\n      accountSubscription {\n        id\n        account {\n          id\n          firstName\n          lastName\n          email\n        }\n        organizationSubscription {\n          id\n          name\n        }\n        financePaymentMethod {\n          id\n          name\n        }\n        dateStart\n        dateEnd\n        note\n        registrationFeePaid        \n      }\n    }\n  }\n`\n\nexport const UPDATE_ACCOUNT_SUBSCRIPTION = gql`\n  mutation UpdateAccountSubscription($input: UpdateAccountSubscriptionInput!) {\n    updateAccountSubscription(input: $input) {\n      accountSubscription {\n        id\n        account {\n          id\n          firstName\n          lastName\n          email\n        }\n        organizationSubscription {\n          id\n          name\n        }\n        financePaymentMethod {\n          id\n          name\n        }\n        dateStart\n        dateEnd\n        note\n        registrationFeePaid        \n      }\n    }\n  }\n`\n\nexport const DELETE_ACCOUNT_SUBSCRIPTION = gql`\n  mutation DeleteAccountSubscription($input: DeleteAccountSubscriptionInput!) {\n    deleteAccountSubscription(input: $input) {\n      ok\n    }\n  }\n`\n","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Icon,\n  Button,\n  Card,\n  Table\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport BadgeBoolean from \"../../../ui/BadgeBoolean\"\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport ContentCard from \"../../../general/ContentCard\"\nimport RelationsAccountProfileBase from '../RelationsAccountProfileBase'\n\nimport { GET_ACCOUNT_SUBSCRIPTIONS_QUERY, DELETE_ACCOUNT_SUBSCRIPTION } from \"./queries\"\n\n\nfunction AccountSubscriptions({t, match}) {\n  const accountId = match.params.account_id\n  const cardTitle = t('relations.account.subscriptions.title')\n  const activeLink = \"subscriptions\"\n  const { loading, error, data, fetchMore } = useQuery(GET_ACCOUNT_SUBSCRIPTIONS_QUERY, {\n    variables: {accountId: accountId}\n  })\n  const [deleteAccountSubscription] = useMutation(DELETE_ACCOUNT_SUBSCRIPTION)\n\n  if (loading) return(\n    <RelationsAccountProfileBase activeLink={activeLink}>\n      <Card title={cardTitle}>\n        {t('general.loading_with_dots')}\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n\n  if (error) return(\n    <RelationsAccountProfileBase activeLink={activeLink}>\n      {console.log(error)}\n      <Card title={cardTitle}>\n        {t('general.error_sad_smiley')}\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n\n  const account = data.account\n  const accountSubscriptions = data.accountSubscriptions\n  const sidebarButton = <HasPermissionWrapper \n    permission=\"add\"\n    resource=\"accountsubscription\">\n      <Link to={\"/relations/accounts/\" + match.params.account_id + \"/subscriptions/add\"}>\n      <Button color=\"primary btn-block mb-6\">\n      {/* //  onClick={() => history.push(\"/organization/subscriptions/add\")}> */}\n      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('relations.account.subscriptions.add')}\n      </Button>\n      </Link>\n  </HasPermissionWrapper>\n\n  return (\n    <RelationsAccountProfileBase\n      activeLink={activeLink}\n      user={account}\n      sidebarButton={sidebarButton}\n    >\n      <ContentCard \n        cardTitle={t('relations.account.subscriptions.title')}\n        pageInfo={accountSubscriptions.pageInfo}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: accountSubscriptions.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.accountSubscriptions.edges\n              const pageInfo = fetchMoreResult.accountSubscriptions.pageInfo\n\n              return newEdges.length\n                ? {\n                    // Put the new accountSubscriptions at the end of the list and update `pageInfo`\n                    // so we have the new `endCursor` and `hasNextPage` values\n                    accountSubscriptions: {\n                      __typename: previousResult.accountSubscriptions.__typename,\n                      edges: [ ...previousResult.accountSubscriptions.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                : previousResult\n            }\n          })\n        }} \n      >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.date_start')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.date_end')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.payment_method')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.credits')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader> \n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {accountSubscriptions.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    {node.organizationSubscription.name}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.dateStart}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.dateEnd}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {(node.financePaymentMethod) ? node.financePaymentMethod.name : \"\"}\n                  </Table.Col>\n                  <Table.Col key={v4()}>\n                    {node.creditTotal}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <Link to={\"/relations/accounts/\" + match.params.account_id + \"/subscriptions/edit/\" + node.id}>\n                      <Button className='btn-sm' \n                              color=\"secondary\">\n                        {t('general.edit')}\n                      </Button>\n                    </Link>\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                      title={t('general.delete')} \n                      href=\"\"\n                      onClick={() => {\n                        confirm_delete({\n                          t: t,\n                          msgConfirm: t(\"relations.account.subscriptions.delete_confirm_msg\"),\n                          msgDescription: <p>{node.organizationSubscription.name} {node.dateStart}</p>,\n                          msgSuccess: t('relations.account.subscriptions.deleted'),\n                          deleteFunction: deleteAccountSubscription,\n                          functionVariables: { variables: {\n                            input: {\n                              id: node.id\n                            }\n                          }, refetchQueries: [\n                            {query: GET_ACCOUNT_SUBSCRIPTIONS_QUERY, variables: { accountId: accountId }} \n                          ]}\n                        })\n                    }}>\n                      <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n                    </button>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </RelationsAccountProfileBase>\n  )\n}\n\n        \nexport default withTranslation()(withRouter(AccountSubscriptions))","import { t } from 'i18next'\nimport * as Yup from 'yup'\nimport { yupToFormErrors } from 'formik';\n\nexport const SUBSCRIPTION_SCHEMA = Yup.object().shape({\n  organizationSubscription: Yup.string()\n    .required(t('yup.field_required')),\n  financePaymentMethod: Yup.string(),\n  dateStart: Yup.date()\n    .required(t('yup.field_required')),\n  dateEnd: Yup.date()\n    .nullable(),\n  registrationFeePaid: Yup.boolean(),\n  note: Yup.string(),\n})\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from \"uuid\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../plugin_config/tinymce\"\nimport CSDatePicker from \"../../../ui/CSDatePicker\"\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid,\n} from \"tabler-react\";\n\n\nconst AccountSubscriptionForm = ({ t, history, inputData, isSubmitting, setFieldValue, setFieldTouched, errors, values, return_url }) => (\n  <FoForm>\n    <Card.Body> \n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.subscription')}>\n            <Field component=\"select\" \n                  name=\"organizationSubscription\" \n                  className={(errors.organizationSubscription) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\">\n              <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n              {inputData.organizationSubscriptions.edges.map(({ node }) =>\n                <option value={node.id} key={v4()}>{node.name}</option>\n              )}\n            </Field>\n            <ErrorMessage name=\"organizationSubscription\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n        <Grid.Col>\n          <Form.Group label={t('general.payment_method')}>\n            <Field component=\"select\" \n                  name=\"financePaymentMethod\" \n                  className={(errors.financePaymentMethod) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\">\n              <option value=\"\" key={v4()}></option>\n              {inputData.financePaymentMethods.edges.map(({ node }) =>\n                <option value={node.id} key={v4()}>{node.name}</option>\n              )}\n            </Field>\n            <ErrorMessage name=\"financePaymentMethod\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row> \n      <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={(values.frequencyType == \"SPECIFIC\") ? t('general.date') : t('general.date_start')}>\n              <CSDatePicker \n                className={(errors.dateStart) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.dateStart}\n                onChange={(date) => {\n                  setFieldValue(\"dateStart\", date)\n                  setFieldTouched(\"dateEnd\", true)\n                }}\n                onBlur={() => setFieldTouched(\"dateStart\", true)}\n              />\n              <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          { (values.frequencyType == \"SPECIFIC\") ? \"\" :\n            <Grid.Col>\n              <Form.Group label={t('general.date_end')}>\n                <CSDatePicker \n                  selected={values.dateEnd}\n                  onChange={(date) => {\n                    setFieldValue(\"dateEnd\", date)\n                    setFieldTouched(\"dateEnd\", true)\n                  }}\n                  onBlur={() => setFieldTouched(\"dateEnd\", true)}\n                  placeholderText={t('schedule.classes.placeholder_enddate')}\n                />\n                <ErrorMessage name=\"dateEnd\" component=\"span\" className=\"invalid-feedback\" />\n              </Form.Group>\n            </Grid.Col>\n          }\n        </Grid.Row>\n      <Form.Group label={t('general.note')}>\n        <Editor\n            tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n            textareaName=\"note\"\n            initialValue={values.note}\n            init={tinymceBasicConf}\n            onChange={(e) => setFieldValue(\"note\", e.target.getContent())}\n            onBlur={() => setFieldTouched(\"note\", true)}\n          />\n        <ErrorMessage name=\"note\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group>\n        <Form.Label className=\"custom-switch\">\n            <Field \n              className=\"custom-switch-input\"\n              type=\"checkbox\" \n              name=\"registrationFeePaid\" \n              checked={values.registrationFeePaid} />\n            <span className=\"custom-switch-indicator\" ></span>\n            <span className=\"custom-switch-description\">{t('relations.account.subscriptions.registration_fee_paid')}</span>\n          </Form.Label>\n        <ErrorMessage name=\"registrationFeePaid\" component=\"div\" />   \n      </Form.Group> \n    </Card.Body>\n    <Card.Footer>\n        <Button \n          className=\"pull-right\"\n          color=\"primary\"\n          disabled={isSubmitting}\n          type=\"submit\"\n        >\n          {t('general.submit')}\n        </Button>\n        <Button\n          type=\"button\" \n          color=\"link\" \n          onClick={() => history.push(return_url)}\n        >\n            {t('general.cancel')}\n        </Button>\n    </Card.Footer>\n  </FoForm>\n)\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionForm))","// @flow\n\nimport React from 'react'\nimport { useMutation, useQuery } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_SUBSCRIPTIONS_QUERY, GET_INPUT_VALUES_QUERY, CREATE_ACCOUNT_SUBSCRIPTION } from './queries'\nimport { SUBSCRIPTION_SCHEMA } from './yupSchema'\nimport AccountSubscriptionForm from './AccountSubscriptionForm'\n\nimport {\n  Icon,\n  Button,\n  Card,\n} from \"tabler-react\";\nimport { dateToLocalISO } from '../../../../tools/date_tools'\nimport RelationsAccountProfileBase from '../RelationsAccountProfileBase';\n\n\nfunction AccountSubscriptionAdd({t, history, match}) {\n  const accountId = match.params.account_id\n  const activeLink = \"subscriptions\"\n  const cardTitle = t('relations.account.subscriptions.title_add')\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions`\n  const {loading, error, data} = useQuery(GET_INPUT_VALUES_QUERY, {\n    variables: { archived: false, accountId: accountId }\n  })\n  const [createAccountSubscription] = useMutation(CREATE_ACCOUNT_SUBSCRIPTION)\n  const sidebarButton = <Link to={returnUrl}>\n      <Button color=\"primary btn-block mb-6\">\n        <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n      </Button>\n    </Link>\n\n  if (loading) return(\n    <RelationsAccountProfileBase activeLink={activeLink} sidebarButton={sidebarButton}>\n      <Card title={cardTitle}>\n        {t('general.loading_with_dots')}\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n\n  if (error) return(\n    <RelationsAccountProfileBase activeLink={activeLink} sidebarButton={sidebarButton}>\n      {console.log(error)}\n      <Card title={cardTitle}>\n        {t('general.error_sad_smiley')}\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n\n  const inputData = data\n  const account = data.account\n\n  return (\n    <RelationsAccountProfileBase\n      activeLink={activeLink}\n      user={account}\n      sidebarButton={sidebarButton} \n    >\n      <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle}</Card.Title>\n        </Card.Header>\n        <Card.Body>\n          <Formik\n            initialValues={{ \n              organizationSubscription: \"\",\n              financePaymentMethod: \"\",\n              dateStart: new Date(),\n              note: \"\",\n              registrationFeePaid: false\n            }}\n            validationSchema={SUBSCRIPTION_SCHEMA}\n            onSubmit={(values, { setSubmitting }, errors) => {\n                console.log('submit values:')\n                console.log(values)\n                console.log(errors)\n\n                \n                let dateEnd\n                if (values.dateEnd) {\n                  dateEnd = dateToLocalISO(values.dateEnd)\n                } else {\n                  dateEnd = values.dateEnd\n                }\n\n                createAccountSubscription({ variables: {\n                  input: {\n                    account: accountId, \n                    organizationSubscription: values.organizationSubscription,\n                    financePaymentMethod: values.financePaymentMethod,\n                    dateStart: dateToLocalISO(values.dateStart),\n                    dateEnd: dateEnd,\n                    note: values.note,\n                    registrationFeePaid: values.registrationFeePaid\n                  }\n                }, refetchQueries: [\n                    {query: GET_ACCOUNT_SUBSCRIPTIONS_QUERY, variables: {accountId: accountId}}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    const subscriptionId = data.createAccountSubscription.accountSubscription.id\n                    history.push(`/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}`)\n                    toast.success((t('relations.account.subscriptions.toast_add_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n              <AccountSubscriptionForm\n                inputData={inputData}\n                isSubmitting={isSubmitting}\n                setFieldValue={setFieldValue}\n                setFieldTouched={setFieldTouched}\n                errors={errors}\n                values={values}\n                returnUrl={returnUrl}\n              >\n                {console.log(errors)}\n              </AccountSubscriptionForm>\n            )}\n          </Formik>\n        </Card.Body>\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n}\n\n\n// class AccountSubscriptionAdd extends Component {\n//   constructor(props) {\n//     super(props)\n//     console.log(\"Account subscription add props:\")\n//     console.log(props)\n//   }\n\n//   render() {\n//     const t = this.props.t\n//     const history = this.props.history\n//     const match = this.props.match\n//     const accountId = match.params.accountId\n//     const returnUrl = \"/relations/accounts/\" + accountId + \"/subscriptions\"\n\n//     return (\n//       <SiteWrapper>\n//         <div className=\"my-3 my-md-5\">\n//         <Query query={GET_INPUT_VALUES_QUERY} variables = {{archived: false, accountId: accountId}} >\n//           {({ loading, error, data, refetch }) => {\n//             // Loading\n//             if (loading) return <p>{t('general.loading_with_dots')}</p>\n//             // Error\n//             if (error) {\n//               console.log(error)\n//               return <p>{t('general.error_sad_smiley')}</p>\n//             }\n            \n//             console.log('query data')\n//             console.log(data)\n//             const inputData = data\n//             const account = data.account\n\n//             return (\n//               <Container>\n//                <Page.Header title={account.firstName + \" \" + account.lastName} />\n//                <Grid.Row>\n//                   <Grid.Col md={9}>\n//                   <Card>\n//                     <Card.Header>\n//                       <Card.Title>{t('relations.account.subscriptions.title_add')}</Card.Title>\n//                     </Card.Header>\n//                       <Mutation mutation={CREATE_ACCOUNT_SUBSCRIPTION} onCompleted={() => history.push(returnUrl)}> \n//                       {(createSubscription, { data }) => (\n//                           <Formik\n//                               initialValues={{ \n//                                 organizationSubscription: \"\",\n//                                 financePaymentMethod: \"\",\n//                                 dateStart: new Date(),\n//                                 note: \"\",\n//                                 registrationFeePaid: false\n//                               }}\n//                               validationSchema={SUBSCRIPTION_SCHEMA}\n//                               onSubmit={(values, { setSubmitting }, errors) => {\n//                                   console.log('submit values:')\n//                                   console.log(values)\n//                                   console.log(errors)\n\n                                  \n//                                   let dateEnd\n//                                   if (values.dateEnd) {\n//                                     dateEnd = dateToLocalISO(values.dateEnd)\n//                                   } else {\n//                                     dateEnd = values.dateEnd\n//                                   }\n\n//                                   createSubscription({ variables: {\n//                                     input: {\n//                                       account: accountId, \n//                                       organizationSubscription: values.organizationSubscription,\n//                                       financePaymentMethod: values.financePaymentMethod,\n//                                       dateStart: dateToLocalISO(values.dateStart),\n//                                       dateEnd: dateEnd,\n//                                       note: values.note,\n//                                       registrationFeePaid: values.registrationFeePaid\n//                                     }\n//                                   }, refetchQueries: [\n//                                       {query: GET_ACCOUNT_SUBSCRIPTIONS_QUERY, variables: {accountId: accountId}}\n//                                   ]})\n//                                   .then(({ data }) => {\n//                                       console.log('got data', data)\n//                                       toast.success((t('relations.account.subscriptions.toast_add_success')), {\n//                                           position: toast.POSITION.BOTTOM_RIGHT\n//                                         })\n//                                     }).catch((error) => {\n//                                       toast.error((t('general.toast_server_error')) + ': ' +  error, {\n//                                           position: toast.POSITION.BOTTOM_RIGHT\n//                                         })\n//                                       console.log('there was an error sending the query', error)\n//                                       setSubmitting(false)\n//                                     })\n//                               }}\n//                               >\n//                               {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n//                                 <AccountSubscriptionForm\n//                                   inputData={inputData}\n//                                   isSubmitting={isSubmitting}\n//                                   setFieldValue={setFieldValue}\n//                                   setFieldTouched={setFieldTouched}\n//                                   errors={errors}\n//                                   values={values}\n//                                   returnUrl={returnUrl}\n//                                 >\n//                                   {console.log(errors)}\n//                                 </AccountSubscriptionForm>\n//                               )}\n//                           </Formik>\n//                       )}\n//                       </Mutation>\n//                     </Card>\n//                   </Grid.Col>\n//                   <Grid.Col md={3}>\n//                     <HasPermissionWrapper permission=\"add\"\n//                                           resource=\"accountsubscription\">\n//                       <Link to={returnUrl}>\n//                         <Button color=\"primary btn-block mb-6\">\n//                           <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n//                         </Button>\n//                       </Link>\n//                     </HasPermissionWrapper>\n//                     <ProfileMenu \n//                       activeLink='subscriptions'\n//                       accountId={match.params.accountId}\n//                     />\n//                   </Grid.Col>\n//                 </Grid.Row>\n//               </Container>\n//             )}}\n//           </Query>\n//         </div>\n//     </SiteWrapper>\n//     )}\n//   }\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionAdd))\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\n// position: top or bottom\n// tabs: [[name, title, link], ...]\n// active: active tab name\n\nfunction CardTabs({ t, position=\"top\", tabs, active}) {\n  let class_tabs_position = \"card-tabs-top\"\n  switch(position) {\n    case \"top\":\n      break\n    case \"bottom\":\n      class_tabs_position = \"card-tabs-top\"\n      break\n    default:\n      break\n  }   \n\n  return (\n    <div className={`card-tabs ${class_tabs_position}`}>\n      {\n        tabs.map(({name, title, link}) => (\n          <Link key={v4()} to={link} className={`card-tabs-item ${(name === active) ? \"active\": \"\"}`}>\n            <h3 className=\"card-title\"> {title} </h3>\n          </Link>\n        ))\n      }\n    </div>\n  )\n}\n\nexport default withTranslation()(CardTabs)\n\n\n\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Link } from 'react-router-dom'\n\nimport CardTabs from \"../../../../ui/CardTabs\"\n\nfunction AccountSubscriptionEditTabs({ t, active, account_id, subscription_id}) {\n\n  return (\n    <CardTabs \n      position=\"top\"\n      tabs={[\n          {\n            name: \"general\", \n            title: t(\"relations.account.subscriptions.menu.general\"), \n            link: `/relations/accounts/${account_id}/subscriptions/edit/${subscription_id}`\n          },\n          {\n            name: \"pauses\", \n            title: t(\"relations.account.subscriptions.menu.pauses\"), \n            link: `/relations/accounts/${account_id}/subscriptions/edit/${subscription_id}/pauses`\n          },\n          {\n            name: \"blocks\", \n            title: t(\"relations.account.subscriptions.menu.blocks\"), \n            link: `/relations/accounts/${account_id}/subscriptions/edit/${subscription_id}/blocks`\n          },\n          {\n            name: \"alt_prices\", \n            title: t(\"relations.account.subscriptions.menu.alt_prices\"), \n            link: `/relations/accounts/${account_id}/subscriptions/edit/${subscription_id}/alt_prices`\n          },\n          {\n            name: \"invoices\", \n            title: t(\"relations.account.subscriptions.menu.invoices\"), \n            link: `/relations/accounts/${account_id}/subscriptions/edit/${subscription_id}/invoices`\n          },\n          {\n            name: \"credits\", \n            title: t(\"relations.account.subscriptions.menu.credits\"), \n            link: `/relations/accounts/${account_id}/subscriptions/edit/${subscription_id}/credits`\n          },\n      ]}\n      active={active}\n    />\n  )\n}\n\nexport default withTranslation()(AccountSubscriptionEditTabs)\n\n\n\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport AppSettingsContext from '../../../../context/AppSettingsContext'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport AccountSubscriptionEditTabs from \"./AccountSubscriptionEditTabs\"\n\nimport ProfileCardSmall from \"../../../../ui/ProfileCardSmall\"\nimport ProfileMenu from \"../../ProfileMenu\"\nimport moment from 'moment'\n\n\nfunction AccountSubscriptionEditBaseBase({t, history, match, children, account=null, subscription=null, active_tab}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  \n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = \"/relations/accounts/\" + accountId + \"/subscriptions\"\n  const cardTitle = (subscription) ? \n    <span className=\"text-muted\">\n      - {subscription.organizationSubscription.name + \" \" + moment(subscription.dateStart).format(dateFormat)} - {subscription.creditTotal} {t(\"general.credits\")}\n    </span> : \"\"\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={(account) ? account.firstName + \" \" + account.lastName : \"\"} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n              <Card>\n                <Card.Header>\n                  <Card.Title>{t('relations.account.subscriptions.title_edit')} {cardTitle}</Card.Title>\n                </Card.Header>\n                <AccountSubscriptionEditTabs \n                  account_id={accountId}\n                  subscription_id={subscriptionId}\n                  active={active_tab}\n                />\n                {children}\n              </Card>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <ProfileCardSmall user={account}/>\n              <HasPermissionWrapper permission=\"change\"\n                                    resource=\"accountsubscription\">\n                <Link to={returnUrl}>\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n              </HasPermissionWrapper>\n              <ProfileMenu \n                activeLink='subscriptions'\n                accountId={accountId}\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditBaseBase))\n","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, Mutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_SUBSCRIPTION_QUERY } from '../queries'\nimport AccountSubscriptionForm from '../AccountSubscriptionForm'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport { dateToLocalISO } from '../../../../../tools/date_tools'\nimport AccountSubscriptionEditTabs from \"./AccountSubscriptionEditTabs\"\nimport AccountSubscriptionEditBaseBase from \"./AccountSubscriptionEditBaseBase\"\n\nimport ProfileMenu from \"../../ProfileMenu\"\n\n\nfunction AccountSubscriptionEditBase({t, history, match, children, active_tab}) {\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const { loading, error, data } = useQuery(GET_ACCOUNT_SUBSCRIPTION_QUERY, {\n    variables: {\n      accountId: accountId,\n      id: subscriptionId\n    }\n  })\n  \n  if (loading) return (\n    <AccountSubscriptionEditBaseBase active_tab={active_tab}>\n      {t(\"general.loading_with_dots\")}\n    </AccountSubscriptionEditBaseBase>\n  )\n  if (error) return (\n    <AccountSubscriptionEditBaseBase active_tab={active_tab}>\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </AccountSubscriptionEditBaseBase>\n  )\n\n  console.log(data)\n  const account = data.account\n  const subscription = data.accountSubscription\n\n  return (\n    <AccountSubscriptionEditBaseBase active_tab={active_tab} account={account} subscription={subscription}>\n      {children}\n    </AccountSubscriptionEditBaseBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditBase))\n","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_SUBSCRIPTIONS_QUERY, GET_ACCOUNT_SUBSCRIPTION_QUERY, UPDATE_ACCOUNT_SUBSCRIPTION } from '../queries'\nimport { SUBSCRIPTION_SCHEMA } from '../yupSchema'\nimport AccountSubscriptionForm from '../AccountSubscriptionForm'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport { dateToLocalISO } from '../../../../../tools/date_tools'\nimport AccountSubscriptionEditBase from \"./AccountSubscriptionEditBase\"\n\nimport ProfileMenu from \"../../ProfileMenu\"\n\n\nfunction AccountSubscriptionEdit({t, match, history}) {\n  const id = match.params.subscription_id\n  const accountId = match.params.account_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions`\n  const activeTab = \"general\"\n\n  const { loading, error, data } = useQuery(GET_ACCOUNT_SUBSCRIPTION_QUERY, {\n    variables: {\n      archived: false,\n      accountId: accountId,\n      id: id\n    }\n  })\n\n  const [ updateSubscription ] = useMutation(UPDATE_ACCOUNT_SUBSCRIPTION)\n  \n  if (loading) return (\n    <AccountSubscriptionEditBase active_tab={activeTab}>\n      {t(\"general.loading_with_dots\")}\n    </AccountSubscriptionEditBase>\n  )\n  if (error) return (\n    <AccountSubscriptionEditBase active_tab={activeTab}>\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </AccountSubscriptionEditBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n  const account = data.account\n  const initialdata = data.accountSubscription\n\n  let initialPaymentMethod = \"\"\n  if (initialdata.financePaymentMethod) {\n    initialPaymentMethod = initialdata.financePaymentMethod.id\n  }\n  \n  // DatePicker doesn't like a string as an initial value\n  // This makes it a happy DatePicker :)\n  let dateStart = null\n  let dateEnd = null\n  if (initialdata.dateStart) {\n    dateStart = new Date(initialdata.dateStart)\n  }\n  if (initialdata.dateEnd) {\n    dateEnd = new Date(initialdata.dateEnd)\n  }\n\n  return (\n    <AccountSubscriptionEditBase active_tab={activeTab}>\n      <Formik\n        initialValues={{ \n          organizationSubscription: initialdata.organizationSubscription.id,\n          financePaymentMethod: initialPaymentMethod,\n          dateStart: dateStart,\n          dateEnd: dateEnd,\n          note: initialdata.note,\n          registrationFeePaid: initialdata.registrationFeePaid\n        }}\n        validationSchema={SUBSCRIPTION_SCHEMA}\n        onSubmit={(values, { setSubmitting }, errors) => {\n            console.log('submit values:')\n            console.log(values)\n            console.log(errors)\n\n            \n            let dateEnd\n            if (values.dateEnd) {\n              dateEnd = dateToLocalISO(values.dateEnd)\n            } else {\n              dateEnd = values.dateEnd\n            }\n\n            updateSubscription({ variables: {\n              input: {\n                id: id,\n                organizationSubscription: values.organizationSubscription,\n                financePaymentMethod: values.financePaymentMethod,\n                dateStart: dateToLocalISO(values.dateStart),\n                dateEnd: dateEnd,\n                note: values.note,\n                registrationFeePaid: values.registrationFeePaid\n              }\n            }, refetchQueries: [\n                {query: GET_ACCOUNT_SUBSCRIPTIONS_QUERY, variables: {accountId: accountId}}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                toast.success((t('relations.account.subscriptions.toast_edit_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n        }}\n        >\n        {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n          <AccountSubscriptionForm\n            inputData={inputData}\n            isSubmitting={isSubmitting}\n            setFieldValue={setFieldValue}\n            setFieldTouched={setFieldTouched}\n            errors={errors}\n            values={values}\n            return_url={returnUrl}\n          >\n            {console.log(errors)}\n          </AccountSubscriptionForm>\n        )}\n      </Formik>\n    </AccountSubscriptionEditBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountSubscriptionEdit))\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Button,\n} from \"tabler-react\";\n\n\nfunction ButtonAddSecondaryMenu({t, match, history, linkTo}) {\n  return (\n    <Link to={linkTo}>\n      <Button\n        color=\"primary\"\n        size=\"sm\"\n        icon=\"plus-circle\"\n        className=\"float-right\"\n      >\n        {t(\"general.add\")}\n      </Button>\n    </Link>\n  )\n}\n\nexport default withTranslation()(withRouter(ButtonAddSecondaryMenu))\n","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_SUBSCRIPTION_ALT_PRICES_QUERY = gql`\nquery AccountSubscriptionAltPrices($before:String, $after:String, $accountSubscription: ID!) {\n  accountSubscriptionAltPrices(before: $before, after: $after, accountSubscription:$accountSubscription) {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n    edges {\n      node {\n        id\n        accountSubscription {\n          id\n        }\n        subscriptionYear\n        subscriptionMonth\n        amount\n        amountDisplay\n        description\n        note\n        createdAt\n        updatedAt\n      }\n    }\n  }\n}\n`\n\nexport const GET_ACCOUNT_SUBSCRIPTION_ALT_PRICE_QUERY = gql`\nquery AccountSubscriptionAltPrice($id: ID!) {\n  accountSubscriptionAltPrice(id:$id) {\n    id\n    accountSubscription {\n      id\n    }\n    subscriptionYear\n    subscriptionMonth\n    amount\n    description\n    note\n  }\n}\n`\n\n\nexport const DELETE_ACCOUNT_SUBSCRIPTION_ALT_PRICE = gql`\n  mutation DeleteAccountSubscriptionAltPrice($input: DeleteAccountSubscriptionAltPriceInput!) {\n    deleteAccountSubscriptionAltPrice(input: $input) {\n      ok\n    }\n  }\n`\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport AppSettingsContext from '../../../../context/AppSettingsContext'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport AccountSubscriptionEditTabs from \"./AccountSubscriptionEditTabs\"\nimport ContentCard from \"../../../../general/ContentCard\"\n\nimport ProfileCardSmall from \"../../../../ui/ProfileCardSmall\"\nimport ProfileMenu from \"../../ProfileMenu\"\nimport moment from 'moment'\n\n\nfunction AccountSubscriptionEditBaseBase({\n  t, \n  history, \n  match, \n  children, \n  account=null, \n  subscription=null, \n  pageInfo, \n  onLoadMore, \n  active_tab}\n  ){\n\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  \n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = \"/relations/accounts/\" + accountId + \"/subscriptions\"\n  const cardTitle = (subscription) ? \n    <span className=\"text-muted\">\n      - {subscription.organizationSubscription.name + \" \" + moment(subscription.dateStart).format(dateFormat)} - {subscription.creditTotal} {t(\"general.credits\")}\n    </span> : \"\"\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={(account) ? account.firstName + \" \" + account.lastName : \"\"} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n              <ContentCard \n                cardTitle={<span>{t('relations.account.subscriptions.title_edit')} {cardTitle}</span>}\n                pageInfo={pageInfo}\n                onLoadMore={onLoadMore}\n                cardTabs={<AccountSubscriptionEditTabs \n                  account_id={accountId}\n                  subscription_id={subscriptionId}\n                  active={active_tab} /> }\n              >\n                {children}\n              </ContentCard>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <ProfileCardSmall user={account}/>\n              <HasPermissionWrapper permission=\"change\"\n                                    resource=\"accountsubscription\">\n                <Link to={returnUrl}>\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n              </HasPermissionWrapper>\n              <ProfileMenu \n                activeLink='subscriptions'\n                accountId={accountId}\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditBaseBase))\n","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, Mutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_SUBSCRIPTION_QUERY } from '../queries'\nimport AccountSubscriptionForm from '../AccountSubscriptionForm'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport { dateToLocalISO } from '../../../../../tools/date_tools'\nimport AccountSubscriptionEditTabs from \"./AccountSubscriptionEditTabs\"\nimport AccountSubscriptionEditListBaseBase from \"./AccountSubscriptionEditListBaseBase\"\n\nimport ProfileMenu from \"../../ProfileMenu\"\n\n\nfunction AccountSubscriptionEditListBase({t, history, match, children, pageInfo, onLoadMore, active_tab}) {\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const { loading, error, data } = useQuery(GET_ACCOUNT_SUBSCRIPTION_QUERY, {\n    variables: {\n      accountId: accountId,\n      id: subscriptionId\n    }\n  })\n  \n  if (loading) return (\n    <AccountSubscriptionEditListBaseBase active_tab={active_tab}>\n      {t(\"general.loading_with_dots\")}\n    </AccountSubscriptionEditListBaseBase>\n  )\n  if (error) return (\n    <AccountSubscriptionEditListBaseBase active_tab={active_tab}>\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </AccountSubscriptionEditListBaseBase>\n  )\n\n  console.log(data)\n  const account = data.account\n  const subscription = data.accountSubscription\n\n  return (\n    <AccountSubscriptionEditListBaseBase \n      active_tab={active_tab} \n      account={account} \n      subscription={subscription}\n      pageInfo={pageInfo}\n      onLoaMore={onLoadMore}\n    >\n      {children}\n    </AccountSubscriptionEditListBaseBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditListBase))\n","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { DELETE_ACCOUNT_SUBSCRIPTION_ALT_PRICE, GET_ACCOUNT_SUBSCRIPTION_ALT_PRICES_QUERY } from \"./queries\"\nimport confirm_delete from \"../../../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\nfunction AccountSubscriptionEditAltPriceDelete({t, match, history, id}) {\n  const subscriptionId = match.params.subscription_id\n  const [deleteAccountSubscriptionAltPrice, { data }] = useMutation(DELETE_ACCOUNT_SUBSCRIPTION_ALT_PRICE)\n  const query_vars = {\n    accountSubscription: subscriptionId\n  }\n\n  return (\n    <button className=\"icon btn btn-link btn-sm mb-3 pull-right\" \n      title={t('general.delete')} \n      onClick={() => {\n        confirm_delete({\n          t: t,\n          msgConfirm: t(\"relations.account.subscriptions.alt_prices.delete_confirm_msg\"),\n          msgDescription: <p></p>,\n          msgSuccess: t('relations.account.subscriptions.alt_prices.delete_success'),\n          deleteFunction: deleteAccountSubscriptionAltPrice,\n          functionVariables: { \n            variables: {\n              input: {\n                id: id\n              },\n            }, \n            refetchQueries: [\n              { query: GET_ACCOUNT_SUBSCRIPTION_ALT_PRICES_QUERY, variables: query_vars },\n            ]\n          }\n        })\n    }}>\n      <Icon prefix=\"fe\" name=\"trash-2\" />\n    </button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditAltPriceDelete))","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\nimport AppSettingsContext from '../../../../../context/AppSettingsContext'\nimport ButtonAddSecondaryMenu from '../../../../../ui/ButtonAddSecondaryMenu'\n\nimport { GET_ACCOUNT_SUBSCRIPTION_ALT_PRICES_QUERY } from './queries'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Table,\n} from \"tabler-react\";\n// import HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport AccountSubscriptionEditListBase from \"../AccountSubscriptionEditListBase\"\nimport AccountSubscriptionEditAltPriceDelete from \"./AccountSubscriptionEditAltPriceDelete\"\nimport moment from 'moment';\n\n\nfunction AccountSubscriptionEditAltPrices({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  console.log(appSettings)\n  \n  const id = match.params.subscription_id\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions`\n  const activeTab = \"alt_prices\"\n\n  const buttonAdd = <ButtonAddSecondaryMenu \n                      linkTo={`/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/alt_prices/add`} />\n\n  const { loading, error, data, fetchMore } = useQuery(GET_ACCOUNT_SUBSCRIPTION_ALT_PRICES_QUERY, {\n    variables: {\n      accountSubscription: subscriptionId\n    }\n  })\n  \n  if (loading) return (\n    <AccountSubscriptionEditListBase active_tab={activeTab}>\n      {t(\"general.loading_with_dots\")}\n    </AccountSubscriptionEditListBase>\n  )\n  if (error) return (\n    <AccountSubscriptionEditListBase active_tab={activeTab}>\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </AccountSubscriptionEditListBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n\n  const accountSubscriptionAltPrices = data.accountSubscriptionAltPrices\n  const pageInfo = data.accountSubscriptionAltPrices.pageInfo\n\n    // Empty list\n    if (!accountSubscriptionAltPrices.edges.length) { return (\n      <AccountSubscriptionEditListBase active_tab={activeTab}>\n        <div className=\"pull-right\">{buttonAdd}</div>\n        <h5>{t('relations.account.subscriptions.alt_prices.title_list')}</h5>\n        <p>{t('relations.account.subscriptions.alt_prices.empty_list')}</p>\n      </AccountSubscriptionEditListBase>\n    )}\n\n  const onLoadMore = () => {\n    fetchMore({\n      variables: {\n        after: accountSubscriptionAltPrices.pageInfo.endCursor\n      },\n      updateQuery: (previousResult, { fetchMoreResult }) => {\n        const newEdges = fetchMoreResult.accountSubscriptionAltPrices.edges\n        const pageInfo = fetchMoreResult.accountSubscriptionAltPrices.pageInfo\n\n        return newEdges.length\n          ? {\n              // Put the new invoices at the end of the list and update `pageInfo`\n              // so we have the new `endCursor` and `hasNextPage` values\n              accountSubscriptionAltPrices: {\n                __typename: previousResult.accountSubscriptionAltPrices.__typename,\n                edges: [ ...previousResult.accountSubscriptionAltPrices.edges, ...newEdges ],\n                pageInfo\n              }\n            }\n          : previousResult\n      }\n    })\n  }\n\n  return (\n    <AccountSubscriptionEditListBase active_tab={activeTab} pageInfo={pageInfo} onLoadMore={onLoadMore}>\n      <div className=\"pull-right\">{buttonAdd}</div>\n      <h5>{t('relations.account.subscriptions.alt_prices.title_list')}</h5>\n      <Table>\n        <Table.Header>\n          <Table.Row key={v4()}>\n            <Table.ColHeader>{t('general.subscription_year')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.subscription_month')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.amount')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.description')}</Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {accountSubscriptionAltPrices.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col>\n                  {node.subscriptionYear}\n                </Table.Col>\n                <Table.Col>\n                  {node.subscriptionMonth}\n                </Table.Col>\n                <Table.Col>\n                  {node.amountDisplay}\n                </Table.Col>\n                <Table.Col>\n                <div dangerouslySetInnerHTML={{__html: node.description}} />\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <Link to={`/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/alt_prices/edit/${node.id}`}>\n                    <Button className='btn-sm' \n                            color=\"secondary\">\n                      {t('general.edit')}\n                    </Button>\n                  </Link>\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <AccountSubscriptionEditAltPriceDelete id={node.id} />\n                </Table.Col>\n              </Table.Row>\n            ))}\n        </Table.Body>\n      </Table>\n    </AccountSubscriptionEditListBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditAltPrices))\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const ACCOUNT_SUBSCRIPTION_ALT_PRICE_SCHEMA = Yup.object().shape({\n  subscriptionYear: Yup.number()\n    .required()\n    .positive()\n    .min(1000)\n    .max(9999),\n  subscriptionMonth: Yup.number()\n    .required()\n    .positive()\n    .min(1)\n    .max(12),\n  amount: Yup.number()\n    .required()\n  })","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport AccountSubscriptionEditBase from \"../AccountSubscriptionEditBase\"\n\n\nfunction AccountSubscriptionEditAltPriceBase({ t, history, match, children}) {\n  const activeTab = \"alt_prices\"\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/alt_prices/`\n\n  return (\n    <AccountSubscriptionEditBase active_tab={activeTab}>\n      {children}\n    </AccountSubscriptionEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditAltPriceBase))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Form,\n} from \"tabler-react\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../../../plugin_config/tinymce\"\nimport CSDatePicker from \"../../../../../ui/CSDatePicker\"\n\nfunction AccountSubscriptionEditAltPriceForm ({ \n  t, \n  history, \n  match, \n  isSubmitting, \n  errors, \n  values, \n  inputData, \n  returnUrl, \n  setFieldTouched, \n  setFieldValue, \n  formTitle=\"create\" })   \n{\n\n  let title\n  if ( formTitle == \"create\" ) {\n    title = t('relations.account.subscriptions.alt_prices.add')\n  } else {\n    title = t('relations.account.subscriptions.alt_prices.edit')\n  }\n\n  return (\n    <FoForm>\n      <Card.Body>\n        <h5>{title}</h5>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.subscription_year')}>\n              <Field type=\"number\" \n                      name=\"subscriptionYear\" \n                      className={(errors.subscriptionYear) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"subscriptionYear\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.subscription_month')}>\n              <Field type=\"number\" \n                      name=\"subscriptionMonth\" \n                      className={(errors.subscriptionMonth) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"subscriptionMonth\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.amount')}>\n                <Field type=\"text\" \n                    name=\"amount\" \n                    className={(errors.amount) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n                <ErrorMessage name=\"amount\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n          <Form.Group label={t('general.description')}>\n            <Field type=\"text\" \n                    name=\"description\" \n                    className={(errors.description) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n          <Form.Group label={t('general.note')}>\n            <Editor\n                tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n                textareaName=\"note\"\n                initialValue={values.note}\n                init={tinymceBasicConf}\n                onChange={(e) => setFieldValue(\"note\", e.target.getContent())}\n                onBlur={() => setFieldTouched(\"note\", true)}\n              />\n            <ErrorMessage name=\"note\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Button color=\"link\" onClick={() => history.push(returnUrl)} role=\"button\">\n              {t('general.cancel')}\n          </Button>\n      </Card.Footer>\n    </FoForm>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditAltPriceForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_SUBSCRIPTION_ALT_PRICES_QUERY } from \"./queries\"\nimport { ACCOUNT_SUBSCRIPTION_ALT_PRICE_SCHEMA } from './yupSchema'\nimport { dateToLocalISO } from '../../../../../../tools/date_tools'\n\nimport AccountSubscriptionEditAltPriceBase from \"./AccountSubscriptionEditAltPriceBase\"\nimport AccountSubscriptionEditAltPriceForm from \"./AccountSubscriptionEditAltPriceForm\"\n\n\nconst ADD_ACCOUNT_SUBSCRIPTION_ALT_PRICE = gql`\n  mutation CreateAccountSubscriptionAltPrice($input:CreateAccountSubscriptionAltPriceInput!) {\n    createAccountSubscriptionAltPrice(input: $input) {\n      accountSubscriptionAltPrice {\n        id\n      }\n    }\n  }\n`\n\n\nfunction AccountSubscriptionEditAltPriceAdd({ t, history, match }) {\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/alt_prices/`\n\n\n  const [addSubscriptionAltPrice] = useMutation(ADD_ACCOUNT_SUBSCRIPTION_ALT_PRICE, {\n    onCompleted: () => history.push(returnUrl),\n  })\n\n  return (\n    <AccountSubscriptionEditAltPriceBase>\n      <Formik\n        initialValues={{ \n          subscriptionYear: new Date().getFullYear(),\n          subscriptionMonth: new Date().getMonth() + 1,\n          amount: 0,\n          description: \"\",\n          note: \"\"\n        }}\n        validationSchema={ACCOUNT_SUBSCRIPTION_ALT_PRICE_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"submit values\")\n          console.log(values)\n\n          addSubscriptionAltPrice({ variables: {\n            input: {\n              accountSubscription: subscriptionId,\n              subscriptionYear: values.subscriptionYear,\n              subscriptionMonth: values.subscriptionMonth,\n              amount: values.amount,\n              description: values.description,\n              note: values.note,\n            }\n          }, refetchQueries: [\n              {query: GET_ACCOUNT_SUBSCRIPTION_ALT_PRICES_QUERY, variables: {\n                accountSubscription: subscriptionId\n              }},\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              toast.success((t('relations.account.subscriptions.alt_prices.toast_add_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <AccountSubscriptionEditAltPriceForm\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            returnUrl={returnUrl}\n            formTitle=\"create\"\n          />\n        )}\n      </Formik>\n    </AccountSubscriptionEditAltPriceBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditAltPriceAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_SUBSCRIPTION_ALT_PRICES_QUERY, GET_ACCOUNT_SUBSCRIPTION_ALT_PRICE_QUERY } from \"./queries\"\nimport { ACCOUNT_SUBSCRIPTION_ALT_PRICE_SCHEMA } from './yupSchema'\n\nimport AccountSubscriptionEditAltPriceBase from \"./AccountSubscriptionEditAltPriceBase\"\nimport AccountSubscriptionEditAltPriceForm from \"./AccountSubscriptionEditAltPriceForm\"\n\n\nconst UPDATE_ACCOUNT_SUBSCRIPTION_ALT_PRICE = gql`\n  mutation UpdateAccountSubscriptionAltPrice($input:UpdateAccountSubscriptionAltPriceInput!) {\n    updateAccountSubscriptionAltPrice(input: $input) {\n      accountSubscriptionAltPrice {\n        id\n      }\n    }\n  }\n`\n\n\nfunction AccountSubscriptionEditAltPriceEdit({ t, history, match }) {\n  const id = match.params.id\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/alt_prices/`\n\n  const { loading, error, data, } = useQuery(GET_ACCOUNT_SUBSCRIPTION_ALT_PRICE_QUERY, {\n    variables: {\n      id: id\n    }\n  })\n\n  const [updateSubscriptionAltPrice] = useMutation(UPDATE_ACCOUNT_SUBSCRIPTION_ALT_PRICE, {\n    onCompleted: () => history.push(returnUrl),\n  })\n\n  if (loading) return (\n    <AccountSubscriptionEditAltPriceBase>\n        <p>{t('general.loading_with_dots')}</p>\n    </AccountSubscriptionEditAltPriceBase>\n  )\n  // Error\n  if (error) {\n    return (\n      <AccountSubscriptionEditAltPriceBase>\n          { console.log(error) }\n          <p>{t('general.error_sad_smiley')}</p>\n      </AccountSubscriptionEditAltPriceBase>\n    )\n  }\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n  const accountSubscriptionAltPrice = data.accountSubscriptionAltPrice\n\n\n\n  return (\n    <AccountSubscriptionEditAltPriceBase>\n      <Formik\n        initialValues={{ \n          subscriptionYear: accountSubscriptionAltPrice.subscriptionYear,\n          subscriptionMonth: accountSubscriptionAltPrice.subscriptionMonth,\n          amount: accountSubscriptionAltPrice.amount,\n          description: accountSubscriptionAltPrice.description,\n          note: accountSubscriptionAltPrice.note\n        }}\n        validationSchema={ACCOUNT_SUBSCRIPTION_ALT_PRICE_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"submit values\")\n          console.log(values)\n\n          updateSubscriptionAltPrice({ variables: {\n            input: {\n              id: id,\n              subscriptionYear: values.subscriptionYear,\n              subscriptionMonth: values.subscriptionMonth,\n              amount: values.amount,\n              description: values.description,\n              note: values.note,\n            }\n          }, refetchQueries: [\n              {query: GET_ACCOUNT_SUBSCRIPTION_ALT_PRICES_QUERY, variables: {\n                accountSubscription: subscriptionId\n              }},\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              toast.success((t('relations.account.subscriptions.alt_prices.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <AccountSubscriptionEditAltPriceForm\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            returnUrl={returnUrl}\n            formTitle=\"update\"\n          />\n        )}\n      </Formik>\n    </AccountSubscriptionEditAltPriceBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditAltPriceEdit))","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_SUBSCRIPTION_BLOCKS_QUERY = gql`\nquery AccountSubscriptionBlocks($before: String, $after: String, $accountSubscription: ID!) {\n  accountSubscriptionBlocks(first: 20, before: $before, after: $after, accountSubscription: $accountSubscription) {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n    edges {\n      node {\n        id\n        accountSubscription {\n          id\n        }\n        dateStart\n        dateEnd\n        description\n        createdAt\n      }\n    } \n  }\n}\n`\n\nexport const GET_ACCOUNT_SUBSCRIPTION_BLOCK_QUERY = gql`\nquery AccountSubscriptionBlock($id: ID!) {\n  accountSubscriptionBlock(id:$id) {\n    id\n    accountSubscription {\n      id\n    }\n    dateStart\n    dateEnd\n    description\n  }\n}\n`\n\n\nexport const DELETE_ACCOUNT_SUBSCRIPTION_BLOCK = gql`\n  mutation DeleteAccountSubscriptionBlock($input: DeleteAccountSubscriptionBlockInput!) {\n    deleteAccountSubscriptionBlock(input: $input) {\n      ok\n    }\n  }\n`\n","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { DELETE_ACCOUNT_SUBSCRIPTION_BLOCK, GET_ACCOUNT_SUBSCRIPTION_BLOCKS_QUERY } from \"./queries\"\nimport confirm_delete from \"../../../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\nfunction AccountSubscriptionEditBlockDelete({t, match, history, id}) {\n  const subscriptionId = match.params.subscription_id\n  const [deleteAccountSubscriptionBlock, { data }] = useMutation(DELETE_ACCOUNT_SUBSCRIPTION_BLOCK)\n  const query_vars = {\n    accountSubscription: subscriptionId\n  }\n\n  return (\n    <button className=\"icon btn btn-link btn-sm mb-3 pull-right\" \n      title={t('general.delete')} \n      onClick={() => {\n        confirm_delete({\n          t: t,\n          msgConfirm: t(\"relations.account.subscriptions.blocks.delete_confirm_msg\"),\n          msgDescription: <p></p>,\n          msgSuccess: t('relations.account.subscriptions.blocks.delete_success'),\n          deleteFunction: deleteAccountSubscriptionBlock,\n          functionVariables: { \n            variables: {\n              input: {\n                id: id\n              },\n            }, \n            refetchQueries: [\n              { query: GET_ACCOUNT_SUBSCRIPTION_BLOCKS_QUERY, variables: query_vars },\n            ]\n          }\n        })\n    }}>\n      <Icon prefix=\"fe\" name=\"trash-2\" />\n    </button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditBlockDelete))","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\nimport AppSettingsContext from '../../../../../context/AppSettingsContext'\nimport ButtonAddSecondaryMenu from '../../../../../ui/ButtonAddSecondaryMenu'\n\nimport { GET_ACCOUNT_SUBSCRIPTION_BLOCKS_QUERY } from './queries'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Table,\n} from \"tabler-react\";\n// import HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport AccountSubscriptionEditListBase from \"../AccountSubscriptionEditListBase\"\nimport AccountSubscriptionEditBlockDelete from \"./AccountSubscriptionEditBlockDelete\"\nimport moment from 'moment';\n\n\nfunction AccountSubscriptionEditBlocks({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  console.log(appSettings)\n  \n  const id = match.params.subscription_id\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions`\n  const activeTab = \"blocks\"\n\n  const buttonAdd = <ButtonAddSecondaryMenu \n                      linkTo={`/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/blocks/add`} />\n\n  const { loading, error, data, fetchMore } = useQuery(GET_ACCOUNT_SUBSCRIPTION_BLOCKS_QUERY, {\n    variables: {\n      accountSubscription: subscriptionId\n    }\n  })\n  \n  if (loading) return (\n    <AccountSubscriptionEditListBase active_tab={activeTab}>\n      {t(\"general.loading_with_dots\")}\n    </AccountSubscriptionEditListBase>\n  )\n  if (error) return (\n    <AccountSubscriptionEditListBase active_tab={activeTab}>\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </AccountSubscriptionEditListBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n\n  const accountSubscriptionBlocks = data.accountSubscriptionBlocks\n  const pageInfo = data.accountSubscriptionBlocks.pageInfo\n\n    // Empty list\n    if (!accountSubscriptionBlocks.edges.length) { return (\n      <AccountSubscriptionEditListBase active_tab={activeTab}>\n        <div className=\"pull-right\">{buttonAdd}</div>\n        <h5>{t('relations.account.subscriptions.blocks.title_list')}</h5>\n        <p>{t('relations.account.subscriptions.blocks.empty_list')}</p>\n      </AccountSubscriptionEditListBase>\n    )}\n\n  const onLoadMore = () => {\n    fetchMore({\n      variables: {\n        after: accountSubscriptionBlocks.pageInfo.endCursor\n      },\n      updateQuery: (previousResult, { fetchMoreResult }) => {\n        const newEdges = fetchMoreResult.accountSubscriptionBlocks.edges\n        const pageInfo = fetchMoreResult.accountSubscriptionBlocks.pageInfo\n\n        return newEdges.length\n          ? {\n              // Put the new invoices at the end of the list and update `pageInfo`\n              // so we have the new `endCursor` and `hasNextPage` values\n              accountSubscriptionBlocks: {\n                __typename: previousResult.accountSubscriptionBlocks.__typename,\n                edges: [ ...previousResult.accountSubscriptionBlocks.edges, ...newEdges ],\n                pageInfo\n              }\n            }\n          : previousResult\n      }\n    })\n  }\n\n  return (\n    <AccountSubscriptionEditListBase active_tab={activeTab} pageInfo={pageInfo} onLoadMore={onLoadMore}>\n      <div className=\"pull-right\">{buttonAdd}</div>\n      <h5>{t('relations.account.subscriptions.blocks.title_list')}</h5>\n      <Table>\n        <Table.Header>\n          <Table.Row key={v4()}>\n            <Table.ColHeader>{t('general.date_start')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.date_end')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.description')}</Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {accountSubscriptionBlocks.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col>\n                  {moment(node.dateStart).format(dateFormat)}\n                </Table.Col>\n                <Table.Col>\n                  {moment(node.dateEnd).format(dateFormat)}\n                </Table.Col>\n                <Table.Col>\n                  <div dangerouslySetInnerHTML={{__html: node.description}} />\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <Link to={`/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/blocks/edit/${node.id}`}>\n                    <Button className='btn-sm' \n                            color=\"secondary\">\n                      {t('general.edit')}\n                    </Button>\n                  </Link>\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <AccountSubscriptionEditBlockDelete id={node.id} />\n                </Table.Col>\n              </Table.Row>\n            ))}\n        </Table.Body>\n      </Table>\n    </AccountSubscriptionEditListBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditBlocks))\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const ACCOUNT_SUBSCRIPTION_BLOCK_SCHEMA = Yup.object().shape({\n  dateStart: Yup.date()\n    .required(t('yup.field_required')),\n  dateEnd: Yup.date()\n    .required(t('yup.field_required')),\n  })","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport AccountSubscriptionEditBase from \"../AccountSubscriptionEditBase\"\n\n\nfunction AccountSubscriptionEditBlockBase({ t, history, match, children}) {\n  const activeTab = \"blocks\"\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/blocks/`\n\n  return (\n    <AccountSubscriptionEditBase active_tab={activeTab}>\n      {children}\n    </AccountSubscriptionEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditBlockBase))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Form,\n} from \"tabler-react\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../../../plugin_config/tinymce\"\nimport CSDatePicker from \"../../../../../ui/CSDatePicker\"\n\nfunction AccountSubscriptionEditBlockForm ({ \n  t, \n  history, \n  match, \n  isSubmitting, \n  errors, \n  values, \n  inputData, \n  returnUrl, \n  setFieldTouched, \n  setFieldValue, \n  formTitle=\"create\" })   \n{\n\n  let title\n  if ( formTitle == \"create\" ) {\n    title = t('relations.account.subscriptions.blocks.add')\n  } else {\n    title = t('relations.account.subscriptions.blocks.edit')\n  }\n\n  return (\n    <FoForm>\n      <Card.Body>\n        <h5>{title}</h5>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.date_start')}>\n              <CSDatePicker \n                className={(errors.dateStart) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.dateStart}\n                onChange={(date) => setFieldValue(\"dateStart\", date)}\n                onBlur={() => setFieldTouched(\"dateStart\", true)}\n              />\n              <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.date_end')}>\n              <CSDatePicker \n                className={(errors.dateEnd) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.dateEnd}\n                onChange={(date) => setFieldValue(\"dateEnd\", date)}\n                onBlur={() => setFieldTouched(\"dateEnd\", true)}\n              />\n              <ErrorMessage name=\"dateEnd\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n          <Form.Group label={t('general.description')}>\n            <Editor\n                tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n                textareaName=\"description\"\n                initialValue={values.description}\n                init={tinymceBasicConf}\n                onChange={(e) => setFieldValue(\"description\", e.target.getContent())}\n                onBlur={() => setFieldTouched(\"description\", true)}\n              />\n            <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Button color=\"link\" onClick={() => history.push(returnUrl)} role=\"button\">\n              {t('general.cancel')}\n          </Button>\n      </Card.Footer>\n    </FoForm>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditBlockForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_SUBSCRIPTION_BLOCKS_QUERY } from \"./queries\"\nimport { ACCOUNT_SUBSCRIPTION_BLOCK_SCHEMA } from './yupSchema'\nimport { dateToLocalISO } from '../../../../../../tools/date_tools'\n\nimport AccountSubscriptionEditBlockBase from \"./AccountSubscriptionEditBlockBase\"\nimport AccountSubscriptionEditBlockForm from \"./AccountSubscriptionEditBlockForm\"\n\n\nconst ADD_ACCOUNT_SUBSCRIPTION_BLOCK = gql`\n  mutation CreateAccountSubscriptionBlock($input:CreateAccountSubscriptionBlockInput!) {\n    createAccountSubscriptionBlock(input: $input) {\n      accountSubscriptionBlock {\n        id\n      }\n    }\n  }\n`\n\n\nfunction AccountSubscriptionEditBlockAdd({ t, history, match }) {\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/blocks/`\n\n\n  const [addSubscriptionBlock] = useMutation(ADD_ACCOUNT_SUBSCRIPTION_BLOCK, {\n    onCompleted: () => history.push(returnUrl),\n  })\n\n  return (\n    <AccountSubscriptionEditBlockBase>\n      <Formik\n        initialValues={{ \n          dateStart: new Date() ,\n          description: \"\"\n        }}\n        validationSchema={ACCOUNT_SUBSCRIPTION_BLOCK_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"submit values\")\n          console.log(values)\n\n          addSubscriptionBlock({ variables: {\n            input: {\n              accountSubscription: subscriptionId,\n              dateStart: dateToLocalISO(values.dateStart),\n              dateEnd: dateToLocalISO(values.dateEnd),\n              description: values.description\n            }\n          }, refetchQueries: [\n              {query: GET_ACCOUNT_SUBSCRIPTION_BLOCKS_QUERY, variables: {\n                accountSubscription: subscriptionId\n              }},\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              toast.success((t('relations.account.subscriptions.blocks.toast_add_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <AccountSubscriptionEditBlockForm\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            returnUrl={returnUrl}\n            formTitle=\"create\"\n          />\n        )}\n      </Formik>\n    </AccountSubscriptionEditBlockBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditBlockAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_SUBSCRIPTION_BLOCKS_QUERY, GET_ACCOUNT_SUBSCRIPTION_BLOCK_QUERY } from \"./queries\"\nimport { ACCOUNT_SUBSCRIPTION_BLOCK_SCHEMA } from './yupSchema'\nimport { dateToLocalISO } from '../../../../../../tools/date_tools'\n\nimport AccountSubscriptionEditBlockBase from \"./AccountSubscriptionEditBlockBase\"\nimport AccountSubscriptionEditBlockForm from \"./AccountSubscriptionEditBlockForm\"\n\n\nconst UPDATE_ACCOUNT_SUBSCRIPTION_BLOCK = gql`\n  mutation UpdateAccountSubscriptionBlock($input:UpdateAccountSubscriptionBlockInput!) {\n    updateAccountSubscriptionBlock(input: $input) {\n      accountSubscriptionBlock {\n        id\n      }\n    }\n  }\n`\n\n\nfunction AccountSubscriptionEditBlockEdit({ t, history, match }) {\n  const id = match.params.id\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/blocks/`\n\n  const { loading, error, data, } = useQuery(GET_ACCOUNT_SUBSCRIPTION_BLOCK_QUERY, {\n    variables: {\n      id: id\n    }\n  })\n\n  const [updateSubscriptionBlock] = useMutation(UPDATE_ACCOUNT_SUBSCRIPTION_BLOCK, {\n    onCompleted: () => history.push(returnUrl),\n  })\n\n  if (loading) return (\n    <AccountSubscriptionEditBlockBase>\n        <p>{t('general.loading_with_dots')}</p>\n    </AccountSubscriptionEditBlockBase>\n  )\n  // Error\n  if (error) {\n    return (\n      <AccountSubscriptionEditBlockBase>\n          { console.log(error) }\n          <p>{t('general.error_sad_smiley')}</p>\n      </AccountSubscriptionEditBlockBase>\n    )\n  }\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n  const accountSubscriptionBlock = data.accountSubscriptionBlock\n\n\n\n  return (\n    <AccountSubscriptionEditBlockBase>\n      <Formik\n        initialValues={{ \n          dateStart: new Date(accountSubscriptionBlock.dateStart),\n          dateEnd: new Date(accountSubscriptionBlock.dateEnd),\n          description: accountSubscriptionBlock.description\n        }}\n        validationSchema={ACCOUNT_SUBSCRIPTION_BLOCK_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"submit values\")\n          console.log(values)\n\n          updateSubscriptionBlock({ variables: {\n            input: {\n              id: id,\n              dateStart: dateToLocalISO(values.dateStart),\n              dateEnd: dateToLocalISO(values.dateEnd),\n              description: values.description\n            }\n          }, refetchQueries: [\n              {query: GET_ACCOUNT_SUBSCRIPTION_BLOCKS_QUERY, variables: {\n                accountSubscription: subscriptionId\n              }},\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              toast.success((t('relations.account.subscriptions.blocks.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <AccountSubscriptionEditBlockForm\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            returnUrl={returnUrl}\n            formTitle=\"update\"\n          />\n        )}\n      </Formik>\n    </AccountSubscriptionEditBlockBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditBlockEdit))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\n\nimport {\n  Badge\n} from \"tabler-react\";\n\nfunction SubscriptionCreditsMutationType({ t, mutationType }) {\n  switch (mutationType) {\n    case \"ADD\":  \n      return <Badge color=\"success\">+</Badge>\n      break\n    case \"SUB\":\n      return <Badge color=\"secondary\">-</Badge>\n      break\n    default:\n      return \"\"\n  }\n}\n\nexport default withTranslation()(SubscriptionCreditsMutationType)\n","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_SUBSCRIPTION_CREDITS_QUERY = gql`\nquery AccountSubscriptionCredits($before: String, $after: String, $accountSubscription: ID!) {\n  accountSubscriptionCredits(first: 20, before: $before, after: $after, accountSubscription: $accountSubscription) {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n    edges {\n      node {\n        id\n        accountSubscription {\n          id\n        }\n        mutationType\n        mutationAmount\n        description\n        createdAt\n      }\n    } \n  }\n}\n`\n\nexport const GET_ACCOUNT_SUBSCRIPTION_CREDIT_QUERY = gql`\nquery AccountSubscriptionCredit($id: ID!) {\n  accountSubscriptionCredit(id:$id) {\n    id\n    accountSubscription {\n      id\n    }\n    mutationType\n    mutationAmount\n    description\n    createdAt\n  }\n}\n`\n\n\nexport const DELETE_ACCOUNT_SUBSCRIPTION_CREDIT = gql`\n  mutation DeleteAccountSubscriptionCredit($input: DeleteAccountSubscriptionCreditInput!) {\n    deleteAccountSubscriptionCredit(input: $input) {\n      ok\n    }\n  }\n`\n","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { GET_ACCOUNT_SUBSCRIPTION_QUERY } from \"../../queries\"\nimport { DELETE_ACCOUNT_SUBSCRIPTION_CREDIT, GET_ACCOUNT_SUBSCRIPTION_CREDITS_QUERY } from \"./queries\"\nimport confirm_delete from \"../../../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\nfunction AccountSubscriptionEditCreditDelete({t, match, history, id}) {\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const [deleteAccountSubscriptionCredit] = useMutation(DELETE_ACCOUNT_SUBSCRIPTION_CREDIT)\n  const query_vars = {\n    accountSubscription: subscriptionId\n  }\n\n  return (\n    <button className=\"icon btn btn-link btn-sm mb-3 pull-right\" \n      title={t('general.delete')} \n      onClick={() => {\n        confirm_delete({\n          t: t,\n          msgConfirm: t(\"relations.account.subscriptions.credits.delete_confirm_msg\"),\n          msgDescription: <p></p>,\n          msgSuccess: t('relations.account.subscriptions.credits.delete_success'),\n          deleteFunction: deleteAccountSubscriptionCredit,\n          functionVariables: { \n            variables: {\n              input: {\n                id: id\n              },\n            }, \n            refetchQueries: [\n              { query: GET_ACCOUNT_SUBSCRIPTION_CREDITS_QUERY, variables: query_vars },\n              { query: GET_ACCOUNT_SUBSCRIPTION_QUERY, variables: {\n                accountId: accountId,\n                id: subscriptionId\n              }}\n            ]\n          }\n        })\n    }}>\n      <Icon prefix=\"fe\" name=\"trash-2\" />\n    </button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditCreditDelete))","// @flow\n\nimport React, { useContext } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport SubscriptionCreditsMutationType from \"../../../../../ui/SubscriptionCreditsMutationType\"\nimport ButtonAddSecondaryMenu from '../../../../../ui/ButtonAddSecondaryMenu'\n\nimport AppSettingsContext from '../../../../../context/AppSettingsContext'\n\nimport { GET_ACCOUNT_SUBSCRIPTION_CREDITS_QUERY } from './queries'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Table,\n} from \"tabler-react\";\n// import HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport AccountSubscriptionEditListBase from \"../AccountSubscriptionEditListBase\"\nimport AccountSubscriptionEditCreditDelete from \"./AccountSubscriptionEditCreditDelete\"\nimport moment from 'moment';\n\n\nfunction AccountSubscriptionEditCredits({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  const dateTimeFormatMoment = appSettings.dateTimeFormatMoment\n  console.log(appSettings)\n  \n  const id = match.params.subscription_id\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions`\n  const activeTab = \"credits\"\n\n  const buttonAdd = <ButtonAddSecondaryMenu \n                     linkTo={`/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/credits/add`} />\n\n  const { loading, error, data, fetchMore } = useQuery(GET_ACCOUNT_SUBSCRIPTION_CREDITS_QUERY, {\n    variables: {\n      accountSubscription: subscriptionId\n    }\n  })\n  \n  if (loading) return (\n    <AccountSubscriptionEditListBase active_tab={activeTab}>\n      {t(\"general.loading_with_dots\")}\n    </AccountSubscriptionEditListBase>\n  )\n  if (error) return (\n    <AccountSubscriptionEditListBase active_tab={activeTab}>\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </AccountSubscriptionEditListBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n\n  const accountSubscriptionCredits = data.accountSubscriptionCredits\n  const pageInfo = data.accountSubscriptionCredits.pageInfo\n  // const inputData = data\n  // const account = data.account\n  // const initialdata = data.accountSubscription\n\n  // let initialPaymentMethod = \"\"\n  // if (initialdata.financePaymentMethod) {\n  //   initialPaymentMethod = initialdata.financePaymentMethod.id\n  // }\n\n  const onLoadMore = () => {\n    fetchMore({\n      variables: {\n        after: accountSubscriptionCredits.pageInfo.endCursor\n      },\n      updateQuery: (previousResult, { fetchMoreResult }) => {\n        const newEdges = fetchMoreResult.accountSubscriptionCredits.edges\n        const pageInfo = fetchMoreResult.accountSubscriptionCredits.pageInfo\n\n        return newEdges.length\n          ? {\n              // Put the new invoices at the end of the list and update `pageInfo`\n              // so we have the new `endCursor` and `hasNextPage` values\n              accountSubscriptionCredits: {\n                __typename: previousResult.accountSubscriptionCredits.__typename,\n                edges: [ ...previousResult.accountSubscriptionCredits.edges, ...newEdges ],\n                pageInfo\n              }\n            }\n          : previousResult\n      }\n    })\n  }\n\n  return (\n    <AccountSubscriptionEditListBase active_tab={activeTab} pageInfo={pageInfo} onLoadMore={onLoadMore}>\n      <div className=\"pull-right\">{buttonAdd}</div>\n      <h5>{t('relations.account.subscriptions.credits.title_list')}</h5>\n      <Table>\n        <Table.Header>\n          <Table.Row key={v4()}>\n            <Table.ColHeader>{t('general.time')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.description')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.credits')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.mutation')}</Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {accountSubscriptionCredits.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col>\n                  {moment(node.createdAt).format(dateTimeFormatMoment)}\n                </Table.Col>\n                <Table.Col>\n                  <div dangerouslySetInnerHTML={{__html: node.description}} />\n                </Table.Col>\n                <Table.Col>\n                  {node.mutationAmount}\n                </Table.Col>\n                <Table.Col>\n                  <SubscriptionCreditsMutationType mutationType={node.mutationType} />\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <Link to={`/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/credits/edit/${node.id}`}>\n                    <Button className='btn-sm' \n                            color=\"secondary\">\n                      {t('general.edit')}\n                    </Button>\n                  </Link>\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <AccountSubscriptionEditCreditDelete id={node.id} />\n                </Table.Col>\n              </Table.Row>\n            ))}\n        </Table.Body>\n      </Table>\n    </AccountSubscriptionEditListBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditCredits))\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const ACCOUNT_SUBSCRIPTION_CREDIT_SCHEMA = Yup.object().shape({\n  mutationAmount: Yup.number()\n    .required(t('yup.field_required')),\n  })","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport AccountSubscriptionEditBase from \"../AccountSubscriptionEditBase\"\n\n\nfunction AccountSubscriptionEditCreditBase({ t, history, match, children}) {\n  const activeTab = \"credits\"\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/credits/`\n\n  return (\n    <AccountSubscriptionEditBase active_tab={activeTab}>\n      {children}\n    </AccountSubscriptionEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditCreditBase))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Form,\n} from \"tabler-react\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../../../plugin_config/tinymce\"\nimport CSDatePicker from \"../../../../../ui/CSDatePicker\"\n\nfunction AccountSubscriptionEditCreditForm ({ \n  t, \n  history, \n  match, \n  isSubmitting, \n  errors, \n  values, \n  inputData, \n  returnUrl, \n  setFieldTouched, \n  setFieldValue, \n  formTitle=\"create\" })   \n{\n\n  let title\n  if ( formTitle == \"create\" ) {\n    title = t('relations.account.subscriptions.credits.add')\n  } else {\n    title = t('relations.account.subscriptions.credits.edit')\n  }\n\n  return (\n    <FoForm>\n      <Card.Body>\n        <h5>{title}</h5>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.credits')}>\n              <Field type=\"number\" \n                      name=\"mutationAmount\" \n                      className={(errors.mutationAmount) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"mutationAmount\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('relations.account.subscriptions.credits.mutationType')}>\n              <Field component=\"select\" \n                     name=\"mutationType\" \n                     className={(errors.mutationType) ? \"form-control is-invalid\" : \"form-control\"} \n                     autoComplete=\"off\">\n                <option value=\"ADD\">{t(\"general.add\")}</option>\n                <option value=\"SUB\">{t(\"general.subtract\")}</option>\n              </Field>\n              <ErrorMessage name=\"mutationType\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n          <Form.Group label={t('general.description')}>\n            <Editor\n                tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n                textareaName=\"description\"\n                initialValue={values.description}\n                init={tinymceBasicConf}\n                onChange={(e) => setFieldValue(\"description\", e.target.getContent())}\n                onBlur={() => setFieldTouched(\"description\", true)}\n              />\n            <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Button color=\"link\" onClick={() => history.push(returnUrl)} role=\"button\">\n              {t('general.cancel')}\n          </Button>\n      </Card.Footer>\n    </FoForm>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditCreditForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_SUBSCRIPTION_QUERY } from \"../../queries\"\nimport { GET_ACCOUNT_SUBSCRIPTION_CREDITS_QUERY } from \"./queries\"\nimport { ACCOUNT_SUBSCRIPTION_CREDIT_SCHEMA } from './yupSchema'\nimport { dateToLocalISO } from '../../../../../../tools/date_tools'\n\nimport AccountSubscriptionEditCreditBase from \"./AccountSubscriptionEditCreditBase\"\nimport AccountSubscriptionEditCreditForm from \"./AccountSubscriptionEditCreditForm\"\n\n\nconst ADD_ACCOUNT_SUBSCRIPTION_CREDIT = gql`\n  mutation CreateAccountSubscriptionCredit($input:CreateAccountSubscriptionCreditInput!) {\n    createAccountSubscriptionCredit(input: $input) {\n      accountSubscriptionCredit {\n        id\n      }\n    }\n  }\n`\n\n\nfunction AccountSubscriptionEditCreditAdd({ t, history, match }) {\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/credits/`\n\n  const [addSubscriptionCredit] = useMutation(ADD_ACCOUNT_SUBSCRIPTION_CREDIT, {\n    onCompleted: () => history.push(returnUrl),\n  })\n\n  return (\n    <AccountSubscriptionEditCreditBase>\n      <Formik\n        initialValues={{ \n          mutationType: \"ADD\",\n          mutationAmount: 0,\n          description: \"\"\n        }}\n        validationSchema={ACCOUNT_SUBSCRIPTION_CREDIT_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"submit values\")\n          console.log(values)\n\n          addSubscriptionCredit({ variables: {\n            input: {\n              accountSubscription: subscriptionId,\n              mutationType: values.mutationType,\n              mutationAmount: values.mutationAmount,\n              description: values.description\n            }\n          }, refetchQueries: [\n              {query: GET_ACCOUNT_SUBSCRIPTION_CREDITS_QUERY, variables: {\n                accountSubscription: subscriptionId\n              }},\n              {query: GET_ACCOUNT_SUBSCRIPTION_QUERY, variables: {\n                accountId: accountId,\n                id: subscriptionId\n              }}\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              toast.success((t('relations.account.subscriptions.credits.toast_add_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <AccountSubscriptionEditCreditForm\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            returnUrl={returnUrl}\n            formTitle=\"create\"\n          />\n        )}\n      </Formik>\n    </AccountSubscriptionEditCreditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditCreditAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_SUBSCRIPTION_QUERY } from \"../../queries\"\nimport { GET_ACCOUNT_SUBSCRIPTION_CREDITS_QUERY, GET_ACCOUNT_SUBSCRIPTION_CREDIT_QUERY } from \"./queries\"\nimport { ACCOUNT_SUBSCRIPTION_CREDIT_SCHEMA } from './yupSchema'\nimport { dateToLocalISO } from '../../../../../../tools/date_tools'\n\nimport AccountSubscriptionEditCreditBase from \"./AccountSubscriptionEditCreditBase\"\nimport AccountSubscriptionEditCreditForm from \"./AccountSubscriptionEditCreditForm\"\n\n\nconst UPDATE_ACCOUNT_SUBSCRIPTION_CREDIT = gql`\n  mutation UpdateAccountSubscriptionCredit($input:UpdateAccountSubscriptionCreditInput!) {\n    updateAccountSubscriptionCredit(input: $input) {\n      accountSubscriptionCredit {\n        id\n      }\n    }\n  }\n`\n\n\nfunction AccountSubscriptionEditCreditEdit({ t, history, match }) {\n  const id = match.params.id\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/credits/`\n\n  const { loading, error, data, } = useQuery(GET_ACCOUNT_SUBSCRIPTION_CREDIT_QUERY, {\n    variables: {\n      id: id\n    }\n  })\n\n  const [updateSubscriptionCredit] = useMutation(UPDATE_ACCOUNT_SUBSCRIPTION_CREDIT, {\n    onCompleted: () => history.push(returnUrl),\n  })\n\n  if (loading) return (\n    <AccountSubscriptionEditCreditBase>\n        <p>{t('general.loading_with_dots')}</p>\n    </AccountSubscriptionEditCreditBase>\n  )\n  // Error\n  if (error) {\n    return (\n      <AccountSubscriptionEditCreditBase>\n          { console.log(error) }\n          <p>{t('general.error_sad_smiley')}</p>\n      </AccountSubscriptionEditCreditBase>\n    )\n  }\n\n  console.log('query data')\n  console.log(data)\n  const accountSubscriptionCredit = data.accountSubscriptionCredit\n\n\n  return (\n    <AccountSubscriptionEditCreditBase>\n      <Formik\n        initialValues={{ \n          mutationType: accountSubscriptionCredit.mutationType,\n          mutationAmount: accountSubscriptionCredit.mutationAmount,\n          description: accountSubscriptionCredit.description\n        }}\n        validationSchema={ACCOUNT_SUBSCRIPTION_CREDIT_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"submit values\")\n          console.log(values)\n\n          updateSubscriptionCredit({ variables: {\n            input: {\n              id: id,\n              mutationType: values.mutationType,\n              mutationAmount: values.mutationAmount,\n              description: values.description\n            }\n          }, refetchQueries: [\n              {query: GET_ACCOUNT_SUBSCRIPTION_CREDITS_QUERY, variables: {\n                accountSubscription: subscriptionId\n              }},\n              {query: GET_ACCOUNT_SUBSCRIPTION_QUERY, variables: {\n                accountId: accountId,\n                id: subscriptionId\n              }}\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              toast.success((t('relations.account.subscriptions.credits.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <AccountSubscriptionEditCreditForm\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            returnUrl={returnUrl}\n            formTitle=\"update\"\n          />\n        )}\n      </Formik>\n    </AccountSubscriptionEditCreditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditCreditEdit))","import { gql } from \"@apollo/client\"\n\nexport const GET_FINANCE_INVOICE_ITEM_QUERY = gql`\nquery financeInvoiceItem($before: String, $after: String, $accountSubscription: ID!) {\n  financeInvoiceItems(before: $before, after: $after, accountSubscription:$accountSubscription, orderBy: [\"-finance_invoice__date_sent\"]) {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n    edges {\n      node {\n        id\n        financeInvoice {\n          id\n          invoiceNumber\n          status\n          summary\n          dateSent\n          dateDue\n          total\n          balance\n        }\n        subscriptionYear\n        subscriptionMonth\n      }\n    }\n  }\n}\n`\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query InvoiceInputValues($after: String, $before: String) {\n    financeInvoiceGroups(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n// export const GET_ACCOUNT_SUBSCRIPTION_CREDIT_QUERY = gql`\n// query AccountSubscriptionCredit($id: ID!) {\n//   accountSubscriptionCredit(id:$id) {\n//     id\n//     accountSubscription {\n//       id\n//     }\n//     mutationType\n//     mutationAmount\n//     description\n//     createdAt\n//   }\n// }\n// `\n\n\n// export const DELETE_ACCOUNT_SUBSCRIPTION_CREDIT = gql`\n//   mutation DeleteAccountSubscriptionCredit($input: DeleteAccountSubscriptionCreditInput!) {\n//     deleteAccountSubscriptionCredit(input: $input) {\n//       ok\n//     }\n//   }\n// `\n","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { GET_FINANCE_INVOICE_ITEM_QUERY } from \"./queries\"\nimport { DELETE_FINANCE_INVOICE } from \"../../../../../finance/invoices/queries\"\nimport confirm_delete from \"../../../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\nfunction AccountSubscriptionEditInvoiceDelete({t, match, history, id}) {\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const [deleteAccountSubscriptionInvoice] = useMutation(DELETE_FINANCE_INVOICE)\n  const query_vars = {\n    accountSubscription: subscriptionId\n  }\n\n  return (\n    <button className=\"icon btn btn-link btn-sm mb-3 pull-right\" \n      title={t('general.delete')} \n      onClick={() => {\n        confirm_delete({\n          t: t,\n          msgConfirm: t(\"finance.invoices.delete_confirm_msg\"),\n          msgDescription: <p></p>,\n          msgSuccess: t('finance.invoices.deleted'),\n          deleteFunction: deleteAccountSubscriptionInvoice,\n          functionVariables: { \n            variables: {\n              input: {\n                id: id\n              },\n            }, \n            refetchQueries: [\n              { query: GET_FINANCE_INVOICE_ITEM_QUERY, variables: query_vars },\n              // { query: GET_FINANCE_INVOICE_ITEM_QUERY, variables: {\n              //   accountId: accountId,\n              //   id: subscriptionId\n              // }}\n            ]\n          }\n        })\n    }}>\n      <Icon prefix=\"fe\" name=\"trash-2\" />\n    </button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditInvoiceDelete))","// @flow\n\nimport React, { useContext } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport FinanceInvoicesStatus from \"../../../../../ui/FinanceInvoiceStatus\"\nimport ButtonAddSecondaryMenu from '../../../../../ui/ButtonAddSecondaryMenu'\n\nimport AppSettingsContext from '../../../../../context/AppSettingsContext'\n\nimport { GET_FINANCE_INVOICE_ITEM_QUERY } from './queries'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Table,\n  Text\n} from \"tabler-react\";\n// import HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n\nimport CSLS from \"../../../../../../tools/cs_local_storage\"\nimport AccountSubscriptionEditInvoiceDelete from \"./AccountSubscriptionEditInvoiceDelete\"\nimport AccountSubscriptionEditListBase from \"../AccountSubscriptionEditListBase\"\n// import AccountSubscriptionEditCreditDelete from \"./AccountSubscriptionEditCreditDelete\"\nimport moment from 'moment';\n\n\nfunction AccountSubscriptionEditInvoices({t, location, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  const dateTimeFormatMoment = appSettings.dateTimeFormatMoment\n  console.log(appSettings)\n  \n  const id = match.params.subscription_id\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions`\n  const activeTab = \"invoices\"\n\n  const buttonAdd = <ButtonAddSecondaryMenu \n                     linkTo={`/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/invoices/add`} />\n\n  const { loading, error, data, fetchMore } = useQuery(GET_FINANCE_INVOICE_ITEM_QUERY, {\n    variables: {\n      accountSubscription: subscriptionId\n    }\n  })\n  \n  if (loading) return (\n    <AccountSubscriptionEditListBase active_tab={activeTab}>\n      {t(\"general.loading_with_dots\")}\n    </AccountSubscriptionEditListBase>\n  )\n  if (error) return (\n    <AccountSubscriptionEditListBase active_tab={activeTab}>\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </AccountSubscriptionEditListBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  // Set back location for edit invoice\n  localStorage.setItem(CSLS.FINANCE_INVOICES_EDIT_RETURN, location.pathname)\n\n  const financeInvoiceItems = data.financeInvoiceItems\n  const pageInfo = data.financeInvoiceItems.pageInfo\n  // const inputData = data\n  // const account = data.account\n  // const initialdata = data.accountSubscription\n\n  // let initialPaymentMethod = \"\"\n  // if (initialdata.financePaymentMethod) {\n  //   initialPaymentMethod = initialdata.financePaymentMethod.id\n  // }\n\n  const onLoadMore = () => {\n    fetchMore({\n      variables: {\n        after: financeInvoiceItems.pageInfo.endCursor\n      },\n      updateQuery: (previousResult, { fetchMoreResult }) => {\n        const newEdges = fetchMoreResult.financeInvoiceItems.edges\n        const pageInfo = fetchMoreResult.financeInvoiceItems.pageInfo\n\n        return newEdges.length\n          ? {\n              // Put the new invoices at the end of the list and update `pageInfo`\n              // so we have the new `endCursor` and `hasNextPage` values\n              financeInvoiceItems: {\n                __typename: previousResult.financeInvoiceItems.__typename,\n                edges: [ ...previousResult.financeInvoiceItems.edges, ...newEdges ],\n                pageInfo\n              }\n            }\n          : previousResult\n      }\n    })\n  }\n\n  return (\n    <AccountSubscriptionEditListBase active_tab={activeTab} pageInfo={pageInfo} onLoadMore={onLoadMore}>\n      <div className=\"pull-right\">{buttonAdd}</div>\n      <h5>{t('relations.account.subscriptions.invoices.title_list')}</h5>\n      <Table>\n        <Table.Header>\n          <Table.Row key={v4()}>\n            <Table.ColHeader>{t('general.status')}</Table.ColHeader>\n            <Table.ColHeader>{t('finance.invoices.invoice_number')} & {t('finance.invoices.summary')}</Table.ColHeader>\n            <Table.ColHeader>{t('finance.invoices.date')} & {t('finance.invoices.due')}</Table.ColHeader>\n            {/* <Table.ColHeader>{t('finance.invoices.due')}</Table.ColHeader> */}\n            <Table.ColHeader>{t('general.total')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.balance')}</Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {financeInvoiceItems.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col key={v4()}>\n                  <FinanceInvoicesStatus status={node.financeInvoice.status} />\n                </Table.Col>\n                <Table.Col key={v4()}>\n                  {node.financeInvoice.invoiceNumber} <br />\n                  <Text.Small color=\"gray\">{node.financeInvoice.summary.trunc(30)}</Text.Small>\n                </Table.Col>\n\n                <Table.Col key={v4()}>\n                  {moment(node.financeInvoice.dateSent).format('LL')} <br />\n                  {moment(node.financeInvoice.dateDue).format('LL')}\n                </Table.Col>\n                <Table.Col key={v4()}>\n                  {node.financeInvoice.totalDisplay}\n                </Table.Col>\n                <Table.Col key={v4()}>\n                  {node.financeInvoice.balanceDisplay}\n                </Table.Col>\n                <Table.Col className=\"text-right\" key={v4()}>\n                  <Button className='btn-sm' \n                          onClick={() => history.push(\"/finance/invoices/edit/\" + node.financeInvoice.id)}\n                          color=\"secondary\">\n                    {t('general.edit')}\n                  </Button>\n                </Table.Col>\n                <Table.Col>\n                  <AccountSubscriptionEditInvoiceDelete id={node.financeInvoice.id} />\n                </Table.Col>\n                {/* <Table.Col>\n                  {moment(node.createdAt).format(dateTimeFormatMoment)}\n                </Table.Col>\n                <Table.Col>\n                  <div dangerouslySetInnerHTML={{__html: node.description}} />\n                </Table.Col>\n                <Table.Col>\n                  {node.mutationAmount}\n                </Table.Col>\n                <Table.Col>\n                  <SubscriptionCreditsMutationType mutationType={node.mutationType} />\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <Link to={`/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/credits/edit/${node.id}`}>\n                    <Button className='btn-sm' \n                            color=\"secondary\">\n                      {t('general.edit')}\n                    </Button>\n                  </Link>\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <AccountSubscriptionEditCreditDelete id={node.id} />\n                </Table.Col> */}\n              </Table.Row>\n            ))}\n        </Table.Body>\n      </Table>\n    </AccountSubscriptionEditListBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditInvoices))\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const ACCOUNT_SUBSCRIPTION_INVOICE_SCHEMA = Yup.object().shape({\n  financeInvoiceGroup: Yup.string()\n    .required(t('yup.field_required')),\n  subscriptionYear: Yup.number()\n    .required()\n    .positive()\n    .min(1000)\n    .max(9999),\n  subscriptionMonth: Yup.number()\n    .required()\n    .positive()\n    .min(1)\n    .max(12),\n  })","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport AccountSubscriptionEditBase from \"../AccountSubscriptionEditBase\"\n\n\nfunction AccountSubscriptionEditInvoiceAddBase({ t, history, match, children}) {\n  const activeTab = \"invoices\"\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/invoices/`\n\n  return (\n    <AccountSubscriptionEditBase active_tab={activeTab}>\n      {children}\n    </AccountSubscriptionEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditInvoiceAddBase))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Form,\n} from \"tabler-react\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../../../plugin_config/tinymce\"\nimport CSDatePicker from \"../../../../../ui/CSDatePicker\"\n\nfunction AccountSubscriptionEditInvoiceAddForm ({ \n  t, \n  history, \n  match, \n  isSubmitting, \n  errors, \n  values, \n  inputData, \n  returnUrl, \n  setFieldTouched, \n  setFieldValue, \n  formTitle=\"create\" })   \n{\n\n  const title = t('relations.account.subscriptions.invoices.add')\n\n  return (\n    <FoForm>\n      <Card.Body>\n        <h5>{title}</h5>\n        <Form.Group label={t('general.finance_invoice_group')}>\n          <Field component=\"select\" \n                name=\"financeInvoiceGroup\" \n                className={(errors.financeInvoiceGroup) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\">\n            <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n            {inputData.financeInvoiceGroups.edges.map(({ node }) =>\n              <option value={node.id} key={v4()}>{node.name}</option>\n            )}\n          </Field>\n          <ErrorMessage name=\"financeInvoiceGroup\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group>\n        <Form.Group label={t('general.summary')}>\n          <Field type=\"text\" \n                  name=\"summary\" \n                  className={(errors.summary) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\" />\n          <ErrorMessage name=\"summary\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.subscription_year')}>\n              <Field type=\"number\" \n                      name=\"subscriptionYear\" \n                      className={(errors.subscriptionYear) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"subscriptionYear\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.subscription_month')}>\n              <Field type=\"number\" \n                      name=\"subscriptionMonth\" \n                      className={(errors.subscriptionMonth) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"subscriptionMonth\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            className=\"pull-right\"\n            color=\"primary\"\n            disabled={isSubmitting}\n            type=\"submit\"\n          >\n            {t('general.submit')}\n          </Button>\n          <Link to={returnUrl}>\n            <Button\n              type=\"button\" \n              color=\"link\" \n            >\n                {t('general.cancel')}\n            </Button>\n          </Link>\n      </Card.Footer>\n    </FoForm>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditInvoiceAddForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n// import { GET_ACCOUNT_SUBSCRIPTION_QUERY } from \"../../queries\"\nimport { GET_FINANCE_INVOICE_ITEM_QUERY, GET_INPUT_VALUES_QUERY } from \"./queries\"\nimport { CREATE_ACCOUNT_INVOICE } from \"../../../invoices/queries\"\nimport { ACCOUNT_SUBSCRIPTION_INVOICE_SCHEMA } from './yupSchema'\n\nimport AccountSubscriptionEditInvoiceAddBase from \"./AccountSubscriptionEditInvoiceAddBase\"\nimport AccountSubscriptionEditInvoiceAddForm from \"./AccountSubscriptionEditInvoiceAddForm\"\n\n\nfunction AccountSubscriptionEditInvoiceAdd({ t, history, match }) {\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/invoices/`\n\n  const { loading: queryLoading, error: queryError, data: queryData } = useQuery(GET_INPUT_VALUES_QUERY)\n\n  const [ addFinanceInvoice ] = useMutation(CREATE_ACCOUNT_INVOICE, {\n    onCompleted: () => history.push(returnUrl),\n  })\n\n    // Loading\n    if (queryLoading) return (\n      <AccountSubscriptionEditInvoiceAddBase>\n        <p>{t('general.loading_with_dots')}</p>\n      </AccountSubscriptionEditInvoiceAddBase>\n    )\n    // Error\n    if (queryError) {\n      console.log(queryError)\n      return (\n        <AccountSubscriptionEditInvoiceAddBase>\n          <p>{t('general.error_sad_smiley')}</p>\n        </AccountSubscriptionEditInvoiceAddBase>\n      )\n    }\n    \n    console.log(queryData)\n\n  return (\n    <AccountSubscriptionEditInvoiceAddBase>\n      <Formik\n        initialValues={{ \n          financeInvoiceGroup: \"\",\n          summary: \"\",\n          subscriptionYear: new Date().getFullYear(), \n          subscriptionMonth: new Date().getMonth() + 1,\n        }}\n        validationSchema={ACCOUNT_SUBSCRIPTION_INVOICE_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"submit values\")\n          console.log(values)\n\n          addFinanceInvoice({ variables: {\n            input: {\n              account: accountId,\n              accountSubscription: subscriptionId,\n              financeInvoiceGroup: values.financeInvoiceGroup,\n              subscriptionYear: values.subscriptionYear,\n              subscriptionMonth: values.subscriptionMonth,\n              summary: values.summary,\n            }\n          }, refetchQueries: [\n              {query: GET_FINANCE_INVOICE_ITEM_QUERY, variables: {\n                accountSubscription: subscriptionId\n              }},\n              // {query: GET_ACCOUNT_SUBSCRIPTION_QUERY, variables: {\n              //   accountId: accountId,\n              //   id: subscriptionId\n              // }}\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data)\n              const financeInvoiceId = data.createFinanceInvoice.financeInvoice.id\n              history.push(`/finance/invoices/edit/${financeInvoiceId}`)\n              toast.success((t('relations.account.subscriptions.invoices.toast_add_success')), {\n                position: toast.POSITION.BOTTOM_RIGHT\n              })\n              toast.success((t('relations.account.subscriptions.invoices.toast_you_are_now_editing')), {\n                position: toast.POSITION.BOTTOM_RIGHT\n              })\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <AccountSubscriptionEditInvoiceAddForm\n            inputData={queryData}\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            returnUrl={returnUrl}\n            formTitle=\"create\"\n          />\n        )}\n      </Formik>\n    </AccountSubscriptionEditInvoiceAddBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditInvoiceAdd))","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNT_SUBSCRIPTION_PAUSES_QUERY = gql`\nquery AccountSubscriptionPauses($before: String, $after: String, $accountSubscription: ID!) {\n  accountSubscriptionPauses(first: 20, before: $before, after: $after, accountSubscription: $accountSubscription) {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n    edges {\n      node {\n        id\n        accountSubscription {\n          id\n        }\n        dateStart\n        dateEnd\n        description\n        createdAt\n      }\n    } \n  }\n}\n`\n\nexport const GET_ACCOUNT_SUBSCRIPTION_PAUSE_QUERY = gql`\nquery AccountSubscriptionPause($id: ID!) {\n  accountSubscriptionPause(id:$id) {\n    id\n    accountSubscription {\n      id\n    }\n    dateStart\n    dateEnd\n    description\n  }\n}\n`\n\n\nexport const DELETE_ACCOUNT_SUBSCRIPTION_PAUSE = gql`\n  mutation DeleteAccountSubscriptionPause($input: DeleteAccountSubscriptionPauseInput!) {\n    deleteAccountSubscriptionPause(input: $input) {\n      ok\n    }\n  }\n`\n","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { DELETE_ACCOUNT_SUBSCRIPTION_PAUSE, GET_ACCOUNT_SUBSCRIPTION_PAUSES_QUERY } from \"./queries\"\nimport confirm_delete from \"../../../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\nfunction AccountSubscriptionEditPauseDelete({t, match, history, id}) {\n  const subscriptionId = match.params.subscription_id\n  const [deleteAccountSubscriptionPause, { data }] = useMutation(DELETE_ACCOUNT_SUBSCRIPTION_PAUSE)\n  const query_vars = {\n    accountSubscription: subscriptionId\n  }\n\n  return (\n    <button className=\"icon btn btn-link btn-sm mb-3 pull-right\" \n      title={t('general.delete')} \n      onClick={() => {\n        confirm_delete({\n          t: t,\n          msgConfirm: t(\"relations.account.subscriptions.pauses.delete_confirm_msg\"),\n          msgDescription: <p></p>,\n          msgSuccess: t('relations.account.subscriptions.pauses.delete_success'),\n          deleteFunction: deleteAccountSubscriptionPause,\n          functionVariables: { \n            variables: {\n              input: {\n                id: id\n              },\n            }, \n            refetchQueries: [\n              { query: GET_ACCOUNT_SUBSCRIPTION_PAUSES_QUERY, variables: query_vars },\n            ]\n          }\n        })\n    }}>\n      <Icon prefix=\"fe\" name=\"trash-2\" />\n    </button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditPauseDelete))","// @flow\n\nimport React, { useContext } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport ButtonAddSecondaryMenu from '../../../../../ui/ButtonAddSecondaryMenu'\n\nimport AppSettingsContext from '../../../../../context/AppSettingsContext'\n\n\nimport { GET_ACCOUNT_SUBSCRIPTION_PAUSES_QUERY } from './queries'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Table,\n} from \"tabler-react\";\n// import HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport AccountSubscriptionEditListBase from \"../AccountSubscriptionEditListBase\"\nimport AccountSubscriptionEditPauseDelete from \"./AccountSubscriptionEditPauseDelete\"\nimport moment from 'moment';\n\n\nfunction AccountSubscriptionEditPauses({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  const dateTimeFormatMoment = appSettings.dateTimeFormatMoment\n  console.log(appSettings)\n  \n  const id = match.params.subscription_id\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions`\n  const activeTab = \"pauses\"\n\n  const buttonAdd = <ButtonAddSecondaryMenu \n                      linkTo={`/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/pauses/add`} />\n\n  const { loading, error, data, fetchMore } = useQuery(GET_ACCOUNT_SUBSCRIPTION_PAUSES_QUERY, {\n    variables: {\n      accountSubscription: subscriptionId\n    }\n  })\n  \n  if (loading) return (\n    <AccountSubscriptionEditListBase active_tab={activeTab}>\n      {t(\"general.loading_with_dots\")}\n    </AccountSubscriptionEditListBase>\n  )\n  if (error) return (\n    <AccountSubscriptionEditListBase active_tab={activeTab}>\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </AccountSubscriptionEditListBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n\n  const accountSubscriptionPauses = data.accountSubscriptionPauses\n  const pageInfo = data.accountSubscriptionPauses.pageInfo\n\n    // Empty list\n    if (!accountSubscriptionPauses.edges.length) { return (\n      <AccountSubscriptionEditListBase active_tab={activeTab}>\n        <div className=\"pull-right\">{buttonAdd}</div>\n        <h5>{t('relations.account.subscriptions.pauses.title_list')}</h5>\n        <p>{t('relations.account.subscriptions.pauses.empty_list')}</p>\n      </AccountSubscriptionEditListBase>\n    )}\n  // const inputData = data\n  // const account = data.account\n  // const initialdata = data.accountSubscription\n\n  // let initialPaymentMethod = \"\"\n  // if (initialdata.financePaymentMethod) {\n  //   initialPaymentMethod = initialdata.financePaymentMethod.id\n  // }\n\n  const onLoadMore = () => {\n    fetchMore({\n      variables: {\n        after: accountSubscriptionPauses.pageInfo.endCursor\n      },\n      updateQuery: (previousResult, { fetchMoreResult }) => {\n        const newEdges = fetchMoreResult.accountSubscriptionPauses.edges\n        const pageInfo = fetchMoreResult.accountSubscriptionPauses.pageInfo\n\n        return newEdges.length\n          ? {\n              // Put the new invoices at the end of the list and update `pageInfo`\n              // so we have the new `endCursor` and `hasNextPage` values\n              accountSubscriptionPauses: {\n                __typename: previousResult.accountSubscriptionPauses.__typename,\n                edges: [ ...previousResult.accountSubscriptionPauses.edges, ...newEdges ],\n                pageInfo\n              }\n            }\n          : previousResult\n      }\n    })\n  }\n\n  return (\n    <AccountSubscriptionEditListBase active_tab={activeTab} pageInfo={pageInfo} onLoadMore={onLoadMore}>\n      <div className=\"pull-right\">{buttonAdd}</div>\n      <h5>{t('relations.account.subscriptions.pauses.title_list')}</h5>\n      <Table>\n        <Table.Header>\n          <Table.Row key={v4()}>\n            <Table.ColHeader>{t('general.date_start')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.date_end')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.description')}</Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {accountSubscriptionPauses.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col>\n                  {moment(node.dateStart).format(dateFormat)}\n                </Table.Col>\n                <Table.Col>\n                  {moment(node.dateEnd).format(dateFormat)}\n                </Table.Col>\n                <Table.Col>\n                <div dangerouslySetInnerHTML={{__html: node.description}} />\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <Link to={`/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/pauses/edit/${node.id}`}>\n                    <Button className='btn-sm' \n                            color=\"secondary\">\n                      {t('general.edit')}\n                    </Button>\n                  </Link>\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <AccountSubscriptionEditPauseDelete id={node.id} />\n                </Table.Col>\n              </Table.Row>\n            ))}\n        </Table.Body>\n      </Table>\n    </AccountSubscriptionEditListBase>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditPauses))\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const ACCOUNT_SUBSCRIPTION_PAUSE_SCHEMA = Yup.object().shape({\n  dateStart: Yup.date()\n    .required(t('yup.field_required')),\n  dateEnd: Yup.date()\n    .required(t('yup.field_required')),\n  })","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\n// import { GET_INVOICE_QUERY, GET_INPUT_VALUES_QUERY } from './queries'\n// import { GET_INVOICE_QUERY } from \"../queries\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\n// import ScheduleClassPriceBack from \"./ScheduleClassPriceBack\"\nimport AccountSubscriptionEditBase from \"../AccountSubscriptionEditBase\"\n\n\nfunction AccountSubscriptionEditPauseBase({ t, history, match, children}) {\n  const activeTab = \"pauses\"\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/pauses/`\n\n  return (\n    <AccountSubscriptionEditBase active_tab={activeTab}>\n      {children}\n    </AccountSubscriptionEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditPauseBase))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Form,\n} from \"tabler-react\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../../../plugin_config/tinymce\"\nimport CSDatePicker from \"../../../../../ui/CSDatePicker\"\n\nfunction AccountSubscriptionEditPauseForm ({ \n  t, \n  history, \n  match, \n  isSubmitting, \n  errors, \n  values, \n  inputData, \n  returnUrl, \n  setFieldTouched, \n  setFieldValue, \n  formTitle=\"create\" })   \n{\n\n  let title\n  if ( formTitle == \"create\" ) {\n    title = t('relations.account.subscriptions.pauses.add')\n  } else {\n    title = t('relations.account.subscriptions.pauses.edit')\n  }\n\n  return (\n    <FoForm>\n      <Card.Body>\n        <h5>{title}</h5>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.date_start')}>\n              <CSDatePicker \n                className={(errors.dateStart) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.dateStart}\n                onChange={(date) => setFieldValue(\"dateStart\", date)}\n                onBlur={() => setFieldTouched(\"dateStart\", true)}\n              />\n              <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.date_end')}>\n              <CSDatePicker \n                className={(errors.dateEnd) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.dateEnd}\n                onChange={(date) => setFieldValue(\"dateEnd\", date)}\n                onBlur={() => setFieldTouched(\"dateEnd\", true)}\n              />\n              <ErrorMessage name=\"dateEnd\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n          <Form.Group label={t('general.description')}>\n            <Editor\n                tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n                textareaName=\"description\"\n                initialValue={values.description}\n                init={tinymceBasicConf}\n                onChange={(e) => setFieldValue(\"description\", e.target.getContent())}\n                onBlur={() => setFieldTouched(\"description\", true)}\n              />\n            <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Button color=\"link\" onClick={() => history.push(returnUrl)} role=\"button\">\n              {t('general.cancel')}\n          </Button>\n      </Card.Footer>\n    </FoForm>\n  )\n}\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditPauseForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_SUBSCRIPTION_PAUSES_QUERY } from \"./queries\"\nimport { ACCOUNT_SUBSCRIPTION_PAUSE_SCHEMA } from './yupSchema'\nimport { dateToLocalISO } from '../../../../../../tools/date_tools'\n\nimport AccountSubscriptionEditPauseBase from \"./AccountSubscriptionEditPauseBase\"\nimport AccountSubscriptionEditPauseForm from \"./AccountSubscriptionEditPauseForm\"\n\n\nconst ADD_ACCOUNT_SUBSCRIPTION_PAUSE = gql`\n  mutation CreateAccountSubscriptionPause($input:CreateAccountSubscriptionPauseInput!) {\n    createAccountSubscriptionPause(input: $input) {\n      accountSubscriptionPause {\n        id\n      }\n    }\n  }\n`\n\n\nfunction AccountSubscriptionEditPauseAdd({ t, history, match }) {\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/pauses/`\n\n  const [addSubscriptionPause] = useMutation(ADD_ACCOUNT_SUBSCRIPTION_PAUSE, {\n    onCompleted: () => history.push(returnUrl),\n  })\n\n  return (\n    <AccountSubscriptionEditPauseBase>\n      <Formik\n        initialValues={{ \n          dateStart: new Date() ,\n          description: \"\"\n        }}\n        validationSchema={ACCOUNT_SUBSCRIPTION_PAUSE_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"submit values\")\n          console.log(values)\n\n          addSubscriptionPause({ variables: {\n            input: {\n              accountSubscription: subscriptionId,\n              dateStart: dateToLocalISO(values.dateStart),\n              dateEnd: dateToLocalISO(values.dateEnd),\n              description: values.description\n            }\n          }, refetchQueries: [\n              {query: GET_ACCOUNT_SUBSCRIPTION_PAUSES_QUERY, variables: {\n                accountSubscription: subscriptionId\n              }},\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              toast.success((t('relations.account.subscriptions.pauses.toast_add_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <AccountSubscriptionEditPauseForm\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            returnUrl={returnUrl}\n            formTitle=\"create\"\n          />\n        )}\n      </Formik>\n    </AccountSubscriptionEditPauseBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditPauseAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_SUBSCRIPTION_PAUSES_QUERY, GET_ACCOUNT_SUBSCRIPTION_PAUSE_QUERY } from \"./queries\"\nimport { ACCOUNT_SUBSCRIPTION_PAUSE_SCHEMA } from './yupSchema'\nimport { dateToLocalISO } from '../../../../../../tools/date_tools'\n\nimport AccountSubscriptionEditPauseBase from \"./AccountSubscriptionEditPauseBase\"\nimport AccountSubscriptionEditPauseForm from \"./AccountSubscriptionEditPauseForm\"\n\n\nconst UPDATE_ACCOUNT_SUBSCRIPTION_PAUSE = gql`\n  mutation UpdateAccountSubscriptionPause($input:UpdateAccountSubscriptionPauseInput!) {\n    updateAccountSubscriptionPause(input: $input) {\n      accountSubscriptionPause {\n        id\n      }\n    }\n  }\n`\n\n\nfunction AccountSubscriptionEditPauseEdit({ t, history, match }) {\n  const id = match.params.id\n  const accountId = match.params.account_id\n  const subscriptionId = match.params.subscription_id\n  const returnUrl = `/relations/accounts/${accountId}/subscriptions/edit/${subscriptionId}/pauses/`\n\n  const { loading, error, data, } = useQuery(GET_ACCOUNT_SUBSCRIPTION_PAUSE_QUERY, {\n    variables: {\n      id: id\n    }\n  })\n\n  const [updateSubscriptionPause] = useMutation(UPDATE_ACCOUNT_SUBSCRIPTION_PAUSE, {\n    onCompleted: () => history.push(returnUrl),\n  })\n\n  if (loading) return (\n    <AccountSubscriptionEditPauseBase>\n        <p>{t('general.loading_with_dots')}</p>\n    </AccountSubscriptionEditPauseBase>\n  )\n  // Error\n  if (error) {\n    return (\n      <AccountSubscriptionEditPauseBase>\n          { console.log(error) }\n          <p>{t('general.error_sad_smiley')}</p>\n      </AccountSubscriptionEditPauseBase>\n    )\n  }\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n  const accountSubscriptionPause = data.accountSubscriptionPause\n\n\n\n  return (\n    <AccountSubscriptionEditPauseBase>\n      <Formik\n        initialValues={{ \n          dateStart: new Date(accountSubscriptionPause.dateStart),\n          dateEnd: new Date(accountSubscriptionPause.dateEnd),\n          description: accountSubscriptionPause.description\n        }}\n        validationSchema={ACCOUNT_SUBSCRIPTION_PAUSE_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"submit values\")\n          console.log(values)\n\n          updateSubscriptionPause({ variables: {\n            input: {\n              id: id,\n              dateStart: dateToLocalISO(values.dateStart),\n              dateEnd: dateToLocalISO(values.dateEnd),\n              description: values.description\n            }\n          }, refetchQueries: [\n              {query: GET_ACCOUNT_SUBSCRIPTION_PAUSES_QUERY, variables: {\n                accountSubscription: subscriptionId\n              }},\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              toast.success((t('relations.account.subscriptions.pauses.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <AccountSubscriptionEditPauseForm\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            returnUrl={returnUrl}\n            formTitle=\"update\"\n          />\n        )}\n      </Formik>\n    </AccountSubscriptionEditPauseBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(AccountSubscriptionEditPauseEdit))","import { gql } from \"@apollo/client\"\n\n\nexport const GET_ACCOUNT_TEACHER_PROFILE_QUERY = gql`\n  query AccountTeacherProfileQuery($id: ID!) {\n    accountTeacherProfiles(account:$id) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          account {\n            id\n          }\n          classes\n          appointments\n          events\n          role\n          education\n          bio\n          urlBio\n          urlWebsite   \n        }\n      }\n    }\n    account(id:$id) {\n      id\n      teacher\n      firstName\n      lastName\n      email\n      phone\n      mobile\n      isActive\n    }\n  }\n`\n\n\nexport const UPDATE_ACCOUNT_TEACHER_PROFILE = gql`\n  mutation UpdateAccountTeacherProfile($input:UpdateAccountTeacherProfileInput!) {\n    updateAccountTeacherProfile(input: $input) {\n      accountTeacherProfile {\n        id\n      }\n    }\n  }\n`\n\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const ACCOUNT_TEACHER_PROFILE_SCHEMA = Yup.object().shape({\n  classes: Yup.boolean(),  \n  appointments: Yup.boolean(),  \n  events: Yup.boolean(),  \n  role: Yup.string(),\n  education: Yup.string(),\n  bio: Yup.string(),\n  urlBio: Yup.string()\n    .url(t('yup.url')),\n  urlWebsite: Yup.string()\n    .url(t('yup.url')),\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { v4 } from 'uuid'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid\n} from \"tabler-react\"\n\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../plugin_config/tinymce\"\n\n\nconst RelationsAccountTeacherProfileForm = ({ t, history, isSubmitting, errors, values, return_url, setFieldTouched, setFieldValue }) => (\n  <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group>\n              <Form.Label className=\"custom-switch\">\n                  <Field \n                  className=\"custom-switch-input\"\n                  type=\"checkbox\" \n                  name=\"classes\" \n                  checked={values.classes} />\n                  <span className=\"custom-switch-indicator\" ></span>\n                  <span className=\"custom-switch-description\">{t('relations.account.teacher_profile.classes')}</span>\n              </Form.Label>\n              <ErrorMessage name=\"classes\" component=\"div\" />   \n            </Form.Group>  \n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group>\n              <Form.Label className=\"custom-switch\">\n                  <Field \n                  className=\"custom-switch-input\"\n                  type=\"checkbox\" \n                  name=\"events\" \n                  checked={values.events} />\n                  <span className=\"custom-switch-indicator\" ></span>\n                  <span className=\"custom-switch-description\">{t('relations.account.teacher_profile.events')}</span>\n              </Form.Label>\n              <ErrorMessage name=\"events\" component=\"div\" />   \n            </Form.Group>  \n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group>\n              <Form.Label className=\"custom-switch\">\n                  <Field \n                  className=\"custom-switch-input\"\n                  type=\"checkbox\" \n                  name=\"appointments\" \n                  checked={values.appointments} />\n                  <span className=\"custom-switch-indicator\" ></span>\n                  <span className=\"custom-switch-description\">{t('relations.account.teacher_profile.appointments')}</span>\n              </Form.Label>\n              <ErrorMessage name=\"appointments\" component=\"div\" />   \n            </Form.Group>  \n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.role')}>\n              <Field type=\"text\" \n                      name=\"role\" \n                      className={(errors.role) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"role\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Form.Group label={t('general.education')}>\n          <Editor\n              tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n              textareaName=\"education\"\n              initialValue={values.education}\n              init={tinymceBasicConf}\n              onBlur={(e) => {\n                setFieldTouched(\"education\", true)\n                setFieldValue(\"education\", e.target.getContent())\n              }}\n            />\n          <ErrorMessage name=\"education\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group>\n        <Form.Group label={t('general.bio')}>\n          <Editor\n              tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n              textareaName=\"bio\"\n              initialValue={values.bio}\n              init={tinymceBasicConf}\n              onBlur={(e) => {\n                setFieldTouched(\"bio\", true)\n                setFieldValue(\"bio\", e.target.getContent())\n              }}\n            />\n          <ErrorMessage name=\"bio\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('relations.account.teacher_profile.url_bio')}>\n              <Field type=\"text\" \n                      name=\"urlBio\" \n                      className={(errors.urlBio) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"urlBio\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('relations.account.teacher_profile.url_website')}>\n              <Field type=\"text\" \n                      name=\"urlWebsite\" \n                      className={(errors.urlWebsite) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"urlWebsite\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            // className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          \n          {/* <Button color=\"link\" onClick={() => history.push(return_url)}>\n              {t('general.cancel')}\n          </Button> */}\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(RelationsAccountTeacherProfileForm))\n\n","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_ACCOUNT_TEACHER_PROFILE_QUERY, UPDATE_ACCOUNT_TEACHER_PROFILE } from './queries'\nimport { ACCOUNT_TEACHER_PROFILE_SCHEMA } from './yupSchema'\n\nimport {\n  Card,\n} from \"tabler-react\"\n\nimport RelationsAccountProfileForm from \"./RelationsAccountTeacherProfileForm\"\nimport RelationsAccountProfileBase from '../RelationsAccountProfileBase'\n\n\nfunction RelationsAccountTeacherProfile({ t, match}) {\n  const accountId = match.params.account_id\n  const activeLink = \"teacher_profile\"\n  const { loading, error, data } = useQuery(GET_ACCOUNT_TEACHER_PROFILE_QUERY, {\n    variables: { id: accountId }\n  })\n  const [updateAccountTeacherProfile] = useMutation(UPDATE_ACCOUNT_TEACHER_PROFILE)\n\n  if (loading) return (\n    <RelationsAccountProfileBase activeLink={activeLink}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('relations.accounts.profile')}</Card.Title>\n        </Card.Header>\n        <Card.Body>\n          <p>{t('general.loading_with_dots')}</p>  \n        </Card.Body>\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n\n  if (error) return (\n    <RelationsAccountProfileBase activeLink={activeLink}>\n      {console.log(error)}\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('relations.accounts.profile')}</Card.Title>\n        </Card.Header>\n        <Card.Body>\n          <p>{t('general.error_sad_smiley')}</p>\n        </Card.Body>\n      </Card>\n    </RelationsAccountProfileBase>\n  )\n\n  const account = data.account\n  const initialData = data.accountTeacherProfiles.edges[0].node\n\n  return (\n    <RelationsAccountProfileBase\n      user={account}\n      activeLink={activeLink}\n    >\n      <Card>\n        <Card.Header>\n          <Card.Title>{t('relations.accounts.profile')}</Card.Title>\n        </Card.Header>\n        <Formik\n          initialValues={{ \n            classes: initialData.classes, \n            appointments: initialData.appointments, \n            events: initialData.events, \n            role: initialData.role, \n            education: initialData.education, \n            bio: initialData.bio,\n            urlBio: initialData.urlBio,\n            urlWebsite: initialData.urlWebsite,\n          }}\n          validationSchema={ACCOUNT_TEACHER_PROFILE_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              updateAccountTeacherProfile({ variables: {\n                input: {\n                  account: initialData.account.id,\n                  classes: values.classes, \n                  appointments: values.appointments, \n                  events: values.events, \n                  role: values.role, \n                  education: values.education, \n                  bio: values.bio,\n                  urlBio: values.urlBio,\n                  urlWebsite: values.urlWebsite,\n                }\n              }, refetchQueries: [\n                  // Refresh local cached results for this account teacher profile\n                  {query: GET_ACCOUNT_TEACHER_PROFILE_QUERY, variables: {id: accountId}}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  toast.success((t('relations.account.teacher_profile.toast_edit_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  setSubmitting(false)\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n            <RelationsAccountProfileForm\n              isSubmitting={isSubmitting}\n              setFieldTouched={setFieldTouched}\n              setFieldValue={setFieldValue}\n              errors={errors}\n              values={values}\n            />\n          )}\n        </Formik>    \n      </Card>\n    </RelationsAccountProfileBase>\n  )\n}\n\n\n// class RelationsAccountTeacherProfile extends Component {\n//   constructor(props) {\n//     super(props)\n//     console.log(\"Organization profile props:\")\n//     console.log(props)\n//   }\n\n//   render() {\n//     const t = this.props.t\n//     const match = this.props.match\n//     const account_id = match.params.account_id\n//     console.log(account_id)\n\n//     return (\n//       <SiteWrapper>\n//         <div className=\"my-3 my-md-5\">\n//           <Container>\n//             <Query query={GET_ACCOUNT_TEACHER_PROFILE_QUERY} variables={{ id: account_id }} >\n//               {({ loading, error, data, refetch }) => {\n//                   // Loading\n//                   if (loading) return <p>{t('general.loading_with_dots')}</p>\n//                   // Error\n//                   if (error) {\n//                     console.log(error)\n//                     return <p>{t('general.error_sad_smiley')}</p>\n//                   }\n\n//                   console.log('query data')\n//                   console.log(data)\n                  \n//                   const account = data.account\n//                   const initialData = data.accountTeacherProfiles.edges[0].node\n//                   console.log(initialData)\n\n\n//                   return (\n//                     <div>\n//                       <Page.Header title={account.firstName + \" \" + account.lastName}>\n//                         <RelationsAccountsBack />\n//                       </Page.Header>\n//                       <Grid.Row>\n//                         <Grid.Col md={9}>\n//                         <Card>\n//                           <Card.Header>\n//                             <Card.Title>{t('relations.account.teacher_profile.title')}</Card.Title>\n//                             {console.log(match.params.account_id)}\n//                           </Card.Header>\n//                         <Mutation mutation={UPDATE_ACCOUNT_TEACHER_PROFILE}> \n//                          {(updateAccountTeacherProfile, { data }) => (\n//                           <Formik\n//                             initialValues={{ \n//                               classes: initialData.classes, \n//                               appointments: initialData.appointments, \n//                               events: initialData.events, \n//                               role: initialData.role, \n//                               education: initialData.education, \n//                               bio: initialData.bio,\n//                               urlBio: initialData.urlBio,\n//                               urlWebsite: initialData.urlWebsite,\n//                             }}\n//                             validationSchema={ACCOUNT_TEACHER_PROFILE_SCHEMA}\n//                             onSubmit={(values, { setSubmitting }) => {\n//                                 console.log('submit values:')\n//                                 console.log(values)\n\n//                                 updateAccountTeacherProfile({ variables: {\n//                                   input: {\n//                                     account: initialData.account.id,\n//                                     classes: values.classes, \n//                                     appointments: values.appointments, \n//                                     events: values.events, \n//                                     role: values.role, \n//                                     education: values.education, \n//                                     bio: values.bio,\n//                                     urlBio: values.urlBio,\n//                                     urlWebsite: values.urlWebsite,\n//                                   }\n//                                 }, refetchQueries: [\n//                                     // Refresh local cached results for this account teacher profile\n//                                     {query: GET_ACCOUNT_TEACHER_PROFILE_QUERY, variables: {id: account_id}}\n//                                 ]})\n//                                 .then(({ data }) => {\n//                                     console.log('got data', data)\n//                                     toast.success((t('relations.account.teacher_profile.toast_edit_success')), {\n//                                         position: toast.POSITION.BOTTOM_RIGHT\n//                                       })\n//                                     setSubmitting(false)\n//                                   }).catch((error) => {\n//                                     toast.error((t('general.toast_server_error')) + ': ' +  error, {\n//                                         position: toast.POSITION.BOTTOM_RIGHT\n//                                       })\n//                                     console.log('there was an error sending the query', error)\n//                                     setSubmitting(false)\n//                                   })\n//                             }}\n//                             >\n//                             {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n//                               <RelationsAccountProfileForm\n//                                 isSubmitting={isSubmitting}\n//                                 setFieldTouched={setFieldTouched}\n//                                 setFieldValue={setFieldValue}\n//                                 errors={errors}\n//                                 values={values}\n//                               />\n//                             )}\n//                           </Formik>\n//                         )}\n//                       </Mutation>\n//                     </Card>\n//                     </Grid.Col>                                    \n//                     <Grid.Col md={3}>\n//                       <ProfileCardSmall user={account}/>\n//                       <ProfileMenu \n//                         activeLink='teacher_profile'\n//                         account_id={account_id}\n//                       /> \n//                     </Grid.Col>\n//                   </Grid.Row>\n//                 </div>\n//               )}}\n//             </Query>\n//           </Container>\n//         </div>\n//     </SiteWrapper>\n//     )}\n//   }\n\n\nexport default withTranslation()(withRouter(RelationsAccountTeacherProfile))","import CSLS from \"../../../tools/cs_local_storage\"\n\nexport function get_list_query_variables() {\n  let queryVars = {}\n\n  let search = localStorage.getItem(CSLS.RELATIONS_BUSINESSES_SEARCH)\n  let showArchived = localStorage.getItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE)\n  \n  if (search) {\n    queryVars.name = search\n  }\n  if (showArchived === \"true\") {\n    queryVars.archived = true\n  } else {\n    queryVars.archived = false\n  }\n  \n\n  console.log(queryVars)\n\n  return queryVars\n}\n\n","\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n    Page,\n    Grid,\n    Icon,\n    Button,\n    Container,\n  } from \"tabler-react\";\n\nimport CSLS from \"../../../tools/cs_local_storage\"\nimport InputSearch from \"../../general/InputSearch\"\nimport RelationsMenu from \"../RelationsMenu\"\nimport { get_list_query_variables } from \"./tools\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\n\nconst RelationsB2BBase = ({t, history, refetch, children }) => (\n  <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Container>\n        <Page.Header title={t(\"relations.title\")}>\n          <div className=\"page-options d-flex\">\n            <InputSearch \n              initialValueKey={CSLS.RELATIONS_BUSINESSES_SEARCH}\n              placeholder=\"Search...\"\n              onChange={(value) => {\n                console.log(value)\n                localStorage.setItem(CSLS.RELATIONS_BUSINESSES_SEARCH, value)\n                refetch(get_list_query_variables())\n              }}\n            />\n          </div>\n        </Page.Header>\n        <Grid.Row>\n          <Grid.Col md={9}>\n            {children}\n          </Grid.Col>\n          <Grid.Col md={3}>\n            <HasPermissionWrapper permission=\"add\"\n                                  resource=\"business\">\n              <Button color=\"primary btn-block mb-6\"\n                      onClick={() => history.push(\"/relations/b2b/add\")}>\n                <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('relations.b2b.add')}\n              </Button>\n            </HasPermissionWrapper>\n            <RelationsMenu activeLink='b2b'/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n    </div>\n  </SiteWrapper>\n)\n\n\n  export default withTranslation()(withRouter(RelationsB2BBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_BUSINESSES_QUERY = gql`\n  query Businesses($before:String, $after:String, $name:String, $archived: Boolean!) {\n    businesses(first:15, before:$before, after:$after, b2b:true, name_Icontains:$name, archived:$archived) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          archived\n          b2b\n          supplier\n          vip\n          name\n          address\n          postcode\n          city\n          country\n          phone\n          phone2\n          emailContact\n          emailBilling\n          registration\n          taxRegistration\n          mollieCustomerId\n        }\n      }\n    }\n  }\n`\n\nexport const GET_BUSINESS_QUERY = gql`\n  query Business($id: ID!) {\n    business(id:$id) {\n      id\n      archived\n      vip\n      name\n      address\n      postcode\n      city\n      country\n      phone\n      phone2\n      emailContact\n      emailBilling\n      registration\n      taxRegistration\n      mollieCustomerId\n    }\n  }\n`\n\nexport const UPDATE_BUSINESS = gql`\n  mutation UpdateBusiness($input: UpdateBusinessInput!) {\n    updateBusiness(input: $input) {\n      business {\n        id\n        archived\n      }\n    }\n  }\n`\n\n","import React from 'react'\nimport { confirmAlert } from 'react-confirm-alert'\nimport { toast } from 'react-toastify'\nimport {\n  Icon,\n} from \"tabler-react\";\n\n\nconst confirm_archive = ({t, msgConfirm, msgDescription, msgSuccess, archiveFunction, functionVariables}) => {\n    confirmAlert({\n      customUI: ({ onClose }) => {\n        return (\n          <div className='custom-ui'>\n            <h1>{t('general.confirm_archive')}</h1>\n            {msgConfirm}\n            {msgDescription}\n            <button className=\"btn btn-link pull-right\" onClick={onClose}>{t('general.confirm_archive_no')}</button>\n            <button\n              className=\"btn btn-warning\"\n              onClick={() => {\n                archiveFunction(functionVariables)\n                  .then(({ data }) => {\n                    console.log('got data', data);\n                    toast.success(\n                      msgSuccess, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error);\n                  })\n                onClose()\n              }}\n            >\n              <Icon name=\"inbox\" /> {t('general.confirm_archive_yes')}\n            </button>\n          </div>\n        )\n      }\n    })\n  }\n\nexport default confirm_archive\n","import React from 'react'\nimport { confirmAlert } from 'react-confirm-alert'\nimport { toast } from 'react-toastify'\nimport {\n  Icon,\n} from \"tabler-react\";\n\n\nconst confirm_unarchive = ({t, msgConfirm, msgDescription, msgSuccess, archiveFunction, functionVariables}) => {\n    confirmAlert({\n      customUI: ({ onClose }) => {\n        return (\n          <div className='custom-ui'>\n            <h1>{t('general.confirm_unarchive')}</h1>\n            {msgConfirm}\n            {msgDescription}\n            <button className=\"btn btn-link pull-right\" onClick={onClose}>{t('general.confirm_unarchive_no')}</button>\n            <button\n              className=\"btn btn-warning\"\n              onClick={() => {\n                archiveFunction(functionVariables)\n                  .then(({ data }) => {\n                    console.log('got data', data);\n                    toast.success(\n                      msgSuccess, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error);\n                  })\n                onClose()\n              }}\n            >\n              <Icon name=\"corner-up-left\" /> {t('general.confirm_unarchive_yes')}\n            </button>\n          </div>\n        )\n      }\n    })\n  }\n\nexport default confirm_unarchive\n","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\n\nimport {\n  Badge,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { confirmAlert } from 'react-confirm-alert'\nimport { toast } from 'react-toastify'\n\nimport CSLS from \"../../../tools/cs_local_storage\"\n\nimport ContentCard from \"../../general/ContentCard\"\nimport RelationsB2BBase from \"./RelationsB2BBase\"\nimport { GET_BUSINESSES_QUERY, UPDATE_BUSINESS } from \"./queries\"\nimport { get_list_query_variables } from \"./tools\"\nimport confirm_archive from \"../../../tools/confirm_archive\"\nimport confirm_unarchive from \"../../../tools/confirm_unarchive\"\nimport confirm_delete from \"../../../tools/confirm_delete\"\n\n\n\n\nconst DELETE_BUSINESS = gql`\n  mutation DeleteBusiness($input: DeleteBusinessInput!) {\n    deleteBusiness(input: $input) {\n      ok\n    }\n  }\n`\n\n\nfunction RelationsB2B({ t, history }) {\n  // Set some initial value for archived, if not found\n  if (!localStorage.getItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE)) {\n    localStorage.setItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE, false) \n  }\n\n  const { loading, error, data, fetchMore, refetch } = useQuery(GET_BUSINESSES_QUERY, { \n    variables: get_list_query_variables()\n  })\n  const [updateBusiness] = useMutation(UPDATE_BUSINESS)\n  const [deleteBusiness] = useMutation(DELETE_BUSINESS)\n\n  const headerOptions = <Card.Options>\n    <Button color={(localStorage.getItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE) === \"false\") ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {\n              localStorage.setItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE, false)\n              refetch(get_list_query_variables())\n            }\n    }>\n      {t('general.current')}\n    </Button>\n    <Button color={(localStorage.getItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE) === \"true\") ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {\n              localStorage.setItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE, true)\n              refetch(get_list_query_variables())\n            }\n    }>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  if (loading) return (\n    <RelationsB2BBase refetch={refetch}>\n      <ContentCard>\n        {t(\"general.loading_with_dots\")}\n      </ContentCard>\n    </RelationsB2BBase>\n  )\n  if (error) return (\n    <RelationsB2BBase refetch={refetch}>\n      <ContentCard cardTitle={t('relations.b2b.title')}>\n        <p>{t('relations.b2b.error_loading')}</p>\n      </ContentCard>\n    </RelationsB2BBase>\n  )\n\n  let businesses = data.businesses\n\n  // Empty list\n  if (!businesses.edges.length) { return (\n    <RelationsB2BBase refetch={refetch}>\n      <ContentCard cardTitle={t('relations.b2b.title')}\n                   headerContent={headerOptions}>\n        <p>\n          {(localStorage.getItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE) === \"true\") ? \n            t('relations.b2b.empty_archive') : \n            t(\"relations.b2b.empty_list\")}\n        </p>\n      </ContentCard>\n    </RelationsB2BBase>\n  )}\n\n  console.log(data)\n\n  \n\n  return (\n    <RelationsB2BBase refetch={refetch}>\n      <ContentCard cardTitle={t('relations.b2b.title')}\n                    headerContent={headerOptions}\n                    pageInfo={businesses.pageInfo}\n                    onLoadMore={() => {\n                      fetchMore({\n                        variables: {\n                          after: businesses.pageInfo.endCursor\n                        },\n                        updateQuery: (previousResult, { fetchMoreResult }) => {\n                          const newEdges = fetchMoreResult.businesses.edges\n                          const pageInfo = fetchMoreResult.businesses.pageInfo \n\n                          return newEdges.length\n                            ? {\n                                // Put the new businesses at the end of the list and update `pageInfo`\n                                // so we have the new `endCursor` and `hasNextPage` values\n                                businesses: {\n                                  __typename: previousResult.businesses.__typename,\n                                  edges: [ ...previousResult.businesses.edges, ...newEdges ],\n                                  pageInfo\n                                }\n                            }\n                          : previousResult\n                      }\n                    })\n                  }} >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n              {data.businesses.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  <Table.Col key={v4()}>\n                    {node.name}\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    {(node.archived) ? \n                      <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                      <Link to={`/relations/b2b/${node.id}/edit`}>\n                        <Button className='btn-sm' \n                                color=\"secondary\">\n                          {t('general.edit')}\n                        </Button>\n                      </Link>\n                    }\n                  </Table.Col>\n                  {/* Archive / restore buttons */}\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                      title={t('general.archive')} \n                      href=\"\"\n                      onClick={() => {\n                        console.log(\"clicked isActive\")\n                        let id = node.id\n                        let show_archive\n                        if (localStorage.getItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE) == \"true\") {\n                          show_archive = true\n                        } else {\n                          show_archive = false\n                        }\n\n                        updateBusiness({ variables: {\n                          input: {\n                            id,\n                            archived: !node.archived // invert, as we need the opposite from the list currently displayed\n                          }}, \n                          refetchQueries: [\n                        {query: GET_BUSINESSES_QUERY, variables: get_list_query_variables()}\n                        ]}).then(({ data }) => {\n                          console.log('got data', data);\n                          toast.success(\n                            (!show_archive) ? t('relations.b2b.archived'): t('relations.b2b.restored'), {\n                              position: toast.POSITION.BOTTOM_RIGHT\n                            })\n                        }).catch((error) => {\n                          toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                              position: toast.POSITION.BOTTOM_RIGHT\n                            })\n                          console.log('there was an error sending the query', error);\n                        })\n                        }}>\n                      {\n                        (!node.archived) ?\n                          <Icon prefix=\"fa\" name=\"inbox\" /> :\n                          t(\"general.restore\")\n                      }\n                    </button>\n                  </Table.Col>\n\n                  {/* Delete button shown when archived */}\n                    {\n                      (!node.archived) ? '' :\n                        <Table.Col className=\"text-right\" key={v4()}>\n                        <button className=\"icon btn btn-link btn-sm\" \n                          title={t('general.delete')} \n                          href=\"\"\n                          onClick={() => {\n                            confirm_delete({\n                              t: t,\n                              msgConfirm: t(\"relations.b2b.delete_confirm_msg\"),\n                              msgDescription: <span><br /><br /><ul><li>{node.name}</li></ul></span>,\n                              msgSuccess: t('relations.b2b.deleted'),\n                              deleteFunction: deleteBusiness,\n                              functionVariables: { variables: {\n                                input: {\n                                  id: node.id\n                                }\n                              }, refetchQueries: [\n                                {query: GET_BUSINESSES_QUERY, variables: get_list_query_variables()}\n                              ]}\n                            })\n                          }}\n                        >\n                          <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n                        </button>\n                      </Table.Col>\n                    }\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>  \n    </RelationsB2BBase>  \n  )\n}\n\n\n// const RelationsB2B = ({ t, history }) => (\n//   <SiteWrapper>\n//     <div className=\"my-3 my-md-5\">\n//       <Query query={GET_ACCOUNTS_QUERY} variables={get_list_query_variables()} notifyOnNetworkStatusChange>\n//         {({ loading, error, data, refetch, fetchMore, variables}) => {\n//           // Loading\n//           if (loading) return (\n//             <RelationsAccountsBase refetch={refetch}>\n//               <ContentCard cardTitle={t('relations.b2b.title')}>\n//                 <Dimmer active={true}\n//                         loader={true}>\n//                 </Dimmer>\n//               </ContentCard>\n//             </RelationsAccountsBase>\n//           )\n//           // Error\n//           if (error) return (\n//             <RelationsAccountsBase>\n//               <Container>\n//                 <ContentCard cardTitle={t('relations.b2b.title')}>\n//                   <p>{t('relations.b2b.error_loading')}</p>\n//                 </ContentCard>\n//               </Container>\n//             </RelationsAccountsBase>\n//           )\n//           const headerOptions = <Card.Options>\n//             <Button color={(localStorage.getItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE) === \"true\") ? 'primary': 'secondary'}  \n//                     size=\"sm\"\n//                     onClick={() => {\n//                       localStorage.setItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE, true)\n//                       refetch(get_list_query_variables())\n//                     }\n//             }>\n//               {t('general.active')}\n//             </Button>\n//             <Button color={(localStorage.getItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE) === \"false\") ? 'primary': 'secondary'} \n//                     size=\"sm\" \n//                     className=\"ml-2\" \n//                     onClick={() => {\n//                       localStorage.setItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE, false)\n//                       refetch(get_list_query_variables())\n//                     }\n//             }>\n//               {t('general.deleted')}\n//             </Button>\n//           </Card.Options>\n          \n//           // Empty list\n//           if (!data.businesses.edges.length) { return (\n//             <RelationsAccountsBase refetch={refetch}>\n//               <ContentCard cardTitle={t('relations.b2b.title')}\n//                             headerContent={headerOptions}>\n//                 <p>\n//                   {(localStorage.getItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE) === \"true\") ? \n//                     t('relations.b2b.empty_list') : \n//                     t(\"relations.b2b.empty_archive\")}\n//                 </p>\n//               </ContentCard>\n//             </RelationsAccountsBase>\n//           )} else {   \n//           // Life's good! :)\n//           return (\n//             <RelationsAccountsBase refetch={refetch}>\n//               {console.log('query vars:')}\n//               {console.log(variables)}\n//               <ContentCard cardTitle={t('relations.b2b.title')}\n//                            headerContent={headerOptions}\n//                            pageInfo={data.businesses.pageInfo}\n//                            onLoadMore={() => {\n//                              fetchMore({\n//                                variables: {\n//                                  after: data.businesses.pageInfo.endCursor\n//                                },\n//                                updateQuery: (previousResult, { fetchMoreResult }) => {\n//                                  const newEdges = fetchMoreResult.businesses.edges\n//                                  const pageInfo = fetchMoreResult.businesses.pageInfo \n\n//                                  return newEdges.length\n//                                    ? {\n//                                        // Put the new businesses at the end of the list and update `pageInfo`\n//                                        // so we have the new `endCursor` and `hasNextPage` values\n//                                       data: {\n//                                         businesses: {\n//                                           __typename: previousResult.businesses.__typename,\n//                                           edges: [ ...previousResult.businesses.edges, ...newEdges ],\n//                                           pageInfo\n//                                         }\n//                                       }\n//                                     }\n//                                   : previousResult\n//                               }\n//                             })\n//                           }} >\n//                 <Table>\n//                   <Table.Header>\n//                     <Table.Row key={v4()}>\n//                       <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n//                     </Table.Row>\n//                   </Table.Header>\n//                   <Table.Body>\n//                       {data.businesses.edges.map(({ node }) => (\n//                         <Table.Row key={v4()}>\n//                           <Table.Col key={v4()}>\n//                             {node.name}\n//                           </Table.Col>\n//                           {/* <Table.Col key={v4()}>\n//                             {node.email}\n//                           </Table.Col> */}\n//                           <Table.Col className=\"text-right\" key={v4()}>\n//                             {(!node.archived) ? \n//                               <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n//                               <Button className='btn-sm' \n//                                       onClick={() => history.push(\"/relations/businesses/\" + node.id + \"/edit\")}\n//                                       color=\"secondary\">\n//                                 {t('general.edit')}\n//                               </Button>\n//                             }\n//                           </Table.Col>\n//                           {/* <Mutation mutation={UPDATE_ACCOUNT_ACTIVE} key={v4()}>\n//                             {(updateAccountActive, { data }) => (\n//                               <Table.Col className=\"text-right\" key={v4()}>\n//                                 <button className=\"icon btn btn-link btn-sm\" \n//                                   title={t('general.deactivate')} \n//                                   href=\"\"\n//                                   onClick={() => {\n//                                     console.log(\"clicked archived\")\n//                                     let id = node.id\n//                                     let archived \n//                                     if (localStorage.getItem(CSLS.RELATIONS_BUSINESSES_SHOW_ARCHIVE) == \"true\") {\n//                                       archived = true\n//                                     } else {\n//                                       archived = false\n//                                     }\n\n//                                     updateAccountActive({ variables: {\n//                                       input: {\n//                                         id,\n//                                         archived: !archived // invert, as we need the opposite from the list currently displayed\n//                                       }\n//                                 }, refetchQueries: [\n//                                     {query: GET_ACCOUNTS_QUERY, variables: get_list_query_variables()}\n//                                 ]}).then(({ data }) => {\n//                                   console.log('got data', data);\n//                                   toast.success(\n//                                     (archived) ? t('relations.b2b.deactivated'): t('relations.b2b.restored')``, {\n//                                       position: toast.POSITION.BOTTOM_RIGHT\n//                                     })\n//                                 }).catch((error) => {\n//                                   toast.error((t('general.toast_server_error')) + ': ' +  error, {\n//                                       position: toast.POSITION.BOTTOM_RIGHT\n//                                     })\n//                                   console.log('there was an error sending the query', error);\n//                                 })\n//                                 }}>\n//                                   {\n//                                     (node.archived) ?\n//                                       <Icon prefix=\"fe\" name=\"trash-2\" /> :\n//                                       t(\"general.restore\")\n//                                   }\n//                                 </button>\n//                               </Table.Col>\n//                             )}\n//                           </Mutation> */}\n//                           {/* {\n//                             (node.archived) ? '' :\n//                               <Mutation mutation={DELETE_ACCOUNT} key={v4()}>\n//                                 {(deleteAccount, { data }) => (\n//                                   <Table.Col className=\"text-right\" key={v4()}>\n//                                     <button className=\"icon btn btn-link btn-sm\" \n//                                       title={t('general.delete')} \n//                                       href=\"\"\n//                                       onClick={() => {\n//                                         confirm_delete({\n//                                           t: t,\n//                                           msgConfirm: t(\"relations.b2b.delete_confirm_msg\"),\n//                                           msgDescription: <p>{node.first_name} {node.last_name}</p>,\n//                                           msgSuccess: t('relations.b2b.deleted'),\n//                                           deleteFunction: deleteAccount,\n//                                           functionVariables: { variables: {\n//                                             input: {\n//                                               id: node.id\n//                                             }\n//                                           }, refetchQueries: [\n//                                             {query: GET_ACCOUNTS_QUERY, variables: get_list_query_variables()}\n//                                           ]}\n//                                         })\n//                                     }}>\n//                                       <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n//                                     </button>\n//                                   </Table.Col>\n//                                 )}\n//                               </Mutation>\n//                           } */}\n//                         </Table.Row>\n//                       ))}\n//                   </Table.Body>\n//                 </Table>\n//               </ContentCard>\n//             </RelationsAccountsBase>\n//           )}}\n//         }\n//       </Query>\n//     </div>\n//   </SiteWrapper>\n// )\n\nexport default withTranslation()(withRouter(RelationsB2B))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid\n} from \"tabler-react\"\n\n\nconst RelationsB2BAddFrom = ({ t, history, isSubmitting, errors, return_url }) => (\n  <FoForm>\n      <Card.Body>\n          <Grid.Row>\n            <Grid.Col>\n              <Form.Group label={t('general.name')}>\n                <Field type=\"text\" \n                        name=\"name\" \n                        className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                        autoComplete=\"off\" />\n                <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n              </Form.Group>\n            </Grid.Col>\n          </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Button color=\"link\" onClick={() => history.push(return_url)}>\n              {t('general.cancel')}\n          </Button>\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(RelationsB2BAddFrom))","// @flow\n\nimport React from 'react'\nimport { useMutation } from \"@apollo/client\";\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik, Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { GET_BUSINESSES_QUERY } from './queries'\n// import { ACCOUNT_SCHEMA } from './yupSchema'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport { get_list_query_variables } from \"./tools\"\nimport RelationsB2BAddForm from \"./RelationB2BAddForm\"\nimport RelationsMenu from '../RelationsMenu'\n\n\nconst ADD_BUSINESS = gql`\n  mutation CreateBusiness($input:CreateBusinessInput!) {\n    createBusiness(input: $input) {\n      business {\n        id\n      }\n    }\n  }\n`\n\nconst return_url = \"/relations/b2b\"\n\nfunction RelationsB2BAdd({ t, history }) {\n  const [addBusiness] = useMutation(ADD_BUSINESS)\n  \n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('relations.title')} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n            <Card>\n              <Card.Header>\n                <Card.Title>{t('relations.b2b.title_add')}</Card.Title>\n              </Card.Header>\n                <Formik\n                    initialValues={{ name: '' }}\n                    // validationSchema={B2BADD_SCHEMA}\n                    onSubmit={(values, { setSubmitting }) => {\n                        addBusiness({ variables: {\n                          input: {\n                            name: values.name,\n                            b2b: true\n                          }\n                        }, refetchQueries: [\n                            {query: GET_BUSINESSES_QUERY, variables: get_list_query_variables()}\n                        ]})\n                        .then(({ data }) => {\n                            console.log('got data', data)\n                            const businessId = data.createBusiness.business.id\n                            history.push(`/relations/b2b/${businessId}/edit`)\n                            toast.success((t('relations.b2b.toast_add_success')), {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                          }).catch((error) => {\n                            toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                            console.log('there was an error sending the query', error)\n                            setSubmitting(false)\n                          })\n                    }}\n                    >\n                    {({ isSubmitting, errors }) => (\n                        <RelationsB2BAddForm\n                          isSubmitting={isSubmitting}\n                          errors={errors}\n                          return_url={return_url}\n                        />\n                    )}\n                </Formik>\n            </Card>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <HasPermissionWrapper permission=\"add\"\n                                    resource=\"business\">\n                <Button color=\"primary btn-block mb-6\"\n                        onClick={() => history.push(return_url)}>\n                  <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                </Button>\n              </HasPermissionWrapper>\n              <RelationsMenu activeLink='accounts'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(RelationsB2BAdd))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\n\nimport {\n  Button,\n  Icon,\n  Page,\n  Grid,\n  Card,\n  Container\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\n// import OrganizationMenu from \"../OrganizationMenu\"\n// import ProfileMenu from \"./ProfileMenu\"\n\n\nfunction RelationsB2BEditBase({ t, match, history, children, cardTitle=\"\" }) {\n  const returnUrl = \"/relations/b2b\"\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"relations.title\")}>\n            {/* <RelationsAccountsBack /> */}\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n            <Card>\n              <Card.Header>\n                <Card.Title>{cardTitle}</Card.Title>\n              </Card.Header>\n              {children}\n            </Card>\n            </Grid.Col>                                    \n            <Grid.Col md={3}>\n              {/* B2B relation menu goes here */}\n              <HasPermissionWrapper permission=\"change\"\n                                    resource=\"business\">\n                <Link to={returnUrl}>\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n              </HasPermissionWrapper>\n              {/* <RelationsMenu activeLink='b2b'/> */}\n              {/* <ProfileMenu \n                activeLink='profile'\n                account_id={account_id}\n              />  */}\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(RelationsB2BEditBase))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { v4 } from 'uuid'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid\n} from \"tabler-react\"\n\n\nimport CSDatePicker from \"../../ui/CSDatePicker\"\nimport ISO_COUNTRY_CODES from \"../../../tools/iso_country_codes\"\n\n\nfunction RelationsB2BEditForm({ t, history, isSubmitting, errors, values, return_url, setFieldTouched, setFieldValue }) {\n  return (\n    <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.name')}>\n              <Field type=\"text\" \n                      name=\"name\" \n                      className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.email_contact')}>\n              <Field type=\"text\" \n                      name=\"emailContact\" \n                      className={(errors.emailContact) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"emailContact\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.email_billing')}>\n              <Field type=\"text\" \n                      name=\"emailBilling\" \n                      className={(errors.emailBilling) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"emailBilling\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.phone')}>\n              <Field type=\"text\" \n                      name=\"phone\" \n                      className={(errors.phone) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"phone\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n          <Form.Group label={t('general.phone2')}>\n              <Field type=\"text\" \n                      name=\"phone2\" \n                      className={(errors.phone2) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"phone2\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.address')}>\n              <Field type=\"text\" \n                      name=\"address\" \n                      className={(errors.address) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"address\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.postcode')}>\n              <Field type=\"text\" \n                      name=\"postcode\" \n                      className={(errors.postcode) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"postcode\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.city')}>\n              <Field type=\"text\" \n                      name=\"city\" \n                      className={(errors.city) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"city\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.country')}>\n              <Field component=\"select\" \n                    name=\"country\" \n                    className={(errors.country) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\"></option>\n                { ISO_COUNTRY_CODES.map(\n                    country => <option value={country.Code} key={v4()}>{country.Name}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"country\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('finance.invoices.relation_company_registration')}>\n              <Field type=\"text\" \n                      name=\"registration\" \n                      className={(errors.registration) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"registration\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n          <Form.Group label={t('finance.invoices.relation_company_tax_registration')}>\n              <Field type=\"text\" \n                      name=\"taxRegistration\" \n                      className={(errors.taxRegistration) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"taxRegistration\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            // className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          \n          {/* <Button color=\"link\" onClick={() => history.push(return_url)}>\n              {t('general.cancel')}\n          </Button> */}\n      </Card.Footer>\n    </FoForm>\n  )\n}\n\nexport default withTranslation()(withRouter(RelationsB2BEditForm))\n\n","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_BUSINESSES_QUERY, GET_BUSINESS_QUERY, UPDATE_BUSINESS } from './queries'\n// import { ACCOUNT_SCHEMA } from './yupSchema'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { dateToLocalISO } from '../../../tools/date_tools'\n\nimport { get_list_query_variables } from \"./tools\"\nimport RelationsB2BEditBase from './RelationsB2BEditBase'\n// import RelationsAccountsBack from \"./RelationsAccountsBack\"\nimport RelationsB2BEditForm from \"./RelationsB2BEditForm\"\n\n// import OrganizationMenu from \"../OrganizationMenu\"\n// import ProfileMenu from \"./ProfileMenu\"\n\nfunction RelationsB2BEdit({ t, match, history}) {\n  const businessId = match.params.business_id\n  const [updateBusiness] = useMutation(UPDATE_BUSINESS)\n  const { loading, error, data, refetch } = useQuery(GET_BUSINESS_QUERY, {\n    variables: {\n      id: businessId\n    }\n  })\n\n  // Loading\n  if (loading) return <RelationsB2BEditBase>\n      <Card.Body>{t('general.loading_with_dots')}</Card.Body>\n    </RelationsB2BEditBase>\n  // Error\n  if (error) {\n    console.log(error)\n    return <RelationsB2BEditBase>\n      <Card.Body>{t('general.error_sad_smiley')}</Card.Body>\n    </RelationsB2BEditBase>\n  }\n\n  const initialData = data.business\n  console.log(initialData)\n\n  return (\n    <RelationsB2BEditBase cardTitle={t('relations.b2b.title_edit')}>\n      <Formik\n        initialValues={{ \n          name: initialData.name,\n          phone: initialData.phone,\n          phone2: initialData.phone2,\n          address: initialData.address,\n          postcode: initialData.postcode,\n          city: initialData.city,\n          country: initialData.country,\n          emailBilling: initialData.emailBilling,\n          emailContact: initialData.emailContact,\n          registration: initialData.registration,\n          taxRegistration: initialData.taxRegistration\n        }}\n        // validationSchema={ACCOUNT_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n            console.log('submit values:')\n            console.log(values)\n\n            let input_vars = {\n              id: businessId,\n              name: values.name,\n              phone: values.phone,\n              phone2: values.phone2,\n              address: values.address,\n              postcode: values.postcode,\n              city: values.city,\n              country: values.country,\n              emailBilling: values.emailBilling,\n              emailContact: values.emailContact,\n              registration: values.registration,\n              taxRegistration: values.taxRegistration\n            }\n\n            updateBusiness({ variables: {\n              input: input_vars\n            }, refetchQueries: [\n                // Refetch list\n                {query: GET_BUSINESSES_QUERY, variables: get_list_query_variables()},\n                // Refresh local cached results for this account\n                {query: GET_BUSINESS_QUERY, variables: {\"id\": businessId}}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                toast.success((t('relations.b2b.toast_edit_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                setSubmitting(false)\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <RelationsB2BEditForm\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n          />\n        )}\n      </Formik>\n    </RelationsB2BEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(RelationsB2BEdit))","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\n\n\nimport {\n  List\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../HasPermissionWrapper\"\n\nlet appointments_active\nlet events_active\nlet classes_active\n\nconst ScheduleMenu = ({ t, activeLink }) => (\n  <List.Group transparent={true}>\n    {(activeLink === 'appointments') ? appointments_active = true: appointments_active = false}\n    {(activeLink === 'events') ? events_active = true: events_active = false}\n    {(activeLink === 'classes') ? classes_active = true: classes_active = false}\n    \n\n    <HasPermissionWrapper \n        resource=\"scheduleclass\"\n        permission=\"view\" \n    >\n      <List.GroupItem\n          key={v4()}\n          className=\"d-flex align-items-center\"\n          to=\"#/schedule/classes\"\n          icon=\"book\"\n          active={classes_active}\n          >\n          {t('schedule.classes.title')}\n      </List.GroupItem>\n    </HasPermissionWrapper>\n    <HasPermissionWrapper \n        resource=\"scheduleevent\"\n        permission=\"view\" \n    >\n      <List.GroupItem\n          key={v4()}\n          className=\"d-flex align-items-center\"\n          to=\"#/schedule/events\"\n          icon=\"clipboard\"\n          active={events_active}\n          >\n          {t('schedule.events.title')}\n      </List.GroupItem>\n    </HasPermissionWrapper>\n    {/* <HasPermissionWrapper \n        resource=\"scheduleappointment\"\n        permission=\"view\" \n    >\n      <List.GroupItem\n          key={v4()}\n          className=\"d-flex align-items-center\"\n          to=\"#/schedule/appointments\"\n          icon=\"calendar\"\n          active={appointments_active}\n          >\n          {t('schedule.appointments.title')}\n      </List.GroupItem>\n    </HasPermissionWrapper> */}\n  </List.Group>\n);\n\nexport default withTranslation()(ScheduleMenu)","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  StampCard\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport ScheduleMenu from \"../ScheduleMenu\"\n\n\nclass ScheduleHome extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Schedule home props:\")\n    console.log(props)\n  }\n\n\n  render() {\n    const t = this.props.t\n    const match = this.props.match\n    const history = this.props.history\n    const id = match.params.id\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title={t(\"schedule.title\")} />\n            <Grid.Row>\n              <Grid.Col md={9}>\n                <Grid.Row>\n                  <HasPermissionWrapper\n                    resource=\"scheduleclass\"\n                    permission=\"view\"\n                  >\n                    <Grid.Col md={4} lg={4}>\n                      <Link to='/schedule/classes'>\n                        <StampCard header={<small>{t('schedule.classes.title')}</small>} footer={t('')} color=\"blue\" icon=\"book\" />\n                      </Link>\n                    </Grid.Col>\n                  </HasPermissionWrapper>\n                  <HasPermissionWrapper\n                    resource=\"scheduleevent\"\n                    permission=\"view\"\n                  >\n                    <Grid.Col md={4} lg={4}>\n                      <Link to='/schedule/events'>\n                        <StampCard header={<small>{t('schedule.events.title')}</small>} footer={t('')} color=\"blue\" icon=\"clipboard\" />\n                      </Link>\n                    </Grid.Col>\n                  </HasPermissionWrapper>\n                  {/* <HasPermissionWrapper\n                    resource=\"scheduleappointment\"\n                    permission=\"view\"\n                  >\n                    <Grid.Col md={4} lg={4}>\n                      <Link to='/schedule/appointments')}>\n                        <StampCard header={<small>{t('schedule.appointments.title')}</small>} footer={t('')} color=\"blue\" icon=\"calendar\" />\n                      </div>\n                    </Grid.Col>\n                  </HasPermissionWrapper> */}\n                </Grid.Row>\n              </Grid.Col>\n              <Grid.Col md={3}>\n                <ScheduleMenu />\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n    </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(ScheduleHome))","import CSLS from \"../../../tools/cs_local_storage\"\n\nexport function get_list_query_variables() {\n  let orderBy\n  let organizationAppointment\n  let organizationLocation\n\n  let queryVars = {\n    dateFrom: localStorage.getItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_FROM), \n    dateUntil: localStorage.getItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_UNTIL)\n  }\n\n  orderBy = localStorage.getItem(CSLS.SCHEDULE_APPOINTMENTS_ORDER_BY)\n  if (orderBy) {\n    queryVars.orderBy = orderBy\n  }\n\n  organizationAppointment = localStorage.getItem(CSLS.SCHEDULE_APPOINTMENTS_FILTER_CLASSTYPE)\n  if (organizationAppointment) {\n    queryVars.organizationAppointment = organizationAppointment\n  } else {\n    queryVars.organizationAppointment = \"\"\n  }\n\n  organizationLocation = localStorage.getItem(CSLS.SCHEDULE_APPOINTMENTS_FILTER_LOCATION)\n  if (organizationLocation) {\n    queryVars.organizationLocation = organizationLocation\n  } else {\n    queryVars.organizationLocation = \"\"\n  }\n\n  console.log(queryVars)\n\n  return queryVars\n}\n\n","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport CSLS from \"../../../tools/cs_local_storage\"\nimport { get_list_query_variables } from './tools'\n\n\nfunction getDefaultValue(value) {\n  let defaultValue = localStorage.getItem(value)\n  if (defaultValue) {\n    return defaultValue\n  } else {\n    return \"\"\n  }\n}\n\n\nfunction updateLocalStorageAndRefetch(key, value, refetch) {\n  localStorage.setItem(key, value)\n  refetch(get_list_query_variables())\n}\n\nconst selectClass = \"form-control mb-2\"\n\n\nconst ScheduleAppointmentsFilter = ({ t, history, data, refetch }) => (\n  <div>\n    {/* Locations */}\n    <select \n      className={selectClass}\n      defaultValue={getDefaultValue(CSLS.SCHEDULE_APPOINTMENTS_FILTER_LOCATION)}\n      onChange={ (event) => {\n        updateLocalStorageAndRefetch(\n          CSLS.SCHEDULE_APPOINTMENTS_FILTER_LOCATION,\n          event.target.value,\n          refetch\n        )\n      }}\n    >\n      <option value=\"\" key={v4()}>{t(\"schedule.appointments.filter_all_locations\")}</option>\n      {data.organizationLocations.edges.map(({ node }) =>\n        <option value={node.id} key={v4()}>{node.name}</option>\n      )}\n    </select>\n    {/* Appointments */}\n    {/* <select \n      className={selectClass}\n      defaultValue={getDefaultValue(CSLS.SCHEDULE_APPOINTMENTS_FILTER_CLASSTYPE)}\n      onChange={ (event) => {\n        updateLocalStorageAndRefetch(\n          CSLS.SCHEDULE_APPOINTMENTS_FILTER_CLASSTYPE,\n          event.target.value,\n          refetch\n        )\n      }}\n    >\n      <option value=\"\" key={v4()}>{t(\"schedule.appointments.filter_all_appointments\")}</option>\n      {data.organizationAppointments.edges.map(({ node }) =>\n        <option value={node.id} key={v4()}>{node.name}</option>\n      )}\n    </select> */}\n  </div>\n);\n\nexport default withTranslation()(withRouter(ScheduleAppointmentsFilter))","import { gql } from \"@apollo/client\"\n\nexport const GET_APPOINTMENTS_QUERY = gql`\n  query ScheduleAppointments(\n      $dateFrom: Date!, \n      $dateUntil:Date!, \n      $orderBy: String, \n      $organizationLocation: String\n    ){\n    scheduleAppointments(\n        dateFrom:$dateFrom, \n        dateUntil: $dateUntil, \n        orderBy: $orderBy, \n        organizationLocation: $organizationLocation\n    ){\n      date\n      appointments {\n        scheduleItemId\n        frequencyType\n        date\n        organizationLocationRoom {\n          id\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n        organizationAppointment {\n          id\n          name\n        }\n        timeStart\n        timeEnd\n        displayPublic\n      }\n    }\n    user {\n      id\n      isActive\n      email\n      firstName\n      lastName\n      groups {\n        edges {\n          node {\n            id\n            name\n            permissions {\n              edges {\n                node {\n                  id\n                  name\n                  codename\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    organizationLocations(first: 100, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    organizationAppointments(first: 100, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const GET_APPOINTMENT_QUERY = gql`\n  query ScheduleItem($id: ID!, $before: String, $after: String, $archived: Boolean!) {\n    scheduleItem(id:$id) {\n      id\n      frequencyType\n      frequencyInterval\n      organizationLocationRoom {\n        id\n        name\n        organizationLocation {\n          id\n          name\n        }\n      }\n      dateStart\n      dateEnd\n      timeStart\n      timeEnd\n      displayPublic\n    }\n    organizationLocationRooms(first: 100, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query ScheduleClassInputValues($after: String, $before: String, $archived: Boolean) {\n    organizationLocationRooms(first: 100, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n      }\n    }\n    organizationAppointments(first: 100, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    organizationLevels(first: 100, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    financePaymentMethods(first: 100, before: $before, after: $after, archived: $archived) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Badge,\n  Dropdown,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Container,\n  Table,\n  Text,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport CSDatePicker from \"../../ui/CSDatePicker\"\nimport confirm_delete from \"../../../tools/confirm_delete\"\nimport { confirmAlert } from 'react-confirm-alert'\nimport { toast } from 'react-toastify'\n\nimport CSLS from \"../../../tools/cs_local_storage\"\n\n\nimport BadgeBoolean from \"../../ui/BadgeBoolean\"\nimport ContentCard from \"../../general/ContentCard\"\nimport ScheduleMenu from \"../ScheduleMenu\"\nimport ScheduleAppointmentsFilter from \"./ScheduleAppointmentsFilter\"\n\nimport { GET_APPOINTMENTS_QUERY } from \"./queries\"\nimport { get_list_query_variables } from './tools'\n\nimport moment from 'moment'\n\n\nconst DELETE_SCHEDULE_APPOINTMENT = gql`\n  mutation DeleteScheduleAppointment($input: DeleteScheduleAppointmentInput!) {\n    deleteScheduleAppointment(input: $input) {\n      ok\n    }\n  }\n`\n\n\n// Set some initial values for dates, if not found\nif (!localStorage.getItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_FROM)) {\n  console.log('date from not found... defaulting to today...')\n  localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_FROM, moment().format('YYYY-MM-DD')) \n  localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_UNTIL, moment().add(6, 'days').format('YYYY-MM-DD')) \n} \n\n\nconst ScheduleAppointments = ({ t, history }) => (\n  <SiteWrapper>\n    <div className=\"my-3 my-md-5\">\n      <Query query={GET_APPOINTMENTS_QUERY} variables={get_list_query_variables()}>\n        {({ loading, error, data, refetch }) => {\n          // Loading\n          if (loading) return (\n            <Container>\n              <p>{t('general.loading_with_dots')}</p>\n            </Container>\n          )\n          // Error\n          if (error) {\n            console.log(error)\n            return (\n              <Container>\n                <p>{t('general.error_sad_smiley')}</p>\n              </Container>\n            )\n          }\n          \n          // Empty list\n          if (!data.scheduleAppointments.length) { return (\n            <ContentCard cardTitle={t('schedule.appointments.title')}>\n              <p>\n                {t('schedule.appointments.empty_list')}\n              </p>\n            </ContentCard>\n          )} else {   \n          // Life's good! :)\n          return (\n            <Container>\n              <Page.Header title={t(\"schedule.title\")}>\n                <div className=\"page-options d-flex\">\n                  <span title={t(\"schedule.appointments.tooltip_sort_by_location\")}>\n                    <Button \n                      icon=\"home\"\n                      tooltip=\"text\"\n                      className=\"mr-2\"\n                      color={\n                        ((localStorage.getItem(CSLS.SCHEDULE_APPOINTMENTS_ORDER_BY) === \"location\") || (!localStorage.getItem(CSLS.SCHEDULE_APPOINTMENTS_ORDER_BY))) ?\n                        \"azure\" : \"secondary\"\n                      }\n                      onClick={() => {\n                        localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_ORDER_BY, \"location\")\n                        refetch(get_list_query_variables())\n                      }}\n                    />\n                  </span>\n                  <span title={t(\"schedule.appointments.tooltip_sort_by_starttime\")}>\n                    <Button \n                      icon=\"clock\"\n                      className=\"mr-2\"\n                      color={\n                        (localStorage.getItem(CSLS.SCHEDULE_APPOINTMENTS_ORDER_BY) === \"starttime\") ?\n                        \"azure\" : \"secondary\"\n                      }\n                      onClick={() => {\n                        localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_ORDER_BY, \"starttime\")\n                        refetch(get_list_query_variables())\n                      }}\n                    />\n                  </span>\n                  <CSDatePicker \n                    className=\"form-control schedule-list-csdatepicker mr-2\"\n                    selected={new Date(localStorage.getItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_FROM))}\n                    isClearable={false}\n                    onChange={(date) => {\n                      let nextWeekFrom = moment(date)\n                      let nextWeekUntil = moment(nextWeekFrom).add(6, 'days')\n\n                      localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_FROM, nextWeekFrom.format('YYYY-MM-DD')) \n                      localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_UNTIL, nextWeekUntil.format('YYYY-MM-DD')) \n\n                      console.log(get_list_query_variables())\n\n                      refetch(get_list_query_variables())\n                    }}\n                    placeholderText={t('schedule.appointments.go_to_date')}\n                  />\n                  <Button.List className=\"schedule-list-page-options-btn-list\">\n                    <Button \n                      icon=\"chevron-left\"\n                      color=\"secondary\"\n                      onClick={ () => {\n                        let nextWeekFrom = moment(localStorage.getItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_FROM)).subtract(7, 'days')\n                        let nextWeekUntil = moment(nextWeekFrom).add(6, 'days')\n                        \n                        localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_FROM, nextWeekFrom.format('YYYY-MM-DD')) \n                        localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_UNTIL, nextWeekUntil.format('YYYY-MM-DD')) \n\n                        refetch(get_list_query_variables())\n                    }} />\n                    <Button \n                      icon=\"sun\"\n                      color=\"secondary\"\n                      onClick={ () => {\n                        let currentWeekFrom = moment()\n                        let currentWeekUntil = moment(currentWeekFrom).add(6, 'days')\n\n                        localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_FROM, currentWeekFrom.format('YYYY-MM-DD')) \n                        localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_UNTIL, currentWeekUntil.format('YYYY-MM-DD')) \n                        \n                        refetch(get_list_query_variables())\n                    }} />\n                    <Button \n                      icon=\"chevron-right\"\n                      color=\"secondary\"\n                      onClick={ () => {\n                        let nextWeekFrom = moment(localStorage.getItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_FROM)).add(7, 'days')\n                        let nextWeekUntil = moment(nextWeekFrom).add(6, 'days')\n                        \n                        localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_FROM, nextWeekFrom.format('YYYY-MM-DD')) \n                        localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_DATE_UNTIL, nextWeekUntil.format('YYYY-MM-DD')) \n\n                        refetch(get_list_query_variables())\n                    }} />\n                  </Button.List> \n                </div>\n              </Page.Header>\n              <Grid.Row>\n                <Grid.Col md={9}>\n                  { data.scheduleAppointments.map(({ date, appointments }) => (\n                    <div key={v4()}>\n                      <Card>\n                        <Card.Header>\n                          <Card.Title>\n                            <b>{moment(date).format(\"dddd\")}</b> {' '}\n                            <span className=\"text-muted\">\n                              {moment(date).format(\"LL\")} \n                            </span>\n                          </Card.Title>\n                        </Card.Header>\n                        <Card.Body>\n                          {!(appointments.length) ? t('schedule.appointments.empty_list') :\n                            <Table>\n                              <Table.Header>\n                                <Table.Row key={v4()}>\n                                  <Table.ColHeader>{t('general.time')}</Table.ColHeader>\n                                  <Table.ColHeader>{t('general.location')}</Table.ColHeader>\n                                  <Table.ColHeader>{t('general.appointment')}</Table.ColHeader>\n                                  <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n                                  <Table.ColHeader></Table.ColHeader>\n                                </Table.Row>\n                              </Table.Header>\n                              <Table.Body>\n                                {appointments.map((\n                                  { scheduleItemId, \n                                    frequencyType,\n                                    date, \n                                    organizationLocationRoom, \n                                    organizationAppointment, \n                                    timeStart, \n                                    timeEnd,\n                                    displayPublic }) => (\n                                  <Table.Row key={v4()}>\n                                    <Table.Col>\n                                      {/* Start & end time */}\n                                      {moment(date + ' ' + timeStart).format('LT')} {' - '}\n                                      {moment(date + ' ' + timeEnd).format('LT')} { ' ' }\n                                      {(frequencyType === 'SPECIFIC') ? <Badge color=\"primary\">{t('general.once')}</Badge> : null }\n                                    </Table.Col>\n                                    <Table.Col>\n                                      {/* Location */}\n                                      {organizationLocationRoom.organizationLocation.name} {' '}\n                                      <span className=\"text-muted\"> &bull; {organizationLocationRoom.name}</span>\n                                    </Table.Col>\n                                    <Table.Col>\n                                      {/* Type */}\n                                      {/* {organizationAppointment.name} <br /> */}\n                                    </Table.Col>\n                                    <Table.Col>\n                                      {/* Public */}\n                                      <BadgeBoolean value={displayPublic} />\n                                    </Table.Col>\n                                    <Table.Col>\n                                      <Dropdown\n                                        key={v4()}\n                                        className=\"pull-right\"\n                                        type=\"button\"\n                                        toggle\n                                        color=\"secondary btn-sm\"\n                                        triggerContent={t(\"general.actions\")}\n                                        items={[\n                                          <Dropdown.Item key={v4()}>Dropdown Link</Dropdown.Item>,\n                                          <HasPermissionWrapper key={v4()} permission=\"change\" resource=\"scheduleclass\">\n                                            <Dropdown.ItemDivider key={v4()} />\n                                            <Dropdown.Item\n                                              key={v4()}\n                                              badge={t('schedule.appointments.all_appointments_in_series')}\n                                              badgeType=\"secondary\"\n                                              icon=\"edit-2\"\n                                              onClick={() => history.push('/schedule/appointments/all/edit/' + scheduleItemId)}>\n                                                {t(\"general.edit\")}\n                                            </Dropdown.Item>\n                                          </HasPermissionWrapper>,\n                                          <HasPermissionWrapper key={v4()} permission=\"delete\" resource=\"scheduleclass\">\n                                            <Dropdown.ItemDivider key={v4()} />\n                                            <Mutation mutation={DELETE_SCHEDULE_APPOINTMENT} key={v4()}>\n                                              {(deleteScheduleAppointment, { data }) => (\n                                                  <Dropdown.Item\n                                                    key={v4()}\n                                                    badge={t('schedule.appointments.all_appointments_in_series')}\n                                                    badgeType=\"danger\"\n                                                    icon=\"trash-2\"\n                                                    onClick={() => {\n                                                      confirm_delete({\n                                                        t: t,\n                                                        msgConfirm: t(\"schedule.appointments.delete_confirm_msg\"),\n                                                        msgDescription: <p key={v4()}>\n                                                          {moment(date + ' ' + timeStart).format('LT')} {' - '}\n                                                          {moment(date + ' ' + timeEnd).format('LT')} {' '} @ {' '}\n                                                          {organizationLocationRoom.organizationLocation.name} {' '}\n                                                          {organizationLocationRoom.name}\n                                                          </p>,\n                                                        msgSuccess: t('schedule.appointments.deleted'),\n                                                        deleteFunction: deleteScheduleAppointment,\n                                                        functionVariables: { variables: {\n                                                          input: {\n                                                            id: scheduleItemId\n                                                          }\n                                                        }, refetchQueries: [\n                                                          { query: GET_APPOINTMENTS_QUERY, variables: get_list_query_variables() }\n                                                        ]}\n                                                      })\n                                                  }}>\n                                                  {t(\"general.delete\")}\n                                                  </Dropdown.Item>\n                                              )}\n                                            </Mutation>\n                                          </HasPermissionWrapper>\n                                        ]}\n                                      />\n                                    </Table.Col>\n                                  </Table.Row>\n                                ))}\n                              </Table.Body>\n                            </Table>\n                          }\n                        </Card.Body>\n                      </Card>\n                    </div>\n                    ))}\n              </Grid.Col>\n              <Grid.Col md={3}>\n                <HasPermissionWrapper permission=\"add\"\n                                      resource=\"scheduleclass\">\n                  <Button color=\"primary btn-block mb-1\"\n                          onClick={() => history.push(\"/schedule/appointments/add\")}>\n                    <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('schedule.appointments.add')}\n                  </Button>\n                </HasPermissionWrapper>\n                <div>\n                  <Button\n                    className=\"pull-right\"\n                    color=\"link\"\n                    size=\"sm\"\n                    onClick={() => {\n                      localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_FILTER_CLASSTYPE, \"\")\n                      localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_FILTER_LEVEL, \"\")\n                      localStorage.setItem(CSLS.SCHEDULE_APPOINTMENTS_FILTER_LOCATION, \"\")\n                      refetch(get_list_query_variables())\n                    }}\n                  >\n                    {t(\"general.clear\")}\n                  </Button>\n                </div>\n                <h5 className=\"mt-2 pt-1\">{t(\"general.filter\")}</h5>\n                <ScheduleAppointmentsFilter data={data} refetch={refetch} />\n                <h5>{t(\"general.menu\")}</h5>\n                <ScheduleMenu activeLink='appointments'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      )}}}\n      </Query>\n    </div>\n  </SiteWrapper>\n);\n\nexport default withTranslation()(withRouter(ScheduleAppointments))","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\n\n\nimport {\n  List\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nlet edit_active\nlet teachers_available_active\n\nconst AppointmentEditMenu = ({ t, activeLink, appointmentId }) => (\n    <List.Group transparent={true}>\n        {(activeLink === 'edit') ? edit_active = true: edit_active = false}\n        {(activeLink === 'teachers_available') ? teachers_available_active = true: teachers_available_active = false}\n        \n        <HasPermissionWrapper\n          resource=\"scheduleappointment\"\n          permission=\"change\"\n        >        \n          <List.GroupItem\n              key={v4()}\n              className=\"d-flex align-items-center\"\n              to={\"#/schedule/appointments/all/edit/\" + appointmentId}\n              icon=\"edit-3\"\n              active={edit_active}\n              >\n              {t('general.edit')}\n          </List.GroupItem>\n        </HasPermissionWrapper>\n        <HasPermissionWrapper\n          resource=\"scheduleappointment\"\n          permission=\"change\"\n        >     \n          <List.GroupItem\n              key={v4()}\n              className=\"d-flex align-items-center\"\n              to={\"#/schedule/appointments/all/teachers_available/\" + appointmentId}\n              icon=\"users\"\n              active={teachers_available_active}\n              >\n              {t('general.teachers_available')}\n          </List.GroupItem>\n        </HasPermissionWrapper>\n    </List.Group>\n);\n\nexport default withTranslation()(AppointmentEditMenu)","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const APPOINTMENT_SCHEMA = Yup.object().shape({\n    frequencyType: Yup.string()\n      .required(t('yup.field_required')),\n    organizationLocationRoom: Yup.string()\n      .required(t('yup.field_required')),\n    dateStart: Yup.date()\n      .required(t('yup.field_required')),\n    timeStart: Yup.date()\n      .typeError(t('yup.time_required'))\n      .required(t('yup.field_required')),\n    timeEnd: Yup.date()\n      .typeError(t('yup.time_required'))\n      .required(t('yup.field_required')),\n  })\n","import React from 'react'\nimport DatePicker from \"react-datepicker\"\nimport { withTranslation } from 'react-i18next'\n\nconst CSTimePicker = ({t, selected, onChange=f=>f, onBlur=f=>f, className=\"form-control\", clearable=true, placeholderText=\"\"}) =>\n    <DatePicker \n        todayButton={t('general.today')}\n        dateFormat={t('system.datepicker_timeformat')}\n        selected={selected}\n        placeholderText={(placeholderText) ? placeholderText : t('datepicker.placeholder_time')}\n        isClearable={clearable}\n        showTimeSelect\n        showTimeSelectOnly\n        timeIntervals={15}\n        className={className}\n        dropdownMode=\"select\"\n        onChange={(date) => onChange(date)}\n        onBlur={() => onBlur()}\n    />\n\nexport default withTranslation()(CSTimePicker)","import React, { Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { v4 } from \"uuid\"\n\nimport {\n    Button,\n    Card,\n    Form,\n    Grid\n  } from \"tabler-react\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../plugin_config/tinymce\"\nimport CSDatePicker from \"../../ui/CSDatePicker\"\nimport CSTimePicker from \"../../ui/CSTimePicker\"\n\nconst ScheduleAppointmentForm = ({ t, history, inputData, isSubmitting, setFieldValue, setFieldTouched, errors, values, touched, return_url }) => (\n    <FoForm>\n      <Card.Body>\n        <Form.Group>\n          <Form.Label className=\"custom-switch\">\n              <Field \n              className=\"custom-switch-input\"\n              type=\"checkbox\" \n              name=\"displayPublic\" \n              checked={values.displayPublic} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('schedule.appointments.public')}</span>\n          </Form.Label>\n          <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n        </Form.Group>  \n        <Form.Group label={t('schedule.appointments.frequencyType')}>\n          <Field component=\"select\" \n                name=\"frequencyType\" \n                className={(errors.frequencyType) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\">\n            <option value=\"SPECIFIC\" key={v4()}>{t('schedule.appointments.select_specific')}</option>\n            <option value=\"WEEKLY\" key={v4()}>{t('schedule.appointments.select_weekly')}</option>\n          </Field>\n          <ErrorMessage name=\"frequencyType\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group>\n        { (values.frequencyType == \"SPECIFIC\") ? \"\" :\n          <Form.Group label={t('schedule.appointments.frequencyInterval')}>\n            <Field component=\"select\" \n                  name=\"frequencyInterval\" \n                  className={(errors.frequencyInterval) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\">\n              <option value=\"1\" key={v4()}>{t('general.monday')}</option>\n              <option value=\"2\" key={v4()}>{t('general.tuesday')}</option>\n              <option value=\"3\" key={v4()}>{t('general.wednesday')}</option>\n              <option value=\"4\" key={v4()}>{t('general.thursday')}</option>\n              <option value=\"5\" key={v4()}>{t('general.friday')}</option>\n              <option value=\"6\" key={v4()}>{t('general.saturday')}</option>\n              <option value=\"7\" key={v4()}>{t('general.sunday')}</option>\n            </Field>\n            <ErrorMessage name=\"frequencyInterval\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        }\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.location')}>\n              <Field component=\"select\" \n                    name=\"organizationLocationRoom\" \n                    className={(errors.organizationLocationRoom) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\" key={v4()}>{t(\"general.please_select\")}</option>\n                {inputData.organizationLocationRooms.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.organizationLocation.name} - {node.name}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"organizationLocationRoom\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n        </Grid.Row>\n        {/* <Form.Group label={t('general.appointment')}>\n          <Field component=\"select\" \n                name=\"organizationAppointment\" \n                className={(errors.organizationAppointment) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\">\n            <option value=\"\" key={v4()}>{t(\"general.please_select\")}</option>\n            {inputData.organizationAppointments.edges.map(({ node }) =>\n              <option value={node.id} key={v4()}>{node.name}</option>\n            )}\n          </Field>\n          <ErrorMessage name=\"organizationAppointment\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group>  */}\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={(values.frequencyType == \"SPECIFIC\") ? t('general.date') : t('general.date_start')}>\n              <CSDatePicker \n                className={(errors.dateStart) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.dateStart}\n                onChange={(date) => {\n                  setFieldValue(\"dateStart\", date)\n                  setFieldTouched(\"dateEnd\", true)\n                }}\n                onBlur={() => setFieldTouched(\"dateStart\", true)}\n              />\n              <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          { (values.frequencyType == \"SPECIFIC\") ? \"\" :\n            <Grid.Col>\n              <Form.Group label={t('general.date_end')}>\n                <CSDatePicker \n                  selected={values.dateEnd}\n                  onChange={(date) => {\n                    setFieldValue(\"dateEnd\", date)\n                    setFieldTouched(\"dateEnd\", true)\n                  }}\n                  onBlur={() => setFieldTouched(\"dateEnd\", true)}\n                  placeholderText={t('schedule.appointments.placeholder_enddate')}\n                />\n                <ErrorMessage name=\"dateEnd\" component=\"span\" className=\"invalid-feedback\" />\n              </Form.Group>\n            </Grid.Col>\n          }\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n           <Form.Group label={t('general.time_start')}>\n              <CSTimePicker \n                className={(errors.timeStart) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.timeStart}\n                onChange={(date) => setFieldValue(\"timeStart\", date)}\n                onBlur={() => setFieldTouched(\"timeStart\", true)}\n                clearable={false}\n              />\n              {/* {errors.timeStart}\n              {errors.timeStart && touched.timeStart ? (\n                <span className=\"invalid-feedback\">{errors.timeStart} - hacky thingy</span>\n              ) : null} */}\n              <ErrorMessage name=\"timeStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n           <Form.Group label={t('general.time_end')}>\n              <CSTimePicker \n                className={(errors.timeEnd) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.timeEnd}\n                onChange={(date) => setFieldValue(\"timeEnd\", date)}\n                onBlur={() => setFieldTouched(\"timeEnd\", true)}\n                clearable={false}\n              />\n              <ErrorMessage name=\"timeEnd\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Form.Group label={t('general.note')}>\n          <Editor\n              textareaName=\"note\"\n              initialValue={values.note}\n              init={tinymceBasicConf}\n              onChange={(e) => setFieldValue(\"note\", e.target.getContent())}\n              onBlur={() => setFieldTouched(\"note\", true)}\n            />\n          <ErrorMessage name=\"note\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group>\n      </Card.Body>\n      <Card.Footer>\n        <Button \n        color=\"primary\"\n        className=\"pull-right\" \n        type=\"submit\" \n        disabled={isSubmitting}\n        >\n          {t('general.submit')}\n        </Button>\n        <Button color=\"link\" onClick={() => history.push(return_url)}>\n            {t('general.cancel')}\n        </Button>\n      </Card.Footer>\n    </FoForm>\n)\n  \n  \n  export default withTranslation()(withRouter(ScheduleAppointmentForm))","// @flow\n\nimport React, { Component } from 'react'\nimport { Query, Mutation } from \"@apollo/client\";\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_APPOINTMENTS_QUERY, GET_INPUT_VALUES_QUERY } from './queries'\nimport { get_list_query_variables } from './tools'\nimport { APPOINTMENT_SCHEMA } from './yupSchema'\nimport ScheduleAppointmentForm from './ScheduleAppointmentForm'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { dateToLocalISO, dateToLocalISOTime } from '../../../tools/date_tools'\n\nimport ScheduleMenu from '../ScheduleMenu'\n\n\nconst CREATE_APPOINTMENT = gql`\n  mutation CreateScheduleAppointment($input:CreateScheduleAppointmentInput!) {\n    createScheduleAppointment(input: $input) {\n      scheduleItem {\n        id\n        scheduleItemType\n        frequencyType\n        frequencyInterval\n        organizationLocationRoom {\n          id\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n        organizationClasstype {\n          id\n          name\n        }\n        dateStart\n        dateEnd\n        timeStart\n        timeEnd\n        displayPublic\n      }\n    }\n  }\n`\n\n\nclass ScheduleAppointmentAdd extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Schedule appointment add add props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const history = this.props.history\n    const return_url = \"/schedule/appointments\"\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n\n          <Query query={GET_INPUT_VALUES_QUERY} variables = {{archived: false}} >\n            {({ loading, error, data, refetch }) => {\n              // Loading\n              if (loading) return (\n                <Container>\n                  <p>{t('general.loading_with_dots')}</p>\n                </Container>\n              )\n              // Error\n              if (error) {\n                console.log(error)\n                return (\n                  <Container>\n                    <p>{t('general.error_sad_smiley')}</p>\n                  </Container>\n                )\n              }\n              \n              console.log('query data')\n              console.log(data)\n              const inputData = data\n\n              return (\n                <Container>\n                  <Page.Header title={t(\"schedule.title\")} />\n                  <Grid.Row>\n                    <Grid.Col md={9}>\n                      <Card>\n                        <Card.Header>\n                          <Card.Title>{t('schedule.appointments.title_add')}</Card.Title>\n                        </Card.Header>\n                        <Mutation mutation={CREATE_APPOINTMENT} onCompleted={() => history.push(return_url)}> \n                  {(createSubscription, { data }) => (\n                    <Formik\n                      initialValues={{ \n                        displayPublic: true,\n                        frequencyType: \"WEEKLY\",\n                        frequencyInterval: 1,\n                        organizationLocationRoom: \"\",\n                        dateStart: new Date(),\n                        timeStart: new Date(),\n                        timeEnd: new Date(),\n                      }}\n                      validationSchema={APPOINTMENT_SCHEMA}\n                      onSubmit={(values, { setSubmitting }) => {\n                          console.log('submit values:')\n                          console.log(values)\n\n                          let frequencyInterval = values.frequencyInterval\n                          if (values.frequencyType == 'SPECIFIC')\n                            frequencyInterval = 0\n\n                          let dateEnd\n                            if (values.dateEnd) {\n                              dateEnd = dateToLocalISO(values.dateEnd)\n                            } else {\n                              dateEnd = values.dateEnd\n                            }\n                          \n                          createSubscription({ variables: {\n                            input: {\n                              displayPublic: values.displayPublic,\n                              frequencyType: values.frequencyType,\n                              frequencyInterval: frequencyInterval,\n                              organizationLocationRoom: values.organizationLocationRoom,\n                              dateStart: dateToLocalISO(values.dateStart),\n                              dateEnd: dateEnd,\n                              timeStart: dateToLocalISOTime(values.timeStart),\n                              timeEnd: dateToLocalISOTime(values.timeEnd)\n                            }\n                          }, refetchQueries: [\n                              {query: GET_APPOINTMENTS_QUERY, variables: get_list_query_variables()}\n                          ]})\n                          .then(({ data }) => {\n                              console.log('got data', data)\n                              toast.success((t('schedule.appointments.toast_add_success')), {\n                                  position: toast.POSITION.BOTTOM_RIGHT\n                                })\n                            }).catch((error) => {\n                              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                  position: toast.POSITION.BOTTOM_RIGHT\n                                })\n                              console.log('there was an error sending the query', error)\n                              setSubmitting(false)\n                            })\n                      }}\n                      >\n                      {({ isSubmitting, setFieldValue, setFieldTouched, errors, values, touched }) => (\n                            <ScheduleAppointmentForm\n                              inputData={inputData}\n                              isSubmitting={isSubmitting}\n                              setFieldValue={setFieldValue}\n                              setFieldTouched={setFieldTouched}\n                              errors={errors}\n                              values={values}\n                              touched={touched}\n                              return_url={return_url}\n                            >\n                              {console.log('########## v & e')}\n                              {console.log(values)}\n                              {console.log(errors)}\n                              {console.log(touched)}\n                            </ScheduleAppointmentForm>\n                          )\n                        }\n                    </Formik>\n                    )}\n                  </Mutation>\n                </Card>\n                    </Grid.Col>\n                      <Grid.Col md={3}>\n                        <HasPermissionWrapper permission=\"add\"\n                                              resource=\"scheduleappointment\">\n                          <Button color=\"primary btn-block mb-6\"\n                                  onClick={() => history.push(return_url)}>\n                            <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                          </Button>\n                        </HasPermissionWrapper>\n                        <ScheduleMenu activeLink='appointments'/>\n                      </Grid.Col>\n                    </Grid.Row>\n                  </Container>\n            )}}\n          </Query>\n        </div>\n    </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(ScheduleAppointmentAdd))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Icon,\n} from \"tabler-react\";\n\nconst AppointmentEditBack = ({ t }) => (\n  <div className=\"page-options d-flex\">\n    <Link to=\"/schedule/appointments\" \n          className='btn btn-outline-secondary btn-sm'>\n        <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back_to')} {t('schedule.title')}\n    </Link>\n  </div>\n)\n\nexport default withTranslation()(AppointmentEditBack)","// @flow\n\nimport React, { Component } from 'react'\nimport { t } from 'i18next'\nimport { Query } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { TimeStringToJSDateOBJ } from '../../../../tools/date_tools'\n\nimport {\n  Page,\n  Grid,\n  Card,\n  Container,\n} from \"tabler-react\"\n// import HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n\nimport { GET_APPOINTMENT_QUERY } from \"../queries\"\n\nimport AppointmentEditMenu from './AppointmentEditMenu'\nimport AppointmentEditBack from './AppointmentEditBack';\nimport { appointment_edit_all_subtitle } from \"./tools\"\n\n\nclass AppointmentEditBase extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Schedule appointment edit add props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const match = this.props.match\n    const appointmentId = match.params.appointment_id\n    const menu_activeLink = this.props.menu_activeLink\n    const default_card = this.props.default_card\n    const sidebar_button = this.props.sidebar_button\n\n    return (\n      <Query query={GET_APPOINTMENT_QUERY} variables = {{id: appointmentId, archived: false}} >\n        {({ loading, error, data, refetch }) => {\n          // Loading\n          if (loading) return (\n            <p>{t('general.loading_with_dots')}</p>\n          )\n          // Error\n          if (error) {\n            console.log(error)\n            return (\n              <p>{t('general.error_sad_smiley')}</p>\n            )\n          }\n          \n          console.log('query data')\n          console.log(data)\n          const initialValues = data.scheduleItem\n\n          const initialTimeStart = TimeStringToJSDateOBJ(initialValues.timeStart)\n          const subtitle = appointment_edit_all_subtitle({\n            t: t,\n            location: initialValues.organizationLocationRoom.organizationLocation.name,\n            locationRoom: initialValues.organizationLocationRoom.name,\n            starttime: initialTimeStart\n          })\n          \n          return (\n            <Container>\n              <Page.Header \n                title={t(\"schedule.title\")} \n                subTitle={subtitle}\n              >\n                <AppointmentEditBack />\n              </Page.Header>\n              <Grid.Row>\n                <Grid.Col md={9}>\n                  {!default_card ? this.props.children :\n                    <Card>\n                      <Card.Header>\n                        <Card.Title>{this.props.card_title}</Card.Title>\n                      </Card.Header>\n                      <Card.Body>\n                        {this.props.children}\n                      </Card.Body>\n                    </Card>\n                  }\n                </Grid.Col>\n                <Grid.Col md={3}>\n                  {sidebar_button}\n                  <h5>{t('general.menu')}</h5>\n                  <AppointmentEditMenu activeLink={menu_activeLink} appointmentId={appointmentId}/>\n                </Grid.Col>\n              </Grid.Row>\n            </Container>\n          )\n        }}\n      </Query>\n)}}\n\nAppointmentEditBase.defaultProps = {\n  default_card: true,\n  sidebar_button: \"\",\n  card_title: t('schedule.appointments.title_edit')\n}\n\nexport default withTranslation()(withRouter(AppointmentEditBase))","import moment from 'moment'\n\nexport function appointment_edit_all_subtitle({t, location, locationRoom, starttime}) {\n  return t('general.appointment') + ': ' + location + ' (' + locationRoom + ') @ ' + moment(starttime).format('LT')\n}\n\n\nexport function represent_teacher_role(t, role) {\n  console.log(role)\n  switch (role) {\n    case \"SUB\":\n      return t('schedule.classes.teacher_roles.sub')\n      break\n    case \"ASSISTANT\":\n      return t('schedule.classes.teacher_roles.assistant')\n      break\n    case \"KARMA\":\n      return t('schedule.classes.teacher_roles.karma')\n      break\n    default:\n      return \"\"\n      break\n  }\n}\n","// @flow\n\nimport React, { Component } from 'react'\nimport { Query, Mutation } from \"@apollo/client\";\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_APPOINTMENTS_QUERY, GET_APPOINTMENT_QUERY } from '../../queries'\nimport { get_list_query_variables } from '../../tools'\nimport { APPOINTMENT_SCHEMA } from '../../yupSchema'\nimport ScheduleAppointmentForm from '../../ScheduleAppointmentForm'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport { dateToLocalISO, dateToLocalISOTime, TimeStringToJSDateOBJ } from '../../../../../tools/date_tools'\n\nimport AppointmentEditBase from '../AppointmentEditBase'\n\n\nconst UPDATE_APPOINTMENT = gql`\n  mutation UpdateScheduleAppointment($input:UpdateScheduleAppointmentInput!) {\n    updateScheduleAppointment(input: $input) {\n      scheduleItem {\n        id\n        scheduleItemType\n        frequencyType\n        frequencyInterval\n        organizationLocationRoom {\n          id\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n        dateStart\n        dateEnd\n        timeStart\n        timeEnd\n        displayPublic\n      }\n    }\n  }\n`\n\n\nclass ScheduleAppointmentEditAll extends Component {\n  constructor(props) {\n    super(props)\n    console.log(\"Schedule appointment edit add props:\")\n    console.log(props)\n  }\n\n  render() {\n    const t = this.props.t\n    const match = this.props.match\n    const history = this.props.history\n    const id = match.params.appointment_id\n    const return_url = \"/schedule/appointments\"\n\n    return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          <Query query={GET_APPOINTMENT_QUERY} variables = {{id: id, archived: false}} >\n            {({ loading, error, data, refetch }) => {\n              // Loading\n              if (loading) return (\n                <AppointmentEditBase menu_activeLink=\"edit\">\n                  <p>{t('general.loading_with_dots')}</p>\n                </AppointmentEditBase>\n              )\n              // Error\n              if (error) {\n                console.log(error)\n                return (\n                  <AppointmentEditBase menu_activeLink=\"edit\">\n                    <p>{t('general.error_sad_smiley')}</p>\n                  </AppointmentEditBase>\n                )\n              }\n              \n              console.log('query data')\n              console.log(data)\n              const inputData = data\n              const initialValues = data.scheduleItem\n\n              const initialTimeStart = TimeStringToJSDateOBJ(initialValues.timeStart)\n              const initialTimeEnd = TimeStringToJSDateOBJ(initialValues.timeEnd)\n              \n              return (\n                <AppointmentEditBase \n                  menu_activeLink=\"edit\"\n                >\n                  <Mutation mutation={UPDATE_APPOINTMENT} onCompleted={() => history.push(return_url)}> \n                  {(updateScheduleAppointment, { data }) => (\n                    <Formik\n                      initialValues={{ \n                        displayPublic: initialValues.displayPublic,\n                        frequencyType: initialValues.frequencyType,\n                        frequencyInterval: initialValues.frequencyInterval,\n                        organizationLocationRoom: initialValues.organizationLocationRoom.id,\n                        dateStart: initialValues.dateStart,\n                        dateEnd: initialValues.dateEnd,\n                        timeStart: initialTimeStart,\n                        timeEnd: initialTimeEnd,\n                      }}\n                      validationSchema={APPOINTMENT_SCHEMA}\n                      onSubmit={(values, { setSubmitting }) => {\n                          console.log('submit values:')\n                          console.log(values)\n\n                          let frequencyInterval = values.frequencyInterval\n                          if (values.frequencyType == 'SPECIFIC')\n                            frequencyInterval = 0\n\n                          let dateEnd\n                            if (values.dateEnd) {\n                              dateEnd = dateToLocalISO(values.dateEnd)\n                            } else {\n                              dateEnd = values.dateEnd\n                            }  \n\n                          updateScheduleAppointment({ variables: {\n                            input: {\n                              id: id,\n                              displayPublic: values.displayPublic,\n                              frequencyType: values.frequencyType,\n                              frequencyInterval: frequencyInterval,\n                              organizationLocationRoom: values.organizationLocationRoom,\n                              dateStart: dateToLocalISO(values.dateStart),\n                              dateEnd: dateEnd,\n                              timeStart: dateToLocalISOTime(values.timeStart),\n                              timeEnd: dateToLocalISOTime(values.timeEnd)\n                            }\n                          }, refetchQueries: [\n                              {query: GET_APPOINTMENTS_QUERY, variables: get_list_query_variables()}\n                          ]})\n                          .then(({ data }) => {\n                              console.log('got data', data)\n                              toast.success((t('schedule.appointments.toast_edit_success')), {\n                                  position: toast.POSITION.BOTTOM_RIGHT\n                                })\n                            }).catch((error) => {\n                              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                  position: toast.POSITION.BOTTOM_RIGHT\n                                })\n                              console.log('there was an error sending the query', error)\n                              setSubmitting(false)\n                            })\n                      }}\n                      >\n                      {({ isSubmitting, setFieldValue, setFieldTouched, errors, values, touched }) => (\n                        <ScheduleAppointmentForm\n                          inputData={inputData}\n                          isSubmitting={isSubmitting}\n                          setFieldValue={setFieldValue}\n                          setFieldTouched={setFieldTouched}\n                          errors={errors}\n                          values={values}\n                          touched={touched}\n                          return_url={return_url}\n                        >\n                          {console.log('########## v & e')}\n                          {console.log(values)}\n                          {console.log(errors)}\n                          {console.log(touched)}\n                        </ScheduleAppointmentForm>\n                      )}\n                    </Formik>\n                    )}\n                  </Mutation>\n                </AppointmentEditBase>\n            )}}\n           </Query>\n         </div>\n      </SiteWrapper>\n    )}\n  }\n\n\nexport default withTranslation()(withRouter(ScheduleAppointmentEditAll))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\n\n\nfunction StatusIcon({color=\"\"}) {\n  let className\n\n  switch (color) {\n    case \"success\":\n      className=\"bg-success\"\n      break\n    case \"warning\":\n      className=\"bg-warning\"\n      break\n    case \"danger\":\n      className=\"bg-danger\"\n      break\n    case \"primary\":\n      className=\"bg-primary\"\n      break\n    default:\n      className=\"bg-secondary\"\n  }\n\n  return <span className={\"status-icon \" + className} />\n}\n\n\nexport default withTranslation()(StatusIcon)\n\n\n\n","import React from \"react\"\nimport CSLS from \"../../../tools/cs_local_storage\"\n\nimport StatusIcon from \"../../ui/StatusIcon\"\n\n\nexport function get_list_query_variables() {\n  let orderBy\n  let organizationClasstype\n  let organizationLevel\n  let organizationLocation\n\n  let queryVars = {\n    attendanceCountType: \"ATTENDING_AND_BOOKED\",\n    dateFrom: localStorage.getItem(CSLS.SCHEDULE_CLASSES_DATE_FROM), \n    dateUntil: localStorage.getItem(CSLS.SCHEDULE_CLASSES_DATE_UNTIL)\n  }\n\n  orderBy = localStorage.getItem(CSLS.SCHEDULE_CLASSES_ORDER_BY)\n  if (orderBy) {\n    queryVars.orderBy = orderBy\n  }\n\n  organizationClasstype = localStorage.getItem(CSLS.SCHEDULE_CLASSES_FILTER_CLASSTYPE)\n  if (organizationClasstype) {\n    queryVars.organizationClasstype = organizationClasstype\n  } else {\n    queryVars.organizationClasstype = \"\"\n  }\n\n  organizationLevel = localStorage.getItem(CSLS.SCHEDULE_CLASSES_FILTER_LEVEL)\n  if (organizationLevel) {\n    queryVars.organizationLevel = organizationLevel\n  } else {\n    queryVars.organizationLevel = \"\"\n  }\n\n  organizationLocation = localStorage.getItem(CSLS.SCHEDULE_CLASSES_FILTER_LOCATION)\n  if (organizationLocation) {\n    queryVars.organizationLocation = organizationLocation\n  } else {\n    queryVars.organizationLocation = \"\"\n  }\n\n  console.log(queryVars)\n\n  return queryVars\n}\n\n\nexport function represent_teacher(name, role) {\n  let textColor = false\n\n  switch (role) {\n    case \"SUB\":\n      textColor = \"text-blue\"\n      break\n    case \"ASSISTANT\":\n      textColor = \"text-green\"\n      break\n    case \"KARMA\":\n      textColor = \"text-orange\"\n      break\n  }\n\n  if (textColor) {\n    return <span className={textColor}>{name}</span>\n  } else {\n    return name\n  }\n}\n\n\nexport function represent_class_status(status) {\n  let color\n\n  switch (status) {\n    case \"SUB\":\n      color = \"primary\"\n      break\n    case \"CANCELLED\":\n      color = \"warning\"\n      break\n    case \"OPEN\":\n      color = \"danger\"\n      break\n    default:\n      color = \"success\"\n  }\n\n  return <StatusIcon color={color} />\n}\n","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport CSLS from \"../../../tools/cs_local_storage\"\nimport { get_list_query_variables } from './tools'\n\n\nfunction getDefaultValue(value) {\n  let defaultValue = localStorage.getItem(value)\n  if (defaultValue) {\n    return defaultValue\n  } else {\n    return \"\"\n  }\n}\n\n\nfunction updateLocalStorageAndRefetch(key, value, refetch) {\n  localStorage.setItem(key, value)\n  refetch(get_list_query_variables())\n\n}\n\nconst selectClass = \"form-control custom-select mb-2\"\n\n\nconst ScheduleClassesFilter = ({ t, history, data, refetch }) => (\n  <div>\n    {/* Locations */}\n    <select \n      className={selectClass}\n      defaultValue={getDefaultValue(CSLS.SCHEDULE_CLASSES_FILTER_LOCATION)}\n      onChange={ (event) => {\n        updateLocalStorageAndRefetch(\n          CSLS.SCHEDULE_CLASSES_FILTER_LOCATION,\n          event.target.value,\n          refetch\n        )\n      }}\n    >\n      <option value=\"\" key={v4()}>{t(\"schedule.classes.filter_all_locations\")}</option>\n      {data.organizationLocations.edges.map(({ node }) =>\n        <option value={node.id} key={v4()}>{node.name}</option>\n      )}\n    </select>\n    {/* Classtypes */}\n    <select \n      className={selectClass}\n      defaultValue={getDefaultValue(CSLS.SCHEDULE_CLASSES_FILTER_CLASSTYPE)}\n      onChange={ (event) => {\n        updateLocalStorageAndRefetch(\n          CSLS.SCHEDULE_CLASSES_FILTER_CLASSTYPE,\n          event.target.value,\n          refetch\n        )\n      }}\n    >\n      <option value=\"\" key={v4()}>{t(\"schedule.classes.filter_all_classtypes\")}</option>\n      {data.organizationClasstypes.edges.map(({ node }) =>\n        <option value={node.id} key={v4()}>{node.name}</option>\n      )}\n    </select>\n    {/* Levels */}\n    <select \n      className={selectClass}\n      defaultValue={getDefaultValue(CSLS.SCHEDULE_CLASSES_FILTER_LEVEL)}\n      onChange={ (event) => {\n        updateLocalStorageAndRefetch(\n          CSLS.SCHEDULE_CLASSES_FILTER_LEVEL,\n          event.target.value,\n          refetch\n        )\n      }}\n    >\n      <option value=\"\" key={v4()}>{t(\"schedule.classes.filter_all_levels\")}</option>\n      {data.organizationLevels.edges.map(({ node }) =>\n        <option value={node.id} key={v4()}>{node.name}</option>\n      )}\n    </select>\n  </div>\n);\n\nexport default withTranslation()(withRouter(ScheduleClassesFilter))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport CSDatePicker from \"../../ui/CSDatePicker\"\n\nimport CSLS from \"../../../tools/cs_local_storage\"\n\nimport ScheduleMenu from \"../ScheduleMenu\"\nimport ScheduleClassesFilter from \"./ScheduleClassesFilter\"\n\nimport { \n  get_list_query_variables, \n} from './tools'\n\nimport moment from 'moment'\n\n// Set some initial values for dates, if not found\nif (!localStorage.getItem(CSLS.SCHEDULE_CLASSES_DATE_FROM)) {\n  console.log('date from not found... defaulting to today...')\n  localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_FROM, moment().format('YYYY-MM-DD')) \n  localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_UNTIL, moment().add(6, 'days').format('YYYY-MM-DD')) \n} \n\n\nfunction ScheduleClassesBase ({ t, history, children, data, refetch }) {\n  \n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"schedule.title\")}>\n            <div className=\"page-options d-flex\">\n              <span title={t(\"schedule.classes.tooltip_sort_by_location\")}>\n                <Button \n                  icon=\"home\"\n                  tooltip=\"text\"\n                  className=\"mr-2\"\n                  color={\n                    ((localStorage.getItem(CSLS.SCHEDULE_CLASSES_ORDER_BY) === \"location\") || (!localStorage.getItem(CSLS.SCHEDULE_CLASSES_ORDER_BY))) ?\n                    \"azure\" : \"secondary\"\n                  }\n                  onClick={() => {\n                    localStorage.setItem(CSLS.SCHEDULE_CLASSES_ORDER_BY, \"location\")\n                    refetch(get_list_query_variables())\n                  }}\n                />\n              </span>\n              <span title={t(\"schedule.classes.tooltip_sort_by_starttime\")}>\n                <Button \n                  icon=\"clock\"\n                  className=\"mr-2\"\n                  color={\n                    (localStorage.getItem(CSLS.SCHEDULE_CLASSES_ORDER_BY) === \"starttime\") ?\n                    \"azure\" : \"secondary\"\n                  }\n                  onClick={() => {\n                    localStorage.setItem(CSLS.SCHEDULE_CLASSES_ORDER_BY, \"starttime\")\n                    refetch(get_list_query_variables())\n                  }}\n                />\n              </span>\n              <CSDatePicker \n                className=\"form-control schedule-list-csdatepicker mr-2\"\n                selected={new Date(localStorage.getItem(CSLS.SCHEDULE_CLASSES_DATE_FROM))}\n                isClearable={false}\n                onChange={(date) => {\n                  let nextWeekFrom = moment(date)\n                  let nextWeekUntil = moment(nextWeekFrom).add(6, 'days')\n\n                  localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_FROM, nextWeekFrom.format('YYYY-MM-DD')) \n                  localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_UNTIL, nextWeekUntil.format('YYYY-MM-DD')) \n\n                  console.log(get_list_query_variables())\n\n                  refetch(get_list_query_variables())\n                }}\n                placeholderText={t('schedule.classes.go_to_date')}\n              />\n              <Button.List className=\"schedule-list-page-options-btn-list\">\n                <Button \n                  icon=\"chevron-left\"\n                  color=\"secondary\"\n                  onClick={ () => {\n                    let nextWeekFrom = moment(localStorage.getItem(CSLS.SCHEDULE_CLASSES_DATE_FROM)).subtract(7, 'days')\n                    let nextWeekUntil = moment(nextWeekFrom).add(6, 'days')\n                    \n                    localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_FROM, nextWeekFrom.format('YYYY-MM-DD')) \n                    localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_UNTIL, nextWeekUntil.format('YYYY-MM-DD')) \n\n                    refetch(get_list_query_variables())\n                }} />\n                <Button \n                  icon=\"sunset\"\n                  color=\"secondary\"\n                  onClick={ () => {\n                    let currentWeekFrom = moment()\n                    let currentWeekUntil = moment(currentWeekFrom).add(6, 'days')\n\n                    localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_FROM, currentWeekFrom.format('YYYY-MM-DD')) \n                    localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_UNTIL, currentWeekUntil.format('YYYY-MM-DD')) \n                    \n                    refetch(get_list_query_variables())\n                }} />\n                <Button \n                  icon=\"chevron-right\"\n                  color=\"secondary\"\n                  onClick={ () => {\n                    let nextWeekFrom = moment(localStorage.getItem(CSLS.SCHEDULE_CLASSES_DATE_FROM)).add(7, 'days')\n                    let nextWeekUntil = moment(nextWeekFrom).add(6, 'days')\n                    \n                    localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_FROM, nextWeekFrom.format('YYYY-MM-DD')) \n                    localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_UNTIL, nextWeekUntil.format('YYYY-MM-DD')) \n\n                    refetch(get_list_query_variables())\n                }} />\n              </Button.List> \n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <HasPermissionWrapper permission=\"add\"\n                                    resource=\"scheduleclass\">\n                <Button color=\"primary btn-block mb-1\"\n                        onClick={() => history.push(\"/schedule/classes/add\")}>\n                  <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('schedule.classes.add')}\n                </Button>\n              </HasPermissionWrapper>\n              {(data) ? \n                <div>\n                  <div>\n                    <Button\n                      className=\"float-right\"\n                      color=\"link\"\n                      size=\"sm\"\n                      onClick={() => {\n                        localStorage.setItem(CSLS.SCHEDULE_CLASSES_FILTER_CLASSTYPE, \"\")\n                        localStorage.setItem(CSLS.SCHEDULE_CLASSES_FILTER_LEVEL, \"\")\n                        localStorage.setItem(CSLS.SCHEDULE_CLASSES_FILTER_LOCATION, \"\")\n                        refetch(get_list_query_variables())\n                      }}\n                    >\n                      {t(\"general.clear\")}\n                    </Button>\n                  </div>\n                  <h5 className=\"mt-2 pt-1\">{t(\"general.filter\")}</h5>\n                  <ScheduleClassesFilter data={data} refetch={refetch} />\n                </div>\n              : \"\"}\n              <h5>{t(\"general.menu\")}</h5>\n              <ScheduleMenu activeLink='classes'/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleClassesBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_CLASSES_QUERY = gql`\n  query ScheduleClasses(\n      $dateFrom: Date!, \n      $dateUntil:Date!, \n      $orderBy: String, \n      $organizationClasstype: String,\n      $organizationLevel: String,\n      $organizationLocation: String,\n      $attendanceCountType: String!\n    ){\n    scheduleClasses(\n        dateFrom:$dateFrom, \n        dateUntil: $dateUntil, \n        orderBy: $orderBy, \n        organizationClasstype: $organizationClasstype,\n        organizationLevel: $organizationLevel,\n        organizationLocation: $organizationLocation,\n        attendanceCountType: $attendanceCountType\n    ){\n      date\n      bookingOpenOn\n      classes {\n        scheduleItemId\n        frequencyType\n        date\n        status\n        description\n        account {\n          id\n          fullName\n        }\n        role\n        account2 {\n          id\n          fullName\n        }\n        role2\n        organizationLocationRoom {\n          id\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n        organizationClasstype {\n          id\n          name\n        }\n        organizationLevel {\n          id\n          name\n        }\n        timeStart\n        timeEnd\n        availableSpacesOnline\n        availableSpacesTotal\n        displayPublic\n        bookingStatus\n      }\n    }\n    organizationLocations(first: 100, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    organizationClasstypes(first: 100, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    organizationLevels(first: 100, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const GET_CLASS_QUERY = gql`\n  query ScheduleItem($id: ID!, $before: String, $after: String) {\n    scheduleItem(id:$id) {\n      id\n      frequencyType\n      frequencyInterval\n      organizationLocationRoom {\n        id\n        name\n        organizationLocation {\n          id\n          name\n        }\n      }\n      organizationClasstype {\n        id\n        name\n      }\n      organizationLevel {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      timeStart\n      timeEnd\n      spaces\n      walkInSpaces\n      displayPublic\n      infoMailContent\n    }\n    organizationLocationRooms(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n      }\n    }\n    organizationClasstypes(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    organizationLevels(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    financePaymentMethods(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query ScheduleClassInputValues($after: String, $before: String) {\n    organizationLocationRooms(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n      }\n    }\n    organizationClasstypes(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    organizationLevels(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    financePaymentMethods(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const CREATE_CLASS = gql`\n  mutation CreateScheduleClass($input:CreateScheduleClassInput!) {\n    createScheduleClass(input: $input) {\n      scheduleItem {\n        id\n        scheduleItemType\n        frequencyType\n        frequencyInterval\n        organizationLocationRoom {\n          id\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n        organizationClasstype {\n          id\n          name\n        }\n        organizationLevel {\n          id\n          name\n        }\n        dateStart\n        dateEnd\n        timeStart\n        timeEnd\n        displayPublic\n      }\n    }\n  }\n`","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport AppSettingsContext from '../../context/AppSettingsContext'\n\nimport {\n  Badge,\n  Dropdown,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Container,\n  Table,\n  Text,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport CSDatePicker from \"../../ui/CSDatePicker\"\nimport { confirmAlert } from 'react-confirm-alert'\nimport { toast } from 'react-toastify'\n\nimport CSLS from \"../../../tools/cs_local_storage\"\n\n\nimport BadgeBoolean from \"../../ui/BadgeBoolean\"\nimport ContentCard from \"../../general/ContentCard\"\nimport ScheduleMenu from \"../ScheduleMenu\"\nimport ScheduleClassesFilter from \"./ScheduleClassesFilter\"\nimport ScheduleClassesBase from './ScheduleClassesBase'\n\nimport { GET_CLASSES_QUERY } from \"./queries\"\nimport { \n  get_list_query_variables, \n  represent_class_status,\n  represent_teacher \n} from './tools'\n\nimport moment from 'moment'\n\n\nconst DELETE_SCHEDULE_CLASS = gql`\n  mutation DeleteScheduleClass($input: DeleteScheduleClassInput!) {\n    deleteScheduleClass(input: $input) {\n      ok\n    }\n  }\n`\n\n\nconst confirm_delete = ({t, msgConfirm, msgDescription, msgSuccess, deleteFunction, functionVariables}) => {\n  confirmAlert({\n    customUI: ({ onClose }) => {\n      return (\n        <div key={v4()} className='custom-ui'>\n          <h1>{t('general.confirm_delete')}</h1>\n          {msgConfirm}\n          {msgDescription}\n          <button className=\"btn btn-link pull-right\" onClick={onClose}>{t('general.confirm_delete_no')}</button>\n          <button\n            className=\"btn btn-danger\"\n            onClick={() => {\n              deleteFunction(functionVariables)\n                .then(({ data }) => {\n                  console.log('got data', data);\n                  toast.success(\n                    msgSuccess, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error);\n                })\n              onClose()\n            }}\n          >\n            <Icon name=\"trash-2\" /> {t('general.confirm_delete_yes')}\n          </button>\n        </div>\n      )\n    }\n  })\n}\n\n\n// Set some initial values for dates, if not found\nif (!localStorage.getItem(CSLS.SCHEDULE_CLASSES_DATE_FROM)) {\n  console.log('date from not found... defaulting to today...')\n  localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_FROM, moment().format('YYYY-MM-DD')) \n  localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_UNTIL, moment().add(6, 'days').format('YYYY-MM-DD')) \n} \n\n\nfunction ScheduleClasses ({ t, history }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n\n  const {loading, error, data, refetch} = useQuery(GET_CLASSES_QUERY, {\n    variables: get_list_query_variables()\n  })\n  const [deleteScheduleClass] = useMutation(DELETE_SCHEDULE_CLASS)\n\n  if (loading) {\n    return (\n      <ScheduleClassesBase>\n        <p>{t('general.loading_with_dots')}</p>\n      </ScheduleClassesBase>\n    )\n  }\n\n  if (error) {\n    return (\n      <ScheduleClassesBase>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ScheduleClassesBase>\n    )\n  }\n\n  const classes = data.scheduleClasses\n       \n  // Empty list\n  if (!classes.length) { return (\n    <ScheduleClassesBase>\n      <p>\n        {t('schedule.classes.empty_list')}\n      </p>\n    </ScheduleClassesBase>\n  )} \n\n  return (\n    <ScheduleClassesBase data={data} refetch={refetch}>\n      { data.scheduleClasses.map(({ date, classes }) => (\n        <div key={v4()}>\n          <Card>\n            <Card.Header>\n              <Card.Title>\n                <b>{moment(date).format(\"dddd\")}</b> {' '}\n                <span className=\"text-muted\">\n                  {moment(date).format(\"LL\")} \n                </span>\n              </Card.Title>\n            </Card.Header>\n            {!(classes.length) ? <Card.Body>{t('schedule.classes.empty_list')}</Card.Body> :\n              <Table cards>\n                <Table.Header>\n                  <Table.Row key={v4()}>\n                    <Table.ColHeader /> \n                    <Table.ColHeader>{t('general.time')}</Table.ColHeader>\n                    <Table.ColHeader>{t('general.location')}</Table.ColHeader>\n                    <Table.ColHeader>{t('general.class')}</Table.ColHeader>\n                    <Table.ColHeader>{t('general.teacher')}</Table.ColHeader>\n                    <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n                    <Table.ColHeader></Table.ColHeader>\n                  </Table.Row>\n                </Table.Header>\n                <Table.Body>\n                  {classes.map((\n                    { scheduleItemId, \n                      frequencyType,\n                      date, \n                      status,\n                      description,\n                      account, \n                      role,\n                      account2,\n                      role2,\n                      organizationLocationRoom, \n                      organizationClasstype, \n                      organizationLevel,\n                      timeStart, \n                      timeEnd,\n                      displayPublic }) => (\n                    <Table.Row key={v4()}>\n                      <Table.Col>\n                        {represent_class_status(status)}\n                      </Table.Col>\n                      <Table.Col>\n                        {/* Start & end time */}\n                        {moment(date + ' ' + timeStart).format(timeFormat)} {' - '}\n                        {moment(date + ' ' + timeEnd).format(timeFormat)} { ' ' }\n                        {(frequencyType === 'SPECIFIC') ? <Badge color=\"primary\">{t('general.once')}</Badge> : null } <br />\n                        <span className=\"text-muted\">{description}</span>\n                      </Table.Col>\n                      <Table.Col>\n                        {/* Location */}\n                        {organizationLocationRoom.organizationLocation.name} <br />\n                        <span className=\"text-muted\">{organizationLocationRoom.name}</span>\n                      </Table.Col>\n                      <Table.Col>\n                        {/* Type and level */}\n                        {organizationClasstype.name} <br />\n                        <span className=\"text-muted\">\n                          {(organizationLevel) ? organizationLevel.name: \"\"}\n                        </span>\n                      </Table.Col>\n                      <Table.Col>\n                        {/* Teacher(s) */}\n                        { (account) ? \n                            represent_teacher(account.fullName, role) : \n                            <span className=\"text-red\">{t(\"schedule.classes.no_teacher\")}</span>\n                        } <br />\n                        <span className=\"text-muted\">\n                          {(account2) ? represent_teacher(account2.fullName, role2) : \"\"}\n                        </span>\n                      </Table.Col>\n                      <Table.Col>\n                        {/* Public */}\n                        <BadgeBoolean value={displayPublic} />\n                      </Table.Col>\n                      <Table.Col>\n                        <Dropdown\n                          key={v4()}\n                          className=\"pull-right\"\n                          type=\"button\"\n                          toggle\n                          color=\"secondary btn-sm\"\n                          triggerContent={t(\"general.actions\")}\n                          items={[\n                            <HasPermissionWrapper key={v4()} permission=\"view\" resource=\"scheduleitemattendance\">\n                              <Dropdown.Item\n                                key={v4()}\n                                icon=\"check-circle\"\n                                onClick={() => history.push('/schedule/classes/class/attendance/' + scheduleItemId + '/' + date)}>\n                                  {t(\"general.attendance\")}\n                              </Dropdown.Item>\n                            </HasPermissionWrapper>,\n                            <HasPermissionWrapper key={v4()} permission=\"view\" resource=\"scheduleclassweeklyotc\">\n                              <Dropdown.Item\n                                key={v4()}\n                                icon=\"edit-3\"\n                                onClick={() => history.push('/schedule/classes/class/edit/' + scheduleItemId + '/' + date)}>\n                                  {t(\"general.edit\")}\n                              </Dropdown.Item>\n                            </HasPermissionWrapper>,\n                            <HasPermissionWrapper key={v4()} permission=\"change\" resource=\"scheduleclass\">\n                              <Dropdown.ItemDivider key={v4()} />\n                              <Dropdown.Item\n                                key={v4()}\n                                badge={t('schedule.classes.all_classes_in_series')}\n                                badgeType=\"secondary\"\n                                icon=\"edit-3\"\n                                onClick={() => history.push('/schedule/classes/all/edit/' + scheduleItemId)}>\n                                  {t(\"general.edit\")}\n                              </Dropdown.Item>\n                            </HasPermissionWrapper>,\n                            <HasPermissionWrapper key={v4()} permission=\"delete\" resource=\"scheduleclass\">\n                              <Dropdown.ItemDivider key={v4()} />\n                              <Dropdown.Item\n                                key={v4()}\n                                badge={t('schedule.classes.all_classes_in_series')}\n                                badgeType=\"danger\"\n                                icon=\"trash-2\"\n                                onClick={() => {\n                                  confirm_delete({\n                                    t: t,\n                                    msgConfirm: t(\"schedule.classes.delete_confirm_msg\"),\n                                    msgDescription: <p key={v4()}>\n                                      {moment(date + ' ' + timeStart).format('LT')} {' - '}\n                                      {moment(date + ' ' + timeEnd).format('LT')} {' '} @ {' '}\n                                      {organizationLocationRoom.organizationLocation.name} {' '}\n                                      {organizationLocationRoom.name}\n                                      {organizationClasstype.Name}\n                                      </p>,\n                                    msgSuccess: t('schedule.classes.deleted'),\n                                    deleteFunction: deleteScheduleClass,\n                                    functionVariables: { variables: {\n                                      input: {\n                                        id: scheduleItemId\n                                      }\n                                    }, refetchQueries: [\n                                      { query: GET_CLASSES_QUERY, variables: get_list_query_variables() }\n                                    ]}\n                                  })\n                              }}>\n                              {t(\"general.delete\")}\n                              </Dropdown.Item>\n                            </HasPermissionWrapper>\n                          ]}\n                        />\n                      </Table.Col>\n                    </Table.Row>\n                  ))}\n                </Table.Body>\n              </Table>\n            }\n          </Card>\n        </div>\n      ))}\n    </ScheduleClassesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleClasses))\n\n//     <SiteWrapper>\n//       <div className=\"my-3 my-md-5\">\n//         <Query query={GET_CLASSES_QUERY} variables={get_list_query_variables()}>\n//           {({ loading, error, data, refetch }) => {\n//             // Loading\n//             if (loading) return (\n//               <Container>\n//                 <p>{t('general.loading_with_dots')}</p>\n//               </Container>\n//             )\n//             // Error\n//             if (error) {\n//               console.log(error)\n//               return (\n//                 <Container>\n//                   <p>{t('general.error_sad_smiley')}</p>\n//                 </Container>\n//               )\n//             }\n//             const headerOptions = <Card.Options>\n//               {/* <Button color={(!archived) ? 'primary': 'secondary'}  \n//                       size=\"sm\"\n//                       onClick={() => {archived=false; refetch({archived});}}>\n//                 {t('general.current')}\n//               </Button>\n//               <Button color={(archived) ? 'primary': 'secondary'} \n//                       size=\"sm\" \n//                       className=\"ml-2\" \n//                       onClick={() => {archived=true; refetch({archived});}}>\n//                 {t('general.archive')}\n//               </Button> */}\n//             </Card.Options>\n            \n//             // Empty list\n//             if (!data.scheduleClasses.length) { return (\n//               <ContentCard cardTitle={t('schedule.classes.title')}\n//                             headerContent={headerOptions}\n//                             hasCardBody={true}>\n//                 <p>\n//                   {t('schedule.classes.empty_list')}\n//                 </p>\n//               </ContentCard>\n//             )} else {   \n\n//             console.log(data)\n//             // Life's good! :)\n//             return (\n//               <Container>\n//                 <Page.Header title={t(\"schedule.title\")}>\n//                   <div className=\"page-options d-flex\">\n//                     <span title={t(\"schedule.classes.tooltip_sort_by_location\")}>\n//                       <Button \n//                         icon=\"home\"\n//                         tooltip=\"text\"\n//                         className=\"mr-2\"\n//                         color={\n//                           ((localStorage.getItem(CSLS.SCHEDULE_CLASSES_ORDER_BY) === \"location\") || (!localStorage.getItem(CSLS.SCHEDULE_CLASSES_ORDER_BY))) ?\n//                           \"azure\" : \"secondary\"\n//                         }\n//                         onClick={() => {\n//                           localStorage.setItem(CSLS.SCHEDULE_CLASSES_ORDER_BY, \"location\")\n//                           refetch(get_list_query_variables())\n//                         }}\n//                       />\n//                     </span>\n//                     <span title={t(\"schedule.classes.tooltip_sort_by_starttime\")}>\n//                       <Button \n//                         icon=\"clock\"\n//                         className=\"mr-2\"\n//                         color={\n//                           (localStorage.getItem(CSLS.SCHEDULE_CLASSES_ORDER_BY) === \"starttime\") ?\n//                           \"azure\" : \"secondary\"\n//                         }\n//                         onClick={() => {\n//                           localStorage.setItem(CSLS.SCHEDULE_CLASSES_ORDER_BY, \"starttime\")\n//                           refetch(get_list_query_variables())\n//                         }}\n//                       />\n//                     </span>\n//                     <CSDatePicker \n//                       className=\"form-control schedule-list-csdatepicker mr-2\"\n//                       selected={new Date(localStorage.getItem(CSLS.SCHEDULE_CLASSES_DATE_FROM))}\n//                       isClearable={false}\n//                       onChange={(date) => {\n//                         let nextWeekFrom = moment(date)\n//                         let nextWeekUntil = moment(nextWeekFrom).add(6, 'days')\n\n//                         localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_FROM, nextWeekFrom.format('YYYY-MM-DD')) \n//                         localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_UNTIL, nextWeekUntil.format('YYYY-MM-DD')) \n\n//                         console.log(get_list_query_variables())\n\n//                         refetch(get_list_query_variables())\n//                       }}\n//                       placeholderText={t('schedule.classes.go_to_date')}\n//                     />\n//                     <Button.List className=\"schedule-list-page-options-btn-list\">\n//                       <Button \n//                         icon=\"chevron-left\"\n//                         color=\"secondary\"\n//                         onClick={ () => {\n//                           let nextWeekFrom = moment(localStorage.getItem(CSLS.SCHEDULE_CLASSES_DATE_FROM)).subtract(7, 'days')\n//                           let nextWeekUntil = moment(nextWeekFrom).add(6, 'days')\n                          \n//                           localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_FROM, nextWeekFrom.format('YYYY-MM-DD')) \n//                           localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_UNTIL, nextWeekUntil.format('YYYY-MM-DD')) \n\n//                           refetch(get_list_query_variables())\n//                       }} />\n//                       <Button \n//                         icon=\"sunset\"\n//                         color=\"secondary\"\n//                         onClick={ () => {\n//                           let currentWeekFrom = moment()\n//                           let currentWeekUntil = moment(currentWeekFrom).add(6, 'days')\n\n//                           localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_FROM, currentWeekFrom.format('YYYY-MM-DD')) \n//                           localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_UNTIL, currentWeekUntil.format('YYYY-MM-DD')) \n                          \n//                           refetch(get_list_query_variables())\n//                       }} />\n//                       <Button \n//                         icon=\"chevron-right\"\n//                         color=\"secondary\"\n//                         onClick={ () => {\n//                           let nextWeekFrom = moment(localStorage.getItem(CSLS.SCHEDULE_CLASSES_DATE_FROM)).add(7, 'days')\n//                           let nextWeekUntil = moment(nextWeekFrom).add(6, 'days')\n                          \n//                           localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_FROM, nextWeekFrom.format('YYYY-MM-DD')) \n//                           localStorage.setItem(CSLS.SCHEDULE_CLASSES_DATE_UNTIL, nextWeekUntil.format('YYYY-MM-DD')) \n\n//                           refetch(get_list_query_variables())\n//                       }} />\n//                     </Button.List> \n//                   </div>\n//                 </Page.Header>\n//                 <Grid.Row>\n//                   <Grid.Col md={9}>\n//                     {\n                      \n//                       ))}\n//                 </Grid.Col>\n//                 <Grid.Col md={3}>\n//                   <HasPermissionWrapper permission=\"add\"\n//                                         resource=\"scheduleclass\">\n//                     <Button color=\"primary btn-block mb-1\"\n//                             onClick={() => history.push(\"/schedule/classes/add\")}>\n//                       <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('schedule.classes.add')}\n//                     </Button>\n//                   </HasPermissionWrapper>\n//                   <div>\n//                     <Button\n//                       className=\"pull-right\"\n//                       color=\"link\"\n//                       size=\"sm\"\n//                       onClick={() => {\n//                         localStorage.setItem(CSLS.SCHEDULE_CLASSES_FILTER_CLASSTYPE, \"\")\n//                         localStorage.setItem(CSLS.SCHEDULE_CLASSES_FILTER_LEVEL, \"\")\n//                         localStorage.setItem(CSLS.SCHEDULE_CLASSES_FILTER_LOCATION, \"\")\n//                         refetch(get_list_query_variables())\n//                       }}\n//                     >\n//                       {t(\"general.clear\")}\n//                     </Button>\n//                   </div>\n//                   <h5 className=\"mt-2 pt-1\">{t(\"general.filter\")}</h5>\n//                   <ScheduleClassesFilter data={data} refetch={refetch} />\n//                   <h5>{t(\"general.menu\")}</h5>\n//                   <ScheduleMenu activeLink='classes'/>\n//               </Grid.Col>\n//             </Grid.Row>\n//           </Container>\n//         )}}}\n//         </Query>\n//       </div>\n//     </SiteWrapper>\n//   )\n// }\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const CLASS_SCHEMA = Yup.object().shape({\n    frequencyType: Yup.string()\n      .required(t('yup.field_required')),\n    organizationLocationRoom: Yup.string()\n      .required(t('yup.field_required')),\n    organizationClasstype: Yup.string()\n      .required(t('yup.field_required')),\n    dateStart: Yup.date()\n      .required(t('yup.field_required')),\n    timeStart: Yup.date()\n      .typeError(t('yup.time_required'))\n      .required(t('yup.field_required')),\n    timeEnd: Yup.date()\n      .typeError(t('yup.time_required'))\n      .required(t('yup.field_required')),\n    spaces: Yup.number(),\n    walkInSpaces: Yup.number(),\n  })\n","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { v4 } from \"uuid\"\nimport { Link } from 'react-router-dom'\n\nimport {\n    Button,\n    Card,\n    Form,\n    Grid\n  } from \"tabler-react\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../plugin_config/tinymce\"\nimport CSDatePicker from \"../../ui/CSDatePicker\"\nimport CSTimePicker from \"../../ui/CSTimePicker\"\n\nconst ScheduleClassForm = ({ t, history, inputData, isSubmitting, setFieldValue, setFieldTouched, errors, values, touched, returnUrl }) => (\n    <FoForm>\n      <Card.Body>\n        <Form.Group>\n          <Form.Label className=\"custom-switch\">\n              <Field \n              className=\"custom-switch-input\"\n              type=\"checkbox\" \n              name=\"displayPublic\" \n              checked={values.displayPublic} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('schedule.classes.public')}</span>\n          </Form.Label>\n          <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n        </Form.Group>  \n        <Form.Group label={t('schedule.classes.frequencyType')}>\n          <Field component=\"select\" \n                name=\"frequencyType\" \n                className={(errors.frequencyType) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\">\n            <option value=\"SPECIFIC\" key={v4()}>{t('schedule.classes.select_specific')}</option>\n            <option value=\"WEEKLY\" key={v4()}>{t('schedule.classes.select_weekly')}</option>\n          </Field>\n          <ErrorMessage name=\"frequencyType\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group>\n        { (values.frequencyType == \"SPECIFIC\") ? \"\" :\n          <Form.Group label={t('schedule.classes.frequencyInterval')}>\n            <Field component=\"select\" \n                  name=\"frequencyInterval\" \n                  className={(errors.frequencyInterval) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\">\n              <option value=\"1\" key={v4()}>{t('general.monday')}</option>\n              <option value=\"2\" key={v4()}>{t('general.tuesday')}</option>\n              <option value=\"3\" key={v4()}>{t('general.wednesday')}</option>\n              <option value=\"4\" key={v4()}>{t('general.thursday')}</option>\n              <option value=\"5\" key={v4()}>{t('general.friday')}</option>\n              <option value=\"6\" key={v4()}>{t('general.saturday')}</option>\n              <option value=\"7\" key={v4()}>{t('general.sunday')}</option>\n            </Field>\n            <ErrorMessage name=\"frequencyInterval\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        }\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.location')}>\n              <Field component=\"select\" \n                    name=\"organizationLocationRoom\" \n                    className={(errors.organizationLocationRoom) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\" key={v4()}>{t(\"general.please_select\")}</option>\n                {inputData.organizationLocationRooms.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.organizationLocation.name} - {node.name}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"organizationLocationRoom\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.level')}>\n              <Field component=\"select\" \n                    name=\"organizationLevel\" \n                    className={(errors.organizationLevels) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\" key={v4()}>{t(\"\")}</option>\n                {inputData.organizationLevels.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.name}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"organizationLevels\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n        </Grid.Row>\n        <Form.Group label={t('general.class')}>\n          <Field component=\"select\" \n                name=\"organizationClasstype\" \n                className={(errors.organizationClasstype) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\">\n            <option value=\"\" key={v4()}>{t(\"general.please_select\")}</option>\n            {inputData.organizationClasstypes.edges.map(({ node }) =>\n              <option value={node.id} key={v4()}>{node.name}</option>\n            )}\n          </Field>\n          <ErrorMessage name=\"organizationClasstype\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group> \n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={(values.frequencyType == \"SPECIFIC\") ? t('general.date') : t('general.date_start')}>\n              <CSDatePicker \n                className={(errors.dateStart) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.dateStart}\n                onChange={(date) => {\n                  setFieldValue(\"dateStart\", date)\n                  setFieldTouched(\"dateStart\", true)\n                }}\n                onBlur={() => setFieldTouched(\"dateStart\", true)}\n              />\n              <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          { (values.frequencyType == \"SPECIFIC\") ? \"\" :\n            <Grid.Col>\n              <Form.Group label={t('general.date_end')}>\n                <CSDatePicker \n                  selected={values.dateEnd}\n                  onChange={(date) => {\n                    setFieldValue(\"dateEnd\", date)\n                    setFieldTouched(\"dateEnd\", true)\n                  }}\n                  onBlur={() => setFieldTouched(\"dateEnd\", true)}\n                  placeholderText={t('schedule.classes.placeholder_enddate')}\n                />\n                <ErrorMessage name=\"dateEnd\" component=\"span\" className=\"invalid-feedback\" />\n              </Form.Group>\n            </Grid.Col>\n          }\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n           <Form.Group label={t('general.time_start')}>\n              <CSTimePicker \n                className={(errors.timeStart) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.timeStart}\n                onChange={(date) => setFieldValue(\"timeStart\", date)}\n                onBlur={() => setFieldTouched(\"timeStart\", true)}\n                clearable={false}\n              />\n              {/* {errors.timeStart}\n              {errors.timeStart && touched.timeStart ? (\n                <span className=\"invalid-feedback\">{errors.timeStart} - hacky thingy</span>\n              ) : null} */}\n              <ErrorMessage name=\"timeStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n           <Form.Group label={t('general.time_end')}>\n              <CSTimePicker \n                className={(errors.timeEnd) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.timeEnd}\n                onChange={(date) => setFieldValue(\"timeEnd\", date)}\n                onBlur={() => setFieldTouched(\"timeEnd\", true)}\n                clearable={false}\n              />\n              <ErrorMessage name=\"timeEnd\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('schedule.classes.spaces')}>\n              <Field type=\"text\" \n                    name=\"spaces\" \n                    className={(errors.spaces) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n              <ErrorMessage name=\"spaces\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('schedule.classes.spaces_walk_in')}>\n              <Field type=\"text\" \n                    name=\"walkInSpaces\" \n                    className={(errors.walkInSpaces) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n              <ErrorMessage name=\"walkInSpaces\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n        </Grid.Row>\n        <Form.Group label={t('general.note')}>\n          <Editor\n              tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n              textareaName=\"note\"\n              initialValue={values.note}\n              init={tinymceBasicConf}\n              onChange={(e) => setFieldValue(\"note\", e.target.getContent())}\n              onBlur={() => setFieldTouched(\"note\", true)}\n            />\n          <ErrorMessage name=\"note\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group>\n        <Form.Group label={t('general.info_mail')}>\n          <Editor\n              tinymceScriptSrc=\"/d/static/tinymce/tinymce.min.js\"\n              textareaName=\"infoMailContent\"\n              initialValue={values.infoMailContent}\n              init={tinymceBasicConf}\n              onChange={(e) => setFieldValue(\"infoMailContent\", e.target.getContent())}\n              onBlur={() => setFieldTouched(\"infoMailContent\", true)}\n            />\n          <ErrorMessage name=\"note\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group>\n      </Card.Body>\n      <Card.Footer>\n        <Button \n        color=\"primary\"\n        className=\"pull-right\" \n        type=\"submit\" \n        disabled={isSubmitting}\n        >\n        {t('general.submit')}\n        </Button>\n        <Link to={returnUrl}>\n          <Button color=\"link\">\n              {t('general.cancel')}\n          </Button>\n        </Link>\n      </Card.Footer>\n    </FoForm>\n)\n  \n  \n  export default withTranslation()(withRouter(ScheduleClassForm))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Container,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport ScheduleMenu from '../ScheduleMenu'\n\n\nfunction ScheduleClassAddBase({t, children}) {\n  const returnUrl = \"/schedule/classes\"\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"schedule.title\")} />\n          <Grid.Row>\n            <Grid.Col md={9}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <HasPermissionWrapper permission=\"add\"\n                                    resource=\"scheduleclass\">\n                <Link to={returnUrl}>\n                  <Button color=\"primary btn-block mb-6\">\n                    <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n                  </Button>\n                </Link>\n              </HasPermissionWrapper>\n              <ScheduleMenu activeLink='classes'/>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleClassAddBase))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_CLASSES_QUERY, GET_INPUT_VALUES_QUERY, CREATE_CLASS } from './queries'\nimport { get_list_query_variables } from './tools'\nimport { CLASS_SCHEMA } from './yupSchema'\nimport ScheduleClassForm from './ScheduleClassForm'\n\n\nimport {\n  Card,\n} from \"tabler-react\"\nimport { dateToLocalISO, dateToLocalISOTime } from '../../../tools/date_tools'\n\nimport ScheduleClassAddBase from './ScheduleClassAddBase'\n\n\nfunction ScheduleClassAdd({t, history}) {\n  const cardTitle = t('schedule.classes.title_add')\n  const returnUrl = \"/schedule/classes\"\n  const { loading, error, data } = useQuery(GET_INPUT_VALUES_QUERY)\n  const [ createScheduleClass ] = useMutation(CREATE_CLASS)\n  \n\n  if (loading) return (\n    <ScheduleClassAddBase>\n      <Card title={cardTitle}>\n        <Card.Body>\n          <p>{t('general.loading_with_dots')}</p>\n        </Card.Body>\n      </Card>\n    </ScheduleClassAddBase>\n  )\n\n  if (error) return (\n    <ScheduleClassAddBase>\n      <Card title={cardTitle}>\n        <Card.Body>\n          <p>{t('general.error_sad_smiley')}</p>\n        </Card.Body>\n      </Card>\n    </ScheduleClassAddBase>\n  )\n\n  const inputData = data\n\n  return (\n    <ScheduleClassAddBase>\n      <Card title={cardTitle}>\n        <Formik\n          initialValues={{ \n            displayPublic: true,\n            frequencyType: \"WEEKLY\",\n            frequencyInterval: 1,\n            organizationLocationRoom: \"\",\n            organizationClasstype: \"\",\n            organizationLevel: \"\",\n            dateStart: new Date(),\n            timeStart: new Date(),\n            timeEnd: new Date(),\n            spaces: \"\",\n            walkInSpaces: \"\"\n          }}\n          validationSchema={CLASS_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              let frequencyInterval = values.frequencyInterval\n              if (values.frequencyType == 'SPECIFIC')\n                frequencyInterval = 0\n\n              let dateEnd\n                if (values.dateEnd) {\n                  dateEnd = dateToLocalISO(values.dateEnd)\n                } else {\n                  dateEnd = values.dateEnd\n                }\n              \n              createScheduleClass({ variables: {\n                input: {\n                  displayPublic: values.displayPublic,\n                  frequencyType: values.frequencyType,\n                  frequencyInterval: frequencyInterval,\n                  organizationLocationRoom: values.organizationLocationRoom,\n                  organizationClasstype: values.organizationClasstype,\n                  organizationLevel: values.organizationLevel,\n                  dateStart: dateToLocalISO(values.dateStart),\n                  dateEnd: dateEnd,\n                  timeStart: dateToLocalISOTime(values.timeStart),\n                  timeEnd: dateToLocalISOTime(values.timeEnd),\n                  spaces: values.spaces,\n                  walkInSpaces: values.walkInSpaces\n                }\n              }, refetchQueries: [\n                  {query: GET_CLASSES_QUERY, variables: get_list_query_variables()}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  toast.success((t('schedule.classes.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, setFieldValue, setFieldTouched, errors, values, touched }) => (\n                <ScheduleClassForm\n                  inputData={inputData}\n                  isSubmitting={isSubmitting}\n                  setFieldValue={setFieldValue}\n                  setFieldTouched={setFieldTouched}\n                  errors={errors}\n                  values={values}\n                  touched={touched}\n                  returnUrl={returnUrl}\n                >\n                </ScheduleClassForm>\n              )\n           }\n        </Formik>\n      </Card>      \n    </ScheduleClassAddBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleClassAdd))","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\n\n\nimport {\n  List\n} from \"tabler-react\";\n// import HasPermissionWrapper from \"../HasPermissionWrapper\"\n\nlet edit_active\nlet classpasses_active\nlet subscriptions_active\nlet teachers_active\nlet prices_active\n\nconst ClassEditMenu = ({ t, activeLink, classId }) => (\n    <List.Group transparent={true}>\n        {(activeLink === 'edit') ? edit_active = true: edit_active = false}\n        {(activeLink === 'classpasses') ? classpasses_active = true: classpasses_active = false}\n        {(activeLink === 'subscriptions') ? subscriptions_active = true: subscriptions_active = false}\n        {(activeLink === 'teachers') ? teachers_active = true: teachers_active = false}\n        {(activeLink === 'prices') ? prices_active = true: prices_active = false}        \n\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to={\"#/schedule/classes/all/edit/\" + classId}\n            icon=\"edit-3\"\n            active={edit_active}\n            >\n            {t('general.edit')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to={\"#/schedule/classes/all/teachers/\" + classId}\n            icon=\"users\"\n            active={teachers_active}\n            >\n            {t('general.teachers')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to={\"#/schedule/classes/all/prices/\" + classId}\n            icon=\"dollar-sign\"\n            active={prices_active}\n            >\n            {t('general.prices')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to={\"#/schedule/classes/all/subscriptions/\" + classId}\n            icon=\"edit\"\n            active={subscriptions_active}\n            >\n            {t('general.subscriptions')}\n        </List.GroupItem>\n        <List.GroupItem\n            key={v4()}\n            className=\"d-flex align-items-center\"\n            to={\"#/schedule/classes/all/classpasses/\" + classId}\n            icon=\"edit\"\n            active={classpasses_active}\n            >\n            {t('general.classpasses')}\n        </List.GroupItem>\n    </List.Group>\n);\n\nexport default withTranslation()(ClassEditMenu)","import { gql } from \"@apollo/client\"\n\nexport const UPDATE_CLASS = gql`\nmutation UpdateScheduleClass($input:UpdateScheduleClassInput!) {\n  updateScheduleClass(input: $input) {\n    scheduleItem {\n      id\n      scheduleItemType\n      frequencyType\n      frequencyInterval\n      organizationLocationRoom {\n        id\n        name\n        organizationLocation {\n          id\n          name\n        }\n      }\n      organizationClasstype {\n        id\n        name\n      }\n      organizationLevel {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      timeStart\n      timeEnd\n      displayPublic\n    }\n  }\n}\n`","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Icon,\n} from \"tabler-react\";\n\nconst ClassEditBack = ({ t }) => (\n  <div className=\"page-options d-flex\">\n    <Link to=\"/schedule/classes\" \n          className='btn btn-outline-secondary btn-sm'>\n        <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back_to')} {t('schedule.title')}\n    </Link>\n  </div>\n)\n\nexport default withTranslation()(ClassEditBack)","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Page,\n  Grid,\n  Card,\n  Container,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../../SiteWrapper\"\n// import HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n\n\nimport ClassEditMenu from './ClassEditMenu'\nimport ClassEditBack from './ClassEditBack';\n\n\nfunction ClassEditBaseBase({t, match, children, subTitle=\"\", cardTitle=\"\", defaultCard=true, menuActiveLink=\"\", sidebarButton=\"\"}) {\n  const classId = match.params.class_id\n  \n  return (\n    <SiteWrapper>\n      <Container>\n        <Page.Header \n          title={t(\"schedule.title\")} \n          subTitle={subTitle}\n        >\n          <ClassEditBack />\n        </Page.Header>\n        <Grid.Row>\n          <Grid.Col md={9}>\n            {(!defaultCard) ? children :\n              <Card title={cardTitle}>\n                <Card.Body>\n                  {children}\n                </Card.Body>\n              </Card>\n            }\n          </Grid.Col>\n          <Grid.Col md={3}>\n            {sidebarButton}\n            <h5>{t('general.menu')}</h5>\n            <ClassEditMenu activeLink={menuActiveLink} classId={classId}/>\n          </Grid.Col>\n        </Grid.Row>\n      </Container>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ClassEditBaseBase))","import moment from 'moment'\n\nexport function class_edit_all_subtitle({t, location, locationRoom, classtype, starttime}) {\n  return t('general.class') + ': ' + location + ' (' + locationRoom + ') - ' + classtype + ' @ ' + moment(starttime).format('LT')\n}\n\n\nexport function represent_teacher_role(t, role) {\n  console.log(role)\n  switch (role) {\n    case \"SUB\":\n      return t('schedule.classes.teacher_roles.sub')\n      break\n    case \"ASSISTANT\":\n      return t('schedule.classes.teacher_roles.assistant')\n      break\n    case \"KARMA\":\n      return t('schedule.classes.teacher_roles.karma')\n      break\n    default:\n      return \"\"\n      break\n  }\n}\n","// @flow\n\nimport React, { Component } from 'react'\nimport { t } from 'i18next'\nimport { useQuery } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { TimeStringToJSDateOBJ } from '../../../../tools/date_tools'\n\nimport {\n  Page,\n  Grid,\n  Card,\n  Container,\n} from \"tabler-react\"\n// import HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n\nimport { GET_CLASS_QUERY } from \"../queries\"\n\nimport ClassEditMenu from './ClassEditMenu'\nimport ClassEditBack from './ClassEditBack'\nimport ClassEditBaseBase from './ClassEditBaseBase'\nimport { class_edit_all_subtitle } from \"./tools\"\n\n\nfunction ClassEditBase({t, match, children, menuActiveLink=\"\", defaultCard=true, sidebarButton=\"\", cardTitle=\"\"}) {\n  const classId = match.params.class_id\n  const { loading, error, data } = useQuery(GET_CLASS_QUERY, { variables: {\n    id: classId\n  }})\n\n  if (!cardTitle) {\n    cardTitle = t('schedule.classes.title_edit')\n  }\n\n  if (loading) return (\n    <ClassEditBaseBase \n      cardTitle={cardTitle}\n      defaultCard={true}\n      sidebarButton={sidebarButton}\n      menuActiveLink={menuActiveLink}\n    >\n      <p>{t('general.loading_with_dots')}</p>\n    </ClassEditBaseBase>\n  )\n\n  if (error) return (\n    <ClassEditBaseBase \n      cardTitle={cardTitle}\n      defaultCard={true}\n      sidebarButton={sidebarButton}\n      menuActiveLink={menuActiveLink}\n    >\n      {console.log(error)}\n      <p>{t('general.error_sad_smiley')}</p>\n    </ClassEditBaseBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  const initialValues = data.scheduleItem\n\n  const initialTimeStart = TimeStringToJSDateOBJ(initialValues.timeStart)\n  const subTitle = class_edit_all_subtitle({\n    t: t,\n    location: initialValues.organizationLocationRoom.organizationLocation.name,\n    locationRoom: initialValues.organizationLocationRoom.name,\n    classtype: initialValues.organizationClasstype.name,\n    starttime: initialTimeStart\n  })\n\n  return (\n    <ClassEditBaseBase \n      subTitle={subTitle}\n      cardTitle={cardTitle}\n      sidebarButton={sidebarButton}\n      defaultCard={defaultCard}\n      menuActiveLink={menuActiveLink}\n    >\n      {children}\n    </ClassEditBaseBase>\n  )\n\n}\n\nexport default withTranslation()(withRouter(ClassEditBase))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\n\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_CLASSES_QUERY, GET_CLASS_QUERY } from '../../queries'\nimport { UPDATE_CLASS } from './queries'\n\nimport { get_list_query_variables } from '../../tools'\nimport { CLASS_SCHEMA } from '../../yupSchema'\nimport ScheduleClassForm from '../../ScheduleClassForm'\n\nimport { dateToLocalISO, dateToLocalISOTime, TimeStringToJSDateOBJ } from '../../../../../tools/date_tools'\nimport ClassEditBase from '../ClassEditBase'\nimport { Card } from 'tabler-react';\n\n\nfunction ScheduleClassEditAll({t, match}) {\n  const id = match.params.class_id\n  const menuActiveLink = \"edit\"\n  const returnUrl = \"/schedule/classes\"\n  const cardTitle = t('schedule.classes.title_edit')\n  const { loading, error, data } = useQuery(GET_CLASS_QUERY, {\n    variables: { id: id }\n  })\n  const [ updateScheduleClass ] = useMutation(UPDATE_CLASS)\n\n  if (loading) return (\n    <ClassEditBase menu_activeLink={menuActiveLink}>\n      <p>{t('general.loading_with_dots')}</p>\n    </ClassEditBase>\n  )\n\n  if (error) return (\n    <ClassEditBase menu_activeLink={menuActiveLink}>\n      <p>{t('general.error_sad_smiley')}</p>\n    </ClassEditBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n  const initialValues = data.scheduleItem\n\n  let initialLevelID = \"\"\n  if (initialValues.organizationLevel) {\n    initialLevelID = initialValues.organizationLevel.id\n  }\n\n  const initialTimeStart = TimeStringToJSDateOBJ(initialValues.timeStart)\n  const initialTimeEnd = TimeStringToJSDateOBJ(initialValues.timeEnd)\n  // DatePicker doesn't like a string as an initial value\n  // This makes it a happy DatePicker :)\n  let dateStart = null\n  let dateEnd = null\n  if (initialValues.dateStart) {\n    dateStart = new Date(initialValues.dateStart)\n  }\n  if (initialValues.dateEnd) {\n    dateEnd = new Date(initialValues.dateEnd)\n  }\n\n\n  return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink}\n      defaultCard={false}\n    >\n      <Card title={cardTitle}>\n        <Formik\n          initialValues={{ \n            displayPublic: initialValues.displayPublic,\n            frequencyType: initialValues.frequencyType,\n            frequencyInterval: initialValues.frequencyInterval,\n            organizationLocationRoom: initialValues.organizationLocationRoom.id,\n            organizationClasstype: initialValues.organizationClasstype.id,\n            organizationLevel: initialLevelID,\n            dateStart: dateStart,\n            dateEnd: dateEnd,\n            timeStart: initialTimeStart,\n            timeEnd: initialTimeEnd,\n            spaces: initialValues.spaces,\n            walkInSpaces: initialValues.walkInSpaces,\n            infoMailContent: initialValues.infoMailContent\n          }}\n          validationSchema={CLASS_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              let frequencyInterval = values.frequencyInterval\n              if (values.frequencyType == 'SPECIFIC')\n                frequencyInterval = 0\n\n              let dateEnd\n                if (values.dateEnd) {\n                  dateEnd = dateToLocalISO(values.dateEnd)\n                } else {\n                  dateEnd = values.dateEnd\n                }  \n\n              updateScheduleClass({ variables: {\n                input: {\n                  id: id,\n                  displayPublic: values.displayPublic,\n                  frequencyType: values.frequencyType,\n                  frequencyInterval: frequencyInterval,\n                  organizationLocationRoom: values.organizationLocationRoom,\n                  organizationClasstype: values.organizationClasstype,\n                  organizationLevel: values.organizationLevel,\n                  dateStart: dateToLocalISO(values.dateStart),\n                  dateEnd: dateEnd,\n                  timeStart: dateToLocalISOTime(values.timeStart),\n                  timeEnd: dateToLocalISOTime(values.timeEnd),\n                  spaces: values.spaces,\n                  walkInSpaces: values.walkInSpaces,\n                  infoMailContent: values.infoMailContent\n                }\n              }, refetchQueries: [\n                  {query: GET_CLASSES_QUERY, variables: get_list_query_variables()}\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  toast.success((t('schedule.classes.toast_edit_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  setSubmitting(false)\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, setFieldValue, setFieldTouched, errors, values, touched }) => (\n            <ScheduleClassForm\n              inputData={inputData}\n              isSubmitting={isSubmitting}\n              setFieldValue={setFieldValue}\n              setFieldTouched={setFieldTouched}\n              errors={errors}\n              values={values}\n              touched={touched}\n              returnUrl={returnUrl}\n            />\n          )}\n        </Formik>      \n      </Card>\n    </ClassEditBase>   \n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleClassEditAll))","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { v4 } from 'uuid'\n\n// import {\n//   Badge\n// } from \"tabler-react\"\n\nconst FormHelp = ({ t, message }) => (\n    <span className=\"form-help\" \n          data-toggle=\"popover\" \n          data-placement=\"top\" \n          data-content={message} \n          data-original-title=\"\" \n          title={message} \n          aria-describedby={'popover23432'}>\n        ?\n    </span>\n)\n\nexport default withTranslation()(FormHelp)","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Card,\n  Dimmer,\n  Grid,\n  Form,\n  Table,\n  Text\n} from \"tabler-react\"\n\n\nimport FormHelp from \"../../../../ui/FormHelp\"\n\n\nconst ScheduleClassClasspassForm = ({ t, history, match, isSubmitting, submitForm, errors, values, setFieldTouched, setFieldValue }) => (\n  <FoForm>\n    <Dimmer active={isSubmitting} loader={isSubmitting} >\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group className='mb-0'>\n            <Form.Label className=\"custom-switch\">\n              <Field \n                className=\"custom-switch-input\"\n                type=\"checkbox\" \n                name=\"shopBook\" \n                onChange={() => {\n                  setFieldValue('shopBook', !values.shopBook)\n                  setFieldTouched('shopBook', true)\n                  if (!values.shopBook) {\n                    setFieldValue('attend', true)\n                    setFieldTouched('attend', true)\n                  }\n                  setTimeout(() => {submitForm()}, 200)\n                }}\n                checked={values.shopBook} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('schedule.classes.classpasses.shop_book')}</span>\n            </Form.Label>\n            <ErrorMessage name=\"shopBook\" component=\"div\" />   \n          </Form.Group>  \n        </Grid.Col>\n        <Grid.Col>\n          <Form.Group className='mb-0'>\n            <Form.Label className=\"custom-switch\">\n              <Field \n                className=\"custom-switch-input\"\n                type=\"checkbox\" \n                name=\"attend\" \n                disabled={(values.shopBook)}\n                onChange={() => {\n                  setFieldValue('attend', !values.attend)\n                  setFieldTouched('attend', true)\n                  setTimeout(() => {submitForm()}, 200)\n                }}\n                checked={values.attend} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('general.attend')}</span>\n            </Form.Label>\n            {/* Show message to inform user they can't disable attend while enroll or shopBook is enabled*/}\n            { (values.shopBook) ? <div>\n                <Text.Small>{t('schedule.classes.classpasses.attend_disabled')}</Text.Small> { ' ' }\n                <FormHelp message={t('schedule.classes.classpasses.attend_disabled_help')} />\n              </div> : \"\" }\n            <ErrorMessage name=\"attend\" component=\"div\" />   \n          </Form.Group>  \n        </Grid.Col>\n      </Grid.Row>\n    </Dimmer>\n  </FoForm>\n);\n\nexport default withTranslation()(withRouter(ScheduleClassClasspassForm))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const SCHEDULE_CLASS_CLASSPASS_SCHEMA = Yup.object().shape({\n  shopBook: Yup.boolean(),\n  attend: Yup.boolean(),\n})\n","import { gql } from \"@apollo/client\"\n\nexport const GET_SCHEDULE_CLASS_CLASSPASSES_QUERY = gql`\n  query ScheduleItemOrganizationClasspassGroups($after: String, $before: String, $scheduleItem: ID!) {\n    scheduleItemOrganizationClasspassGroups(before: $before, after: $after, scheduleItem: $scheduleItem) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          scheduleItem {\n            id\n          }\n          organizationClasspassGroup {\n            id\n            name\n          }\n          shopBook\n          attend\n        }\n      }\n    }\n    scheduleItem(id:$scheduleItem) {\n      id\n      frequencyType\n      frequencyInterval\n      organizationLocationRoom {\n        id\n        name\n        organizationLocation {\n          id\n          name\n        }\n      }\n      organizationClasstype {\n        id\n        name\n      }\n      organizationLevel {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      timeStart\n      timeEnd\n      displayPublic\n    }\n  }\n`\n\nexport const UPDATE_SCHEDULE_CLASS_CLASSPASS = gql`\n  mutation UpdateScheduleItemOrganizationClasspassGroup($input: UpdateScheduleItemOrganizationClasspassGroupInput!) {\n    updateScheduleItemOrganizationClasspassGroup(input:$input) {\n      scheduleItemOrganizationClasspassGroup {\n        id\n      } \n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { Formik } from 'formik'\n\nimport {\n  Icon,\n  Dimmer,\n  Button,\n  Table\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../../../general/ContentCard\"\nimport ClassEditBase from \"../ClassEditBase\"\nimport ScheduleClassClasspassForm from \"./ScheduleClassClasspassForm\"\n\nimport { SCHEDULE_CLASS_CLASSPASS_SCHEMA } from './yupSchema'\nimport { GET_SCHEDULE_CLASS_CLASSPASSES_QUERY, UPDATE_SCHEDULE_CLASS_CLASSPASS } from \"./queries\"\n\n\nfunction ScheduleClassClasspasses({ t, match }) {\n  const classId = match.params.class_id\n  const menuActiveLink = \"classpasses\"\n  const cardTitle = t('schedule.classes.classpasses.title')\n  const { loading, error, data, fetchMore } = useQuery(GET_SCHEDULE_CLASS_CLASSPASSES_QUERY, { \n    variables: { scheduleItem: classId }\n  })\n  const [ updateScheduleClassClasspass ] = useMutation(UPDATE_SCHEDULE_CLASS_CLASSPASS)\n\n  const sidebarButton = <HasPermissionWrapper permission=\"add\" resource=\"scheduleitemclasspass\">\n    <Link to={\"/schedule/classes/all/classpasses/\" + classId + \"/add\" } >\n      <Button color=\"primary btn-block mb-6\">\n      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('schedule.classes.classpasses.add')}\n      </Button>\n    </Link>\n  </HasPermissionWrapper>\n\n  // Loading\n  if (loading) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n    >\n      <Dimmer active={true} loader={true} />\n    </ClassEditBase>\n  )\n  // Error\n  if (error) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n    >\n      <p>{t('schedule.classes.classpasses.error_loading')}</p>\n    </ClassEditBase>\n  )\n\n  // Empty list\n  if (!data.scheduleItemOrganizationClasspassGroups.edges.length) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n    >\n      <p>{t('schedule.classes.classpasses.empty_list')}</p>\n    </ClassEditBase>\n  )\n\n  return (\n    <ClassEditBase \n      defaultCard={false} \n      menuActiveLink={menuActiveLink} \n      sidebarButton={sidebarButton}\n    >\n    <ContentCard \n      cardTitle={cardTitle}\n      // headerContent={headerOptions}\n      pageInfo={data.scheduleItemOrganizationClasspassGroups.pageInfo}\n      onLoadMore={() => {\n      fetchMore({\n        variables: {\n          after: data.scheduleItemOrganizationClasspassGroups.pageInfo.endCursor\n        },\n        updateQuery: (previousResult, { fetchMoreResult }) => {\n          const newEdges = fetchMoreResult.scheduleItemOrganizationClasspassGroups.edges\n          const pageInfo = fetchMoreResult.scheduleItemOrganizationClasspassGroups.pageInfo\n\n          return newEdges.length\n            ? {\n                // Put the new locations at the end of the list and update `pageInfo`\n                // so we have the new `endCursor` and `hasNextPage` values\n                data: { \n                  scheduleItemOrganizationClasspassGroups: {\n                    __typename: previousResult.scheduleItemOrganizationClasspassGroups.__typename,\n                    edges: [ ...previousResult.scheduleItemOrganizationClasspassGroups.edges, ...newEdges ],\n                    pageInfo\n                  }\n                }\n              }\n            : previousResult\n          }\n        })\n      }} >\n      <div>\n        <Table>\n          <Table.Header>\n            <Table.Row>\n              <Table.ColHeader>{t('general.classpass')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {data.scheduleItemOrganizationClasspassGroups.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                {console.log(node)}\n                <Table.Col key={v4()}> \n                  {node.organizationClasspassGroup.name}\n                </Table.Col>\n                <Table.Col>\n                <Formik\n                    initialValues={{  \n                      shopBook: node.shopBook,\n                      attend: node.attend\n                    }}\n                    validationSchema={SCHEDULE_CLASS_CLASSPASS_SCHEMA}\n                    onSubmit={(values, { setSubmitting }) => {\n                        console.log(values)\n\n                        updateScheduleClassClasspass({ variables: {\n                            input: {\n                              id: node.id,\n                              shopBook: values.shopBook,\n                              attend: values.attend\n                            }\n                          }, refetchQueries: [\n                            { query: GET_SCHEDULE_CLASS_CLASSPASSES_QUERY,\n                              variables: { scheduleItem: classId }\n                            }\n                        ]})\n                        .then(({ data }) => {\n                            console.log('got data', data);\n                            toast.success((t('schedule.classes.classpasses.toast_edit_success')), {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                            setSubmitting(false)\n                          }).catch((error) => {\n                            toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                            console.log('there was an error sending the query', error)\n                            setSubmitting(false)\n                          })\n                    }}\n                    >\n                    {({ isSubmitting, errors, values, setFieldTouched, setFieldValue, submitForm }) => (\n                      <ScheduleClassClasspassForm\n                        isSubmitting={isSubmitting}\n                        setFieldTouched={setFieldTouched}\n                        setFieldValue={setFieldValue}\n                        errors={errors}\n                        values={values}\n                        submitForm={submitForm}\n                      >\n                        {console.log(errors)}\n                        {console.log(values)}\n                        test\n                      </ScheduleClassClasspassForm>\n                    )}\n                </Formik>\n                </Table.Col>\n              </Table.Row>\n            ))}\n          </Table.Body>\n        </Table>\n        </div>\n      </ContentCard>\n    </ClassEditBase>\n  )\n}\n\n\n// class ScheduleClassClasspasses extends Component {\n//   constructor(props) {\n//     super(props)\n//     console.log(\"Schedule classs classpasses props:\")\n//     console.log(props)\n//   }\n\n//   render() {\n//     const t = this.props.t\n//     const match = this.props.match\n//     const history = this.props.history\n//     const classId = match.params.class_id\n\n//     const ButtonAdd = <HasPermissionWrapper permission=\"add\" resource=\"scheduleitemclasspass\">\n//       <Link to={\"/schedule/classes/all/classpasses/\" + classId + \"/add\" } >\n//         <Button color=\"primary btn-block mb-6\">\n//         <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('schedule.classes.classpasses.add')}\n//         </Button>\n//       </Link>\n//     </HasPermissionWrapper>\n\n//     return (\n//       <SiteWrapper>\n//       <div className=\"my-3 my-md-5\">\n//         {console.log('ID here:')}\n//         {console.log(classId)}\n//         <Query query={GET_SCHEDULE_CLASS_CLASSPASSES_QUERY} variables={{ scheduleItem: classId }}>\n//           {({ loading, error, data, refetch, fetchMore }) => {\n  \n//             // Loading\n//             if (loading) return (\n//               <ClassEditBase menu_activeLink=\"classpasses\" card_title={t('schedule.classes.classpasses.title')} sidebar_button={ButtonAdd}>\n//                 <Dimmer active={true} loader={true} />\n//               </ClassEditBase>\n//             )\n//             // Error\n//             if (error) return (\n//               <ClassEditBase menu_activeLink=\"classpasses\" card_title={t('schedule.classes.classpasses.title')} sidebar_button={ButtonAdd}>\n//                 <p>{t('schedule.classes.classpasses.error_loading')}</p>\n//               </ClassEditBase>\n//             )\n  \n//             const initialTimeStart = TimeStringToJSDateOBJ(data.scheduleItem.timeStart)\n//             const subtitle = class_edit_all_subtitle({\n//               t: t,\n//               location: data.scheduleItem.organizationLocationRoom.organizationLocation.name,\n//               locationRoom: data.scheduleItem.organizationLocationRoom.name,\n//               classtype: data.scheduleItem.organizationClasstype.name,\n//               starttime: initialTimeStart\n//             })\n  \n//             // Empty list\n//             if (!data.scheduleItemOrganizationClasspassGroups.edges.length) { return (\n//               <ClassEditBase menu_activeLink=\"classpasses\" card_title={t('schedule.classes.classpasses.title')} sidebar_button={ButtonAdd}>\n//                 <p>{t('schedule.classes.classpasses.empty_list')}</p>\n//               </ClassEditBase>\n//             )} else {   \n//             // Life's good! :)\n//               return (\n//                 <ClassEditBase \n//                   menu_activeLink=\"classpasses\" \n//                   default_card={false} \n//                   subtitle={subtitle}\n//                   sidebar_button={ButtonAdd}\n//                 >\n//                 <ContentCard \n//                   cardTitle={t('schedule.classes.title_edit')}\n//                   // headerContent={headerOptions}\n//                   pageInfo={data.scheduleItemOrganizationClasspassGroups.pageInfo}\n//                   onLoadMore={() => {\n//                   fetchMore({\n//                     variables: {\n//                       after: data.scheduleItemOrganizationClasspassGroups.pageInfo.endCursor\n//                     },\n//                     updateQuery: (previousResult, { fetchMoreResult }) => {\n//                       const newEdges = fetchMoreResult.scheduleItemOrganizationClasspassGroups.edges\n//                       const pageInfo = fetchMoreResult.scheduleItemOrganizationClasspassGroups.pageInfo\n  \n//                       return newEdges.length\n//                         ? {\n//                             // Put the new locations at the end of the list and update `pageInfo`\n//                             // so we have the new `endCursor` and `hasNextPage` values\n//                             data: { \n//                               scheduleItemOrganizationClasspassGroups: {\n//                                 __typename: previousResult.scheduleItemOrganizationClasspassGroups.__typename,\n//                                 edges: [ ...previousResult.scheduleItemOrganizationClasspassGroups.edges, ...newEdges ],\n//                                 pageInfo\n//                               }\n//                             }\n//                           }\n//                         : previousResult\n//                       }\n//                     })\n//                   }} >\n//                   <div>\n//                     <Table>\n//                       <Table.Header>\n//                         <Table.Row>\n//                           <Table.ColHeader>{t('general.classpass')}</Table.ColHeader>\n//                           <Table.ColHeader></Table.ColHeader>\n//                         </Table.Row>\n//                       </Table.Header>\n//                       <Table.Body>\n//                         {data.scheduleItemOrganizationClasspassGroups.edges.map(({ node }) => (\n//                           <Table.Row key={v4()}>\n//                             {console.log(node)}\n//                             <Table.Col key={v4()}> \n//                               {node.organizationClasspassGroup.name}\n//                             </Table.Col>\n//                             <Table.Col>\n//                             <Mutation mutation={UPDATE_SCHEDULE_CLASS_CLASSPASS}> \n//                               {(updateScheduleClassClasspass, { data }) => (\n//                                 <Formik\n//                                     initialValues={{  \n//                                       shopBook: node.shopBook,\n//                                       attend: node.attend\n//                                     }}\n//                                     validationSchema={SCHEDULE_CLASS_CLASSPASS_SCHEMA}\n//                                     onSubmit={(values, { setSubmitting }) => {\n//                                         console.log(values)\n\n//                                         updateScheduleClassClasspass({ variables: {\n//                                           input: {\n//                                             id: node.id,\n//                                             shopBook: values.shopBook,\n//                                             attend: values.attend\n//                                           }\n//                                         }, refetchQueries: [\n//                                             // {query: GET_SCHEDULE_CLASS_TEACHERS_QUERY, variables: { scheduleItem: match.params.class_id }},\n//                                             // {query: GET_CLASSPASSES_QUERY, variables: {\"archived\": false }},\n//                                         ]})\n//                                         .then(({ data }) => {\n//                                             console.log('got data', data);\n//                                             toast.success((t('schedule.classes.classpasses.toast_edit_success')), {\n//                                                 position: toast.POSITION.BOTTOM_RIGHT\n//                                               })\n//                                             setSubmitting(false)\n//                                           }).catch((error) => {\n//                                             toast.error((t('general.toast_server_error')) + ': ' +  error, {\n//                                                 position: toast.POSITION.BOTTOM_RIGHT\n//                                               })\n//                                             console.log('there was an error sending the query', error)\n//                                             setSubmitting(false)\n//                                           })\n//                                     }}\n//                                     >\n//                                     {({ isSubmitting, errors, values, setFieldTouched, setFieldValue, submitForm }) => (\n//                                       <ScheduleClassClasspassForm\n//                                         isSubmitting={isSubmitting}\n//                                         setFieldTouched={setFieldTouched}\n//                                         setFieldValue={setFieldValue}\n//                                         errors={errors}\n//                                         values={values}\n//                                         submitForm={submitForm}\n//                                       >\n//                                         {console.log(errors)}\n//                                         {console.log(values)}\n//                                         test\n//                                       </ScheduleClassClasspassForm>\n//                                     )}\n//                                 </Formik>\n//                               )}\n//                             </Mutation>\n//                             </Table.Col>\n//                           </Table.Row>\n//                         ))}\n//                       </Table.Body>\n//                     </Table>\n//                     </div>\n//                   </ContentCard>\n//                 </ClassEditBase>\n//             )}}\n//           }\n//         </Query>\n//       </div>\n//     </SiteWrapper>\n//     )\n//   }\n\n// };\n\nexport default withTranslation()(withRouter(ScheduleClassClasspasses))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Card,\n  Dimmer,\n  Grid,\n  Form,\n  Table,\n  Text\n} from \"tabler-react\"\n\n\nimport FormHelp from \"../../../../ui/FormHelp\"\n\n\nconst ScheduleClassSubscriptionForm = ({ t, history, match, isSubmitting, submitForm, errors, values, setFieldTouched, setFieldValue }) => (\n  <FoForm>\n    <Dimmer active={isSubmitting} loader={isSubmitting} >\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group className='mb-0'>\n            <Form.Label className=\"custom-switch\">\n              <Field \n                className=\"custom-switch-input\"\n                type=\"checkbox\" \n                name=\"enroll\" \n                onChange={() => {\n                  setFieldValue('enroll', !values.enroll)\n                  setFieldTouched('enroll', true)\n                  if (!values.enroll) {\n                    setFieldValue('attend', true)\n                    setFieldTouched('attend', true)\n                  }\n                  setTimeout(() => {submitForm()}, 200)\n                }}\n                checked={values.enroll} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('general.enroll')}</span>\n            </Form.Label>\n            <ErrorMessage name=\"enroll\" component=\"div\" />   \n          </Form.Group>  \n        </Grid.Col>\n        <Grid.Col>\n          <Form.Group className='mb-0'>\n            <Form.Label className=\"custom-switch\">\n              <Field \n                className=\"custom-switch-input\"\n                type=\"checkbox\" \n                name=\"shopBook\" \n                onChange={() => {\n                  setFieldValue('shopBook', !values.shopBook)\n                  setFieldTouched('shopBook', true)\n                  if (!values.shopBook) {\n                    setFieldValue('attend', true)\n                    setFieldTouched('attend', true)\n                  }\n                  setTimeout(() => {submitForm()}, 200)\n                }}\n                checked={values.shopBook} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('schedule.classes.subscriptions.shop_book')}</span>\n            </Form.Label>\n            <ErrorMessage name=\"shopBook\" component=\"div\" />   \n          </Form.Group>  \n        </Grid.Col>\n        <Grid.Col>\n          <Form.Group className='mb-0'>\n            <Form.Label className=\"custom-switch\">\n              <Field \n                className=\"custom-switch-input\"\n                type=\"checkbox\" \n                name=\"attend\" \n                disabled={((values.shopBook) || (values.enroll))}\n                onChange={() => {\n                  setFieldValue('attend', !values.attend)\n                  setFieldTouched('attend', true)\n                  setTimeout(() => {submitForm()}, 200)\n                }}\n                checked={values.attend} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('general.attend')}</span>\n            </Form.Label>\n            {/* Show message to inform user they can't disable attend while enroll or shopBook is enabled*/}\n            { ((values.shopBook) || (values.enroll)) ? <div>\n                <Text.Small>{t('schedule.classes.subscriptions.attend_disabled')}</Text.Small> { ' ' }\n                <FormHelp message={t('schedule.classes.subscriptions.attend_disabled_help')} />\n              </div> : \"\" }\n            <ErrorMessage name=\"attend\" component=\"div\" />   \n          </Form.Group>  \n        </Grid.Col>\n      </Grid.Row>\n    </Dimmer>\n  </FoForm>\n);\n\nexport default withTranslation()(withRouter(ScheduleClassSubscriptionForm))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const SCHEDULE_CLASS_SUBSCRIPTION_SCHEMA = Yup.object().shape({\n  enroll: Yup.boolean(),\n  shopBook: Yup.boolean(),\n  attend: Yup.boolean(),\n})\n","import { gql } from \"@apollo/client\"\n\nexport const GET_SCHEDULE_CLASS_SUBSCRIPTIONS_QUERY = gql`\n  query ScheduleItemOrganizationSubscriptionGroups($after: String, $before: String, $scheduleItem: ID!) {\n    scheduleItemOrganizationSubscriptionGroups(first: 100, before: $before, after: $after, scheduleItem:$scheduleItem) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          scheduleItem {\n            id\n          }\n          organizationSubscriptionGroup {\n            id\n            name\n          }\n          enroll\n          shopBook\n          attend\n        }\n      }\n    }\n    scheduleItem(id:$scheduleItem) {\n      id\n      frequencyType\n      frequencyInterval\n      organizationLocationRoom {\n        id\n        name\n        organizationLocation {\n          id\n          name\n        }\n      }\n      organizationClasstype {\n        id\n        name\n      }\n      organizationLevel {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      timeStart\n      timeEnd\n      displayPublic\n    }\n  }\n`\n\nexport const UPDATE_SCHEDULE_CLASS_SUBSCRIPTION = gql`\nmutation UpdateScheduleItemOrganizationSubscriptionGroup($input: UpdateScheduleItemOrganizationSubscriptionGroupInput!) {\n  updateScheduleItemOrganizationSubscriptionGroup(input:$input) {\n    scheduleItemOrganizationSubscriptionGroup {\n      id\n    } \n  }\n}\n`\n","// @flow\n\nimport React, { Component } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { Formik } from 'formik'\n\nimport {\n  Alert,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport { TimeStringToJSDateOBJ } from '../../../../../tools/date_tools'\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\nimport { class_edit_all_subtitle } from \"../tools\"\n\nimport ContentCard from \"../../../../general/ContentCard\"\nimport ClassEditBase from \"../ClassEditBase\"\nimport ScheduleClassSubscriptionForm from \"./ScheduleClassSubscriptionForm\"\n\nimport { SCHEDULE_CLASS_SUBSCRIPTION_SCHEMA } from './yupSchema'\nimport { GET_SCHEDULE_CLASS_SUBSCRIPTIONS_QUERY, UPDATE_SCHEDULE_CLASS_SUBSCRIPTION } from \"./queries\"\n\n\nfunction ScheduleClassSubscriptions({t, match, history}) {\n  const classId = match.params.class_id\n  const menuActiveLink = \"subscriptions\"\n  const cardTitle = t('schedule.classes.subscriptions.title')\n  const { loading, error, data, fetchMore } = useQuery(GET_SCHEDULE_CLASS_SUBSCRIPTIONS_QUERY, { \n    variables: { scheduleItem: classId }\n  })\n  const [ updateScheduleClassSubscription ] = useMutation(UPDATE_SCHEDULE_CLASS_SUBSCRIPTION)\n\n  const sidebarButton = <HasPermissionWrapper permission=\"add\" resource=\"scheduleitemsubscription\">\n    <Link to={\"/schedule/classes/all/subscriptions/\" + classId + \"/add\" } >\n      <Button color=\"primary btn-block mb-6\">\n      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('schedule.classes.subscriptions.add')}\n      </Button>\n    </Link>\n  </HasPermissionWrapper>\n\n  // Loading\n  if (loading) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n    >\n      <Dimmer active={true} loader={true} />\n    </ClassEditBase>\n  )\n  // Error\n  if (error) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n    >\n      <p>{t('schedule.classes.subscriptions.error_loading')}</p>\n    </ClassEditBase>\n  )\n\n  // Empty list\n  if (!data.scheduleItemOrganizationSubscriptionGroups.edges.length) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n    >\n      <p>{t('schedule.classes.subscriptions.empty_list')}</p>\n    </ClassEditBase>\n  )\n\n  return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      defaultCard={false} \n      sidebarButton={sidebarButton}\n    >\n      <ContentCard \n        cardTitle={cardTitle}\n        // headerContent={headerOptions}\n        pageInfo={data.scheduleItemOrganizationSubscriptionGroups.pageInfo}\n        onLoadMore={() => {\n        fetchMore({\n          variables: {\n            after: data.scheduleItemOrganizationSubscriptionGroups.pageInfo.endCursor\n          },\n          updateQuery: (previousResult, { fetchMoreResult }) => {\n            const newEdges = fetchMoreResult.scheduleItemOrganizationSubscriptionGroups.edges\n            const pageInfo = fetchMoreResult.scheduleItemOrganizationSubscriptionGroups.pageInfo\n\n            return newEdges.length\n              ? {\n                  // Put the new locations at the end of the list and update `pageInfo`\n                  // so we have the new `endCursor` and `hasNextPage` values\n                  data: { \n                    scheduleItemOrganizationSubscriptionGroups: {\n                      __typename: previousResult.scheduleItemOrganizationSubscriptionGroups.__typename,\n                      edges: [ ...previousResult.scheduleItemOrganizationSubscriptionGroups.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                }\n              : previousResult\n            }\n          })\n        }} >\n        <div>\n          <Table>\n            <Table.Header>\n              <Table.Row>\n                <Table.ColHeader>{t('general.subscription')}</Table.ColHeader>\n                <Table.ColHeader></Table.ColHeader>\n              </Table.Row>\n            </Table.Header>\n            <Table.Body>\n              {data.scheduleItemOrganizationSubscriptionGroups.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  {console.log(node)}\n                  <Table.Col key={v4()}> \n                    {node.organizationSubscriptionGroup.name}\n                  </Table.Col>\n                  <Table.Col>\n                    <Formik\n                      initialValues={{  \n                        enroll: node.enroll,\n                        shopBook: node.shopBook,\n                        attend: node.attend\n                      }}\n                      validationSchema={SCHEDULE_CLASS_SUBSCRIPTION_SCHEMA}\n                      onSubmit={(values, { setSubmitting }) => {\n                          console.log(values)\n                          updateScheduleClassSubscription({ \n                            variables: {\n                              input: {\n                                id: node.id,\n                                enroll: values.enroll,\n                                shopBook: values.shopBook,\n                                attend: values.attend\n                              }\n                            }, \n                            refetchQueries: [\n                              { query: GET_SCHEDULE_CLASS_SUBSCRIPTIONS_QUERY, \n                                variables: { scheduleItem: classId }\n                            }\n                          ]})\n                          .then(({ data }) => {\n                              console.log('got data', data);\n                              toast.success((t('schedule.classes.subscriptions.toast_edit_success')), {\n                                  position: toast.POSITION.BOTTOM_RIGHT\n                                })\n                              setSubmitting(false)\n                            }).catch((error) => {\n                              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                  position: toast.POSITION.BOTTOM_RIGHT\n                                })\n                              console.log('there was an error sending the query', error)\n                              setSubmitting(false)\n                            })\n                      }}\n                      >\n                      {({ isSubmitting, errors, values, setFieldTouched, setFieldValue, submitForm }) => (\n                        <ScheduleClassSubscriptionForm\n                          isSubmitting={isSubmitting}\n                          setFieldTouched={setFieldTouched}\n                          setFieldValue={setFieldValue}\n                          errors={errors}\n                          values={values}\n                          submitForm={submitForm}\n                        >\n                          {console.log(errors)}\n                          {console.log(values)}\n                        </ScheduleClassSubscriptionForm>\n                      )}\n                    </Formik>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n            </Table.Body>\n          </Table>\n          </div>\n        </ContentCard>\n      </ClassEditBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleClassSubscriptions))","import { gql } from \"@apollo/client\"\n\nexport const GET_SCHEDULE_CLASS_TEACHERS_QUERY = gql`\n  query ScheduleItemTeachers($after: String, $before: String, $scheduleItem: ID!) {\n    scheduleItemTeachers(first: 15, before: $before, after: $after, scheduleItem: $scheduleItem) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          account {\n            id\n            fullName\n          }\n          role\n          account2 {\n            id\n            fullName\n          }\n          role2\n          dateStart\n          dateEnd       \n        }\n      }\n    }\n    scheduleItem(id:$scheduleItem) {\n      id\n      frequencyType\n      frequencyInterval\n      organizationLocationRoom {\n        id\n        name\n        organizationLocation {\n          id\n          name\n        }\n      }\n      organizationClasstype {\n        id\n        name\n      }\n      organizationLevel {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      timeStart\n      timeEnd\n      displayPublic\n    }\n  }\n`\n\nexport const GET_SINGLE_SCHEDULE_CLASS_TEACHERS_QUERY = gql`\n  query ScheduleItemTeacher($before: String, $after: String, $id: ID!) {\n    scheduleItemTeacher(id: $id) {\n      id\n      account {\n        id\n        fullName\n      }\n      role\n      account2 {\n        id\n        fullName\n      }\n      role2\n      dateStart\n      dateEnd       \n    }\n    accounts(first: 100, before: $before, after: $after, isActive: true, teacher: true) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          fullName\n        }\n      }\n    }\n  }\n`\n\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query InputValues($after: String, $before: String) {\n    accounts(first: 15, before: $before, after: $after, isActive: true, teacher: true) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          fullName\n        }\n      }\n    }\n  }\n`\n\n\nexport const ADD_SCHEDULE_CLASS_TEACHER = gql`\nmutation CreateScheduleItemTeacher($input:CreateScheduleItemTeacherInput!) {\n  createScheduleItemTeacher(input:$input) {\n    scheduleItemTeacher {\n      id\n    } \n  }\n}\n`\n\n\nexport const UPDATE_SCHEDULE_CLASS_TEACHER = gql`\nmutation UpdateScheduleItemTeacher($input: UpdateScheduleItemTeacherInput!) {\n  updateScheduleItemTeacher(input:$input) {\n    scheduleItemTeacher {\n      id\n    } \n  }\n}\n`\n\n\nexport const DELETE_SCHEDULE_CLASS_TEACHER = gql`\nmutation DeleteScheduleClassTeacher($input: DeleteScheduleItemTeacherInput!) {\n  deleteScheduleItemTeacher(input: $input) {\n    ok\n  }\n}\n`","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport {\n  Icon,\n  Dimmer,\n  Button,\n  Table\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport { represent_teacher_role } from \"../tools\"\nimport confirm_delete from \"../../../../../tools/confirm_delete\"\n\nimport ContentCard from \"../../../../general/ContentCard\"\nimport ClassEditBase from \"../ClassEditBase\"\n\nimport { GET_SCHEDULE_CLASS_TEACHERS_QUERY, DELETE_SCHEDULE_CLASS_TEACHER } from \"./queries\"\n\n\nfunction ScheduleClassTeachers({ t, match, history}) {\n  const classId = match.params.class_id\n  const menuActiveLink = \"teachers\"\n  const cardTitle = t('schedule.classes.teachers.title')\n  const { loading, error, data, fetchMore } = useQuery(GET_SCHEDULE_CLASS_TEACHERS_QUERY, {\n    variables: {scheduleItem: classId}\n  })\n  const [ deleteScheduleItemTeacher ] = useMutation(DELETE_SCHEDULE_CLASS_TEACHER)\n\n  const ButtonAdd = <HasPermissionWrapper permission=\"add\" resource=\"scheduleitemteacher\">\n    <Link to={`/schedule/classes/all/teachers/${classId}/add` } >\n      <Button color=\"primary btn-block mb-6\">\n      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('schedule.classes.teachers.add')}\n      </Button>\n    </Link>\n  </HasPermissionWrapper>\n\n  // Loading\n  if (loading) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={ButtonAdd}\n    >\n      <Dimmer active={true} loader={true} />\n    </ClassEditBase>\n  )\n  // Error\n  if (error) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={ButtonAdd}\n    >\n      <p>{t('schedule.classes.teachers.error_loading')}</p>\n    </ClassEditBase>\n  )\n\n  // Empty list\n  if (!data.scheduleItemTeachers.edges.length) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={ButtonAdd}\n    >\n      <p>{t('schedule.classes.teachers.empty_list')}</p>\n    </ClassEditBase>\n  )\n\n  return (\n    <ClassEditBase \n    menuActiveLink={menuActiveLink} \n    defaultCard={false}\n    sidebarButton={ButtonAdd}\n    >\n      <ContentCard \n        cardTitle={cardTitle}\n        pageInfo={data.scheduleItemTeachers.pageInfo}\n        onLoadMore={() => {\n        fetchMore({\n          variables: {\n            after: data.scheduleItemTeachers.pageInfo.endCursor\n          },\n          updateQuery: (previousResult, { fetchMoreResult }) => {\n            const newEdges = fetchMoreResult.scheduleItemTeachers.edges\n            const pageInfo = fetchMoreResult.scheduleItemTeachers.pageInfo\n\n            return newEdges.length\n              ? {\n                  // Put the new locations at the end of the list and update `pageInfo`\n                  // so we have the new `endCursor` and `hasNextPage` values\n                  data: { \n                    scheduleItemTeachers: {\n                      __typename: previousResult.scheduleItemTeachers.__typename,\n                      edges: [ ...previousResult.scheduleItemTeachers.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                }\n              : previousResult\n            }\n          })\n        }} >\n        <div>\n          <Table>\n            <Table.Header>\n              <Table.Row>\n                <Table.ColHeader>{t('general.date_start')}</Table.ColHeader>\n                <Table.ColHeader>{t('general.date_end')}</Table.ColHeader>\n                <Table.ColHeader>{t('general.teacher')}</Table.ColHeader>\n                <Table.ColHeader>{t('general.teacher_2')}</Table.ColHeader>\n                <Table.ColHeader></Table.ColHeader>\n                <Table.ColHeader></Table.ColHeader>\n              </Table.Row>\n            </Table.Header>\n            <Table.Body>\n              {data.scheduleItemTeachers.edges.map(({ node }) => (\n                <Table.Row key={v4()}>\n                  {console.log(node)}\n                  <Table.Col key={v4()}> \n                    {moment(node.dateStart).format('LL')}\n                  </Table.Col>\n                  <Table.Col key={v4()}> \n                    {(node.dateEnd) ? moment(node.dateEnd).format('LL') : \"\"}\n                  </Table.Col>\n                  <Table.Col>\n                    {node.account.fullName} <br />\n                    <span className=\"text-muted\">\n                      {represent_teacher_role(t, node.role)}\n                    </span>\n                  </Table.Col>\n                  <Table.Col>\n                    {node.account2 ?\n                      <span>\n                        {node.account2.fullName} <br />\n                        <span className=\"text-muted\">\n                          {represent_teacher_role(t, node.role2)}\n                        </span>\n                      </span> : \"\"\n                    }\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <Link to={`/schedule/classes/all/teachers/${classId}/edit/${node.id}`}>\n                      <Button className='btn-sm' \n                              color=\"secondary\"\n                      >\n                        {t('general.edit')}\n                      </Button>\n                    </Link>\n                  </Table.Col>\n                  <Table.Col className=\"text-right\" key={v4()}>\n                    <button className=\"icon btn btn-link btn-sm\" \n                        title={t('general.delete')} \n                        href=\"\"\n                        onClick={() => {\n                          confirm_delete({\n                            t: t,\n                            msgConfirm: t('schedule.classes.teachers.delete_confirm_msg'),\n                            msgDescription: <p>{t('schedule.classes.teachers.delete_confirm_description')}</p>,\n                            msgSuccess: t('schedule.classes.teachers.deleted'),\n                            deleteFunction: deleteScheduleItemTeacher,\n                            functionVariables: { variables: {\n                              input: {\n                                id: node.id\n                              }\n                            }, refetchQueries: [\n                              {query: GET_SCHEDULE_CLASS_TEACHERS_QUERY, variables: { scheduleItem: match.params.class_id }}\n                            ]}\n                        })}}\n                    >\n                      <span className=\"text-red\">\n                        <Icon prefix=\"fe\" name=\"trash-2\" />\n                      </span>\n                    </button>\n                  </Table.Col>\n                </Table.Row>\n              ))}\n            </Table.Body>\n          </Table>\n          </div>\n        </ContentCard>      \n    </ClassEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleClassTeachers))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const SCHEDULE_CLASS_TEACHER_SCHEMA = Yup.object().shape({\n  account: Yup.string()\n    .required(t('yup.field_required')),\n  role: Yup.string(),\n  account2: Yup.string(),\n  role2: Yup.string(),\n  dateStart: Yup.date()\n    .required(t('yup.field_required')),\n  // dateEnd: Yup.date()\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Form,\n} from \"tabler-react\"\n\n\nimport CSDatePicker from \"../../../../ui/CSDatePicker\"\n\nconst ScheduleClassTeacherForm = ({ t, history, match, isSubmitting, errors, values, inputData, returnUrl, setFieldTouched, setFieldValue }) => (\n  <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.date_start')}>\n              <CSDatePicker \n                selected={values.dateStart}\n                onChange={(date) => setFieldValue(\"dateStart\", date)}\n                onBlur={() => setFieldTouched(\"dateStart\", true)}\n              />\n              <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.date_end')}>\n              <CSDatePicker \n                selected={values.dateEnd}\n                onChange={(date) => setFieldValue(\"dateEnd\", date)}\n                onBlur={() => setFieldTouched(\"dateEnd\", true)}\n              />\n              <ErrorMessage name=\"dateEnd\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.teacher')}>\n              <Field component=\"select\" \n                      name=\"account\" \n                      className={(errors.account) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                {console.log(\"query data in schedule class teacher add:\")}\n                {console.log(inputData)}\n                <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n                {inputData.accounts.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.fullName}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"account\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.teacher_role')}>\n              <Field component=\"select\" \n                      name=\"role\" \n                      className={(errors.role) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                <option value=\"\" key={v4()}></option>\n                <option value=\"SUB\" key={v4()}>{t('schedule.classes.teacher_roles.sub')}</option>\n                <option value=\"ASSISTANT\" key={v4()}>{t('schedule.classes.teacher_roles.assistant')}</option>\n                <option value=\"KARMA\" key={v4()}>{t('schedule.classes.teacher_roles.karma')}</option>\n              </Field>\n              <ErrorMessage name=\"role\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.teacher2')}>\n              <Field component=\"select\" \n                      name=\"account2\" \n                      className={(errors.account2) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                <option value=\"\" key={v4()}></option>\n                {inputData.accounts.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.fullName}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"account2\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.teacher_role2')}>\n              <Field component=\"select\" \n                      name=\"role2\" \n                      className={(errors.role2) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                <option value=\"\" key={v4()}></option>\n                <option value=\"SUB\" key={v4()}>{t('schedule.classes.teacher_roles.sub')}</option>\n                <option value=\"ASSISTANT\" key={v4()}>{t('schedule.classes.teacher_roles.assistant')}</option>\n                <option value=\"KARMA\" key={v4()}>{t('schedule.classes.teacher_roles.karma')}</option>\n              </Field>\n              <ErrorMessage name=\"role2\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Button color=\"link\" onClick={() => history.push(returnUrl)} role=\"button\">\n              {t('general.cancel')}\n          </Button>\n      </Card.Footer>\n  </FoForm>\n);\n\nexport default withTranslation()(withRouter(ScheduleClassTeacherForm))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\n\nconst ScheduleClassTeacherBack = ({ t, classId }) => (\n  <Link to={\"/schedule/classes/all/teachers/\" + classId } >\n    <Button color=\"primary btn-block mb-6\">\n      <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n    </Button>\n  </Link>\n)\n\nexport default withTranslation()(withRouter(ScheduleClassTeacherBack))","// @flow\n\nimport React from 'react'\nimport { useMutation, useQuery } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n\nimport { GET_SCHEDULE_CLASS_TEACHERS_QUERY, GET_INPUT_VALUES_QUERY, ADD_SCHEDULE_CLASS_TEACHER } from './queries'\nimport { SCHEDULE_CLASS_TEACHER_SCHEMA } from './yupSchema'\nimport ScheduleClassTeacherForm from './ScheduleClassTeacherForm'\nimport { dateToLocalISO } from '../../../../../tools/date_tools'\n\nimport ClassEditBase from \"../ClassEditBase\"\nimport ScheduleClassTeacherBack from \"./ScheduleClassTeacherBack\"\n\n\nfunction ScheduleClassTeacherAdd({ t, history, match }) {\n  const classId = match.params.class_id\n  const returnUrl = `/schedule/classes/all/teachers/${classId}`\n  const cardTitle = t('schedule.classes.teachers.title_add')\n  const menuActiveLink = \"teachers\" \n  const sidebarButton = <ScheduleClassTeacherBack classId={classId} />\n\n  const {loading, error, data} = useQuery(GET_INPUT_VALUES_QUERY)\n  const [addScheduleClassTeacher] = useMutation(ADD_SCHEDULE_CLASS_TEACHER)\n\n  if (loading) return (\n    <ClassEditBase\n      cardTitle={cardTitle}\n      menuActiveLink={menuActiveLink}\n      sidebarButton={sidebarButton}\n    >\n      <p>{t('general.loading_with_dots')}</p>\n    </ClassEditBase>\n  )\n\n  if (error) return (\n    <ClassEditBase\n      cardTitle={cardTitle}\n      menuActiveLink={menuActiveLink}\n      sidebarButton={sidebarButton}\n    >\n      <p>{t('general.error_sad_smiley')}</p>\n    </ClassEditBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n\n  return (\n    <ClassEditBase\n      cardTitle={cardTitle}\n      menuActiveLink={menuActiveLink}\n      sidebarButton={sidebarButton}\n    >\n      <Formik\n        initialValues={{ \n          price: \"\", \n          dateStart: new Date() ,\n          account: \"\",\n          role: \"\",\n          account2: \"\",\n          role2: \"\",\n        }}\n        validationSchema={SCHEDULE_CLASS_TEACHER_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n\n            let dateEnd\n            if (values.dateEnd) {\n              dateEnd = dateToLocalISO(values.dateEnd)\n            } else {\n              dateEnd = values.dateEnd\n            }\n\n            addScheduleClassTeacher({ variables: {\n              input: {\n                scheduleItem: match.params.class_id,\n                account: values.account,\n                role: values.role,\n                account2: values.account2,\n                role2: values.role2,\n                dateStart: dateToLocalISO(values.dateStart),\n                dateEnd: dateEnd\n              }\n            }, refetchQueries: [\n                {query: GET_SCHEDULE_CLASS_TEACHERS_QUERY, variables: { scheduleItem: match.params.class_id }},\n                // {query: GET_SUBSCRIPTIONS_QUERY, variables: {\"archived\": false }},\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data);\n                history.push(returnUrl)\n                toast.success((t('schedule.classes.teachers.toast_add_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <ScheduleClassTeacherForm\n            inputData={inputData}\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            returnUrl={returnUrl}\n          />\n        )}\n      </Formik>\n    </ClassEditBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleClassTeacherAdd))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SCHEDULE_CLASS_TEACHERS_QUERY, GET_SINGLE_SCHEDULE_CLASS_TEACHERS_QUERY, UPDATE_SCHEDULE_CLASS_TEACHER } from './queries'\nimport { SCHEDULE_CLASS_TEACHER_SCHEMA } from './yupSchema'\nimport ScheduleClassTeacherForm from './ScheduleClassTeacherForm'\nimport { dateToLocalISO } from '../../../../../tools/date_tools'\n\nimport ClassEditBase from \"../ClassEditBase\"\nimport ScheduleClassTeacherBack from \"./ScheduleClassTeacherBack\"\n\n\nfunction ScheduleClassTeacherEdit({ t, match, history }) {\n  const id = match.params.id\n  const classId = match.params.class_id\n  const returnUrl = `/schedule/classes/all/teachers/${classId}`\n  const cardTitle = t('schedule.classes.teachers.title_edit')\n  const menuActiveLink = \"teachers\"\n  const sidebarButton = <ScheduleClassTeacherBack classId={classId} />\n\n  const {loading, error, data} = useQuery(GET_SINGLE_SCHEDULE_CLASS_TEACHERS_QUERY, {\n    variables: { id: id }\n  })\n  const [updateScheduleClassTeacher] = useMutation(UPDATE_SCHEDULE_CLASS_TEACHER)\n\n  if (loading) return (\n    <ClassEditBase\n      cardTitle={cardTitle}\n      menuActiveLink={menuActiveLink}\n      sidebarButton={sidebarButton}\n    >\n      <p>{t('general.loading_with_dots')}</p>\n    </ClassEditBase>\n  )\n\n  if (error) return (\n    <ClassEditBase\n      cardTitle={cardTitle}\n      menuActiveLink={menuActiveLink}\n      sidebarButton={sidebarButton}\n    >\n      <p>{t('general.error_sad_smiley')}</p>\n    </ClassEditBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n  const initialData = data.scheduleItemTeacher\n\n  let initialAccount2 = \"\"\n  if (initialData.account2) {\n    initialAccount2 =  initialData.account2.id\n  } \n\n  // DatePicker doesn't like a string as an initial value\n  // This makes it a happy DatePicker :)\n  let dateStart = null\n  if (initialData.dateStart) {\n    dateStart = new Date(initialData.dateStart)\n  }\n  \n  let dateEnd = null\n  if (initialData.dateEnd) {\n    dateEnd = new Date(initialData.dateEnd)\n  }\n\n  return (\n    <ClassEditBase \n      cardTitle={cardTitle}\n      menuActiveLink=\"teachers\"\n      sidebarButton={sidebarButton}\n    >\n      <Formik\n        initialValues={{  \n          dateStart: dateStart,\n          dateEnd: dateEnd,\n          account: initialData.account.id,\n          role: initialData.role,\n          account2: initialAccount2,\n          role2: initialData.role2,\n        }}\n        validationSchema={SCHEDULE_CLASS_TEACHER_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n\n            let dateEnd\n            if (values.dateEnd) {\n              dateEnd = dateToLocalISO(values.dateEnd)\n            } else {\n              dateEnd = values.dateEnd\n            }\n\n            updateScheduleClassTeacher({ variables: {\n              input: {\n                id: match.params.id,\n                account: values.account,\n                role: values.role,\n                account2: values.account2,\n                role2: values.role2,\n                dateStart: dateToLocalISO(values.dateStart),\n                dateEnd: dateEnd\n              }\n            }, refetchQueries: [\n                {query: GET_SCHEDULE_CLASS_TEACHERS_QUERY, variables: { scheduleItem: match.params.class_id }},\n                // {query: GET_SUBSCRIPTIONS_QUERY, variables: {\"archived\": false }},\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data);\n                toast.success((t('schedule.classes.teachers.toast_edit_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <ScheduleClassTeacherForm\n            inputData={inputData}\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            returnUrl={returnUrl}\n          >\n            {console.log(errors)}\n          </ScheduleClassTeacherForm>\n        )}\n      </Formik>\n    </ClassEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleClassTeacherEdit))","import CSLS from \"../../../../../tools/cs_local_storage\"\nimport { withRouter } from \"react-router\"\n\nexport function get_accounts_query_variables() {\n  let queryVars = {\n    teacher: undefined,\n    employee: undefined,\n    searchName: undefined\n  }\n\n  let search = localStorage.getItem(CSLS.SCHEDULE_CLASSES_CLASS_ATTENDANCE_SEARCH)\n  queryVars.searchName = search\n\n  console.log(queryVars)\n\n  return queryVars\n}\n\nexport function get_attendance_list_query_variables(schedule_item_id, date) {\n  return {\n    scheduleItem: schedule_item_id,\n    date: date\n  }\n}\n","import moment from 'moment'\n\nexport function class_subtitle({t, location, locationRoom, classtype, timeStart, date}) {\n  return t('general.class') + ': ' + \n         location + ' (' + locationRoom + ') - ' + \n         classtype + ' @ ' + \n         moment(date).format('LL') + ' ' + moment(timeStart).format('LT')\n}\n\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\n\nconst ScheduleClassBack = ({ t, classId }) => (\n  <Link to={\"/schedule/classes/\"} >\n    <Button color=\"link mr-2\">\n      <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n    </Button>\n  </Link>\n)\n\nexport default withTranslation()(withRouter(ScheduleClassBack))","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\n\n\nimport {\n  List\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\n\nfunction ClassMenu ({ t, scheduleItemId, class_date, activeLink }) {\n  let attendance_active = false\n  let edit_active = false\n\n  switch (activeLink) {\n    case \"attendance\":\n      attendance_active = true\n      break\n    case \"edit\":\n      edit_active = true\n      break\n  }\n\n  return (\n    <div>\n      <h5>{t(\"general.menu\")}</h5>\n      <List.Group transparent={true}>   \n        <HasPermissionWrapper \n            resource=\"scheduleitemattendance\"\n            permission=\"view\" \n        >\n          <List.GroupItem\n              key={v4()}\n              className=\"d-flex align-items-center\"\n              to={\"#/schedule/classes/class/attendance/\" + scheduleItemId + \"/\" + class_date}\n              icon=\"check-circle\"\n              active={attendance_active}\n              >\n              {t(\"general.attendance\")}\n          </List.GroupItem>\n        </HasPermissionWrapper>\n        <HasPermissionWrapper \n            resource=\"scheduleclassweeklyotc\"\n            permission=\"change\" \n        >\n          <List.GroupItem\n              key={v4()}\n              className=\"d-flex align-items-center\"\n              to={\"#/schedule/classes/class/edit/\" + scheduleItemId + \"/\" + class_date}\n              icon=\"edit-3\"\n              active={edit_active}\n              >\n              {t(\"general.edit\")}\n          </List.GroupItem>\n        </HasPermissionWrapper>\n\n      </List.Group>\n    </div>\n  )\n}\n\nexport default withTranslation()(ClassMenu)","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { get_attendance_list_query_variables } from \"./tools\"\nimport { DELETE_SCHEDULE_CLASS_ATTENDANCE, GET_SCHEDULE_CLASS_ATTENDANCE_QUERY } from \"./queries\"\nimport confirm_delete from \"../../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\n\nfunction ScheduleClassAttendanceDelete({t, match, node}) {\n  const schedule_item_id = match.params.class_id\n  const class_date = match.params.date\n  const [deleteScheduleItemAttendance, { data }] = useMutation(DELETE_SCHEDULE_CLASS_ATTENDANCE)\n\n    return (\n      <button className=\"icon btn btn-link btn-sm pull-right\" \n        title={t('general.delete')} \n        href=\"\"\n        onClick={() => {\n          confirm_delete({\n            t: t,\n            msgConfirm: t(\"schedule.classes.class.attendance.delete_confirm_msg\"),\n            msgDescription: <p>{node.account.fullName}</p>,\n            msgSuccess: t('schedule.classes.class.attendance.delete_success'),\n            deleteFunction: deleteScheduleItemAttendance,\n            functionVariables: { \n              variables: {\n                input: {\n                  id: node.id\n                }\n              }, \n              refetchQueries: [\n                { query: GET_SCHEDULE_CLASS_ATTENDANCE_QUERY, \n                  variables: get_attendance_list_query_variables(schedule_item_id, class_date) },\n              ]\n            }\n          })\n      }}>\n        <span className=\"text-red\"><Icon prefix=\"fe\" name=\"trash-2\" /></span>\n      </button>\n    )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleClassAttendanceDelete))\n","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNTS_QUERY = gql`\n  query Accounts(\n    $after: String, \n    $before: String, \n    $searchName: String,\n    $teacher: Boolean,\n    $employee: Boolean\n  ) {\n    accounts(\n      first: 25, \n      before: $before, \n      after: $after, \n      isActive: true, \n      fullName_Icontains: $searchName,\n      customer: true,\n      teacher: $teacher,\n      employee: $employee\n    ) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          fullName\n          email\n          isActive\n        }\n      }\n    }\n  }\n`","// @flow\n\nimport React, { Component, useState } from 'react'\nimport { useQuery, useMutation, useLazyQuery } from '@apollo/client'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport {\n  Alert,\n  Dropdown,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport { TimeStringToJSDateOBJ } from '../../../../../tools/date_tools'\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\nimport { get_attendance_list_query_variables } from \"./tools\"\nimport confirm_delete from \"../../../../../tools/confirm_delete\"\n\nimport { get_accounts_query_variables } from \"./tools\"\nimport { class_subtitle } from \"../tools\"\n\nimport ScheduleClassBack from \"../ScheduleClassBack\"\nimport ClassMenu from \"../ClassMenu\"\nimport ContentCard from \"../../../../general/ContentCard\"\nimport InputSearch from \"../../../../general/InputSearch\"\nimport BadgeBookingStatus from \"../../../../ui/BadgeBookingStatus\"\nimport ScheduleClassAttendanceDelete from \"./ScheduleClassAttendanceDelete\"\n// import ClassEditBase from \"../ClassEditBase\"\n\nimport { GET_ACCOUNTS_QUERY } from \"../../../../../queries/accounts/account_search_queries\"\nimport { GET_SCHEDULE_CLASS_ATTENDANCE_QUERY, UPDATE_SCHEDULE_ITEM_ATTENDANCE } from \"./queries\"\nimport CSLS from \"../../../../../tools/cs_local_storage\"\n\n\nfunction setAttendanceStatus({t, match, updateAttendance, node, status}) {\n  const schedule_item_id = match.params.class_id\n  const class_date = match.params.date\n\n  updateAttendance({\n    variables: { \n      input: {\n        id: node.id, \n        bookingStatus: status\n      }\n    },\n    refetchQueries: [\n      {query: GET_SCHEDULE_CLASS_ATTENDANCE_QUERY, \n        variables: get_attendance_list_query_variables(schedule_item_id, class_date)}\n    ]\n  }).then(({ data }) => {\n    console.log('got data', data);\n    toast.success(\n      t('schedule.classes.class.attendance.status_saved'), {\n        position: toast.POSITION.BOTTOM_RIGHT\n      })\n  }).catch((error) => {\n    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n        position: toast.POSITION.BOTTOM_RIGHT\n      })\n    console.log('there was an error sending the query', error);\n  })\n}\n\n\nfunction ScheduleClassAttendance({ t, match, history }) {\n  const [showSearch, setShowSearch] = useState(false)\n  const return_url = \"/schedule/classes/\"\n  const schedule_item_id = match.params.class_id\n  const class_date = match.params.date\n  const { refetch: refetchAttendance, loading: queryAttendanceLoading, error: queryAttendanceError, data: queryAttendanceData } = useQuery(\n    GET_SCHEDULE_CLASS_ATTENDANCE_QUERY, {\n      variables: get_attendance_list_query_variables(schedule_item_id, class_date)\n    }\n  )\n  const [ updateAttendance, \n    { loading: mutationAttendanceLoading, error: mutationAttendanceError },\n  ] = useMutation(UPDATE_SCHEDULE_ITEM_ATTENDANCE)\n\n  const [ getAccounts, \n         { refetch: refetchAccounts, \n           fetchMore: fetchMoreAccounts,\n           loading: queryAccountsLoading, \n           error: queryAccountsError, \n           data: queryAccountsData \n         }] = useLazyQuery( GET_ACCOUNTS_QUERY )\n\n  console.log('queryAccountsData')\n  console.log(queryAccountsData)\n\n  // const [createInvoice, { data }] = useMutation(CREATE_ACCOUNT_INVOICE, {\n  //   // onCompleted = () => history.push('/finance/invoices/edit/')\n  // }) \n\n  // Query\n  // Loading\n  if (queryAttendanceLoading) return <p>{t('general.loading_with_dots')}</p>\n  // Error\n  if (queryAttendanceError) {\n    console.log(queryAttendanceError)\n    return <p>{t('general.error_sad_smiley')}</p>\n  }\n  \n  console.log(queryAttendanceData)\n  let checkedInIds = []\n  queryAttendanceData.scheduleItemAttendances.edges.map(({ node }) => (\n    checkedInIds.push(node.account.id)\n  ))\n  console.log(checkedInIds)\n\n  const scheduleItem = queryAttendanceData.scheduleItem\n  const subtitle = class_subtitle({\n    t: t,\n    location: scheduleItem.organizationLocationRoom.organizationLocation.name, \n    locationRoom: scheduleItem.organizationLocationRoom.name,\n    classtype: scheduleItem.organizationClasstype.name, \n    timeStart: TimeStringToJSDateOBJ(scheduleItem.timeStart), \n    date: class_date\n  })\n  \n  \n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('schedule.title')} subTitle={subtitle}>\n            <div className=\"page-options d-flex\">       \n              <ScheduleClassBack />\n              <InputSearch \n                initialValueKey={CSLS.SCHEDULE_CLASSES_CLASS_ATTENDANCE_SEARCH}\n                placeholder=\"Search...\"\n                onChange={(value) => {\n                  console.log(value)\n                  localStorage.setItem(CSLS.SCHEDULE_CLASSES_CLASS_ATTENDANCE_SEARCH, value)\n                  if (value) {\n                    // {console.log('showSearch')}\n                    // {console.log(showSearch)}\n                    setShowSearch(true)\n                    getAccounts({ variables: get_accounts_query_variables()})\n                  } else {\n                    setShowSearch(false)\n                  }\n                }}\n              />\n            </div>\n          </Page.Header>\n          <Grid.Row>\n              <Grid.Col md={9}>\n                {/* Search results */}\n                {(showSearch && (queryAccountsData) && (!queryAccountsLoading) && (!queryAccountsError)) ?\n                  <ContentCard cardTitle={t('general.search_results')}\n                              pageInfo={queryAccountsData.accounts.pageInfo}\n                              onLoadMore={() => {\n                                fetchMoreAccounts({\n                                  variables: {\n                                  after: queryAccountsData.accounts.pageInfo.endCursor\n                                },\n                                updateQuery: (previousResult, { fetchMoreResult }) => {\n                                  const newEdges = fetchMoreResult.accounts.edges\n                                  const pageInfo = fetchMoreResult.accounts.pageInfo \n\n                                  return newEdges.length\n                                    ? {\n                                        // Put the new accounts at the end of the list and update `pageInfo`\n                                        // so we have the new `endCursor` and `hasNextPage` values\n                                        queryAccountsData: {\n                                          accounts: {\n                                            __typename: previousResult.accounts.__typename,\n                                            edges: [ ...previousResult.accounts.edges, ...newEdges ],\n                                            pageInfo\n                                          }\n                                        }\n                                      }\n                                    : previousResult\n                                }\n                              })\n                            }} >\n                    { (!queryAccountsData.accounts.edges.length) ? \n                      t('schedule.classes.class.attendance.search_result_empty') : \n                      <Table>\n                        <Table.Header>\n                          <Table.Row key={v4()}>\n                            <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                            <Table.ColHeader>{t('general.email')}</Table.ColHeader>\n                            <Table.ColHeader></Table.ColHeader>\n                          </Table.Row>\n                        </Table.Header>\n                        <Table.Body>\n                          {queryAccountsData.accounts.edges.map(({ node }) => (\n                            <Table.Row key={v4()}>\n                              <Table.Col key={v4()}>\n                                {node.fullName}\n                              </Table.Col>\n                              <Table.Col key={v4()}>\n                                {node.email}\n                              </Table.Col>\n                              <Table.Col key={v4()}>\n                                {(checkedInIds.includes(node.id)) ? \n                                 <span className=\"pull-right\">{t(\"schedule.classes.class.attendance.search_results_already_checked_in\")}</span> :\n                                  <Link to={\"/schedule/classes/class/book/\" + schedule_item_id + \"/\" + class_date + \"/\" + node.id}>\n                                    <Button color=\"secondary pull-right\">\n                                      {t('general.checkin')} <Icon name=\"chevron-right\" />\n                                    </Button>\n                                  </Link>       \n                                }   \n                              </Table.Col>\n                            </Table.Row>\n                          ))}\n                        </Table.Body>\n                      </Table>\n                    }\n                  </ContentCard>\n                  : \"\"\n                }\n                {/* Attendance */}\n                <ContentCard cardTitle={t('general.attendance')}\n                             pageInfo={queryAttendanceData.scheduleItemAttendances.pageInfo}\n                             onLoadMore={() => {\n                                fetchMoreAccounts({\n                                variables: {\n                                  after: queryAttendanceData.scheduleItemAttendances.pageInfo.endCursor\n                                },\n                                updateQuery: (previousResult, { fetchMoreResult }) => {\n                                  const newEdges = fetchMoreResult.scheduleItemAttendances.edges\n                                  const pageInfo = fetchMoreResult.scheduleItemAttendances.pageInfo \n\n                                  return newEdges.length\n                                    ? {\n                                        // Put the new scheduleItemAttendances at the end of the list and update `pageInfo`\n                                        // so we have the new `endCursor` and `hasNextPage` values\n                                        queryAttendanceData: {\n                                          scheduleItemAttendances: {\n                                            __typename: previousResult.scheduleItemAttendances.__typename,\n                                            edges: [ ...previousResult.scheduleItemAttendances.edges, ...newEdges ],\n                                            pageInfo\n                                          }\n                                        }\n                                      }\n                                    : previousResult\n                                }\n                              })\n                            }} >\n                  <Table>\n                    <Table.Header>\n                      <Table.Row key={v4()}>\n                        <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                        <Table.ColHeader>{t('general.booking_status')}</Table.ColHeader>\n                        <Table.ColHeader></Table.ColHeader>\n                      </Table.Row>\n                    </Table.Header>\n                    <Table.Body>\n                      {queryAttendanceData.scheduleItemAttendances.edges.map(({ node }) => (\n                          <Table.Row key={v4()}>\n                            <Table.Col>\n                              {node.account.fullName}\n                            </Table.Col>\n                            <Table.Col>\n                              <BadgeBookingStatus status={node.bookingStatus} />\n                            </Table.Col>\n                            <Table.Col>\n                              {/* Delete */}\n                              <ScheduleClassAttendanceDelete node={node} />\n                              {/* Status dropdown */}\n                              <Dropdown\n                                key={v4()}\n                                className=\"pull-right\"\n                                type=\"button\"\n                                toggle\n                                color=\"secondary btn-sm\"\n                                triggerContent={t(\"general.status\")}\n                                items={[\n                                  // <HasPermissionWrapper key={v4()} permission=\"change\" resource=\"scheduleitemattendance\">\n                                  //   <Dropdown.Item\n                                  //     key={v4()}\n                                  //     icon=\"check\"\n                                  //     onClick={() => {\n                                  //       setAttendanceStatus({\n                                  //         t: t, \n                                  //         updateAttendance: updateAttendance,\n                                  //         node: node,\n                                  //         status: 'ATTENDING'\n                                  //       })\n                                  //       refetchAttendance()\n                                  //     }}>\n                                  //       {t('schedule.classes.class.attendance.booking_status.ATTENDING')}\n                                  //   </Dropdown.Item>\n                                  // </HasPermissionWrapper>,\n                                  <HasPermissionWrapper key={v4()} permission=\"change\" resource=\"scheduleitemattendance\">\n                                    <Dropdown.Item\n                                      key={v4()}\n                                      icon=\"calendar\"\n                                      onClick={() => {\n                                        setAttendanceStatus({\n                                          t: t, \n                                          match: match,\n                                          updateAttendance: updateAttendance,\n                                          node: node,\n                                          status: 'BOOKED'\n                                        })\n                                      }}>\n                                        {t('schedule.classes.class.attendance.booking_status.BOOKED')}\n                                    </Dropdown.Item>\n                                  </HasPermissionWrapper>,\n                                  <HasPermissionWrapper key={v4()} permission=\"change\" resource=\"scheduleitemattendance\">\n                                    <Dropdown.Item\n                                      key={v4()}\n                                      icon=\"x\"\n                                      onClick={() => {\n                                        setAttendanceStatus({\n                                          t: t, \n                                          match: match,\n                                          updateAttendance: updateAttendance,\n                                          node: node,\n                                          status: 'CANCELLED'\n                                        })\n                                      }}>\n                                        {t('schedule.classes.class.attendance.booking_status.CANCELLED')}\n                                    </Dropdown.Item>\n                                  </HasPermissionWrapper>,\n                                ]}\n                              />\n                              {(node.bookingStatus == \"BOOKED\") ?\n                                <HasPermissionWrapper key={v4()} permission=\"change\" resource=\"scheduleitemattendance\">\n                                  <Button\n                                    key={v4()}\n                                    className=\"pull-right\"\n                                    color=\"success\"\n                                    size=\"sm\"\n                                    onClick={() => {\n                                      setAttendanceStatus({\n                                        t: t, \n                                        match: match,\n                                        updateAttendance: updateAttendance,\n                                        node: node,\n                                        status: 'ATTENDING'\n                                      })\n                                    }}>\n                                      {t('general.checkin')}\n                                  </Button>\n                                </HasPermissionWrapper>  : \"\" }\n                            </Table.Col>\n                          </Table.Row>\n                        ))}\n                    </Table.Body>\n                  </Table>\n                </ContentCard>\n              </Grid.Col>\n              <Grid.Col md={3}>\n                <ClassMenu \n                  scheduleItemId={schedule_item_id}\n                  class_date={class_date}\n                  activeLink=\"attendance\"\n                />\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleClassAttendance))\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\n\nconst ScheduleClassBookBack = ({ t, classId, date }) => (\n  <Link to={\"/schedule/classes/class/attendance/\" + classId + \"/\" + date} >\n    <Button color=\"primary btn-block mb-6\">\n      <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n    </Button>\n  </Link>\n)\n\nexport default withTranslation()(withRouter(ScheduleClassBookBack))","import { gql } from \"@apollo/client\"\n\n\nexport const GET_BOOKING_OPTIONS_QUERY = gql`\n  query ScheduleClassBookingOptions($account: ID!, $scheduleItem:ID!, $date:Date!, $listType:String!) {\n    scheduleClassBookingOptions(account: $account, scheduleItem: $scheduleItem, date:$date, listType:$listType) {\n      date\n      account {\n        id\n        fullName\n      }\n      alreadyBooked\n      scheduleItem {\n        frequencyType\n        frequencyInterval\n        organizationLocationRoom {\n          id\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n        organizationClasstype {\n          id\n          name\n        }\n        organizationLevel {\n          id\n          name\n        }\n        dateStart\n        dateEnd\n        timeStart\n        timeEnd\n      }\n    \tscheduleItemPrices {\n        organizationClasspassDropin {\n          id\n          name\n          priceDisplay\n        }\n        organizationClasspassTrial {\n          id\n          name\n          priceDisplay\n        }\n      }\n      classpasses {\n        bookingType \n        allowed\n        accountClasspass {\n          id\n          dateStart\n          dateEnd\n          classesRemainingDisplay\n          organizationClasspass {\n            id\n            name\n          }\n        }\n      }\n      subscriptions {\n        bookingType\n        allowed\n        blocked\n        paused\n        accountSubscription {\n          id\n          dateStart\n          dateEnd\n          organizationSubscription {\n            id\n            name\n          }\n          creditTotal\n        }\n      }\n    }\n  }\n`\n\n\nexport const CREATE_SCHEDULE_ITEM_ATTENDANCE = gql`\n  mutation CreateScheduleItemAttendance($input: CreateScheduleItemAttendanceInput!) {\n    createScheduleItemAttendance(input:$input) {\n      scheduleItemAttendance {\n        id\n      }\n    }\n  }\n`","export function getUrlFromReturnTo({returnTo, schedule_item_id, class_date, locationId}) {\n  let return_url\n\n  if (returnTo == \"schedule_classes\") {\n    return_url = '/schedule/classes/class/attendance/' + schedule_item_id + \"/\" + class_date\n  } else if (returnTo == \"selfcheckin\") {\n    return_url = '/selfcheckin/checkin/' + locationId + \"/\" + schedule_item_id + \"/\" + class_date\n  }\n  \n  return return_url\n}","// @flow\n\nimport React from 'react'\nimport { useMutation } from '@apollo/client'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Button,\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport { get_attendance_list_query_variables } from \"../attendance/tools\"\nimport { GET_SCHEDULE_CLASS_ATTENDANCE_QUERY } from \"../attendance/queries\"\nimport { CREATE_SCHEDULE_ITEM_ATTENDANCE } from \"./queries\"\nimport CSLS from \"../../../../../tools/cs_local_storage\"\nimport { getUrlFromReturnTo } from \"./tools\"\n\n\nfunction ClasspassCheckinButton({t, match, history, classpass, returnTo, locationId=null}) {\n  console.log(classpass)\n  const account_id = match.params.account_id\n  const schedule_item_id = match.params.class_id\n  const class_date = match.params.date\n\n  const createInput = {\n    \"account\": account_id,\n    \"scheduleItem\": schedule_item_id,\n    \"accountClasspass\": classpass.accountClasspass.id,\n    \"date\": class_date,\n    \"attendanceType\": \"CLASSPASS\",\n    \"bookingStatus\": \"ATTENDING\"\n  }\n\n  const [classCheckin, { data, loading, error, onCompleted }] = useMutation(CREATE_SCHEDULE_ITEM_ATTENDANCE)\n\n  if (loading) {\n    return \"Please wait...\"\n  }\n\n  if (error) {\n    return \"uh oh... error found\"\n  }\n\n  const return_url = getUrlFromReturnTo({\n    returnTo: returnTo,\n    schedule_item_id: schedule_item_id,\n    class_date: class_date,\n    locationId: locationId\n  })\n\n  return (\n    <Button \n      block \n      outline \n      color=\"success\" \n      icon=\"check\"\n      onClick={() => classCheckin({\n        variables: { \"input\": createInput }, \n        refetchQueries: [\n          {query: GET_SCHEDULE_CLASS_ATTENDANCE_QUERY, variables: get_attendance_list_query_variables(schedule_item_id, class_date)},\n        ]})\n        .then(({ data }) => {\n            console.log('got data', data);\n            // redirect back to attendance list\n            history.push(return_url)\n            // show message to user\n            toast.success((t('schedule.classes.class.book.toast_success')), {\n              position: toast.POSITION.BOTTOM_RIGHT\n            })\n          }).catch((error) => {\n            toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                position: toast.POSITION.BOTTOM_RIGHT\n              })\n            console.log('there was an error sending the query', error)\n          })}\n    >\n      {t(\"general.checkin\")}\n    </Button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ClasspassCheckinButton))\n\n","// @flow\n\nimport React, { Component, useState } from 'react'\nimport { useQuery, useMutation, useLazyQuery } from '@apollo/client'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport {\n  Alert,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  List,\n  Container,\n  Table,\n  StampCard\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport { TimeStringToJSDateOBJ } from '../../../../../tools/date_tools'\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\nimport { class_edit_all_subtitle, represent_teacher_role } from \"../../tools\"\nimport confirm_delete from \"../../../../../tools/confirm_delete\"\n\nimport { class_subtitle, get_accounts_query_variables } from \"../tools\"\n\nimport ContentCard from \"../../../../general/ContentCard\"\nimport ScheduleClassBookBack from \"./ScheduleClassBookBack\"\nimport ClasspassCheckinButton from \"./ScheduleClassBookClasspassBtn\"\n\n// import ClassEditBase from \"../ClassEditBase\"\n\nimport { GET_BOOKING_OPTIONS_QUERY, CREATE_SCHEDULE_ITEM_ATTENDANCE } from \"./queries\"\nimport CSLS from \"../../../../../tools/cs_local_storage\"\n\n\nfunction ScheduleClassBookClasspasses({ \n  t, \n  match, \n  history, \n  classpasses,  \n  locationId,\n  onClickCheckin=f=>f ,\n  returnTo=\"schedule_classes\"\n}) {\n\n  return (\n    classpasses.map((classpass) =>(\n      <Grid.Col md={3}>\n        <Card \n          statusColor=\"blue\"\n          title={t(\"general.classpass\")} >\n        <Card.Body>\n          <b>{classpass.accountClasspass.organizationClasspass.name}</b><br />\n          <span className=\"text-muted\">\n            {t('general.classes_remaining')}: {classpass.accountClasspass.classesRemainingDisplay} <br />\n            {t('general.valid_until')}: {moment(classpass.accountClasspass.dateEnd).format('LL')} <br />\n          </span>\n        </Card.Body>\n        <Card.Footer>\n          {(!classpass.allowed) ? t('schedule.classes.class.book.classpass_not_allowed') :\n            <ClasspassCheckinButton classpass={classpass} returnTo={returnTo} locationId={locationId} />\n          }\n        </Card.Footer>\n        </Card>\n      </Grid.Col>\n    ))\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleClassBookClasspasses))\n\n","// @flow\n\nimport React from 'react'\nimport { useMutation } from '@apollo/client'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport { get_attendance_list_query_variables } from \"../attendance/tools\"\nimport { GET_SCHEDULE_CLASS_ATTENDANCE_QUERY } from \"../attendance/queries\"\nimport { CREATE_SCHEDULE_ITEM_ATTENDANCE } from \"./queries\"\nimport CSLS from \"../../../../../tools/cs_local_storage\"\n\nimport { getUrlFromReturnTo } from \"./tools\"\n\n\nfunction SubscriptionCheckinButton({t, match, history, subscription, returnTo, locationId=null}) {\n  console.log(subscription)\n  const account_id = match.params.account_id\n  const schedule_item_id = match.params.class_id\n  const class_date = match.params.date\n\n  const createInput = {\n    \"account\": account_id,\n    \"scheduleItem\": schedule_item_id,\n    \"accountSubscription\": subscription.accountSubscription.id,\n    \"date\": class_date,\n    \"attendanceType\": \"SUBSCRIPTION\",\n    \"bookingStatus\": \"ATTENDING\"\n  }\n\n  const [classCheckin, { data, loading, error, onCompleted }] = useMutation(CREATE_SCHEDULE_ITEM_ATTENDANCE)\n\n  if (loading) {\n    return \"Please wait...\"\n  }\n\n  if (error) {\n    return \"uh oh... error found\"\n  }\n\n  const return_url = getUrlFromReturnTo({\n    returnTo: returnTo,\n    schedule_item_id: schedule_item_id,\n    class_date: class_date,\n    locationId: locationId\n  })\n\n  if (subscription.blocked) {\n    return (\n      <p className=\"text-muted\">\n        <Icon name=\"alert-triangle\" />\n        {t(\"schedule.classes.class.book.subscription_blocked\")}\n      </p>\n    )\n  }\n\n  if (subscription.paused) {\n    return (\n      <p className=\"text-muted\">\n        <Icon name=\"pause\" />\n        {t(\"schedule.classes.class.book.subscription_paused\")}\n      </p>\n    )\n  }\n\n  return (\n    <Button \n      block \n      outline \n      color=\"success\" \n      icon=\"check\"\n      onClick={() => classCheckin({\n        variables: { \"input\": createInput }, \n        refetchQueries: [\n          {query: GET_SCHEDULE_CLASS_ATTENDANCE_QUERY, variables: get_attendance_list_query_variables(schedule_item_id, class_date)},\n        ]})\n        .then(({ data }) => {\n            console.log('got data', data);\n            // redirect back to attendance list\n            history.push(return_url)\n            // show message to user\n            toast.success((t('schedule.classes.class.book.toast_success')), {\n              position: toast.POSITION.BOTTOM_RIGHT\n            })\n          }).catch((error) => {\n            toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                position: toast.POSITION.BOTTOM_RIGHT\n              })\n            console.log('there was an error sending the query', error)\n          })}\n    >\n      {t(\"general.checkin\")}\n    </Button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SubscriptionCheckinButton))\n\n","// @flow\n\nimport React, { Component, useState } from 'react'\nimport { useQuery, useMutation, useLazyQuery } from '@apollo/client'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport {\n  Alert,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table,\n  StampCard\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport { TimeStringToJSDateOBJ } from '../../../../../tools/date_tools'\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\nimport { class_edit_all_subtitle, represent_teacher_role } from \"../../tools\"\nimport confirm_delete from \"../../../../../tools/confirm_delete\"\n\nimport { class_subtitle, get_accounts_query_variables } from \"../tools\"\n\nimport ContentCard from \"../../../../general/ContentCard\"\nimport ScheduleClassBookBack from \"./ScheduleClassBookBack\"\n// import ClassEditBase from \"../ClassEditBase\"\nimport SubscriptionCheckinButton from \"./ScheduleClassBookSubscriptionBtn\"\n\nimport { GET_BOOKING_OPTIONS_QUERY } from \"./queries\"\nimport CSLS from \"../../../../../tools/cs_local_storage\"\n\n\n\nfunction ScheduleClassBookSubscriptions({ \n  t, \n  match, \n  history, \n  subscriptions, \n  locationId,\n  returnTo=\"schedule_classes\"\n}) {\n\n  return (\n    subscriptions.map((subscription) =>(\n      <Grid.Col md={3}>\n        <Card \n          statusColor=\"blue\"\n          title={t(\"general.subscription\")} >\n        <Card.Body>\n          <b>{subscription.accountSubscription.organizationSubscription.name}</b><br />\n          <span className=\"text-muted\">\n            {t(\"general.credits_remaining\")}: {subscription.accountSubscription.creditTotal}\n          </span>\n        </Card.Body>\n        <Card.Footer>\n          {(!subscription.allowed) ? t('schedule.classes.class.book.subscription_not_allowed') :\n            <SubscriptionCheckinButton subscription={subscription} returnTo={returnTo} locationId={locationId} />\n          }\n        </Card.Footer>\n        </Card>\n      </Grid.Col>\n    ))\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleClassBookSubscriptions))\n\n","// @flow\n\nimport React from 'react'\nimport { useMutation } from '@apollo/client'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Button,\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport { get_attendance_list_query_variables } from \"../attendance/tools\"\nimport { GET_SCHEDULE_CLASS_ATTENDANCE_QUERY } from \"../attendance/queries\"\nimport { CREATE_SCHEDULE_ITEM_ATTENDANCE } from \"./queries\"\nimport { getUrlFromReturnTo } from \"./tools\"\n\n\nfunction ScheduleClassBookPriceBtn({t, match, history, price, returnTo, locationId=null}) {\n  console.log(price)\n  const account_id = match.params.account_id\n  const schedule_item_id = match.params.class_id\n  const class_date = match.params.date\n\n  const createInput = {\n    \"account\": account_id,\n    \"scheduleItem\": schedule_item_id,\n    \"organizationClasspass\": price.id,\n    \"date\": class_date,\n    \"attendanceType\": \"CLASSPASS_BUY_AND_BOOK\",\n    \"bookingStatus\": \"ATTENDING\"\n  }\n\n  const [classCheckin, { data, loading, error, onCompleted }] = useMutation(CREATE_SCHEDULE_ITEM_ATTENDANCE)\n\n  if (loading) {\n    return \"Please wait...\"\n  }\n\n  if (error) {\n    return \"uh oh... error found\"\n  }\n\n  const return_url = getUrlFromReturnTo({\n    returnTo: returnTo,\n    schedule_item_id: schedule_item_id,\n    class_date: class_date,\n    locationId: locationId\n  })\n\n  return (\n    <Button \n      block \n      outline \n      color=\"success\" \n      icon=\"check\"\n      onClick={() => classCheckin({\n        variables: { \"input\": createInput }, \n        refetchQueries: [\n          {query: GET_SCHEDULE_CLASS_ATTENDANCE_QUERY, variables: get_attendance_list_query_variables(schedule_item_id, class_date)},\n        ]})\n        .then(({ data }) => {\n            console.log('got data', data);\n            // redirect back to attendance list\n            history.push(return_url)\n            // show message to user\n            toast.success((t('schedule.classes.class.book.toast_success')), {\n              position: toast.POSITION.BOTTOM_RIGHT\n            })\n          }).catch((error) => {\n            toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                position: toast.POSITION.BOTTOM_RIGHT\n              })\n            console.log('there was an error sending the query', error)\n          })}\n    >\n      {t(\"general.checkin\")}\n    </Button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleClassBookPriceBtn))\n\n","// @flow\n\nimport React, { Component, useState } from 'react'\nimport { useQuery, useMutation, useLazyQuery } from '@apollo/client'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport {\n  Alert,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  List,\n  Container,\n  Table,\n  StampCard\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport { TimeStringToJSDateOBJ } from '../../../../../tools/date_tools'\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\nimport { class_edit_all_subtitle, represent_teacher_role } from \"../../tools\"\nimport confirm_delete from \"../../../../../tools/confirm_delete\"\n\nimport { class_subtitle, get_accounts_query_variables } from \"../tools\"\n\nimport ContentCard from \"../../../../general/ContentCard\"\nimport ScheduleClassBookBack from \"./ScheduleClassBookBack\"\nimport ScheduleClassBookPriceBtn from \"./ScheduleClassBookPriceBtn\"\n\n// import ClassEditBase from \"../ClassEditBase\"\n\nimport { GET_BOOKING_OPTIONS_QUERY, CREATE_SCHEDULE_ITEM_ATTENDANCE } from \"./queries\"\nimport CSLS from \"../../../../../tools/cs_local_storage\"\n\n\nfunction ScheduleClassBookPriceDropin({ \n  t, \n  match, \n  history, \n  priceDropin, \n  locationId,\n  onClickCheckin=f=>f,\n  returnTo=\"schedule_classes\"\n}) {\n  console.log('priceDropin')\n  console.log(priceDropin)\n\n  return (\n    <Grid.Col md={3}>\n      <Card \n        statusColor=\"blue\"\n        title={t(\"general.dropin\")} >\n      <Card.Body>\n        <b>{priceDropin.priceDisplay}</b><br />\n        {t(\"schedule.classes.class.book.dropin_pay_and_book\")} <br />\n      </Card.Body>\n      <Card.Footer>\n        <ScheduleClassBookPriceBtn price={priceDropin} returnTo={returnTo} locationID={locationId} />\n      </Card.Footer>\n      </Card>\n    </Grid.Col>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleClassBookPriceDropin))\n\n","// @flow\n\nimport React, { Component, useState } from 'react'\nimport { useQuery, useMutation, useLazyQuery } from '@apollo/client'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport {\n  Alert,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  List,\n  Container,\n  Table,\n  StampCard\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport { TimeStringToJSDateOBJ } from '../../../../../tools/date_tools'\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\nimport { class_edit_all_subtitle, represent_teacher_role } from \"../../tools\"\nimport confirm_delete from \"../../../../../tools/confirm_delete\"\n\nimport { class_subtitle, get_accounts_query_variables } from \"../tools\"\n\nimport ContentCard from \"../../../../general/ContentCard\"\nimport ScheduleClassBookBack from \"./ScheduleClassBookBack\"\nimport ScheduleClassBookPriceBtn from \"./ScheduleClassBookPriceBtn\"\n\n// import ClassEditBase from \"../ClassEditBase\"\n\nimport { GET_BOOKING_OPTIONS_QUERY, CREATE_SCHEDULE_ITEM_ATTENDANCE } from \"./queries\"\nimport CSLS from \"../../../../../tools/cs_local_storage\"\n\n\nfunction ScheduleClassBookPriceTrial({ \n  t, \n  match, \n  history, \n  priceTrial, \n  locationId,\n  onClickCheckin=f=>f,\n  returnTo=\"schedule_classes\"\n}) {\n  console.log('priceTrial')\n  console.log(priceTrial)\n\n  return (\n    <Grid.Col md={3}>\n      <Card \n        statusColor=\"blue\"\n        title={t(\"general.trial\")} >\n      <Card.Body>\n        <b>{priceTrial.priceDisplay}</b><br />\n        {t(\"schedule.classes.class.book.trial_pay_and_book\")} <br />\n      </Card.Body>\n      <Card.Footer>\n        <ScheduleClassBookPriceBtn price={priceTrial} returnTo={returnTo} locationId={locationId} />\n      </Card.Footer>\n      </Card>\n    </Grid.Col>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleClassBookPriceTrial))\n\n","// @flow\n\nimport React, { Component, useState } from 'react'\nimport { useQuery, useMutation, useLazyQuery } from '@apollo/client'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport {\n  Alert,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table,\n  StampCard\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport { TimeStringToJSDateOBJ } from '../../../../../tools/date_tools'\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\nimport { class_edit_all_subtitle, represent_teacher_role } from \"../../tools\"\nimport confirm_delete from \"../../../../../tools/confirm_delete\"\n\nimport { class_subtitle, get_accounts_query_variables } from \"../tools\"\n\nimport ContentCard from \"../../../../general/ContentCard\"\nimport ScheduleClassBookBack from \"./ScheduleClassBookBack\"\nimport ScheduleClassBookClasspasses from \"./ScheduleClassBookClasspasses\"\nimport ScheduleClassBookSubscriptions from \"./ScheduleClassBookSubscriptions\"\nimport ScheduleClassBookPriceDropin from \"./ScheduleClassBookPriceDropin\"\nimport ScheduleClassBookPriceTrial from \"./ScheduleClassBookPriceTrial\"\n// import ClassEditBase from \"../ClassEditBase\"\n\nimport { GET_BOOKING_OPTIONS_QUERY } from \"./queries\"\nimport CSLS from \"../../../../../tools/cs_local_storage\"\n\n\nfunction ScheduleClassBook({ t, match, history }) {\n  const [showSearch, setShowSearch] = useState(false)\n  const return_url = \"/schedule/classes/\"\n  const account_id = match.params.account_id\n  const schedule_item_id = match.params.class_id\n  const class_date = match.params.date\n  const { loading: queryLoading, error: queryError, data: queryData } = useQuery(\n    GET_BOOKING_OPTIONS_QUERY, {\n      variables: {\n        account: account_id,\n        scheduleItem: schedule_item_id,\n        date: class_date,\n        listType: \"ATTEND\"\n      }\n    }\n  )\n\n  // Query\n  // Loading\n  if (queryLoading) return <p>{t('general.loading_with_dots')}</p>\n  // Error\n  if (queryError) {\n    console.log(queryError)\n    return <p>{t('general.error_sad_smiley')}</p>\n  }\n  \n  console.log(queryData)\n  const account = queryData.scheduleClassBookingOptions.account\n  const classpasses = queryData.scheduleClassBookingOptions.classpasses\n  const subscriptions = queryData.scheduleClassBookingOptions.subscriptions\n  const prices = queryData.scheduleClassBookingOptions.scheduleItemPrices\n  const scheduleItem = queryData.scheduleClassBookingOptions.scheduleItem\n  const subtitle = class_subtitle({\n    t: t,\n    location: scheduleItem.organizationLocationRoom.organizationLocation.name, \n    locationRoom: scheduleItem.organizationLocationRoom.name,\n    classtype: scheduleItem.organizationClasstype.name, \n    timeStart: TimeStringToJSDateOBJ(scheduleItem.timeStart), \n    date: class_date\n  })\n\n  console.log(prices)\n  \n  \n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('schedule.title')} subTitle={subtitle}>\n            <div className=\"page-options d-flex\">   \n              <ScheduleClassBookBack classId={schedule_item_id} date={class_date} />\n            </div>\n          </Page.Header>\n          <Grid.Row>\n              <Grid.Col md={12}>\n                <h4>{t('general.booking_options')} {account.fullName}</h4>\n                <div className=\"mt-6\">\n                <Grid.Row cards deck>\n                  <ScheduleClassBookSubscriptions subscriptions={subscriptions} />\n                  <ScheduleClassBookClasspasses classpasses={classpasses} />\n                  {(prices) ?\n                    (prices.organizationClasspassDropin) ? \n                      <ScheduleClassBookPriceDropin priceDropin={prices.organizationClasspassDropin}/> : \"\" \n                    : \"\" }\n                  {(prices) ?\n                    (prices.organizationClasspassTrial) ? \n                      <ScheduleClassBookPriceTrial priceTrial={prices.organizationClasspassTrial}/> : \"\" \n                    : \"\" }\n                </Grid.Row>\n                </div>\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleClassBook))\n\n","import { gql } from \"@apollo/client\"\n\n\nexport const GET_SCHEDULE_CLASS_WEEKLY_OTCS_QUERY = gql`\n  query ScheduleClassWeeklyOTCs($scheduleItem: ID!, $date: Date!) {\n    scheduleClassWeeklyOtcs(first:1, scheduleItem: $scheduleItem, date:$date) {\n      edges {\n        node {\n          id \n          date\n          status\n          description\n          account {\n            id\n            fullName\n          }\n          role\n          account2 {\n            id\n            fullName\n          }\n          role2\n          organizationLocationRoom {\n            id\n            name\n          }\n          organizationClasstype {\n            id\n            name\n          }\n          organizationLevel {\n            id\n            name\n          }\n          timeStart\n          timeEnd\n          spaces\n          walkInSpaces\n          infoMailContent\n        }\n      }\n    }\n    scheduleItem(id:$scheduleItem) {\n      id\n      frequencyType\n      frequencyInterval\n      organizationLocationRoom {\n        id\n        name\n        organizationLocation {\n          id\n          name\n        }\n      }\n      organizationClasstype {\n        id\n        name\n      }\n      organizationLevel {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      timeStart\n      timeEnd\n      displayPublic\n    }\n    accounts(first: 100, isActive: true, teacher: true) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          fullName\n        }\n      }\n    }\n    organizationLocationRooms(first: 100, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n      }\n    }\n    organizationClasstypes(first: 100, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    organizationLevels(first: 100, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const DELETE_SCHEDULE_CLASS_WEEKLY_OTC = gql`\n  mutation DeleteScheduleClassWeeklyOTC($input: DeleteScheduleClassWeeklyOTCInput!) {\n    deleteScheduleClassWeeklyOtc(input: $input) {\n      ok\n    }\n  }\n`\n\n\nexport const UPDATE_SCHEDULE_CLASS_WEEKLY_OTC = gql`\n  mutation UpdateScheduleClassWeeklyOTC($input: UpdateScheduleClassWeeklyOTCInput!) {\n    updateScheduleClassWeeklyOtc(input:$input) {\n      scheduleClassWeeklyOtc {\n        id\n      }\n    }\n  }\n`\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const SCHEDULE_CLASS_EDIT_OTC_SCHEMA = Yup.object().shape({\n  spaces: Yup.number(),\n  walkInSpaces: Yup.number(),\n})\n","import React, { Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { v4 } from \"uuid\"\n\nimport {\n    Button,\n    Card,\n    Form,\n    Grid\n  } from \"tabler-react\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../../plugin_config/tinymce\"\nimport CSDatePicker from \"../../../../ui/CSDatePicker\"\nimport CSTimePicker from \"../../../../ui/CSTimePicker\"\n\nconst ScheduleClassEditForm = ({ t, history, inputData, isSubmitting, setFieldValue, setFieldTouched, errors, values, touched, return_url }) => (\n    <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.status')}>\n              <Field component=\"select\" \n                      name=\"status\" \n                      className={(errors.status) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                <option value=\"\" key={v4()}>{t('')}</option>\n                <option value=\"CANCELLED\" key={v4()}>{t('general.cancelled')}</option>\n                <option value=\"OPEN\" key={v4()}>{t('schedule.classes.no_teacher')}</option>\n              </Field>\n              <ErrorMessage name=\"status\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.description')}>\n              <Field type=\"text\" \n                      name=\"description\" \n                      className={(errors.description) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.teacher')}>\n              <Field component=\"select\" \n                      name=\"account\" \n                      className={(errors.account) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                {console.log(\"query data in schedule class teacher add:\")}\n                {console.log(inputData)}\n                <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n                {inputData.accounts.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.fullName}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"account\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.teacher_role')}>\n              <Field component=\"select\" \n                      name=\"role\" \n                      className={(errors.role) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                <option value=\"\" key={v4()}></option>\n                <option value=\"SUB\" key={v4()}>{t('schedule.classes.teacher_roles.sub')}</option>\n                <option value=\"ASSISTANT\" key={v4()}>{t('schedule.classes.teacher_roles.assistant')}</option>\n                <option value=\"KARMA\" key={v4()}>{t('schedule.classes.teacher_roles.karma')}</option>\n              </Field>\n              <ErrorMessage name=\"role\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.teacher2')}>\n              <Field component=\"select\" \n                      name=\"account2\" \n                      className={(errors.account2) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                <option value=\"\" key={v4()}></option>\n                {inputData.accounts.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.fullName}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"account2\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.teacher_role2')}>\n              <Field component=\"select\" \n                      name=\"role2\" \n                      className={(errors.role2) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                <option value=\"\" key={v4()}></option>\n                <option value=\"SUB\" key={v4()}>{t('schedule.classes.teacher_roles.sub')}</option>\n                <option value=\"ASSISTANT\" key={v4()}>{t('schedule.classes.teacher_roles.assistant')}</option>\n                <option value=\"KARMA\" key={v4()}>{t('schedule.classes.teacher_roles.karma')}</option>\n              </Field>\n              <ErrorMessage name=\"role2\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.location')}>\n              <Field component=\"select\" \n                    name=\"organizationLocationRoom\" \n                    className={(errors.organizationLocationRoom) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\" key={v4()}>{t(\"general.no_change\")}</option>\n                {inputData.organizationLocationRooms.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.organizationLocation.name} - {node.name}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"organizationLocationRoom\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.level')}>\n              <Field component=\"select\" \n                    name=\"organizationLevel\" \n                    className={(errors.organizationLevels) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\" key={v4()}>{t(\"general.no_change\")}</option>\n                {inputData.organizationLevels.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.name}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"organizationLevels\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n        </Grid.Row>\n        <Form.Group label={t('general.class')}>\n          <Field component=\"select\" \n                name=\"organizationClasstype\" \n                className={(errors.organizationClasstype) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\">\n            <option value=\"\" key={v4()}>{t(\"general.no_change\")}</option>\n            {inputData.organizationClasstypes.edges.map(({ node }) =>\n              <option value={node.id} key={v4()}>{node.name}</option>\n            )}\n          </Field>\n          <ErrorMessage name=\"organizationClasstype\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group> \n        <Grid.Row>\n          <Grid.Col>\n           <Form.Group label={t('general.time_start')}>\n              <CSTimePicker \n                className={(errors.timeStart) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.timeStart}\n                onChange={(date) => setFieldValue(\"timeStart\", date)}\n                onBlur={() => setFieldTouched(\"timeStart\", true)}\n                clearable={false}\n              />\n              {/* {errors.timeStart}\n              {errors.timeStart && touched.timeStart ? (\n                <span className=\"invalid-feedback\">{errors.timeStart} - hacky thingy</span>\n              ) : null} */}\n              <ErrorMessage name=\"timeStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n           <Form.Group label={t('general.time_end')}>\n              <CSTimePicker \n                className={(errors.timeEnd) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.timeEnd}\n                onChange={(date) => setFieldValue(\"timeEnd\", date)}\n                onBlur={() => setFieldTouched(\"timeEnd\", true)}\n                clearable={false}\n              />\n              <ErrorMessage name=\"timeEnd\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('schedule.classes.spaces')}>\n              <Field type=\"text\" \n                    name=\"spaces\" \n                    className={(errors.spaces) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n              <ErrorMessage name=\"spaces\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('schedule.classes.spaces_walk_in')}>\n              <Field type=\"text\" \n                    name=\"walkInSpaces\" \n                    className={(errors.walkInSpaces) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n              <ErrorMessage name=\"walkInSpaces\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n        </Grid.Row>\n        <Form.Group label={t('general.info_mail')}>\n          <Editor\n              textareaName=\"infoMailContent\"\n              initialValue={values.infoMailContent}\n              init={tinymceBasicConf}\n              onChange={(e) => setFieldValue(\"infoMailContent\", e.target.getContent())}\n              onBlur={() => setFieldTouched(\"infoMailContent\", true)}\n            />\n          <ErrorMessage name=\"note\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group>\n        {/* <Form.Group label={t('general.note')}>\n          <Editor\n              textareaName=\"note\"\n              initialValue={values.note}\n              init={tinymceBasicConf}\n              onChange={(e) => setFieldValue(\"note\", e.target.getContent())}\n              onBlur={() => setFieldTouched(\"note\", true)}\n            />\n          <ErrorMessage name=\"note\" component=\"span\" className=\"invalid-feedback\" />\n        </Form.Group> */}\n      </Card.Body>\n      <Card.Footer>\n        <Button \n        color=\"primary\"\n        className=\"pull-right\" \n        type=\"submit\" \n        disabled={isSubmitting}\n        >\n        {t('general.submit')}\n        </Button>\n        <Button color=\"link\" onClick={() => history.push(return_url)}>\n            {t('general.cancel')}\n        </Button>\n      </Card.Footer>\n    </FoForm>\n)\n  \n  \n  export default withTranslation()(withRouter(ScheduleClassEditForm))","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { GET_CLASSES_QUERY } from '../../queries'\nimport { get_list_query_variables } from '../../tools'\nimport { DELETE_SCHEDULE_CLASS_WEEKLY_OTC, GET_SCHEDULE_CLASS_WEEKLY_OTCS_QUERY } from \"./queries\"\nimport confirm_delete from \"../../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\nfunction ScheduleClassWeeklyOTCDelete({t, match, history}) {\n  const schedule_item_id = match.params.class_id\n  const class_date = match.params.date\n  const [deleteClassOTC, { data }] = useMutation(DELETE_SCHEDULE_CLASS_WEEKLY_OTC, {\n    onCompleted: () => { history.push(\"/schedule/classes/\") }\n  })\n  const query_vars = {\n    scheduleItem: schedule_item_id,\n    date: class_date\n  }\n\n  return (\n    <button className=\"icon btn-block btn btn-danger mb-3\" \n      title={t('general.delete')} \n      href=\"\"\n      onClick={() => {\n        confirm_delete({\n          t: t,\n          msgConfirm: t(\"schedule.classes.class.edit.delete_confirm_msg\"),\n          msgDescription: <p></p>,\n          msgSuccess: t('schedule.classes.class.edit.delete_success'),\n          deleteFunction: deleteClassOTC,\n          functionVariables: { \n            variables: {\n              input: {\n                scheduleItem: schedule_item_id,\n                date: class_date\n              },\n            }, \n            refetchQueries: [\n              { query: GET_SCHEDULE_CLASS_WEEKLY_OTCS_QUERY, variables: query_vars },\n              { query: GET_CLASSES_QUERY, variables: get_list_query_variables() },\n            ]\n          }\n        })\n    }}>\n      <span className=\"text-white\"><Icon prefix=\"fe\" name=\"trash-2\" /> {\" \"} {t(\"schedule.classes.class.edit.delete_all_changes\")}</span>\n    </button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleClassWeeklyOTCDelete))\n","// @flow\n\nimport React, { useState } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SCHEDULE_CLASS_WEEKLY_OTCS_QUERY, UPDATE_SCHEDULE_CLASS_WEEKLY_OTC } from './queries'\nimport { GET_CLASSES_QUERY } from '../../queries'\nimport { get_list_query_variables } from '../../tools'\nimport { SCHEDULE_CLASS_EDIT_OTC_SCHEMA } from './yupSchema'\nimport ScheduleClassEditForm from './ScheduleClassEditForm'\nimport { TimeStringToJSDateOBJ, dateToLocalISOTime } from '../../../../../tools/date_tools'\n\nimport { class_subtitle } from \"../tools\"\n\n\nimport {\n  Alert,\n  Dropdown,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n// import ClassEditBase from \"../ClassEditBase\"\nimport ScheduleClassWeeklyOTCDelete from './ScheduleClassWeeklyOTCDelete'\nimport ScheduleClassBack from \"../ScheduleClassBack\"\nimport ClassMenu from \"../ClassMenu\"\n\n\nfunction ScheduleClassEdit({ t, match, history }) {\n  let showDelete = false\n  const schedule_item_id = match.params.class_id\n  const class_date = match.params.date\n  console.log(schedule_item_id)\n  console.log(class_date)\n\n  const query_vars = {\n    scheduleItem: schedule_item_id,\n    date: class_date\n  }\n\n  const { loading: queryLoading, error: queryError, data: queryData } = useQuery(GET_SCHEDULE_CLASS_WEEKLY_OTCS_QUERY, {\n    variables: query_vars,\n  })\n  const [ updateScheduleClassWeeklyOTC, { data } ] = useMutation(UPDATE_SCHEDULE_CLASS_WEEKLY_OTC)\n\n  if (queryLoading) return <p>{t('general.loading_with_dots')}</p>\n  // Error\n  if (queryError) {\n    console.log(queryError)\n    return <p>{t('general.error_sad_smiley')}</p>\n  }\n\n  console.log('queryData')\n  console.log(queryData)\n\n  const scheduleItem = queryData.scheduleItem\n  const subtitle = class_subtitle({\n    t: t,\n    location: scheduleItem.organizationLocationRoom.organizationLocation.name, \n    locationRoom: scheduleItem.organizationLocationRoom.name,\n    classtype: scheduleItem.organizationClasstype.name, \n    timeStart: TimeStringToJSDateOBJ(scheduleItem.timeStart), \n    date: class_date\n  })\n  \n  let initialData\n  var initialValues = {}\n  if (queryData.scheduleClassWeeklyOtcs.edges.length) {\n    showDelete = true\n\n    initialData = queryData.scheduleClassWeeklyOtcs.edges[0].node\n\n    initialValues.status = initialData.status\n    initialValues.description = initialData.description\n    if (initialData.account) {\n      initialValues.account = initialData.account.id\n    }\n    if (initialData.account2) {\n      initialValues.account2 = initialData.account2.id\n    }\n    initialValues.role = initialData.role || \"\"\n    initialValues.role2 = initialData.role2 || \"\"\n    if (initialData.organizationLocationRoom) {\n      initialValues.organizationLocationRoom = initialData.organizationLocationRoom.id\n    }\n    if (initialData.organizationClasstype) {\n      initialValues.organizationClasstype = initialData.organizationClasstype.id\n    }\n    if (initialData.organizationLevel) {\n      initialValues.organizationLevel = initialData.organizationLevel.id\n    }\n    if (initialData.timeStart) {\n      initialValues.timeStart = TimeStringToJSDateOBJ(initialData.timeStart)\n    }\n    if (initialData.timeEnd) {\n      initialValues.timeEnd = TimeStringToJSDateOBJ(initialData.timeEnd)\n    }\n    if (initialData.spaces) {\n      initialValues.spaces = initialData.spaces\n    }\n    if (initialData.walkInSpaces) {\n      initialValues.walkInSpaces = initialData.walkInSpaces\n    }\n    if (initialData.infoMailContent) {\n      initialValues.infoMailContent = initialData.infoMailContent\n    }\n    \n  } else {\n    console.log('setting initial values')\n    initialValues.status = \"\"\n    initialValues.description = \"\"\n    initialValues.account = \"\"\n    initialValues.role = \"\"\n    initialValues.account2 = \"\"\n    initialValues.role2 = \"\"\n    initialValues.organizationLocationRoom = \"\"\n    initialValues.organizationClasstype = \"\"\n    initialValues.organizationLevel = \"\"\n    initialValues.timeStart = \"\"\n    initialValues.timeEnd = \"\"\n    initialValues.spaces = null\n    initialValues.walkInSpaces = null\n    initialValues.infoMailContent = \"\"\n  }\n\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('schedule.title')} subTitle={subtitle}>\n            <div className=\"page-options d-flex\">       \n              <ScheduleClassBack />\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={9}>\n              <Card>\n                <Card.Header>\n                  <Card.Title>{t('general.edit')}</Card.Title>\n                </Card.Header>\n                <Card.Body>\n                  <Formik\n                    initialValues={initialValues}\n                    validationSchema={SCHEDULE_CLASS_EDIT_OTC_SCHEMA}\n                    onSubmit={(values, { setSubmitting }) => {\n\n                        // let dateEnd\n                        // if (values.dateEnd) {\n                        //   dateEnd = dateToLocalISO(values.dateEnd)\n                        // } else {\n                        //   dateEnd = values.dateEnd\n                        // }\n\n                        console.log(values.timeStart)\n                        console.log(values.timeEnd)\n\n                        let timeStart = undefined\n                        let timeEnd = undefined\n                        if (values.timeStart) {\n                          timeStart = dateToLocalISOTime(values.timeStart)\n                        }\n                        \n                        if (values.timeEnd) {\n                          timeEnd = dateToLocalISOTime(values.timeEnd)  \n                        }\n                        \n\n                        updateScheduleClassWeeklyOTC({ variables: {\n                          input: {\n                            scheduleItem: schedule_item_id,\n                            date: class_date,\n                            status: values.status,\n                            description: values.description,\n                            account: values.account,\n                            role: values.role,\n                            account2: values.account2,\n                            role2: values.role2,\n                            organizationLocationRoom: values.organizationLocationRoom,\n                            organizationClasstype: values.organizationClasstype,\n                            organizationLevel: values.organizationLevel,\n                            timeStart: timeStart,\n                            timeEnd: timeEnd,\n                            spaces: values.spaces,\n                            walkInSpaces: values.walkInSpaces,\n                            infoMailContent: values.infoMailContent\n                          }\n                        }, refetchQueries: [\n                            {query: GET_SCHEDULE_CLASS_WEEKLY_OTCS_QUERY, variables: query_vars},\n                            {query: GET_CLASSES_QUERY, variables: get_list_query_variables()},\n                        ]})\n                        .then(({ data }) => {\n                            console.log('got data', data);\n                            toast.success((t('schedule.classes.class.edit.toast_edit_success')), {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                            setSubmitting(false)\n                        }).catch((error) => {\n                          toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                              position: toast.POSITION.BOTTOM_RIGHT\n                            })\n                          console.log('there was an error sending the query', error)\n                          setSubmitting(false)\n                        })\n                      }\n                    }\n                    >\n                    {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n                      <ScheduleClassEditForm\n                        inputData={queryData}\n                        isSubmitting={isSubmitting}\n                        setFieldTouched={setFieldTouched}\n                        setFieldValue={setFieldValue}\n                        errors={errors}\n                        values={values}\n                      >\n                        {console.log(errors)}\n                      </ScheduleClassEditForm>\n                    )}\n                  </Formik>\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              {(showDelete) ? \n                <ScheduleClassWeeklyOTCDelete /> : \"\"\n              }\n              <ClassMenu \n                scheduleItemId={schedule_item_id}\n                class_date={class_date}\n                activeLink=\"edit\"\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleClassEdit))","import React from \"react\"\nimport { Link } from 'react-router-dom'\nimport { withTranslation } from 'react-i18next'\n\nimport {\n  Button,\n  Icon, \n} from \"tabler-react\";\n\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n\nfunction ButtonAdd({t, classId}) {\n  return (\n    <HasPermissionWrapper permission=\"add\" resource=\"scheduleitemprice\">\n      <Link to={\"/schedule/classes/all/prices/\" + classId + \"/add\" } >\n        <Button color=\"primary btn-block mb-6\">\n          <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('schedule.classes.prices.add')}\n        </Button>\n      </Link>\n    </HasPermissionWrapper>\n  )\n} \n\nexport default withTranslation()(ButtonAdd)","import { gql } from \"@apollo/client\"\n\nexport const GET_SCHEDULE_ITEM_PRICES_QUERY = gql`\n  query ScheduleItemPrices($after: String, $before: String, $scheduleItem: ID!) {\n    scheduleItemPrices(first: 15, before: $before, after: $after, scheduleItem: $scheduleItem) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          organizationClasspassDropin {\n            id\n            name\n          }\n          organizationClasspassTrial {\n            id\n            name\n          }\n          dateStart\n          dateEnd       \n        }\n      }\n    }\n    scheduleItem(id:$scheduleItem) {\n      id\n      frequencyType\n      frequencyInterval\n      organizationLocationRoom {\n        id\n        name\n        organizationLocation {\n          id\n          name\n        }\n      }\n      organizationClasstype {\n        id\n        name\n      }\n      organizationLevel {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      timeStart\n      timeEnd\n      displayPublic\n    }\n  }\n`\n\nexport const GET_SINGLE_SCHEDULE_ITEM_PRICE_QUERY = gql`\nquery ScheduleItemPrice($before: String, $after: String, $id: ID!) {\n  scheduleItemPrice(id: $id) {\n    id\n    organizationClasspassDropin {\n      id\n      name\n    }\n    organizationClasspassTrial {\n      id\n      name\n    }\n    dateStart\n    dateEnd       \n  }\n  organizationClasspasses(first: 100, before: $before, after: $after, archived: false) {\n    pageInfo {\n      startCursor\n      endCursor\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      node {\n        id\n        name\n      }\n    }\n  }\n}\n`\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query InputValues($after: String, $before: String) {\n    organizationClasspasses(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const ADD_SCHEDULE_ITEM_PRICE = gql`\n  mutation CreateScheduleItemPrice($input:CreateScheduleItemPriceInput!) {\n    createScheduleItemPrice(input:$input) {\n      scheduleItemPrice {\n        id\n      } \n    }\n  }\n`\n\nexport const UPDATE_SCHEDULE_ITEM_PRICE = gql`\nmutation UpdateScheduleItemPrice($input: UpdateScheduleItemPriceInput!) {\n  updateScheduleItemPrice(input:$input) {\n    scheduleItemPrice {\n      id\n    } \n  }\n}\n`\n\nexport const DELETE_SCHEDULE_ITEM_PRICE = gql`\n  mutation DeleteScheduleItemPrice($input: DeleteScheduleItemPriceInput!) {\n    deleteScheduleItemPrice(input: $input) {\n      ok\n    }\n  }\n`\n","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { DELETE_SCHEDULE_ITEM_PRICE, GET_SCHEDULE_ITEM_PRICES_QUERY } from \"./queries\"\nimport confirm_delete from \"../../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\nfunction ScheduleClassPriceDelete({t, match, history, id}) {\n  const classId = match.params.class_id\n  const [deleteClassPrice, { data }] = useMutation(DELETE_SCHEDULE_ITEM_PRICE)\n  const query_vars = {\n    scheduleItem: classId\n  }\n\n  return (\n    <button className=\"icon btn btn-danger btn-sm mb-3 pull-right\" \n      title={t('general.delete')} \n      onClick={() => {\n        confirm_delete({\n          t: t,\n          msgConfirm: t(\"schedule.classes.prices.delete_confirm_msg\"),\n          msgDescription: <p></p>,\n          msgSuccess: t('schedule.classes.prices.delete_success'),\n          deleteFunction: deleteClassPrice,\n          functionVariables: { \n            variables: {\n              input: {\n                id: id\n              },\n            }, \n            refetchQueries: [\n              { query: GET_SCHEDULE_ITEM_PRICES_QUERY, variables: query_vars },\n            ]\n          }\n        })\n    }}>\n      <span className=\"text-white\"><Icon prefix=\"fe\" name=\"trash-2\" /> {\" \"} {t(\"\")}</span>\n    </button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleClassPriceDelete))","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport moment from 'moment'\n\nimport {\n  Dimmer,\n  Button,\n  Table\n} from \"tabler-react\";\nimport { TimeStringToJSDateOBJ } from '../../../../../tools/date_tools'\nimport AppSettingsContext from '../../../../context/AppSettingsContext'\nimport ButtonAdd from \"./ButtonAdd\"\nimport { class_edit_all_subtitle } from \"../tools\"\nimport confirm_delete from \"../../../../../tools/confirm_delete\"\n\nimport ContentCard from \"../../../../general/ContentCard\"\nimport ClassEditBase from \"../ClassEditBase\"\nimport ScheduleClassPriceDelete from './ScheduleClassPriceDelete'\n\nimport { GET_SCHEDULE_ITEM_PRICES_QUERY } from \"./queries\"\n\n\nfunction ScheduleClassPrices({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const classId = match.params.class_id\n  const menuActiveLink = \"prices\" \n  const cardTitle = t('schedule.classes.prices.title')\n  const sidebarButton = <ButtonAdd classId={classId}/>\n\n  const { loading, error, data, fetchMore } = useQuery(GET_SCHEDULE_ITEM_PRICES_QUERY, {\n    variables: { scheduleItem: classId }\n  })\n\n  if (loading) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n    >\n      <Dimmer active={true} loader={true} />\n    </ClassEditBase>\n  )\n  // Error\n  if (error) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n    >\n      <p>{t('schedule.classes.prices.error_loading')}</p>\n    </ClassEditBase>\n  )\n\n\n  const initialTimeStart = TimeStringToJSDateOBJ(data.scheduleItem.timeStart)\n  const subtitle = class_edit_all_subtitle({\n    t: t,\n    location: data.scheduleItem.organizationLocationRoom.organizationLocation.name,\n    locationRoom: data.scheduleItem.organizationLocationRoom.name,\n    classtype: data.scheduleItem.organizationClasstype.name,\n    starttime: initialTimeStart\n  })\n\n  // Empty list\n  if (!data.scheduleItemPrices.edges.length) { return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n    >\n      <p>{t('schedule.classes.prices.empty_list')}</p>\n    </ClassEditBase>\n  )}\n\n  return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n      defaultCard={false}\n    >\n    <ContentCard \n      cardTitle={t('schedule.classes.title_edit')}\n      // headerContent={headerOptions}\n      pageInfo={data.scheduleItemPrices.pageInfo}\n      onLoadMore={() => {\n      fetchMore({\n        variables: {\n          after: data.scheduleItemPrices.pageInfo.endCursor\n        },\n        updateQuery: (previousResult, { fetchMoreResult }) => {\n          const newEdges = fetchMoreResult.scheduleItemPrices.edges\n          const pageInfo = fetchMoreResult.scheduleItemPrices.pageInfo\n\n          return newEdges.length\n            ? {\n                // Put the new locations at the end of the list and update `pageInfo`\n                // so we have the new `endCursor` and `hasNextPage` values\n                data: { \n                  scheduleItemPrices: {\n                    __typename: previousResult.scheduleItemPrices.__typename,\n                    edges: [ ...previousResult.scheduleItemPrices.edges, ...newEdges ],\n                    pageInfo\n                  }\n                }\n              }\n            : previousResult\n          }\n        })\n      }} >\n      <div>\n        <Table>\n          <Table.Header>\n            <Table.Row>\n              <Table.ColHeader>{t('general.date_start')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.date_end')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.dropin')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.trial')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {data.scheduleItemPrices.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                {console.log(node)}\n                <Table.Col key={v4()}> \n                  {moment(node.dateStart).format('LL')}\n                </Table.Col>\n                <Table.Col key={v4()}> \n                  {(node.dateEnd) ? moment(node.dateEnd).format('LL') : \"\"}\n                </Table.Col>\n                <Table.Col>\n                  {node.organizationClasspassDropin.name}\n                </Table.Col>\n                <Table.Col>\n                  {(node.organizationClasspassTrial) ? node.organizationClasspassTrial.name : \"\"}\n                </Table.Col>\n                <Table.Col className=\"text-right\" key={v4()}>\n                  <Button className='btn-sm' \n                          onClick={() => history.push(\"/schedule/classes/all/prices/\" + match.params.class_id + '/edit/' + node.id)}\n                          color=\"secondary\">\n                    {t('general.edit')}\n                  </Button>\n                </Table.Col>\n                <Table.Col>\n                  <ScheduleClassPriceDelete id={node.id} />\n                </Table.Col>\n              </Table.Row>\n            ))}\n          </Table.Body>\n        </Table>\n        </div>\n      </ContentCard>\n    </ClassEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleClassPrices))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Form,\n} from \"tabler-react\"\n\n\nimport CSDatePicker from \"../../../../ui/CSDatePicker\"\n\nconst ScheduleClassPriceForm = ({ t, history, match, isSubmitting, errors, values, inputData, returnUrl, setFieldTouched, setFieldValue }) => (\n  <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.date_start')}>\n              <CSDatePicker \n                selected={values.dateStart}\n                onChange={(date) => setFieldValue(\"dateStart\", date)}\n                onBlur={() => setFieldTouched(\"dateStart\", true)}\n              />\n              <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.date_end')}>\n              <CSDatePicker \n                selected={values.dateEnd}\n                onChange={(date) => setFieldValue(\"dateEnd\", date)}\n                onBlur={() => setFieldTouched(\"dateEnd\", true)}\n              />\n              <ErrorMessage name=\"dateEnd\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('schedule.classes.classpass_dropin')}>\n              <Field component=\"select\" \n                      name=\"organizationClasspassDropin\" \n                      className={(errors.organizationClasspassDropin) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                {console.log(\"query data in schedule class price form:\")}\n                {console.log(inputData)}\n                <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n                {inputData.organizationClasspasses.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.name}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"organizationClasspassDropin\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('schedule.classes.classpass_trial')}>\n              <Field component=\"select\" \n                      name=\"organizationClasspassTrial\" \n                      className={(errors.organizationClasspassTrial) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                <option value=\"\" key={v4()}>{t('')}</option>\n                {inputData.organizationClasspasses.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.name}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"organizationClasspassTrial\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Button color=\"link\" onClick={() => history.push(returnUrl)} role=\"button\">\n              {t('general.cancel')}\n          </Button>\n      </Card.Footer>\n  </FoForm>\n);\n\nexport default withTranslation()(withRouter(ScheduleClassPriceForm))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const SCHEDULE_CLASS_TEACHER_SCHEMA = Yup.object().shape({\n  account: Yup.string()\n    .required(t('yup.field_required')),\n  role: Yup.string(),\n  account2: Yup.string(),\n  role2: Yup.string(),\n  dateStart: Yup.date()\n    .required(t('yup.field_required')),\n  // dateEnd: Yup.date()\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\n\nconst ScheduleClassPriceBack = ({ t, classId }) => (\n  <Link to={\"/schedule/classes/all/prices/\" + classId } >\n    <Button color=\"primary btn-block mb-6\">\n      <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n    </Button>\n  </Link>\n)\n\nexport default withTranslation()(withRouter(ScheduleClassPriceBack))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport {\n  Dimmer,\n} from \"tabler-react\";\n\nimport { GET_SCHEDULE_ITEM_PRICES_QUERY, GET_INPUT_VALUES_QUERY, ADD_SCHEDULE_ITEM_PRICE } from './queries'\nimport { SCHEDULE_CLASS_TEACHER_SCHEMA } from './yupSchema'\nimport ScheduleClassPriceForm from './ScheduleClassPriceForm'\nimport { dateToLocalISO } from '../../../../../tools/date_tools'\n\nimport ClassEditBase from \"../ClassEditBase\"\nimport ScheduleClassPriceBack from \"./ScheduleClassPriceBack\"\n\n\nfunction ScheduleClassPriceAdd({ t, history, match }) {\n  const classId = match.params.class_id\n  const returnUrl = `/schedule/classes/all/prices/${classId}`\n  const cardTitle = t('schedule.classes.prices.title_add')\n  const menuActiveLink = \"prices\"\n  const sidebarButton = <ScheduleClassPriceBack classId={classId} />\n  const { loading, error, data, } = useQuery(GET_INPUT_VALUES_QUERY)\n  const [addScheduleClassPrice] = useMutation(ADD_SCHEDULE_ITEM_PRICE, {\n    onCompleted: () => history.push(returnUrl),\n  })\n\n  if (loading) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n    >\n      <Dimmer active={true} loader={true} />\n    </ClassEditBase>\n  )\n  // Error\n  if (error) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n    >\n      <p>{t('general.error_sad_smiley')}</p>\n    </ClassEditBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n\n\n  return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n    >\n      <Formik\n        initialValues={{ \n          dateStart: new Date() ,\n          organizationClasspassDropin: \"\",\n          organizationClasspassTrial: \"\",\n        }}\n        // validationSchema={SCHEDULE_CLASS_TEACHER_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n\n            let dateEnd\n            if (values.dateEnd) {\n              dateEnd = dateToLocalISO(values.dateEnd)\n            } else {\n              dateEnd = values.dateEnd\n            }\n\n            addScheduleClassPrice({ variables: {\n              input: {\n                scheduleItem: match.params.class_id,\n                dateStart: dateToLocalISO(values.dateStart),\n                dateEnd: dateEnd,\n                organizationClasspassDropin: values.organizationClasspassDropin,\n                organizationClasspassTrial: values.organizationClasspassTrial\n              }\n            }, refetchQueries: [\n                {query: GET_SCHEDULE_ITEM_PRICES_QUERY, variables: { scheduleItem: match.params.class_id }},\n                // {query: GET_SUBSCRIPTIONS_QUERY, variables: {\"archived\": false }},\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data);\n                toast.success((t('schedule.classes.prices.toast_add_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <ScheduleClassPriceForm\n            inputData={inputData}\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            returnUrl={returnUrl}\n          />\n        )}\n    </Formik>\n  </ClassEditBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleClassPriceAdd))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport {\n  Dimmer,\n} from \"tabler-react\";\n\nimport { GET_SCHEDULE_ITEM_PRICES_QUERY, GET_SINGLE_SCHEDULE_ITEM_PRICE_QUERY, UPDATE_SCHEDULE_ITEM_PRICE } from './queries'\nimport { SCHEDULE_CLASS_TEACHER_SCHEMA } from './yupSchema'\nimport ScheduleClassPriceForm from './ScheduleClassPriceForm'\nimport { dateToLocalISO } from '../../../../../tools/date_tools'\n\nimport ClassEditBase from \"../ClassEditBase\"\nimport ScheduleClassPriceBack from \"./ScheduleClassPriceBack\"\n\nfunction ScheduleClassPriceEdit({ t, history, match }) {\n  const id = match.params.id\n  const classId = match.params.class_id\n  const returnUrl = `/schedule/classes/all/prices/${classId}`\n  const menuActiveLink = \"prices\"\n  const cardTitle = t('schedule.classes.prices.title_edit')\n  const sidebarButton = <ScheduleClassPriceBack classId={match.params.class_id} />\n  const { loading, error, data, } = useQuery(GET_SINGLE_SCHEDULE_ITEM_PRICE_QUERY, {\n    variables: {\n      id: id\n    }\n  })\n  const [editScheduleClassPrice] = useMutation(UPDATE_SCHEDULE_ITEM_PRICE, {\n    onCompleted: () => history.push(returnUrl)\n  })\n\n\n  if (loading) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n    >\n      <Dimmer active={true} loader={true} />\n    </ClassEditBase>\n  )\n  // Error\n  if (error) return (\n    <ClassEditBase \n      menuActiveLink={menuActiveLink} \n      cardTitle={cardTitle} \n      sidebarButton={sidebarButton}\n    >\n      <p>{t('general.error_sad_smiley')}</p>\n    </ClassEditBase>\n  )\n\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n\n  let initialOrganizationClasspassDropin\n  let initialOrganizationClasspassTrial\n\n  if (inputData.scheduleItemPrice.organizationClasspassDropin) {\n    initialOrganizationClasspassDropin = inputData.scheduleItemPrice.organizationClasspassDropin.id\n  }\n\n  if (inputData.scheduleItemPrice.organizationClasspassTrial) {\n    initialOrganizationClasspassTrial = inputData.scheduleItemPrice.organizationClasspassTrial.id\n  }\n\n  // DatePicker doesn't like a string as an initial value\n  // This makes it a happy DatePicker :)\n  let dateStart = null\n  let dateEnd = null\n  if (inputData.scheduleItemPrice.dateStart) {\n    dateStart = new Date(inputData.scheduleItemPrice.dateStart)\n  }\n  if (inputData.scheduleItemPrice.dateEnd) {\n    dateEnd = new Date(inputData.scheduleItemPrice.dateEnd)\n  }\n\n\n  return (\n  <ClassEditBase \n    cardTitle={cardTitle}\n    menu_activeLink={menuActiveLink}\n    sidebarButton={sidebarButton}\n  >\n    <Formik\n      initialValues={{ \n        dateStart: dateStart,\n        dateEnd: dateEnd,\n        organizationClasspassDropin: initialOrganizationClasspassDropin,\n        organizationClasspassTrial: initialOrganizationClasspassTrial,\n      }}\n      // validationSchema={SCHEDULE_CLASS_TEACHER_SCHEMA}\n      onSubmit={(values, { setSubmitting }) => {\n\n          let dateEnd\n          if (values.dateEnd) {\n            dateEnd = dateToLocalISO(values.dateEnd)\n          } else {\n            dateEnd = values.dateEnd\n          }\n\n          editScheduleClassPrice({ variables: {\n            input: {\n              id: id,\n              dateStart: dateToLocalISO(values.dateStart),\n              dateEnd: dateEnd,\n              organizationClasspassDropin: values.organizationClasspassDropin,\n              organizationClasspassTrial: values.organizationClasspassTrial\n            }\n          }, refetchQueries: [\n              {query: GET_SCHEDULE_ITEM_PRICES_QUERY, variables: { scheduleItem: match.params.class_id }},\n              // {query: GET_SUBSCRIPTIONS_QUERY, variables: {\"archived\": false }},\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              toast.success((t('schedule.classes.prices.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n      }}\n      >\n      {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n        <ScheduleClassPriceForm\n          inputData={inputData}\n          isSubmitting={isSubmitting}\n          setFieldTouched={setFieldTouched}\n          setFieldValue={setFieldValue}\n          errors={errors}\n          values={values}\n          returnUrl={returnUrl + match.params.class_id}\n        />\n      )}\n  </Formik>\n</ClassEditBase>\n  )\n}\n\n\n// class ScheduleClassTeacherEdit extends Component {\n//   constructor(props) {\n//     super(props)\n//     console.log(\"Schedule class teacher edit props:\")\n//     console.log(props)\n//   }\n\n//   render() {\n//     const t = this.props.t\n//     const match = this.props.match\n//     const history = this.props.history\n//     const id = match.params.id\n//     const class_id = match.params.class_id\n//     const returnUrl = \"/schedule/classes/all/teachers/\" + class_id\n\n//     return (\n//       <SiteWrapper>\n//         <div className=\"my-3 my-md-5\">\n//           <Query query={GET_SINGLE_SCHEDULE_CLASS_TEACHERS_QUERY} variables={{id: id}}>\n//             {({ loading, error, data, refetch }) => {\n//               // Loading\n//               if (loading) return <p>{t('general.loading_with_dots')}</p>\n//               // Error\n//               if (error) {\n//                 console.log(error)\n//                 return <p>{t('general.error_sad_smiley')}</p>\n//               }\n    \n//               console.log('query data')\n//               console.log(data)\n//               const inputData = data\n//               const initialData = data.scheduleItemTeacher\n\n//               let initialAccount2 = \"\"\n//               if (initialData.account2) {\n//                 initialAccount2 =  initialData.account2.id\n//               } \n    \n//               return (\n//                 <ClassEditBase \n//                   card_title={t('schedule.classes.teachers.title_edit')}\n//                   menu_activeLink=\"teachers\"\n//                   sidebar_button={<ScheduleClassTeacherBack classId={class_id} />}\n//                 >\n//                   <Mutation mutation={UPDATE_SCHEDULE_CLASS_TEACHER} onCompleted={() => history.push(returnUrl)}> \n//                     {(addScheduleClassTeacher, { data }) => (\n//                         <Formik\n//                             initialValues={{  \n//                               dateStart: initialData.dateStart,\n//                               dateEnd: initialData.dateEnd,\n//                               account: initialData.account.id,\n//                               role: initialData.role,\n//                               account2: initialAccount2,\n//                               role2: initialData.role2,\n//                             }}\n//                             validationSchema={SCHEDULE_CLASS_TEACHER_SCHEMA}\n//                             onSubmit={(values, { setSubmitting }) => {\n    \n//                                 let dateEnd\n//                                 if (values.dateEnd) {\n//                                   dateEnd = dateToLocalISO(values.dateEnd)\n//                                 } else {\n//                                   dateEnd = values.dateEnd\n//                                 }\n    \n//                                 addScheduleClassTeacher({ variables: {\n//                                   input: {\n//                                     id: match.params.id,\n//                                     account: values.account,\n//                                     role: values.role,\n//                                     account2: values.account2,\n//                                     role2: values.role2,\n//                                     dateStart: dateToLocalISO(values.dateStart),\n//                                     dateEnd: dateEnd\n//                                   }\n//                                 }, refetchQueries: [\n//                                     {query: GET_SCHEDULE_CLASS_TEACHERS_QUERY, variables: { scheduleItem: match.params.class_id }},\n//                                     // {query: GET_SUBSCRIPTIONS_QUERY, variables: {\"archived\": false }},\n//                                 ]})\n//                                 .then(({ data }) => {\n//                                     console.log('got data', data);\n//                                     toast.success((t('schedule.classes.teachers.toast_edit_success')), {\n//                                         position: toast.POSITION.BOTTOM_RIGHT\n//                                       })\n//                                   }).catch((error) => {\n//                                     toast.error((t('general.toast_server_error')) + ': ' +  error, {\n//                                         position: toast.POSITION.BOTTOM_RIGHT\n//                                       })\n//                                     console.log('there was an error sending the query', error)\n//                                     setSubmitting(false)\n//                                   })\n//                             }}\n//                             >\n//                             {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n//                               <ScheduleClassTeacherForm\n//                                 inputData={inputData}\n//                                 isSubmitting={isSubmitting}\n//                                 setFieldTouched={setFieldTouched}\n//                                 setFieldValue={setFieldValue}\n//                                 errors={errors}\n//                                 values={values}\n//                                 returnUrl={returnUrl}\n//                               >\n//                                 {console.log(errors)}\n//                               </ScheduleClassTeacherForm>\n//                             )}\n//                         </Formik>\n//                     )}\n//                   </Mutation>\n//                 </ClassEditBase>\n//               )\n//             }}\n//           </Query>\n//         </div>\n//       </SiteWrapper>\n//     )\n//   }\n// }\n\n\nexport default withTranslation()(withRouter(ScheduleClassPriceEdit))","// @flow\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Page,\n  Container,\n  Grid\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport SiteWrapper from \"../../SiteWrapper\"\n// import ShopAccountBack from \"../ShopAccountBack\"\nimport ScheduleMenu from \"../ScheduleMenu\"\n\n\nfunction ScheduleEventsBase({ t, match, history, children, sidebarContent=\"\", displayMenu=true }) {\n  return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title={t(\"schedule.events.title\")} >\n              <div className=\"page-options d-flex\">\n                {/* Page options can go here... */}\n              </div>\n            </Page.Header>\n            <Grid.Row>\n            <Grid.Col md={9}>\n              { children }\n            </Grid.Col>\n            <Grid.Col md={3}>\n              { sidebarContent }\n                  {/* <div>\n                    <Button\n                      className=\"pull-right\"\n                      color=\"link\"\n                      size=\"sm\"\n                      onClick={() => {\n                        localStorage.setItem(CSLS.SCHEDULE_CLASSES_FILTER_CLASSTYPE, \"\")\n                        localStorage.setItem(CSLS.SCHEDULE_CLASSES_FILTER_LEVEL, \"\")\n                        localStorage.setItem(CSLS.SCHEDULE_CLASSES_FILTER_LOCATION, \"\")\n                        refetch(get_list_query_variables())\n                      }}\n                    >\n                      {t(\"general.clear\")}\n                    </Button>\n                  </div> */}\n                  {/* <h5 className=\"mt-2 pt-1\">{t(\"general.filter\")}</h5>\n                  <ScheduleClassesFilter data={data} refetch={refetch} /> */}\n              {(displayMenu) ?\n                <span>\n                  <h5>{t(\"general.menu\")}</h5>\n                  <ScheduleMenu activeLink='events'/>\n                </span>\n                : \"\" }\n            </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n      </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventsBase))\n","import { gql } from \"@apollo/client\"\n\nexport const GET_SCHEDULE_EVENTS_QUERY = gql`\n  query ScheduleEvents($before:String, $after:String, $archived:Boolean!) {\n    scheduleEvents(first: 100, before: $before, after:$after, archived:$archived) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          archived\n          displayPublic\n          displayShop\n          autoSendInfoMail\n          organizationLocation {\n            id\n            name\n          }\n          name\n          tagline\n          preview\n          description\n          organizationLevel {\n            id\n            name\n          }\n          teacher {\n            id \n            fullName\n          }\n          teacher2 {\n            id\n            fullName\n          }\n          dateStart\n          dateEnd\n          timeStart\n          timeEnd\n          infoMailContent\n          scheduleItems {\n            edges {\n              node {\n                id\n              }\n            }\n          }\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  }\n`\n\nexport const GET_SCHEDULE_EVENT_QUERY = gql`\n  query ScheduleEvent($id: ID!, $before: String, $after: String) {\n    scheduleEvent(id: $id) {\n      id\n      archived\n      displayPublic\n      displayShop\n      autoSendInfoMail\n      organizationLocation {\n        id\n        name\n      }\n      name\n      tagline\n      preview\n      description\n      organizationLevel {\n        id\n        name\n      }\n      teacher {\n        id \n        fullName\n      }\n      teacher2 {\n        id\n        fullName\n      }\n      dateStart\n      dateEnd\n      timeStart\n      timeEnd\n      infoMailContent\n      scheduleItems {\n        edges {\n          node {\n            id\n          }\n        }\n      }\n      createdAt\n      updatedAt\n    }\n    organizationLocations(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    organizationLevels(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    accounts(first: 100, before: $before, after: $after, isActive: true, teacher: true) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          fullName\n        }\n      }\n    }\n  }\n`\n\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query ScheduleEventInputValues($after: String, $before: String) {\n    organizationLocations(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    organizationLevels(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          name\n        }\n      }\n    }\n    accounts(first: 100, before: $before, after: $after, isActive: true, teacher: true) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          fullName\n        }\n      }\n    }\n  }\n`\n\nexport const ARCHIVE_SCHEDULE_EVENT = gql`\n  mutation ArchiveScheduleEvent($input: ArchiveScheduleEventInput!) {\n    archiveScheduleEvent(input: $input) {\n      scheduleEvent {\n        id\n      }\n    }\n  }\n`\n","import CSLS from \"../../../tools/cs_local_storage\"\n\nexport function get_list_query_variables() {\n  let archived = localStorage.getItem(CSLS.SCHEDULE_EVENTS_ARCHIVED)\n  if (archived === null) {\n    archived = false\n  }\n\n  let queryVars = {\n    archived: (archived === \"true\") ? true : false,\n  }\n\n  console.log(queryVars)\n\n  return queryVars\n}\n","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { ARCHIVE_SCHEDULE_EVENT, GET_SCHEDULE_EVENTS_QUERY } from \"./queries\"\nimport confirm_archive from \"../../../tools/confirm_archive\"\nimport confirm_unarchive from \"../../../tools/confirm_unarchive\"\n\nimport {\n  Icon\n} from \"tabler-react\"\nimport { get_list_query_variables } from './tools'\n\n\nfunction ScheduleEventArchive({t, match, history, node}) {\n  const [archiveScheduleEvent] = useMutation(ARCHIVE_SCHEDULE_EVENT)\n  const refetchQueries = [\n    { query: GET_SCHEDULE_EVENTS_QUERY, variables: get_list_query_variables() },\n  ]\n\n  if (!node.archived) {\n    return (\n      <button className=\"icon btn btn-warning btn-sm mb-3 pull-right\" \n          title={t('general.unarchive')} \n          onClick={() => {\n            confirm_archive({\n              t: t,\n              msgConfirm: t(\"schedule.events.archive_confirm_msg\"),\n              msgDescription: <p></p>,\n              msgSuccess: t('general.archived'),\n              archiveFunction: archiveScheduleEvent,\n              functionVariables: { \n                variables: {\n                  input: {\n                    id: node.id,\n                    archived: true\n                  },\n                }, \n                refetchQueries: refetchQueries,\n              }\n            })\n        }}>\n        <span className=\"text-white\"><Icon prefix=\"fe\" name=\"inbox\" /> {\" \"} {t(\"\")}</span>\n      </button>\n    )\n\n  } else {\n    return (\n      <button className=\"icon btn btn-warning btn-sm mb-3 pull-right\" \n        title={t('general.archive')} \n        onClick={() => {\n          confirm_unarchive({\n            t: t,\n            msgConfirm: t(\"schedule.events.unarchive_confirm_msg\"),\n            msgDescription: <p></p>,\n            msgSuccess: t('general.unarchived'),\n            archiveFunction: archiveScheduleEvent,\n            functionVariables: { \n              variables: {\n                input: {\n                  id: node.id,\n                  archived: false\n                },\n              }, \n              refetchQueries: refetchQueries,\n            }\n          })\n      }}>\n        <span className=\"text-white\"><Icon prefix=\"fe\" name=\"inbox\" /> {\" \"} {t(\"\")}</span>\n      </button>\n    )\n  }\n}\n\nexport default withTranslation()(withRouter(ScheduleEventArchive))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n\nimport CSLS from \"../../../tools/cs_local_storage\"\nimport BadgeBoolean from \"../../ui/BadgeBoolean\"\n\nimport ContentCard from \"../../general/ContentCard\"\nimport ScheduleEventsBase from \"./ScheduleEventsBase\"\nimport ScheduleEventArchive from \"./ScheduleEventArchive\"\n\nimport { GET_SCHEDULE_EVENTS_QUERY } from \"./queries\"\nimport { get_list_query_variables } from \"./tools\"\n\n\n// Set some initial values for dates, if not found\nif (!localStorage.getItem(CSLS.SCHEDULE_EVENTS_ARCHIVED)) {\n  localStorage.setItem(CSLS.SCHEDULE_EVENTS_ARCHIVED, false) \n} \n\n\nfunction ScheduleEvents({t, history}) {\n  const { loading, error, data, refetch, fetchMore } = useQuery(GET_SCHEDULE_EVENTS_QUERY, {\n    variables: get_list_query_variables()\n  })\n\n  const sidebarContent = <HasPermissionWrapper permission=\"add\" resource=\"scheduleevent\">\n    <Button color=\"primary btn-block mb-1\"\n            onClick={() => history.push(\"/schedule/events/add\")}>\n      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('schedule.events.add')}\n    </Button>\n  </HasPermissionWrapper>\n\n  const cardHeaderContent = <Card.Options>\n    <Button color={(localStorage.getItem(CSLS.SCHEDULE_EVENTS_ARCHIVED) === \"false\") ? 'primary': 'secondary'}  \n            size=\"sm\"\n            onClick={() => {\n              localStorage.setItem(CSLS.SCHEDULE_EVENTS_ARCHIVED, false)\n              refetch(get_list_query_variables())\n            }\n    }>\n      {t('general.active')}\n    </Button>\n    <Button color={(localStorage.getItem(CSLS.SCHEDULE_EVENTS_ARCHIVED) === \"true\") ? 'primary': 'secondary'} \n            size=\"sm\" \n            className=\"ml-2\" \n            onClick={() => {\n              localStorage.setItem(CSLS.SCHEDULE_EVENTS_ARCHIVED, true)\n              refetch(get_list_query_variables())\n            }\n    }>\n      {t('general.archive')}\n    </Button>\n  </Card.Options>\n\n  if (loading) {\n    return (\n      <ScheduleEventsBase sidebarContent={sidebarContent}>\n        <ContentCard \n          cardTitle={t('schedule.events.title')}\n          headerContent={cardHeaderContent}\n        >\n          <Dimmer active={true}\n                  loader={true}>\n          </Dimmer>\n        </ContentCard>\n      </ScheduleEventsBase>\n    )\n  }\n\n  if (error) {\n    return (\n      <ScheduleEventsBase sidebarContent={sidebarContent}>\n        <ContentCard \n          cardTitle={t('schedule.events.title')}\n          headerContent={cardHeaderContent}\n        >\n          {t(\"schedule.events.error_loading_data\")}\n        </ContentCard>\n      </ScheduleEventsBase>\n    )\n  }\n\n  console.log(data)\n\n  const scheduleEvents = data.scheduleEvents\n\n  return (\n    <ScheduleEventsBase sidebarContent={sidebarContent}>\n      <ContentCard \n        cardTitle={t('schedule.events.title')}\n        headerContent={cardHeaderContent}\n        pageInfo={scheduleEvents.pageInfo}\n            onLoadMore={() => {\n              fetchMore({\n                variables: {\n                  after: scheduleEvents.pageInfo.endCursor\n                },\n                updateQuery: (previousResult, { fetchMoreResult }) => {\n                  const newEdges = fetchMoreResult.scheduleEvents.edges\n                  const pageInfo = fetchMoreResult.scheduleEvents.pageInfo\n\n                  return newEdges.length\n                    ? {\n                        // Put the new subscriptions at the end of the list and update `pageInfo`\n                        // so we have the new `endCursor` and `hasNextPage` values\n                        scheduleEvents: {\n                          __typename: previousResult.scheduleEvents.__typename,\n                          edges: [ ...previousResult.scheduleEvents.edges, ...newEdges ],\n                          pageInfo\n                        }\n                      }\n                    : previousResult\n                }\n              })\n            }} \n      >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.start')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.teacher')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.location')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.shop')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>  \n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            { scheduleEvents.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                {/* <Table.Col>\n                  { moment(node.date).format(dateFormat) } <br />\n                  <span className=\"text-muted\">\n                    {moment(node.date + ' ' + node.scheduleItem.timeStart).format(timeFormat)}\n                  </span>\n                </Table.Col> */}\n                <Table.Col>\n                  { node.name }\n                </Table.Col>\n                <Table.Col>\n                  Date here...\n                </Table.Col>\n                <Table.Col>\n                  {\n                    (node.teacher) ? node.teacher.fullName : \"\"\n                  }\n                </Table.Col>\n                <Table.Col>\n                  { node.organizationLocation.name }\n                </Table.Col>\n                <Table.Col>\n                  <BadgeBoolean value={node.displayShop} />\n                </Table.Col>\n                {/* <Table.Col>\n                  { node.scheduleItem.organizationLocationRoom.organizationLocation.name } <br />\n                  <span className=\"text-muted\">\n                    { node.scheduleItem.organizationLocationRoom.name }\n                  </span> \n                </Table.Col> */}\n                <Table.Col className=\"text-right\" key={v4()}>\n                  {(node.archived) ? \n                    <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n                    <Button className='btn-sm' \n                            onClick={() => history.push(\"/schedule/events/edit/\" + node.id)}\n                            color=\"secondary\">\n                      {t('general.edit')}\n                    </Button>\n                  }\n                </Table.Col>\n                <Table.Col>\n                  <ScheduleEventArchive node={node} />\n                </Table.Col>\n              </Table.Row>\n            ))}\n          </Table.Body>\n        </Table>\n      </ContentCard>\n    </ScheduleEventsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEvents))\n\n\n// const ScheduleEvents = ({ t, history, archived=false }) => (\n//   <SiteWrapper>\n//     <div className=\"my-3 my-md-5\">\n//       <Container>\n//         <Page.Header title={t(\"organization.title\")} />\n//         <Grid.Row>\n//           <Grid.Col md={9}>\n//             <Query query={GET_LEVELS_QUERY} variables={{ archived }}>\n//              {({ loading, error, data: {organizationLevels: levels}, refetch, fetchMore }) => {\n//                 // Loading\n//                 if (loading) return (\n//                   <ContentCard cardTitle={t('organization.levels.title')}>\n//                     <Dimmer active={true}\n//                             loader={true}>\n//                     </Dimmer>\n//                   </ContentCard>\n//                 )\n//                 // Error\n//                 if (error) return (\n//                   <ContentCard cardTitle={t('organization.levels.title')}>\n//                     <p>{t('organization.levels.error_loading')}</p>\n//                   </ContentCard>\n//                 )\n//                 const headerOptions = <Card.Options>\n//                   <Button color={(!archived) ? 'primary': 'secondary'}  \n//                           size=\"sm\"\n//                           onClick={() => {archived=false; refetch({archived});}}>\n//                     {t('general.current')}\n//                   </Button>\n//                   <Button color={(archived) ? 'primary': 'secondary'} \n//                           size=\"sm\" \n//                           className=\"ml-2\" \n//                           onClick={() => {archived=true; refetch({archived});}}>\n//                     {t('general.archive')}\n//                   </Button>\n//                 </Card.Options>\n                \n//                 // Empty list\n//                 if (!levels.edges.length) { return (\n//                   <ContentCard cardTitle={t('organization.levels.title')}\n//                                headerContent={headerOptions}>\n//                     <p>\n//                     {(!archived) ? t('organization.levels.empty_list') : t(\"organization.levels.empty_archive\")}\n//                     </p>\n                   \n//                   </ContentCard>\n//                 )} else {   \n//                 // Life's good! :)\n//                 return (\n//                   <ContentCard cardTitle={t('organization.levels.title')}\n//                                headerContent={headerOptions}\n//                                pageInfo={levels.pageInfo}\n//                                onLoadMore={() => {\n//                                 fetchMore({\n//                                   variables: {\n//                                     after: levels.pageInfo.endCursor\n//                                   },\n//                                   updateQuery: (previousResult, { fetchMoreResult }) => {\n//                                     const newEdges = fetchMoreResult.organizationLevels.edges\n//                                     const pageInfo = fetchMoreResult.organizationLevels.pageInfo\n\n//                                     return newEdges.length\n//                                       ? {\n//                                           // Put the new levels at the end of the list and update `pageInfo`\n//                                           // so we have the new `endCursor` and `hasNextPage` values\n//                                           organizationLevels: {\n//                                             __typename: previousResult.organizationLevels.__typename,\n//                                             edges: [ ...previousResult.organizationLevels.edges, ...newEdges ],\n//                                             pageInfo\n//                                           }\n//                                         }\n//                                       : previousResult\n//                                   }\n//                                 })\n//                               }} >\n//                     <Table>\n//                           <Table.Header>\n//                             <Table.Row key={v4()}>\n//                               <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n//                             </Table.Row>\n//                           </Table.Header>\n//                           <Table.Body>\n//                               {levels.edges.map(({ node }) => (\n//                                 <Table.Row key={v4()}>\n//                                   <Table.Col key={v4()}>\n//                                     {node.name}\n//                                   </Table.Col>\n//                                   <Table.Col className=\"text-right\" key={v4()}>\n//                                     {(node.archived) ? \n//                                       <span className='text-muted'>{t('general.unarchive_to_edit')}</span> :\n//                                       <Button className='btn-sm' \n//                                               onClick={() => history.push(\"/organization/levels/edit/\" + node.id)}\n//                                               color=\"secondary\">\n//                                         {t('general.edit')}\n//                                       </Button>\n//                                     }\n//                                   </Table.Col>\n//                                   <Mutation mutation={ARCHIVE_LEVEL} key={v4()}>\n//                                     {(archiveCostcenter, { data }) => (\n//                                       <Table.Col className=\"text-right\" key={v4()}>\n//                                         <button className=\"icon btn btn-link btn-sm\" \n//                                            title={t('general.archive')} \n//                                            href=\"\"\n//                                            onClick={() => {\n//                                              console.log(\"clicked archived\")\n//                                              let id = node.id\n//                                              archiveCostcenter({ variables: {\n//                                                input: {\n//                                                 id,\n//                                                 archived: !archived\n//                                                }\n//                                         }, refetchQueries: [\n//                                             {query: GET_LEVELS_QUERY, variables: {\"archived\": archived }}\n//                                         ]}).then(({ data }) => {\n//                                           console.log('got data', data);\n//                                           toast.success(\n//                                             (archived) ? t('general.unarchived'): t('general.archived'), {\n//                                               position: toast.POSITION.BOTTOM_RIGHT\n//                                             })\n//                                         }).catch((error) => {\n//                                           toast.error((t('general.toast_server_error')) + ': ' +  error, {\n//                                               position: toast.POSITION.BOTTOM_RIGHT\n//                                             })\n//                                           console.log('there was an error sending the query', error);\n//                                         })\n//                                         }}>\n//                                           <Icon prefix=\"fa\" name=\"inbox\" />\n//                                         </button>\n//                                       </Table.Col>\n//                                     )}\n//                                   </Mutation>\n//                                 </Table.Row>\n//                               ))}\n//                           </Table.Body>\n//                         </Table>\n//                   </ContentCard>\n//                 )}}\n//              }\n//             </Query>\n//           </Grid.Col>\n//           <Grid.Col md={3}>\n//             <HasPermissionWrapper permission=\"add\"\n//                                   resource=\"organizationlevel\">\n//               <Button color=\"primary btn-block mb-6\"\n//                       onClick={() => history.push(\"/organization/levels/add\")}>\n//                 <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('organization.levels.add')}\n//               </Button>\n//             </HasPermissionWrapper>\n//             <OrganizationMenu activeLink='levels'/>\n//           </Grid.Col>\n//         </Grid.Row>\n//       </Container>\n//     </div>\n//   </SiteWrapper>\n// );\n\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const SCHEDULE_EVENT_EDIT_SCHEMA = Yup.object().shape({\n  displayPublic: Yup.boolean(),\n  displayShop: Yup.boolean(),\n  autoSendInfoMail: Yup.boolean(),\n  organizationLocation: Yup.string()\n    .required(t('yup.field_required')),\n  organizationLevel: Yup.string(),\n  teacher: Yup.string(),\n  teacher2: Yup.string(),\n  name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  tagline: Yup.string(),\n  preview: Yup.string(),\n  description: Yup.string(),\n  infoMailContent: Yup.string()\n})\n","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { v4 } from 'uuid'\nimport { Link } from 'react-router-dom'\n\nimport {\n    Button,\n    Card,\n    Form,\n    Grid\n  } from \"tabler-react\"\n  import { Form as FoForm, Field, ErrorMessage } from 'formik'\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../plugin_config/tinymce\"\n\nconst ScheduleEventForm = ({ t, history, inputData, isSubmitting, setFieldValue, setFieldTouched, values, errors, returnUrl }) => (\n  <FoForm>\n    <Card.Body>\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group>\n            <Form.Label className=\"custom-switch\">\n                <Field \n                  className=\"custom-switch-input\"\n                  type=\"checkbox\" \n                  name=\"displayPublic\" \n                  checked={values.displayPublic} />\n                <span className=\"custom-switch-indicator\" ></span>\n                <span className=\"custom-switch-description\">{t('schedule.events.public')}</span>\n            </Form.Label>\n            <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n          </Form.Group>  \n        </Grid.Col>\n        <Grid.Col>\n          <Form.Group>\n            <Form.Label className=\"custom-switch\">\n                <Field \n                className=\"custom-switch-input\"\n                type=\"checkbox\" \n                name=\"displayShop\" \n                checked={values.displayShop} />\n                <span className=\"custom-switch-indicator\" ></span>\n                <span className=\"custom-switch-description\">{t('schedule.events.shop')}</span>\n            </Form.Label>\n            <ErrorMessage name=\"displayShop\" component=\"div\" />   \n          </Form.Group>  \n        </Grid.Col>\n        <Grid.Col>\n          <Form.Group>\n            <Form.Label className=\"custom-switch\">\n                <Field \n                className=\"custom-switch-input\"\n                type=\"checkbox\" \n                name=\"autoSendInfoMail\" \n                checked={values.autoSendInfoMail} />\n                <span className=\"custom-switch-indicator\" ></span>\n                <span className=\"custom-switch-description\">{t('schedule.events.auto_send_info_mail')}</span>\n            </Form.Label>\n            <ErrorMessage name=\"autoSendInfoMail\" component=\"div\" />   \n          </Form.Group>  \n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.location')}>\n            <Field component=\"select\" \n                  name=\"organizationLocation\" \n                  className={(errors.organizationLocation) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\">\n              <option value=\"\" key={v4()}>{t(\"schedule.event.location_please_select\")}</option>\n              {inputData.organizationLocations.edges.map(({ node }) =>\n                <option value={node.id} key={v4()}>{node.name}</option>\n              )}\n            </Field>\n            <ErrorMessage name=\"organizationLocation\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group> \n        </Grid.Col>\n        <Grid.Col>\n          <Form.Group label={t('general.level')}>\n            <Field component=\"select\" \n                  name=\"organizationLevel\" \n                  className={(errors.organizationLevel) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\">\n              <option value=\"\" key={v4()}></option>\n              {inputData.organizationLevels.edges.map(({ node }) =>\n                <option value={node.id} key={v4()}>{node.name}</option>\n              )}\n            </Field>\n            <ErrorMessage name=\"organizationLevel\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group> \n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.teacher')}>\n            <Field component=\"select\" \n                  name=\"teacher\" \n                  className={(errors.teacher) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\">\n              <option value=\"\" key={v4()}>{t(\"schedule.event.teacher_please_select\")}</option>\n              {inputData.accounts.edges.map(({ node }) =>\n                <option value={node.id} key={v4()}>{node.fullName}</option>\n              )}\n            </Field>\n            <ErrorMessage name=\"teacher\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group> \n        </Grid.Col>\n        <Grid.Col>\n          <Form.Group label={t('general.teacher2')}>\n            <Field component=\"select\" \n                  name=\"teacher2\" \n                  className={(errors.teacher2) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\">\n              <option value=\"\" key={v4()}></option>\n              {inputData.accounts.edges.map(({ node }) =>\n                <option value={node.id} key={v4()}>{node.fullName}</option>\n              )}\n            </Field>\n            <ErrorMessage name=\"teacher2\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group> \n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.name')}>\n            <Field type=\"text\" \n                    name=\"name\" \n                    className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.tagline')}>\n            <Field type=\"text\" \n                    name=\"tagline\" \n                    className={(errors.tagline) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n            <ErrorMessage name=\"tagline\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.preview')}>\n            <Editor\n              textareaName=\"preview\"\n              initialValue={values.preview}\n              init={tinymceBasicConf}\n              onChange={(e) => setFieldValue(\"preview\", e.target.getContent())}\n              onBlur={() => setFieldTouched(\"preview\", true)}\n              />\n            <ErrorMessage name=\"preview\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.description')}>\n            <Editor\n              textareaName=\"description\"\n              initialValue={values.description}\n              init={tinymceBasicConf}\n              onChange={(e) => setFieldValue(\"description\", e.target.getContent())}\n              onBlur={() => setFieldTouched(\"description\", true)}\n              />\n            <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col>\n          <Form.Group label={t('general.infoMailContent')}>\n            <Editor\n              textareaName=\"infoMailContent\"\n              initialValue={values.infoMailContent}\n              init={tinymceBasicConf}\n              onChange={(e) => setFieldValue(\"infoMailContent\", e.target.getContent())}\n              onBlur={() => setFieldTouched(\"infoMailContent\", true)}\n              />\n            <ErrorMessage name=\"infoMailContent\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Grid.Col>\n      </Grid.Row>\n    </Card.Body>\n    <Card.Footer>\n      <Button \n        color=\"primary\"\n        className=\"pull-right\" \n        type=\"submit\" \n        disabled={isSubmitting}\n      >\n        {t('general.submit')}\n      </Button>\n      <Link to={returnUrl}>\n        <Button color=\"link\">\n          {t('general.cancel')}\n        </Button>\n      </Link>\n    </Card.Footer>\n  </FoForm>\n)\n  \n  \nexport default withTranslation()(withRouter(ScheduleEventForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Page,\n  Dimmer,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Form,\n} from \"tabler-react\"\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport { get_list_query_variables } from \"./tools\"\n\n\nimport { GET_SCHEDULE_EVENTS_QUERY, GET_INPUT_VALUES_QUERY } from './queries'\nimport { SCHEDULE_EVENT_EDIT_SCHEMA } from './yupSchema'\nimport ScheduleEventForm from './ScheduleEventForm'\nimport ScheduleEventsBase from './ScheduleEventsBase'\nimport FormatISODateStr from '../../ui/ISODateString';\n\n\nconst CREATE_SCHEDULE_EVENT = gql`\n  mutation CreateScheduleEvent($input:CreateScheduleEventInput!) {\n    createScheduleEvent(input: $input) {\n      scheduleEvent{\n        id\n      }\n    }\n  }\n`\n\nconst return_url = \"/organization/events\"\n\nfunction ScheduleEventAdd({ t, history }) {\n  const returnUrl = \"/schedule/events\"\n  const sidebarContent = <Link to={returnUrl}>\n      <Button color=\"primary btn-block mb-6\">\n        <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n      </Button>\n    </Link>\n\n  const { loading, error, data } = useQuery(GET_INPUT_VALUES_QUERY)\n  const [ createScheduleEvent ] = useMutation(CREATE_SCHEDULE_EVENT)\n\n  if (loading) {\n    return (\n      <ScheduleEventsBase sidebarContent={sidebarContent}>\n        <Card title={t(\"schedule.events.add\")}>\n          <Card.Body>\n            <Dimmer loading={true} active={true} />\n          </Card.Body>\n        </Card>\n      </ScheduleEventsBase>\n    )\n  }\n\n  if (error) {\n    return (\n      <ScheduleEventsBase sidebarContent={sidebarContent}>\n        <Card title={t(\"schedule.events.add\")}>\n          <Card.Body>\n            {t(\"schedule.events.error_loading\")}\n          </Card.Body>\n        </Card>\n      </ScheduleEventsBase>\n    )\n  }\n\n  console.log(\"CREATE SCHEDULE EVENT INPUT DATA\")\n  console.log(data)\n  const inputData = data\n\n  return (\n    <ScheduleEventsBase sidebarContent={sidebarContent}>\n      <Card title={t(\"schedule.events.add\")}>\n        <Formik\n          initialValues={{ \n            displayPublic: true,\n            displayShop: true,\n            name: \"\",\n            description: \"\",\n          }}\n          validationSchema={SCHEDULE_EVENT_EDIT_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              createScheduleEvent({ variables: {\n                input: {\n                  displayPublic: values.displayPublic,\n                  displayShop: values.displayShop,\n                  autoSentInfoMail: values.autoSentInfoMail,\n                  organizationLocation: values.organizationLocation,\n                  organizationLevel: values.organizationLevel,\n                  name: values.name,\n                  tagline: values.tagline,\n                  preview: values.preview,\n                  description: values.description,\n                  teacher: values.teacher,\n                  teacher2: values.teacher2,\n                  infoMailContent: values.infoMailContent,\n                }\n              }, refetchQueries: [\n                  { query: GET_SCHEDULE_EVENTS_QUERY, variables: get_list_query_variables() }\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  history.push(returnUrl)\n                  toast.success((t('schedule.events.toast_add_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n            <ScheduleEventForm\n              inputData={inputData}\n              isSubmitting={isSubmitting}\n              setFieldValue={setFieldValue}\n              setFieldTouched={setFieldTouched}\n              errors={errors}\n              values={values}\n              returnUrl={returnUrl}\n            />\n          )}\n        </Formik>\n      </Card>\n    </ScheduleEventsBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventAdd))","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\n\n\nimport {\n  List\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nlet general_active\nlet tickets_active\nlet earlybirds_active\nlet activities_active\nlet media_active\n\nconst ScheduleEventMenu = ({ t, eventId, activeLink }) => (\n  <List.Group transparent={true}>\n    {(activeLink === 'general') ? general_active = true: general_active = false}\n    {(activeLink === 'tickets') ? tickets_active = true: tickets_active = false}\n    {(activeLink === 'earlybirds') ? earlybirds_active = true: earlybirds_active = false}\n    {(activeLink === 'activities') ? activities_active = true: activities_active = false}\n    {(activeLink === 'media') ? media_active = true: media_active = false}\n    \n\n    <HasPermissionWrapper \n        resource=\"scheduleevent\"\n        permission=\"change\" \n    >\n      <List.GroupItem\n          key={v4()}\n          className=\"d-flex align-items-center\"\n          to={`#/schedule/events/edit/${eventId}`}\n          icon=\"edit-2\"\n          active={general_active}\n          >\n          {t('schedule.events.edit.title')}\n      </List.GroupItem>\n    </HasPermissionWrapper>\n    <HasPermissionWrapper \n        resource=\"scheduleeventticket\"\n        permission=\"view\" \n    >\n      <List.GroupItem\n          key={v4()}\n          className=\"d-flex align-items-center\"\n          to={`#/schedule/events/edit/${eventId}/tickets`}\n          icon=\"clipboard\"\n          active={tickets_active}\n          >\n          {t('schedule.events.tickets.title')}\n      </List.GroupItem>\n    </HasPermissionWrapper>\n    <HasPermissionWrapper \n        resource=\"scheduleeventearlybird\"\n        permission=\"view\" \n    >\n      <List.GroupItem\n          key={v4()}\n          className=\"d-flex align-items-center\"\n          to={`#/schedule/events/edit/${eventId}/earlybirds`}\n          icon=\"clock\"\n          active={earlybirds_active}\n          >\n          {t('schedule.events.earlybirds.title')}\n      </List.GroupItem>\n    </HasPermissionWrapper>\n    <HasPermissionWrapper \n        resource=\"scheduleevent\"\n        permission=\"view\" \n    >\n      <List.GroupItem\n          key={v4()}\n          className=\"d-flex align-items-center\"\n          to={`#/schedule/events/edit/${eventId}/activities`}\n          icon=\"calendar\"\n          active={activities_active}\n          >\n          {t('schedule.events.activities.title')}\n      </List.GroupItem>\n    </HasPermissionWrapper>\n    <HasPermissionWrapper \n        resource=\"scheduleeventmedia\"\n        permission=\"view\" \n    >\n      <List.GroupItem\n          key={v4()}\n          className=\"d-flex align-items-center\"\n          to={`#/schedule/events/edit/${eventId}/media`}\n          icon=\"image\"\n          active={media_active}\n          >\n          {t('schedule.events.media.title')}\n      </List.GroupItem>\n    </HasPermissionWrapper>\n  </List.Group>\n);\n\nexport default withTranslation()(ScheduleEventMenu)","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Icon,\n} from \"tabler-react\";\n\nconst ScheduleEventEditBack = ({ t }) => (\n  <div className=\"page-options d-flex\">\n    <Link to=\"/schedule/events\" \n          className='btn btn-link btn-sm mr-2'>\n        <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back_to')} {t('schedule.events.title')}\n    </Link>\n  </div>\n)\n\nexport default withTranslation()(ScheduleEventEditBack)","// @flow\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Page,\n  Container,\n  Grid\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport ScheduleEventEditMenu from \"./ScheduleEventEditMenu\"\nimport ScheduleEventEditBack from \"./ScheduleEventEditBack\"\n\n\nfunction ScheduleEventEditBaseBase({ t, match, history, children, pageHeaderOptions, sidebarContent=\"\", activeLink }) {\n  const eventId = match.params.event_id\n\n  return (\n      <SiteWrapper>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title={t(\"schedule.events.title\")} >\n              <div className=\"page-options d-flex\">\n                {/* Page options can go here... */}\n                <ScheduleEventEditBack />\n                { pageHeaderOptions }\n              </div>\n            </Page.Header>\n            <Grid.Row>\n            <Grid.Col md={9}>\n              { children }\n            </Grid.Col>\n            <Grid.Col md={3}>\n              { sidebarContent }\n              <h5>{t(\"general.edit_menu\")}</h5>\n              <ScheduleEventEditMenu activeLink={activeLink} eventId={eventId}/>\n            </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n      </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventEditBaseBase))","// @flow\n\nimport React, { useContext } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport { GET_SCHEDULE_EVENT_QUERY } from '../queries'\n// import ScheduleEventEditTabs from \"./ScheduleEventEditTabs\"\n\nimport moment from 'moment'\n\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport ScheduleEventEditBaseBase from \"./ScheduleEventEditBaseBase\"\n\n\nfunction ScheduleEventEditBase({\n    t, \n    match, \n    history, \n    activeTab, \n    children, \n    activeLink, \n    cardTitle, \n    pageHeaderOptions,\n    sidebarContent, \n    returnUrl=\"/schedule/events\"}) \n  {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const eventId = match.params.event_id\n\n  // Set default card title\n  if (!cardTitle) {\n    cardTitle = t(\"schedule.events.edit.title\")\n  }\n\n  const { loading, error, data } = useQuery(GET_SCHEDULE_EVENT_QUERY, {\n    variables: { id: eventId }\n  })\n\n  if (loading) {\n    return (\n      <ScheduleEventEditBaseBase pageHeaderOptions={pageHeaderOptions} sidebarContent={sidebarContent} activeLink={activeLink}>\n        <Card title={cardTitle}>\n          <Card.Body>\n            <Dimmer loading={true} active={true} />\n          </Card.Body>\n        </Card>\n      </ScheduleEventEditBaseBase>\n    )\n  }\n\n  if (error) {\n    return (\n      <ScheduleEventEditBaseBase pageHeaderOptions={pageHeaderOptions} sidebarContent={sidebarContent} activeLink={activeLink}>\n        <Card title={cardTitle}>\n          <Card.Body>\n            {t(\"schedule.events.error_loading\")}\n          </Card.Body>\n        </Card>\n      </ScheduleEventEditBaseBase>\n    )\n  }\n\n  const event = data.scheduleEvent\n  const dateStart = (event.dateStart) ? moment(event.dateStart).format(dateFormat) : \"\"\n  const cardSubTitle = (event) ? \n  <span className=\"text-muted\">\n    - {event.name + \" \" + dateStart}\n  </span> : \"\"\n\n  return (\n    <ScheduleEventEditBaseBase cardTitle={cardTitle} pageHeaderOptions={pageHeaderOptions} sidebarContent={sidebarContent} activeLink={activeLink}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle} {cardSubTitle}</Card.Title>\n        </Card.Header>\n        {children}\n      </Card>\n    </ScheduleEventEditBaseBase>\n    )\n  }\n\nexport default withTranslation()(withRouter(ScheduleEventEditBase))","// @flow\n\nimport React from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport { GET_SCHEDULE_EVENTS_QUERY, GET_SCHEDULE_EVENT_QUERY } from '../queries'\nimport { SCHEDULE_EVENT_EDIT_SCHEMA } from '../yupSchema'\n\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport ScheduleEventEditBase from \"./ScheduleEventEditBase\"\nimport ScheduleEventForm from \"../ScheduleEventForm\"\nimport { get_list_query_variables } from \"../tools\"\n\n\nconst UPDATE_SCHEDULE_EVENT = gql`\n  mutation UpdateScheduleEvent($input: UpdateScheduleEventInput!) {\n    updateScheduleEvent(input: $input) {\n      scheduleEvent {\n        id\n        name\n      }\n    }\n  }\n`\n\nfunction ScheduleEventEdit({t, match, history}) {\n  const id = match.params.event_id\n  const returnUrl = \"/schedule/events\"\n  const activeLink = \"general\"\n\n  const { loading, error, data } = useQuery(GET_SCHEDULE_EVENT_QUERY, {\n    variables: { id: id }\n  })\n  const [ updateScheduleEvent ] = useMutation(UPDATE_SCHEDULE_EVENT)\n\n\n  if (loading) {\n    return (\n      <ScheduleEventEditBase activeLink={activeLink}>\n        <Card.Body>\n          <Dimmer loading={true} active={true} />\n        </Card.Body>\n      </ScheduleEventEditBase>\n    )\n  }\n\n  if (error) {\n    return (\n      <ScheduleEventEditBase activeLink={activeLink}>\n        <Card.Body>\n          {t(\"schedule.events.error_loading\")}\n        </Card.Body>\n      </ScheduleEventEditBase>\n    )\n  }\n\n  const initialData = data.scheduleEvent\n  const inputData = data\n\n  let initialOrgranizationlevel = \"\"\n  if (initialData.organizationLevel) {\n    initialOrgranizationlevel = initialData.organizationLevel.id\n  }\n\n  let initialTeacher = \"\"\n  if (initialData.teacher) {\n    initialTeacher = initialData.teacher.id\n  }\n\n  let initialTeacher2 = \"\"\n  if (initialData.teacher2) {\n    initialTeacher2 = initialData.teacher2.id\n  }\n\n  return (\n    <ScheduleEventEditBase activeLink={activeLink}>\n        <Formik\n          initialValues={{ \n            displayPublic: initialData.displayPublic,\n            displayShop: initialData.displayShop,\n            autoSendInfoMail: initialData.autoSendInfoMail,\n            organizationLocation: initialData.organizationLocation.id,\n            organizationLevel: initialOrgranizationlevel,\n            name: initialData.name,\n            tagline: initialData.tagline,\n            preview: initialData.preview,\n            description: initialData.description,\n            teacher: initialTeacher,\n            teacher2: initialTeacher2,\n            infoMailContent: initialData.infoMailContent,\n          }}\n          validationSchema={SCHEDULE_EVENT_EDIT_SCHEMA}\n          onSubmit={(values, { setSubmitting }) => {\n              console.log('submit values:')\n              console.log(values)\n\n              let inputValues = {\n                id: id,\n                displayPublic: values.displayPublic,\n                displayShop: values.displayShop,\n                autoSendInfoMail: values.autoSendInfoMail,\n                organizationLocation: values.organizationLocation,\n                organizationLevel: values.organizationLevel,\n                name: values.name,\n                tagline: values.tagline,\n                preview: values.preview,\n                description: values.description,\n                infoMailContent: values.infoMailContent,\n              }\n\n              if (values.teacher) {\n                inputValues['teacher'] = values.teacher\n              }\n\n              if (values.teacher2) {\n                inputValues['teacher2'] = values.teacher2\n              }\n\n              updateScheduleEvent({ variables: {\n                input: inputValues\n              }, refetchQueries: [\n                  { query: GET_SCHEDULE_EVENTS_QUERY, variables: get_list_query_variables() }\n              ]})\n              .then(({ data }) => {\n                  console.log('got data', data)\n                  toast.success((t('schedule.events.toast_edit_success')), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  setSubmitting(false)\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  console.log('there was an error sending the query', error)\n                  setSubmitting(false)\n                })\n          }}\n          >\n          {({ isSubmitting, setFieldValue, setFieldTouched, errors, values }) => (\n            <ScheduleEventForm\n              inputData={inputData}\n              isSubmitting={isSubmitting}\n              setFieldValue={setFieldValue}\n              setFieldTouched={setFieldTouched}\n              errors={errors}\n              values={values}\n              returnUrl={returnUrl}\n            />\n          )}\n        </Formik>\n    </ScheduleEventEditBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventEdit))","import { gql } from \"@apollo/client\"\n\nexport const GET_SCHEDULE_EVENT_ACTIVITIES_QUERY = gql`\nquery ScheduleItem($before:String, $after:String, $scheduleEvent:ID!) {\n  scheduleItems(first:100, before:$before, after:$after, scheduleEvent:$scheduleEvent) {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n    edges {\n      node {\n        id\n        displayPublic\n        scheduleEvent {\n          id\n          name\n        }\n        organizationLocationRoom {\n          id\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n        name\n        spaces\n        countAttendance\n        dateStart\n        timeStart\n        timeEnd\n        account {\n          id\n          fullName\n        }\n        account2 {\n          id\n          fullName\n        }\n      }\n    }\n  }\n}\n`\n\n\nexport const GET_SCHEDULE_EVENT_ACTIVITY_QUERY = gql`\nquery ScheduleEventActivity($before:String, $after:String, $id:ID!) {\n  scheduleItem(id: $id) {\n    id\n    displayPublic\n    name\n    spaces\n    dateStart\n    timeStart\n    timeEnd\n    organizationLocationRoom {\n      id\n      name\n      organizationLocation {\n        id\n        name\n      }\n    }\n    account {\n      id\n      fullName\n    }\n    account2 {\n      id\n      fullName\n    }\n  }\n  accounts(first: 100, before: $before, after: $after, isActive:true, teacher: true) {\n    pageInfo {\n      startCursor\n      endCursor\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      node {\n        id\n        fullName\n      }\n    }\n  }\n  organizationLocationRooms(first: 100, before: $before, after: $after, archived: false) {\n    pageInfo {\n      startCursor\n      endCursor\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      node {\n        id\n        name\n        organizationLocation {\n          id \n          name\n        }\n      }\n    }\n  }\n}\n`\n\n\nexport const DELETE_SCHEDULE_EVENT_ACTIVITY = gql`\n  mutation DeleteScheduleItem($input: DeleteScheduleItemInput!) {\n    deleteScheduleItem(input: $input) {\n      ok\n    }\n  }\n`\n\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query ScheduleEventActivityInputValues($after: String, $before: String) {\n    accounts(first: 100, before: $before, after: $after, isActive: true, teacher: true) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          fullName\n        }\n      }\n    }\n    organizationLocationRooms(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`","// @flow\n\nimport React, { useContext } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport ContentCard from \"../../../general/ContentCard\"\nimport { GET_SCHEDULE_EVENT_QUERY } from '../queries'\n\nimport moment from 'moment'\n\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport ScheduleEventEditBaseBase from \"./ScheduleEventEditBaseBase\"\n\n\nfunction ScheduleEventEditListBase({t, match, history, activeTab, pageInfo, onLoadMore, activeLink, children, sidebarContent=\"\"}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const cardTitle = t(\"schedule.events.edit.title\")\n\n  const eventId = match.params.event_id\n  const returnUrl = \"/schedule/events\"\n\n  const { loading, error, data } = useQuery(GET_SCHEDULE_EVENT_QUERY, {\n    variables: { id: eventId }\n  })\n\n\nif (loading) {\n  return (\n    <ScheduleEventEditBaseBase sidebarContent={sidebarContent} activeLink={activeLink}>\n      <Card title={cardTitle}>\n        <Card.Body>\n          <Dimmer loading={true} active={true} />\n        </Card.Body>\n      </Card>\n    </ScheduleEventEditBaseBase>\n  )\n}\n\nif (error) {\n  return (\n    <ScheduleEventEditBaseBase sidebarContent={sidebarContent} activeLink={activeLink}>\n      <Card title={cardTitle}>\n        <Card.Body>\n          {t(\"schedule.events.error_loading\")}\n        </Card.Body>\n      </Card>\n    </ScheduleEventEditBaseBase>\n  )\n}\n\nconst event = data.scheduleEvent\nconst dateStart = (event.dateStart) ? moment(event.dateStart).format(dateFormat) : \"\"\nconst cardSubTitle = (event) ? \n<span className=\"text-muted\">\n  - {event.name + \" \" + dateStart}\n</span> : \"\"\n\nreturn (\n  <ScheduleEventEditBaseBase sidebarContent={sidebarContent} activeLink={activeLink}>\n    <ContentCard \n      cardTitle={<span>{cardTitle} {cardSubTitle}</span>}\n      pageInfo={pageInfo}\n      onLoadMore={onLoadMore}\n    >\n      {children}\n    </ContentCard>\n  </ScheduleEventEditBaseBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventEditListBase))","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { DELETE_SCHEDULE_EVENT_ACTIVITY, GET_SCHEDULE_EVENT_ACTIVITIES_QUERY } from \"./queries\"\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\nfunction ScheduleEventActivityDelete({t, match, history, id}) {\n  const eventId = match.params.event_id\n  const [deleteScheduleEventActivity, { data }] = useMutation(DELETE_SCHEDULE_EVENT_ACTIVITY)\n  const query_vars = {\n    scheduleEvent: eventId\n  }\n\n  return (\n    <button className=\"icon btn btn-link btn-sm mb-3 pull-right\" \n      title={t('general.delete')} \n      onClick={() => {\n        confirm_delete({\n          t: t,\n          msgConfirm: t(\"schedule.events.activities.delete_confirm_msg\"),\n          msgDescription: <p></p>,\n          msgSuccess: t('schedule.events.activities.delete_success'),\n          deleteFunction: deleteScheduleEventActivity,\n          functionVariables: { \n            variables: {\n              input: {\n                id: id\n              },\n            }, \n            refetchQueries: [\n              { query: GET_SCHEDULE_EVENT_ACTIVITIES_QUERY, variables: query_vars },\n            ]\n          }\n        })\n    }}>\n      <Icon prefix=\"fe\" name=\"trash-2\" />\n    </button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventActivityDelete))","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport ButtonAddSecondaryMenu from '../../../ui/ButtonAddSecondaryMenu'\nimport BadgeBoolean from \"../../../ui/BadgeBoolean\"\n\nimport { GET_SCHEDULE_EVENT_ACTIVITIES_QUERY } from './queries'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Table,\n} from \"tabler-react\";\n// import HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport ScheduleEventEditListBase from \"../edit/ScheduleEventEditListBase\"\n// import ScheduleEventTicketListBase from \"./ScheduleEventTicketListBase\"\nimport ScheduleEventActivityDelete from \"./ScheduleEventActivityDelete\"\nimport moment from 'moment';\n\n\nfunction ScheduleItems({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  console.log(appSettings)\n  \n  const eventId = match.params.event_id\n  const activeLink = \"activities\"\n\n  const sidebarContent = <Link to={`/schedule/events/edit/${eventId}/activities/add`}>\n    <Button color=\"primary btn-block mb-6\">\n      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('schedule.events.activities.add')}\n    </Button>\n  </Link>\n\n  const { loading, error, data, fetchMore } = useQuery(GET_SCHEDULE_EVENT_ACTIVITIES_QUERY, {\n    variables: {\n      scheduleEvent: eventId\n    }\n  })\n  \n  if (loading) return (\n    <ScheduleEventEditListBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      {t(\"general.loading_with_dots\")}\n    </ScheduleEventEditListBase>\n  )\n  if (error) return (\n    <ScheduleEventEditListBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </ScheduleEventEditListBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n\n  const scheduleItems = data.scheduleItems\n  const pageInfo = data.scheduleItems.pageInfo\n\n  // Empty list\n  if (!scheduleItems.edges.length) { return (\n    <ScheduleEventEditListBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      <p>{t('schedule.events.tickets.empty_list')}</p>\n    </ScheduleEventEditListBase>\n  )}\n\n  const onLoadMore = () => {\n    fetchMore({\n      variables: {\n        after: scheduleItems.pageInfo.endCursor\n      },\n      updateQuery: (previousResult, { fetchMoreResult }) => {\n        const newEdges = fetchMoreResult.scheduleItems.edges\n        const pageInfo = fetchMoreResult.scheduleItems.pageInfo\n\n        return newEdges.length\n          ? {\n              // Put the new invoices at the end of the list and update `pageInfo`\n              // so we have the new `endCursor` and `hasNextPage` values\n              scheduleItems: {\n                __typename: previousResult.scheduleItems.__typename,\n                edges: [ ...previousResult.scheduleItems.edges, ...newEdges ],\n                pageInfo\n              }\n            }\n          : previousResult\n      }\n    })\n  }\n\n  return (\n    <ScheduleEventEditListBase activeLink={activeLink} pageInfo={pageInfo} onLoadMore={onLoadMore} sidebarContent={sidebarContent}>\n      <Table>\n        <Table.Header>\n          <Table.Row key={v4()}>\n            <Table.ColHeader>{t('general.time')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.location')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.teacher')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.filled')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {scheduleItems.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col>\n                  {moment(node.dateStart).format(dateFormat)} <br />\n                  {/* Start & end time */}\n                  {moment(node.dateStart + ' ' + node.timeStart).format(timeFormat)} {' - '}\n                  {moment(node.dateStart + ' ' + node.timeEnd).format(timeFormat)} { ' ' }\n                </Table.Col>\n                <Table.Col>\n                  {node.name} <br />\n                  <div dangerouslySetInnerHTML={{__html: node.description}} className=\"text-muted\"/>\n                </Table.Col>\n                <Table.Col>\n                  {node.organizationLocationRoom.organizationLocation.name} <br />\n                  <span className=\"text-muted\">{node.organizationLocationRoom.name}</span>\n                </Table.Col>\n                <Table.Col>\n                  {node.account.fullName} \n                  {(node.account2) ? <span className=\"text-muted\"><br />{node.account2.fullName}</span> : \"\"}\n                </Table.Col>\n                <Table.Col>\n                  {node.countAttendance}/{node.spaces}\n                </Table.Col>\n                <Table.Col>\n                  <BadgeBoolean value={node.displayPublic} />\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <Link to={`/schedule/events/edit/${eventId}/activities/edit/${node.id}`}>\n                    <Button className='btn-sm' \n                            color=\"secondary\">\n                      {t('general.edit')}\n                    </Button>\n                  </Link>\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <ScheduleEventActivityDelete id={node.id} />\n                </Table.Col>\n              </Table.Row>\n            ))}\n        </Table.Body>\n      </Table>\n    </ScheduleEventEditListBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleItems))\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const SCHEDULE_EVENT_ACTIVITY_SCHEMA = Yup.object().shape({\n  displayPublic: Yup.boolean(),\n  name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  spaces: Yup.number()\n    .required(t('yup.field_required')),\n  organizationLocationRoom: Yup.string()\n    .required(t('yup.field_required')),\n  dateStart: Yup.date()\n    .required(t('yup.field_required')),\n  timeStart: Yup.date()\n    .typeError(t('yup.time_required'))\n    .required(t('yup.field_required')),\n  timeEnd: Yup.date()\n    .typeError(t('yup.time_required'))\n    .required(t('yup.field_required')), \n  account: Yup.string(),\n  account2: Yup.string(),\n})","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\n\nfunction ScheduleEventActivityBack({ t, match }) {\n  const eventId = match.params.event_id\n  const returnUrl = `/schedule/events/edit/${eventId}/activities`\n\n  return (\n    <Link to={returnUrl}>\n      <Button color=\"primary btn-block mb-6\">\n        <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n      </Button>\n    </Link>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventActivityBack))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Form,\n} from \"tabler-react\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../plugin_config/tinymce\"\nimport CSDatePicker from \"../../../ui/CSDatePicker\"\nimport CSTimePicker from \"../../../ui/CSTimePicker\"\n\nfunction ScheduleEventActivityForm ({ \n  t, \n  history, \n  match, \n  isSubmitting, \n  errors, \n  values, \n  inputData, \n  returnUrl, \n  setFieldTouched, \n  setFieldValue, \n  formTitle=\"create\" })   \n{\n\n  return (\n    <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group>\n              <Form.Label className=\"custom-switch\">\n                  <Field \n                    className=\"custom-switch-input\"\n                    type=\"checkbox\" \n                    name=\"displayPublic\" \n                    checked={values.displayPublic} />\n                  <span className=\"custom-switch-indicator\" ></span>\n                  <span className=\"custom-switch-description\">{t('schedule.events.activities.public')}</span>\n              </Form.Label>\n              <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n            </Form.Group>  \n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.name')}>\n              <Field type=\"text\" \n                      name=\"name\" \n                      className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.location')}>\n              <Field component=\"select\" \n                    name=\"organizationLocationRoom\" \n                    className={(errors.organizationLocationRoom) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\" key={v4()}>{t(\"general.please_select\")}</option>\n                {inputData.organizationLocationRooms.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.organizationLocation.name} - {node.name}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"organizationLocationRoom\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.spaces')}>\n                <Field type=\"text\" \n                    name=\"spaces\" \n                    className={(errors.spaces) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n                <ErrorMessage name=\"spaces\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.date')}>\n              <CSDatePicker \n                className={(errors.dateStart) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.dateStart}\n                onChange={(date) => {\n                  setFieldValue(\"dateStart\", date)\n                  setFieldTouched(\"dateStart\", true)\n                }}\n                onBlur={() => setFieldTouched(\"dateStart\", true)}\n              />\n              <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n           <Form.Group label={t('general.time_start')}>\n              <CSTimePicker \n                className={(errors.timeStart) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.timeStart}\n                onChange={(date) => setFieldValue(\"timeStart\", date)}\n                onBlur={() => setFieldTouched(\"timeStart\", true)}\n                clearable={false}\n              />\n              {/* {errors.timeStart}\n              {errors.timeStart && touched.timeStart ? (\n                <span className=\"invalid-feedback\">{errors.timeStart} - hacky thingy</span>\n              ) : null} */}\n              <ErrorMessage name=\"timeStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n           <Form.Group label={t('general.time_end')}>\n              <CSTimePicker \n                className={(errors.timeEnd) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.timeEnd}\n                onChange={(date) => setFieldValue(\"timeEnd\", date)}\n                onBlur={() => setFieldTouched(\"timeEnd\", true)}\n                clearable={false}\n              />\n              <ErrorMessage name=\"timeEnd\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.teacher')}>\n              <Field component=\"select\" \n                      name=\"account\" \n                      className={(errors.account) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                {console.log(\"query data in schedule class teacher add:\")}\n                {console.log(inputData)}\n                <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n                {inputData.accounts.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.fullName}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"account\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.teacher2')}>\n              <Field component=\"select\" \n                      name=\"account2\" \n                      className={(errors.account2) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                <option value=\"\" key={v4()}></option>\n                {inputData.accounts.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.fullName}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"account2\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Button color=\"link\" onClick={() => history.push(returnUrl)} role=\"button\">\n              {t('general.cancel')}\n          </Button>\n      </Card.Footer>\n    </FoForm>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventActivityForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\nimport { dateToLocalISO, dateToLocalISOTime } from '../../../../tools/date_tools'\n\nimport { GET_SCHEDULE_EVENT_ACTIVITIES_QUERY, GET_INPUT_VALUES_QUERY } from \"./queries\"\nimport { SCHEDULE_EVENT_ACTIVITY_SCHEMA } from './yupSchema'\n\nimport ScheduleEventActivityBack from \"./ScheduleEventActivityBack\"\nimport ScheduleEventEditBase from \"../edit/ScheduleEventEditBase\"\nimport ScheduleEventActivityForm from \"./ScheduleEventActivityForm\"\n\n\nconst ADD_SCHEDULE_EVENT_ACTIVITY = gql`\n  mutation CreateScheduleItem($input:CreateScheduleItemInput!) {\n    createScheduleItem(input: $input) {\n      scheduleItem {\n        id\n      }\n    }\n  }\n`\n\n\nfunction ScheduleEventActivityAdd({ t, history, match }) {\n  const eventId = match.params.event_id\n  const returnUrl = `/schedule/events/edit/${eventId}/activities/`\n  const activeLink = 'activities'\n  const cardTitle = t(\"schedule.events.activities.add\")\n\n  const [addScheduleEventTicket] = useMutation(ADD_SCHEDULE_EVENT_ACTIVITY, {\n    onCompleted: () => history.push(returnUrl),\n  })\n  const { loading, error, data, fetchMore } = useQuery(GET_INPUT_VALUES_QUERY)\n\n  const sidebarContent = <ScheduleEventActivityBack />\n\n  if (loading) return (\n    <ScheduleEventEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      {t(\"general.loading_with_dots\")}\n    </ScheduleEventEditBase>\n  )\n  if (error) return (\n    <ScheduleEventEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </ScheduleEventEditBase>\n  )\n\n  const inputData = data\n  console.log(inputData)\n\n  return (\n    <ScheduleEventEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      <Formik\n        initialValues={{ \n          displayPublic: true,\n          name: '',\n          spaces: '',\n          organizationLocationRoom: '',\n          dateStart: new Date(),\n          timeStart: '',\n          timeEnd: '',\n          account: '',\n          account2: ''\n        }}\n        validationSchema={SCHEDULE_EVENT_ACTIVITY_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"submit values\")\n          console.log(values)\n\n          addScheduleEventTicket({ variables: {\n            input: {\n              scheduleEvent: eventId,\n              frequencyType: \"SPECIFIC\",\n              frequencyInterval: 0,\n              scheduleItemType: \"EVENT_ACTIVITY\",\n              displayPublic: values.displayPublic,\n              name: values.name,\n              spaces: values.spaces,\n              organizationLocationRoom: values.organizationLocationRoom,\n              account: values.account,\n              account2: values.account2,\n              dateStart: dateToLocalISO(values.dateStart),\n              timeStart: dateToLocalISOTime(values.timeStart),\n              timeEnd: dateToLocalISOTime(values.timeEnd),\n            }\n          }, refetchQueries: [\n              {query: GET_SCHEDULE_EVENT_ACTIVITIES_QUERY, variables: {\n                scheduleEvent: eventId\n              }},\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              toast.success((t('schedule.events.activities.toast_add_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <ScheduleEventActivityForm\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            inputData={inputData}\n            returnUrl={returnUrl}\n          />\n        )}\n      </Formik>\n    </ScheduleEventEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventActivityAdd))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Link } from 'react-router-dom'\n\nimport CardTabs from \"../../../ui/CardTabs\"\n\nfunction ScheduleEventActivityTabs({ t, active, eventId, scheduleItemId}) {\n  return (\n    <CardTabs \n      position=\"top\"\n      tabs={[\n          {\n            name: \"general\", \n            title: t(\"schedule.events.tickets.edit_menu.general\"), \n            link: `/schedule/events/edit/${eventId}/activities/edit/${scheduleItemId}`\n          },\n          {\n            name: \"attendance\", \n            title: t(\"schedule.events.tickets.edit_menu.attendance\"), \n            link: `/schedule/events/edit/${eventId}/activities/edit/${scheduleItemId}/attendance`\n          },\n      ]}\n      active={active}\n    />\n  )\n}\n\nexport default withTranslation()(ScheduleEventActivityTabs)\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport { GET_SCHEDULE_EVENT_ACTIVITY_QUERY } from './queries'\nimport { GET_SCHEDULE_EVENT_QUERY } from '../queries'\n\nimport moment from 'moment'\n\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport ScheduleEventActivityBack from \"./ScheduleEventActivityBack\"\nimport ScheduleEventEditBaseBase from \"../edit/ScheduleEventEditBaseBase\"\nimport ScheduleEventActivityTabs from \"./ScheduleEventActivityTabs\"\n\n\nfunction ScheduleEventActivityEditBase({t, match, history, activeTab, children}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const cardTitle = t(\"schedule.events.activities.edit\")\n  const activeLink = \"activities\"\n\n  const eventId = match.params.event_id\n  const scheduleItemId = match.params.id\n\n  const { loading, error, data } = useQuery(GET_SCHEDULE_EVENT_QUERY, {\n    variables: { id: eventId }\n  })\n\n  const { loading: loadingActivity, error: errorActivity, data: dataActivity } = useQuery(GET_SCHEDULE_EVENT_ACTIVITY_QUERY, {\n    variables: {\n      id: scheduleItemId\n    }\n  })\n\n  const sidebarContent = <ScheduleEventActivityBack />\n\n  if (loading || loadingActivity) {\n    return (\n      <ScheduleEventEditBaseBase sidebarContent={sidebarContent}>\n        <Card title={cardTitle}>\n          <ScheduleEventActivityTabs active={activeTab} eventId={eventId} scheduleItemId={scheduleItemId}/>\n          <Card.Body>\n            <Dimmer loading={true} active={true} />\n          </Card.Body>\n        </Card>\n      </ScheduleEventEditBaseBase>\n    )\n  }\n\n  if (error || errorActivity) {\n    return (\n      <ScheduleEventEditBaseBase sidebarContent={sidebarContent}>\n        <Card title={cardTitle}>\n          <ScheduleEventActivityTabs active={activeTab} eventId={eventId} scheduleItemId={scheduleItemId}/>\n          <Card.Body>\n            {t(\"schedule.events.error_loading\")}\n          </Card.Body>\n        </Card>\n      </ScheduleEventEditBaseBase>\n    )\n  }\n\n  const event = data.scheduleEvent\n  const scheduleItem = dataActivity.scheduleItem\n  const dateStart = (event.dateStart) ? moment(event.dateStart).format(dateFormat) : \"\"\n  const cardSubTitle = (scheduleItem) ? \n  <span className=\"text-muted\">\n    - {event.name + \" \" + dateStart}\n  </span> : \"\"\n\n  const cardActivitySubtitle = (scheduleItem) ?\n  <span className=\"text-muted\">\n    - {scheduleItem.name}\n  </span> : \"\"\n\n  return (\n    <ScheduleEventEditBaseBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle} {cardSubTitle} {cardActivitySubtitle}</Card.Title>\n        </Card.Header>\n        <ScheduleEventActivityTabs active={activeTab} eventId={eventId} scheduleItemId={scheduleItemId}/>\n        {children}\n      </Card>\n    </ScheduleEventEditBaseBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventActivityEditBase))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\nimport { dateToLocalISO, dateToLocalISOTime, TimeStringToJSDateOBJ } from '../../../../tools/date_tools'\n\nimport { GET_SCHEDULE_EVENT_ACTIVITIES_QUERY, GET_SCHEDULE_EVENT_ACTIVITY_QUERY } from \"./queries\"\nimport { SCHEDULE_EVENT_ACTIVITY_SCHEMA } from './yupSchema'\n\nimport ScheduleEventActivityBack from \"./ScheduleEventActivityBack\"\nimport ScheduleEventActivityEditBase from \"./ScheduleEventActivityEditBase\"\n// import ScheduleEventEditBase from \"../edit/ScheduleEventEditBase\"\nimport ScheduleEventActivityForm from \"./ScheduleEventActivityForm\"\n\n\nconst UPDATE_SCHEDULE_EVENT_ACTIVITY = gql`\n  mutation UpdateScheduleItem($input:UpdateScheduleItemInput!) {\n    updateScheduleItem(input: $input) {\n      scheduleItem {\n        id\n      }\n    }\n  }\n`\n\n\nfunction ScheduleEventActivityEdit({ t, history, match }) {\n  const eventId = match.params.event_id\n  const scheduleItemId = match.params.id\n  const returnUrl = `/schedule/events/edit/${eventId}/activities/`\n  const activeTab = 'general'\n  const cardTitle = t(\"schedule.events.activities.edit\")\n\n  const [updateScheduleEventTicket] = useMutation(UPDATE_SCHEDULE_EVENT_ACTIVITY)\n  const { loading, error, data, fetchMore } = useQuery(GET_SCHEDULE_EVENT_ACTIVITY_QUERY, {\n    variables: {\n      id: scheduleItemId\n  }})\n\n  const sidebarContent = <ScheduleEventActivityBack />\n\n  if (loading) return (\n    <ScheduleEventActivityEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeTab={activeTab} \n      returnUrl={returnUrl}\n    >\n      {t(\"general.loading_with_dots\")}\n    </ScheduleEventActivityEditBase>\n  )\n  if (error) return (\n    <ScheduleEventActivityEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeTab={activeTab} \n      returnUrl={returnUrl}\n    >\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </ScheduleEventActivityEditBase>\n  )\n\n  const inputData = data\n  const scheduleItem = data.scheduleItem\n  console.log(inputData)\n\n  let initialTimeStart = null\n  if (scheduleItem.timeStart) {\n    initialTimeStart = TimeStringToJSDateOBJ(scheduleItem.timeStart)\n  }\n  let initialTimeEnd = null\n  if (scheduleItem.timeEnd) {\n    initialTimeEnd = TimeStringToJSDateOBJ(scheduleItem.timeEnd)\n  }\n\n\n  return (\n    <ScheduleEventActivityEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeTab={activeTab} \n      returnUrl={returnUrl}\n    >\n      <Formik\n        initialValues={{ \n          displayPublic: scheduleItem.displayPublic,\n          name: scheduleItem.name,\n          spaces: scheduleItem.spaces,\n          organizationLocationRoom: scheduleItem.organizationLocationRoom.id,\n          dateStart: scheduleItem.dateStart,\n          timeStart: initialTimeStart,\n          timeEnd: initialTimeEnd,\n          account: (scheduleItem.account) ? scheduleItem.account.id : '',\n          account2: (scheduleItem.account2) ? scheduleItem.account2.id : ''\n        }}\n        validationSchema={SCHEDULE_EVENT_ACTIVITY_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"submit values\")\n          console.log(values)\n\n          updateScheduleEventTicket({ variables: {\n            input: {\n              id: scheduleItemId,\n              displayPublic: values.displayPublic,\n              name: values.name,\n              spaces: values.spaces,\n              organizationLocationRoom: values.organizationLocationRoom,\n              account: values.account,\n              account2: values.account2,\n              dateStart: dateToLocalISO(values.dateStart),\n              timeStart: dateToLocalISOTime(values.timeStart),\n              timeEnd: dateToLocalISOTime(values.timeEnd),\n            }\n          }, refetchQueries: [\n              {query: GET_SCHEDULE_EVENT_ACTIVITIES_QUERY, variables: {\n                scheduleEvent: eventId\n              }},\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              toast.success((t('schedule.events.activities.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              setSubmitting(false)\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <ScheduleEventActivityForm\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            inputData={inputData}\n            returnUrl={returnUrl}\n          />\n        )}\n      </Formik>\n    </ScheduleEventActivityEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventActivityEdit))","import { gql } from \"@apollo/client\"\n\nexport const GET_SCHEDULE_ITEM_ATTENDANCES_QUERY = gql`\nquery ScheduleItemAttendances($before:String, $after:String, $schedule_item:ID!) {\n  scheduleItemAttendances(first: 100, before: $before, after: $after, scheduleItem:$schedule_item) {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n    edges {\n      node {\n        id\n        bookingStatus\n        account {\n          id\n          fullName\n        }\n        accountScheduleEventTicket {\n          id\n          scheduleEventTicket {\n            name\n          }\n          cancelled\n        }\n      }\n    }\n  }\n}\n`\n\n// export const GET_SCHEDULE_EVENT_TICKET_SCHEDULE_ITEM_QUERY = gql`\n// query ScheduleEventTicket($before:String, $after:String, $id:ID!) {\n//   scheduleEventTicket(id: $id) {\n//     id\n//     displayPublic\n//     name\n//     description\n//     price\n//     financeTaxRate {\n//       id\n//       name\n//     }\n//     financeGlaccount {\n//       id\n//       name\n//     }\n//     financeCostcenter {\n//       id\n//       name\n//     }\n//   }\n//   financeTaxRates(first: 100, before: $before, after: $after, archived: false) {\n//     pageInfo {\n//       startCursor\n//       endCursor\n//       hasNextPage\n//       hasPreviousPage\n//     }\n//     edges {\n//       node {\n//         id\n//         name\n//       }\n//     }\n//   }\n//   financeGlaccounts(first: 100, before: $before, after: $after, archived: false) {\n//     pageInfo {\n//       startCursor\n//       endCursor\n//       hasNextPage\n//       hasPreviousPage\n//     }\n//     edges {\n//       node {\n//         id\n//         name\n//       }\n//     }\n//   }\n//   financeCostcenters(first: 100, before: $before, after: $after, archived: false) {\n//     pageInfo {\n//       startCursor\n//       endCursor\n//       hasNextPage\n//       hasPreviousPage\n//     }\n//     edges {\n//       node {\n//         id\n//         name\n//       }\n//     }\n//   }\n// }\n// `\n\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport AppSettingsContext from '../../../../context/AppSettingsContext'\nimport ContentCard from \"../../../../general/ContentCard\"\n\nimport { GET_SCHEDULE_EVENT_ACTIVITY_QUERY } from '../queries'\nimport { GET_SCHEDULE_EVENT_QUERY } from '../../queries'\n\nimport moment from 'moment'\n\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\n\nimport ScheduleEventActivityBack from \"../ScheduleEventActivityBack\"\nimport ScheduleEventEditBaseBase from \"../../edit/ScheduleEventEditBaseBase\"\nimport ScheduleEventActivityTabs from \"../ScheduleEventActivityTabs\"\n\n\nfunction ScheduleEventActivityAttendanceBase({t, match, history, activeTab, onLoadMore, pageInfo, children}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const cardTitle = t(\"schedule.events.activities.edit\")\n  const activeLink = \"activities\"\n\n  const eventId = match.params.event_id\n  const scheduleItemId = match.params.id\n\n  const { loading, error, data } = useQuery(GET_SCHEDULE_EVENT_QUERY, {\n    variables: { id: eventId }\n  })\n\n  const { loading: loadingActivity, error: errorActivity, data: dataActivity } = useQuery(GET_SCHEDULE_EVENT_ACTIVITY_QUERY, {\n    variables: {\n      id: scheduleItemId\n    }\n  })\n\n  const sidebarContent = <ScheduleEventActivityBack />\n\n  if (loading || loadingActivity) {\n    return (\n      <ScheduleEventEditBaseBase  activeLink={activeLink} sidebarContent={sidebarContent}>\n        <Card title={cardTitle}>\n          <ScheduleEventActivityTabs active={activeTab} eventId={eventId} scheduleItemId={scheduleItemId}/>\n          <Card.Body>\n            <Dimmer loading={true} active={true} />\n          </Card.Body>\n        </Card>\n      </ScheduleEventEditBaseBase>\n    )\n  }\n\n  if (error || errorActivity) {\n    return (\n      <ScheduleEventEditBaseBase activeLink={activeLink} sidebarContent={sidebarContent}>\n        <Card title={cardTitle}>\n          <ScheduleEventActivityTabs active={activeTab} eventId={eventId} scheduleItemId={scheduleItemId}/>\n          <Card.Body>\n            {t(\"schedule.event.error_loading\")}\n          </Card.Body>\n        </Card>\n      </ScheduleEventEditBaseBase>\n    )\n  }\n\n  const event = data.scheduleEvent\n  const scheduleItem = dataActivity.scheduleItem\n  const dateStart = (event.dateStart) ? moment(event.dateStart).format(dateFormat) : \"\"\n  const cardSubTitle = (scheduleItem) ? \n  <span className=\"text-muted\">\n    - {event.name + \" \" + dateStart}\n  </span> : \"\"\n\n  const cardActivitySubtitle = (scheduleItem) ?\n  <span className=\"text-muted\">\n    - {scheduleItem.name}\n  </span> : \"\"\n\n  return (\n    <ScheduleEventEditBaseBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      <ContentCard \n        cardTitle={<span>{cardTitle} {cardSubTitle} {cardActivitySubtitle}</span>}\n        cardTabs={<ScheduleEventActivityTabs active={activeTab} eventId={eventId} scheduleItemId={scheduleItemId}/>}\n        pageInfo={pageInfo}\n        onLoadMore={onLoadMore}\n      >\n        \n        {children}\n      </ContentCard>\n      {/* <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle} {cardSubTitle} {cardActivitySubtitle}</Card.Title>\n        </Card.Header>\n        <ScheduleEventActivityTabs active={activeTab} eventId={eventId} scheduleItemId={scheduleItemId}/>\n        {children}\n      </Card> */}\n    </ScheduleEventEditBaseBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventActivityAttendanceBase))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\n\nimport {\n  Table\n} from \"tabler-react\"\n\n// import { dateToLocalISO, dateToLocalISOTime, TimeStringToJSDateOBJ } from '../../../../tools/date_tools'\n\nimport { GET_SCHEDULE_ITEM_ATTENDANCES_QUERY } from \"./queries\"\n// import { SCHEDULE_EVENT_ACTIVITY_SCHEMA } from './yupSchema'\n\nimport ScheduleEventActivityBack from \"../ScheduleEventActivityBack\"\nimport ScheduleEventActivityAttendanceBase from \"./ScheduleEventActivityAttendanceBase\"\n// import ScheduleEventEditBase from \"../edit/ScheduleEventEditBase\"\n// import ScheduleEventActivityForm from \"./ScheduleEventActivityForm\"\nimport BadgeBookingStatus from \"../../../../ui/BadgeBookingStatus\"\n\n\nfunction ScheduleEventActivityAttendance({ t, history, match }) {\n  const eventId = match.params.event_id\n  const scheduleItemId = match.params.id\n  const returnUrl = `/schedule/events/edit/${eventId}/activities/`\n  const activeTab = 'attendance'\n  const cardTitle = t(\"schedule.events.activities.edit\")\n  const activeLink = \"activities\"\n\n  const { loading, error, data, fetchMore } = useQuery(GET_SCHEDULE_ITEM_ATTENDANCES_QUERY, {\n    variables: {\n      schedule_item: scheduleItemId\n    },\n    fetchPolicy: \"network-only\"\n  })\n\n  const sidebarContent = <ScheduleEventActivityBack />\n\n  if (loading) return (\n    <ScheduleEventActivityAttendanceBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeTab={activeTab} \n      returnUrl={returnUrl}\n    >\n      {t(\"general.loading_with_dots\")}\n    </ScheduleEventActivityAttendanceBase>\n  )\n  if (error) return (\n    <ScheduleEventActivityAttendanceBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeTab={activeTab} \n      returnUrl={returnUrl}\n    >\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </ScheduleEventActivityAttendanceBase>\n  )\n\n  const scheduleItemAttendances = data.scheduleItemAttendances\n  console.log(data)\n  const pageInfo = scheduleItemAttendances.pageInfo\n\n  // Empty list\n  if (!scheduleItemAttendances.edges.length) { return (\n    <ScheduleEventActivityAttendanceBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      <p>{t('schedule.events.activities.attendance.empty_list')}</p>\n    </ScheduleEventActivityAttendanceBase>\n  )}\n\n  const onLoadMore = () => {\n    fetchMore({\n      variables: {\n        after: scheduleItemAttendances.pageInfo.endCursor\n      },\n      updateQuery: (previousResult, { fetchMoreResult }) => {\n        const newEdges = fetchMoreResult.scheduleItemAttendances.edges\n        const pageInfo = fetchMoreResult.scheduleItemAttendances.pageInfo\n\n        return newEdges.length\n          ? {\n              // Put the new attendance items at the end of the list and update `pageInfo`\n              // so we have the new `endCursor` and `hasNextPage` values\n              scheduleItemAttendances: {\n                __typename: previousResult.scheduleItemAttendances.__typename,\n                edges: [ ...previousResult.scheduleItemAttendances.edges, ...newEdges ],\n                pageInfo\n              }\n            }\n          : previousResult\n      }\n    })\n  }\n\n  return (\n    <ScheduleEventActivityAttendanceBase \n      // sidebarContent={sidebarContent} \n      // cardTitle={cardTitle} \n      activeTab={activeTab} \n      pageInfo={pageInfo}\n      onLoadMore={onLoadMore}\n    >\n      <Table>\n        <Table.Header>\n          <Table.Row key={v4()}>\n            <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.booking_status')}</Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          {scheduleItemAttendances.edges.map(({ node }) => (\n            <Table.Row key={v4()}>\n              <Table.Col>\n                {node.account.fullName}\n              </Table.Col>\n              <Table.Col>\n                <BadgeBookingStatus status={node.bookingStatus} />\n              </Table.Col>\n            </Table.Row>\n          ))}\n        </Table.Body>\n      </Table>\n    </ScheduleEventActivityAttendanceBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventActivityAttendance))","import { gql } from \"@apollo/client\"\n\n\nexport const GET_SCHEDULE_EVENT_EARLYBIRDS_QUERY = gql`\n  query ScheduleEventEarlybirds($before:String, $after:String, $scheduleEvent:ID!) {\n    scheduleEventEarlybirds(first: 100, before:$before, after:$after, scheduleEvent:$scheduleEvent) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          scheduleEvent {\n            id\n          }\n          discountPercentage\n          dateStart\n          dateEnd\n        }\n      }\n    }\n  }\n`\n\n\nexport const GET_SCHEDULE_EVENT_EARLYBIRD_QUERY = gql`\n  query ScheduleEventEarlybird($id:ID!) {\n    scheduleEventEarlybird(id: $id) {\n      id\n      discountPercentage\n      dateStart\n      dateEnd\n    }\n  }\n`\n\n\nexport const ADD_SCHEDULE_EVENT_EARLYBIRD = gql`\n  mutation CreateScheduleEventEarlybird($input:CreateScheduleEventEarlybirdInput!) {\n    createScheduleEventEarlybird(input: $input) {\n      scheduleEventEarlybird {\n        id\n      }\n    }\n  }\n`\n\n\nexport const UPDATE_SCHEDULE_EVENT_EARLYBIRD = gql`\n  mutation UpdateScheduleEventEarlybird($input:UpdateScheduleEventEarlybirdInput!) {\n    updateScheduleEventEarlybird(input: $input) {\n      scheduleEventEarlybird {\n        id\n      }\n    }\n  }\n`\n\n\nexport const DELETE_SCHEDULE_EVENT_EARLYBIRD   = gql`\n  mutation DeleteScheduleEventEarlybird($input: DeleteScheduleEventEarlybirdInput!) {\n    deleteScheduleEventEarlybird(input: $input) {\n      ok\n    }\n  }\n`\n","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { DELETE_SCHEDULE_EVENT_EARLYBIRD, GET_SCHEDULE_EVENT_EARLYBIRDS_QUERY } from \"./queries\"\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\nfunction ScheduleEventEarlybirdDelete({t, match, history, id}) {\n  const eventId = match.params.event_id\n  const [deleteScheduleEventEarlybird, { data }] = useMutation(DELETE_SCHEDULE_EVENT_EARLYBIRD)\n  const query_vars = {\n    scheduleEvent: eventId\n  }\n\n  return (\n    <button className=\"icon btn btn-link btn-sm mb-3 pull-right\" \n      title={t('general.delete')} \n      onClick={() => {\n        confirm_delete({\n          t: t,\n          msgConfirm: t(\"schedule.events.earlybirds.delete_confirm_msg\"),\n          msgDescription: <p></p>,\n          msgSuccess: t('schedule.events.earlybirds.delete_success'),\n          deleteFunction: deleteScheduleEventEarlybird,\n          functionVariables: { \n            variables: {\n              input: {\n                id: id\n              },\n            }, \n            refetchQueries: [\n              { query: GET_SCHEDULE_EVENT_EARLYBIRDS_QUERY, variables: query_vars },\n            ]\n          }\n        })\n    }}>\n      <Icon prefix=\"fe\" name=\"trash-2\" />\n    </button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventEarlybirdDelete))","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport ButtonAddSecondaryMenu from '../../../ui/ButtonAddSecondaryMenu'\nimport BadgeBoolean from \"../../../ui/BadgeBoolean\"\n\nimport { GET_SCHEDULE_EVENT_EARLYBIRDS_QUERY } from './queries'\n\nimport {\n  Avatar,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Table,\n} from \"tabler-react\";\n// import HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport ScheduleEventEditListBase from \"../edit/ScheduleEventEditListBase\"\n// import ScheduleEventTicketListBase from \"./ScheduleEventTicketListBase\"\nimport ScheduleEventEarlybirdDelete from \"./ScheduleEventEarlybirdDelete\"\nimport moment from 'moment';\n\n\nfunction ScheduleEventEarlybirds({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  console.log(appSettings)\n  \n  const eventId = match.params.event_id\n  const activeLink = \"earlybirds\"\n\n  const sidebarContent = <Link to={`/schedule/events/edit/${eventId}/earlybirds/add`}>\n    <Button color=\"primary btn-block mb-6\">\n      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('schedule.events.earlybirds.add')}\n    </Button>\n  </Link>\n\n  const { loading, error, data, fetchMore } = useQuery(GET_SCHEDULE_EVENT_EARLYBIRDS_QUERY, {\n    variables: {\n      scheduleEvent: eventId\n    }\n  })\n  \n  if (loading) return (\n    <ScheduleEventEditListBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      {t(\"general.loading_with_dots\")}\n    </ScheduleEventEditListBase>\n  )\n  if (error) return (\n    <ScheduleEventEditListBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </ScheduleEventEditListBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n\n  const scheduleEventEarlybirds = data.scheduleEventEarlybirds\n  const pageInfo = data.scheduleEventEarlybirds.pageInfo\n\n  // Empty list\n  if (!scheduleEventEarlybirds.edges.length) { return (\n    <ScheduleEventEditListBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      <p>{t('schedule.events.earlybirds.empty_list')}</p>\n    </ScheduleEventEditListBase>\n  )}\n\n  const onLoadMore = () => {\n    fetchMore({\n      variables: {\n        after: scheduleEventEarlybirds.pageInfo.endCursor\n      },\n      updateQuery: (previousResult, { fetchMoreResult }) => {\n        const newEdges = fetchMoreResult.scheduleEventEarlybirds.edges\n        const pageInfo = fetchMoreResult.scheduleEventEarlybirds.pageInfo\n\n        return newEdges.length\n          ? {\n              // Put the new invoices at the end of the list and update `pageInfo`\n              // so we have the new `endCursor` and `hasNextPage` values\n              scheduleEventEarlybirds: {\n                __typename: previousResult.scheduleEventEarlybirds.__typename,\n                edges: [ ...previousResult.scheduleEventEarlybirds.edges, ...newEdges ],\n                pageInfo\n              }\n            }\n          : previousResult\n      }\n    })\n  }\n\n  return (\n    <ScheduleEventEditListBase activeLink={activeLink} pageInfo={pageInfo} onLoadMore={onLoadMore} sidebarContent={sidebarContent}>\n      <Table>\n        <Table.Header>\n          <Table.Row key={v4()}>\n            <Table.ColHeader>{t('general.date_start')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.date_end')}</Table.ColHeader>\n            <Table.ColHeader>{t('schedule.events.earlybirds.discountPercentage')}</Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {scheduleEventEarlybirds.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col>\n                  {moment(node.dateStart).format(dateFormat)}\n                </Table.Col>\n                <Table.Col>\n                  {moment(node.dateEnd).format(dateFormat)}\n                </Table.Col>\n                <Table.Col>\n                  {node.discountPercentage} %\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <Link to={`/schedule/events/edit/${eventId}/earlybirds/edit/${node.id}`}>\n                    <Button className='btn-sm' \n                            color=\"secondary\">\n                      {t('general.edit')}\n                    </Button>\n                  </Link>\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <ScheduleEventEarlybirdDelete id={node.id} />\n                </Table.Col>\n              </Table.Row>\n            ))}\n        </Table.Body>\n      </Table>\n    </ScheduleEventEditListBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventEarlybirds))\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const SCHEDULE_EVENT_EARLYBIRDS_SCHEMA = Yup.object().shape({\n  dateStart: Yup.date()\n    .required(t('yup.field_required')),\n  dateEnd: Yup.date()\n    .required(t('yup.field_required')),\n  discountPercentage: Yup.number()\n  .required(t('yup.field_required')),\n})","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\n\nfunction ScheduleEventEarlybirdsBack({ t, match }) {\n  const eventId = match.params.event_id\n  const returnUrl = `/schedule/events/edit/${eventId}/earlybirds`\n\n  return (\n    <Link to={returnUrl}>\n      <Button color=\"primary btn-block mb-6\">\n        <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n      </Button>\n    </Link>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventEarlybirdsBack))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Form,\n} from \"tabler-react\"\n\nimport CSDatePicker from \"../../../ui/CSDatePicker\"\n\nfunction ScheduleEventMediaForm ({ \n  t, \n  history, \n  match, \n  isSubmitting, \n  errors, \n  values, \n  returnUrl,\n  setFieldTouched,\n  setFieldValue,\n})   \n{\n  return (\n    <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.date_start')}>\n              <CSDatePicker \n                className={(errors.dateStart) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.dateStart}\n                onChange={(date) => {\n                  setFieldValue(\"dateStart\", date)\n                  setFieldTouched(\"dateStart\", true)\n                }}\n                onBlur={() => setFieldTouched(\"dateStart\", true)}\n              />\n              <ErrorMessage name=\"dateStart\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.date_end')}>\n              <CSDatePicker \n                className={(errors.dateEnd) ? \"form-control is-invalid\" : \"form-control\"} \n                selected={values.dateEnd}\n                onChange={(date) => {\n                  setFieldValue(\"dateEnd\", date)\n                  setFieldTouched(\"dateEnd\", true)\n                }}\n                onBlur={() => setFieldTouched(\"dateEnd\", true)}\n              />\n              <ErrorMessage name=\"dateEnd\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('schedule.events.earlybirds.discountPercentage')}>\n              <Field type=\"text\" \n                    name=\"discountPercentage\" \n                    className={(errors.discountPercentage) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n              <ErrorMessage name=\"discountPercentage\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Link to={returnUrl}>\n            <Button color=\"link\" role=\"button\">\n                {t('general.cancel')}\n            </Button>\n          </Link>\n      </Card.Footer>\n    </FoForm>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventMediaForm))","// @flow\n\nimport React, { useState, useRef } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport { dateToLocalISO } from '../../../../tools/date_tools'\n\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\nimport { ADD_SCHEDULE_EVENT_EARLYBIRD, GET_SCHEDULE_EVENT_EARLYBIRDS_QUERY } from \"./queries\"\nimport { SCHEDULE_EVENT_EARLYBIRDS_SCHEMA } from './yupSchema'\n\nimport ScheduleEventEarlybirdBack from \"./ScheduleEventEarlybirdsBack\"\nimport ScheduleEventEditBase from \"../edit/ScheduleEventEditBase\"\nimport ScheduleEventEarlybirdForm from \"./ScheduleEventEarlybirdForm\"\n\n\nfunction ScheduleEventEarlybirdAdd({ t, history, match }) {\n  const eventId = match.params.event_id\n  const returnUrl = `/schedule/events/edit/${eventId}/earlybirds/`\n  const activeLink = 'earlybirds'\n  const cardTitle = t(\"schedule.events.earlybirds.add\")\n\n  const [addScheduleEventEarlybird] = useMutation(ADD_SCHEDULE_EVENT_EARLYBIRD)\n\n  const sidebarContent = <ScheduleEventEarlybirdBack />\n\n  return (\n    <ScheduleEventEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      <Formik\n        initialValues={{ \n          dateStart: new Date(),\n          dateEnd: \"\",\n          discountPercentage: 0,\n        }}\n        validationSchema={SCHEDULE_EVENT_EARLYBIRDS_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"Submit values\")\n          console.log(values)\n\n          addScheduleEventEarlybird({ variables: {\n            input: {\n              scheduleEvent: eventId,\n              dateStart: dateToLocalISO(values.dateStart),\n              dateEnd: dateToLocalISO(values.dateEnd),\n              discountPercentage: values.discountPercentage   \n            }\n          }, refetchQueries: [\n              {query: GET_SCHEDULE_EVENT_EARLYBIRDS_QUERY, variables: {scheduleEvent: eventId}}\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              history.push(returnUrl)\n              toast.success((t('schedule.events.earlybirds.toast_add_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              setSubmitting(false)\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n      >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <ScheduleEventEarlybirdForm\n            isSubmitting={isSubmitting}\n            errors={errors}\n            values={values}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            returnUrl={returnUrl}\n          />\n        )}\n      </Formik>\n    </ScheduleEventEditBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventEarlybirdAdd))","// @flow\n\nimport React, { useState, useRef } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport { dateToLocalISO } from '../../../../tools/date_tools'\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\nimport { \n  GET_SCHEDULE_EVENT_EARLYBIRDS_QUERY, \n  GET_SCHEDULE_EVENT_EARLYBIRD_QUERY,\n  UPDATE_SCHEDULE_EVENT_EARLYBIRD\n } from \"./queries\"\nimport { SCHEDULE_EVENT_EARLYBIRDS_SCHEMA } from './yupSchema'\n\nimport ScheduleEventEarlybirdBack from \"./ScheduleEventEarlybirdsBack\"\nimport ScheduleEventEditBase from \"../edit/ScheduleEventEditBase\"\nimport ScheduleEventEarlybirdForm from \"./ScheduleEventEarlybirdForm\"\n\n\nfunction ScheduleEventEarlybirdEdit({ t, history, match }) {\n  const eventId = match.params.event_id\n  const scheduleEventEarlybirdId = match.params.id\n  const returnUrl = `/schedule/events/edit/${eventId}/earlybirds/`\n  const activeTab = 'general'\n  const cardTitle = t(\"schedule.events.earlybirds.edit\")\n\n  const [updateScheduleEventEarlybird] = useMutation(UPDATE_SCHEDULE_EVENT_EARLYBIRD)\n  const { loading, error, data, fetchMore } = useQuery(GET_SCHEDULE_EVENT_EARLYBIRD_QUERY, {\n    variables: {\n      id: scheduleEventEarlybirdId\n  }})\n\n  const sidebarContent = <ScheduleEventEarlybirdBack />\n\n  if (loading) return (\n    <ScheduleEventEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeTab={activeTab} \n      returnUrl={returnUrl}\n    >\n      {t(\"general.loading_with_dots\")}\n    </ScheduleEventEditBase>\n  )\n  if (error) return (\n    <ScheduleEventEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeTab={activeTab} \n      returnUrl={returnUrl}\n    >\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </ScheduleEventEditBase>\n  )\n\n  const inputData = data\n  const scheduleEventEarlybird = data.scheduleEventEarlybird\n  console.log(inputData)\n\n  return (\n    <ScheduleEventEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeTab={activeTab} \n      returnUrl={returnUrl}\n    >\n      <Formik\n        initialValues={{ \n          dateStart: scheduleEventEarlybird.dateStart,\n          dateEnd: scheduleEventEarlybird.dateEnd,\n          discountPercentage: scheduleEventEarlybird.discountPercentage\n        }}\n        validationSchema={SCHEDULE_EVENT_EARLYBIRDS_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"Submit values\")\n          console.log(values)\n\n          updateScheduleEventEarlybird({ variables: {\n            input: {\n              id: scheduleEventEarlybirdId,\n              dateStart: dateToLocalISO(values.dateStart),\n              dateEnd: dateToLocalISO(values.dateEnd),\n              discountPercentage: values.discountPercentage   \n            }\n          }, refetchQueries: [\n              {query: GET_SCHEDULE_EVENT_EARLYBIRDS_QUERY, variables: {scheduleEvent: eventId}}\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              history.push(returnUrl)\n              toast.success((t('schedule.events.earlybirds.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              setSubmitting(false)\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <ScheduleEventEarlybirdForm\n            isSubmitting={isSubmitting}\n            errors={errors}\n            values={values}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            returnUrl={returnUrl}\n          />\n        )}\n      </Formik>\n    </ScheduleEventEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventEarlybirdEdit))","import { gql } from \"@apollo/client\"\n\n\nexport const GET_SCHEDULE_EVENT_MEDIAS_QUERY = gql`\n  query ScheduleEventMedias($before:String, $after:String, $scheduleEvent:ID!) {\n    scheduleEventMedias(first: 100, before:$before, after:$after, scheduleEvent:$scheduleEvent) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          scheduleEvent {\n            id\n          }\n          sortOrder\n          description\n          urlImage\n          urlImageThumbnailSmall\n          image\n        }\n      }\n    }\n  }\n`\n\n\nexport const GET_SCHEDULE_EVENT_MEDIA_QUERY = gql`\n  query ScheduleEventMedia($id:ID!) {\n    scheduleEventMedia(id: $id) {\n      id\n      sortOrder\n      description\n      image\n    }\n  }\n`\n\n\nexport const DELETE_SCHEDULE_EVENT_MEDIA   = gql`\n  mutation DeleteScheduleEventMedia($input: DeleteScheduleEventMediaInput!) {\n    deleteScheduleEventMedia(input: $input) {\n      ok\n    }\n  }\n`\n\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query ScheduleEventActivityInputValues($after: String, $before: String) {\n    accounts(first: 100, before: $before, after: $after, isActive: true, teacher: true) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          fullName\n        }\n      }\n    }\n    organizationLocationRooms(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { DELETE_SCHEDULE_EVENT_MEDIA, GET_SCHEDULE_EVENT_MEDIAS_QUERY } from \"./queries\"\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\nfunction ScheduleEventMediaDelete({t, match, history, id}) {\n  const eventId = match.params.event_id\n  const [deleteScheduleEventMedia, { data }] = useMutation(DELETE_SCHEDULE_EVENT_MEDIA)\n  const query_vars = {\n    scheduleEvent: eventId\n  }\n\n  return (\n    <button className=\"icon btn btn-link btn-sm mb-3 pull-right\" \n      title={t('general.delete')} \n      onClick={() => {\n        confirm_delete({\n          t: t,\n          msgConfirm: t(\"schedule.events.media.delete_confirm_msg\"),\n          msgDescription: <p></p>,\n          msgSuccess: t('schedule.events.media.delete_success'),\n          deleteFunction: deleteScheduleEventMedia,\n          functionVariables: { \n            variables: {\n              input: {\n                id: id\n              },\n            }, \n            refetchQueries: [\n              { query: GET_SCHEDULE_EVENT_MEDIAS_QUERY, variables: query_vars },\n            ]\n          }\n        })\n    }}>\n      <Icon prefix=\"fe\" name=\"trash-2\" />\n    </button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventMediaDelete))","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport ButtonAddSecondaryMenu from '../../../ui/ButtonAddSecondaryMenu'\nimport BadgeBoolean from \"../../../ui/BadgeBoolean\"\n\nimport { GET_SCHEDULE_EVENT_MEDIAS_QUERY } from './queries'\n\nimport {\n  Avatar,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Table,\n} from \"tabler-react\";\n// import HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport ScheduleEventEditListBase from \"../edit/ScheduleEventEditListBase\"\n// import ScheduleEventTicketListBase from \"./ScheduleEventTicketListBase\"\nimport ScheduleEventMediaDelete from \"./ScheduleEventMediaDelete\"\nimport moment from 'moment';\n\n\nfunction ScheduleEventMedia({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  console.log(appSettings)\n  \n  const eventId = match.params.event_id\n  const activeLink = \"media\"\n\n  const sidebarContent = <Link to={`/schedule/events/edit/${eventId}/media/add`}>\n    <Button color=\"primary btn-block mb-6\">\n      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('schedule.events.media.add')}\n    </Button>\n  </Link>\n\n  const { loading, error, data, fetchMore } = useQuery(GET_SCHEDULE_EVENT_MEDIAS_QUERY, {\n    variables: {\n      scheduleEvent: eventId\n    }\n  })\n  \n  if (loading) return (\n    <ScheduleEventEditListBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      {t(\"general.loading_with_dots\")}\n    </ScheduleEventEditListBase>\n  )\n  if (error) return (\n    <ScheduleEventEditListBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </ScheduleEventEditListBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n\n  const scheduleEventMedias = data.scheduleEventMedias\n  const pageInfo = data.scheduleEventMedias.pageInfo\n\n  // Empty list\n  if (!scheduleEventMedias.edges.length) { return (\n    <ScheduleEventEditListBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      <p>{t('schedule.events.media.empty_list')}</p>\n    </ScheduleEventEditListBase>\n  )}\n\n  const onLoadMore = () => {\n    fetchMore({\n      variables: {\n        after: scheduleEventMedias.pageInfo.endCursor\n      },\n      updateQuery: (previousResult, { fetchMoreResult }) => {\n        const newEdges = fetchMoreResult.scheduleEventMedias.edges\n        const pageInfo = fetchMoreResult.scheduleEventMedias.pageInfo\n\n        return newEdges.length\n          ? {\n              // Put the new invoices at the end of the list and update `pageInfo`\n              // so we have the new `endCursor` and `hasNextPage` values\n              scheduleEventMedias: {\n                __typename: previousResult.scheduleEventMedias.__typename,\n                edges: [ ...previousResult.scheduleEventMedias.edges, ...newEdges ],\n                pageInfo\n              }\n            }\n          : previousResult\n      }\n    })\n  }\n\n  return (\n    <ScheduleEventEditListBase activeLink={activeLink} pageInfo={pageInfo} onLoadMore={onLoadMore} sidebarContent={sidebarContent}>\n      <Table>\n        <Table.Header>\n          <Table.Row key={v4()}>\n            <Table.ColHeader></Table.ColHeader> \n            <Table.ColHeader>{t('general.description')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.sort_order')}</Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n            {scheduleEventMedias.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col>\n                  <Avatar size=\"lg\" imageURL={node.urlImageThumbnailSmall} />\n                </Table.Col>\n                <Table.Col>\n                  {node.description}\n                </Table.Col>\n                <Table.Col>\n                  {node.sortOrder}\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <Link to={`/schedule/events/edit/${eventId}/media/edit/${node.id}`}>\n                    <Button className='btn-sm' \n                            color=\"secondary\">\n                      {t('general.edit')}\n                    </Button>\n                  </Link>\n                </Table.Col>\n                <Table.Col className=\"text-right\">\n                  <ScheduleEventMediaDelete id={node.id} />\n                </Table.Col>\n              </Table.Row>\n            ))}\n        </Table.Body>\n      </Table>\n    </ScheduleEventEditListBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventMedia))\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const SCHEDULE_EVENT_MEDIA_SCHEMA = Yup.object().shape({\n  description: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  sortOrder: Yup.number(),\n})","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\n\nfunction ScheduleEventMediaBack({ t, match }) {\n  const eventId = match.params.event_id\n  const returnUrl = `/schedule/events/edit/${eventId}/media`\n\n  return (\n    <Link to={returnUrl}>\n      <Button color=\"primary btn-block mb-6\">\n        <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n      </Button>\n    </Link>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventMediaBack))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Form,\n} from \"tabler-react\"\n\n\nimport { customFileInputLabelStyle } from \"../../../../tools/custom_file_input_label_style\"\n\nfunction ScheduleEventMediaForm ({ \n  t, \n  history, \n  match, \n  isSubmitting, \n  errors, \n  values, \n  returnUrl,\n  inputFileName, \n  fileInputLabel, \n  handleFileInputChange=f=>f\n})   \n{\n  return (\n    <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.description')}>\n              <Field type=\"text\" \n                      name=\"description\" \n                      className={(errors.description) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.sort_order')}>\n              <Field type=\"text\" \n                    name=\"sortOrder\" \n                    className={(errors.sortOrder) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n              <ErrorMessage name=\"sortOrder\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.custom_file_input_label')}>\n              <div className=\"custom-file\">\n                <input type=\"file\" ref={inputFileName} className=\"custom-file-input\" onChange={handleFileInputChange} />\n                <label className=\"custom-file-label\" style={customFileInputLabelStyle}>\n                  {fileInputLabel}\n                </label>\n              </div>\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Button color=\"link\" onClick={() => history.push(returnUrl)} role=\"button\">\n              {t('general.cancel')}\n          </Button>\n      </Card.Footer>\n    </FoForm>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventMediaForm))","// @flow\n\nimport React, { useState, useRef } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\nimport { GET_SCHEDULE_EVENT_MEDIAS_QUERY } from \"./queries\"\nimport { SCHEDULE_EVENT_MEDIA_SCHEMA } from './yupSchema'\n\nimport ScheduleEventMediaBack from \"./ScheduleEventMediaBack\"\nimport ScheduleEventEditBase from \"../edit/ScheduleEventEditBase\"\nimport ScheduleEventMediaForm from \"./ScheduleEventMediaForm\"\n\n\nconst ADD_SCHEDULE_EVENT_MEDIA = gql`\n  mutation CreateScheduleEventMedia($input:CreateScheduleEventMediaInput!) {\n    createScheduleEventMedia(input: $input) {\n      scheduleEventMedia {\n        id\n      }\n    }\n  }\n`\n\n\nfunction ScheduleEventMediaAdd({ t, history, match }) {\n  const eventId = match.params.event_id\n  const returnUrl = `/schedule/events/edit/${eventId}/media/`\n  const activeLink = 'media'\n  const cardTitle = t(\"schedule.events.media.add\")\n\n  const [addScheduleEventMedia] = useMutation(ADD_SCHEDULE_EVENT_MEDIA, {\n    onCompleted: () => history.push(returnUrl),\n  })\n\n  // Vars for document file input field start\n  const [fileName, setFileName] = useState(\"\")\n  const inputFileName = useRef(null)\n  const fileInputLabel = fileName || t(\"general.custom_file_input_inner_label\")\n\n  const handleFileInputChange = (event) => {\n    console.log('on change triggered')\n    setFileName(event.target.files[0].name)\n  }\n\n  const sidebarContent = <ScheduleEventMediaBack />\n\n  return (\n    <ScheduleEventEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      <Formik\n        initialValues={{ \n          description: \"\",\n          sortOrder: 0,\n        }}\n        validationSchema={SCHEDULE_EVENT_MEDIA_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"Submit values\")\n          console.log(values)\n          console.log(fileName)\n\n          let inputVars = {\n            scheduleEvent: eventId,\n            description: values.description,\n            sortOrder: values.sortOrder,\n            imageFileName: fileName,\n          }\n\n          let reader = new FileReader()\n          reader.onload = function(reader_event) {\n            console.log(reader_event.target.result)\n            let b64_enc_file = reader_event.target.result\n            console.log(b64_enc_file)\n            // Add uploaded document b64 encoded blob to input vars\n            inputVars.image = b64_enc_file\n\n            addScheduleEventMedia({ variables: {\n              input: inputVars\n            }, refetchQueries: [\n                {query: GET_SCHEDULE_EVENT_MEDIAS_QUERY, variables: {scheduleEvent: eventId}}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data);\n                toast.success((t('schedule.events.media.toast_add_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                  setSubmitting(false)\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n          }\n          \n          let file = inputFileName.current.files[0]\n          if (file && file.size < 5242880) {\n            reader.readAsDataURL(file)\n          } else if (file && file.size > 5242880) { \n            toast.error(t(\"error_messages.selected_file_exceeds_max_filesize\"), {\n              position: toast.POSITION.BOTTOM_RIGHT\n            })\n            setSubmitting(false)\n          } else {\n            toast.error(t(\"general.please_select_a_file\"), {\n              position: toast.POSITION.BOTTOM_RIGHT\n            })\n            setSubmitting(false)\n          }\n        }}\n      >\n        {({ isSubmitting, errors, values }) => (\n          <ScheduleEventMediaForm\n            isSubmitting={isSubmitting}\n            errors={errors}\n            values={values}\n            inputFileName={inputFileName}\n            fileInputLabel={fileInputLabel}\n            handleFileInputChange={handleFileInputChange}\n            returnUrl={returnUrl}\n          />\n        )}\n      </Formik>\n    </ScheduleEventEditBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventMediaAdd))","// @flow\n\nimport React, { useContext } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport { GET_SCHEDULE_EVENT_MEDIA_QUERY } from './queries'\nimport { GET_SCHEDULE_EVENT_QUERY } from '../queries'\n\nimport moment from 'moment'\n\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport ScheduleEventMediaBack from \"./ScheduleEventMediaBack\"\nimport ScheduleEventEditBaseBase from \"../edit/ScheduleEventEditBaseBase\"\n\n\nfunction ScheduleEventMediaEditBase({t, match, history, activeTab, children}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const cardTitle = t(\"schedule.events.media.edit\")\n  const activeLink = \"media\"\n\n  const eventId = match.params.event_id\n  const scheduleEventMediaId = match.params.id\n\n  const { loading, error, data } = useQuery(GET_SCHEDULE_EVENT_QUERY, {\n    variables: { id: eventId }\n  })\n\n  const { loading: loadingMedia, error: errorMedia, data: dataMedia } = useQuery(GET_SCHEDULE_EVENT_MEDIA_QUERY, {\n    variables: {\n      id: scheduleEventMediaId\n    }\n  })\n\n  const sidebarContent = <ScheduleEventMediaBack />\n\n  if (loading || loadingMedia) {\n    return (\n      <ScheduleEventEditBaseBase sidebarContent={sidebarContent}>\n        <Card title={cardTitle}>\n          <Card.Body>\n            <Dimmer loading={true} active={true} />\n          </Card.Body>\n        </Card>\n      </ScheduleEventEditBaseBase>\n    )\n  }\n\n  if (error || errorMedia) {\n    return (\n      <ScheduleEventEditBaseBase sidebarContent={sidebarContent}>\n        <Card title={cardTitle}>\n          <Card.Body>\n            {t(\"schedule.events.error_loading\")}\n          </Card.Body>\n        </Card>\n      </ScheduleEventEditBaseBase>\n    )\n  }\n\n  const event = data.scheduleEvent\n  const scheduleEventMedia = dataMedia.scheduleEventMedia\n  const dateStart = (event.dateStart) ? moment(event.dateStart).format(dateFormat) : \"\"\n  const cardSubTitle = (scheduleEventMedia) ? \n  <span className=\"text-muted\">\n    - {event.name + \" \" + dateStart}\n  </span> : \"\"\n\n  const cardActivitySubtitle = (scheduleEventMedia) ?\n  <span className=\"text-muted\">\n    - {scheduleEventMedia.description}\n  </span> : \"\"\n\n  return (\n    <ScheduleEventEditBaseBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle} {cardSubTitle} {cardActivitySubtitle}</Card.Title>\n        </Card.Header>\n        {children}\n      </Card>\n    </ScheduleEventEditBaseBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventMediaEditBase))","// @flow\n\nimport React, { useState, useRef } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\nimport { GET_SCHEDULE_EVENT_MEDIAS_QUERY, GET_SCHEDULE_EVENT_MEDIA_QUERY } from \"./queries\"\nimport { SCHEDULE_EVENT_MEDIA_SCHEMA } from './yupSchema'\n\nimport ScheduleEventMediaBack from \"./ScheduleEventMediaBack\"\nimport ScheduleEventMediaEditBase from \"./ScheduleEventMediaEditBase\"\nimport ScheduleEventMediaForm from \"./ScheduleEventMediaForm\"\n\n\nconst UPDATE_SCHEDULE_EVENT_MEDIA = gql`\n  mutation UpdateScheduleEventMedia($input:UpdateScheduleEventMediaInput!) {\n    updateScheduleEventMedia(input: $input) {\n      scheduleEventMedia {\n        id\n      }\n    }\n  }\n`\n\n\nfunction ScheduleEventMediaEdit({ t, history, match }) {\n  const eventId = match.params.event_id\n  const scheduleEventMediaId = match.params.id\n  const returnUrl = `/schedule/events/edit/${eventId}/media/`\n  const activeTab = 'general'\n  const cardTitle = t(\"schedule.events.media.edit\")\n\n  const [updateScheduleEventMedia] = useMutation(UPDATE_SCHEDULE_EVENT_MEDIA)\n  const { loading, error, data, fetchMore } = useQuery(GET_SCHEDULE_EVENT_MEDIA_QUERY, {\n    variables: {\n      id: scheduleEventMediaId\n  }})\n\n  const sidebarContent = <ScheduleEventMediaBack />\n\n  // Vars for document file input field start\n  const [fileName, setFileName] = useState(\"\")\n  const inputFileName = useRef(null)\n  const fileInputLabel = fileName || t(\"general.custom_file_input_inner_label\")\n\n  const handleFileInputChange = (event) => {\n    console.log('on change triggered')\n    setFileName(event.target.files[0].name)\n  }\n\n  if (loading) return (\n    <ScheduleEventMediaEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeTab={activeTab} \n      returnUrl={returnUrl}\n    >\n      {t(\"general.loading_with_dots\")}\n    </ScheduleEventMediaEditBase>\n  )\n  if (error) return (\n    <ScheduleEventMediaEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeTab={activeTab} \n      returnUrl={returnUrl}\n    >\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </ScheduleEventMediaEditBase>\n  )\n\n  const inputData = data\n  const scheduleEventMedia = data.scheduleEventMedia\n  console.log(inputData)\n\n  return (\n    <ScheduleEventMediaEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeTab={activeTab} \n      returnUrl={returnUrl}\n    >\n      <Formik\n        initialValues={{ \n          description: scheduleEventMedia.description,\n          sortOrder: scheduleEventMedia.sortOrder\n        }}\n        validationSchema={SCHEDULE_EVENT_MEDIA_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"Submit values\")\n          console.log(values)\n          console.log(fileName)\n\n          let inputVars = {\n            id: scheduleEventMediaId,\n            description: values.description,\n            sortOrder: values.sortOrder\n          }\n\n          function updateMedia() {\n            updateScheduleEventMedia({ variables: {\n              input: inputVars\n            }, refetchQueries: [\n                {query: GET_SCHEDULE_EVENT_MEDIAS_QUERY, variables: {scheduleEvent: eventId}}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data);\n                toast.success((t('schedule.events.media.toast_edit_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                  setSubmitting(false)\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n          }\n\n          let reader = new FileReader()\n          reader.onload = function(reader_event) {\n            console.log(reader_event.target.result)\n            let b64_enc_file = reader_event.target.result\n            console.log(b64_enc_file)\n            // Add uploaded document b64 encoded blob to input vars\n            inputVars.image = b64_enc_file\n            inputVars.imageFileName = fileName\n\n            updateMedia()\n          }\n          \n          let file = inputFileName.current.files[0]\n          if (file && file.size < 5242880) {\n            reader.readAsDataURL(file)\n          } else if (file && file.size > 5242880) { \n            toast.error(t(\"error_messages.selected_file_exceeds_max_filesize\"), {\n              position: toast.POSITION.BOTTOM_RIGHT\n            })\n            setSubmitting(false)\n          } else {\n            updateMedia()\n          }\n        }}\n        >\n        {({ isSubmitting, errors, values }) => (\n          <ScheduleEventMediaForm\n            isSubmitting={isSubmitting}\n            errors={errors}\n            values={values}\n            inputFileName={inputFileName}\n            fileInputLabel={fileInputLabel}\n            handleFileInputChange={handleFileInputChange}\n            returnUrl={returnUrl}\n          />\n        )}\n      </Formik>\n    </ScheduleEventMediaEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventMediaEdit))","import { gql } from \"@apollo/client\"\n\nexport const GET_SCHEDULE_EVENT_TICKETS_QUERY = gql`\n  query ScheduleEventTickets($before:String, $after:String, $scheduleEvent:ID!) {\n    scheduleEventTickets(first: 100, before:$before, after:$after, scheduleEvent:$scheduleEvent) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          scheduleEvent {\n            id\n          }\n          fullEvent\n          deletable\n          displayPublic\n          name\n          description\n          price\n          priceDisplay\n          isSoldOut\n          financeTaxRate {\n            id\n            name\n          }\n          financeGlaccount {\n            id\n            name\n          }\n          financeCostcenter {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`\n\nexport const GET_SCHEDULE_EVENT_TICKET_QUERY = gql`\n  query ScheduleEventTicket($before:String, $after:String, $id:ID!) {\n    scheduleEventTicket(id: $id) {\n      id\n      displayPublic\n      name\n      description\n      price\n      financeTaxRate {\n        id\n        name\n      }\n      financeGlaccount {\n        id\n        name\n      }\n      financeCostcenter {\n        id\n        name\n      }\n    }\n    financeTaxRates(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n    financeGlaccounts(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n    financeCostcenters(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n`\n\nexport const DELETE_SCHEDULE_EVENT_TICKET = gql`\n  mutation DeleteScheduleEventTicket($input: DeleteScheduleEventTicketInput!) {\n    deleteScheduleEventTicket(input: $input) {\n      ok\n    }\n  }\n`\n\n\nexport const GET_INPUT_VALUES_QUERY = gql`\n  query ScheduleEventTicketInputValues($after: String, $before: String) {\n    financeTaxRates(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n    financeGlaccounts(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n    financeCostcenters(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n`","// @flow\n\nimport React, { useContext } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport ContentCard from \"../../../general/ContentCard\"\n\nimport { GET_SCHEDULE_EVENT_QUERY } from '../queries'\n\nimport moment from 'moment'\n\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport ScheduleEventEditListBase from \"../edit/ScheduleEventEditListBase\"\n\n\nfunction ScheduleEventTicketListBase({t, match, history, activeTab, pageInfo, onLoadMore, children}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const cardTitle = t(\"schedule.events.edit.title\")\n  const activeLink = \"tickets\"\n\n  const eventId = match.params.event_id\n  const returnUrl = \"/schedule/events\"\n\n  const { loading, error, data } = useQuery(GET_SCHEDULE_EVENT_QUERY, {\n    variables: { id: eventId }\n  })\n\n  const sidebarContent = <Link to={returnUrl}>\n      <Button color=\"primary btn-block mb-6\">\n        <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n      </Button>\n    </Link>\n\nif (loading) {\n  return (\n    <ScheduleEventEditListBase sidebarContent={sidebarContent} activeLink={activeLink}>\n      <Card title={cardTitle}>\n        <Card.Body>\n          <Dimmer loading={true} active={true} />\n        </Card.Body>\n      </Card>\n    </ScheduleEventEditListBase>\n  )\n}\n\nif (error) {\n  return (\n    <ScheduleEventEditListBase sidebarContent={sidebarContent} activeLink={activeLink}>\n      <Card title={cardTitle}>\n        <Card.Body>\n          {t(\"schedule.events.error_loading\")}\n        </Card.Body>\n      </Card>\n    </ScheduleEventEditListBase>\n  )\n}\n\nconst event = data.scheduleEvent\nconst dateStart = (event.dateStart) ? moment(event.dateStart).format(dateFormat) : \"\"\nconst cardSubTitle = (event) ? \n<span className=\"text-muted\">\n  - {event.name + \" \" + dateStart}\n</span> : \"\"\n\nreturn (\n  <ScheduleEventEditListBase sidebarContent={sidebarContent} activeLink={activeLink}>\n    <ContentCard \n      cardTitle={<span>{cardTitle} {cardSubTitle}</span>}\n      pageInfo={pageInfo}\n      onLoadMore={onLoadMore}\n    >\n      {children}\n    </ContentCard>\n  </ScheduleEventEditListBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventTicketListBase))","import React from 'react'\nimport { useMutation } from '@apollo/client';\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { DELETE_SCHEDULE_EVENT_TICKET, GET_SCHEDULE_EVENT_TICKETS_QUERY } from \"./queries\"\nimport confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport {\n  Icon\n} from \"tabler-react\"\n\n\nfunction ScheduleEventTicketDelete({t, match, history, id}) {\n  const eventId = match.params.event_id\n  const [deleteScheduleEventTicket, { data }] = useMutation(DELETE_SCHEDULE_EVENT_TICKET)\n  const query_vars = {\n    scheduleEvent: eventId\n  }\n\n  return (\n    <button className=\"icon btn btn-link btn-sm mb-3 pull-right\" \n      title={t('general.delete')} \n      onClick={() => {\n        confirm_delete({\n          t: t,\n          msgConfirm: t(\"schedule.events.tickets.delete_confirm_msg\"),\n          msgDescription: <p></p>,\n          msgSuccess: t('schedule.events.tickets.delete_success'),\n          deleteFunction: deleteScheduleEventTicket,\n          functionVariables: { \n            variables: {\n              input: {\n                id: id\n              },\n            }, \n            refetchQueries: [\n              { query: GET_SCHEDULE_EVENT_TICKETS_QUERY, variables: query_vars },\n            ]\n          }\n        })\n    }}>\n      <Icon prefix=\"fe\" name=\"trash-2\" />\n    </button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventTicketDelete))","import React from 'react'\nimport { withTranslation } from 'react-i18next'\n\nimport {\n  Badge\n} from \"tabler-react\"\n\n\nfunction BadgeSoldOut({ t }) {\n  return <Badge color=\"warning\">{t('general.sold_out')}</Badge> \n}\n\nexport default withTranslation()(BadgeSoldOut)","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport ButtonAddSecondaryMenu from '../../../ui/ButtonAddSecondaryMenu'\nimport BadgeBoolean from \"../../../ui/BadgeBoolean\"\n\nimport { GET_SCHEDULE_EVENT_TICKETS_QUERY } from './queries'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n  Table,\n} from \"tabler-react\";\n// import HasPermissionWrapper from \"../../../../HasPermissionWrapper\"\nimport ScheduleEventEditListBase from \"../edit/ScheduleEventEditListBase\"\nimport ScheduleEventTicketListBase from \"./ScheduleEventTicketListBase\"\nimport ScheduleEventTicketDelete from \"./ScheduleEventTicketDelete\"\nimport moment from 'moment';\nimport BadgeSoldOut from '../../../ui/BadgeSoldOut';\n\n\nfunction ScheduleEventTickets({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  console.log(appSettings)\n  \n  const eventId = match.params.event_id\n  const activeLink = \"tickets\"\n\n  const sidebarContent = <Link to={`/schedule/events/edit/${eventId}/tickets/add`}>\n    <Button color=\"primary btn-block mb-6\">\n      <Icon prefix=\"fe\" name=\"plus-circle\" /> {t('schedule.events.tickets.add')}\n    </Button>\n  </Link>\n\n  const { loading, error, data, fetchMore } = useQuery(GET_SCHEDULE_EVENT_TICKETS_QUERY, {\n    variables: {\n      scheduleEvent: eventId\n    }\n  })\n  \n  if (loading) return (\n    <ScheduleEventEditListBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      {t(\"general.loading_with_dots\")}\n    </ScheduleEventEditListBase>\n  )\n  if (error) return (\n    <ScheduleEventEditListBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </ScheduleEventEditListBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n\n  const scheduleEventTickets = data.scheduleEventTickets\n  const pageInfo = data.scheduleEventTickets.pageInfo\n\n  // Empty list\n  if (!scheduleEventTickets.edges.length) { return (\n    <ScheduleEventEditListBase activeLink={activeLink} sidebarContent={sidebarContent}>\n      <p>{t('schedule.events.tickets.empty_list')}</p>\n    </ScheduleEventEditListBase>\n  )}\n\n  const onLoadMore = () => {\n    fetchMore({\n      variables: {\n        after: scheduleEventTickets.pageInfo.endCursor\n      },\n      updateQuery: (previousResult, { fetchMoreResult }) => {\n        const newEdges = fetchMoreResult.scheduleEventTickets.edges\n        const pageInfo = fetchMoreResult.scheduleEventTickets.pageInfo\n\n        return newEdges.length\n          ? {\n              // Put the new invoices at the end of the list and update `pageInfo`\n              // so we have the new `endCursor` and `hasNextPage` values\n              scheduleEventTickets: {\n                __typename: previousResult.scheduleEventTickets.__typename,\n                edges: [ ...previousResult.scheduleEventTickets.edges, ...newEdges ],\n                pageInfo\n              }\n            }\n          : previousResult\n      }\n    })\n  }\n\n  return (\n    <ScheduleEventEditListBase activeLink={activeLink} pageInfo={pageInfo} onLoadMore={onLoadMore} sidebarContent={sidebarContent}>\n      <Table>\n        <Table.Header>\n          <Table.Row key={v4()}>\n            <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.price')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.public')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.glaccount')}</Table.ColHeader>\n            <Table.ColHeader>{t('general.costcenter')}</Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n            <Table.ColHeader></Table.ColHeader>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          {scheduleEventTickets.edges.map(({ node }) => (\n            <Table.Row key={v4()}>\n              {/* <Table.Col>\n                {moment(node.dateStart).format(dateFormat)}\n              </Table.Col>\n              <Table.Col>\n                {moment(node.dateEnd).format(dateFormat)}\n              </Table.Col> */}\n              <Table.Col>\n                {node.name} <br />\n                <div dangerouslySetInnerHTML={{__html: node.description}} className=\"text-muted\"/>\n              </Table.Col>\n              <Table.Col>\n                {node.priceDisplay} <br />\n                {(node.isSoldOut) ? <BadgeSoldOut /> : \"\"}\n              </Table.Col>\n              <Table.Col>\n                <BadgeBoolean value={node.displayPublic} />\n              </Table.Col>\n              <Table.Col>\n                {(node.financeGlaccount) ? node.financeGlaccount.name : \"\"}\n              </Table.Col>\n              <Table.Col>\n                {(node.financeCostcenter) ? node.financeCostcenter.name : \"\"}\n              </Table.Col>\n              <Table.Col className=\"text-right\">\n                <Link to={`/schedule/events/edit/${eventId}/tickets/edit/${node.id}`}>\n                  <Button className='btn-sm' \n                          color=\"secondary\">\n                    {t('general.edit')}\n                  </Button>\n                </Link>\n              </Table.Col>\n              <Table.Col className=\"text-right\">\n                {/* Check for fullEvent / deletable before showing delete button */}\n                {(node.deletable) ? <ScheduleEventTicketDelete id={node.id} /> : \"\"}\n              </Table.Col>\n            </Table.Row>\n          ))}\n        </Table.Body>\n      </Table>\n    </ScheduleEventEditListBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventTickets))\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const SCHEDULE_EVENT_TICKET_SCHEMA = Yup.object().shape({\n  displayPublic: Yup.boolean(),\n  name: Yup.string()\n      .min(3, t('yup.min_len_3'))\n      .required(t('yup.field_required')),\n  description: Yup.string(),\n  price: Yup.number(),\n  financeTaxRate: Yup.string(),\n  financeGlaccount: Yup.string(),\n  financeCostcenter: Yup.string(),\n})","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\n\nfunction ScheduleEventTicketBack({ t, match }) {\n  const eventId = match.params.event_id\n  const returnUrl = `/schedule/events/edit/${eventId}/tickets`\n\n  return (\n    <Link to={returnUrl}>\n      <Button color=\"primary btn-block mb-6\">\n        <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n      </Button>\n    </Link>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventTicketBack))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Form,\n} from \"tabler-react\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../../plugin_config/tinymce\"\n// import CSDatePicker from \"../../../../../ui/CSDatePicker\"\n\nfunction ScheduleEventTicketForm ({ \n  t, \n  history, \n  match, \n  isSubmitting, \n  errors, \n  values, \n  inputData, \n  returnUrl, \n  setFieldTouched, \n  setFieldValue, \n  formTitle=\"create\" })   \n{\n\n  return (\n    <FoForm>\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group>\n              <Form.Label className=\"custom-switch\">\n                  <Field \n                    className=\"custom-switch-input\"\n                    type=\"checkbox\" \n                    name=\"displayPublic\" \n                    checked={values.displayPublic} />\n                  <span className=\"custom-switch-indicator\" ></span>\n                  <span className=\"custom-switch-description\">{t('schedule.events.tickets.public')}</span>\n              </Form.Label>\n              <ErrorMessage name=\"displayPublic\" component=\"div\" />   \n            </Form.Group>  \n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.name')}>\n              <Field type=\"text\" \n                      name=\"name\" \n                      className={(errors.name) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"name\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.price')}>\n                <Field type=\"text\" \n                    name=\"price\" \n                    className={(errors.price) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\" />\n                <ErrorMessage name=\"price\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.taxrate')}>\n              <Field component=\"select\" \n                      name=\"financeTaxRate\" \n                      className={(errors.financeTaxRate) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\">\n                {console.log(\"query data in subscription price add:\")}\n                {console.log(inputData)}\n                <option value=\"\" key={v4()}>{t('general.please_select')}</option>\n                {inputData.financeTaxRates.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.name} ({node.percentage}% {node.rateType})</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"financeTaxRate\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n          <Form.Group label={t('general.description')}>\n            <Editor\n                textareaName=\"description\"\n                initialValue={values.description}\n                init={tinymceBasicConf}\n                onChange={(e) => setFieldValue(\"description\", e.target.getContent())}\n                onBlur={() => setFieldTouched(\"description\", true)}\n              />\n            <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.glaccount')}>\n              <Field component=\"select\" \n                    name=\"financeGlaccount\" \n                    className={(errors.financeGlaccount) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\" key={v4()}></option>\n                {inputData.financeGlaccounts.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.name} ({node.code})</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"financeGlaccount\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.costcenter')}>\n              <Field component=\"select\" \n                    name=\"financeCostcenter\" \n                    className={(errors.financeCostcenter) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\" key={v4()}></option>\n                {inputData.financeCostcenters.edges.map(({ node }) =>\n                  <option value={node.id} key={v4()}>{node.name} ({node.code})</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"financeCostcenter\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Button color=\"link\" onClick={() => history.push(returnUrl)} role=\"button\">\n              {t('general.cancel')}\n          </Button>\n      </Card.Footer>\n    </FoForm>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventTicketForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\nimport { GET_SCHEDULE_EVENT_TICKETS_QUERY, GET_INPUT_VALUES_QUERY } from \"./queries\"\nimport { SCHEDULE_EVENT_TICKET_SCHEMA } from './yupSchema'\n\nimport ScheduleEventTicketBack from \"./ScheduleEventTicketBack\"\nimport ScheduleEventEditBase from \"../edit/ScheduleEventEditBase\"\nimport ScheduleEventTicketForm from \"./ScheduleEventTicketForm\"\n\n\nconst ADD_SCHEDULE_EVENT_TICKET = gql`\n  mutation CreateScheduleEventTicket($input:CreateScheduleEventTicketInput!) {\n    createScheduleEventTicket(input: $input) {\n      scheduleEventTicket {\n        id\n      }\n    }\n  }\n`\n\n\nfunction ScheduleEventTicketAdd({ t, history, match }) {\n  const eventId = match.params.event_id\n  const returnUrl = `/schedule/events/edit/${eventId}/tickets/`\n  const activeLink = 'tickets'\n  const cardTitle = t(\"schedule.events.tickets.add\")\n\n  const [addScheduleEventTicket] = useMutation(ADD_SCHEDULE_EVENT_TICKET, {\n    onCompleted: () => history.push(returnUrl),\n  })\n  const { loading, error, data, fetchMore } = useQuery(GET_INPUT_VALUES_QUERY)\n\n  const sidebarContent = <ScheduleEventTicketBack />\n\n  if (loading) return (\n    <ScheduleEventEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      {t(\"general.loading_with_dots\")}\n    </ScheduleEventEditBase>\n  )\n  if (error) return (\n    <ScheduleEventEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </ScheduleEventEditBase>\n  )\n\n  const inputData = data\n\n  return (\n    <ScheduleEventEditBase \n      sidebarContent={sidebarContent} \n      cardTitle={cardTitle} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      <Formik\n        initialValues={{ \n          displayPublic: true,\n          name: '',\n          description: '',\n        }}\n        validationSchema={SCHEDULE_EVENT_TICKET_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"submit values\")\n          console.log(values)\n\n          addScheduleEventTicket({ variables: {\n            input: {\n              scheduleEvent: eventId,\n              displayPublic: values.displayPublic,\n              name: values.name,\n              description: values.description,\n              price: values.price,\n              financeTaxRate: values.financeTaxRate,\n              financeGlaccount: values.financeGlaccount,\n              financeCostcenter: values.financeCostcenter\n            }\n          }, refetchQueries: [\n              {query: GET_SCHEDULE_EVENT_TICKETS_QUERY, variables: {\n                scheduleEvent: eventId\n              }},\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              toast.success((t('schedule.events.tickets.toast_add_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <ScheduleEventTicketForm\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errors={errors}\n            values={values}\n            inputData={inputData}\n            returnUrl={returnUrl}\n            formTitle=\"create\"\n          />\n        )}\n      </Formik>\n    </ScheduleEventEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventTicketAdd))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Link } from 'react-router-dom'\n\nimport CardTabs from \"../../../ui/CardTabs\"\n\nfunction ScheduleEventTicketTabs({ t, active, eventId, ticketId}) {\n  return (\n    <CardTabs \n      position=\"top\"\n      tabs={[\n          {\n            name: \"general\", \n            title: t(\"schedule.events.tickets.edit_menu.general\"), \n            link: `/schedule/events/edit/${eventId}/tickets/edit/${ticketId}`\n          },\n          {\n            name: \"activities\", \n            title: t(\"schedule.events.tickets.edit_menu.activities\"), \n            link: `/schedule/events/edit/${eventId}/tickets/edit/${ticketId}/activities`\n          },\n          {\n            name: \"customers\", \n            title: t(\"schedule.events.tickets.edit_menu.customers\"), \n            link: `/schedule/events/edit/${eventId}/tickets/edit/${ticketId}/customers`\n          },\n      ]}\n      active={active}\n    />\n  )\n}\n\nexport default withTranslation()(ScheduleEventTicketTabs)\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport { GET_SCHEDULE_EVENT_TICKET_QUERY } from './queries'\nimport { GET_SCHEDULE_EVENT_QUERY } from '../queries'\nimport ScheduleEventTicketTabs from \"./ScheduleEventTicketTabs\"\n\nimport moment from 'moment'\n\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container\n} from \"tabler-react\";\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport ScheduleEventTicketBack from \"./ScheduleEventTicketBack\"\nimport ScheduleEventEditBaseBase from \"../edit/ScheduleEventEditBaseBase\"\n\n\nfunction ScheduleEventTicketEditBase({t, match, history, activeTab, children, pageHeaderOptions=\"\", searchResults=\"\"}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const cardTitle = t(\"schedule.events.tickets.edit\")\n  const activeLink = \"tickets\"\n\n  const eventId = match.params.event_id\n  const ticketId = match.params.id\n\n  const { loading, error, data } = useQuery(GET_SCHEDULE_EVENT_QUERY, {\n    variables: { id: eventId }\n  })\n\n  const { loading: loadingTicket, error: errorTicket, data: dataTicket } = useQuery(GET_SCHEDULE_EVENT_TICKET_QUERY, {\n    variables: {\n      id: ticketId\n    }\n  })\n\n  const sidebarContent = <ScheduleEventTicketBack />\n\n  if (loading || loadingTicket) {\n    return (\n      <ScheduleEventEditBaseBase pageHeaderOptions={pageHeaderOptions} sidebarContent={sidebarContent}>\n        <Card title={cardTitle}>\n          <ScheduleEventTicketTabs active={activeTab} eventId={eventId}  ticketId={ticketId}/>\n          <Card.Body>\n            <Dimmer loading={true} active={true} />\n          </Card.Body>\n        </Card>\n      </ScheduleEventEditBaseBase>\n    )\n  }\n\n  if (error || errorTicket) {\n    return (\n      <ScheduleEventEditBaseBase pageHeaderOptions={pageHeaderOptions} sidebarContent={sidebarContent}>\n        <Card title={cardTitle}>\n          <ScheduleEventTicketTabs active={activeTab} eventId={eventId} ticketId={ticketId}/>\n          <Card.Body>\n            {t(\"schedule.events.error_loading\")}\n          </Card.Body>\n        </Card>\n      </ScheduleEventEditBaseBase>\n    )\n  }\n\n  const event = data.scheduleEvent\n  const ticket = dataTicket.scheduleEventTicket\n  const dateStart = (event.dateStart) ? moment(event.dateStart).format(dateFormat) : \"\"\n  const cardSubTitle = (event) ? \n  <span className=\"text-muted\">\n    - {event.name + \" \" + dateStart}\n  </span> : \"\"\n\n  const cardTicketSubtitle = (ticket) ?\n  <span className=\"text-muted\">\n    - {ticket.name}\n  </span> : \"\"\n\n  return (\n    <ScheduleEventEditBaseBase pageHeaderOptions={pageHeaderOptions} activeLink={activeLink} sidebarContent={sidebarContent}>\n      {searchResults}\n      <Card>\n        <Card.Header>\n          <Card.Title>{cardTitle} {cardSubTitle} {cardTicketSubtitle}</Card.Title>\n        </Card.Header>\n        <ScheduleEventTicketTabs active={activeTab} eventId={eventId} ticketId={ticketId}/>\n        {children}\n      </Card>\n    </ScheduleEventEditBaseBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ScheduleEventTicketEditBase))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SCHEDULE_EVENT_TICKETS_QUERY, GET_SCHEDULE_EVENT_TICKET_QUERY } from \"./queries\"\nimport { SCHEDULE_EVENT_TICKET_SCHEMA } from './yupSchema'\n\nimport ScheduleEventTicketBack from \"./ScheduleEventTicketBack\"\nimport ScheduleEventTicketEditBase from \"./ScheduleEventTicketEditBase\"\nimport ScheduleEventTicketForm from \"./ScheduleEventTicketForm\"\n\n\nconst UPDATE_SCHEDULE_EVENT_TICKET = gql`\n  mutation UpdateScheduleEventTicket($input:UpdateScheduleEventTicketInput!) {\n    updateScheduleEventTicket(input: $input) {\n      scheduleEventTicket {\n        id\n      }\n    }\n  }\n`\n\n\nfunction ScheduleEventTicketEdit({ t, history, match }) {\n  const id = match.params.id\n  const eventId = match.params.event_id\n  const returnUrl = `/schedule/events/edit/${eventId}/tickets/`\n  const activeTab = \"general\"\n  const activeLink = 'tickets'\n  const sidebarContent = <ScheduleEventTicketBack />\n\n  const { loading, error, data } = useQuery(GET_SCHEDULE_EVENT_TICKET_QUERY, {\n    variables: {\n      id: id\n    }\n  })\n\n  const [updateScheduleEventTicket] = useMutation(UPDATE_SCHEDULE_EVENT_TICKET)\n\n  if (loading) return (\n    <ScheduleEventTicketEditBase \n      sidebarContent={sidebarContent} \n      activeTab={activeTab} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      {t(\"general.loading_with_dots\")}\n    </ScheduleEventTicketEditBase>\n  )\n  if (error) return (\n    <ScheduleEventTicketEditBase \n      sidebarContent={sidebarContent} \n      activeTab={activeTab} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </ScheduleEventTicketEditBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n  const scheduleEventTicket = data.scheduleEventTicket\n\n\n  let initialFinanceTaxRate = \"\"\n  if (scheduleEventTicket.financeTaxRate) {\n    initialFinanceTaxRate = scheduleEventTicket.financeTaxRate.id\n  }\n\n  let initialFinanceGlaccount = \"\"\n  if (scheduleEventTicket.financeGlaccount) {\n    initialFinanceGlaccount = scheduleEventTicket.financeGlaccount.id\n  }\n\n  let initialFinanceCostcenter = \"\"\n  if (scheduleEventTicket.financeCostcenter) {\n    initialFinanceCostcenter = scheduleEventTicket.financeCostcenter.id\n  }\n\n\n  return (\n    <ScheduleEventTicketEditBase \n      sidebarContent={sidebarContent} \n      activeTab={activeTab} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      <Formik\n        initialValues={{ \n          displayPublic: scheduleEventTicket.displayPublic,\n          name: scheduleEventTicket.name,\n          description: scheduleEventTicket.description,\n          price: scheduleEventTicket.price,\n          financeTaxRate: initialFinanceTaxRate,\n          financeGlaccount: initialFinanceGlaccount,\n          financeCostcenter: initialFinanceCostcenter\n        }}\n        validationSchema={SCHEDULE_EVENT_TICKET_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n          console.log(\"submit values\")\n          console.log(values)\n\n          updateScheduleEventTicket({ variables: {\n            input: {\n              id: id,\n              displayPublic: values.displayPublic,\n              name: values.name,\n              description: values.description,\n              price: values.price,\n              financeTaxRate: values.financeTaxRate,\n              financeGlaccount: values.financeGlaccount,\n              financeCostcenter: values.financeCostcenter\n            }\n          }, refetchQueries: [\n              {query: GET_SCHEDULE_EVENT_TICKETS_QUERY, variables: {\n                scheduleEvent: eventId\n              }},\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data);\n              toast.success((t('schedule.events.tickets.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              setSubmitting(false)\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <ScheduleEventTicketForm\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            inputData={inputData}\n            errors={errors}\n            values={values}\n            returnUrl={returnUrl}\n            formTitle=\"update\"\n          />\n        )}\n      </Formik>\n    </ScheduleEventTicketEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventTicketEdit))","import { gql } from \"@apollo/client\"\n\nexport const GET_SCHEDULE_EVENT_TICKET_SCHEDULE_ITEMS_QUERY = gql`\nquery ScheduleEventTicketScheduleItem($before:String, $after:String, $scheduleEventTicket:ID!) {\n  scheduleEventTicketScheduleItems(first: 100, before: $before, after: $after, scheduleEventTicket:$scheduleEventTicket) {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n    edges {\n      node {\n        id\n        scheduleEventTicket {\n          id\n          name\n          fullEvent\n        }\n        scheduleItem {\n          id\n          name\n        }\n        included\n      }\n    }\n  }\n}\n`\n\n// export const GET_SCHEDULE_EVENT_TICKET_SCHEDULE_ITEM_QUERY = gql`\n// query ScheduleEventTicket($before:String, $after:String, $id:ID!) {\n//   scheduleEventTicket(id: $id) {\n//     id\n//     displayPublic\n//     name\n//     description\n//     price\n//     financeTaxRate {\n//       id\n//       name\n//     }\n//     financeGlaccount {\n//       id\n//       name\n//     }\n//     financeCostcenter {\n//       id\n//       name\n//     }\n//   }\n//   financeTaxRates(first: 100, before: $before, after: $after, archived: false) {\n//     pageInfo {\n//       startCursor\n//       endCursor\n//       hasNextPage\n//       hasPreviousPage\n//     }\n//     edges {\n//       node {\n//         id\n//         name\n//       }\n//     }\n//   }\n//   financeGlaccounts(first: 100, before: $before, after: $after, archived: false) {\n//     pageInfo {\n//       startCursor\n//       endCursor\n//       hasNextPage\n//       hasPreviousPage\n//     }\n//     edges {\n//       node {\n//         id\n//         name\n//       }\n//     }\n//   }\n//   financeCostcenters(first: 100, before: $before, after: $after, archived: false) {\n//     pageInfo {\n//       startCursor\n//       endCursor\n//       hasNextPage\n//       hasPreviousPage\n//     }\n//     edges {\n//       node {\n//         id\n//         name\n//       }\n//     }\n//   }\n// }\n// `\n\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const SCHEDULE_EVENT_TICKET_SCHEDLE_ITEM_SCHEMA = Yup.object().shape({\n  included: Yup.boolean(),\n})","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\nimport {\n  Dimmer,\n  Grid,\n  Form,\n} from \"tabler-react\"\n\n\nconst ScheduleEventTicketEditActivityForm = ({ t, history, match, disabled, isSubmitting, setSubmitting, submitForm, errors, values, setFieldTouched, setFieldValue }) => (\n  <FoForm>\n    <Dimmer active={isSubmitting} loader={isSubmitting} >\n      <Form.Group className='mb-0'>\n        <Form.Label className=\"custom-switch\">\n          <Field \n            className=\"custom-switch-input\"\n            type=\"checkbox\" \n            name=\"included\" \n            onChange={() => {\n              setFieldValue('included', !values.included)\n              setFieldTouched('included', true)\n              setSubmitting(true)\n              setTimeout(() => {submitForm()}, 200)\n            }}\n            checked={values.included} \n            disabled={disabled} \n          />\n          <span className=\"custom-switch-indicator\" ></span>\n          <span className=\"custom-switch-description\">{t('general.included')}</span>\n        </Form.Label>\n        <ErrorMessage name=\"included\" component=\"div\" />   \n      </Form.Group>  \n    </Dimmer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(ScheduleEventTicketEditActivityForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport { v4 } from 'uuid'\n\nimport {\n  Card,\n  Table,\n} from \"tabler-react\";\n\nimport { GET_SCHEDULE_EVENT_TICKET_SCHEDULE_ITEMS_QUERY } from \"./queries\"\nimport { SCHEDULE_EVENT_TICKET_SCHEDLE_ITEM_SCHEMA } from \"./yupSchema\"\n\nimport ScheduleEventTicketBack from \"../ScheduleEventTicketBack\"\nimport ScheduleEventTicketEditBase from \"../ScheduleEventTicketEditBase\"\nimport ScheduleEventTicketEditActivityForm from \"./ScheduleEventTicketEditActivityForm\"\n\n\nconst UPDATE_SCHEDULE_EVENT_TICKET_SCHEDULE_ITEM = gql`\n  mutation UpdateScheduleEventTicketScheduleItem($input:UpdateScheduleEventTicketScheduleItemInput!) {\n    updateScheduleEventTicketScheduleItem(input: $input) {\n      scheduleEventTicketScheduleItem {\n        id\n      }\n    }\n  }\n`\n\n\nfunction ScheduleEventTicketEditActivities({ t, history, match }) {\n  const id = match.params.id\n  const eventId = match.params.event_id\n  const returnUrl = `/schedule/events/edit/${eventId}/tickets/`\n  const activeTab = \"activities\"\n  const activeLink = 'tickets'\n  const sidebarContent = <ScheduleEventTicketBack />\n\n  const { loading, error, data } = useQuery(GET_SCHEDULE_EVENT_TICKET_SCHEDULE_ITEMS_QUERY, {\n    variables: {\n      scheduleEventTicket: id\n    }\n  })\n\n  const [updateScheduleEventTicketScheduleItem] = useMutation(UPDATE_SCHEDULE_EVENT_TICKET_SCHEDULE_ITEM)\n\n  if (loading) return (\n    <ScheduleEventTicketEditBase \n      sidebarContent={sidebarContent} \n      activeTab={activeTab} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      {t(\"general.loading_with_dots\")}\n    </ScheduleEventTicketEditBase>\n  )\n  if (error) return (\n    <ScheduleEventTicketEditBase \n      sidebarContent={sidebarContent} \n      activeTab={activeTab} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </ScheduleEventTicketEditBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n  const scheduleEventTicketActivities = data.scheduleEventTicketScheduleItems\n  console.log(scheduleEventTicketActivities)\n\n\n  return (\n    <ScheduleEventTicketEditBase \n      sidebarContent={sidebarContent} \n      activeTab={activeTab} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      <Card.Body>\n        <Table>\n          <Table.Header>\n            <Table.Row>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.included')}</Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {scheduleEventTicketActivities.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col>\n                  {node.scheduleItem.name}\n                </Table.Col>  \n                <Table.Col>\n                  <Formik\n                    initialValues={{ \n                      included: node.included,\n                    }}\n                    validationSchema={SCHEDULE_EVENT_TICKET_SCHEDLE_ITEM_SCHEMA}\n                    onSubmit={(values, { setSubmitting }) => {\n                      console.log(\"submit values\")\n                      console.log(values)\n\n                      updateScheduleEventTicketScheduleItem({ variables: {\n                        input: {\n                            id: node.id,\n                            included: values.included\n                          }\n                        }, \n                        refetchQueries: [\n                            {query: GET_SCHEDULE_EVENT_TICKET_SCHEDULE_ITEMS_QUERY, variables: {\n                              scheduleEventTicket: id\n                            }},\n                          ]\n                        })\n                        .then(({ data }) => {\n                            console.log('got data', data);\n                            toast.success((t('schedule.events.tickets.activities.toast_edit_success')), {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                            setSubmitting(false)\n                          }).catch((error) => {\n                            toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                            console.log('there was an error sending the query', error)\n                            setSubmitting(false)\n                          })\n                    }}\n                    >\n                    {({  isSubmitting, errors, values, setFieldTouched, setFieldValue, submitForm, setSubmitting }) => (\n                      <ScheduleEventTicketEditActivityForm\n                        isSubmitting={isSubmitting}\n                        setFieldTouched={setFieldTouched}\n                        setFieldValue={setFieldValue}\n                        errors={errors}\n                        values={values}\n                        disabled={node.scheduleEventTicket.fullEvent}\n                        setSubmitting={setSubmitting}\n                        submitForm={submitForm}\n                      >\n                        {/* {console.log(errors)}\n                        {console.log(values)} */}\n                      </ScheduleEventTicketEditActivityForm>\n                    )}\n                  </Formik>\n                </Table.Col>\n              </Table.Row>\n            ))}\n          </Table.Body>\n        </Table>\n      </Card.Body>\n    </ScheduleEventTicketEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventTicketEditActivities))","import CSLS from \"../../../../../tools/cs_local_storage\"\n\nexport function get_accounts_query_variables() {\n  let queryVars = {\n    teacher: undefined,\n    employee: undefined,\n    searchName: undefined\n  }\n\n  let search = localStorage.getItem(CSLS.SCHEDULE_EVENTS_TICKETS_CUSTOMERS_SEARCH)\n  queryVars.searchName = search\n\n  console.log(queryVars)\n\n  return queryVars\n}\n\n// export function get_attendance_list_query_variables(schedule_item_id, date) {\n//   return {\n//     scheduleItem: schedule_item_id,\n//     date: date\n//   }\n// }\n","// @flow\n\nimport React, { useState } from 'react'\nimport { useQuery, useMutation, useLazyQuery } from '@apollo/client'\nimport { gql } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\nimport {\n  Badge,\n  Button,\n  Card,\n  Table,\n} from \"tabler-react\";\n\nimport { GET_ACCOUNTS_QUERY } from \"../../../../../queries/accounts/account_search_queries\"\nimport { GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY, UPDATE_ACCOUNT_SCHEDULE_EVENT_TICKET } from \"./queries\"\n// import { SCHEDULE_EVENT_TICKET_SCHEDLE_ITEM_SCHEMA } from \"./yupSchema\"\nimport { get_accounts_query_variables } from \"./tools\"\n\nimport BadgeBoolean from \"../../../../ui/BadgeBoolean\"\nimport ContentCard from \"../../../../general/ContentCard\"\nimport InputSearch from \"../../../../general/InputSearch\"\nimport ScheduleEventTicketBack from \"../ScheduleEventTicketBack\"\nimport ScheduleEventTicketEditBase from \"../ScheduleEventTicketEditBase\"\n// import ScheduleEventTicketEditActivityForm from \"./ScheduleEventTicketEditActivityForm\"\n\nimport CSLS from \"../../../../../tools/cs_local_storage\"\n\n\nconst ADD_ACCOUNT_SCHEDULE_EVENT_TICKET = gql`\nmutation CreateAccountScheduleEventTicket($input:CreateAccountScheduleEventTicketInput!) {\n  createAccountScheduleEventTicket(input: $input) {\n    accountScheduleEventTicket {\n      id\n    }\n  }\n}\n`\n\n\nfunction ScheduleEventTicketEditCustomers({ t, history, match }) {\n  const [showSearch, setShowSearch] = useState(false)\n  const id = match.params.id\n  const eventId = match.params.event_id\n  const returnUrl = `/schedule/events/edit/${eventId}/tickets/`\n  const activeTab = \"customers\"\n  const activeLink = 'tickets'\n  const sidebarContent = <ScheduleEventTicketBack />\n\n  const { loading, error, data } = useQuery(GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY, {\n    variables: {\n      scheduleEventTicket: id\n    }\n  })\n\n  const [addAccountScheduleEventTicket] = useMutation(ADD_ACCOUNT_SCHEDULE_EVENT_TICKET)\n  const [updateAccountScheduleEventTicket] = useMutation(UPDATE_ACCOUNT_SCHEDULE_EVENT_TICKET)\n  // const [updateScheduleEventTicketScheduleItem] = useMutation(UPDATE_SCHEDULE_EVENT_TICKET_SCHEDULE_ITEM)\n\n\n  const [ getAccounts, \n    { refetch: refetchAccounts, \n      fetchMore: fetchMoreAccounts,\n      loading: queryAccountsLoading, \n      error: queryAccountsError, \n      data: queryAccountsData \n    }] = useLazyQuery( GET_ACCOUNTS_QUERY )\n\n  console.log('queryAccountsData')\n  console.log(queryAccountsData)\n\n  if (loading) return (\n    <ScheduleEventTicketEditBase \n      sidebarContent={sidebarContent} \n      activeTab={activeTab} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      {t(\"general.loading_with_dots\")}\n    </ScheduleEventTicketEditBase>\n  )\n  if (error) return (\n    <ScheduleEventTicketEditBase \n      sidebarContent={sidebarContent} \n      activeTab={activeTab} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n    >\n      <p>{t('general.error_sad_smiley')}</p>\n      <p>{error.message}</p>\n    </ScheduleEventTicketEditBase>\n  )\n\n  console.log('query data')\n  console.log(data)\n  const inputData = data\n  const accountScheduleEventTickets = data.accountScheduleEventTickets\n  console.log(accountScheduleEventTickets)\n\n  let accountIdsWithTickets = []\n  accountScheduleEventTickets.edges.map(({ node }) => (\n    accountIdsWithTickets.push(node.account.id)\n  ))\n  console.log(accountIdsWithTickets)\n\n  const pageHeaderOptions = <InputSearch \n    initialValueKey={CSLS.SCHEDULE_EVENTS_TICKETS_CUSTOMERS_SEARCH}\n    placeholder=\"Search...\"\n    onChange={(value) => {\n      console.log(value)\n      localStorage.setItem(CSLS.SCHEDULE_EVENTS_TICKETS_CUSTOMERS_SEARCH, value)\n      if (value) {\n        // {console.log('showSearch')}\n        // {console.log(showSearch)}\n        setShowSearch(true)\n        getAccounts({ variables: get_accounts_query_variables()})\n      } else {\n        setShowSearch(false)\n      }\n    }}\n  />\n\n  // const searchResults = <div>hello world for search results</div>\n\n  // Search results\n  const searchResults = (showSearch && (queryAccountsData) && (!queryAccountsLoading) && (!queryAccountsError)) ?\n    <ContentCard cardTitle={t('general.search_results')}\n                pageInfo={queryAccountsData.accounts.pageInfo}\n                onLoadMore={() => {\n                  fetchMoreAccounts({\n                    variables: {\n                    after: queryAccountsData.accounts.pageInfo.endCursor\n                  },\n                  updateQuery: (previousResult, { fetchMoreResult }) => {\n                    const newEdges = fetchMoreResult.accounts.edges\n                    const pageInfo = fetchMoreResult.accounts.pageInfo \n\n                    return newEdges.length\n                      ? {\n                          // Put the new accounts at the end of the list and update `pageInfo`\n                          // so we have the new `endCursor` and `hasNextPage` values\n                          queryAccountsData: {\n                            accounts: {\n                              __typename: previousResult.accounts.__typename,\n                              edges: [ ...previousResult.accounts.edges, ...newEdges ],\n                              pageInfo\n                            }\n                          }\n                        }\n                      : previousResult\n                  }\n                })\n              }} >\n      { (!queryAccountsData.accounts.edges.length) ? \n        t('schedule.classes.class.attendance.search_result_empty') : \n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.email')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {queryAccountsData.accounts.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col key={v4()}>\n                  {node.fullName}\n                </Table.Col>\n                <Table.Col key={v4()}>\n                  {node.email}\n                </Table.Col>\n                <Table.Col key={v4()}>\n                  {(accountIdsWithTickets.includes(node.id)) ? \n                    <span className=\"pull-right\">{t(\"schedule.events.tickets.customers.search_results_already_bought\")}</span> :\n                    <Button \n                      onClick={() =>\n                        addAccountScheduleEventTicket({ variables: {\n                          input: {\n                            account: node.id,\n                            scheduleEventTicket: id\n                          }                            \n                        }, refetchQueries: [\n                            {query: GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY, variables: {\n                              scheduleEventTicket: id\n                            }},\n                        ]})\n                        .then(({ data }) => {\n                            console.log('got data', data);\n                            toast.success((t('schedule.events.tickets.customers.toast_add_success')), {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                            setShowSearch(false)\n                          }).catch((error) => {\n                            toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                            console.log('there was an error sending the query', error)\n                            setShowSearch(false)\n                          })\n                      }\n                    >\n                      {t(\"general.add\")}\n                    </Button>\n                    // <Link to={\"/schedule/classes/class/book/\" + schedule_item_id + \"/\" + class_date + \"/\" + node.id}>\n                    //   <Button color=\"secondary pull-right\">\n                    //     {t('general.checkin')} <Icon name=\"chevron-right\" />\n                    //   </Button>\n                    // </Link>       \n                  }   \n                </Table.Col>\n              </Table.Row>\n            ))}\n          </Table.Body>\n        </Table>\n      }\n    </ContentCard>\n    : \"\"\n\n  // Empty list\n  // if (!accountScheduleEventTickets.edges.length) {\n  //   <ScheduleEventTicketEditBase \n  //     sidebarContent={sidebarContent} \n  //     activeTab={activeTab} \n  //     activeLink={activeLink} \n  //     returnUrl={returnUrl}\n  //     pageHeaderOptions={pageHeaderOptions}\n  //     SearchResults={searchResults}\n  //   >\n  //     <Card.Body>\n  //       <Table>\n  //         <Table.Header>\n  //           <Table.Row>\n  //             <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n  //             <Table.ColHeader>{t('general.included')}</Table.ColHeader>\n  //           </Table.Row>\n  //         </Table.Header>\n  //         <Table.Body>\n  //           {accountScheduleEventTickets.edges.map(({ node }) => (\n  //             <Table.Row key={v4()}>\n  //               <Table.Col>\n  //                 {node.scheduleItem.name}\n  //               </Table.Col>  \n  //             </Table.Row>\n  //           ))}\n  //         </Table.Body>\n  //       </Table>\n  //     </Card.Body>\n  //   </ScheduleEventTicketEditBase>\n  // }\n\n  // Data\n  return (\n    <ScheduleEventTicketEditBase \n      sidebarContent={sidebarContent} \n      activeTab={activeTab} \n      activeLink={activeLink} \n      returnUrl={returnUrl}\n      pageHeaderOptions={pageHeaderOptions}\n      searchResults={searchResults}\n    >\n      <Card.Body>\n        <Table>\n          <Table.Header>\n            <Table.Row>\n              <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.invoice')}</Table.ColHeader>\n              <Table.ColHeader>{t('schedule.events.tickets.info_mail_sent')}</Table.ColHeader> \n              <Table.ColHeader></Table.ColHeader> \n              <Table.ColHeader></Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {accountScheduleEventTickets.edges.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col>\n                  {node.account.fullName} <br />\n                  {(node.cancelled) ? <Badge color=\"warning\">{t(\"general.cancelled\")}</Badge> : \"\"}\n                </Table.Col>  \n                <Table.Col>\n\n                </Table.Col>\n                <Table.Col>\n                  <BadgeBoolean value={node.infoMailSent} /> <br />\n                  {/* TODO: resend link here */}\n                </Table.Col>\n                <Table.Col>\n                  {(node.cancelled) ?\n                    <Button \n                      className=\"pull-right\"\n                      color=\"warning\"\n                      onClick={() =>\n                        updateAccountScheduleEventTicket({ variables: {\n                          input: {\n                            id: node.id,\n                            cancelled: false\n                          }\n                        }, refetchQueries: [\n                            {query: GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY, variables: {\n                              scheduleEventTicket: id\n                            }},\n                        ]})\n                        .then(({ data }) => {\n                            console.log('got data', data);\n                            toast.success((t('schedule.events.tickets.customers.uncancelled')), {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                            setShowSearch(false)\n                          }).catch((error) => {\n                            toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                            console.log('there was an error sending the query', error)\n                            setShowSearch(false)\n                          }\n                        )\n                      }\n                    >\n                      {t(\"general.uncancel\")}\n                    </Button>\n                  :\n                    <Button \n                      className=\"pull-right\"\n                      color=\"warning\"\n                      onClick={() =>\n                        updateAccountScheduleEventTicket({ variables: {\n                          input: {\n                            id: node.id,\n                            cancelled: true\n                          }\n                        }, refetchQueries: [\n                            {query: GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY, variables: {\n                              scheduleEventTicket: id\n                            }},\n                        ]})\n                        .then(({ data }) => {\n                            console.log('got data', data);\n                            toast.success((t('schedule.events.tickets.customers.cancelled')), {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                            setShowSearch(false)\n                          }).catch((error) => {\n                            toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                                position: toast.POSITION.BOTTOM_RIGHT\n                              })\n                            console.log('there was an error sending the query', error)\n                            setShowSearch(false)\n                          })\n                        }\n                      >\n                        {t(\"general.cancel\")}\n                      </Button>\n                  }\n                </Table.Col>\n              </Table.Row>\n            ))}\n          </Table.Body>\n        </Table>\n      </Card.Body>\n    </ScheduleEventTicketEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ScheduleEventTicketEditCustomers))","// @flow\n\nimport * as React from \"react\"\nimport { withTranslation } from 'react-i18next'\nimport { NavLink, withRouter } from \"react-router-dom\"\nimport { useQuery } from \"@apollo/client\"\nimport { ToastContainer, Slide } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\nimport 'react-confirm-alert/src/react-confirm-alert.css'\nimport { Link } from 'react-router-dom'\n\nimport GET_USER from \"../queries/system/get_user\"\nimport { get_all_permissions, has_permission } from \"../tools/user_tools\"\n\nimport {\n  Site,\n  Nav,\n  Grid,\n  Button,\n  // Page,\n  RouterContextProvider,\n} from \"tabler-react\";\n\nimport type { NotificationProps } from \"tabler-react\";\n\ntype Props = {|\n  +children: React.Node,\n|};\n\ntype State = {|\n  notificationsObjects: Array<NotificationProps>,\n|};\n\ntype subNavItem = {|\n  +value: string,\n  +to?: string,\n  +icon?: string,\n  +LinkComponent?: React.ElementType,\n|};\n\ntype navItem = {|\n  +value: string,\n  +to?: string,\n  +icon?: string,\n  +active?: boolean,\n  +LinkComponent?: React.ElementType,\n  +subItems?: Array<subNavItem>,\n  +useExact?: boolean,\n|};\n\n\nconst getNavBarItems = (t, user) => {\n  let items: Array<navItem> = []\n  let permissions = get_all_permissions(user)\n\n  items.push({\n    value: t(\"home.title\"),\n    to: \"/\",\n    icon: \"home\",\n    LinkComponent: withRouter(NavLink),\n    useExact: true,\n  })\n\n  // Relations\n  if (\n    (has_permission(permissions, 'view', 'account'))\n  ){\n    items.push({\n      value: t(\"relations.title\"),\n      to: \"/relations\",\n      icon: \"users\",\n      LinkComponent: withRouter(NavLink),\n    })\n  }\n\n  // Schedule\n  if (\n    (has_permission(permissions, 'view', 'scheduleclass'))\n  ){\n    items.push({\n      value: t(\"schedule.title\"),\n      to: \"/schedule\",\n      icon: \"calendar\",\n      LinkComponent: withRouter(NavLink),\n    })\n  }\n\n  // Finance\n  if (\n    (has_permission(permissions, 'view', 'financecostcenter')) ||\n    (has_permission(permissions, 'view', 'financeglaccount')) ||\n    (has_permission(permissions, 'view', 'financetaxrate')) \n  ){\n    items.push({\n      value: t(\"finance.title\"),\n      to: \"/finance\",\n      icon: \"dollar-sign\",\n      LinkComponent: withRouter(NavLink),\n    })\n  }\n\n  // Organization\n  if (\n    (has_permission(permissions, 'view', 'organizationclasspass')) || \n    (has_permission(permissions, 'view', 'organizationclasstype')) ||\n    (has_permission(permissions, 'view', 'organizationdiscovery')) ||\n    (has_permission(permissions, 'view', 'organizationlocation')) ||\n    (has_permission(permissions, 'view', 'organizationmembership')) \n   ){\n  items.push({\n    value: t(\"organization.title\"),\n    to: \"/organization\",\n    icon: \"feather\",\n    LinkComponent: withRouter(NavLink),\n  })\n}\n\n\n  return items\n\n}\n\nconst now = new Date()\n\n\nfunction SiteWrapperSelfCheckin({t, match, history, children}) {\n  const { error, loading, data, fetchMore } = useQuery(GET_USER)\n\n  if (loading) return <p>{t('general.loading_with_dots')}</p>;\n  if (error) return <p>{t('system.user.error_loading')}</p>; \n\n  console.log(data)\n\n  return (\n    <Site.Wrapper\n      headerProps={{\n        href: \"/\",\n        alt: \"Costasiella\",\n        imageURL: \"/d/static/logos/stock/logo_stock_backend.png\", // Set logo url here\n        // navItems: (\n        //   <Nav.Item type=\"div\" className=\"d-none d-md-flex\">\n        //     <Link to=\"/settings/general\">\n        //       <Button\n        //         icon=\"settings\"\n        //         outline\n        //         size=\"sm\"\n        //         color=\"primary\"\n        //       >\n        //         {this.props.t('general.settings')}\n        //       </Button>\n        //     </Link>\n        //   </Nav.Item>\n        // ),\n        // notificationsTray: {\n        //   notificationsObjects,\n        //   markAllAsRead: () =>\n        //     this.setState(\n        //       () => ({\n        //         notificationsObjects: this.state.notificationsObjects.map(\n        //           v => ({ ...v, unread: false })\n        //         ),\n        //       }),\n        //       () =>\n        //         setTimeout(\n        //           () =>\n        //             this.setState({\n        //               notificationsObjects: this.state.notificationsObjects.map(\n        //                 v => ({ ...v, unread: true })\n        //               ),\n        //             }),\n        //           5000\n        //         )\n        //     ),\n        //   unread: unreadCount,\n        // },\n        accountDropdown: {\n        avatarURL: \"#\",\n        name: data.user.firstName + ' ' + data.user.lastName,\n        description: \"\",\n        options: [\n          // { icon: \"user\", value: \"Profile\" },\n          { icon: \"lock\", value: \"Change password\", to: \"/#/user/password/change/\" },\n          { isDivider: true },\n          { icon: \"log-out\", value: \"Sign out\", to: \"/#/user/logout/\" },\n        ],\n      },\n      }}\n      // navProps={{ itemsObjects: navBarItems }}\n      // navProps={{ itemsObjects: getNavBarItems(this.props.t, data.user) }}\n      routerContextComponentType={withRouter(RouterContextProvider)}\n      footerProps={{\n        // links: [\n        //   <a href=\"#\">First Link</a>,\n        //   <a href=\"#\">Second Link</a>,\n        //   <a href=\"#\">Third Link</a>,\n        //   <a href=\"#\">Fourth Link</a>,\n        //   <a href=\"#\">Five Link</a>,\n        //   <a href=\"#\">Sixth Link</a>,\n        //   <a href=\"#\">Seventh Link</a>,\n        //   <a href=\"#\">Eigth Link</a>,\n        // ],\n        // note:\n        //   \"Premium and Open Source dashboard template with responsive and high quality UI. For Free!\",\n        copyright: (\n          <React.Fragment>\n            Copyleft © {now.getFullYear()}.\n            <a\n              href=\"https://www.costasiella.com\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              {\" \"}\n              Edwin van de Ven\n            </a>{\". \"}\n            All rights reserved.\n          </React.Fragment>\n        ),\n        nav: (\n          <React.Fragment>\n            <Grid.Col auto={true}>\n              {/* <List className=\"list-inline list-inline-dots mb-0\">\n                <List.Item className=\"list-inline-item\">\n                  <a href=\"./docs/index.html\">Documentation</a>\n                </List.Item>\n                <List.Item className=\"list-inline-item\">\n                  <a href=\"./faq.html\">FAQ</a>\n                </List.Item>\n              </List> */}\n            </Grid.Col>\n            <Grid.Col auto={true}>\n              {/* <Button\n                href=\"https://github.com/tabler/tabler-react\"\n                size=\"sm\"\n                outline\n                color=\"primary\"\n                RootComponent=\"a\"\n              >\n                Source code\n              </Button> */}\n            </Grid.Col>\n          </React.Fragment>\n        ),\n      }}\n    >\n      {children}\n      <ToastContainer \n        autoClose={5000} \n        transition={Slide}\n      />\n    </Site.Wrapper> \n  )\n}\n\n\n// class SiteWrapperSelfCheckin extends React.Component<Props, State> {\n//   state = {}  \n\n//   render(): React.Node {\n//     return (\n//       <Query query={GET_USER} >\n//         {({ loading, error, data }) => {\n//           if (loading) return <p>{this.props.t('general.loading_with_dots')}</p>;\n//           if (error) return <p>{this.props.t('system.user.error_loading')}</p>; \n          \n//           console.log('user data in site wrapper')\n//           console.log(data)\n      \n//           return <Site.Wrapper\n//             headerProps={{\n//                 href: \"/\",\n//                 alt: \"Costasiella\",\n//                 imageURL: \"/d/static/logos/stock/logo_stock_backend.png\", // Set logo url here\n//                 // navItems: (\n//                 //   <Nav.Item type=\"div\" className=\"d-none d-md-flex\">\n//                 //     <Link to=\"/settings/general\">\n//                 //       <Button\n//                 //         icon=\"settings\"\n//                 //         outline\n//                 //         size=\"sm\"\n//                 //         color=\"primary\"\n//                 //       >\n//                 //         {this.props.t('general.settings')}\n//                 //       </Button>\n//                 //     </Link>\n//                 //   </Nav.Item>\n//                 // ),\n//                 // notificationsTray: {\n//                 //   notificationsObjects,\n//                 //   markAllAsRead: () =>\n//                 //     this.setState(\n//                 //       () => ({\n//                 //         notificationsObjects: this.state.notificationsObjects.map(\n//                 //           v => ({ ...v, unread: false })\n//                 //         ),\n//                 //       }),\n//                 //       () =>\n//                 //         setTimeout(\n//                 //           () =>\n//                 //             this.setState({\n//                 //               notificationsObjects: this.state.notificationsObjects.map(\n//                 //                 v => ({ ...v, unread: true })\n//                 //               ),\n//                 //             }),\n//                 //           5000\n//                 //         )\n//                 //     ),\n//                 //   unread: unreadCount,\n//                 // },\n//                 accountDropdown: {\n//                 avatarURL: \"#\",\n//                 name: data.user.firstName + ' ' + data.user.lastName,\n//                 description: \"\",\n//                 options: [\n//                   // { icon: \"user\", value: \"Profile\" },\n//                   { icon: \"lock\", value: \"Change password\", to: \"/#/user/password/change/\" },\n//                   { isDivider: true },\n//                   { icon: \"log-out\", value: \"Sign out\", to: \"/#/user/logout/\" },\n//                 ],\n//               },\n//               }}\n//               // navProps={{ itemsObjects: navBarItems }}\n//               // navProps={{ itemsObjects: getNavBarItems(this.props.t, data.user) }}\n//               routerContextComponentType={withRouter(RouterContextProvider)}\n//               footerProps={{\n//                 // links: [\n//                 //   <a href=\"#\">First Link</a>,\n//                 //   <a href=\"#\">Second Link</a>,\n//                 //   <a href=\"#\">Third Link</a>,\n//                 //   <a href=\"#\">Fourth Link</a>,\n//                 //   <a href=\"#\">Five Link</a>,\n//                 //   <a href=\"#\">Sixth Link</a>,\n//                 //   <a href=\"#\">Seventh Link</a>,\n//                 //   <a href=\"#\">Eigth Link</a>,\n//                 // ],\n//                 // note:\n//                 //   \"Premium and Open Source dashboard template with responsive and high quality UI. For Free!\",\n//                 copyright: (\n//                   <React.Fragment>\n//                     Copyleft © {now.getFullYear()}.\n//                     <a\n//                       href=\"https://www.costasiella.com\"\n//                       target=\"_blank\"\n//                       rel=\"noopener noreferrer\"\n//                     >\n//                       {\" \"}\n//                       Edwin van de Ven\n//                     </a>{\". \"}\n//                     All rights reserved.\n//                   </React.Fragment>\n//                 ),\n//                 nav: (\n//                   <React.Fragment>\n//                     <Grid.Col auto={true}>\n//                       {/* <List className=\"list-inline list-inline-dots mb-0\">\n//                         <List.Item className=\"list-inline-item\">\n//                           <a href=\"./docs/index.html\">Documentation</a>\n//                         </List.Item>\n//                         <List.Item className=\"list-inline-item\">\n//                           <a href=\"./faq.html\">FAQ</a>\n//                         </List.Item>\n//                       </List> */}\n//                     </Grid.Col>\n//                     <Grid.Col auto={true}>\n//                       {/* <Button\n//                         href=\"https://github.com/tabler/tabler-react\"\n//                         size=\"sm\"\n//                         outline\n//                         color=\"primary\"\n//                         RootComponent=\"a\"\n//                       >\n//                         Source code\n//                       </Button> */}\n//                     </Grid.Col>\n//                   </React.Fragment>\n//                 ),\n//               }}\n//             >\n//               {this.props.children}\n//               <ToastContainer \n//                 autoClose={5000} \n//                 transition={Slide}\n//               />\n//             </Site.Wrapper>\n//           }}\n//         </Query>\n//     );\n//   }\n// }\n\nexport default withTranslation()(SiteWrapperSelfCheckin)\n","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Page,\n  Grid,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapperSelfCheckin from \"../SiteWrapperSelfCheckin\"\n\n\nfunction SelfCheckinBase({ t, match, history, children, title }) {\n\n  return (\n    <SiteWrapperSelfCheckin>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={title} />\n            <Grid.Row>\n              <Grid.Col md={12}>\n                { children }\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n    </SiteWrapperSelfCheckin>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SelfCheckinBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_ACCOUNTS_QUERY = gql`\n  query Accounts(\n    $after: String, \n    $before: String, \n    $searchName: String,\n    $teacher: Boolean,\n    $employee: Boolean\n  ) {\n    accounts(\n      first: 25, \n      before: $before, \n      after: $after, \n      isActive: true, \n      fullName_Icontains: $searchName,\n      customer: true,\n      teacher: $teacher,\n      employee: $employee\n    ) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          fullName\n          email\n          isActive\n        }\n      }\n    }\n  }\n`\n\n\nexport const GET_SCHEDULE_CLASS_ATTENDANCE_QUERY = gql`\n  query ScheduleItemAttendances($after: String, $before: String, $scheduleItem: ID!, $date: Date!) {\n    scheduleItemAttendances(first: 100, before: $before, after: $after, scheduleItem: $scheduleItem, date: $date) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          account {\n            id\n            fullName\n          }     \n          attendanceType\n          bookingStatus\n        }\n      }\n    }\n    scheduleItem(id:$scheduleItem) {\n      id\n      frequencyType\n      frequencyInterval\n      organizationLocationRoom {\n        id\n        name\n        organizationLocation {\n          id\n          name\n        }\n      }\n      organizationClasstype {\n        id\n        name\n      }\n      organizationLevel {\n        id\n        name\n      }\n      dateStart\n      dateEnd\n      timeStart\n      timeEnd\n      displayPublic\n    }\n  }\n`\n\nexport const DELETE_SCHEDULE_CLASS_ATTENDANCE = gql`\n  mutation DeleteScheduleItemAttendance($input: DeleteScheduleItemAttendanceInput!) {\n    deleteScheduleItemAttendance(input: $input) {\n      ok\n    }\n  }\n`\n\n\nexport const UPDATE_SCHEDULE_ITEM_ATTENDANCE = gql`\n  mutation UpdateScheduleItemAttendance($input: UpdateScheduleItemAttendanceInput!) {\n    updateScheduleItemAttendance(input:$input) {\n      scheduleItemAttendance {\n        id\n      }\n    }\n  }\n`\n","import CSLS from \"../../../tools/cs_local_storage\"\nimport { withRouter } from \"react-router\"\n\nexport function get_accounts_query_variables() {\n  let queryVars = {\n    teacher: undefined,\n    employee: undefined,\n    searchName: undefined\n  }\n\n  let search = localStorage.getItem(CSLS.SELFCHECKIN_CHECKIN_SEARCH)\n  queryVars.searchName = search\n\n  console.log(queryVars)\n\n  return queryVars\n}\n\nexport function get_attendance_list_query_variables(schedule_item_id, date) {\n  return {\n    scheduleItem: schedule_item_id,\n    date: date\n  }\n}\n","// @flow\n\nimport React, { useContext, useState } from 'react'\nimport { useQuery, useMutation, useLazyQuery } from '@apollo/client'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\n\nimport moment from 'moment'\n\nimport {\n  Button,\n  Card,\n  Dropdown,\n  Icon,\n  Table\n} from \"tabler-react\";\nimport SelfCheckinBase from \"../SelfCheckinBase\"\n\nimport AppSettingsContext from '../../context/AppSettingsContext'\n\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { GET_ACCOUNTS_QUERY, GET_SCHEDULE_CLASS_ATTENDANCE_QUERY, UPDATE_SCHEDULE_ITEM_ATTENDANCE } from \"./queries\"\nimport { get_attendance_list_query_variables, get_accounts_query_variables } from \"./tools\"\nimport CSLS from \"../../../tools/cs_local_storage\"\nimport BadgeBookingStatus from \"../../ui/BadgeBookingStatus\"\nimport ContentCard from \"../../general/ContentCard\"\nimport InputSearch from \"../../general/InputSearch\"\nimport ScheduleClassAttendanceDelete from \"../../schedule/classes/class/attendance/ScheduleClassAttendanceDelete\"\n\n\nfunction setAttendanceStatus({t, updateAttendance, node, status}) {\n  updateAttendance({\n    variables: { \n      input: {\n        id: node.id, \n        bookingStatus: status\n      }\n    }\n  }).then(({ data }) => {\n    console.log('got data', data);\n    toast.success(\n      t('schedule.classes.class.attendance.status_saved'), {\n        position: toast.POSITION.BOTTOM_RIGHT\n      })\n  }).catch((error) => {\n    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n        position: toast.POSITION.BOTTOM_RIGHT\n      })\n    console.log('there was an error sending the query', error);\n  })\n}\n\n\nfunction SelfCheckinCheckin({ t, match, history }) {\n  const [showSearch, setShowSearch] = useState(false)\n  const locationId = match.params.location_id\n  const scheduleItemId = match.params.class_id\n  const class_date = match.params.date\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  // const today = moment().format('YYYY-MM-DD')\n\n  const { \n    refetch: refetchAttendance, \n    loading: queryAttendanceLoading, \n    error: queryAttendanceError, \n    data: queryAttendanceData \n  } = useQuery(\n    GET_SCHEDULE_CLASS_ATTENDANCE_QUERY, {\n      variables: get_attendance_list_query_variables(scheduleItemId, class_date)\n    }\n  )\n\n  const [ updateAttendance, \n    { loading: mutationAttendanceLoading, error: mutationAttendanceError },\n  ] = useMutation(UPDATE_SCHEDULE_ITEM_ATTENDANCE)\n\n  const [ getAccounts, \n    { refetch: refetchAccounts, \n      fetchMore: fetchMoreAccounts,\n      loading: queryAccountsLoading, \n      error: queryAccountsError, \n      data: queryAccountsData \n    }] = useLazyQuery( GET_ACCOUNTS_QUERY )\n\n  console.log('queryAccountsData')\n  console.log(queryAccountsData)\n  \n  if (queryAttendanceLoading) return (\n    <SelfCheckinBase>\n      {t(\"general.loading_with_dots\")}\n    </SelfCheckinBase>\n  )\n  if (queryAttendanceError) return (\n    <SelfCheckinBase>\n      {t(\"selfcheckin.checkin.error_loading\")}\n    </SelfCheckinBase>\n  )\n\n  console.log(queryAttendanceData)\n  let checkedInIds = []\n  queryAttendanceData.scheduleItemAttendances.edges.map(({ node }) => (\n    checkedInIds.push(node.account.id)\n  ))\n  console.log(checkedInIds)\n\n  return (\n    <SelfCheckinBase title={t(\"selfcheckin.classes.title\")}>\n      <ContentCard cardTitle={t('general.attendance')}\n                    pageInfo={queryAttendanceData.scheduleItemAttendances.pageInfo}\n                    onLoadMore={() => {\n                      fetchMoreAccounts({\n                      variables: {\n                        after: queryAttendanceData.scheduleItemAttendances.pageInfo.endCursor\n                      },\n                      updateQuery: (previousResult, { fetchMoreResult }) => {\n                        const newEdges = fetchMoreResult.scheduleItemAttendances.edges\n                        const pageInfo = fetchMoreResult.scheduleItemAttendances.pageInfo \n\n                        return newEdges.length\n                          ? {\n                              // Put the new scheduleItemAttendances at the end of the list and update `pageInfo`\n                              // so we have the new `endCursor` and `hasNextPage` values\n                              queryAttendanceData: {\n                                scheduleItemAttendances: {\n                                  __typename: previousResult.scheduleItemAttendances.__typename,\n                                  edges: [ ...previousResult.scheduleItemAttendances.edges, ...newEdges ],\n                                  pageInfo\n                                }\n                              }\n                            }\n                          : previousResult\n                      }\n                    })\n        }} >\n          <Table>\n            <Table.Header>\n              <Table.Row key={v4()}>\n                <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                <Table.ColHeader>{t('general.booking_status')}</Table.ColHeader>\n                <Table.ColHeader></Table.ColHeader>\n              </Table.Row>\n            </Table.Header>\n            <Table.Body>\n              {queryAttendanceData.scheduleItemAttendances.edges.map(({ node }) => (\n                  <Table.Row key={v4()}>\n                    <Table.Col>\n                      {node.account.fullName}\n                    </Table.Col>\n                    <Table.Col>\n                      <BadgeBookingStatus status={node.bookingStatus} />\n                    </Table.Col>\n                    <Table.Col>\n                      {/* Delete */}\n                      {/* <ScheduleClassAttendanceDelete node={node} /> */}\n                      {/* Status dropdown */}\n                      <Dropdown\n                        key={v4()}\n                        className=\"pull-right\"\n                        type=\"button\"\n                        toggle\n                        color=\"secondary\"\n                        triggerContent={t(\"general.status\")}\n                        items={[\n                          <HasPermissionWrapper key={v4()} permission=\"change\" resource=\"scheduleitemattendance\">\n                            <Dropdown.Item\n                              key={v4()}\n                              icon=\"check\"\n                              onClick={() => {\n                                setAttendanceStatus({\n                                  t: t, \n                                  updateAttendance: updateAttendance,\n                                  node: node,\n                                  status: 'ATTENDING'\n                                })\n                                refetchAttendance()\n                              }}>\n                                {t('schedule.classes.class.attendance.booking_status.ATTENDING')}\n                            </Dropdown.Item>\n                          </HasPermissionWrapper>,\n                          <HasPermissionWrapper key={v4()} permission=\"change\" resource=\"scheduleitemattendance\">\n                            <Dropdown.Item\n                              key={v4()}\n                              icon=\"calendar\"\n                              onClick={() => {\n                                setAttendanceStatus({\n                                  t: t, \n                                  updateAttendance: updateAttendance,\n                                  node: node,\n                                  status: 'BOOKED'\n                                })\n                                refetchAttendance()\n                              }}>\n                                {t('schedule.classes.class.attendance.booking_status.BOOKED')}\n                            </Dropdown.Item>\n                          </HasPermissionWrapper>,\n                          <HasPermissionWrapper key={v4()} permission=\"change\" resource=\"scheduleitemattendance\">\n                            <Dropdown.Item\n                              key={v4()}\n                              icon=\"x\"\n                              onClick={() => {\n                                setAttendanceStatus({\n                                  t: t, \n                                  updateAttendance: updateAttendance,\n                                  node: node,\n                                  status: 'CANCELLED'\n                                })\n                                refetchAttendance()\n                              }}>\n                                {t('schedule.classes.class.attendance.booking_status.CANCELLED')}\n                            </Dropdown.Item>\n                          </HasPermissionWrapper>,\n                        ]}\n                      />\n                      {(node.bookingStatus == \"BOOKED\") ?\n                        <HasPermissionWrapper key={v4()} permission=\"change\" resource=\"scheduleitemattendance\">\n                          <Button\n                            key={v4()}\n                            className=\"pull-right\"\n                            color=\"success\"\n                            size=\"\"\n                            onClick={() => {\n                              setAttendanceStatus({\n                                t: t, \n                                updateAttendance: updateAttendance,\n                                node: node,\n                                status: 'ATTENDING'\n                              })\n                              refetchAttendance()\n                            }}>\n                              {t('general.checkin')}\n                          </Button>\n                        </HasPermissionWrapper>  : \"\" }\n                    </Table.Col>\n                  </Table.Row>\n                ))}\n            </Table.Body>\n          </Table>\n      </ContentCard>\n      <h3>{t(\"selfcheckin.checkin.title_not_on_list\")}</h3>\n      <InputSearch \n        initialValueKey={CSLS.SELFCHECKIN_CHECKIN_SEARCH}\n        placeholder={t(\"search\")}\n        onChange={(value) => {\n          console.log(value)\n          localStorage.setItem(CSLS.SELFCHECKIN_CHECKIN_SEARCH, value)\n          if (value) {\n            // {console.log('showSearch')}\n            // {console.log(showSearch)}\n            setShowSearch(true)\n            getAccounts({ variables: get_accounts_query_variables()})\n          } else {\n            setShowSearch(false)\n          }\n        }}\n      /> <br />\n      {/* Search results */}\n      {(showSearch && (queryAccountsData) && (!queryAccountsLoading) && (!queryAccountsError)) ?\n        <ContentCard cardTitle={t('general.search_results')}\n                    pageInfo={queryAccountsData.accounts.pageInfo}\n                    onLoadMore={() => {\n                      fetchMoreAccounts({\n                        variables: {\n                        after: queryAccountsData.accounts.pageInfo.endCursor\n                      },\n                      updateQuery: (previousResult, { fetchMoreResult }) => {\n                        const newEdges = fetchMoreResult.accounts.edges\n                        const pageInfo = fetchMoreResult.accounts.pageInfo \n\n                        return newEdges.length\n                          ? {\n                              // Put the new accounts at the end of the list and update `pageInfo`\n                              // so we have the new `endCursor` and `hasNextPage` values\n                              queryAccountsData: {\n                                accounts: {\n                                  __typename: previousResult.accounts.__typename,\n                                  edges: [ ...previousResult.accounts.edges, ...newEdges ],\n                                  pageInfo\n                                }\n                              }\n                            }\n                          : previousResult\n                      }\n                    })\n                  }} >\n          { (!queryAccountsData.accounts.edges.length) ? \n            t('schedule.classes.class.attendance.search_result_empty') : \n            <Table>\n              <Table.Header>\n                <Table.Row key={v4()}>\n                  <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.email')}</Table.ColHeader>\n                  <Table.ColHeader></Table.ColHeader>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {queryAccountsData.accounts.edges.map(({ node }) => (\n                  <Table.Row key={v4()}>\n                    <Table.Col key={v4()}>\n                      {node.fullName}\n                    </Table.Col>\n                    <Table.Col key={v4()}>\n                      {node.email}\n                    </Table.Col>\n                    <Table.Col key={v4()}>\n                      {(checkedInIds.includes(node.id)) ? \n                        <span className=\"pull-right\">{t(\"schedule.classes.class.attendance.search_results_already_checked_in\")}</span> :\n                        <Link to={\"/selfcheckin/book/\" + locationId + \"/\" + scheduleItemId + \"/\" + class_date + \"/\" + node.id}>\n                          <Button color=\"secondary pull-right\">\n                            {t('general.checkin')} <Icon name=\"chevron-right\" />\n                          </Button>\n                        </Link>       \n                      }   \n                    </Table.Col>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          }\n        </ContentCard>\n        : \"\"\n      }\n    </SelfCheckinBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SelfCheckinCheckin))\n\n","import { gql } from \"@apollo/client\"\n\n\nexport const GET_BOOKING_OPTIONS_QUERY = gql`\n  query ScheduleClassBookingOptions($account: ID!, $scheduleItem:ID!, $date:Date!, $listType:String!) {\n    scheduleClassBookingOptions(account: $account, scheduleItem: $scheduleItem, date:$date, listType:$listType) {\n      date\n      account {\n        id\n        fullName\n      }\n      scheduleItem {\n        frequencyType\n        frequencyInterval\n        organizationLocationRoom {\n          id\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n        organizationClasstype {\n          id\n          name\n        }\n        organizationLevel {\n          id\n          name\n        }\n        dateStart\n        dateEnd\n        timeStart\n        timeEnd\n      }\n    \tscheduleItemPrices {\n        organizationClasspassDropin {\n          id\n          name\n          priceDisplay\n        }\n        organizationClasspassTrial {\n          id\n          name\n          priceDisplay\n        }\n      }\n      classpasses {\n        bookingType \n        allowed\n        accountClasspass {\n          id\n          dateStart\n          dateEnd\n          classesRemainingDisplay\n          organizationClasspass {\n            id\n            name\n          }\n        }\n      }\n      subscriptions {\n        bookingType\n        allowed\n        accountSubscription {\n          id\n          dateStart\n          dateEnd\n          organizationSubscription {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`\n\n\nexport const CREATE_SCHEDULE_ITEM_ATTENDANCE = gql`\n  mutation CreateScheduleItemAttendance($input: CreateScheduleItemAttendanceInput!) {\n    createScheduleItemAttendance(input:$input) {\n      scheduleItemAttendance {\n        id\n      }\n    }\n  }\n`","// @flow\n\nimport React, { Component, useState } from 'react'\nimport { useQuery, useMutation, useLazyQuery } from '@apollo/client'\nimport { Query, Mutation } from \"@apollo/client\"\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport {\n  Alert,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table,\n  StampCard\n} from \"tabler-react\";\nimport SelfCheckinBase from \"../SelfCheckinBase\"\n// import HasPermissionWrapper from \"../../../HasPermissionWrapper\"\nimport { TimeStringToJSDateOBJ } from '../../../tools/date_tools'\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\n// import { class_edit_all_subtitle } from \"../../schedule/classes/tools\"\n// import confirm_delete from \"../../../../tools/confirm_delete\"\n\nimport { class_subtitle, get_accounts_query_variables } from \"../../schedule/classes/class/tools\"\n\n// import ContentCard from \"../../../../general/ContentCard\"\n// import ScheduleClassBookBack from \"./ScheduleClassBookBack\"\nimport ScheduleClassBookClasspasses from \"../../schedule/classes/class/book/ScheduleClassBookClasspasses\"\n// import ScheduleClassBookClasspasses from \"\"\nimport ScheduleClassBookSubscriptions from \"../../schedule/classes/class/book/ScheduleClassBookSubscriptions\"\nimport ScheduleClassBookPriceDropin from \"../../schedule/classes/class/book/ScheduleClassBookPriceDropin\"\nimport ScheduleClassBookPriceTrial from \"../../schedule/classes/class/book/ScheduleClassBookPriceTrial\"\n// import ClassEditBase from \"../ClassEditBase\"\n\nimport { GET_BOOKING_OPTIONS_QUERY } from \"./queries\"\n// import CSLS from \"../../../../tools/cs_local_storage\"\n\nconst DELETE_SCHEDULE_CLASS_TEACHER = gql`\n  mutation DeleteScheduleClassTeacher($input: DeleteScheduleItemTeacherInput!) {\n    deleteScheduleItemTeacher(input: $input) {\n      ok\n    }\n  }\n`\n\n\nfunction SelfCheckinBookingOptions({ t, match, history }) {\n  const [showSearch, setShowSearch] = useState(false)\n  const return_url = \"/schedule/classes/\"\n  const account_id = match.params.account_id\n  const schedule_item_id = match.params.class_id\n  const class_date = match.params.date\n  const locationId = match.params.location_id\n  const { loading: queryLoading, error: queryError, data: queryData } = useQuery(\n    GET_BOOKING_OPTIONS_QUERY, {\n      variables: {\n        account: account_id,\n        scheduleItem: schedule_item_id,\n        date: class_date,\n        listType: \"ATTEND\"\n      }\n    }\n  )\n\n  // Query\n  // Loading\n  if (queryLoading) return <p>{t('general.loading_with_dots')}</p>\n  // Error\n  if (queryError) {\n    console.log(queryError)\n    return <p>{t('general.error_sad_smiley')}</p>\n  }\n  \n  console.log(queryData)\n  const account = queryData.scheduleClassBookingOptions.account\n  const classpasses = queryData.scheduleClassBookingOptions.classpasses\n  const subscriptions = queryData.scheduleClassBookingOptions.subscriptions\n  const prices = queryData.scheduleClassBookingOptions.scheduleItemPrices\n  const scheduleItem = queryData.scheduleClassBookingOptions.scheduleItem\n  const subtitle = class_subtitle({\n    t: t,\n    location: scheduleItem.organizationLocationRoom.organizationLocation.name, \n    locationRoom: scheduleItem.organizationLocationRoom.name,\n    classtype: scheduleItem.organizationClasstype.name, \n    timeStart: TimeStringToJSDateOBJ(scheduleItem.timeStart), \n    date: class_date\n  })\n\n  console.log(prices)\n  \n  \n  return (\n    <SelfCheckinBase title={t(\"selfcheckin.classes.title\")}>\n      <Grid.Row>\n          <Grid.Col md={12}>\n            <h4>{t('general.booking_options')} {account.fullName}</h4>\n            <div className=\"mt-6\">\n            <Grid.Row cards deck>\n              <ScheduleClassBookSubscriptions \n                subscriptions={subscriptions} \n                returnTo=\"selfcheckin\" \n                locationId={locationId}\n              />\n              <ScheduleClassBookClasspasses \n                classpasses={classpasses} \n                returnTo=\"selfcheckin\" \n                locationId={locationId}\n              />\n              {(prices) ?\n                (prices.organizationClasspassDropin) ? \n                  <ScheduleClassBookPriceDropin \n                    priceDropin={prices.organizationClasspassDropin}\n                    returnTo=\"selfcheckin\" \n                    locationId={locationId}\n                  /> : \"\" \n                : \"\" }\n              {(prices) ?\n                (prices.organizationClasspassTrial) ? \n                  <ScheduleClassBookPriceTrial \n                    priceTrial={prices.organizationClasspassTrial}\n                    returnTo=\"selfcheckin\" \n                    locationId={locationId}\n                  /> : \"\" \n                : \"\" }\n            </Grid.Row>\n            </div>\n          </Grid.Col>\n        </Grid.Row>\n    </SelfCheckinBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SelfCheckinBookingOptions))\n\n","import { gql } from \"@apollo/client\"\n\nexport const GET_ORGANIZATION_LOCATIONS_QUERY = gql`\n  query Organizationlocations($after: String, $before: String) {\n    organizationLocations(first: 100, before: $before, after: $after, archived: false) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          name\n          organizationlocationroomSet(first: 100, archived: false) {\n            edges {\n              node {\n                id\n                name\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`\n","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Icon,\n  List\n} from \"tabler-react\";\nimport SelfCheckinBase from \"../SelfCheckinBase\"\n\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { GET_ORGANIZATION_LOCATIONS_QUERY } from \"./queries\"\n\n\nfunction Locations({ t, match, history }) {\n  const { loading, error, data } = useQuery(GET_ORGANIZATION_LOCATIONS_QUERY);\n\n  if (loading) return (\n    <SelfCheckinBase>\n      {t(\"general.loading_with_dots\")}\n    </SelfCheckinBase>\n  )\n  if (error) return (\n    <SelfCheckinBase>\n      {t(\"selfcheckin.locations.error_loading\")}\n    </SelfCheckinBase>\n  )\n\n\n  return (\n    <SelfCheckinBase title={t(\"selfcheckin.home.title\")}>\n      <h4>{t(\"selfcheckin.locations.please_select\")}</h4>\n        <List.Group>\n          {\n            data.organizationLocations.edges.map(({node}) =>\n              <List.GroupItem action>\n                <Link to={\"/selfcheckin/location/\" + node.id}>\n                  <div>\n                    <span className=\"pull-right\"><Icon name=\"chevron-right\" /></span>\n                    {node.name}\n                  </div>\n                </Link>\n              </List.GroupItem>\n          )}\n        </List.Group>\n\n          {/* //  List location rooms\n          // <div>\n          //   <h3>{node.name}</h3>\n          //   <List.Group>\n          //     {\n          //       node.organizationlocationroomSet.edges.map(({node}) =>\n          //         <List.GroupItem action>\n          //           <Link to={\"/selfcheckin/room/\" + node.id}>\n          //             <div>\n          //               <span className=\"pull-right\"><Icon name=\"chevron-right\" /></span>\n          //               {node.name}\n          //             </div>\n          //           </Link>\n          //         </List.GroupItem>\n          //       )\n          //     }\n          //   </List.Group>\n          //   <br />\n          // </div>\n        // ) */}\n      \n    </SelfCheckinBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(Locations))","import { gql } from \"@apollo/client\"\n\nexport const GET_LOCATION_CLASSES_QUERY = gql`\n  query ScheduleClasses(\n      $dateFrom: Date!, \n      $dateUntil:Date!, \n      $orderBy: String, \n      $organizationClasstype: String,\n      $organizationLevel: String,\n      $organizationLocation: String,\n      $attendanceCountType: String!\n    ){\n    scheduleClasses(\n        dateFrom:$dateFrom, \n        dateUntil: $dateUntil, \n        orderBy: $orderBy, \n        organizationClasstype: $organizationClasstype,\n        organizationLevel: $organizationLevel,\n        organizationLocation: $organizationLocation,\n        attendanceCountType: $attendanceCountType\n    ){\n      date\n      classes {\n        scheduleItemId\n        frequencyType\n        date\n        status\n        description\n        account {\n          id\n          fullName\n        }\n        role\n        account2 {\n          id\n          fullName\n        }\n        role2\n        organizationLocationRoom {\n          id\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n        organizationClasstype {\n          id\n          name\n        }\n        organizationLevel {\n          id\n          name\n        }\n        timeStart\n        timeEnd\n        displayPublic\n      }\n    }\n  }\n`","// @flow\n\nimport React, { useContext } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\n\nimport moment from 'moment'\n\nimport {\n  Button,\n  Card,\n  Icon,\n  Table\n} from \"tabler-react\";\nimport SelfCheckinBase from \"../SelfCheckinBase\"\n\nimport AppSettingsContext from '../../context/AppSettingsContext'\n\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { GET_LOCATION_CLASSES_QUERY } from \"./queries\"\n\n\nfunction LocationClasses({ t, match, history }) {\n  const locationId = match.params.location_id\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  const today = moment().format('YYYY-MM-DD')\n\n  const { loading, error, data } = useQuery(GET_LOCATION_CLASSES_QUERY, {\n    variables: {\n      dateFrom: today,\n      dateUntil: today,\n      organizationLocation: locationId,\n      attendanceCountType: \"ATTENDING_AND_BOOKED\"\n    }\n  })\n\n  if (loading) return (\n    <SelfCheckinBase>\n      {t(\"general.loading_with_dots\")}\n    </SelfCheckinBase>\n  )\n  if (error) return (\n    <SelfCheckinBase>\n      {t(\"selfcheckin.classes.error_loading\")}\n    </SelfCheckinBase>\n  )\n\n  console.log(data)\n\n  return (\n    <SelfCheckinBase title={t(\"selfcheckin.classes.title\")}>\n      <Card>\n      <Table>\n        <Table.Header>\n          <Table.Row>\n            <Table.ColHeader>\n              { t(\"general.time\") }\n            </Table.ColHeader>\n            <Table.ColHeader>\n              { t(\"general.room\") }\n            </Table.ColHeader>\n            <Table.ColHeader>\n              { t(\"general.class\") }\n            </Table.ColHeader>\n            <Table.ColHeader>\n              { t(\"general.teacher\") }\n            </Table.ColHeader>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          {\n            data.scheduleClasses.map(({ date, classes }) => \n              classes.map((\n                { scheduleItemId, \n                  frequencyType,\n                  date, \n                  status,\n                  description,\n                  account, \n                  role,\n                  account2,\n                  role2,\n                  organizationLocationRoom, \n                  organizationClasstype, \n                  organizationLevel,\n                  timeStart, \n                  timeEnd,\n                  displayPublic }) => (\n                    // console.log(scheduleItemId)\n                    <Table.Row>\n                      <Table.Col>\n                        {moment(date + ' ' + timeStart).format(timeFormat)} {' - '}\n                        {moment(date + ' ' + timeEnd).format(timeFormat)}\n                      </Table.Col>\n                      <Table.Col>\n                        { organizationLocationRoom.name }\n                      </Table.Col>\n                      <Table.Col>\n                        { organizationClasstype.name }\n                      </Table.Col>\n                      <Table.Col>\n                        {/* Teacher(s) */}\n                        { (account) ? account.fullName : \n                          <span className=\"text-red\">{t(\"schedule.classes.no_teacher\")}</span>\n                        }\n                      </Table.Col>\n                      <Table.Col>\n                        <Link to={\"/selfcheckin/checkin/\" + locationId + \"/\" + scheduleItemId + \"/\" + date}>\n                          <Button color=\"secondary\" className=\"pull-right\">\n                            {t(\"selfcheckin.classes.go_to_checkin\")}\n                            <Icon name=\"chevron-right\" />\n                          </Button>\n                        </Link>\n                      </Table.Col>\n                    </Table.Row>\n                  )\n                )\n            )\n          }\n        </Table.Body>\n      </Table>\n      </Card>\n    </SelfCheckinBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(LocationClasses))","import { gql } from \"@apollo/client\"\n\n\nexport const GET_SYSTEM_SETTINGS_QUERY = gql`\n  query SystemSettings($setting: String!) {\n    systemSettings(setting: $setting) {\n      edges {\n        node {\n          id\n          setting\n          value\n        }\n      }\n    }\n  }\n`\n\n\nexport const UPDATE_SYSTEM_SETTING = gql`\n  mutation UpdateSystemSetting($input: UpdateSystemSettingInput!) {\n    updateSystemSetting(input: $input) {\n      systemSetting {\n        id\n      }\n    }\n  }\n`","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport ButtonBack from \"../ui/ButtonBack\"\n\n\nfunction SettingsBack({ t, returnUrl=\"/settings\" }) { \n  return (\n    <ButtonBack returnUrl={returnUrl} />\n  )\n}\n\nexport default withTranslation()(SettingsBack)","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Page,\n  Grid,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../SiteWrapper\"\nimport HasPermissionWrapper from \"../HasPermissionWrapper\"\nimport SettingsBack from \"./SettingsBack\"\n\n\nfunction SettingsBase({ t, children, headerSubTitle=\"\", cardTitle, sidebarActive, sidebarContent, returnUrl=\"/settings\" }) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('settings.title')} subTitle={headerSubTitle}>\n            <div className=\"page-options d-flex\">\n              <SettingsBack returnUrl={returnUrl} />\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={12}>\n            <Card>\n              <Card.Header>\n                <Card.Title>{cardTitle}</Card.Title>\n              </Card.Header>\n              {children}\n            </Card>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SettingsBase))","// @flow\n\nimport React from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport { GET_SYSTEM_SETTINGS_QUERY } from '../queries'\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\n\n// import FinancePaymentMethodForm from './AppSettingsGeneralForm'\nimport SettingsBase from \"../SettingsBase\"\n\n\nfunction SettingsAbout({ t, match, history }) {\n  const headerSubTitle = t('settings.about.title')\n  const cardTitle = t(\"settings.about.about.title\")\n\n  const { \n    loading: loadingVersion, \n    error: errorVersion, \n    data: dataVersion \n  } = useQuery(GET_SYSTEM_SETTINGS_QUERY, {\n    variables: {\n      setting: \"system_version\"\n    }\n  })\n  const { \n    loading: loadingPatch, \n    error: errorPatch, \n    data: dataPatch \n  } = useQuery(GET_SYSTEM_SETTINGS_QUERY, {\n    variables: {\n      setting: \"system_version_patch\"\n    }\n  })\n\n  if ((loadingVersion) || (loadingPatch)) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle} >  \n        <Card.Body>\n          <Dimmer active={true}\n                  loader={true}>\n          </Dimmer>\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n  if ((errorVersion) || errorPatch) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle} >  \n        <Card.Body>\n          {t(\"settings.general.error_loading\")}\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n\n  console.log('query data app settings')\n  console.log(dataVersion)\n  console.log(dataPatch)\n\n  let version = 0\n  let patch = 0\n  if (dataVersion.systemSettings.edges.length){\n    version = dataVersion.systemSettings.edges[0].node.value\n  } \n  if (dataPatch.systemSettings.edges.length){\n    patch = dataPatch.systemSettings.edges[0].node.value\n  } \n    \n\n\n  return (\n    <SettingsBase \n      headerSubTitle={headerSubTitle}\n      cardTitle={cardTitle}\n    >\n      <Card.Body>\n        <h2>\n          {t(\"settings.about.about.this_is_costasiella\")} {`${version}.${patch}`}\n        </h2>\n        <h3>{t(\"general.license_info\")}</h3>\n        {t(\"settings.about.about.license_version\")} <br /><br />\n        <h3>{t(\"general.license\")}</h3>\nThis program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version. <br /><br />\nThis program is distributed in the hope that it will be useful, but <b>WITHOUT ANY WARRANTY</b>; without even the implied warranty of <b>MERCHANTABILITY</b> or <b>FITNESS FOR A PARTICULAR PURPOSE</b>. See the GNU General Public License for more details. <br /><br />\nYou should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA. <br />\n<br />\nGNU GENERAL PUBLIC LICENSE<br />\n<br />\nVersion 2, June 1991<br />\n<br />\nCopyright (C) 1989, 1991 Free Software Foundation, Inc. 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA<br />\n<br />\nEveryone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed. <br />\n<br />\nPreamble<br />\n<br />\nThe licenses for most software are designed to take away your freedom to share and change it. By contrast, the GNU General Public License is intended to guarantee your freedom to share and change free software--to make sure the software is free for all its users. This General Public License applies to most of the Free Software Foundation's software and to any other program whose authors commit to using it. (Some other Free Software Foundation software is covered by the GNU Lesser General Public License instead.) You can apply it to your programs, too.<br />\n<br />\nWhen we speak of free software, we are referring to freedom, not price. Our General Public Licenses are designed to make sure that you have the freedom to distribute copies of free software (and charge for this service if you wish), that you receive source code or can get it if you want it, that you can change the software or use pieces of it in new free programs; and that you know you can do these things.<br /><br />\n<br />\nTo protect your rights, we need to make restrictions that forbid anyone to deny you these rights or to ask you to surrender the rights. These restrictions translate to certain responsibilities for you if you distribute copies of the software, or if you modify it.<br />\n<br />\nFor example, if you distribute copies of such a program, whether gratis or for a fee, you must give the recipients all the rights that you have. You must make sure that they, too, receive or can get the source code. And you must show them these terms so they know their rights.<br />\n<br />\nWe protect your rights with two steps: (1) copyright the software, and (2) offer you this license which gives you legal permission to copy, distribute and/or modify the software.<br />\n<br />\nAlso, for each author's protection and ours, we want to make certain that everyone understands that there is no warranty for this free software. If the software is modified by someone else and passed on, we want its recipients to know that what they have is not the original, so that any problems introduced by others will not reflect on the original authors' reputations.<br />\n<br />\nFinally, any free program is threatened constantly by software patents. We wish to avoid the danger that redistributors of a free program will individually obtain patent licenses, in effect making the program proprietary. To prevent this, we have made it clear that any patent must be licensed for everyone's free use or not licensed at all.<br />\n<br />\nThe precise terms and conditions for copying, distribution and modification follow.<br />\n<br />\nTERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION<br />\n<br />\n0. This License applies to any program or other work which contains a notice placed by the copyright holder saying it may be distributed under the terms of this General Public License. The \"Program\", below, refers to any such program or work, and a \"work based on the Program\" means either the Program or any derivative work under copyright law: that is to say, a work containing the Program or a portion of it, either verbatim or with modifications and/or translated into another language. (Hereinafter, translation is included without limitation in the term \"modification\".) Each licensee is addressed as \"you\".<br />\n<br />\nActivities other than copying, distribution and modification are not covered by this License; they are outside its scope. The act of running the Program is not restricted, and the output from the Program is covered only if its contents constitute a work based on the Program (independent of having been made by running the Program). Whether that is true depends on what the Program does.<br />\n<br />\n1. You may copy and distribute verbatim copies of the Program's source code as you receive it, in any medium, provided that you conspicuously and appropriately publish on each copy an appropriate copyright notice and disclaimer of warranty; keep intact all the notices that refer to this License and to the absence of any warranty; and give any other recipients of the Program a copy of this License along with the Program.<br />\n<br />\nYou may charge a fee for the physical act of transferring a copy, and you may at your option offer warranty protection in exchange for a fee.<br />\n<br />\n2. You may modify your copy or copies of the Program or any portion of it, thus forming a work based on the Program, and copy and distribute such modifications or work under the terms of Section 1 above, provided that you also meet all of these conditions:<br />\n<br />\na) You must cause the modified files to carry prominent notices stating that you changed the files and the date of any change. b) You must cause any work that you distribute or publish, that in whole or in part contains or is derived from the Program or any part thereof, to be licensed as a whole at no charge to all third parties under the terms of this License. c) If the modified program normally reads commands interactively when run, you must cause it, when started running for such interactive use in the most ordinary way, to print or display an announcement including an appropriate copyright notice and a notice that there is no warranty (or else, saying that you provide a warranty) and that users may redistribute the program under these conditions, and telling the user how to view a copy of this License. (Exception: if the Program itself is interactive but does not normally print such an announcement, your work based on the Program is not required to print an announcement.) These requirements apply to the modified work as a whole. If identifiable sections of that work are not derived from the Program, and can be reasonably considered independent and separate works in themselves, then this License, and its terms, do not apply to those sections when you distribute them as separate works. But when you distribute the same sections as part of a whole which is a work based on the Program, the distribution of the whole must be on the terms of this License, whose permissions for other licensees extend to the entire whole, and thus to each and every part regardless of who wrote it.<br />\n<br />\nThus, it is not the intent of this section to claim rights or contest your rights to work written entirely by you; rather, the intent is to exercise the right to control the distribution of derivative or collective works based on the Program.<br />\n<br />\nIn addition, mere aggregation of another work not based on the Program with the Program (or with a work based on the Program) on a volume of a storage or distribution medium does not bring the other work under the scope of this License.<br />\n<br />\n3. You may copy and distribute the Program (or a work based on it, under Section 2) in object code or executable form under the terms of Sections 1 and 2 above provided that you also do one of the following:<br />\n<br />\na) Accompany it with the complete corresponding machine-readable source code, which must be distributed under the terms of Sections 1 and 2 above on a medium customarily used for software interchange; or, b) Accompany it with a written offer, valid for at least three years, to give any third party, for a charge no more than your cost of physically performing source distribution, a complete machine-readable copy of the corresponding source code, to be distributed under the terms of Sections 1 and 2 above on a medium customarily used for software interchange; or, c) Accompany it with the information you received as to the offer to distribute corresponding source code. (This alternative is allowed only for noncommercial distribution and only if you received the program in object code or executable form with such an offer, in accord with Subsection b above.) The source code for a work means the preferred form of the work for making modifications to it. For an executable work, complete source code means all the source code for all modules it contains, plus any associated interface definition files, plus the scripts used to control compilation and installation of the executable. However, as a special exception, the source code distributed need not include anything that is normally distributed (in either source or binary form) with the major components (compiler, kernel, and so on) of the operating system on which the executable runs, unless that component itself accompanies the executable.<br />\n<br />\nIf distribution of executable or object code is made by offering access to copy from a designated place, then offering equivalent access to copy the source code from the same place counts as distribution of the source code, even though third parties are not compelled to copy the source along with the object code.<br />\n<br />\n4. You may not copy, modify, sublicense, or distribute the Program except as expressly provided under this License. Any attempt otherwise to copy, modify, sublicense or distribute the Program is void, and will automatically terminate your rights under this License. However, parties who have received copies, or rights, from you under this License will not have their licenses terminated so long as such parties remain in full compliance.<br />\n<br />\n5. You are not required to accept this License, since you have not signed it. However, nothing else grants you permission to modify or distribute the Program or its derivative works. These actions are prohibited by law if you do not accept this License. Therefore, by modifying or distributing the Program (or any work based on the Program), you indicate your acceptance of this License to do so, and all its terms and conditions for copying, distributing or modifying the Program or works based on it.<br />\n<br />\n6. Each time you redistribute the Program (or any work based on the Program), the recipient automatically receives a license from the original licensor to copy, distribute or modify the Program subject to these terms and conditions. You may not impose any further restrictions on the recipients' exercise of the rights granted herein. You are not responsible for enforcing compliance by third parties to this License.<br />\n<br />\n7. If, as a consequence of a court judgment or allegation of patent infringement or for any other reason (not limited to patent issues), conditions are imposed on you (whether by court order, agreement or otherwise) that contradict the conditions of this License, they do not excuse you from the conditions of this License. If you cannot distribute so as to satisfy simultaneously your obligations under this License and any other pertinent obligations, then as a consequence you may not distribute the Program at all. For example, if a patent license would not permit royalty-free redistribution of the Program by all those who receive copies directly or indirectly through you, then the only way you could satisfy both it and this License would be to refrain entirely from distribution of the Program.<br />\n<br />\nIf any portion of this section is held invalid or unenforceable under any particular circumstance, the balance of the section is intended to apply and the section as a whole is intended to apply in other circumstances.<br />\n<br />\nIt is not the purpose of this section to induce you to infringe any patents or other property right claims or to contest validity of any such claims; this section has the sole purpose of protecting the integrity of the free software distribution system, which is implemented by public license practices. Many people have made generous contributions to the wide range of software distributed through that system in reliance on consistent application of that system; it is up to the author/donor to decide if he or she is willing to distribute software through any other system and a licensee cannot impose that choice.<br />\n<br />\nThis section is intended to make thoroughly clear what is believed to be a consequence of the rest of this License.<br />\n<br />\n8. If the distribution and/or use of the Program is restricted in certain countries either by patents or by copyrighted interfaces, the original copyright holder who places the Program under this License may add an explicit geographical distribution limitation excluding those countries, so that distribution is permitted only in or among countries not thus excluded. In such case, this License incorporates the limitation as if written in the body of this License.<br />\n<br />\n9. The Free Software Foundation may publish revised and/or new versions of the General Public License from time to time. Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns.<br />\n<br />\nEach version is given a distinguishing version number. If the Program specifies a version number of this License which applies to it and \"any later version\", you have the option of following the terms and conditions either of that version or of any later version published by the Free Software Foundation. If the Program does not specify a version number of this License, you may choose any version ever published by the Free Software Foundation.<br />\n<br />\n10. If you wish to incorporate parts of the Program into other free programs whose distribution conditions are different, write to the author to ask for permission. For software which is copyrighted by the Free Software Foundation, write to the Free Software Foundation; we sometimes make exceptions for this. Our decision will be guided by the two goals of preserving the free status of all derivatives of our free software and of promoting the sharing and reuse of software generally.<br />\n<br />\nNO WARRANTY<br />\n<br />\n11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU. SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.<br />\n<br />\n12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.<br />\n<br />\nEND OF TERMS AND CONDITIONS<br />\n<br />\nHow to Apply These Terms to Your New Programs<br />\n<br />\nIf you develop a new program, and you want it to be of the greatest possible use to the public, the best way to achieve this is to make it free software which everyone can redistribute and change under these terms.<br />\n<br />\nTo do so, attach the following notices to the program. It is safest to attach them to the start of each source file to most effectively convey the exclusion of warranty; and each file should have at least the \"copyright\" line and a pointer to where the full notice is found.<br />\n<br />\none line to give the program's name and an idea of what it does. Copyright (C) yyyy name of author<br />\n<br />\nThis program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.<br />\n<br />\nThis program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.<br />\n<br />\nYou should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA. Also add information on how to contact you by electronic and paper mail.<br />\n<br />\nIf the program is interactive, make it output a short notice like this when it starts in an interactive mode:<br />\n<br />\nGnomovision version 69, Copyright (C) year name of author Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'. This is free software, and you are welcome to redistribute it under certain conditions; type `show c' for details. The hypothetical commands `show w' and `show c' should show the appropriate parts of the General Public License. Of course, the commands you use may be called something other than `show w' and `show c'; they could even be mouse-clicks or menu items--whatever suits your program.<br />\n<br />\nYou should also get your employer (if you work as a programmer) or your school, if any, to sign a \"copyright disclaimer\" for the program, if necessary. Here is a sample; alter the names:<br />\n<br />\nYoyodyne, Inc., hereby disclaims all copyright interest in the program `Gnomovision' (which makes passes at compilers) written by James Hacker.<br />\n<br />\nsignature of Ty Coon, 1 April 1989 Ty Coon, President of Vice\n      </Card.Body>\n    </SettingsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SettingsAbout))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\n\nconst SettingsFinanceBankAccountsForm = ({ t, history, isSubmitting, errors, values, return_url }) => (\n  <FoForm>\n      <Card.Body>\n        <Form.Group>\n          <Form.Label className=\"custom-switch\">\n              <Field \n              className=\"custom-switch-input\"\n              type=\"checkbox\" \n              name=\"finance_bank_accounts_iban\" \n              checked={values.finance_bank_accounts_iban} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('settings.finance.bank_accounts.iban')}</span>\n          </Form.Label>\n          <ErrorMessage name=\"finance_bank_accounts_iban\" component=\"div\" />   \n        </Form.Group>  \n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          {/* <Link to={return_url}>\n            <Button \n              type=\"button\" \n              color=\"link\">\n                {t('general.cancel')}\n            </Button>\n          </Link> */}\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(SettingsFinanceBankAccountsForm))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SYSTEM_SETTINGS_QUERY, UPDATE_SYSTEM_SETTING } from '../../queries'\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\n// import FinancePaymentMethodForm from './AppSettingsGeneralForm'\nimport SettingsBase from \"../../SettingsBase\"\nimport SettingsFinanceBankAccountsForm from \"./SettingsFinanceBankAccountsForm\"\n\n\nfunction SettingsFinanceIBAN({ t, match, history }) {\n  const headerSubTitle = t('settings.finance.title')\n  const cardTitle = t(\"settings.finance.bank_accounts.title\")\n\n  const { \n    loading: loading, \n    error: error, \n    data: data \n  } = useQuery(GET_SYSTEM_SETTINGS_QUERY, {\n    variables: {\n      setting: \"finance_bank_accounts_iban\"\n    }\n  })\n  const [ updateSettings ] = useMutation(UPDATE_SYSTEM_SETTING)\n\n  if (loading) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n      >\n        <Card.Body>\n          <Dimmer active={true}\n                  loader={true}>\n          </Dimmer>\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n  if (error) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n      >  \n        <Card.Body>\n          {t(\"settings.general.error_loading\")}\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n\n  console.log('query data app settings')\n  console.log(data)\n\n  let initialValues = {\n    iban: false\n  }\n  if (data.systemSettings.edges.length){\n    initialValues['iban'] = data.systemSettings.edges[0].node.value\n  } \n    \n  return (\n    <SettingsBase \n      headerSubTitle={headerSubTitle}\n      cardTitle={cardTitle}\n    >  \n    <Formik\n      initialValues={{ \n        finance_bank_accounts_iban: initialValues['iban'],\n      }}\n      // validationSchema={MOLLIE_SCHEMA}\n      onSubmit={(values, { setSubmitting }, errors) => {\n          console.log('submit values:')\n          console.log(values)\n          console.log(errors)\n\n          const settings = [\n            { setting: \"finance_bank_accounts_iban\", value: values.finance_bank_accounts_iban },\n          ]\n\n          let error = false\n\n          for (let i in settings) {\n\n            console.log(i)\n            console.log(settings[i].setting)\n            console.log(settings[i].value)\n\n            updateSettings({ variables: {\n              input: {\n                setting: settings[i].setting,\n                value: settings[i].value,\n              }\n            }, refetchQueries: [\n                {query: GET_SYSTEM_SETTINGS_QUERY, variables: { setting: i.setting }},\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                toast.success((t('settings.general.toast_edit_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                })\n                setSubmitting(false)\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n          }\n      }}\n    >\n      {({ isSubmitting, errors, values }) => (\n        <SettingsFinanceBankAccountsForm\n          isSubmitting={isSubmitting}\n          errors={errors}\n          values={values}\n        >\n          {console.log(errors)}\n        </SettingsFinanceBankAccountsForm>\n      )}\n      </Formik>\n    </SettingsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SettingsFinanceIBAN))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\n\nconst SettingsFinanceCurrencyForm = ({ t, history, isSubmitting, errors, values, return_url }) => (\n  <FoForm>\n      <Card.Body>\n          <Form.Group label={t('settings.finance.currency')}>\n            <Field type=\"text\" \n              name=\"finance_currency\" \n              className={(errors.finance_currency) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\" />\n            <ErrorMessage name=\"finance_currency\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          <Form.Group label={t('settings.finance.currency_symbol')}>\n            <Field type=\"text\" \n              name=\"finance_currency_symbol\" \n              className={(errors.finance_currency_symbol) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\" />\n            <ErrorMessage name=\"finance_currency_symbol\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          {/* <Link to={return_url}>\n            <Button \n              type=\"button\" \n              color=\"link\">\n                {t('general.cancel')}\n            </Button>\n          </Link> */}\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(SettingsFinanceCurrencyForm))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SYSTEM_SETTINGS_QUERY, UPDATE_SYSTEM_SETTING } from '../../queries'\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\n// import FinancePaymentMethodForm from './AppSettingsGeneralForm'\nimport SettingsBase from \"../../SettingsBase\"\nimport SettingsFinanceCurrencyForm from \"./SettingsFinanceCurrencyForm\"\n\n\nfunction SettingsFinanceCurrency({ t, match, history }) {\n  const headerSubTitle = t('settings.finance.title')\n  const cardTitle = t(\"settings.finance.currency.title\")\n  const sidebarActive = \"integration\"\n\n  const { \n    loading: loadingCurrency, \n    error: errorCurrency, \n    data: dataCurrency \n  } = useQuery(GET_SYSTEM_SETTINGS_QUERY, {\n    variables: {\n      setting: \"finance_currency\"\n    }\n  })\n  const { \n    loading: loadingSymbol, \n    error: errorSymbol, \n    data: dataSymbol \n  } = useQuery(GET_SYSTEM_SETTINGS_QUERY, {\n    variables: {\n      setting: \"finance_currency_symbol\"\n    }\n  })\n  const [ updateSettings, { data: updateData }] = useMutation(UPDATE_SYSTEM_SETTING)\n\n  if ((loadingCurrency) || (loadingSymbol)) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n          sidebarActive={sidebarActive}>  \n        <Card.Body>\n          <Dimmer active={true}\n                  loader={true}>\n          </Dimmer>\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n  if ((errorCurrency) || errorSymbol) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n          sidebarActive={sidebarActive}>  \n        <Card.Body>\n          {t(\"settings.general.error_loading\")}\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n\n  console.log('query data app settings')\n  console.log(dataCurrency)\n  console.log(dataSymbol)\n\n  let initialValues = {\n    currency: \"EUR\",\n    symbol: \"€\"\n  }\n  if (dataCurrency.systemSettings.edges.length){\n    initialValues['currency'] = dataCurrency.systemSettings.edges[0].node.value\n  } \n  if (dataSymbol.systemSettings.edges.length){\n    initialValues['symbol'] = dataSymbol.systemSettings.edges[0].node.value\n  } \n    \n\n\n  return (\n    <SettingsBase \n      headerSubTitle={headerSubTitle}\n      cardTitle={cardTitle}\n      sidebarActive={sidebarActive}\n    >  \n    <Formik\n      initialValues={{ \n        finance_currency: initialValues['currency'],\n        finance_currency_symbol: initialValues['symbol']\n      }}\n      // validationSchema={MOLLIE_SCHEMA}\n      onSubmit={(values, { setSubmitting }, errors) => {\n          console.log('submit values:')\n          console.log(values)\n          console.log(errors)\n\n          const settings = [\n            { setting: \"finance_currency\", value: values.finance_currency },\n            { setting: \"finance_currency_symbol\", value: values.finance_currency_symbol },\n          ]\n\n          let error = false\n\n          for (let i in settings) {\n\n            console.log(i)\n            console.log(settings[i].setting)\n            console.log(settings[i].value)\n\n            updateSettings({ variables: {\n              input: {\n                setting: settings[i].setting,\n                value: settings[i].value,\n              }\n            }, refetchQueries: [\n                {query: GET_SYSTEM_SETTINGS_QUERY, variables: { setting: i.setting }},\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                toast.success((t('settings.general.toast_edit_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                })\n                setSubmitting(false)\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n          }\n      }}\n    >\n      {({ isSubmitting, errors, values }) => (\n        <SettingsFinanceCurrencyForm\n          isSubmitting={isSubmitting}\n          errors={errors}\n          values={values}\n        >\n          {console.log(errors)}\n        </SettingsFinanceCurrencyForm>\n      )}\n      </Formik>\n    </SettingsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SettingsFinanceCurrency))","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const DATETIME_SCHEMA = Yup.object().shape({\n    dateFormat: Yup.string()\n      .required(t('yup.field_required')),\n    timeFormat: Yup.string()\n      .required(t('yup.field_required')),\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\n\nconst SettingsGeneralDateTimeForm = ({ t, history, isSubmitting, errors, values, return_url }) => (\n  <FoForm>\n      <Card.Body>\n          <Form.Group label={t('settings.general.date_format')}>\n            <Field component=\"select\" \n                    name=\"dateFormat\" \n                    className={(errors.dateFormat) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"YYYY-MM-DD\" key={v4()}>{t('settings.general.date_formats.YYYY-MM-DD')}</option>\n                <option value=\"MM-DD-YYYY\" key={v4()}>{t('settings.general.date_formats.MM-DD-YYYY')}</option>\n                <option value=\"DD-MM-YYYY\" key={v4()}>{t('settings.general.date_formats.DD-MM-YYYY')}</option>\n            </Field>\n            <ErrorMessage name=\"dateFormat\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          <Form.Group label={t('settings.general.time_format')}>\n            <Field component=\"select\" \n                    name=\"timeFormat\" \n                    className={(errors.timeFormat) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"24\" key={v4()}>{t('settings.general.time_formats.24hr')}</option>\n                <option value=\"12\" key={v4()}>{t('settings.general.time_formats.12hr')}</option>\n            </Field>\n            <ErrorMessage name=\"timeFormat\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          {/* <Link to={return_url}>\n            <Button \n              type=\"button\" \n              color=\"link\">\n                {t('general.cancel')}\n            </Button>\n          </Link> */}\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(SettingsGeneralDateTimeForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_APP_SETTINGS_QUERY, UPDATE_APP_SETTINGS } from './queries'\nimport { DATETIME_SCHEMA } from './yupSchema'\n\n\nimport {\n  Card,\n  Dimmer,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport SettingsBase from \"../../SettingsBase\"\nimport SettingsGeneralDateTimeForm from \"./SettingsGeneralDateTimeForm\"\n\n\nfunction SettingsGeneralDateTime({ t, match, history }) {\n  const headerSubTitle = t(\"settings.general.datetime\")\n  const cardTitle = t(\"settings.general.datetime\")\n  const sidebarActive = \"general\"\n\n  const { loading, error, data } = useQuery(GET_APP_SETTINGS_QUERY)\n  const [ updateSettings, { data: updateData }] = useMutation(UPDATE_APP_SETTINGS)\n\n  console.log('query data app settings')\n  console.log(data)\n\n  if (loading) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n          sidebarActive={sidebarActive}>  \n        <Card.Body>\n          <Dimmer active={true}\n                  loader={true}>\n          </Dimmer>\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n  if (error) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n          sidebarActive={sidebarActive}>  \n        <Card.Body>\n          {t(\"settings.general.error_loading\")}\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n\n\n  return (\n    <SettingsBase \n      headerSubTitle={headerSubTitle}\n      cardTitle={cardTitle}\n      sidebarActive={sidebarActive}\n    >  \n    <Formik\n      initialValues={{ \n        dateFormat: data.appSettings.dateFormat,\n        timeFormat: data.appSettings.timeFormat,\n        note: \"\",\n      }}\n      validationSchema={DATETIME_SCHEMA}\n      onSubmit={(values, { setSubmitting }, errors) => {\n          console.log('submit values:')\n          console.log(values)\n          console.log(errors)\n\n          updateSettings({ variables: {\n            input: {\n              dateFormat: values.dateFormat,\n              timeFormat: values.timeFormat,\n            }\n          }, refetchQueries: [\n              {query: GET_APP_SETTINGS_QUERY}\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data)\n              toast.success((t('settings.general.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n              })\n              setSubmitting(false)\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n              })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n      }}\n    >\n      {({ isSubmitting, errors, values }) => (\n        <SettingsGeneralDateTimeForm\n          isSubmitting={isSubmitting}\n          errors={errors}\n          values={values}\n        >\n          {console.log(errors)}\n        </SettingsGeneralDateTimeForm>\n      )}\n      </Formik>\n    </SettingsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SettingsGeneralDateTime))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\n\nconst SettingsGeneralSystemForm = ({ t, history, isSubmitting, errors, values, return_url }) => (\n  <FoForm>\n      <Card.Body>\n          <Form.Group label={t('settings.general.system.system_hostname')}>\n            <Field type=\"text\" \n              name=\"system_hostname\" \n              className={(errors.system_hostname) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\" />\n            <ErrorMessage name=\"system_hostname\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          {/* <Link to={return_url}>\n            <Button \n              type=\"button\" \n              color=\"link\">\n                {t('general.cancel')}\n            </Button>\n          </Link> */}\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(SettingsGeneralSystemForm))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SYSTEM_SETTINGS_QUERY, UPDATE_SYSTEM_SETTING } from '../../queries'\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\n// import FinancePaymentMethodForm from './AppSettingsGeneralForm'\nimport SettingsBase from \"../../SettingsBase\"\nimport SettingsGeneralSystemForm from \"./SettingsGeneralSystemForm\"\n\n\nfunction SettingsGeneralSystem({ t, match, history }) {\n  const headerSubTitle = t('settings.general.title')\n  const cardTitle = t(\"settings.general.system.title\")\n  const sidebarActive = \"general\"\n  const queryVariables = {\n    setting: \"system_hostname\"\n  }\n\n  const { loading, error, data } = useQuery(GET_SYSTEM_SETTINGS_QUERY, {\n    variables: queryVariables\n  })\n  const [ updateSettings, { data: updateData }] = useMutation(UPDATE_SYSTEM_SETTING)\n\n  console.log('query data settings')\n  console.log(data)\n\n  if (loading) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n          sidebarActive={sidebarActive}>  \n        <Card.Body>\n          <Dimmer active={true}\n                  loader={true}>\n          </Dimmer>\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n  if (error) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n          sidebarActive={sidebarActive}>  \n        <Card.Body>\n          {t(\"settings.general.error_loading\")}\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n\n  let hostname = \"\"\n  if (data.systemSettings.edges.length) {\n    hostname = data.systemSettings.edges[0].node.value \n  }\n\n\n  return (\n    <SettingsBase \n      headerSubTitle={headerSubTitle}\n      cardTitle={cardTitle}\n      sidebarActive={sidebarActive}\n    >  \n    <Formik\n      initialValues={{ \n        system_hostname: hostname\n      }}\n      // validationSchema={MOLLIE_SCHEMA}\n      onSubmit={(values, { setSubmitting }, errors) => {\n          console.log('submit values:')\n          console.log(values)\n          console.log(errors)\n\n          updateSettings({ variables: {\n            input: {\n              setting: \"system_hostname\",\n              value: values.system_hostname\n            }\n          }, refetchQueries: [\n              { query: GET_SYSTEM_SETTINGS_QUERY, variables: queryVariables }\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data)\n              toast.success((t('settings.general.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n              })\n              setSubmitting(false)\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n              })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n      }}\n    >\n      {({ isSubmitting, errors, values }) => (\n        <SettingsGeneralSystemForm\n          isSubmitting={isSubmitting}\n          errors={errors}\n          values={values}\n        >\n          {console.log(errors)}\n        </SettingsGeneralSystemForm>\n      )}\n      </Formik>\n    </SettingsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SettingsGeneralSystem))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from 'react-router'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Button,\n  Icon,\n} from \"tabler-react\";\n\nfunction SettingsHomeItemButton({ t, link, linkTitle=null }) {\n  return (\n    <Link to={link} >\n      <Button \n        outline\n        block\n        color=\"primary\"\n      >\n        {linkTitle ? linkTitle: t(\"settings.home.link_edit\")} <Icon name=\"chevron-right\" />\n      </Button>\n    </Link>\n  )\n}\n\nexport default withTranslation()(withRouter(SettingsHomeItemButton))","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from 'react-router'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Button,\n  Card,\n  Container,\n  Grid,\n  Icon,\n  Page,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport SettingsHomeItemButton from \"./SettingsHomeItemButton\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\n// import RelationsMenu from \"../RelationsMenu\"\n\nfunction SettingsHome({ t, match, params }) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t('settings.title')} />\n          <Grid.Row>\n            <Grid.Col md={12}>\n              <h4>{t(\"settings.general.title\")}</h4>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <Card>\n                <Card.Body>\n                  <h5>{t(\"settings.general.date_time.title\")}</h5>\n                  {t(\"settings.general.date_time.explanation\")}\n                  <br /><br />\n                  <SettingsHomeItemButton link=\"/settings/general/datetime\" />\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <Card>\n                <Card.Body>\n                  <h5>{t(\"settings.general.system.title\")}</h5>\n                  {t(\"settings.general.system.explanation\")}\n                  <br /><br />\n                  <SettingsHomeItemButton link=\"/settings/general/system\" />\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n          </Grid.Row>\n          <Grid.Row>\n            <Grid.Col md={12}>\n              <h4>{t(\"settings.workflow.title\")}</h4>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <Card>\n                <Card.Body>\n                  <h5>{t(\"settings.workflow.class_booking.title\")}</h5>\n                  {t(\"settings.workflow.class_booking.explanation\")}\n                  <br /><br />\n                  <SettingsHomeItemButton link=\"/settings/workflow/class_booking\" />\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n          </Grid.Row>\n          <Grid.Row>\n            <Grid.Col md={12}>\n              <h4>{t(\"settings.finance.title\")}</h4>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <Card>\n                <Card.Body>\n                  <h5>{t(\"settings.finance.currency.title\")}</h5>\n                  {t(\"settings.finance.currency.explanation\")}\n                  <br /><br />\n                  <SettingsHomeItemButton link=\"/settings/finance/currency\" />\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <Card>\n                <Card.Body>\n                  <h5>{t(\"settings.finance.bank_accounts.title\")}</h5>\n                  {t(\"settings.finance.bank_accounts.explanation\")}\n                  <br /><br />\n                  <SettingsHomeItemButton link=\"/settings/finance/bank_accounts\" />\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n          </Grid.Row>\n          <Grid.Row>\n            <Grid.Col md={12}>\n              <h4>{t(\"settings.mail.title\")}</h4>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <Card>\n                <Card.Body>\n                  <h5>{t(\"settings.mail.templates.title\")}</h5>\n                  {t(\"settings.mail.templates.explanation\")}\n                  <br /><br />\n                  <SettingsHomeItemButton link=\"/settings/mail/templates\" />\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n          </Grid.Row>\n          <Grid.Row>\n            <Grid.Col md={12}>\n              <h4>{t(\"settings.shop.title\")}</h4>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <Card>\n                <Card.Body>\n                  <h5>{t(\"settings.shop.features.title\")}</h5>\n                  {t(\"settings.shop.features.explanation\")}\n                  <br /><br />\n                  <SettingsHomeItemButton link=\"/settings/shop/features/\" />\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n          </Grid.Row>\n          <Grid.Row>\n            <Grid.Col md={12}>\n              <h4>{t(\"settings.integration.title\")}</h4>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <Card>\n                <Card.Body>\n                  <h5>{t(\"settings.integration.mollie.title\")}</h5>\n                  {t(\"settings.integration.mollie.explanation\")}\n                  <br /><br />\n                  <SettingsHomeItemButton link=\"/settings/integration/mollie/\" />\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n          </Grid.Row>\n          <Grid.Row>\n            <Grid.Col md={12}>\n              <h4>{t(\"settings.about.title\")}</h4>\n            </Grid.Col>\n            <Grid.Col md={3}>\n              <Card>\n                <Card.Body>\n                  <h5>{t(\"settings.about.about.title\")}</h5>\n                  {t(\"settings.about.explanation\")}\n                  <br /><br />\n                  <SettingsHomeItemButton \n                    link=\"/settings/about\" \n                    linkTitle={t(\"View info\")}\n                  />\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(SettingsHome))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\n\nconst SettingsIntegrationMollieForm = ({ t, history, isSubmitting, errors, values, return_url }) => (\n  <FoForm>\n      <Card.Body>\n          <Form.Group label={t('settings.integration.mollie.api_key')}>\n            <Field type=\"text\" \n              name=\"mollie_api_key\" \n              className={(errors.mollie_api_key) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\" />\n            <ErrorMessage name=\"mollie_api_key\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          {/* <Link to={return_url}>\n            <Button \n              type=\"button\" \n              color=\"link\">\n                {t('general.cancel')}\n            </Button>\n          </Link> */}\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(SettingsIntegrationMollieForm))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SYSTEM_SETTINGS_QUERY, UPDATE_SYSTEM_SETTING } from '../../queries'\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\n// import FinancePaymentMethodForm from './AppSettingsGeneralForm'\nimport SettingsBase from \"../../SettingsBase\"\nimport SettingsIntegrationMollieForm from \"./SettingsIntegrationMollieForm\"\n\n\nfunction SettingsIntegrationMollie({ t, match, history }) {\n  const headerSubTitle = t('settings.integration.title')\n  const cardTitle = t(\"settings.integration.mollie.title\")\n  const sidebarActive = \"integration\"\n\n  const { loading, error, data } = useQuery(GET_SYSTEM_SETTINGS_QUERY, {\n    variables: {\n      setting: \"integration_mollie_api_key\"\n    }\n  })\n  const [ updateSettings, { data: updateData }] = useMutation(UPDATE_SYSTEM_SETTING)\n\n  console.log('query data app settings')\n  console.log(data)\n\n  if (loading) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n          sidebarActive={sidebarActive}>  \n        <Card.Body>\n          <Dimmer active={true}\n                  loader={true}>\n          </Dimmer>\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n  if (error) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n          sidebarActive={sidebarActive}>  \n        <Card.Body>\n          {t(\"settings.general.error_loading\")}\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n\n\n  return (\n    <SettingsBase \n      headerSubTitle={headerSubTitle}\n      cardTitle={cardTitle}\n      sidebarActive={sidebarActive}\n    >  \n    <Formik\n      initialValues={{ \n        mollie_api_key: data.systemSettings.edges[0].node.value\n      }}\n      // validationSchema={MOLLIE_SCHEMA}\n      onSubmit={(values, { setSubmitting }, errors) => {\n          console.log('submit values:')\n          console.log(values)\n          console.log(errors)\n\n          updateSettings({ variables: {\n            input: {\n              setting: \"integration_mollie_api_key\",\n              value: values.mollie_api_key\n            }\n          }, refetchQueries: [\n              {query: GET_SYSTEM_SETTINGS_QUERY}\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data)\n              toast.success((t('settings.general.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n              })\n              setSubmitting(false)\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n              })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n      }}\n    >\n      {({ isSubmitting, errors, values }) => (\n        <SettingsIntegrationMollieForm\n          isSubmitting={isSubmitting}\n          errors={errors}\n          values={values}\n        >\n          {console.log(errors)}\n        </SettingsIntegrationMollieForm>\n      )}\n      </Formik>\n    </SettingsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SettingsIntegrationMollie))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Card,\n  Page,\n  Grid,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { toast } from 'react-toastify'\n\nimport SettingsBack from \"../SettingsBack\"\n\nfunction SettingsMailTemplatesBase({ t, children, headerSubTitle, }) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"settings.mail.templates.title\")} subTitle={headerSubTitle}>\n            <div className=\"page-options d-flex\">\n              <SettingsBack />\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={12}>\n              {children}\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(SettingsMailTemplatesBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_SYSTEM_MAIL_TEMPLATES_QUERY = gql`\n  query SystemMailTemplates {\n    systemMailTemplates(first:100) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          name\n          subject\n          title\n          description\n          content\n          comments\n        }\n      }\n    }\n  }\n`\n\nexport const GET_SYSTEM_MAIL_TEMPLATE_QUERY = gql`\n  query SystemMailTemplate($id: ID!) {\n    systemMailTemplate(id:$id) {\n      id\n      name\n      subject\n      title\n      description\n      content\n      comments\n    }\n  }\n`\n\nexport const UPDATE_SYSTEM_MAIL_TEMPLATE =  gql`\n  mutation UpdateSystemMailTemplate($input: UpdateSystemMailTemplateInput!) {\n    updateSystemMailTemplate(input: $input) {\n      systemMailTemplate {\n        id\n        name\n        subject\n        title\n        description\n        content\n        comments\n      }\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Button,\n  Card,\n  Container,\n  Table\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { toast } from 'react-toastify'\n\nimport ContentCard from \"../../general/ContentCard\"\nimport SettingsMailTemplatesBase from \"./SettingsMailTemplatesBase\"\n\nimport { GET_SYSTEM_MAIL_TEMPLATES_QUERY } from \"./queries\"\n\n\nfunction SystemMailTemplates({ t, match, params }) {\n  const title = t(\"settings.mail.templates.title\")\n  const { loading, error, data, fetchMore } = useQuery(GET_SYSTEM_MAIL_TEMPLATES_QUERY)\n\n  if (loading) return (\n    <SettingsMailTemplatesBase title={title} >\n      {t(\"general.loading_with_dots\")}\n    </SettingsMailTemplatesBase>\n  )\n  if (error) return (\n    <SettingsMailTemplatesBase title={title}>\n      {t(\"settings.mail.templates.error_loading\")}\n    </SettingsMailTemplatesBase>\n  )\n\n  console.log(data)\n  const mailTemplates = data.systemMailTemplates\n\n  // TODO: add empty list message and request import\n\n\n\n  return (\n    <SettingsMailTemplatesBase title={title} >\n      <ContentCard \n        cardTitle={t('settings.mail.templates.title')}\n        // headerContent={headerOptions}\n        pageInfo={mailTemplates.pageInfo}\n        onLoadMore={() => {\n          fetchMore({\n            variables: {\n              after: mailTemplates.pageInfo.endCursor\n            },\n            updateQuery: (previousResult, { fetchMoreResult }) => {\n              const newEdges = fetchMoreResult.systemMailTemplates.edges\n              const pageInfo = fetchMoreResult.systemMailTemplates.pageInfo\n\n              return newEdges.length\n                ? {\n                    // Put the new subscriptions at the end of the list and update `pageInfo`\n                    // so we have the new `endCursor` and `hasNextPage` values\n                    systemMailTemplates: {\n                      __typename: previousResult.systemMailTemplates.__typename,\n                      edges: [ ...previousResult.systemMailTemplates.edges, ...newEdges ],\n                      pageInfo\n                    }\n                  }\n                : previousResult\n            }\n          })\n        }} >\n        <Table>\n          <Table.Header>\n            <Table.Row key={v4()}>\n              <Table.ColHeader>{t('settings.mail.templates.name')}</Table.ColHeader>\n              <Table.ColHeader></Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n              <Table.Body>\n                  {mailTemplates.edges.map(({ node }) => (\n                    <Table.Row key={v4()}>\n                      <Table.Col>\n                        {node.name}\n                      </Table.Col>\n                      <Table.Col>\n                        <Link to={\"/settings/mail/templates/edit/\" + node.id}>\n                          <Button className='btn-sm pull-right' \n                                  color=\"secondary\">\n                            {t('general.edit')}\n                          </Button>\n                        </Link>\n                      </Table.Col>\n                    </Table.Row>\n                  ))}\n              </Table.Body>\n            </Table>\n      </ContentCard>\n    </SettingsMailTemplatesBase>\n  )\n}\n\nexport default withTranslation()(withRouter(SystemMailTemplates))\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport {\n  Card,\n  Page,\n  Grid,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { toast } from 'react-toastify'\nimport SettingsBack from \"../SettingsBack\"\n\nfunction SettingsMailTemplatesBase({ t, children, headerSubTitle, help={} }) {\n  return (\n    <SiteWrapper>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"settings.mail.templates.title\")} subTitle={headerSubTitle}>\n            <div className=\"page-options d-flex\">\n              <SettingsBack returnUrl=\"/settings/mail/templates\" />\n            </div>\n          </Page.Header>\n          <Grid.Row>\n            <Grid.Col md={8}>\n              {children}\n            </Grid.Col>\n            <Grid.Col md={4}>\n              <Card title={t('general.subject')}>\n                <Card.Body>\n                  {help.subject}\n                </Card.Body>\n              </Card>\n              <Card title={t('general.title')}>\n                <Card.Body>\n                  {help.title}\n                </Card.Body>\n              </Card>\n              <Card title={t('general.description')}>\n                <Card.Body>\n                  {help.description}\n                </Card.Body>\n              </Card>\n              <Card title={t('general.content')}>\n                <Card.Body>\n                  {help.content}\n                </Card.Body>\n              </Card>\n              <Card title={t('general.comments')}>\n                <Card.Body>\n                  {help.comments}\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n          </Grid.Row>\n        </Container>\n      </div>\n    </SiteWrapper>\n  )\n}\n\nexport default withTranslation()(withRouter(SettingsMailTemplatesBase))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { Link } from 'react-router-dom'\nimport { v4 } from \"uuid\"\n\nimport { Editor } from '@tinymce/tinymce-react'\nimport { tinymceBasicConf } from \"../../../plugin_config/tinymce\"\n\n\nimport {\n  Button,\n  Card,\n  Form\n} from \"tabler-react\";\n\n\nfunction SettingsMailTemplateEditForm({ t, history, isSubmitting, errors, values, setFieldTouched, setFieldValue, returnUrl, cardTitle }) {\n\n\n  return (\n    <FoForm>\n      <Card title={cardTitle}>\n        <Card.Body>    \n          <Form.Group label={t('general.subject')} >\n            <Field type=\"text\" \n                  name=\"subject\" \n                  className={(errors.subject) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\" />\n            <ErrorMessage name=\"subject\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          <Form.Group label={t('general.title')} >\n            <Field type=\"text\" \n                  name=\"title\" \n                  className={(errors.title) ? \"form-control is-invalid\" : \"form-control\"} \n                  autoComplete=\"off\" />\n            <ErrorMessage name=\"title\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          <Form.Group label={t('general.description')}>\n            <Editor\n                textareaName=\"description\"\n                initialValue={values.description}\n                init={tinymceBasicConf}\n                onChange={(e) => setFieldValue(\"description\", e.target.getContent())}\n                onBlur={() => setFieldTouched(\"description\", true)}\n              />\n            <ErrorMessage name=\"description\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          <Form.Group label={t('general.content')}>\n            <Editor\n                textareaName=\"content\"\n                initialValue={values.content}\n                init={tinymceBasicConf}\n                onChange={(e) => setFieldValue(\"content\", e.target.getContent())}\n                onBlur={() => setFieldTouched(\"content\", true)}\n              />\n            <ErrorMessage name=\"content\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          <Form.Group label={t('general.comments')}>\n            <Editor\n                textareaName=\"comments\"\n                initialValue={values.comments}\n                init={tinymceBasicConf}\n                onChange={(e) => setFieldValue(\"comments\", e.target.getContent())}\n                onBlur={() => setFieldTouched(\"comments\", true)}\n              />\n            <ErrorMessage name=\"comments\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n        </Card.Body>\n        <Card.Footer>\n            <Button \n              className=\"pull-right\"\n              color=\"primary\"\n              disabled={isSubmitting}\n              type=\"submit\"\n            >\n              {t('general.submit')}\n            </Button>\n            <Link to={returnUrl}>\n              <Button\n                type=\"button\" \n                color=\"link\" \n              >\n                {t('general.cancel')}\n              </Button>\n            </Link>\n        </Card.Footer>\n      </Card>\n    </FoForm>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SettingsMailTemplateEditForm))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SYSTEM_MAIL_TEMPLATE_QUERY, GET_SYSTEM_MAIL_TEMPLATES_QUERY, UPDATE_SYSTEM_MAIL_TEMPLATE } from './queries'\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { getTemplateInfo } from './tools'\n\nimport SettingsMailTemplateEditBase from \"./SettingsMailTemplateEditBase\"\nimport SettingsMailTemplateEditForm from \"./SettingsMailTemplateEditForm\"\n\n\nfunction SettingsMailTemplateEdit({ t, match, history }) {\n  const id = match.params.id\n  const returnUrl = \"/settings/mail/templates\"\n  const headerSubTitle = t('settings.mail.title')\n  const cardTitle = t(\"settings.mail.templates.edit.title\")\n\n  const { loading, error, data } = useQuery(GET_SYSTEM_MAIL_TEMPLATE_QUERY, {\n    variables: {\n      id: id\n    }\n  })\n  const [ updateSettings, { data: updateData }] = useMutation(UPDATE_SYSTEM_MAIL_TEMPLATE)\n\n  console.log('query data app settings')\n  console.log(data)\n\n  if (loading) {\n    return (\n      <SettingsMailTemplateEditBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n      >  \n        <Card.Body>\n          <Dimmer active={true}\n                  loader={true}>\n          </Dimmer>\n        </Card.Body>\n      </SettingsMailTemplateEditBase>\n    )\n  }\n  if (error) {\n    return (\n      <SettingsMailTemplateEditBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n      >  \n        <Card.Body>\n          {t(\"settings.general.error_loading\")}\n        </Card.Body>\n      </SettingsMailTemplateEditBase>\n    )\n  }\n\n  const templateInfo = getTemplateInfo(t, data.systemMailTemplate.name)\n  console.log(data.systemMailTemplate.name)\n  console.log(templateInfo)\n\n\n  return (\n    <SettingsMailTemplateEditBase \n      headerSubTitle={headerSubTitle}\n      help={templateInfo.helpTexts}\n    >  \n    <Formik\n      initialValues={{ \n        subject: data.systemMailTemplate.subject,\n        title: data.systemMailTemplate.title,\n        description: data.systemMailTemplate.description,\n        content: data.systemMailTemplate.content,\n        comments: data.systemMailTemplate.comments        \n      }}\n      // validationSchema={MOLLIE_SCHEMA}\n      onSubmit={(values, { setSubmitting }, errors) => {\n          console.log('submit values:')\n          console.log(values)\n          console.log(errors)\n\n          updateSettings({ variables: {\n            input: {\n              id: id,\n              subject: values.subject,\n              title: values.title,\n              description: values.description,\n              content: values.content,\n              comments: values.comments\n            }\n          }, refetchQueries: [\n              {query: GET_SYSTEM_MAIL_TEMPLATES_QUERY}\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data)\n              toast.success((t('settings.mail.templates.edit.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n              })\n              setSubmitting(false)\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n              })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n      }}\n    >\n      {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n        <SettingsMailTemplateEditForm\n          isSubmitting={isSubmitting}\n          errors={errors}\n          values={values}\n          setFieldTouched={setFieldTouched}\n          setFieldValue={setFieldValue}\n          cardTitle={templateInfo.cardTitle}\n          returnUrl={returnUrl}\n        >\n          {console.log(errors)}\n        </SettingsMailTemplateEditForm>\n      )}\n      </Formik>\n    </SettingsMailTemplateEditBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SettingsMailTemplateEdit))","import React from \"react\"\n\n\nexport function getTemplateInfo(t, template_name) {\n  let cardTitle\n  let helpTexts\n\n\n  switch(template_name) {\n    case \"class_info_mail\":\n      cardTitle = t(\"settings.mail.templates.class_info_mail.title\")\n      helpTexts = {\n        subject: t(\"settings.mail.templates.class_info_mail.help_subject\"),\n        title: t(\"settings.mail.templates.class_info_mail.help_title\"),\n        description: t(\"settings.mail.templates.class_info_mail.help_description\", {\n          interpolation: { prefix: \"%%\", suffix: \"%%\" }\n        }),\n        content: t(\"settings.mail.templates.class_info_mail.help_content\", {\n          interpolation: { prefix: \"%%\", suffix: \"%%\" }\n        }),\n        comments: t(\"settings.mail.templates.class_info_mail.help_comments\"), \n      }\n      break\n    case \"event_info_mail\":\n      cardTitle = t(\"settings.mail.templates.event_info_mail.title\")\n      helpTexts = {\n        subject: t(\"settings.mail.templates.event_info_mail.help_subject\"),\n        title: t(\"settings.mail.templates.event_info_mail.help_title\"),\n        description: t(\"settings.mail.templates.event_info_mail.help_description\", {\n          interpolation: { prefix: \"%%\", suffix: \"%%\" }\n        }),\n        content: t(\"settings.mail.templates.event_info_mail.help_content\", {\n          interpolation: { prefix: \"%%\", suffix: \"%%\" }\n        }),\n        comments: t(\"settings.mail.templates.event_info_mail.help_comments\"), \n      }\n      break\n    case \"order_received\":\n      cardTitle = t(\"settings.mail.templates.order_received.title\")\n      helpTexts = {\n        subject: t(\"settings.mail.templates.order_received.help_subject\"),\n        title: t(\"settings.mail.templates.order_received.help_title\"),\n        description: t(\"settings.mail.templates.order_received.help_description\", {\n          interpolation: { prefix: \"%%\", suffix: \"%%\" }\n        }),\n        content: t(\"settings.mail.templates.order_received.help_content\", {\n          interpolation: { prefix: \"%%\", suffix: \"%%\" }\n        }),\n        comments: t(\"settings.mail.templates.order_received.help_comments\"), \n      }\n      break\n    case \"recurring_payment_failed\":\n      cardTitle = t(\"settings.mail.templates.recurring_payment_failed.title\")\n      helpTexts = {\n        subject: t(\"settings.mail.templates.recurring_payment_failed.help_subject\"),\n        title: t(\"settings.mail.templates.recurring_payment_failed.help_title\"),\n        description: t(\"settings.mail.templates.recurring_payment_failed.help_description\", {\n          interpolation: { prefix: \"%%\", suffix: \"%%\" }\n        }),\n        content: t(\"settings.mail.templates.recurring_payment_failed.help_content\", {\n          interpolation: { prefix: \"%%\", suffix: \"%%\" }\n        }),\n        comments: t(\"settings.mail.templates.recurring_payment_failed.help_comments\"), \n      }\n      break\n      break\n    case \"system_footer\":\n      cardTitle = t(\"settings.mail.templates.system_footer.title\")\n      helpTexts = {\n        subject: t(\"settings.mail.templates.system_footer.help_subject\"),\n        title: t(\"settings.mail.templates.system_footer.help_title\"),\n        description: t(\"settings.mail.templates.system_footer.help_description\", {\n          interpolation: { prefix: \"%%\", suffix: \"%%\" }\n        }),\n        content: t(\"settings.mail.templates.system_footer.help_content\", {\n          interpolation: { prefix: \"%%\", suffix: \"%%\" }\n        }),\n        comments: t(\"settings.mail.templates.system_footer.help_comments\"), \n      }\n      break\n    default:\n      cardTitle = t(\"settings.mail.templates.not_found.title\")\n      helpTexts = {\n        subject: t(\"settings.mail.templates.not_found.help_subject\"),\n        title: t(\"settings.mail.templates.not_found.help_title\"),\n        description: t(\"settings.mail.templates.not_found.help_description\"),\n        content: t(\"settings.mail.templates.not_found.help_content\"),\n        comments: t(\"settings.mail.templates.not_found.help_comments\"),\n      }\n  }\n\n\n  return {\n    \"cardTitle\": cardTitle,\n    \"helpTexts\": helpTexts,\n  }\n}\n\n","import { gql } from \"@apollo/client\"\n\n\nexport const GET_SHOP_FEATURES_QUERY = gql`\n  query SystemFeatureShop {\n    systemFeatureShop(id: \"U3lzdGVtRmVhdHVyZVNob3BOb2RlOjE=\") {\n      memberships\n      subscriptions\n      classpasses\n      classes\n      events\n    }\n  }\n`\n\n\nexport const UPDATE_SHOP_FEATURES = gql`\n  mutation UpdateSystemFeatureShop($input: UpdateSystemFeatureShopInput!) {\n    updateSystemFeatureShop(input: $input) {\n      systemFeatureShop {\n        id\n      }\n    }\n  }\n`","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const SHOP_FEATURES_SCHEMA = Yup.object().shape({\n    subscriptions: Yup.boolean(),\n    classpasses: Yup.boolean(),\n    classes: Yup.boolean(),\n    events: Yup.boolean(),\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\nimport { v4 } from 'uuid'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\n\nconst SettingsShopFeaturesForm = ({ t, history, isSubmitting, errors, values, return_url }) => (\n  <FoForm>\n      <Card.Body>\n        {/* <Form.Group>\n          <Form.Label className=\"custom-switch\">\n              <Field \n              className=\"custom-switch-input\"\n              type=\"checkbox\" \n              name=\"memberships\" \n              checked={values.memberships} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('general.memberships')}</span>\n          </Form.Label>\n          <ErrorMessage name=\"memberships\" component=\"div\" />   \n        </Form.Group>   */}\n        <Form.Group>\n          <Form.Label className=\"custom-switch\">\n              <Field \n              className=\"custom-switch-input\"\n              type=\"checkbox\" \n              name=\"subscriptions\" \n              checked={values.subscriptions} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('general.subscriptions')}</span>\n          </Form.Label>\n          <ErrorMessage name=\"subscriptions\" component=\"div\" />   \n        </Form.Group>  \n        <Form.Group>\n          <Form.Label className=\"custom-switch\">\n              <Field \n              className=\"custom-switch-input\"\n              type=\"checkbox\" \n              name=\"classpasses\" \n              checked={values.classpasses} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('general.classpasses')}</span>\n          </Form.Label>\n          <ErrorMessage name=\"classpasses\" component=\"div\" />   \n        </Form.Group>  \n        <Form.Group>\n          <Form.Label className=\"custom-switch\">\n              <Field \n              className=\"custom-switch-input\"\n              type=\"checkbox\" \n              name=\"classes\" \n              checked={values.classes} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('general.classes')}</span>\n          </Form.Label>\n          <ErrorMessage name=\"classes\" component=\"div\" />   \n        </Form.Group>  \n        <Form.Group>\n          <Form.Label className=\"custom-switch\">\n              <Field \n              className=\"custom-switch-input\"\n              type=\"checkbox\" \n              name=\"events\" \n              checked={values.events} />\n              <span className=\"custom-switch-indicator\" ></span>\n              <span className=\"custom-switch-description\">{t('general.events')}</span>\n          </Form.Label>\n          <ErrorMessage name=\"events\" component=\"div\" />   \n        </Form.Group>  \n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          {/* <Link to={return_url}>\n            <Button \n              type=\"button\" \n              color=\"link\">\n                {t('general.cancel')}\n            </Button>\n          </Link> */}\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(SettingsShopFeaturesForm))","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SHOP_FEATURES_QUERY, UPDATE_SHOP_FEATURES } from './queries'\nimport { SHOP_FEATURES_SCHEMA } from './yupSchema'\n\n\nimport {\n  Card,\n  Dimmer,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\nimport SettingsBase from \"../../SettingsBase\"\nimport SettingsShopFeaturesForm from \"./SettingsShopFeaturesForm\"\n\n\nfunction SettingsShopFeatures({ t, match, history }) {\n  const headerSubTitle = t(\"settings.shop.features.title\")\n  const cardTitle = t(\"settings.shop.features.title\")\n  const sidebarActive = \"general\"\n\n  const { loading, error, data } = useQuery(GET_SHOP_FEATURES_QUERY)\n  const [ updateSettings ] = useMutation(UPDATE_SHOP_FEATURES)\n\n  console.log('query data app settings')\n  console.log(data)\n\n  if (loading) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n          sidebarActive={sidebarActive}>  \n        <Card.Body>\n          <Dimmer active={true}\n                  loader={true}>\n          </Dimmer>\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n  if (error) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n          sidebarActive={sidebarActive}>  \n        <Card.Body>\n          {t(\"settings.general.error_loading\")}\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n\n  const shopFeatures = data.systemFeatureShop\n  \n  return (\n    <SettingsBase \n      headerSubTitle={headerSubTitle}\n      cardTitle={cardTitle}\n      sidebarActive={sidebarActive}\n    >  \n    <Formik\n      initialValues={{ \n        memberships: shopFeatures.memberships,\n        subscriptions: shopFeatures.subscriptions,\n        classpasses: shopFeatures.classpasses,\n        classes: shopFeatures.classes,\n        events: shopFeatures.events,\n      }}\n      validationSchema={SHOP_FEATURES_SCHEMA}\n      onSubmit={(values, { setSubmitting }, errors) => {\n          console.log('submit values:')\n          console.log(values)\n          console.log(errors)\n\n          updateSettings({ variables: {\n            input: {\n              memberships: values.memberships,\n              subscriptions: values.subscriptions,\n              classpasses: values.classpasses,\n              classes: values.classes,\n              events: values.events\n            }\n          }, refetchQueries: [\n              {query: GET_SHOP_FEATURES_QUERY}\n          ]})\n          .then(({ data }) => {\n              console.log('got data', data)\n              toast.success((t('settings.general.toast_edit_success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n              })\n              setSubmitting(false)\n            }).catch((error) => {\n              toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n              })\n              console.log('there was an error sending the query', error)\n              setSubmitting(false)\n            })\n      }}\n    >\n      {({ isSubmitting, errors, values }) => (\n        <SettingsShopFeaturesForm\n          isSubmitting={isSubmitting}\n          errors={errors}\n          values={values}\n        >\n          {console.log(errors)}\n        </SettingsShopFeaturesForm>\n      )}\n      </Formik>\n    </SettingsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SettingsShopFeatures))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n} from \"tabler-react\"\n\n\nconst SettingsWorkflowClassBookingForm = ({ t, history, isSubmitting, errors, values, return_url }) => (\n  <FoForm>\n      <Card.Body>\n          <Form.Group label={t('settings.workflow.workflow_class_book_days_advance')}>\n            <Field type=\"text\" \n              name=\"workflow_class_book_days_advance\" \n              className={(errors.workflow_class_book_days_advance) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\" />\n            <ErrorMessage name=\"workflow_class_book_days_advance\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n          <Form.Group label={t('settings.workflow.workflow_class_cancel_until')}>\n            <Field type=\"text\" \n              name=\"workflow_class_cancel_until\" \n              className={(errors.workflow_class_cancel_until) ? \"form-control is-invalid\" : \"form-control\"} \n              autoComplete=\"off\" />\n            <ErrorMessage name=\"workflow_class_cancel_until\" component=\"span\" className=\"invalid-feedback\" />\n          </Form.Group>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          {/* <Link to={return_url}>\n            <Button \n              type=\"button\" \n              color=\"link\">\n                {t('general.cancel')}\n            </Button>\n          </Link> */}\n      </Card.Footer>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(SettingsWorkflowClassBookingForm))","// @flow\n\nimport React, {Component } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { GET_SYSTEM_SETTINGS_QUERY, UPDATE_SYSTEM_SETTING } from '../../queries'\n\nimport {\n  Dimmer,\n  Page,\n  Grid,\n  Icon,\n  Button,\n  Card,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapper from \"../../../SiteWrapper\"\nimport HasPermissionWrapper from \"../../../HasPermissionWrapper\"\n\n// import FinancePaymentMethodForm from './AppSettingsGeneralForm'\nimport SettingsBase from \"../../SettingsBase\"\nimport SettingsWorkflowClassBookingForm from \"./SettingsWorkflowClassBookingForm\"\n\n\nfunction SettingsWorkflowClassBooking({ t, match, history }) {\n  const headerSubTitle = t('settings.workflow.title')\n  const cardTitle = t(\"settings.workflow.class_booking.title\")\n\n  const { \n    loading: loadingDaysAdvance, \n    error: errorDaysAdvance, \n    data: dataDaysAdvance \n  } = useQuery(GET_SYSTEM_SETTINGS_QUERY, {\n    variables: {\n      setting: \"workflow_class_book_days_advance\"\n    }\n  })\n  const { \n    loading: loadingCancelUntil, \n    error: errorCancelUntil, \n    data: dataCancelUntil \n  } = useQuery(GET_SYSTEM_SETTINGS_QUERY, {\n    variables: {\n      setting: \"workflow_class_cancel_until\"\n    }\n  })\n  const [ updateSettings, { data: updateData }] = useMutation(UPDATE_SYSTEM_SETTING)\n\n  if ((loadingDaysAdvance) || (loadingCancelUntil)) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n      >  \n        <Card.Body>\n          <Dimmer active={true}\n                  loader={true}>\n          </Dimmer>\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n  if ((errorDaysAdvance) || errorCancelUntil) {\n    return (\n      <SettingsBase \n          headerSubTitle={headerSubTitle}\n          cardTitle={cardTitle}\n      >  \n        <Card.Body>\n          {t(\"settings.general.error_loading\")}\n        </Card.Body>\n      </SettingsBase>\n    )\n  }\n\n  console.log('query data app settings')\n  console.log(dataDaysAdvance)\n  console.log(dataCancelUntil)\n\n  let initialValues = {\n    workflow_class_book_days_advance: \"30\",\n    workflow_class_cancel_until: \"2\"\n  }\n  if (dataDaysAdvance.systemSettings.edges.length){\n    initialValues['workflow_class_book_days_advance'] = dataDaysAdvance.systemSettings.edges[0].node.value\n  } \n  if (dataCancelUntil.systemSettings.edges.length){\n    initialValues['workflow_class_cancel_until'] = dataCancelUntil.systemSettings.edges[0].node.value\n  } \n    \n\n\n  return (\n    <SettingsBase \n      headerSubTitle={headerSubTitle}\n      cardTitle={cardTitle}\n    >  \n    <Formik\n      initialValues={{ \n        workflow_class_book_days_advance: initialValues['workflow_class_book_days_advance'],\n        workflow_class_cancel_until: initialValues['workflow_class_cancel_until']\n      }}\n      // validationSchema={MOLLIE_SCHEMA}\n      onSubmit={(values, { setSubmitting }, errors) => {\n          console.log('submit values:')\n          console.log(values)\n          console.log(errors)\n\n          const settings = [\n            { setting: \"workflow_class_book_days_advance\", value: values.workflow_class_book_days_advance },\n            { setting: \"workflow_class_cancel_until\", value: values.workflow_class_cancel_until },\n          ]\n\n          let error = false\n\n          for (let i in settings) {\n\n            console.log(i)\n            console.log(settings[i].setting)\n            console.log(settings[i].value)\n\n            updateSettings({ variables: {\n              input: {\n                setting: settings[i].setting,\n                value: settings[i].value,\n              }\n            }, refetchQueries: [\n                {query: GET_SYSTEM_SETTINGS_QUERY, variables: { setting: settings[i].setting }},\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                toast.success((t('settings.general.toast_edit_success')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                })\n                setSubmitting(false)\n              }).catch((error) => {\n                toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                })\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n          }\n      }}\n    >\n      {({ isSubmitting, errors, values }) => (\n        <SettingsWorkflowClassBookingForm\n          isSubmitting={isSubmitting}\n          errors={errors}\n          values={values}\n        >\n          {console.log(errors)}\n        </SettingsWorkflowClassBookingForm>\n      )}\n      </Formik>\n    </SettingsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(SettingsWorkflowClassBooking))","// @flow\n\nimport * as React from \"react\"\nimport { useContext } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { NavLink, withRouter } from \"react-router-dom\"\nimport { useQuery } from \"@apollo/client\"\nimport { ToastContainer, Slide } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\nimport 'react-confirm-alert/src/react-confirm-alert.css'\nimport { Link } from 'react-router-dom'\n\nimport { GET_SHOP_FEATURES_QUERY } from \"../components/settings/shop/features/queries\"\nimport OrganizationContext from './context/OrganizationContext'\nimport CSLS from \"../tools/cs_local_storage\"\nimport { get_all_permissions, has_permission } from \"../tools/user_tools\"\n\n\nimport {\n  Site,\n  Nav,\n  Grid,\n  Button,\n  // Page,\n  RouterContextProvider,\n} from \"tabler-react\";\n\nimport type { NotificationProps } from \"tabler-react\";\n\ntype Props = {|\n  +children: React.Node,\n|};\n\ntype State = {|\n  notificationsObjects: Array<NotificationProps>,\n|};\n\ntype subNavItem = {|\n  +value: string,\n  +to?: string,\n  +icon?: string,\n  +LinkComponent?: React.ElementType,\n|};\n\ntype navItem = {|\n  +value: string,\n  +to?: string,\n  +icon?: string,\n  +active?: boolean,\n  +LinkComponent?: React.ElementType,\n  +subItems?: Array<subNavItem>,\n  +useExact?: boolean,\n|};\n\n\nconst getNavBarItems = (t, loading, error, data) => {\n  const shopFeatures = data.systemFeatureShop\n\n  let items: Array<navItem> = []\n  // let permissions = get_all_permissions(user)\n\n  if (loading) {\n    items.push({\n      value: t(\"general.loading_with_dots\"),\n      to: \"/\",\n      icon: \"\",\n      LinkComponent: withRouter(NavLink),\n      useExact: true, \n    })\n\n    return items\n  }\n\n  if (error) {\n    items.push({\n      value: t(\"general.error_sad_smiley\"),\n      to: \"/\",\n      icon: \"\",\n      LinkComponent: withRouter(NavLink),\n      useExact: true, \n    })\n\n    return items\n  }\n\n  items.push({\n    value: t(\"shop.home.title\"),\n    to: \"/\",\n    icon: \"home\",\n    LinkComponent: withRouter(NavLink),\n    useExact: true,\n  })\n\n\n  if (shopFeatures.subscriptions) {\n    items.push({\n      value: t(\"shop.subscriptions.title\"),\n      to: \"/shop/subscriptions\",\n      icon: \"edit\",\n      LinkComponent: withRouter(NavLink),\n      useExact: true,\n    })\n  }\n\n  if (shopFeatures.classpasses) {\n    items.push({\n      value: t(\"shop.classpasses.title\"),\n      to: \"/shop/classpasses\",\n      icon: \"credit-card\",\n      LinkComponent: withRouter(NavLink),\n      useExact: true,\n    })\n  }\n\n  if (shopFeatures.classes) {\n    items.push({\n      value: t(\"shop.classes.title\"),\n      to: \"/shop/classes\",\n      icon: \"book\",\n      LinkComponent: withRouter(NavLink),\n      useExact: true,\n    })\n  }\n\n  if (shopFeatures.events) {\n    items.push({\n      value: t(\"shop.events.title\"),\n      to: \"/shop/events\",\n      icon: \"calendar\",\n      LinkComponent: withRouter(NavLink),\n      useExact: true,\n    })\n  }\n\n  items.push({\n    value: t(\"shop.contact.title\"),\n    to: \"/shop/contact\",\n    icon: \"message-square\",\n    LinkComponent: withRouter(NavLink),\n    useExact: true,\n  })\n\n  // Check if refresh token is present and if so, hasn't expired\n  const refreshTokenExp = localStorage.getItem(CSLS.AUTH_REFRESH_TOKEN_EXP)\n  let accountTitle = t(\"shop.account.title\")\n  let accountLink = \"/shop/account\"\n  if (new Date() / 1000 >= refreshTokenExp || refreshTokenExp == null ) {\n    accountTitle = t(\"general.sign_in\")\n    accountLink = \"/user/login\"\n  }\n\n  items.push({\n    value: accountTitle,\n    to: accountLink,\n    icon: \"user\",\n    LinkComponent: withRouter(NavLink),\n    useExact: true,\n  })\n\n  return items\n}\n\nfunction getHeaderImageUrl(organization) {\n  let imageURL = \"/d/static/logos/stock/logo_stock_backend.png\"\n\n  if (organization) {\n    if (organization.urlLogoShopHeader) {\n      imageURL = organization.urlLogoShopHeader\n    }\n  }\n\n  return imageURL\n}\n\nconst now = new Date()\n\nfunction SiteWrapperShop({t, match, history, children}) {\n  const { loading, error, data } = useQuery(GET_SHOP_FEATURES_QUERY)\n  const organization = useContext(OrganizationContext)\n  console.log(organization)\n  // const { error, loading, data, fetchMore } = useQuery(GET_USER)\n\n  if (loading) return <p>{t('general.loading_with_dots')}</p>;\n  if (error) return <p>{t('system.user.error_loading')}</p>; \n\n  console.log(data)\n\n  const headerImageUrl = getHeaderImageUrl(organization)\n\n  return (\n    <Site.Wrapper\n      headerProps={{\n          href: \"/\",\n          alt: \"Costasiella\",\n          imageURL: headerImageUrl, // Set logo url here\n          navItems: (\n            <Nav.Item type=\"div\" className=\"d-none d-md-flex\">\n              {(data.user) ? (data.user.teacher || data.user.employee) ? <Link to=\"/user/welcome\">\n                <Button\n                  className=\"mr-2\"\n                  icon=\"link\"\n                  outline\n                  size=\"sm\"\n                  color=\"primary\"\n                >\n                  {t('goto.title')}\n                </Button>\n              </Link> : \"\" : \"\"}\n            </Nav.Item>\n          ),\n          \n          // notificationsTray: {\n          //   notificationsObjects,\n          //   markAllAsRead: () =>\n          //     this.setState(\n          //       () => ({\n          //         notificationsObjects: this.state.notificationsObjects.map(\n          //           v => ({ ...v, unread: false })\n          //         ),\n          //       }),\n          //       () =>\n          //         setTimeout(\n          //           () =>\n          //             this.setState({\n          //               notificationsObjects: this.state.notificationsObjects.map(\n          //                 v => ({ ...v, unread: true })\n          //               ),\n          //             }),\n          //           5000\n          //         )\n          //     ),\n          //   unread: unreadCount,\n          // },\n        //   accountDropdown: {\n        //   avatarURL: \"#\",\n        //   name: data.user.firstName + ' ' + data.user.lastName,\n        //   description: \"\",\n        //   options: [\n        //     // { icon: \"user\", value: \"Profile\" },\n        //     { icon: \"lock\", value: \"Change password\", to: \"/#/user/password/change/\" },\n        //     { isDivider: true },\n        //     { icon: \"log-out\", value: \"Sign out\", to: \"/#/user/logout/\" },\n        //   ],\n        // },\n        }}\n        // navProps={{ itemsObjects: navBarItems }}\n        navProps={{ itemsObjects: getNavBarItems(t, loading, error, data) }}\n        routerContextComponentType={withRouter(RouterContextProvider)}\n        footerProps={{\n          // links: [\n          //   <a href=\"#\">First Link</a>,\n          //   <a href=\"#\">Second Link</a>,\n          //   <a href=\"#\">Third Link</a>,\n          //   <a href=\"#\">Fourth Link</a>,\n          //   <a href=\"#\">Five Link</a>,\n          //   <a href=\"#\">Sixth Link</a>,\n          //   <a href=\"#\">Seventh Link</a>,\n          //   <a href=\"#\">Eigth Link</a>,\n          // ],\n          // note:\n          //   \"Premium and Open Source dashboard template with responsive and high quality UI. For Free!\",\n          copyright: (\n            <React.Fragment>\n              Copyleft © {now.getFullYear()}.\n              <a\n                href=\"https://www.costasiella.com\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {\" \"}\n                Edwin van de Ven\n              </a>{\". \"}\n              All rights reserved.\n            </React.Fragment>\n          ),\n          nav: (\n            <React.Fragment>\n              <Grid.Col auto={true}>\n                {/* <List className=\"list-inline list-inline-dots mb-0\">\n                  <List.Item className=\"list-inline-item\">\n                    <a href=\"./docs/index.html\">Documentation</a>\n                  </List.Item>\n                  <List.Item className=\"list-inline-item\">\n                    <a href=\"./faq.html\">FAQ</a>\n                  </List.Item>\n                </List> */}\n              </Grid.Col>\n              <Grid.Col auto={true}>\n                {/* <Button\n                  href=\"https://github.com/tabler/tabler-react\"\n                  size=\"sm\"\n                  outline\n                  color=\"primary\"\n                  RootComponent=\"a\"\n                >\n                  Source code\n                </Button> */}\n              </Grid.Col>\n            </React.Fragment>\n          ),\n        }}\n      >\n      {children}\n      <ToastContainer \n        autoClose={5000} \n        transition={Slide}\n      />\n    </Site.Wrapper>    \n  )\n}\n\n\nexport default withTranslation()(SiteWrapperShop)\n","import { gql } from \"@apollo/client\"\n\nconst GET_USER_PROFILE = gql`\n  query User {\n    user {\n      id\n      accountId\n      firstName\n      lastName\n      fullName\n      email\n      gender\n      dateOfBirth\n      address\n      postcode\n      city\n      country\n      phone\n      mobile\n      emergency\n      teacher\n      employee\n    }\n  }\n`\n\nexport default GET_USER_PROFILE","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Card,\n  Page,\n  Grid,\n  Container\n} from \"tabler-react\";\nimport SiteWrapperShop from \"../../../SiteWrapperShop\"\n\n\nfunction ShopAccountHomeBase({ t, match, history, children, subTitle=\"\" }) {\n  return (\n    <SiteWrapperShop>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"shop.account.title\")} subTitle={subTitle}/>\n          { children }\n        </Container>\n      </div>\n    </SiteWrapperShop>\n  )\n}\n\nexport default withTranslation()(withRouter(ShopAccountHomeBase))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from 'react-router'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Button,\n  Icon,\n} from \"tabler-react\";\n\n\nfunction ShopAccountHomeButton({ t, link, buttonText }) {\n  return (\n    <Link to={link} >\n      <Button \n        outline\n        block\n        color=\"primary\"\n      >\n        {buttonText} <Icon name=\"chevron-right\" />\n      </Button>\n    </Link>\n  )\n}\n\nexport default withTranslation()(withRouter(ShopAccountHomeButton))","// @flow\n\nimport React, {Component } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Card,\n  Page,\n  Grid,\n  Container\n} from \"tabler-react\";\nimport SiteWrapperShop from \"../../../SiteWrapperShop\"\nimport GET_USER_PROFILE from \"../../../../queries/system/get_user_profile\"\n\nimport ShopAccountHomeBase from \"./ShopAccountHomeBase\"\nimport ShopAccountHomeButton from \"./ShopAccountHomeButton\"\n\n\nfunction ShopAccountHome({t, match, history}) {\n  const { loading, error, data } = useQuery(GET_USER_PROFILE)\n\n  if (loading) return (\n    <ShopAccountHomeBase>\n      {t(\"general.loading_with_dots\")}\n    </ShopAccountHomeBase>\n  )\n  if (error) return (\n    <ShopAccountHomeBase>\n      {t(\"shop.account.error_loading_user_data\")}\n    </ShopAccountHomeBase>\n  )\n\n  console.log(\"User data: ###\")\n  console.log(data)\n  const user = data.user\n\n  return (\n    <ShopAccountHomeBase subTitle={user.fullName}>\n      {(user.teacher || user.employee) ?\n        <div>\n          <Grid.Row>\n            <Grid.Col md={4} lg={4}>\n              <Card>\n                <Card.Body>\n                  <h5>{t(\"goto.title\")}</h5>\n                  {t(\"shop.account.goto.explanation\")}\n                  <br /><br />\n                  <ShopAccountHomeButton link=\"/user/welcome\" buttonText={t(\"shop.account.btn_go_to\")} />\n                </Card.Body>\n              </Card>\n            </Grid.Col>\n          </Grid.Row> \n          <hr />\n        </div>\n        : \"\"\n      } \n      <Grid.Row>\n        <Grid.Col md={4} lg={4}>\n          <Card>\n            <Card.Body>\n              <h5>{t(\"shop.account.classes.title\")}</h5>\n              {t(\"shop.account.classes.explanation\")}\n              <br /><br />\n              <ShopAccountHomeButton link=\"/shop/account/classes\" buttonText={t(\"shop.account.btn_text_view\")} />\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={4} lg={4}>\n          <Card>\n            <Card.Body>\n              <h5>{t(\"shop.account.subscriptions.title\")}</h5>\n              {t(\"shop.account.subscriptions.explanation\")}\n              <br /><br />\n              <ShopAccountHomeButton link=\"/shop/account/subscriptions\" buttonText={t(\"shop.account.btn_text_view\")} />\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={4} lg={4}>\n          <Card>\n            <Card.Body>\n              <h5>{t(\"shop.account.classpasses.title\")}</h5>\n              {t(\"shop.account.classpasses.explanation\")}\n              <br /><br />\n              <ShopAccountHomeButton link=\"/shop/account/classpasses\" buttonText={t(\"shop.account.btn_text_view\")} />\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={4} lg={4}>\n          <Card>\n            <Card.Body>\n              <h5>{t(\"shop.account.event_tickets.title\")}</h5>\n              {t(\"shop.account.event_tickets.explanation\")}\n              <br /><br />\n              <ShopAccountHomeButton link=\"/shop/account/event_tickets\" buttonText={t(\"shop.account.btn_text_view\")} />\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n      </Grid.Row>\n      <hr />\n      {/* Administrative stuff below this point, profile, invoices, orders, etc. */}\n      <Grid.Row>\n        <Grid.Col md={4} lg={4}>\n          <Card>\n            <Card.Body>\n              <h5>{t(\"shop.account.profile.title\")}</h5>\n              {t(\"shop.account.profile.explanation\")}\n              <br /><br />\n              <ShopAccountHomeButton link=\"/shop/account/profile\" buttonText={t(\"shop.account.btn_text_profile_edit\")} />\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={4} lg={4}>\n          <Card>\n            <Card.Body>\n              <h5>{t(\"shop.account.orders.title\")}</h5>\n              {t(\"shop.account.orders.explanation\")}\n              <br /><br />\n              <ShopAccountHomeButton link=\"/shop/account/orders\" buttonText={t(\"shop.account.btn_text_view\")} />\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={4} lg={4}>\n          <Card>\n            <Card.Body>\n              <h5>{t(\"shop.account.invoices.title\")}</h5>\n              {t(\"shop.account.invoices.explanation\")}\n              <br /><br />\n              <ShopAccountHomeButton link=\"/shop/account/invoices\" buttonText={t(\"shop.account.btn_text_view\")} />\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={4} lg={4}>\n          <Card>\n            <Card.Body>\n              <h5>{t(\"shop.account.change_password.title\")}</h5>\n              {t(\"shop.account.change_password.explanation\")}\n              <br /><br />\n              <ShopAccountHomeButton link=\"/user/password/change/\" buttonText={t(\"shop.account.btn_text_change_password\")} />\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={4} lg={4}>\n          <Card>\n            <Card.Body>\n              <h5>{t(\"shop.account.sign_out.title\")}</h5>\n              {t(\"shop.account.sign_out.explanation\")}\n              <br /><br />\n              <ShopAccountHomeButton link=\"/user/logout/\" buttonText={t(\"shop.account.btn_text_sign_out\")} />\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n      </Grid.Row>\n    </ShopAccountHomeBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopAccountHome))","import React from 'react'\nimport moment from 'moment'\nimport { TimeStringToJSDateOBJ } from '../../tools/date_tools'\n\n\nexport function DisplayClassInfo({t, classDate, classData, dateFormat, timeFormat }) {\n    return (\n      <div>\n        <b>\n          {moment(classDate).format(dateFormat)} {' '}\n          {moment(TimeStringToJSDateOBJ(classData.scheduleClass.timeStart)).format(timeFormat)} {' - '}\n          {moment(TimeStringToJSDateOBJ(classData.scheduleClass.timeEnd)).format(timeFormat)} <br />  \n        </b>\n        {classData.scheduleClass.organizationClasstype.name + \" \" + t(\"general.at\") + ' ' + \n          classData.scheduleClass.organizationLocationRoom.organizationLocation.name}\n      </div>\n    )\n}","import { gql } from \"@apollo/client\"\n\n\nexport const GET_ACCOUNT_CLASS_QUERY = gql`\n  query ScheduleItemAttendance($scheduleItemId:ID!, $date:Date!, $id: ID!) {\n    scheduleClass(scheduleItemId: $scheduleItemId, date:$date) {\n      scheduleItemId\n      frequencyType\n      date\n      organizationClasstype {\n        name\n      }\n      organizationLocationRoom {\n        organizationLocation {\n          name\n        }\n      }\n          timeStart\n      timeEnd\n      infoMailContent\n    }\n    scheduleItemAttendance(id: $id) {\n      id\n      cancellationPossible\n      attendanceType\n      date\n      bookingStatus\n      scheduleItem {\n        id\n        timeStart\n        timeEnd\n        organizationLocationRoom {\n          name\n          organizationLocation {\n            name\n          }\n        }\n        organizationClasstype {\n          name\n        }\n      }\n    }\n    user {\n      id\n      accountId\n      firstName\n      lastName\n      fullName\n      email\n      gender\n      dateOfBirth\n      address\n      postcode\n      city\n      country\n      phone\n      mobile\n      emergency\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Container,\n  Icon,\n  Page\n} from \"tabler-react\";\nimport SiteWrapperShop from \"../../../SiteWrapperShop\"\n\n\nfunction ShopAccountClassCancelBase({ t, match, history, children, accountName=\"\" }) {\n  return (\n      <SiteWrapperShop>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header \n              title={t(\"shop.account.title\")} \n              subTitle={ accountName }\n            >\n              <div className=\"page-options d-flex\">\n                <Link to={\"/shop/account/classes\"}\n                      className='btn btn-secondary'>\n                  <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back')} \n                </Link>\n              </div>\n            </Page.Header>\n            { children }\n          </Container>\n        </div>\n      </SiteWrapperShop>\n  )\n}\n\nexport default withTranslation()(withRouter(ShopAccountClassCancelBase))","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { v4 } from \"uuid\"\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Icon,\n  Table\n} from \"tabler-react\"\n\nimport { DisplayClassInfo } from \"../../tools\"\nimport { UPDATE_SCHEDULE_ITEM_ATTENDANCE } from \"../../../schedule/classes/class/attendance/queries\"\nimport { GET_ACCOUNT_CLASS_QUERY } from \"./queries\"\n// import { GET_SCHEDULE_CLASS_QUERY } from \"../../checkout/class_info/queries\"\nimport GET_USER_PROFILE from \"../../../../queries/system/get_user_profile\"\nimport ShopAccountClassCancelBase from \"./ShopAccountClassCancelBase\"\n\n\n\nfunction ShopAccountClassCancel({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n\n  const attendanceId = match.params.attendance_id\n  const scheduleItemId = match.params.class_id\n  const date = match.params.date\n  const { loading: loadingAttendance, error: errorAttendance, data: dataAttendance } = useQuery(GET_ACCOUNT_CLASS_QUERY, {\n    variables: { \n      id: attendanceId,\n      scheduleItemId: scheduleItemId,\n      date: date\n    }\n  })\n  const { loading: loadingUser, error: errorUser, data: dataUser } = useQuery(GET_USER_PROFILE)\n  const [updateScheduleItemAttendance] = useMutation(UPDATE_SCHEDULE_ITEM_ATTENDANCE)\n\n  if (loadingUser || loadingAttendance) return (\n    <ShopAccountClassCancelBase>\n      {t(\"general.loading_with_dots\")}\n    </ShopAccountClassCancelBase>\n  )\n  if (errorUser || errorAttendance) return (\n    <ShopAccountClassCancelBase>\n      {t(\"shop.account.class_info.error_loading_data\")}\n    </ShopAccountClassCancelBase>\n  )\n\n  const user = dataUser.user\n  console.log(dataUser)\n  console.log(dataAttendance)\n  const scheduleItemAttendance = dataAttendance.scheduleItemAttendance\n\n  // Booking already cancelled\n  if (scheduleItemAttendance.bookingStatus == 'CANCELLED') {\n    return (\n      <ShopAccountClassCancelBase accountName={user.fullName}>\n        <Card title={t(\"shop.account.class_cancel.title_already_cancelled\")}>\n          <Card.Body>\n            <h5>{t(\"shop.account.class_cancel.already_cancelled\")}</h5>\n          </Card.Body>\n        </Card>\n      </ShopAccountClassCancelBase>\n    )\n  }\n\n  // Cancellation no longer possible\n  if (!scheduleItemAttendance.cancellationPossible) {\n    return (\n      <ShopAccountClassCancelBase accountName={user.fullName}>\n        <Card title={t(\"shop.account.class_cancel.title_cancelation_not_possible\")}>\n          <Card.Body>\n            <h5>{t(\"shop.account.class_cancel.cancelation_not_possible\")}</h5>\n          </Card.Body>\n        </Card>\n      </ShopAccountClassCancelBase>\n    )\n  }\n\n  // Show cancel option\n  return (\n    <ShopAccountClassCancelBase accountName={user.fullName}>\n      <Card title={t(\"shop.account.class_cancel.title\")}>\n        <Card.Body>\n          {/* TODO: Check if class already cancelled */}\n          <h5>\n            {t(\"shop.account.class_cancel.confirmation_question\")}\n          </h5>\n            <DisplayClassInfo\n              t={t}\n              classDate={date}\n              classData={dataAttendance}\n              dateFormat={dateFormat}\n              timeFormat={timeFormat}\n            />\n            <br />\n            <Button\n              className=\"mr-4\"\n              color=\"warning\"\n              onClick={() =>\n                updateScheduleItemAttendance({ variables: {\n                  input: {\n                    id: attendanceId,\n                    bookingStatus: \"CANCELLED\"\n                  }\n                }})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    history.push(\"/shop/account/classes\")\n                    toast.success((t('shop.account.class_cancel.success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                  })\n                }\n            >\n              {t(\"shop.account.class_cancel.confirm_yes\")}\n            </Button>\n            <Link to={\"/shop/account/classes\"}>\n              {t(\"shop.account.class_cancel.confirm_no\")}\n            </Link>\n        </Card.Body>\n      </Card>\n    </ShopAccountClassCancelBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopAccountClassCancel))\n\n\n{/* <Button \nclassName=\"pull-right\"\ncolor=\"warning\"\nonClick={() =>\n  updateAccountScheduleEventTicket({ variables: {\n    input: {\n      id: node.id,\n      cancelled: true\n    }\n  }, refetchQueries: [\n      {query: GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY, variables: {\n        scheduleEventTicket: id\n      }},\n  ]})\n  .then(({ data }) => {\n      console.log('got data', data);\n      toast.success((t('schedule.events.tickets.customers.cancelled')), {\n          position: toast.POSITION.BOTTOM_RIGHT\n        })\n      setShowSearch(false)\n    }).catch((error) => {\n      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n          position: toast.POSITION.BOTTOM_RIGHT\n        })\n      console.log('there was an error sending the query', error)\n      setShowSearch(false)\n    })\n  }\n>\n  {t(\"general.cancel\")}\n</Button> */}","import { gql } from \"@apollo/client\"\n\nexport const GET_SCHEDULE_CLASS_QUERY = gql`\n  query ScheduleClass($scheduleItemId:ID!, $date:Date!) {\n    scheduleClass(scheduleItemId: $scheduleItemId, date:$date) {\n      scheduleItemId\n      frequencyType\n      date\n      organizationClasstype {\n        name\n      }\n      organizationLocationRoom {\n        organizationLocation {\n          name\n        }\n      }\n          timeStart\n      timeEnd\n      infoMailContent\n    }\n  }\n`\n\n\n\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { v4 } from 'uuid'\nimport moment from 'moment'\n\nimport {\n  Card,\n  Icon,\n  Table,\n} from \"tabler-react\";\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport { DisplayClassInfo } from \"../../tools\"\nimport { GET_SCHEDULE_CLASS_QUERY } from \"./queries\"\n\n\nfunction ShopCheckoutClassInfo({ t, scheduleItemId, date, complete=true}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n\n\n  console.log(scheduleItemId)\n  console.log(date)\n\n  const { loading, error, data } = useQuery(GET_SCHEDULE_CLASS_QUERY, {\n    variables: { \n      scheduleItemId: scheduleItemId,\n      date: date\n    }\n  })\n\n  if (loading) return (\n      t(\"general.loading_with_dots\")\n  )\n  if (error) return (\n      t(\"shop.checkout.class_info.error_loading\")\n  )\n\n  console.log(data)\n\n  return (\n    (!loading && !error) ?\n      <div className=\"text-muted\">\n        <h5><Icon name=\"book\" /> {\n          (complete) ? t(\"shop.checkout.class_info.have_been_checked_in\")\n                     : t(\"shop.checkout.class_info.will_be_checked_in\") \n        }</h5>\n        {/* Class display info $ mail content */}\n        <DisplayClassInfo \n          t={t} \n          classDate={date}\n          classData={data} \n          dateFormat={dateFormat} \n          timeFormat={timeFormat}\n        />\n        <br />\n        {(data.scheduleClass.infoMailContent) ? \n          <div>\n            <h5><Icon name=\"info\" /> {t(\"shop.checkout.class_info.info_mail\")}</h5>\n            <div dangerouslySetInnerHTML={{ __html: data.scheduleClass.infoMailContent }} /> \n          </div>\n          : \"\"\n        }\n      </div> \n      : \"\"\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopCheckoutClassInfo))\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Container,\n  Icon,\n  Page\n} from \"tabler-react\";\nimport SiteWrapperShop from \"../../../SiteWrapperShop\"\n\n\nfunction ShopAccountClassInfoBase({ t, match, history, children, accountName=\"\" }) {\n  return (\n      <SiteWrapperShop>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header \n              title={t(\"shop.account.title\")} \n              subTitle={ accountName }\n            >\n              <div className=\"page-options d-flex\">\n                <Link to={\"/shop/account/classes\"}\n                      className='btn btn-secondary'>\n                  <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back')} \n                </Link>\n              </div>\n            </Page.Header>\n            { children }\n          </Container>\n        </div>\n      </SiteWrapperShop>\n  )\n}\n\nexport default withTranslation()(withRouter(ShopAccountClassInfoBase))","// @flow\n\nimport React from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { v4 } from \"uuid\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Icon,\n  Table\n} from \"tabler-react\"\n\nimport GET_USER_PROFILE from \"../../../../queries/system/get_user_profile\"\nimport ShopCheckoutClassInfo from \"../../checkout/class_info/ShopCheckoutClassInfo\"\nimport ShopAccountClassInfoBase from \"./ShopAccountClassInfoBase\"\n\n\n\nfunction ShopAccountClassInfo({t, match, history}) {\n  const { loading, error, data } = useQuery(GET_USER_PROFILE)\n  const scheduleItemId = match.params.class_id\n  const date = match.params.date \n\n  if (loading) return (\n    <ShopAccountClassInfoBase>\n      {t(\"general.loading_with_dots\")}\n    </ShopAccountClassInfoBase>\n  )\n  if (error) return (\n    <ShopAccountClassInfoBase>\n      {t(\"shop.account.class_info.error_loading_data\")}\n    </ShopAccountClassInfoBase>\n  )\n\n  const user = data.user\n\n  // Populated list\n  return (\n    <ShopAccountClassInfoBase accountName={user.fullName}>\n      <Card title={t(\"shop.account.class_info.title\")}>\n        <Card.Body>\n          <ShopCheckoutClassInfo\n            scheduleItemId={scheduleItemId}\n            date={date}\n            complete={true}\n          />\n        </Card.Body>\n      </Card>\n    </ShopAccountClassInfoBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopAccountClassInfo))\n","import { gql } from \"@apollo/client\"\n\n\nexport const QUERY_ACCOUNT_CLASSPASSES = gql`\n  query AccountClasspass($before: String, $after: String, $account: ID!) {\n    accountClasspasses(first: 100, before: $before, after: $after, account: $account) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          account {\n            id\n            fullName\n          }\n          organizationClasspass {\n            name\n          }\n          dateStart\n          dateEnd\n          classesRemainingDisplay\n        }\n      }\n    }\n    user {\n      id\n      accountId\n      firstName\n      lastName\n      fullName\n      email\n      gender\n      dateOfBirth\n      address\n      postcode\n      city\n      country\n      phone\n      mobile\n      emergency\n    }\n  }\n`","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport ButtonBack from \"../../ui/ButtonBack\"\n\n\nfunction ShopAccountBack({ t }) {\n  const returnUrl = \"/shop/account\"\n  \n  return (\n    <ButtonBack returnUrl={returnUrl} />\n  )\n}\n\nexport default withTranslation()(ShopAccountBack)\n","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Card,\n  Page,\n  Grid,\n  Container\n} from \"tabler-react\";\nimport SiteWrapperShop from \"../../../SiteWrapperShop\"\nimport ShopAccountBack from \"../ShopAccountBack\"\n\n\nfunction ShopAccountProfileBase({ t, match, history, children, accountName=\"\" }) {\n  return (\n    <SiteWrapperShop>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"shop.account.title\")} subTitle={ accountName }>\n              <div className=\"page-options d-flex\">\n                <ShopAccountBack />\n              </div>\n          </Page.Header>\n          { children }\n        </Container>\n      </div>\n    </SiteWrapperShop>\n  )\n}\n\nexport default withTranslation()(withRouter(ShopAccountProfileBase))","// @flow\n\nimport React, { useContext} from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { v4 } from \"uuid\"\nimport moment from 'moment'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport GET_USER_PROFILE from \"../../../../queries/system/get_user_profile\"\n\nimport {\n  Card,\n  Grid,\n  Table\n} from \"tabler-react\";\nimport { QUERY_ACCOUNT_CLASSPASSES } from \"./queries\"\n\nimport ShopAccountClasspassesBase from \"./ShopAccountClasspassesBase\"\nimport ContentCard from \"../../../general/ContentCard\"\n\n\nfunction ShopAccountClasspasses({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const { loading: loadingUser, error: errorUser, data: dataUser } = useQuery(GET_USER_PROFILE)\n  const { loading, error, data, fetchMore } = useQuery(QUERY_ACCOUNT_CLASSPASSES, {\n    skip: loadingUser || errorUser || !dataUser,\n    variables: {\n      account: dataUser && dataUser.user ? dataUser.user.accountId : null\n    }\n  })\n  \n\n  if (loading || loadingUser || !data) return (\n    <ShopAccountClasspassesBase>\n      {t(\"general.loading_with_dots\")}\n    </ShopAccountClasspassesBase>\n  )\n  if (error || errorUser) return (\n    <ShopAccountClasspassesBase>\n      {t(\"shop.account.classpasses.error_loading_data\")}\n    </ShopAccountClasspassesBase>\n  )\n\n  console.log(\"User data: ###\")\n  console.log(data)\n  const user = data.user\n  const classpasses = data.accountClasspasses\n\n  // Empty list\n  if (!classpasses.edges.length) {\n    return (\n      <ShopAccountClasspassesBase accountName={user.fullName}>\n        <Grid.Row>\n          <Grid.Col md={12}>\n            <Card cardTitle={t('shop.account.classpasses.title')} >\n              <Card.Body>\n                {t('shop.account.classpasses.empty_list')}\n              </Card.Body>\n            </Card>\n          </Grid.Col>\n        </Grid.Row>\n      </ShopAccountClasspassesBase>\n    )  \n  }\n\n  // Populated list\n  return (\n    <ShopAccountClasspassesBase accountName={user.fullName}>\n      <Grid.Row>\n        <Grid.Col md={12}>\n          <ContentCard cardTitle={t('shop.account.classpasses.title')}\n            // headerContent={headerOptions}\n            pageInfo={classpasses.pageInfo}\n            onLoadMore={() => {\n              fetchMore({\n                variables: {\n                  after: classpasses.pageInfo.endCursor\n                },\n                updateQuery: (previousResult, { fetchMoreResult }) => {\n                  const newEdges = fetchMoreResult.accountClasspasses.edges\n                  const pageInfo = fetchMoreResult.accountClasspasses.pageInfo\n\n                  return newEdges.length\n                    ? {\n                        // Put the new subscriptions at the end of the list and update `pageInfo`\n                        // so we have the new `endCursor` and `hasNextPage` values\n                        accountClasspasses: {\n                          __typename: previousResult.accountClasspasses.__typename,\n                          edges: [ ...previousResult.accountClasspasses.edges, ...newEdges ],\n                          pageInfo\n                        }\n                      }\n                    : previousResult\n                }\n              })\n            }} >\n            <Table>\n              <Table.Header>\n                <Table.Row key={v4()}>\n                  <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.date_start')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.date_end')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.classes_remaining')}</Table.ColHeader>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {classpasses.edges.map(({ node }) => (\n                  <Table.Row key={v4()}>\n                    <Table.Col>\n                      {node.organizationClasspass.name}\n                    </Table.Col>\n                    <Table.Col>\n                      {moment(node.dateStart).format(dateFormat)}\n                    </Table.Col>\n                    <Table.Col>\n                      {moment(node.dateEnd).format(dateFormat)}\n                    </Table.Col>\n                    <Table.Col>\n                      {node.classesRemainingDisplay}\n                    </Table.Col>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          </ContentCard>\n        </Grid.Col>\n      </Grid.Row>\n    </ShopAccountClasspassesBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopAccountClasspasses))","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Card,\n  Page,\n  Grid,\n  Container\n} from \"tabler-react\";\nimport SiteWrapperShop from \"../../SiteWrapperShop\"\nimport ShopAccountBack from \"./ShopAccountBack\"\n\n\nfunction ShopAccountProfileBase({ t, match, history, children, accountName=\"\" }) {\n  return (\n    <SiteWrapperShop>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"shop.account.title\")} subTitle={ accountName }>\n              <div className=\"page-options d-flex\">\n                <ShopAccountBack />\n              </div>\n          </Page.Header>\n          { children }\n        </Container>\n      </div>\n    </SiteWrapperShop>\n  )\n}\n\nexport default withTranslation()(withRouter(ShopAccountProfileBase))","// @flow\n\nimport React, { useContext} from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { v4 } from \"uuid\"\nimport moment from 'moment'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport GET_USER_PROFILE from \"../../../../queries/system/get_user_profile\"\n\nimport {\n  Badge,\n  Card,\n  Grid,\n  Table\n} from \"tabler-react\";\nimport { GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY } from \"../../../relations/accounts/schedule_event_tickets/queries\"\n\nimport ShopAccountProfileBase from \"../ShopAccountProfileBase\"\nimport ContentCard from \"../../../general/ContentCard\"\n\n\nfunction ShopAccountEventTickets({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const { loading: loadingUser, error: errorUser, data: dataUser } = useQuery(GET_USER_PROFILE)\n  const { loading, error, data, fetchMore } = useQuery(GET_ACCOUNT_SCHEDULE_EVENT_TICKETS_QUERY, {\n    skip: loadingUser || errorUser || !dataUser,\n    variables: {\n      account: dataUser && dataUser.user ? dataUser.user.accountId : null\n    }\n  })  \n\n  if (loading || loadingUser || !data) return (\n    <ShopAccountProfileBase>\n      {t(\"general.loading_with_dots\")}\n    </ShopAccountProfileBase>\n  )\n  if (error || errorUser) return (\n    <ShopAccountProfileBase>\n      {t(\"shop.account.event_tickets.error_loading_data\")}\n    </ShopAccountProfileBase>\n  )\n\n  console.log(\"User data: ###\")\n  console.log(dataUser)\n  const user = dataUser.user\n  const eventTickets = data.accountScheduleEventTickets\n\n  // Empty list\n  if (!eventTickets.edges.length) {\n    return (\n      <ShopAccountProfileBase accountName={user.fullName}>\n        <Grid.Row>\n          <Grid.Col md={12}>\n            <Card cardTitle={t('shop.account.event_tickets.title')} >\n              <Card.Body>\n                {t('shop.account.event_tickets.empty_list')}\n              </Card.Body>\n            </Card>\n          </Grid.Col>\n        </Grid.Row>\n      </ShopAccountProfileBase>\n    )  \n  }\n\n  // Populated list\n  return (\n    <ShopAccountProfileBase accountName={user.fullName}>\n      <Grid.Row>\n        <Grid.Col md={12}>\n          <ContentCard cardTitle={t('shop.account.event_tickets.title')}\n            // headerContent={headerOptions}\n            pageInfo={eventTickets.pageInfo}\n            onLoadMore={() => {\n              fetchMore({\n                variables: {\n                  after: eventTickets.pageInfo.endCursor\n                },\n                updateQuery: (previousResult, { fetchMoreResult }) => {\n                  const newEdges = fetchMoreResult.accountScheduleEventTickets.edges\n                  const pageInfo = fetchMoreResult.accountScheduleEventTickets.pageInfo\n\n                  return newEdges.length\n                    ? {\n                        // Put the new tickets at the end of the list and update `pageInfo`\n                        // so we have the new `endCursor` and `hasNextPage` values\n                        eventTickets: {\n                          __typename: previousResult.accountScheduleEventTickets.__typename,\n                          edges: [ ...previousResult.accountScheduleEventTickets.edges, ...newEdges ],\n                          pageInfo\n                        }\n                      }\n                    : previousResult\n                }\n              })\n            }} >\n            <Table>\n              <Table.Header>\n                <Table.Row key={v4()}>\n                  <Table.ColHeader>{t('general.ticket')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.start')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.location')}</Table.ColHeader>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {eventTickets.edges.map(({ node }) => (\n                  <Table.Row key={v4()}>\n                    <Table.Col>\n                      {node.scheduleEventTicket.scheduleEvent.name} <br />\n                      <Badge>{node.scheduleEventTicket.name}</Badge> {\" \"}\n                      {(node.cancelled) ? <Badge color=\"warning\">{t(\"general.cancelled\")}</Badge> : \"\"}\n                    </Table.Col>\n                    <Table.Col>\n                      {moment(node.scheduleEventTicket.scheduleEvent.dateStart).format(dateFormat)}\n                    </Table.Col>\n                    <Table.Col>\n                      {node.scheduleEventTicket.scheduleEvent.organizationLocation.name}\n                    </Table.Col>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          </ContentCard>\n        </Grid.Col>\n      </Grid.Row>\n    </ShopAccountProfileBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopAccountEventTickets))","import { gql } from \"@apollo/client\"\n\n\nexport const QUERY_ACCOUNT_INVOICES = gql`\n  query FinanceInvoices($after: String, $before: String, $account: ID!) {\n    financeInvoices(first: 15, before: $before, after: $after, account: $account) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          invoiceNumber\n          status\n          summary\n          relationCompany\n          relationContactName\n          dateSent\n          dateDue\n          total\n          totalDisplay\n          balance\n          balanceDisplay\n        }\n      }\n    }\n    user {\n      id\n      accountId\n      firstName\n      lastName\n      fullName\n      email\n      gender\n      dateOfBirth\n      address\n      postcode\n      city\n      country\n      phone\n      mobile\n      emergency\n    }\n  }\n`\n\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Page,\n  Container\n} from \"tabler-react\";\nimport SiteWrapperShop from \"../../../SiteWrapperShop\"\nimport ShopAccountBack from \"../ShopAccountBack\"\n\n\nfunction ShopAccountInvoicesBase({ t, match, history, children, accountName=\"\" }) {\n  return (\n      <SiteWrapperShop>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title={t(\"shop.account.title\")} subTitle={ accountName }>\n              <div className=\"page-options d-flex\">\n                <ShopAccountBack />\n              </div>\n            </Page.Header>\n            { children }\n          </Container>\n        </div>\n      </SiteWrapperShop>\n  )\n}\n\nexport default withTranslation()(withRouter(ShopAccountInvoicesBase))","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { v4 } from \"uuid\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport FinanceInvoicesStatus from \"../../../ui/FinanceInvoiceStatus\"\nimport ContentCard from \"../../../general/ContentCard\"\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Icon,\n  Table,\n  Text\n} from \"tabler-react\"\nimport { QUERY_ACCOUNT_INVOICES } from \"./queries\"\nimport GET_USER_PROFILE from \"../../../../queries/system/get_user_profile\"\n\nimport ShopAccountInvoicesBase from \"./ShopAccountInvoicesBase\"\n\n\nfunction ShopAccountInvoices({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  const dateTimeFormat = dateFormat + ' ' + timeFormat\n\n  // Chain queries. First query user data and then query invoices for that user once we have the account Id.\n  const { loading: loadingUser, error: errorUser, data: dataUser } = useQuery(GET_USER_PROFILE)\n  const { loading, error, data, fetchMore } = useQuery(QUERY_ACCOUNT_INVOICES, {\n    skip: loadingUser || errorUser || !dataUser,\n    variables: {\n      account: dataUser && dataUser.user ? dataUser.user.accountId : null\n    }\n  })\n\n  if (loading || loadingUser || !data) return (\n    <ShopAccountInvoicesBase>\n      {t(\"general.loading_with_dots\")}\n    </ShopAccountInvoicesBase>\n  )\n  if (error || errorUser) return (\n    <ShopAccountInvoicesBase>\n      {t(\"shop.account.classpasses.error_loading_data\")}\n    </ShopAccountInvoicesBase>\n  )\n\n  console.log(\"User data: ###\")\n  console.log(data)\n  const user = dataUser.user\n  const invoices = data.financeInvoices\n\n  // Empty list\n  if (!invoices.edges.length) {\n    return (\n      <ShopAccountInvoicesBase accountName={user.fullName}>\n        <Grid.Row>\n          <Grid.Col md={12}>\n            <Card cardTitle={t('shop.account.invoices.title')} >\n              <Card.Body>\n                {t('shop.account.invoices.empty_list')}\n              </Card.Body>\n            </Card>\n          </Grid.Col>\n        </Grid.Row>\n      </ShopAccountInvoicesBase>\n    )  \n  }\n\n  // Populated list\n  return (\n    <ShopAccountInvoicesBase accountName={user.fullName}>\n      <Grid.Row>\n        <Grid.Col md={12}>\n          <ContentCard cardTitle={t('shop.account.invoices.title')}\n            // headerContent={headerOptions}\n            pageInfo={invoices.pageInfo}\n            onLoadMore={() => {\n              fetchMore({\n                variables: {\n                  after: invoices.pageInfo.endCursor\n                },\n                updateQuery: (previousResult, { fetchMoreResult }) => {\n                  const newEdges = fetchMoreResult.financeInvoices.edges\n                  const pageInfo = fetchMoreResult.financeInvoices.pageInfo\n\n                  return newEdges.length\n                    ? {\n                        // Put the new subscriptions at the end of the list and update `pageInfo`\n                        // so we have the new `endCursor` and `hasNextPage` values\n                        financeInvoices: {\n                          __typename: previousResult.financeInvoices.__typename,\n                          edges: [ ...previousResult.financeInvoices.edges, ...newEdges ],\n                          pageInfo\n                        }\n                      }\n                    : previousResult\n                }\n              })\n            }} >\n            <Table cards responsive>\n              <Table.Header>\n                <Table.Row key={v4()}>\n                  <Table.ColHeader>{t('general.status')}</Table.ColHeader>\n                  <Table.ColHeader>{t('finance.invoices.invoice_number')}</Table.ColHeader>\n                  <Table.ColHeader>{t('finance.invoices.date')} & {t('finance.invoices.due')}</Table.ColHeader>\n                  {/* <Table.ColHeader>{t('finance.invoices.due')}</Table.ColHeader> */}\n                  <Table.ColHeader>{t('general.total')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.balance')}</Table.ColHeader>\n                  <Table.ColHeader></Table.ColHeader>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                { invoices.edges.map(({ node }) => (\n                  <Table.Row key={v4()}>\n                    <Table.Col key={v4()}>\n                      <FinanceInvoicesStatus status={node.status} />\n                    </Table.Col>\n                    <Table.Col key={v4()}>\n                      {node.invoiceNumber} <br />\n                      <Text.Small muted>\n                        {node.summary.trunc(20)}\n                      </Text.Small>\n                    </Table.Col>\n                    <Table.Col key={v4()}>\n                      {moment(node.dateSent).format('LL')} <br />\n                      {moment(node.dateDue).format('LL')}\n                    </Table.Col>\n                    <Table.Col key={v4()}>\n                      {node.totalDisplay}\n                    </Table.Col>\n                    <Table.Col key={v4()}>\n                      {node.balanceDisplay}\n                    </Table.Col>\n                    <Table.Col className=\"text-right\" key={v4()}>\n                      <Button \n                        RootComponent=\"a\"\n                        href={`/d/export/invoice/pdf/${node.id}`}\n                        color=\"secondary\"\n                        icon=\"printer\"\n                      >\n                        {t('general.pdf')}\n                      </Button>\n                    </Table.Col>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          </ContentCard>\n        </Grid.Col>\n      </Grid.Row>\n    </ShopAccountInvoicesBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopAccountInvoices))","import { gql } from \"@apollo/client\"\n\n\nexport const QUERY_ACCOUNT_ORDERS = gql`\n  query FinanceOrders($after: String, $before: String, $account: ID!) {\n    financeOrders(first: 15, before: $before, after: $after, account: $account) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          orderNumber\n          account {\n            id\n            fullName\n          }\n          message\n          status\n          total\n          totalDisplay\n          createdAt\n          items(first: 100) {\n            pageInfo {\n              hasNextPage\n              hasPreviousPage\n              startCursor\n              endCursor\n            }\n            edges {\n              node {\n                id\n                productName\n                description\n                quantity\n                priceDisplay\n                financeTaxRate {\n                  id\n                  name\n                  percentage\n                  rateType\n                }\n                subtotalDisplay\n                taxDisplay\n                totalDisplay                \n              }\n            }\n          }\n        }\n      }\n    }\n    user {\n      id\n      accountId\n      firstName\n      lastName\n      fullName\n      email\n      gender\n      dateOfBirth\n      address\n      postcode\n      city\n      country\n      phone\n      mobile\n      emergency\n    }\n  }\n`\n\n\nexport const UPDATE_ORDER = gql`\n  mutation UpdateOrder($input: UpdateFinanceOrderInput!) {\n    updateFinanceOrder(input: $input) {\n      financeOrder {\n        id\n        status\n      }\n    }\n  }\n`\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Page,\n  Container\n} from \"tabler-react\";\nimport SiteWrapperShop from \"../../../SiteWrapperShop\"\nimport ShopAccountBack from \"../ShopAccountBack\"\n\n\nfunction ShopAccountOrdersBase({ t, match, history, children, accountName=\"\" }) {\n  return (\n      <SiteWrapperShop>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title={t(\"shop.account.title\")} subTitle={ accountName }>\n              <div className=\"page-options d-flex\">\n                <ShopAccountBack />\n              </div>\n            </Page.Header>\n            { children }\n          </Container>\n        </div>\n      </SiteWrapperShop>\n  )\n}\n\nexport default withTranslation()(withRouter(ShopAccountOrdersBase))","export function get_order_card_status_color(status) {\n    switch(status) {\n        case (\"RECEIVED\"): \n          return \"blue\"\n          break\n        case (\"AWAITING_PAYMENT\"): \n          return \"blue\"\n          break\n        case (\"PAID\"):\n          return \"green\"\n          break\n        case (\"DELIVERED\"):\n          return \"green\"\n          break\n        case \"CANCELLED\":\n          return \"orange\"\n          break\n        default:\n          return \"\"\n      }\n}","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { v4 } from \"uuid\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport FinanceOrderStatus from \"../../../finance/orders/FinanceOrderStatus\"\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Icon,\n  Table\n} from \"tabler-react\"\nimport { QUERY_ACCOUNT_ORDERS, UPDATE_ORDER } from \"./queries\"\nimport GET_USER_PROFILE from \"../../../../queries/system/get_user_profile\"\n\nimport ShopAccountOrdersBase from \"./ShopAccountOrdersBase\"\nimport { cancelOrder } from \"./ShopAccountOrderCancel\"\nimport LoadMoreOnBottomScroll from \"../../../general/LoadMoreOnBottomScroll\"\n\nimport { get_order_card_status_color } from \"./tools\"\n\nfunction ShopAccountOrders({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  const dateTimeFormat = dateFormat + ' ' + timeFormat\n\n  // Chain queries. First query user data and then query orders for that user once we have the account Id.\n  const { loading: loadingUser, error: errorUser, data: dataUser } = useQuery(GET_USER_PROFILE)\n  const { loading, error, data, fetchMore } = useQuery(QUERY_ACCOUNT_ORDERS, {\n    skip: loadingUser || errorUser || !dataUser,\n    variables: {\n      account: dataUser && dataUser.user ? dataUser.user.accountId : null\n    }\n  })\n  const [ updateOrder ] = useMutation(UPDATE_ORDER)\n\n  if (loading || loadingUser || !data) return (\n    <ShopAccountOrdersBase>\n      {t(\"general.loading_with_dots\")}\n    </ShopAccountOrdersBase>\n  )\n  if (error || errorUser) return (\n    <ShopAccountOrdersBase>\n      {t(\"shop.account.classpasses.error_loading_data\")}\n    </ShopAccountOrdersBase>\n  )\n\n  console.log(\"User data: ###\")\n  console.log(data)\n  const user = dataUser.user\n  const orders = data.financeOrders\n\n  // Empty list\n  if (!orders.edges.length) {\n    return (\n      <ShopAccountOrdersBase accountName={user.fullName}>\n        <Grid.Row>\n          <Grid.Col md={12}>\n            <Card cardTitle={t('shop.account.orders.title')} >\n              <Card.Body>\n                {t('shop.account.orders.empty_list')}\n              </Card.Body>\n            </Card>\n          </Grid.Col>\n        </Grid.Row>\n      </ShopAccountOrdersBase>\n    )  \n  }\n\n  // Populated list\n  return (\n    <ShopAccountOrdersBase accountName={user.fullName}>\n      <Grid.Row>\n        <Grid.Col md={12}>\n          <LoadMoreOnBottomScroll\n            // headerContent={headerOptions}\n            pageInfo={orders.pageInfo}\n            onLoadMore={() => {\n              fetchMore({\n                variables: {\n                  after: orders.pageInfo.endCursor\n                },\n                updateQuery: (previousResult, { fetchMoreResult }) => {\n                  const newEdges = fetchMoreResult.financeOrders.edges\n                  const pageInfo = fetchMoreResult.financeOrders.pageInfo\n\n                  return newEdges.length\n                    ? {\n                        // Put the new subscriptions at the end of the list and update `pageInfo`\n                        // so we have the new `endCursor` and `hasNextPage` values\n                        financeOrders: {\n                          __typename: previousResult.financeOrders.__typename,\n                          edges: [ ...previousResult.financeOrders.edges, ...newEdges ],\n                          pageInfo\n                        }\n                      }\n                    : previousResult\n                }\n              })\n            }} >\n            <h4>{t(\"shop.account.orders.title\")}</h4>\n            {orders.edges.map(({ node }) => (\n              <div>\n                <span className=\"pull-right\">\n                  <FinanceOrderStatus status={node.status} />\n                </span>\n                <span className=\"text-muted\">\n                  {moment(node.createdAt).format(dateTimeFormat)}\n                </span>\n                <Card statusColor={get_order_card_status_color(node.status)}>\n                  <Card.Header>\n                    <Card.Title>{t(\"general.order\") + \" #\" + node.orderNumber}</Card.Title>\n                    <Card.Options>\n                      {(node.status == \"RECEIVED\" || node.status == \"AWAITING_PAYMENT\") ?\n                        <Button\n                          outline\n                          color=\"warning\"\n                          size=\"sm\"\n                          onClick={() => cancelOrder({\n                            t: t,\n                            msgConfirm: t('shop.account.orders.msg_cancel_confirm'),\n                            msgDescription: <p>{t('general.order') + \" #\" + node.orderNumber}</p>, \n                            msgSuccess: t('shop.account.orders.order.cancelled'), \n                            cancelFunction: updateOrder, \n                            functionVariables: {\n                              variables: {\n                                input: {\n                                  id: node.id,\n                                  status: 'CANCELLED'\n                                }\n                              }\n                            }\n                          })}\n                        >\n                          {t('general.cancel')}\n                        </Button>\n                      : \"\"}\n                      {(node.status == \"AWAITING_PAYMENT\") ?\n                        <Link to={\"/shop/checkout/payment/\" + node.id}>\n                          <Button\n                            className=\"ml-4\"\n                            color=\"success\"\n                            size=\"sm\"\n                          >\n                            {t('shop.account.orders.to_payment')} <Icon name=\"chevron-right\" />\n                          </Button>\n                        </Link>\n                      : \"\"}\n                    </Card.Options>\n                  </Card.Header>\n                  <Table cards>\n                    <Table.Header>\n                      <Table.Row>\n                        <Table.ColHeader>{t(\"general.product\")}</Table.ColHeader>\n                        <Table.ColHeader>{t(\"general.description\")}</Table.ColHeader>\n                        <Table.ColHeader>{t(\"general.total\")}</Table.ColHeader>\n                      </Table.Row>\n                    </Table.Header>\n                    <Table.Body>\n                      {node.items.edges.map(({ node }) => (\n                        <Table.Row>\n                          <Table.Col>{node.productName}</Table.Col>\n                          <Table.Col>{node.description}</Table.Col>\n                          <Table.Col>{node.totalDisplay}</Table.Col>\n                        </Table.Row>    \n                      ))}\n                      <Table.Row>\n                        <Table.Col></Table.Col>\n                        <Table.Col></Table.Col>\n                        <Table.Col><span className=\"bold\">{node.totalDisplay}</span></Table.Col>\n                      </Table.Row>\n                    </Table.Body>\n                  </Table>\n                </Card>\n              </div>\n            ))}\n          </LoadMoreOnBottomScroll>\n        </Grid.Col>\n      </Grid.Row>\n    </ShopAccountOrdersBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopAccountOrders))","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { toast } from 'react-toastify'\nimport { confirmAlert } from 'react-confirm-alert'\nimport { v4 } from 'uuid'\n\nimport {\n  Icon,\n} from \"tabler-react\";\n\nexport function cancelOrder({t, msgConfirm, msgDescription, msgSuccess, cancelFunction, functionVariables}) {\n  return (\n    confirmAlert({\n      customUI: ({ onClose }) => {\n        return (\n          <div key={v4()} className='custom-ui'>\n            <h1>{t('shop.account.orders.confirm_cancel')}</h1>\n            {msgConfirm}\n            {msgDescription}\n            <button className=\"btn btn-link pull-right\" onClick={onClose}>{t('shop.account.orders.confirm_cancel_no')}</button>\n            <button\n              className=\"btn btn-warning btn-sm outline\"\n              onClick={() => {\n                cancelFunction(functionVariables)\n                  .then(({ data }) => {\n                    console.log('got data', data);\n                    toast.success(\n                      msgSuccess, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error);\n                  })\n                onClose()\n              }}\n            >\n              {t('shop.account.orders.confirm_cancel_yes')}\n            </button>\n          </div>\n        )\n      }\n    })\n  )\n}\n","import { gql } from \"@apollo/client\"\n\n\nexport const UPDATE_PROFILE = gql`\n  mutation UpdateAccount($input:UpdateAccountInput!) {\n    updateAccount(input: $input) {\n      account {\n        id\n        firstName\n        lastName\n        email\n      }\n    }\n  }\n`","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Card,\n  Page,\n  Grid,\n  Container\n} from \"tabler-react\";\nimport SiteWrapperShop from \"../../../SiteWrapperShop\"\nimport ShopAccountBack from \"../ShopAccountBack\"\n\n\nfunction ShopAccountProfileBase({ t, match, history, children, accountName=\"\" }) {\n  return (\n    <SiteWrapperShop>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"shop.account.title\")} subTitle={ accountName }>\n            <div className=\"page-options d-flex\">\n              <ShopAccountBack />\n            </div>\n          </Page.Header>\n          { children }\n        </Container>\n      </div>\n    </SiteWrapperShop>\n  )\n}\n\nexport default withTranslation()(withRouter(ShopAccountProfileBase))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { v4 } from 'uuid'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Card,\n  Form,\n  Grid\n} from \"tabler-react\"\n\n\nimport CSDatePicker from \"../../../ui/CSDatePicker\"\nimport ISO_COUNTRY_CODES from \"../../../../tools/iso_country_codes\"\n\n\nconst ShopAccountProfileForm = ({ t, history, isSubmitting, errors, values, returnUrl, setFieldTouched, setFieldValue }) => (\n  <FoForm>\n    <Card title={t(\"shop.accounts.profile.edit\")} >\n      <Card.Body>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.first_name')}>\n              <Field type=\"text\" \n                      name=\"firstName\" \n                      className={(errors.firstName) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"firstName\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.last_name')}>\n              <Field type=\"text\" \n                      name=\"lastName\" \n                      className={(errors.lastName) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"lastName\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n         <Grid.Col>\n            <Form.Group label={t('general.date_of_birth')}>\n              <CSDatePicker \n                selected={values.dateOfBirth}\n                onChange={(date) => setFieldValue(\"dateOfBirth\", date)}\n                onBlur={() => setFieldTouched(\"dateOfBirth\", true)}\n              />\n              <ErrorMessage name=\"dateOfBirth\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.gender')}>\n              <Field component=\"select\" \n                    name=\"gender\" \n                    className={(errors.organizationMembership) ? \"form-control is-invalid\" : \"form-control\"} \n                    autoComplete=\"off\">\n                <option value=\"\"></option>\n                <option value=\"F\">{t(\"genders.female\")}</option>\n                <option value=\"M\">{t(\"genders.male\")}</option>\n                <option value=\"X\">{t(\"genders.other\")}</option>\n              </Field>\n              <ErrorMessage name=\"gender\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.email')}>\n              <Field type=\"text\" \n                      name=\"email\" \n                      className={(errors.email) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"email\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('relations.accounts.emergency')}>\n              <Field type=\"text\" \n                     name=\"emergency\" \n                     className={(errors.emergency) ? \"form-control is-invalid\" : \"form-control\"} \n                     autoComplete=\"off\" />\n              <ErrorMessage name=\"emergency\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.phone')}>\n              <Field type=\"text\" \n                      name=\"phone\" \n                      className={(errors.phone) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"phone\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.mobile')}>\n              <Field type=\"text\" \n                     name=\"mobile\" \n                     className={(errors.mobile) ? \"form-control is-invalid\" : \"form-control\"} \n                     autoComplete=\"off\" />\n              <ErrorMessage name=\"mobile\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.address')}>\n              <Field type=\"text\" \n                      name=\"address\" \n                      className={(errors.address) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"address\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.postcode')}>\n              <Field type=\"text\" \n                     name=\"postcode\" \n                     className={(errors.postcode) ? \"form-control is-invalid\" : \"form-control\"} \n                     autoComplete=\"off\" />\n              <ErrorMessage name=\"postcode\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n        </Grid.Row>\n        <Grid.Row>\n          <Grid.Col>\n            <Form.Group label={t('general.city')}>\n              <Field type=\"text\" \n                      name=\"city\" \n                      className={(errors.city) ? \"form-control is-invalid\" : \"form-control\"} \n                      autoComplete=\"off\" />\n              <ErrorMessage name=\"city\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group>\n          </Grid.Col>\n          <Grid.Col>\n            <Form.Group label={t('general.country')}>\n              <Field component=\"select\" \n                     name=\"country\" \n                     className={(errors.country) ? \"form-control is-invalid\" : \"form-control\"} \n                     autoComplete=\"off\">\n                <option value=\"\"></option>\n                { ISO_COUNTRY_CODES.map(\n                    country => <option value={country.Code} key={v4()}>{country.Name}</option>\n                )}\n              </Field>\n              <ErrorMessage name=\"gender\" component=\"span\" className=\"invalid-feedback\" />\n            </Form.Group> \n          </Grid.Col>\n        </Grid.Row>\n      </Card.Body>\n      <Card.Footer>\n          <Button \n            color=\"primary\"\n            className=\"pull-right\" \n            type=\"submit\" \n            disabled={isSubmitting}\n          >\n            {t('general.submit')}\n          </Button>\n          <Link to={returnUrl}>\n            <Button color=\"link\">\n                {t('general.cancel')}\n            </Button>\n          </Link>\n      </Card.Footer>\n    </Card>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(ShopAccountProfileForm))\n\n","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const ACCOUNT_SCHEMA = Yup.object().shape({\n    firstName: Yup.string()\n      .min(2, t('yup.min_len_2'))\n      .required(t('yup.field_required')),\n    lastName: Yup.string()\n      .min(2, t('yup.min_len_2'))\n      .required(t('yup.field_required')),\n    email: Yup.string()\n      .email(t('yup.email'))\n      .required(t('yup.field_required')),\n  })\n","// @flow\n\nimport React from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport {\n  Card,\n  Page,\n  Grid,\n  Container\n} from \"tabler-react\";\nimport SiteWrapperShop from \"../../../SiteWrapperShop\"\nimport GET_USER_PROFILE from \"../../../../queries/system/get_user_profile\"\nimport { UPDATE_PROFILE } from \"./queries\"\n\nimport ShopAccountProfileBase from \"./ShopAccountProfileBase\"\nimport ShopAccountProfileForm from \"./ShopAccountProfileForm\"\n\nimport { dateToLocalISO } from '../../../../tools/date_tools'\n\nimport { ACCOUNT_SCHEMA } from \"./yupSchema\"\n\n\nfunction ShopAccountProfile({t, match, history}) {\n  const { loading, error, data } = useQuery(GET_USER_PROFILE)\n  const [ updateProfile ] = useMutation(UPDATE_PROFILE)\n\n  if (loading) return (\n    <ShopAccountProfileBase>\n      {t(\"general.loading_with_dots\")}\n    </ShopAccountProfileBase>\n  )\n  if (error) return (\n    <ShopAccountProfileBase>\n      {t(\"shop.account.profile.error_loading_data\")}\n    </ShopAccountProfileBase>\n  )\n\n  console.log(\"User data: ###\")\n  console.log(data)\n  const user = data.user\n\n  let dateOfBirth = null\n  if (user.dateOfBirth) {\n    dateOfBirth = new Date(user.dateOfBirth)\n  }\n\n  return (\n    <ShopAccountProfileBase accountName={user.fullName}>\n      <Grid.Row>\n        <Grid.Col md={12}>\n          <Formik\n            initialValues={{ \n              firstName: user.firstName, \n              lastName: user.lastName, \n              email: user.email,\n              dateOfBirth: dateOfBirth,\n              gender: user.gender,\n              emergency: user.emergency,\n              phone: user.phone,\n              mobile: user.mobile,\n              address: user.address,\n              postcode: user.postcode,\n              city: user.city,\n              country: user.country\n            }}\n            validationSchema={ACCOUNT_SCHEMA}\n            onSubmit={(values, { setSubmitting }) => {\n                console.log('submit values:')\n                console.log(values)\n\n                let input_vars = {\n                  id: user.accountId,\n                  firstName: values.firstName,\n                  lastName: values.lastName,\n                  email: values.email,\n                  gender: values.gender,\n                  emergency: values.emergency,\n                  phone: values.phone,\n                  mobile: values.mobile,\n                  address: values.address,\n                  postcode: values.postcode,\n                  city: values.city,\n                  country: values.country\n                }\n\n                if (values.dateOfBirth) {\n                  input_vars['dateOfBirth'] = dateToLocalISO(values.dateOfBirth)\n                } \n\n                updateProfile({ variables: {\n                  input: input_vars\n                }, refetchQueries: [\n                    // // Refetch list\n                    // {query: GET_ACCOUNTS_QUERY, variables: get_list_query_variables()},\n                    // // Refresh local cached results for this account\n                    // {query: GET_ACCOUNT_QUERY, variables: {\"id\": match.params.account_id}}\n                ]})\n                .then(({ data }) => {\n                    console.log('got data', data)\n                    toast.success((t('shop.account.profile.toast_edit_success')), {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    setSubmitting(false)\n                  }).catch((error) => {\n                    toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                        position: toast.POSITION.BOTTOM_RIGHT\n                      })\n                    console.log('there was an error sending the query', error)\n                    setSubmitting(false)\n                  })\n            }}\n            >\n            {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n              <ShopAccountProfileForm\n                isSubmitting={isSubmitting}\n                setFieldTouched={setFieldTouched}\n                setFieldValue={setFieldValue}\n                errors={errors}\n                values={values}\n                returnUrl={\"/shop/account\"}\n              />\n            )}\n          </Formik>\n        </Grid.Col>\n      </Grid.Row>\n    </ShopAccountProfileBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopAccountProfile))","import { gql } from \"@apollo/client\"\n\n\nexport const QUERY_ACCOUNT_SUBSCRIPTIONS = gql`\n  query AccountSubscriptions($before: String, $after: String, $account: ID!) {\n    accountSubscriptions(first: 100, before: $before, after: $after, account: $account) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          account {\n            id\n            fullName\n          }\n          organizationSubscription {\n            name\n          }\n          dateStart\n          dateEnd\n        }\n      }\n    }\n    user {\n      id\n      accountId\n      firstName\n      lastName\n      fullName\n      email\n      gender\n      dateOfBirth\n      address\n      postcode\n      city\n      country\n      phone\n      mobile\n      emergency\n    }\n  }\n`","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Card,\n  Page,\n  Grid,\n  Container\n} from \"tabler-react\";\nimport SiteWrapperShop from \"../../../SiteWrapperShop\"\nimport ShopAccountBack from \"../ShopAccountBack\"\n\n\nfunction ShopAccountProfileBase({ t, match, history, children, accountName=\"\" }) {\n  return (\n    <SiteWrapperShop>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={t(\"shop.account.title\")} subTitle={ accountName }>\n              <div className=\"page-options d-flex\">\n                <ShopAccountBack />\n              </div>\n          </Page.Header>\n          { children }\n        </Container>\n      </div>\n    </SiteWrapperShop>\n  )\n}\n\nexport default withTranslation()(withRouter(ShopAccountProfileBase))","// @flow\n\nimport React, { useContext} from 'react'\nimport { useQuery } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { v4 } from \"uuid\"\nimport moment from 'moment'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport {\n  Card,\n  Grid,\n  Table\n} from \"tabler-react\";\nimport { QUERY_ACCOUNT_SUBSCRIPTIONS } from \"./queries\"\nimport GET_USER_PROFILE from \"../../../../queries/system/get_user_profile\"\n\nimport ShopAccountSubscriptionsBase from \"./ShopAccountSubscriptionsBase\"\nimport ContentCard from \"../../../general/ContentCard\"\n\n\nfunction ShopAccountSubscriptions({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n\n  // Chain queries. First query user data and then query invoices for that user once we have the account Id.\n  const { loading: loadingUser, error: errorUser, data: dataUser } = useQuery(GET_USER_PROFILE)\n  const { loading, error, data, fetchMore } = useQuery(QUERY_ACCOUNT_SUBSCRIPTIONS, {\n    skip: loadingUser || errorUser || !dataUser,\n    variables: {\n      account: dataUser && dataUser.user ? dataUser.user.accountId : null\n    }\n  })\n  \n\n  if (loading || loadingUser || !data) return (\n    <ShopAccountSubscriptionsBase>\n      {t(\"general.loading_with_dots\")}\n    </ShopAccountSubscriptionsBase>\n  )\n  if (error || errorUser) return (\n    <ShopAccountSubscriptionsBase>\n      {t(\"shop.account.subscriptions.error_loading_data\")}\n    </ShopAccountSubscriptionsBase>\n  )\n\n  console.log(\"User data: ###\")\n  console.log(data)\n  const user = data.user\n  const subscriptions = data.accountSubscriptions\n\n  // Empty list\n  if (!subscriptions.edges.length) {\n    return (\n      <ShopAccountSubscriptionsBase accountName={user.fullName}>\n        <Grid.Row>\n          <Grid.Col md={12}>\n            <Card cardTitle={t('shop.account.subscriptions.title')} >\n              <Card.Body>\n                {t('shop.account.subscriptions.empty_list')}\n              </Card.Body>\n            </Card>\n          </Grid.Col>\n        </Grid.Row>\n      </ShopAccountSubscriptionsBase>\n    )  \n  }\n\n  // Populated list\n  return (\n    <ShopAccountSubscriptionsBase accountName={user.fullName}>\n      <Grid.Row>\n        <Grid.Col md={12}>\n          <ContentCard cardTitle={t('shop.account.subscriptions.title')}\n            // headerContent={headerOptions}\n            pageInfo={subscriptions.pageInfo}\n            onLoadMore={() => {\n              fetchMore({\n                variables: {\n                  after: subscriptions.pageInfo.endCursor\n                },\n                updateQuery: (previousResult, { fetchMoreResult }) => {\n                  const newEdges = fetchMoreResult.accountSubscriptions.edges\n                  const pageInfo = fetchMoreResult.accountSubscriptions.pageInfo\n\n                  return newEdges.length\n                    ? {\n                        // Put the new subscriptions at the end of the list and update `pageInfo`\n                        // so we have the new `endCursor` and `hasNextPage` values\n                        accountSubscriptions: {\n                          __typename: previousResult.accountSubscriptions.__typename,\n                          edges: [ ...previousResult.accountSubscriptions.edges, ...newEdges ],\n                          pageInfo\n                        }\n                      }\n                    : previousResult\n                }\n              })\n            }} >\n            <Table>\n              <Table.Header>\n                <Table.Row key={v4()}>\n                  <Table.ColHeader>{t('general.name')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.date_start')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.date_end')}</Table.ColHeader>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {subscriptions.edges.map(({ node }) => (\n                  <Table.Row key={v4()}>\n                    <Table.Col>\n                      {node.organizationSubscription.name}\n                    </Table.Col>\n                    <Table.Col>\n                      {moment(node.dateStart).format(dateFormat)}\n                    </Table.Col>\n                    <Table.Col>\n                      { (node.dateEnd) ? moment(node.dateEnd).format(dateFormat) : \"\" }\n                    </Table.Col>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          </ContentCard>\n        </Grid.Col>\n      </Grid.Row>\n    </ShopAccountSubscriptionsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopAccountSubscriptions))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\"\n\n\nconst ShopClassBookBack = ({ t }) => (\n  <Link to={\"/shop/classes\"} >\n    <Button color=\"primary btn-block mb-6\">\n      <Icon prefix=\"fe\" name=\"chevrons-left\" /> {t('general.back')}\n    </Button>\n  </Link>\n)\n\nexport default withTranslation()(withRouter(ShopClassBookBack))","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Container,\n  Tag,\n} from \"tabler-react\";\n\n\nfunction ShopCheckoutProgress({ t, match, history, checkoutProgress=\"\" }) {\n  let color_order = \"\" \n  let color_payment = \"\"\n  let color_complete = \"\"\n\n  switch(checkoutProgress) {\n    case \"order\":\n      color_order = \"info\"\n      break\n    case \"payment\":\n      color_order = \"success\"\n      color_payment = \"info\"\n      break      \n    case \"complete\":\n      color_order = \"success\"\n      color_payment = \"success\"\n      color_complete = \"success\"\n      break      \n  }\n\n  return (\n    <div className=\"d-flex justify-content-center mb-4\">\n    <Tag.List>\n      <Tag color={color_order} addOn={<Icon name=\"shopping-cart\"/>}>\n        {t(\"shop.checkout_progress.order\")} \n      </Tag>\n      <Tag color={color_payment} addOn={<Icon name=\"credit-card\" />}>\n        {t(\"shop.checkout_progress.payment\")} \n      </Tag>\n      <Tag color={color_complete} addOn={<Icon name=\"check\" />}>\n        {t(\"shop.checkout_progress.complete\")}\n      </Tag>\n    </Tag.List>\n    </div>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopCheckoutProgress))","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\n\nimport {\n  Page,\n  Grid,\n  Icon,\n  Container,\n} from \"tabler-react\";\nimport SiteWrapperShop from \"../SiteWrapperShop\"\nimport ShopCheckoutProgress from \"./ShopCheckoutProgress\"\n\n\nfunction ShopBase({ t, match, history, children, title, return_url, pageHeaderOptions=\"\", checkoutProgress=false }) {\n\n  return (\n    <SiteWrapperShop>\n      <div className=\"my-3 my-md-5\">\n        <Container>\n          <Page.Header title={title}>\n            <div className=\"page-options d-flex\">\n              {/* Back */}\n              {(return_url) ?\n                <Link to={return_url} \n                      className='btn btn-secondary mr-2'>\n                    <Icon prefix=\"fe\" name=\"arrow-left\" /> {t('general.back')} \n                </Link>\n                : \"\"\n              }\n              { pageHeaderOptions }\n            </div>\n          </Page.Header>\n            <Grid.Row>\n              <Grid.Col md={12}>\n                {(checkoutProgress) ?\n                  <ShopCheckoutProgress checkoutProgress={checkoutProgress} />\n                  : \"\" }\n                { children }\n              </Grid.Col>\n            </Grid.Row>\n          </Container>\n        </div>\n    </SiteWrapperShop>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopBase))","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport ShopBase from \"../../ShopBase\"\n\nfunction ShopClassBookBase({ t, match, history, children, pageHeaderOptions=\"\" }) {\n  \n  return (\n    <ShopBase title={t(\"shop.title\")} pageHeaderOptions={pageHeaderOptions}>\n      <h4>{t(\"shop.classes.book.title\")}</h4>\n        {children}\n    </ShopBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClassBookBase))","// @flow\n\nimport React from 'react'\nimport { useMutation } from '@apollo/client'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Button,\n  Icon,\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport { CREATE_SCHEDULE_ITEM_ATTENDANCE } from \"../../../schedule/classes/class/book/queries\"\n// import CSLS from \"../../../../../tools/cs_local_storage\"\n\n\nfunction ShopClassBookClasspassBtn({t, match, history, classpass}) {\n  console.log(classpass)\n  const schedule_item_id = match.params.class_id\n  const class_date = match.params.date\n\n  const createInput = {\n    \"scheduleItem\": schedule_item_id,\n    \"accountClasspass\": classpass.accountClasspass.id,\n    \"date\": class_date,\n    \"attendanceType\": \"CLASSPASS\",\n    \"onlineBooking\": true,\n    \"bookingStatus\": \"BOOKED\"\n  }\n\n  const [classCheckin, { data, loading, error, onCompleted }] = useMutation(CREATE_SCHEDULE_ITEM_ATTENDANCE)\n\n  if (loading) {\n    return \"Please wait...\"\n  }\n\n  if (error) {\n    return \"uh oh... error found\"\n  }\n\n  return (\n    <Button \n      block \n      outline \n      color=\"primary\" \n      onClick={() => classCheckin({\n        variables: { \"input\": createInput }, \n        refetchQueries: [\n          // {query: GET_SCHEDULE_CLASS_ATTENDANCE_QUERY, variables: get_attendance_list_query_variables(schedule_item_id, class_date)},\n        ]})\n        .then(({ data }) => {\n            console.log('got data', data);\n            // redirect to class booked page\n            console.log(\"Checkin success!\")\n            history.push(`/shop/classes/booked/${schedule_item_id}/${class_date}`)\n\n            // show message to user\n            // toast.success((t('schedule.classes.class.book.toast_success')), {\n            //   position: toast.POSITION.BOTTOM_RIGHT\n            // })\n          }).catch((error) => {\n            toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                position: toast.POSITION.BOTTOM_RIGHT\n              })\n            console.log('there was an error sending the query', error)\n          })}\n    >\n      {t(\"general.book\")} <Icon name=\"chevron-right\" />\n    </Button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClassBookClasspassBtn))\n\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport moment from 'moment'\n\nimport {\n  Grid,\n  Card,\n} from \"tabler-react\";\n\nimport ShopClassBookClasspassBtn from \"./ShopClassBookClasspassBtn\"\n\n\nfunction ShopClassBookClasspasses({ t, match, history, classpasses }) {\n  console.log(\"CLASSPASSES\")\n  console.log(classpasses)\n\n  return (\n    classpasses.map((classpass) =>(\n      <Grid.Col md={3}>\n        <Card \n          statusColor=\"blue\"\n          title={t(\"general.classpass\")} >\n        <Card.Body>\n          <b>{classpass.accountClasspass.organizationClasspass.name}</b><br />\n          <span className=\"text-muted\">\n            {t('general.classes_remaining')}: {classpass.accountClasspass.classesRemainingDisplay} <br />\n            {t('general.valid_until')}: {moment(classpass.accountClasspass.dateEnd).format('LL')} <br />\n          </span>\n        </Card.Body>\n        <Card.Footer>\n          {(!classpass.allowed) ? t('schedule.classes.class.book.classpass_not_allowed') :\n            <ShopClassBookClasspassBtn classpass={classpass} />\n          }\n        </Card.Footer>\n        </Card>\n      </Grid.Col>\n    ))\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClassBookClasspasses))\n\n","// @flow\n\nimport React from 'react'\nimport { useMutation } from '@apollo/client'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Button,\n  Icon,\n} from \"tabler-react\";\nimport { toast } from 'react-toastify'\n\nimport { CREATE_SCHEDULE_ITEM_ATTENDANCE } from \"../../../schedule/classes/class/book/queries\"\n// import CSLS from \"../../../../../tools/cs_local_storage\"\n\n\nfunction ShopClassBookSubscriptionBtn({t, match, history, subscription}) {\n  console.log(subscription)\n  const schedule_item_id = match.params.class_id\n  const class_date = match.params.date\n\n  const createInput = {\n    \"scheduleItem\": schedule_item_id,\n    \"accountSubscription\": subscription.accountSubscription.id,\n    \"date\": class_date,\n    \"attendanceType\": \"SUBSCRIPTION\",\n    \"onlineBooking\": true,\n    \"bookingStatus\": \"BOOKED\"\n  }\n\n  const [classCheckin, { data, loading, error, onCompleted }] = useMutation(CREATE_SCHEDULE_ITEM_ATTENDANCE)\n\n  if (loading) {\n    return \"Please wait...\"\n  }\n\n  if (error) {\n    return \"uh oh... error found\"\n  }\n\n  return (\n    <Button \n      block \n      outline \n      color=\"primary\" \n      onClick={() => classCheckin({\n        variables: { \"input\": createInput }, \n        refetchQueries: [\n          // {query: GET_SCHEDULE_CLASS_ATTENDANCE_QUERY, variables: get_attendance_list_query_variables(schedule_item_id, class_date)},\n        ]})\n        .then(({ data }) => {\n            console.log('got data', data);\n            // redirect to class booked page\n            console.log(\"Checkin success!\")\n            history.push(`/shop/classes/booked/${schedule_item_id}/${class_date}`)\n\n            // show message to user\n            // toast.success((t('schedule.classes.class.book.toast_success')), {\n            //   position: toast.POSITION.BOTTOM_RIGHT\n            // })\n          }).catch((error) => {\n            toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                position: toast.POSITION.BOTTOM_RIGHT\n              })\n            console.log('there was an error sending the query', error)\n          })}\n    >\n      {t(\"general.book\")} <Icon name=\"chevron-right\" />\n    </Button>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClassBookSubscriptionBtn))\n\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport moment from 'moment'\n\nimport {\n  Grid,\n  Card,\n} from \"tabler-react\";\n\nimport ShopClassBookSubscriptionBtn from \"./ShopClassBookSubscriptionBtn\"\n\n\nfunction ShopClassBookSubscriptions({ t, match, history, subscriptions }) {\n  console.log(\"SUBSCRIPTIONS\")\n  console.log(subscriptions)\n\n  return (\n    subscriptions.map((subscription) =>(\n      <Grid.Col md={3}>\n        <Card \n          statusColor=\"blue\"\n          title={t(\"general.subscription\")} >\n        <Card.Body>\n          <b>{subscription.accountSubscription.organizationSubscription.name}</b><br />\n          <span className=\"text-muted\">\n            {t(\"general.credits_remaining\")}: {subscription.accountSubscription.creditTotal}\n          </span>\n        </Card.Body>\n        <Card.Footer>\n          {(!subscription.allowed) ? t('schedule.classes.class.book.subscription_not_allowed') :\n            <ShopClassBookSubscriptionBtn subscription={subscription} />\n          }\n        </Card.Footer>\n        </Card>\n      </Grid.Col>\n    ))\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClassBookSubscriptions))\n\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport {\n  Button,\n  Icon\n} from \"tabler-react\";\n\n\nfunction ShopClassBookPriceBtn({t, match, history, price}) {\n  console.log(price)\n  const classpassId = price.id\n  const scheduleItemId = match.params.class_id\n  const classDate = match.params.date\n\n  return (\n    <Link to={`/shop/classpass/${classpassId}/${scheduleItemId}/${classDate}`}>\n    <Button \n      block \n      outline \n      color=\"primary\" \n    >\n      {t(\"shop.classes.book.pay_and_book\")} <Icon name=\"chevron-right\" />\n    </Button>\n    </Link>\n  )\n}\n\nexport default withTranslation()(withRouter(ShopClassBookPriceBtn))\n\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Card,\n  Grid,\n} from \"tabler-react\";\n\nimport ShopClassBookPriceBtn from './ShopClassBookPriceBtn'\n\nfunction ShopClassBookPriceDropin({ \n  t, \n  match, \n  history, \n  priceDropin\n}) {\n\n  return (\n    <Grid.Col md={3}>\n      <Card \n        statusColor=\"blue\"\n        title={t(\"general.dropin\")} >\n      <Card.Body>\n        <b>{priceDropin.priceDisplay}</b><br />\n        {t(\"shop.classes.book.dropin_pay_and_book\")} <br />\n      </Card.Body>\n      <Card.Footer>\n        <ShopClassBookPriceBtn price={priceDropin} />\n      </Card.Footer>\n      </Card>\n    </Grid.Col>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClassBookPriceDropin))\n\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Card,\n  Grid,\n} from \"tabler-react\";\n\nimport ShopClassBookPriceBtn from './ShopClassBookPriceBtn'\n\nfunction ShopClassBookPriceTrial({ \n  t, \n  match, \n  history, \n  priceTrial\n}) {\n\n  return (\n    <Grid.Col md={3}>\n      <Card \n        statusColor=\"green\"\n        title={t(\"general.trial\")} >\n      <Card.Body>\n        <b>{priceTrial.priceDisplay}</b><br />\n        {t(\"shop.classes.book.trial_pay_and_book\")} <br />\n      </Card.Body>\n      <Card.Footer>\n        <ShopClassBookPriceBtn price={priceTrial} />\n      </Card.Footer>\n      </Card>\n    </Grid.Col>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClassBookPriceTrial))\n\n","import { gql } from \"@apollo/client\"\n\n\nexport const GET_BOOKING_OPTIONS_QUERY = gql`\n  query ScheduleClassBookingOptions($scheduleItem:ID!, $date:Date!, $listType:String!) {\n    scheduleClass(scheduleItemId: $scheduleItem, date:$date) {\n      bookingStatus\n    }\n    scheduleClassBookingOptions(scheduleItem: $scheduleItem, date:$date, listType:$listType) {\n      date\n      alreadyBooked\n      account {\n        id\n        fullName\n      }\n      scheduleItem {\n        frequencyType\n        frequencyInterval\n        organizationLocationRoom {\n          id\n          name\n          organizationLocation {\n            id\n            name\n          }\n        }\n        organizationClasstype {\n          id\n          name\n        }\n        organizationLevel {\n          id\n          name\n        }\n        dateStart\n        dateEnd\n        timeStart\n        timeEnd\n      }\n    \tscheduleItemPrices {\n        organizationClasspassDropin {\n          id\n          name\n          priceDisplay\n        }\n        organizationClasspassTrial {\n          id\n          name\n          priceDisplay\n        }\n      }\n      classpasses {\n        bookingType \n        allowed\n        accountClasspass {\n          id\n          dateStart\n          dateEnd\n          classesRemainingDisplay\n          organizationClasspass {\n            id\n            name\n          }\n        }\n      }\n      subscriptions {\n        bookingType\n        allowed\n        accountSubscription {\n          id\n          dateStart\n          dateEnd\n          organizationSubscription {\n            id\n            name\n          }\n          creditTotal\n        }\n      }\n    }\n  }\n`\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery, useMutation, useLazyQuery } from '@apollo/client'\nimport { gql } from \"@apollo/client\"\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport {\n  Alert,\n  Page,\n  Grid,\n  Icon,\n  Dimmer,\n  Badge,\n  Button,\n  Card,\n  Container,\n  Table,\n  StampCard\n} from \"tabler-react\";\nimport { TimeStringToJSDateOBJ } from '../../../../tools/date_tools'\n// import { confirmAlert } from 'react-confirm-alert'; // Import\nimport { toast } from 'react-toastify'\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport ShopClassBookBack from \"./ShopClassBookBack\"\nimport ShopClassBookBase from \"./ShopClassBookBase\"\nimport ShopClassBookClasspasses from './ShopClassBookClasspasses'\nimport ShopClassBookSubscriptions from \"./ShopClassBookSubscriptions\"\nimport ShopClassBookPriceDropin from \"./ShopClassBookPriceDropin\"\nimport ShopClassBookPriceTrial from \"./ShopClassBookPriceTrial\"\n\nimport { GET_BOOKING_OPTIONS_QUERY } from \"./queries\"\n// import CSLS from \"../../../../../tools/cs_local_storage\"\n\n\nfunction ShopClassBook({ t, match, history }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n\n  const schedule_item_id = match.params.class_id\n  const class_date = match.params.date\n  const { loading, error, data } = useQuery(\n    GET_BOOKING_OPTIONS_QUERY, {\n      variables: {\n        scheduleItem: schedule_item_id,\n        date: class_date,\n        listType: \"SHOP_BOOK\"\n      }\n    }\n  )\n\n  // Loading\n  if (loading) return (\n    <ShopClassBookBase pageHeaderOptions={<ShopClassBookBack />}>\n      <p>{t('general.loading_with_dots')}</p>\n    </ShopClassBookBase>\n  )\n  // Error\n  if (error) {\n    console.log(error)\n    return (\n      <ShopClassBookBase pageHeaderOptions={<ShopClassBookBack />}>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ShopClassBookBase>\n    )\n  }\n  \n  console.log(data)\n  const scheduleClass = data.scheduleClass\n\n  const alreadyBooked = data.scheduleClassBookingOptions.alreadyBooked\n  const account = data.scheduleClassBookingOptions.account\n  const classpasses = data.scheduleClassBookingOptions.classpasses\n  const subscriptions = data.scheduleClassBookingOptions.subscriptions\n  const prices = data.scheduleClassBookingOptions.scheduleItemPrices\n  const scheduleItem = data.scheduleClassBookingOptions.scheduleItem\n\n  const location = scheduleItem.organizationLocationRoom.organizationLocation.name\n  const classType = scheduleItem.organizationClasstype.name\n  const timeStart = moment(TimeStringToJSDateOBJ(scheduleItem.timeStart)).format(timeFormat) \n  const timeEnd = moment(TimeStringToJSDateOBJ(scheduleItem.timeEnd)).format(timeFormat) \n  const date_display = moment(class_date).format(dateFormat)\n  // const subtitle = class_subtitle({\n  //   t: t,\n  //   location: , \n  //   locationRoom: scheduleItem.organizationLocationRoom.name,\n  //   classtype: , \n  //   timeStart: , \n  //   date: class_date\n  // })\n  const class_info = date_display + ' ' + timeStart + ' - ' + timeEnd + ', ' + classType + ' ' + t(\"general.at\") + ' ' + location\n\n  console.log(prices)\n  console.log(\"ALREADY BOOKED\")\n  console.log(alreadyBooked)\n\n  let content\n\n  switch(scheduleClass.bookingStatus) {\n    case \"NOT_YET_OPEN\":\n      const bookingOpenOn = scheduleClass.bookingOpenOn\n      content = <Alert type=\"primary\" hasExtraSpace>\n          <h5>{t(\"shop.classes.book.unable_to_show_booking_options\")}</h5>\n          {t(\"shop.classes.book.class_booking_status.open_on\") + \" \" + moment(bookingOpenOn).format(dateFormat)}\n        </Alert>\n      break\n    case \"CANCELLED\":\n      content = <Alert type=\"primary\" hasExtraSpace>\n          <h5>{t(\"shop.classes.book.unable_to_show_booking_options\")}</h5>\n          {t(\"shop.classes.book.class_booking_status.cancelled\")}\n        </Alert>\n      break\n    case \"FINISHED\":\n      content = <Alert type=\"primary\" hasExtraSpace>\n          <h5>{t(\"shop.classes.book.unable_to_show_booking_options\")}</h5>\n          {t(\"shop.classes.book.class_booking_status.finished\")}\n        </Alert>\n      break\n    case \"ONGOING\":\n      content = <Alert type=\"primary\" hasExtraSpace>\n          <h5>{t(\"shop.classes.book.unable_to_show_booking_options\")}</h5>\n          {t(\"shop.classes.book.class_booking_status.ongoing\")}\n        </Alert>\n      break\n      break\n    case \"FULL\":\n      content = <Alert type=\"primary\" hasExtraSpace>\n          <h5>{t(\"shop.classes.book.unable_to_show_booking_options\")}</h5>\n          {t(\"shop.classes.book.class_booking_status.full\")}\n        </Alert>\n      break\n    case \"OK\":\n      content = <Grid.Row cards deck>\n        <ShopClassBookSubscriptions subscriptions={subscriptions} />\n        <ShopClassBookClasspasses classpasses={classpasses} />\n        {(prices) ?\n          (prices.organizationClasspassDropin) ? \n            <ShopClassBookPriceDropin priceDropin={prices.organizationClasspassDropin}/> : \"\" \n        : \"\" }\n        {(prices) ?\n          (prices.organizationClasspassTrial) ? \n            <ShopClassBookPriceTrial priceTrial={prices.organizationClasspassTrial}/> : \"\" \n          : \"\" } \n      </Grid.Row>\n      break\n    default:\n      content = \"\"\n  }\n\n  return (\n    <ShopClassBookBase pageHeaderOptions={<ShopClassBookBack />}>\n      <Grid.Row>\n        <Grid.Col md={12}>\n          { class_info }\n          <div className=\"mt-6\">\n            {(alreadyBooked) ?\n              <Alert type=\"primary\" hasExtraSpace>\n                <h5>{t(\"shop.classes.book.unable_to_show_booking_options\")}</h5>\n                {t(\"shop.classes.book.already_booked\")}\n              </Alert>\n              : content\n            }\n          </div>\n        </Grid.Col>\n      </Grid.Row>\n    </ShopClassBookBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClassBook))\n","import React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport ShopBase from \"../../ShopBase\"\n\nfunction ShopClassBookedBase({ t, match, history, children, pageHeaderOptions=\"\" }) {\n  \n  return (\n    <ShopBase title={t(\"shop.title\")} pageHeaderOptions={pageHeaderOptions}>\n      <h4>{t(\"shop.classes.booked.title\")}</h4>\n        {children}\n    </ShopBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClassBookedBase))","import { gql } from \"@apollo/client\"\n\n\nexport const GET_CLASS_QUERY = gql`\n  query ScheduleClass($scheduleItemId: ID!, $date: Date!) {\n    scheduleClass(scheduleItemId: $scheduleItemId, date:$date) {\n      scheduleItemId \n      date\n      organizationLocationRoom {\n        organizationLocation {\n          name\n        }\n      }\n      organizationClasstype {\n        name\n      }\n      timeStart\n      timeEnd\n    }\n  }\n`\n\n\nexport const CREATE_ORDER = gql`\n  mutation CreateFinanceOrder($input: CreateFinanceOrderInput!) {\n    createFinanceOrder(input: $input) {\n      financeOrder {\n        id\n      }\n    }\n  }\n`\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from '@apollo/client'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Icon\n} from \"tabler-react\";\nimport { TimeStringToJSDateOBJ } from '../../../../tools/date_tools'\n// import { confirmAlert } from 'react-confirm-alert'; // Import\n// import { toast } from 'react-toastify'\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport ShopClassBookedBase from \"./ShopClassBookedBase\"\nimport { GET_CLASS_QUERY } from \"../../queries\"\n// import CSLS from \"../../../../../tools/cs_local_storage\"\n\nimport { DisplayClassInfo } from \"../../tools\"\n\n\nfunction ShopClassBook({ t, match, history }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n\n  const schedule_item_id = match.params.class_id\n  const class_date = match.params.date\n  const { loading, error, data } = useQuery(\n    GET_CLASS_QUERY, {\n      variables: {\n        scheduleItemId: schedule_item_id,\n        date: class_date,\n      }\n    }\n  )\n\n  // Loading\n  if (loading) return (\n    <ShopClassBookedBase>\n      <p>{t('general.loading_with_dots')}</p>\n    </ShopClassBookedBase>\n  )\n  // Error\n  if (error) {\n    console.log(error)\n    return (\n      <ShopClassBookedBase>\n        <p>{t('general.error_sad_smiley')}</p>\n      </ShopClassBookedBase>\n    )\n  }\n  \n  console.log(data)\n  // TODO: display class info in a card\n\n  \n  return (\n    <ShopClassBookedBase>\n      <Grid.Row cards deck>\n        <Grid.Col md={6}>\n          <Card title={t(\"shop.classes.booked.class\")}>\n            <Card.Body>\n              {t(\"shop.classes.booked.class_explanation\")} <br /><br />\n              <DisplayClassInfo \n                t={t} \n                classDate={class_date}\n                classData={data} \n                dateFormat={dateFormat} \n                timeFormat={timeFormat}\n              />\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={6}>\n          <Card title={t(\"shop.classes.booked.class_info\")}>\n            <Card.Body>\n            Other info here...\n            </Card.Body>\n            <Card.Footer>\n              <Link to={\"/shop/account\"}>\n                <Button\n                  outline\n                  block\n                  color=\"success\"\n                >\n                  {t(\"general.continue\")} <Icon name=\"chevron-right\" />\n                </Button>\n              </Link>\n            </Card.Footer>\n          </Card>\n        </Grid.Col>\n      </Grid.Row>\n    </ShopClassBookedBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClassBook))\n\n","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Icon,\n  List\n} from \"tabler-react\";\nimport ShopBase from \"../../ShopBase\"\n\nfunction ShopClassesScheduleBase({ t, match, history, children, pageHeaderOptions=\"\" }) {\n  \n  return (\n    <ShopBase title={t(\"shop.title\")} pageHeaderOptions={pageHeaderOptions}>\n      <h4>{t(\"shop.classes.title\")}</h4>\n        {children}\n    </ShopBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClassesScheduleBase))","import CSLS from \"../../../../tools/cs_local_storage\"\n\nexport function get_list_query_variables() {\n    let orderBy\n    let organizationClasstype\n    let organizationLevel\n    let organizationLocation\n  \n    let queryVars = {\n      attendanceCountType: \"ATTENDING_AND_BOOKED\",\n      dateFrom: localStorage.getItem(CSLS.SHOP_CLASSES_DATE_FROM), \n      dateUntil: localStorage.getItem(CSLS.SHOP_CLASSES_DATE_UNTIL),\n    }\n  \n    // orderBy = localStorage.getItem(CSLS.SHOP_CLASSES_ORDER_BY)\n    // if (orderBy) {\n    //   queryVars.orderBy = orderBy\n    // }\n  \n    organizationClasstype = localStorage.getItem(CSLS.SHOP_CLASSES_FILTER_CLASSTYPE)\n    if (organizationClasstype) {\n      queryVars.organizationClasstype = organizationClasstype\n    } else {\n      queryVars.organizationClasstype = \"\"\n    }\n  \n    organizationLevel = localStorage.getItem(CSLS.SHOP_CLASSES_FILTER_LEVEL)\n    if (organizationLevel) {\n      queryVars.organizationLevel = organizationLevel\n    } else {\n      queryVars.organizationLevel = \"\"\n    }\n  \n    organizationLocation = localStorage.getItem(CSLS.SHOP_CLASSES_FILTER_LOCATION)\n    if (organizationLocation) {\n      queryVars.organizationLocation = organizationLocation\n    } else {\n      queryVars.organizationLocation = \"\"\n    }\n  \n    console.log(queryVars)\n  \n    return queryVars\n  }\n  ","// @flow\n\nimport React from 'react'\nimport { v4 } from \"uuid\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\n\nimport CSLS from \"../../../../tools/cs_local_storage\"\nimport { get_list_query_variables } from './tools'\n\nimport { \n  Grid,\n} from \"tabler-react\";\n\n\n\nfunction getDefaultValue(value) {\n  let defaultValue = localStorage.getItem(value)\n  if (defaultValue) {\n    return defaultValue\n  } else {\n    return \"\"\n  }\n}\n\n\nfunction updateLocalStorageAndRefetch(key, value, refetch) {\n  localStorage.setItem(key, value)\n  refetch(get_list_query_variables())\n\n}\n\nconst selectClass = \"form-control custom-select mb-2\"\n\nconst ShopClassesScheduleFilter = ({ t, history, data, refetch }) => (\n  <Grid.Row>\n    <Grid.Col md={4}>\n      {/* Locations */}\n      <select \n        className={selectClass}\n        defaultValue={getDefaultValue(CSLS.SHOP_CLASSES_FILTER_LOCATION)}\n        onChange={ (event) => {\n          updateLocalStorageAndRefetch(\n            CSLS.SHOP_CLASSES_FILTER_LOCATION,\n            event.target.value,\n            refetch\n          )\n        }}\n      >\n        <option value=\"\" key={v4()}>{t(\"shop.classes.filter_all_locations\")}</option>\n        {data.organizationLocations.edges.map(({ node }) =>\n          <option value={node.id} key={v4()}>{node.name}</option>\n        )}\n      </select>\n    </Grid.Col>\n    <Grid.Col md={4}>\n      {/* Classtypes */}\n      <select \n        className={selectClass}\n        defaultValue={getDefaultValue(CSLS.SHOP_CLASSES_FILTER_CLASSTYPE)}\n        onChange={ (event) => {\n          updateLocalStorageAndRefetch(\n            CSLS.SHOP_CLASSES_FILTER_CLASSTYPE,\n            event.target.value,\n            refetch\n          )\n        }}\n      >\n        <option value=\"\" key={v4()}>{t(\"shop.classes.filter_all_classtypes\")}</option>\n        {data.organizationClasstypes.edges.map(({ node }) =>\n          <option value={node.id} key={v4()}>{node.name}</option>\n        )}\n      </select>\n    </Grid.Col>\n    <Grid.Col md={4}>\n      {/* Levels */}\n      <select \n        className={selectClass}\n        defaultValue={getDefaultValue(CSLS.SHOP_CLASSES_FILTER_LEVEL)}\n        onChange={ (event) => {\n          updateLocalStorageAndRefetch(\n            CSLS.SHOP_CLASSES_FILTER_LEVEL,\n            event.target.value,\n            refetch\n          )\n        }}\n      >\n        <option value=\"\" key={v4()}>{t(\"shop.classes.filter_all_levels\")}</option>\n        {data.organizationLevels.edges.map(({ node }) =>\n          <option value={node.id} key={v4()}>{node.name}</option>\n        )}\n      </select>\n    </Grid.Col>\n  </Grid.Row>\n);\n\nexport default withTranslation()(withRouter(ShopClassesScheduleFilter))","// @flow\n\nimport React, { useContext } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\nimport moment from 'moment'\n\nimport CSLS from \"../../../../tools/cs_local_storage\"\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport {\n  Button,\n  Icon,\n} from \"tabler-react\";\n\n\nfunction ShopClassesScheduleButtonBook({ t, match, history, scheduleItemId, classDate, bookingOpenOn, bookingStatus }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n\n  let buttonBook\n  // Uncomment the line below when testing the book component statuses. (Development only)\n  // bookingStatus = \"OK\"\n\n  switch(bookingStatus) {\n    case \"NOT_YET_OPEN\":\n      buttonBook = <span className=\"pull-right\">\n          {t(\"shop.classes.class_booking_status.open_on\") + \" \" + moment(bookingOpenOn).format(dateFormat)}\n        </span>\n      break\n    case \"CANCELLED\":\n      buttonBook = <span className=\"pull-right\">\n          {t(\"shop.classes.class_booking_status.cancelled\")}\n        </span>\n      break\n    case \"FINISHED\":\n      buttonBook = <span className=\"pull-right\">\n          {t(\"shop.classes.class_booking_status.finished\")}\n        </span>\n      break\n    case \"ONGOING\":\n      buttonBook = <span className=\"pull-right\">\n          {t(\"shop.classes.class_booking_status.ongoing\")}\n        </span>\n      break\n      break\n    case \"FULL\":\n      buttonBook = <span className=\"pull-right\">\n          {t(\"shop.classes.class_booking_status.full\")}\n        </span>\n      break\n    case \"OK\":\n      buttonBook = <Link to={`/shop/classes/book/${scheduleItemId}/${classDate}`}>\n          <Button className=\"pull-right\" color=\"primary\" outline>\n            {t(\"general.book\")} <Icon name=\"chevron-right\" />\n          </Button>\n        </Link>\n      break\n    \n    default:\n      buttonBook = \"\"\n  }\n  \n  return buttonBook\n}\n\n\nexport default withTranslation()(withRouter(ShopClassesScheduleButtonBook))\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\nimport moment from 'moment'\n\nimport CSLS from \"../../../../tools/cs_local_storage\"\nimport AppSettingsContext from '../../../context/AppSettingsContext'\n\nimport {\n  Button,\n  Card, \n  Grid,\n  Icon,\n  List,\n  Media,\n  Table,\n} from \"tabler-react\";\nimport ShopClassesScheduleBase from \"./ShopClassesScheduleBase\"\nimport ShopClassesScheduleFilter from \"./ShopClassesScheduleFilter\"\nimport ShopClassesScheduleButtonBook from \"./ShopClassesScheduleButtonBook\"\nimport CSDatePicker from \"../../../ui/CSDatePicker\"\n\nimport { GET_CLASSES_QUERY } from \"../../../schedule/classes/queries\"\n\nimport { get_list_query_variables } from './tools'\n\n\n\n// Set some initial values for dates, if not found\nif (!localStorage.getItem(CSLS.SHOP_CLASSES_DATE_FROM)) {\n  console.log('date from not found... defaulting to today...')\n  localStorage.setItem(CSLS.SHOP_CLASSES_DATE_FROM, moment().format('YYYY-MM-DD')) \n  localStorage.setItem(CSLS.SHOP_CLASSES_DATE_UNTIL, moment().add(6, 'days').format('YYYY-MM-DD')) \n} else {\n  const date_from  = moment(localStorage.getItem(CSLS.SHOP_CLASSES_DATE_FROM))\n  if (date_from.isBefore(moment(), \"day\")) {\n    localStorage.setItem(CSLS.SHOP_CLASSES_DATE_FROM, moment().format('YYYY-MM-DD')) \n    localStorage.setItem(CSLS.SHOP_CLASSES_DATE_UNTIL, moment().add(6, 'days').format('YYYY-MM-DD')) \n  }\n}\n\n\n\nfunction ShopClassesSchedule({ t, match, history }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n\n  const title = t(\"shop.home.title\")\n  const { loading, error, data, refetch } = useQuery(GET_CLASSES_QUERY, {\n    variables: get_list_query_variables()\n  })\n\n  if (loading) return (\n    <ShopClassesScheduleBase title={title} >\n      {t(\"general.loading_with_dots\")}\n    </ShopClassesScheduleBase>\n  )\n  if (error) return (\n    <ShopClassesScheduleBase title={title}>\n      {t(\"shop.classes.error_loading\")}\n    </ShopClassesScheduleBase>\n  )\n\n  console.log(data)\n  console.log(data.scheduleClasses)\n\n  return (\n    <ShopClassesScheduleBase \n      title={title}\n      pageHeaderOptions={\n        <Button.List className=\"schedule-list-page-options-btn-list\">\n          <Button \n            icon=\"chevron-left\"\n            color=\"secondary\"\n            disabled={ (moment(localStorage.getItem(CSLS.SHOP_CLASSES_DATE_FROM)).subtract(7, 'days').isBefore(moment(), \"day\")) }\n            onClick={ () => {\n              let prevWeekFrom = moment(localStorage.getItem(CSLS.SHOP_CLASSES_DATE_FROM)).subtract(7, 'days')\n              let prevWeekUntil = moment(prevWeekFrom).add(6, 'days')\n              \n              localStorage.setItem(CSLS.SHOP_CLASSES_DATE_FROM, prevWeekFrom.format('YYYY-MM-DD')) \n              localStorage.setItem(CSLS.SHOP_CLASSES_DATE_UNTIL, prevWeekUntil.format('YYYY-MM-DD')) \n\n              refetch(get_list_query_variables())\n          }} />\n          <Button \n            color=\"secondary\"\n            onClick={ () => {\n              let currentWeekFrom = moment()\n              let currentWeekUntil = moment(currentWeekFrom).add(6, 'days')\n\n              localStorage.setItem(CSLS.SHOP_CLASSES_DATE_FROM, currentWeekFrom.format('YYYY-MM-DD')) \n              localStorage.setItem(CSLS.SHOP_CLASSES_DATE_UNTIL, currentWeekUntil.format('YYYY-MM-DD')) \n              \n              refetch(get_list_query_variables())\n          }} > \n            {t(\"general.today\")}\n          </Button>\n          <Button \n            icon=\"chevron-right\"\n            color=\"secondary\"\n            onClick={ () => {\n              let nextWeekFrom = moment(localStorage.getItem(CSLS.SHOP_CLASSES_DATE_FROM)).add(7, 'days')\n              let nextWeekUntil = moment(nextWeekFrom).add(6, 'days')\n              \n              localStorage.setItem(CSLS.SHOP_CLASSES_DATE_FROM, nextWeekFrom.format('YYYY-MM-DD')) \n              localStorage.setItem(CSLS.SHOP_CLASSES_DATE_UNTIL, nextWeekUntil.format('YYYY-MM-DD')) \n\n              refetch(get_list_query_variables())\n          }} />\n        </Button.List> \n      }\n    >\n      \n      <ShopClassesScheduleFilter data={data} refetch={refetch} />\n      {data.scheduleClasses.map(({ date, bookingOpenOn, classes }) =>\n        <Grid.Row key={v4()}>\n          <Grid.Col md={12}>\n              <Card>\n                <Card.Header>\n                  <Card.Title>\n                    <b>{moment(date).format(\"dddd\")}</b> {' '}\n                    <span className=\"text-muted\">\n                      {moment(date).format(\"LL\")} \n                    </span>\n                  </Card.Title>\n                </Card.Header>                \n                {!(classes.length) ? \n                  <Card.Body>\n                    <p>{t('schedule.classes.empty_list')}</p>\n                  </Card.Body> :\n                  <Table cards>\n                    <Table.Body>\n                      {classes.map(({ \n                        scheduleItemId, \n                        frequencyType,\n                        date, \n                        status,\n                        description,\n                        account, \n                        role,\n                        account2,\n                        role2,\n                        organizationLocationRoom, \n                        organizationClasstype, \n                        organizationLevel,\n                        timeStart, \n                        timeEnd,\n                        displayPublic,\n                        bookingStatus }) => (\n                          <Table.Row>\n                            <Table.Col>\n                            <h4>\n                              {moment(date + ' ' + timeStart).format(timeFormat)} {' - '}\n                              {moment(date + ' ' + timeEnd).format(timeFormat)} { ' ' }\n                            </h4> \n                            { organizationClasstype.name } { (account) ? ' ' + t(\"general.with\") + ' ' + account.fullName : \"\" } <br />\n                            <span className=\"text-muted\">{ organizationLocationRoom.organizationLocation.name }</span>\n                            </Table.Col>\n                            <Table.Col>\n                              <ShopClassesScheduleButtonBook\n                                scheduleItemId={scheduleItemId}\n                                classDate={date}\n                                bookingOpenOn={bookingOpenOn}\n                                bookingStatus={bookingStatus}\n                              />\n                            </Table.Col>\n                          </Table.Row>\n                        )\n                      )}\n                    </Table.Body>\n                  </Table>\n                }\n              </Card>\n          </Grid.Col>\n        </Grid.Row>\n      )}\n\n    </ShopClassesScheduleBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClassesSchedule))\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport ShopBase from \"../ShopBase\"\n\nfunction ShopContactBase({ t, match, history, children, pageHeaderOptions=\"\" }) {\n  \n  return (\n    <ShopBase title={t(\"shop.title\")} pageHeaderOptions={pageHeaderOptions}>\n      <h4>{t(\"shop.contact.title\")}</h4>\n        {children}\n    </ShopBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopContactBase))","// @flow\n\nimport React, { useContext } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\nimport moment from 'moment'\n\n\nimport {\n  Button,\n  Card, \n  Grid,\n  Icon,\n  List,\n  Media,\n  Table,\n} from \"tabler-react\";\nimport ShopContactBase from \"./ShopContactBase\"\n\nimport { GET_ORGANIZATION_QUERY } from \"../../organization/organization/queries\"\n\n\nfunction ShopContact({ t, match, history }) {\n  // The ID is fixed, as there's only one organization supported at the moment... easy peasy.\n  const { loading, error, data, refetch } = useQuery(GET_ORGANIZATION_QUERY, {\n    variables: { id: \"T3JnYW5pemF0aW9uTm9kZToxMDA=\"}\n  })\n\n  if (loading) return (\n    <ShopContactBase>\n      {t(\"general.loading_with_dots\")}\n    </ShopContactBase>\n  )\n  if (error) return (\n    <ShopContactBase>\n      {t(\"shop.classpasses.error_loading\")}\n    </ShopContactBase>\n  )\n\n  console.log(data)\n  console.log(data.organization)\n\n  const organization = data.organization\n\n  return (\n    <ShopContactBase>\n      <Card title={organization.name}>\n        <Card.Body>\n          <div dangerouslySetInnerHTML={{ __html: organization.address}} />\n          <p>{organization.email} <br /> {organization.phone}</p>\n          <p>{organization.registration} <br /> {organization.taxRegistration}</p>\n        </Card.Body>\n      </Card>\n    </ShopContactBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopContact))\n","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Icon,\n  List\n} from \"tabler-react\";\nimport ShopBase from \"../ShopBase\"\n\nfunction ShopEventsBase({ t, match, history, children }) {\n  \n  return (\n    <ShopBase title={t(\"shop.title\")}>\n      <h4>{t(\"shop.events.title\")}</h4>\n        {children}\n    </ShopBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopEventsBase))","import { gql } from \"@apollo/client\"\n\nexport const GET_SCHEDULE_EVENTS_QUERY = gql`\n  query ScheduleEvents($before:String, $after:String) {\n    scheduleEvents(first: 100, before: $before, after:$after, archived:false, displayShop:true) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          archived\n          displayPublic\n          displayShop\n          autoSendInfoMail\n          organizationLocation {\n            id\n            name\n          }\n          name\n          tagline\n          preview\n          description\n          organizationLevel {\n            id\n            name\n          }\n          teacher {\n            id \n            fullName\n          }\n          teacher2 {\n            id\n            fullName\n          }\n          dateStart\n          dateEnd\n          timeStart\n          timeEnd\n          infoMailContent\n          scheduleItems {\n            edges {\n              node {\n                id\n              }\n            }\n          }\n          media(first: 1) {\n            pageInfo {\n              hasNextPage\n              hasPreviousPage\n              startCursor\n              endCursor\n            }\n            edges {\n              node {\n                urlImageThumbnailSmall\n                urlImageThumbnailLarge\n              }\n            }\n          }\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  }\n`\n","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\n\nimport {\n  Button,\n  Grid,\n  Icon,\n  List,\n  GalleryCard\n} from \"tabler-react\";\nimport ShopEventsBase from \"./ShopEventsBase\"\n// import ShopClasspassPricingCard from \"../classpass/ShopClasspassPricingCard\"\n\nimport { GET_SCHEDULE_EVENTS_QUERY } from \"./queries\"\n\n// Example:\n// https://github.com/tabler/tabler-react/blob/master/example/src/interface/PricingCardsPage.react.js\n\n\nfunction ShopEvents({ t, match, history }) {\n  const title = t(\"shop.home.title\")\n  const { loading, error, data } = useQuery(GET_SCHEDULE_EVENTS_QUERY)\n\n  if (loading) return (\n    <ShopEventsBase title={title} >\n      {t(\"general.loading_with_dots\")}\n    </ShopEventsBase>\n  )\n  if (error) return (\n    <ShopEventsBase title={title}>\n      {t(\"shop.classpasses.error_loading\")}\n    </ShopEventsBase>\n  )\n\n  console.log(data)\n  const scheduleEvents = data.scheduleEvents\n  console.log(scheduleEvents)\n\n  return (\n    <ShopEventsBase title={title}>\n        <Grid.Row>\n          {scheduleEvents.edges.map(({ node }) => (\n            <Grid.Col xs={12} sm={12} md={6} lg={4} key={v4()}>\n              <GalleryCard>\n                {(node.media.edges.length) ?\n                  <GalleryCard.Image \n                    src={(node.media.edges.length) ? node.media.edges[0].node.urlImageThumbnailLarge: \"\"} \n                    href={`/shop/events/${node.id}`}\n                  /> : \"\" }\n                <GalleryCard.Footer>\n                  <h4>{node.name}</h4>\n                </GalleryCard.Footer>\n                <GalleryCard.Footer>                  \n                  <GalleryCard.Details\n                    fullName={<span className=\"\">{(node.teacher) ? node.teacher.fullName: \"\"}</span>}\n                    dateString={node.organizationLocation.name}\n                  />\n                  <GalleryCard.IconGroup>\n                  <GalleryCard.IconItem \n                    name=\"calendar\"\n                    label={node.dateStart}\n                    right={false}\n                    RootComponent=\"span\"\n                  />\n                  </GalleryCard.IconGroup>\n                </GalleryCard.Footer>\n                <Link to={`/shop/events/${node.id}`}>\n                  <GalleryCard.Footer pt={10}>\n                    <Button\n                      block\n                      color=\"link\"\n                    >\n                      {t(\"shop.events.tell_me_more\")} <Icon name=\"chevron-right\" />\n                    </Button>\n                  </GalleryCard.Footer>\n                </Link>\n              </GalleryCard>\n            </Grid.Col>\n          ))}\n        </Grid.Row>\n\n        \n    </ShopEventsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopEvents))\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport ShopBase from \"../ShopBase\"\n\nfunction ShopEventBase({ t, match, history, children }) {\n  \n  return (\n    <ShopBase \n      title={t(\"shop.title\")}\n      return_url=\"/shop/events\"\n      // checkoutProgress=\"order\"\n    >\n      {children}\n    </ShopBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopEventBase))","// @flow\n\nimport React, { useContext } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\n\nimport moment from 'moment'\n\nimport {\n  Badge,\n  Grid,\n  Icon,\n  List,\n  PricingCard\n} from \"tabler-react\";\n\nimport AppSettingsContext from '../../context/AppSettingsContext'\n\n// Example:\n// https://github.com/tabler/tabler-react/blob/master/example/src/interface/PricingCardsPage.react.js\n\n\nfunction ShopEventTicketPricingCard({ t, match, eventTicket, showButton=true, active=false }) {\n  // eventTicket should be an object with at least the following values from an organizationClasspass object:\n  // id, name, priceDisplay, \n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  console.log(eventTicket)\n  const ticketScheduleItems = eventTicket.ticketScheduleItems\n\n  const eventId = match.params.event_id\n\n  return (\n    <PricingCard active={active}>\n      <PricingCard.Category>\n        {eventTicket.name}\n        {(eventTicket.isEarlybirdPrice) ? <div><Badge color=\"primary\">{t(\"shop.event.ticket.earlybird_price\")}</Badge></div> : \"\"}\n      </PricingCard.Category>\n      <PricingCard.Price>\n        {eventTicket.totalPriceDisplay}\n      </PricingCard.Price>\n      <PricingCard.AttributeList>\n        {(eventTicket.isEarlybirdPrice) ? \n          <PricingCard.AttributeItem>\n            {t(\"shop.event.ticket.regular_price\")} {eventTicket.priceDisplay}\n          </PricingCard.AttributeItem>\n          : \"\" \n        }\n        {ticketScheduleItems.edges.map(({ node }) => (\n          <PricingCard.AttributeItem>\n            <b> \n              {moment(node.scheduleItem.dateStart).format(dateFormat)} {\" \"}\n              {/* Start & end time */}\n              {moment(node.scheduleItem.dateStart + ' ' + node.scheduleItem.timeStart).format(timeFormat)} {' - '}\n              {moment(node.scheduleItem.dateStart + ' ' + node.scheduleItem.timeEnd).format(timeFormat)} { ' ' }\n            </b><br />\n            {node.scheduleItem.name} {t(\"general.at\").toLowerCase()} {node.scheduleItem.organizationLocationRoom.organizationLocation.name}\n          </PricingCard.AttributeItem>\n        ))}\n      </PricingCard.AttributeList>\n      {(showButton && !eventTicket.isSoldOut) ?\n        <Link to={`/shop/events/${eventId}/ticket/${eventTicket.id}`}>\n          <PricingCard.Button>\n            {t(\"shop.event.ticket.choose\")} <Icon name=\"chevron-right\" />\n          </PricingCard.Button>\n        </Link>\n        : \"\" \n      }\n      {(showButton && eventTicket.isSoldOut) ? \n        <PricingCard.Button \n          className=\"disabled\"\n        >\n          {t('general.sold_out')}\n        </PricingCard.Button> : \"\"}\n    </PricingCard>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopEventTicketPricingCard))\n\n\n{/* <Grid.Col sm={6} lg={3}>\n<PricingCard active>\n  <PricingCard.Category>{\"Premium\"}</PricingCard.Category>\n  <PricingCard.Price>{\"$49\"} </PricingCard.Price>\n  <PricingCard.AttributeList>\n    <PricingCard.AttributeItem>\n      <strong>10 </strong>\n      {\"Users\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Sharing Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Design Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Private Messages\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Twitter API\"}\n    </PricingCard.AttributeItem>\n  </PricingCard.AttributeList>\n  <PricingCard.Button active>{\"Choose plan\"} </PricingCard.Button>\n</PricingCard>\n</Grid.Col> */}","import { gql } from \"@apollo/client\"\n\n\nexport const GET_SCHEDULE_EVENT_QUERY = gql`\nquery ScheduleEvent($id: ID!) {\n  scheduleEvent(id: $id) {\n    id\n    archived\n    displayPublic\n    displayShop\n    autoSendInfoMail\n    organizationLocation {\n      id\n      name\n    }\n    name\n    tagline\n    preview\n    description\n    organizationLevel {\n      id\n      name\n    }\n    teacher {\n      id \n      fullName\n    }\n    teacher2 {\n      id\n      fullName\n    }\n    dateStart\n    dateEnd\n    timeStart\n    timeEnd\n    infoMailContent\n    media(first: 1) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          urlImageThumbnailSmall\n          urlImageThumbnailLarge\n        }\n      }\n    }\n    tickets(first: 100) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          name\n          price\n          priceDisplay\n          totalPrice\n          totalPriceDisplay\n          description\n          isSoldOut\n          isEarlybirdPrice\n          ticketScheduleItems(included: true) {\n           pageInfo{\n            hasNextPage\n            hasPreviousPage\n            startCursor\n            endCursor\n            }\n            edges {\n              node {\n                id\n                included\n                scheduleItem {\n                  name\n                  dateStart\n                  timeStart\n                  timeEnd\n                  organizationLocationRoom {\n                    organizationLocation {\n                      name\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    createdAt\n    updatedAt\n  }\n}\n`\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery, useMutation } from '@apollo/client'\nimport { Link } from 'react-router-dom'\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport moment from 'moment'\n\nimport {\n  Card,\n  GalleryCard,\n  Grid,\n  Icon,\n  List\n} from \"tabler-react\"\nimport { TimeStringToJSDateOBJ } from '../../../tools/date_tools'\nimport AppSettingsContext from '../../context/AppSettingsContext'\n\nimport ShopEventBase from \"./ShopEventBase\"\nimport ShopEventTicketPricingCard from \"./ShopEventTicketPricingCard\"\n\nimport { GET_SCHEDULE_EVENT_QUERY } from \"./queries\"\n\n\nfunction ShopEvent({ t, match, history }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n\n  const title = t(\"shop.home.title\")\n  const eventId = match.params.event_id\n\n  const { loading, error, data } = useQuery(GET_SCHEDULE_EVENT_QUERY, {\n    variables: { id: eventId }\n  })\n\n  if (loading) return (\n    <ShopEventBase title={title} >\n      {t(\"general.loading_with_dots\")}\n    </ShopEventBase>\n  )\n  if (error) return (\n    <ShopEventBase title={title}>\n      {t(\"shop.event.error_loading\")}\n    </ShopEventBase>\n  )\n\n  console.log(data)\n  const event = data.scheduleEvent\n  const tickets = event.tickets\n  console.log(event)\n\n  return (\n    <ShopEventBase title={title}>\n      <Grid.Row>\n        <Grid.Col xs={12} sm={12} md={12} lg={12}>\n          <h3>{event.name}</h3>\n          <h5>{event.tagline}</h5>\n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col xs={12} sm={12} md={6} lg={4}>\n          {((event.media.edges.length) ? \n            <GalleryCard>\n              <GalleryCard.Image src={(event.media.edges.length) ? event.media.edges[0].node.urlImageThumbnailLarge : \"\"} />\n              <GalleryCard.Details>\n                {(event.media.edges.length) ? event.media.edges[0].node.description : \"\"}\n              </GalleryCard.Details>\n            </GalleryCard>\n          : \"\" )}\n          <Card title={t(\"general.info\")}>\n            <Card.Body>\n              <h6>{t('general.teacher')}: {(event.teacher) ? event.teacher.fullName: \"\"}</h6>\n              <h6>{t('general.start')}: {(event.dateStart) ? moment(event.dateStart).format(dateFormat): \"\"}</h6>\n              <h6>{t('general.end')}: {(event.dateEnd) ? moment(event.dateEnd).format(dateFormat): \"\"}</h6>\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <Grid.Col xs={12} sm={12} md={6} lg={8}>\n          <Card title={t(\"general.description\")}>\n            <Card.Body>\n              <h5>{t('general.description')}</h5>\n              <div dangerouslySetInnerHTML={{ __html: event.description}} />\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col xs={12} sm={12} md={12} lg={12}>\n          <h3>{t(\"shop.event.tickets\")}</h3>\n        </Grid.Col>\n        {tickets.edges.map(({ node }) => (\n          <Grid.Col xs={12} sm={12} md={6} lg={4}>\n            <ShopEventTicketPricingCard eventID={eventId} eventTicket={node} />\n          </Grid.Col>\n        ))}\n      </Grid.Row>\n    </ShopEventBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopEvent))\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport ShopBase from \"../ShopBase\"\n\nfunction ShopEventTicketBase({ t, match, history, children }) {\n  const eventId = match.params.event_id\n  \n  return (\n    <ShopBase \n      title={t(\"shop.title\")}\n      return_url={`/shop/events/${eventId}`}\n      checkoutProgress=\"order\"\n    >\n      {children}\n    </ShopBase>\n  )\n}\n\nexport default withTranslation()(withRouter(ShopEventTicketBase))","const cs_django_links = {\n    EXPORT_TERMS_AND_CONDITIONS: \"/d/export/terms-and-conditions\",\n    EXPORT_PRIVACY_POLICY: \"/d/export/privacy-policy\",\n}\n\nexport default cs_django_links\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\nimport {\n  Button,\n  Form,\n  Icon\n} from \"tabler-react\"\n\nimport cs_django_links from \"../../tools/cs_django_links\"\n\n\nconst ShopClasspassForm = ({ t, isSubmitting, errors }) => (\n    <FoForm>\n      <Form.Group label={t('shop.order.message')}>\n        <Field type=\"text\" \n               component=\"textarea\"\n               name=\"message\" \n               className={(errors.message) ? \"form-control is-invalid\" : \"form-control\"} \n               autoComplete=\"off\" />\n        <ErrorMessage name=\"message\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <small className=\"text-muted\">\n        {t(\"shop.order.by_placing_this_order\")} <br />\n        <ul>\n          <li>{t(\"shop.order.agree_terms\")} {\" \"}\n            <a target=\"_blank\" href={cs_django_links.EXPORT_TERMS_AND_CONDITIONS}>{t(\"general.terms_and_conditions\")}</a>\n          </li>\n          <li>{t(\"shop.order.agree_privacy\")} {\" \"}\n            <a target=\"_blank\" href={cs_django_links.EXPORT_PRIVACY_POLICY}>{t(\"general.privacy_policy\")}</a>\n          </li>\n        </ul>\n      </small>\n      <Button \n        block\n        color=\"primary\"\n        className=\"pull-right\" \n        type=\"submit\" \n        disabled={isSubmitting}\n      >\n        {t('shop.place_order')} <Icon name=\"chevron-right\" />\n      </Button>\n    </FoForm>\n)\n\nexport default withTranslation()(withRouter(ShopClasspassForm))","import { gql } from \"@apollo/client\"\n\n\nexport const GET_SCHEDULE_EVENT_TICKET_QUERY = gql`\n  query ScheduleEventTicket($id: ID!) {\n    scheduleEventTicket(id:$id) {\n      id\n      name\n      price\n      priceDisplay\n      totalPrice\n      totalPriceDisplay\n      description\n      isSoldOut\n      isEarlybirdPrice\n      ticketScheduleItems(included: true) {\n        pageInfo{\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n        }\n        edges {\n          node {\n            id\n            included\n            scheduleItem {\n              name\n              dateStart\n              timeStart\n              timeEnd\n              organizationLocationRoom {\n                organizationLocation {\n                  name\n                }\n              }\n            }\n          }\n        }\n      }\n      scheduleEvent {\n        id\n        name\n      }\n    }\n  }\n`\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery, useMutation } from '@apollo/client'\nimport { Link } from 'react-router-dom'\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport moment from 'moment'\n\nimport {\n  Card,\n  Grid,\n  Icon,\n  List\n} from \"tabler-react\"\nimport { TimeStringToJSDateOBJ } from '../../../tools/date_tools'\nimport AppSettingsContext from '../../context/AppSettingsContext'\n\nimport ShopEventTicketBase from \"./ShopEventTicketBase\"\nimport ShopCheckoutForm from \"../ShopCheckoutForm\"\nimport ShopEventTicketPricingCard from \"../event/ShopEventTicketPricingCard\"\n\nimport { GET_SCHEDULE_EVENT_TICKET_QUERY } from \"./queries\"\nimport { CREATE_ORDER } from \"../queries\"\n\n\nfunction ShopEventTicket({ t, match, history }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n\n  const title = t(\"shop.home.title\")\n  const scheduleEventTicketId = match.params.id\n  const eventId = match.params.event_id\n  const classDate = match.params.date\n\n  const { loading, error, data } = useQuery(GET_SCHEDULE_EVENT_TICKET_QUERY, {\n    variables: { id: scheduleEventTicketId }\n  })\n\n  const [createOrder, { data: createOrderData }] = useMutation(CREATE_ORDER)\n\n\n  if (loading) return (\n    <ShopEventTicketBase title={title} >\n      {t(\"general.loading_with_dots\")}\n    </ShopEventTicketBase>\n  )\n  if (error) return (\n    <ShopEventTicketBase title={title}>\n      {t(\"shop.events.ticket.error_loading\")}\n    </ShopEventTicketBase>\n  )\n\n  console.log(data)\n  const eventTicket = data.scheduleEventTicket\n  console.log(eventTicket)\n\n  // Chceck sold out\n  if (eventTicket.isSoldOut) {\n    return (\n      <ShopEventTicketBase title={title}>\n        <Card title={t(\"shop.events.ticket.sold_out_title\")}>\n          <Card.Body>{t(\"shop.events.ticket.sold_out\")}</Card.Body>\n        </Card>\n      </ShopEventTicketBase>\n    )\n  }\n\n  return (\n    <ShopEventTicketBase title={title}>\n      <Grid.Row>\n        <Grid.Col md={12}>\n          <h3>{eventTicket.scheduleEvent.name}</h3>\n        </Grid.Col>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Col md={4}>\n          <ShopEventTicketPricingCard eventId={eventId} eventTicket={eventTicket} showButton={false} active={true} />\n        </Grid.Col>\n        <Grid.Col md={4}>\n          <Card title={t(\"shop.events.ticket.additional_info\")}>\n            <Card.Body>\n              {(eventTicket.description) ?\n                <div dangerouslySetInnerHTML={{ __html: eventTicket.description}} />\n              : t(\"shop.events.ticket.no_additional_info\")}\n            </Card.Body>\n          </Card> \n        </Grid.Col>\n        <Grid.Col md={4}>\n          <Card title={t(\"shop.checkout.title\")}>\n            <Card.Body>\n              <Formik\n                initialValues={{ message: \"\" }}\n                // validationSchema={CLASSTYPE_SCHEMA}\n                onSubmit={(values, { setSubmitting }) => {\n\n                    let createOrderInput = {\n                      message: values.message,\n                      scheduleEventTicket: match.params.id,\n                    }\n\n\n                    createOrder({ variables: {\n                      input: createOrderInput,\n                      // file: values.image\n                    }, refetchQueries: [\n                        // {query: GET_CLASSTYPES_QUERY, variables: {\"archived\": false }}\n                    ]})\n                    .then(({ data }) => {\n                        console.log('got data', data)\n                        console.log('good...  now redirect to the payment page')\n                        const orderId = data.createFinanceOrder.financeOrder.id\n                        history.push('/shop/checkout/payment/' + orderId)\n                      }).catch((error) => {\n                        toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                            position: toast.POSITION.BOTTOM_RIGHT\n                          })\n                        console.log('there was an error sending the query', error)\n                        setSubmitting(false)\n                      })\n                }}\n                >\n                {({ isSubmitting, errors, values }) => (\n                  <ShopCheckoutForm \n                    isSubmitting={isSubmitting}\n                    errors={errors}\n                    values={values}\n                  />\n                )}\n              </Formik>\n\n              {/* When a user is not logged in, show a login button to redirect to the login page */}\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n      </Grid.Row>\n    </ShopEventTicketBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopEventTicket))\n\n\n{/* <Grid.Col sm={6} lg={3}>\n<PricingCard active>\n  <PricingCard.Category>{\"Premium\"}</PricingCard.Category>\n  <PricingCard.Price>{\"$49\"} </PricingCard.Price>\n  <PricingCard.AttributeList>\n    <PricingCard.AttributeItem>\n      <strong>10 </strong>\n      {\"Users\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Sharing Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Design Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Private Messages\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Twitter API\"}\n    </PricingCard.AttributeItem>\n  </PricingCard.AttributeList>\n  <PricingCard.Button active>{\"Choose plan\"} </PricingCard.Button>\n</PricingCard>\n</Grid.Col> */}","import { gql } from \"@apollo/client\"\n\nexport const GET_SHOP_ANNOUNCEMENTS_QUERY = gql`\n  query OrganizationAnnouncements($after: String, $before: String) {\n    organizationAnnouncements(first: 100, before: $before, after: $after, displayPublic: true, displayShop: true) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          displayPublic\n          displayShop\n          title\n          content\n          dateStart\n          dateEnd\n          priority\n        }\n      }\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n// import { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\n\n// import {\n//   Icon,\n//   List\n// } from \"tabler-react\";\nimport ShopBase from \"../ShopBase\"\n\n\nfunction ShopHomeBase({ t, match, history, children }) {\n  \n  return (\n    <ShopBase title={t(\"shop.home.title\")}>\n        {children}\n    </ShopBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopHomeBase))","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\n\nimport {\n  Card,\n  Grid,\n} from \"tabler-react\";\n\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\nimport { GET_SHOP_ANNOUNCEMENTS_QUERY } from \"./queries\"\n\nimport ShopHomeBase from \"./ShopHomeBase\"\n\nfunction ShopHome({ t, match, history }) {\n  \n  const { loading, error, data } = useQuery(GET_SHOP_ANNOUNCEMENTS_QUERY);\n\n  if (loading) return (\n    <ShopHomeBase>\n      {t(\"general.loading_with_dots\")}\n    </ShopHomeBase>\n  )\n  if (error) return (\n    <ShopHomeBase>\n      {t(\"shop.home.announcements.error_loading\")}\n    </ShopHomeBase>\n  )\n\n  const announcements = data.organizationAnnouncements\n\n  return (\n    <ShopHomeBase title={t(\"shop.home.title\")}>\n      <Grid.Row>\n        {(announcements.edges.length) ? announcements.edges.map(({ node }) => (\n          <Grid.Col md={6}>\n            <Card title={node.title}>\n              <Card.Body>\n                <div dangerouslySetInnerHTML={{ __html:node.content }}></div>\n              </Card.Body>\n            </Card> \n          </Grid.Col>\n        )) : \"\"\n        }\n      </Grid.Row>\n    </ShopHomeBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopHome))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport ShopBase from \"../../ShopBase\"\n\nfunction ShopCheckoutPaymentBase({ t, match, history, children }) {\n  \n  return (\n    <ShopBase \n      title={t(\"shop.title\")}\n      checkoutProgress=\"payment\"\n    >\n      {children}\n    </ShopBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopCheckoutPaymentBase))","import { gql } from \"@apollo/client\"\n\n\nexport const GET_ORDER_QUERY = gql`\n  query FinanceOrder($id: ID!) {\n    financeOrder(id: $id) {\n      id\n      orderNumber\n      account {\n        id\n        fullName\n      }\n      message\n      status\n      total\n      totalDisplay\n      createdAt\n      items {\n        edges {\n          node {\n            id\n            productName\n            description\n            quantity\n            totalDisplay\n            scheduleItem {\n              id\n            }\n            attendanceDate\n          }\n        }\n      }\n    }\n  }\n`\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { v4 } from 'uuid'\n\nimport {\n  Card,\n  Icon,\n  Table,\n} from \"tabler-react\";\n\nimport { GET_ORDER_QUERY } from \"../queries\"\nimport ShopCheckoutClassInfo from \"../class_info/ShopCheckoutClassInfo\"\nimport { dateToLocalISO } from '../../../../tools/date_tools'\nimport { DisplayClassInfo } from '../../tools'\n\n\nfunction ShopCheckoutOrderSummary({ t, id, complete=false }) {\n  const { loading, error, data } = useQuery(GET_ORDER_QUERY, {\n    variables: { id: id }\n  })\n\n  if (loading) return (\n      t(\"general.loading_with_dots\")\n  )\n  if (error) return (\n      t(\"shop.checkout.order_summary.error_loading\")\n  )\n\n  console.log(data)\n  const order = data.financeOrder\n  console.log(order)\n  const orderItems = order.items.edges\n  console.log(orderItems)\n\n  let classDate \n  let scheduleItemId\n  let item\n  console.log(\"Start looping\")\n  for (item of orderItems) {\n    let node = item.node\n    console.log(node)\n    if (node.scheduleItem) {\n      classDate = node.attendanceDate\n      scheduleItemId = node.scheduleItem.id\n    }\n  }\n\n  console.log('schedule item found!')\n  console.log(classDate)\n  console.log(scheduleItemId)\n\n\n  return (\n    <Card title={t(\"shop.checkout.payment.order_summary\")}>\n      <div className=\"table-responsive\">\n        <Table cards={true}>\n          <Table.Header>\n            <Table.Row>\n              <Table.ColHeader>{t('general.item')}</Table.ColHeader>\n              <Table.ColHeader>{t('general.price')}</Table.ColHeader>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {orderItems.map(({ node }) => (\n              <Table.Row key={v4()}>\n                <Table.Col>\n                  {node.productName} <br /> \n                  <span className=\"text-muted\">\n                    {node.description}\n                  </span>\n                </Table.Col>\n                <Table.Col>{node.totalDisplay}</Table.Col>\n              </Table.Row>      \n            ))}\n            <Table.Row className=\"bold\">\n              <Table.Col>\n                {t(\"general.total\")}\n              </Table.Col>\n              <Table.Col>\n                  {order.totalDisplay}\n              </Table.Col>\n            </Table.Row>\n          </Table.Body>\n        </Table>\n      </div>\n      <Card.Body>\n        {(order.message) ?\n          <span className=\"text-muted\">\n            <h5><Icon name=\"message-square\" /> {t(\"shop.checkout.order_summary.message\")}</h5> \n            {/* Order message */}\n            {order.message}\n            <br /><br />\n          </span> \n          : \"\"\n        }\n        {(scheduleItemId && classDate) ?\n          <ShopCheckoutClassInfo \n            scheduleItemId={scheduleItemId}\n            date={classDate}\n            complete={complete}\n          />\n          : \"\"\n        }\n      </Card.Body>\n    </Card>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopCheckoutOrderSummary))\n","import { gql } from \"@apollo/client\"\n\n\nexport const CREATE_PAYMENT_LINK = gql`\nmutation CreateFinanceOrderPaymentLink($id: ID!) {\n  createFinanceOrderPaymentLink(id: $id) {\n    financeOrderPaymentLink {\n      paymentLink\n    }\n  }\n}\n`","// @flow\n\nimport React, { useRef, useState } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery, useMutation } from '@apollo/client'\nimport { toast } from 'react-toastify'\nimport { v4 } from 'uuid'\n\nimport {\n  Card,\n  Grid,\n  Icon,\n  Table,\n} from \"tabler-react\";\nimport ShopCheckoutPaymentBase from \"./ShopCheckoutPaymentBase\"\nimport ShopCheckoutOrderSummary from \"../order_summary/ShopCheckoutOrderSummary\"\n\nimport { GET_ORDER_QUERY } from \"../queries\"\nimport { CREATE_PAYMENT_LINK } from \"./queries\"\n\n\nfunction ShopCheckoutPayment({ t, match, history }) {\n  const btnPayNow = useRef(null);\n  const initialBtnText = <span><Icon name=\"credit-card\" /> {t('shop.checkout.payment.to_payment')} <Icon name=\"chevron-right\" /></span>\n  const [btn_text, setBtnText] = useState(initialBtnText)\n  const title = t(\"shop.home.title\")\n  const id = match.params.id\n  const { loading, error, data } = useQuery(GET_ORDER_QUERY, {\n    variables: { id: id }\n  })\n\n  const [createPaymentLink, {data: createPaymentLinkData}] = useMutation(CREATE_PAYMENT_LINK)\n\n  if (loading) return (\n    <ShopCheckoutPaymentBase title={title} >\n      {t(\"general.loading_with_dots\")}\n    </ShopCheckoutPaymentBase>\n  )\n  if (error) return (\n    <ShopCheckoutPaymentBase title={title}>\n      {t(\"shop.classpass.error_loading\")}\n    </ShopCheckoutPaymentBase>\n  )\n\n  console.log(data)\n  const order = data.financeOrder\n  console.log(order)\n  const orderItems = order.items.edges\n  console.log(orderItems)\n\n  function onClickPay() {\n    btnPayNow.current.setAttribute(\"disabled\", \"disabled\")\n    setBtnText(t(\"shop.checkout.payment.redirecting\"))\n    // btnPayNow.current.setValue(\"redirecting...\")\n    // btnPayNow\n    // btnPayNow.current.removeAttribute(\"disabled\")\n    createPaymentLink({ variables: { id: id } }).then(({ data }) => {\n      console.log('got data', data);\n      const paymentLink = data.createFinanceOrderPaymentLink.financeOrderPaymentLink.paymentLink\n      window.location.href = paymentLink\n    }).catch((error) => {\n      toast.error((t('general.toast_server_error')) + ': ' +  error, {\n          position: toast.POSITION.BOTTOM_RIGHT\n        })\n      console.log('there was an error sending the query', error)\n    })\n  }\n\n\n  return (\n    <ShopCheckoutPaymentBase title={title}>\n        <Grid.Row>\n          <Grid.Col md={6}>\n            <Card title={t(\"shop.checkout.payment.order_received\")}>\n              <Card.Body>\n                <h5 className={\"mb-4\"}>{t(\"shop.checkout.payment.order_received_subheader\")}</h5>\n                {t(\"shop.checkout.payment.order_received_to_payment_explanation\")} <br />\n                {t(\"shop.checkout.payment.order_received_to_payment_text\")}\n              </Card.Body>\n              <Card.Footer>\n                <button\n                  className=\"btn btn-block btn-success\"\n                  ref={btnPayNow}\n                  onClick={ onClickPay }\n                >\n                  {btn_text}\n                </button>\n              </Card.Footer>\n            </Card>\n          </Grid.Col>\n          <Grid.Col md={6}>\n            <ShopCheckoutOrderSummary id={id} />\n            {/* <Card title={t(\"shop.checkout.payment.order_summary\")}>\n              <div className=\"table-responsive\">\n                <Table cards={true}>\n                  <Table.Header>\n                    <Table.Row>\n                      <Table.ColHeader>{t('general.item')}</Table.ColHeader>\n                      <Table.ColHeader>{t('general.price')}</Table.ColHeader>\n                    </Table.Row>\n                  </Table.Header>\n                  <Table.Body>\n                    {orderItems.map(({ node }) => (\n                      <Table.Row key={v4()}>\n                        <Table.Col>\n                          {node.productName} <br /> \n                          <span className=\"text-muted\">\n                            {node.description}\n                          </span>\n                        </Table.Col>\n                        <Table.Col>{node.totalDisplay}</Table.Col>\n                      </Table.Row>      \n                    ))}\n                    <Table.Row className=\"bold\">\n                      <Table.Col>\n                        {t(\"general.total\")}\n                      </Table.Col>\n                      <Table.Col>\n                          {order.totalDisplay}\n                      </Table.Col>\n                    </Table.Row>\n                  </Table.Body>\n                </Table>\n              </div>\n              <Card.Body>\n                <span className=\"text-muted\">\n                  <Icon name=\"message-square\" /> {t(\"shop.checkout.payment.order_summary_message\")} <br /><br />\n                  {order.message}\n                </span>\n              </Card.Body>\n            </Card> */}\n          </Grid.Col>\n        </Grid.Row>\n    </ShopCheckoutPaymentBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopCheckoutPayment))\n\n\n{/* <Grid.Col sm={6} lg={3}>\n<PricingCard active>\n  <PricingCard.Category>{\"Premium\"}</PricingCard.Category>\n  <PricingCard.Price>{\"$49\"} </PricingCard.Price>\n  <PricingCard.AttributeList>\n    <PricingCard.AttributeItem>\n      <strong>10 </strong>\n      {\"Users\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Sharing Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Design Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Private Messages\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Twitter API\"}\n    </PricingCard.AttributeItem>\n  </PricingCard.AttributeList>\n  <PricingCard.Button active>{\"Choose plan\"} </PricingCard.Button>\n</PricingCard>\n</Grid.Col> */}","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport ShopBase from \"../../ShopBase\"\n\nfunction ShopCheckoutCompleteBase({ t, match, history, children }) {\n  \n  return (\n    <ShopBase \n      title={t(\"shop.title\")}\n      checkoutProgress=\"complete\"\n    >\n      {children}\n    </ShopBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopCheckoutCompleteBase))","// @flow\n\nimport React, { useRef, useState } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Icon\n} from \"tabler-react\";\nimport ShopCheckoutCompleteBase from \"./ShopCheckoutCompleteBase\"\nimport ShopCheckoutOrderSummary from \"../order_summary/ShopCheckoutOrderSummary\"\n\nimport { GET_ORDER_QUERY } from \"../queries\"\n\n\nfunction ShopCheckoutComplete({ t, match, history }) {\n  const btnPayNow = useRef(null);\n  const initialBtnText = <span><Icon name=\"credit-card\" /> {t('shop.checkout.payment.to_payment')} <Icon name=\"chevron-right\" /></span>\n  const [btn_text, setBtnText] = useState(initialBtnText)\n  const title = t(\"shop.home.title\")\n  const id = match.params.id\n  const { loading, error, data } = useQuery(GET_ORDER_QUERY, {\n    variables: { id: id }\n  })\n\n  if (loading) return (\n    <ShopCheckoutCompleteBase title={title} >\n      {t(\"general.loading_with_dots\")}\n    </ShopCheckoutCompleteBase>\n  )\n  if (error) return (\n    <ShopCheckoutCompleteBase title={title}>\n      {t(\"shop.classpass.error_loading\")}\n    </ShopCheckoutCompleteBase>\n  )\n\n  console.log(data)\n  const order = data.financeOrder\n  console.log(order)\n  const orderItems = order.items.edges\n  console.log(orderItems)\n\n  // Order not found\n  if (!order) {\n    return (\n      <ShopCheckoutCompleteBase title={title}>\n        {t(\"shop.checkout.complete.order_not_found\")}\n      </ShopCheckoutCompleteBase>\n    )\n  }\n\n  let subHeader = \"\"\n  let contentText = \"\"\n  let paymentText = \"\"\n  let complete = false\n\n  // Success!\n  if (order.status == \"DELIVERED\") {\n    // Thank you message\n    subHeader = t(\"shop.checkout.complete.success_subheader\") \n    // Something to explain the user what's next\n    contentText = t(\"shop.checkout.complete.success_content_text\")\n    complete = true\n\n    // Confirm receiving payment to user\n    if (order.total) {\n      paymentText = t(\"shop.checkout.complete.success_payment_text\")\n    }\n  } else {\n    // Fail...\n    // Looks like something went wrong message\n    subHeader = t(\"shop.checkout.complete.fail_subheader\") \n    // Notify user of ways to contact\n    contentText = t(\"shop.checkout.complete.fail_content_text\")\n\n    // Notify user that payment hasn't been received\n    if (order.total) {\n      paymentText = t(\"shop.checkout.complete.fail_payment_text\")\n    }\n  }\n\n\n  return (\n    <ShopCheckoutCompleteBase title={title}>\n        <Grid.Row>\n          <Grid.Col md={6}>\n            <Card title={t(\"shop.checkout.complete.title\")}>\n              <Card.Body>\n                <h5 className={\"mb-4\"}>{subHeader}</h5>\n                {paymentText} <br />\n                {contentText}\n              </Card.Body>\n              <Card.Footer>\n                <Link to=\"/shop/account/\">\n                  <Button \n                    block\n                    color=\"success\"\n                  >\n                    {t(\"shop.complete.to_account\")} <Icon name=\"chevron-right\" />\n                  </Button>\n                </Link>\n              </Card.Footer>\n            </Card>\n          </Grid.Col>\n          <Grid.Col md={6}>\n            <ShopCheckoutOrderSummary id={id} complete={complete} />\n          </Grid.Col>\n        </Grid.Row>\n    </ShopCheckoutCompleteBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopCheckoutComplete))\n\n\n{/* <Grid.Col sm={6} lg={3}>\n<PricingCard active>\n  <PricingCard.Category>{\"Premium\"}</PricingCard.Category>\n  <PricingCard.Price>{\"$49\"} </PricingCard.Price>\n  <PricingCard.AttributeList>\n    <PricingCard.AttributeItem>\n      <strong>10 </strong>\n      {\"Users\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Sharing Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Design Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Private Messages\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Twitter API\"}\n    </PricingCard.AttributeItem>\n  </PricingCard.AttributeList>\n  <PricingCard.Button active>{\"Choose plan\"} </PricingCard.Button>\n</PricingCard>\n</Grid.Col> */}","import { gql } from \"@apollo/client\"\n\n\nexport const GET_ACCOUNT_CLASSES_QUERY = gql`\n  query ScheduleItemAttendance($before: String, $after: String, $account: ID!) {\n    scheduleItemAttendances(first: 20, before: $before, after: $after, account: $account, accountScheduleEventTicket_Isnull: true) {\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n      edges {\n        node {\n          id\n          cancellationPossible\n          attendanceType\n          date\n          bookingStatus\n          scheduleItem {\n            id\n            timeStart\n            timeEnd\n            organizationLocationRoom {\n              name\n              organizationLocation {\n                name\n              }\n            }\n            organizationClasstype {\n              name\n            }\n          }\n        }\n      } \n    }\n    user {\n      id\n      accountId\n      firstName\n      lastName\n      fullName\n      email\n      gender\n      dateOfBirth\n      address\n      postcode\n      city\n      country\n      phone\n      mobile\n      emergency\n    }\n  }\n`","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport {\n  Page,\n  Container\n} from \"tabler-react\";\nimport SiteWrapperShop from \"../../../SiteWrapperShop\"\nimport ShopAccountBack from \"../ShopAccountBack\"\n\n\nfunction ShopAccountClassesBase({ t, match, history, children, accountName=\"\" }) {\n  return (\n      <SiteWrapperShop>\n        <div className=\"my-3 my-md-5\">\n          <Container>\n            <Page.Header title={t(\"shop.account.title\")} subTitle={ accountName }>\n              <div className=\"page-options d-flex\">\n                <ShopAccountBack />\n              </div>\n            </Page.Header>\n            { children }\n          </Container>\n        </div>\n      </SiteWrapperShop>\n  )\n}\n\nexport default withTranslation()(withRouter(ShopAccountClassesBase))","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { v4 } from \"uuid\"\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\n\nimport AppSettingsContext from '../../../context/AppSettingsContext'\nimport BadgeBookingStatus from '../../../ui/BadgeBookingStatus'\n\nimport {\n  Button,\n  Card,\n  Grid,\n  Icon,\n  Table\n} from \"tabler-react\"\nimport { GET_ACCOUNT_CLASSES_QUERY } from \"./queries\"\nimport GET_USER_PROFILE from \"../../../../queries/system/get_user_profile\"\n\nimport ShopAccountClassesBase from \"./ShopAccountClassesBase\"\nimport ContentCard from \"../../../general/ContentCard\"\n\n\nfunction ShopAccountClasses({t, match, history}) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n  const dateTimeFormat = dateFormat + ' ' + timeFormat\n\n  // Chain queries. First query user data and then query class attendance for that user once we have the account Id.\n  const { loading: loadingUser, error: errorUser, data: dataUser } = useQuery(GET_USER_PROFILE)\n  const { loading, error, data, fetchMore } = useQuery(GET_ACCOUNT_CLASSES_QUERY, {\n    skip: loadingUser || errorUser || !dataUser,\n    variables: {\n      account: dataUser && dataUser.user ? dataUser.user.accountId : null\n    }\n  })\n  // TODO: add cancel class button & query\n  // const [ updateOrder ] = useMutation(UPDATE_ORDER)\n\n  if (loading || loadingUser || !data) return (\n    <ShopAccountClassesBase>\n      {t(\"general.loading_with_dots\")}\n    </ShopAccountClassesBase>\n  )\n  if (error || errorUser) return (\n    <ShopAccountClassesBase>\n      {t(\"shop.account.classes.error_loading_data\")}\n    </ShopAccountClassesBase>\n  )\n\n  console.log(\"User data: ###\")\n  console.log(data)\n  console.log(dataUser)\n  const user = dataUser.user\n  const scheduleItemAttendances = data.scheduleItemAttendances\n\n  // Empty list\n  if (!scheduleItemAttendances.edges.length) {\n    return (\n      <ShopAccountClassesBase accountName={user.fullName}>\n        <Grid.Row>\n          <Grid.Col md={12}>\n            <Card cardTitle={t('shop.account.classes.title')} >\n              <Card.Body>\n                {t('shop.account.classes.empty_list')}\n              </Card.Body>\n            </Card>\n          </Grid.Col>\n        </Grid.Row>\n      </ShopAccountClassesBase>\n    )  \n  }\n\n\n\n  // Populated list\n  return (\n    <ShopAccountClassesBase accountName={user.fullName}>\n      <Grid.Row>\n        <Grid.Col md={12}>\n          <ContentCard cardTitle={t('shop.account.classes.title')}\n            // headerContent={headerOptions}\n            pageInfo={scheduleItemAttendances.pageInfo}\n            onLoadMore={() => {\n              fetchMore({\n                variables: {\n                  after: scheduleItemAttendances.pageInfo.endCursor\n                },\n                updateQuery: (previousResult, { fetchMoreResult }) => {\n                  const newEdges = fetchMoreResult.schduleItemAttendances.edges\n                  const pageInfo = fetchMoreResult.schduleItemAttendances.pageInfo\n\n                  return newEdges.length\n                    ? {\n                        // Put the new subscriptions at the end of the list and update `pageInfo`\n                        // so we have the new `endCursor` and `hasNextPage` values\n                        schduleItemAttendances: {\n                          __typename: previousResult.schduleItemAttendances.__typename,\n                          edges: [ ...previousResult.schduleItemAttendances.edges, ...newEdges ],\n                          pageInfo\n                        }\n                      }\n                    : previousResult\n                }\n              })\n            }} >\n            <Table>\n              <Table.Header>\n                <Table.Row key={v4()}>\n                  <Table.ColHeader>{t('general.time')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.class')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.location')}</Table.ColHeader>\n                  <Table.ColHeader>{t('general.booking_status')}</Table.ColHeader>\n                  <Table.ColHeader></Table.ColHeader>  \n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                { scheduleItemAttendances.edges.map(({ node }) => (\n                  <Table.Row key={v4()}>\n                    <Table.Col>\n                      { moment(node.date).format(dateFormat) } <br />\n                      <span className=\"text-muted\">\n                        {moment(node.date + ' ' + node.scheduleItem.timeStart).format(timeFormat)}\n                      </span>\n                    </Table.Col>\n                    <Table.Col>\n                      { node.scheduleItem.organizationClasstype.name }\n                    </Table.Col>\n                    <Table.Col>\n                      { node.scheduleItem.organizationLocationRoom.organizationLocation.name } <br />\n                      <span className=\"text-muted\">\n                        { node.scheduleItem.organizationLocationRoom.name }\n                      </span> \n                    </Table.Col>\n                    <Table.Col>\n                      <BadgeBookingStatus status={node.bookingStatus} />\n                    </Table.Col>\n                    <Table.Col>\n                      {/* TODO: improve this by adding a \"Can be cancelled field to GQL schema\" */}\n                      {((node.bookingStatus != \"CANCELLED\") && node.cancellationPossible) ?  \n                        <div>\n                          <Link to={`/shop/account/class_cancel/${node.scheduleItem.id}/${node.date}/${node.id}`}>\n                            <Button \n                              className=\"pull-right mr-r\"\n                              color=\"warning\"\n                              >\n                              {t(\"general.cancel\")}\n                            </Button>\n                          </Link>\n                          <Link to={`/shop/account/class_info/${node.scheduleItem.id}/${node.date}`}>\n                            <Button\n                              className=\"pull-right\"\n                              color=\"secondary\"\n                              icon=\"info\"\n                            >\n                              {t(\"general.info\")}\n                            </Button>\n                          </Link>\n                        </div> : \"\"\n                      }\n                    </Table.Col>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          </ContentCard>\n        </Grid.Col>\n      </Grid.Row>\n    </ShopAccountClassesBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopAccountClasses))","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Icon,\n  List\n} from \"tabler-react\";\nimport ShopBase from \"../ShopBase\"\n\nfunction ShopClasspassesBase({ t, match, history, children }) {\n  \n  return (\n    <ShopBase title={t(\"shop.title\")}>\n      <h4>{t(\"shop.classpasses.title\")}</h4>\n        {children}\n    </ShopBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClasspassesBase))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport ShopBase from \"../ShopBase\"\n\nfunction ShopClasspassBase({ t, match, history, children }) {\n  \n  return (\n    <ShopBase \n      title={t(\"shop.title\")}\n      return_url=\"/shop/classpasses\"\n      checkoutProgress=\"order\"\n    >\n      {children}\n    </ShopBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClasspassBase))","import { gql } from \"@apollo/client\"\n\n\nexport const GET_CLASSPASS_QUERY = gql`\n  query OrganizationClasspass($id: ID!) {\n    organizationClasspass(id:$id) {\n      id\n      archived\n      displayPublic\n      displayShop\n      trialPass\n      trialTimes\n      name\n      description\n      price\n      priceDisplay\n      financeTaxRate {\n        id\n        name\n      }\n      validity\n      validityUnit\n      validityUnitDisplay\n      classes\n      unlimited\n      organizationMembership {\n        id\n        name\n      }\n      quickStatsAmount\n      financeGlaccount {\n        id \n        name\n      }\n      financeCostcenter {\n        id\n        name\n      }\n    }\n  }\n`\n","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Grid,\n  Icon,\n  List,\n  PricingCard\n} from \"tabler-react\";\nimport ShopClasspassesBase from \"./ShopClasspassBase\"\n\nimport { GET_ORGANIZATION_CLASSPASS_QUERY } from \"./queries\"\n\n// Example:\n// https://github.com/tabler/tabler-react/blob/master/example/src/interface/PricingCardsPage.react.js\n\n\nfunction ShopClasspassPricingCard({ t, classpass, btnLink, active=false }) {\n  // classpass should be an object with at least the following values from an organizationClasspass object:\n  // id, name, priceDisplay, unlimited, classes, validity, link\n  return (\n    <PricingCard active={active}>\n      <PricingCard.Category>\n        {classpass.name}\n      </PricingCard.Category>\n      <PricingCard.Price>\n        {classpass.priceDisplay}\n      </PricingCard.Price>\n      <PricingCard.AttributeList>\n        <PricingCard.AttributeItem>\n          <b>{(classpass.unlimited) ? t('general.unlimited') : classpass.classes }</b> { \" \" }\n          {((classpass.classes != 1) || (classpass.unlimited))? t('general.classes'): t('general.class')}\n        </PricingCard.AttributeItem>\n        <PricingCard.AttributeItem>\n          {t('general.valid_for')} { \" \" }\n          <b>{classpass.validity}</b> {' '} {classpass.validityUnitDisplay}\n        </PricingCard.AttributeItem>\n      </PricingCard.AttributeList>\n      {(btnLink) ?\n        <Link to={btnLink}>\n          <PricingCard.Button >\n            {t(\"shop.classpasses.choose\")} <Icon name=\"chevron-right\" />\n          </PricingCard.Button>\n        </Link>\n        : \"\"\n      }\n    </PricingCard>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClasspassPricingCard))\n\n\n{/* <Grid.Col sm={6} lg={3}>\n<PricingCard active>\n  <PricingCard.Category>{\"Premium\"}</PricingCard.Category>\n  <PricingCard.Price>{\"$49\"} </PricingCard.Price>\n  <PricingCard.AttributeList>\n    <PricingCard.AttributeItem>\n      <strong>10 </strong>\n      {\"Users\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Sharing Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Design Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Private Messages\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Twitter API\"}\n    </PricingCard.AttributeItem>\n  </PricingCard.AttributeList>\n  <PricingCard.Button active>{\"Choose plan\"} </PricingCard.Button>\n</PricingCard>\n</Grid.Col> */}","import { gql } from \"@apollo/client\"\n\nexport const GET_ORGANIZATION_CLASSPASSES_QUERY = gql`\n  query OrganizationClasspasses($after: String, $before: String) {\n    organizationClasspasses(first: 15, before: $before, after: $after, archived: false, displayShop: true) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          displayPublic\n          displayShop\n          trialPass\n          name\n          description\n          price\n          priceDisplay\n          financeTaxRate {\n            id\n            name\n          }\n          validity\n          validityUnit\n          validityUnitDisplay\n          classes\n          unlimited\n          organizationMembership {\n            id\n            name\n          }\n          quickStatsAmount\n          financeGlaccount {\n            id \n            name\n          }\n          financeCostcenter {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`\n","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Grid,\n  Icon,\n  List,\n  PricingCard\n} from \"tabler-react\";\nimport ShopClasspassesBase from \"./ShopClasspassesBase\"\nimport ShopClasspassPricingCard from \"../classpass/ShopClasspassPricingCard\"\n\nimport { GET_ORGANIZATION_CLASSPASSES_QUERY } from \"./queries\"\n\n// Example:\n// https://github.com/tabler/tabler-react/blob/master/example/src/interface/PricingCardsPage.react.js\n\n\nfunction ShopClasspasses({ t, match, history }) {\n  const title = t(\"shop.home.title\")\n  const { loading, error, data } = useQuery(GET_ORGANIZATION_CLASSPASSES_QUERY)\n\n  if (loading) return (\n    <ShopClasspassesBase title={title} >\n      {t(\"general.loading_with_dots\")}\n    </ShopClasspassesBase>\n  )\n  if (error) return (\n    <ShopClasspassesBase title={title}>\n      {t(\"shop.classpasses.error_loading\")}\n    </ShopClasspassesBase>\n  )\n\n  console.log(data)\n  const classpasses = data.organizationClasspasses\n  console.log(classpasses)\n\n  return (\n    <ShopClasspassesBase title={title}>\n        <Grid.Row>\n          {classpasses.edges.map(({ node }) => (\n            <Grid.Col md={3}>\n              <ShopClasspassPricingCard\n                classpass={node}\n                btnLink={\"/shop/classpass/\" + node.id}\n              />\n              {/* <PricingCard>\n                <PricingCard.Category>\n                  {node.name}\n                </PricingCard.Category>\n                <PricingCard.Price>\n                  {node.priceDisplay}\n                </PricingCard.Price>\n                <PricingCard.AttributeList>\n                  <PricingCard.AttributeItem>\n                    <b>{(node.unlimited) ? t('general.unlimited') : node.classes }</b> { \" \" }\n                    {((node.classes != 1) || (node.unlimited))? t('general.classes'): t('general.class')}\n                  </PricingCard.AttributeItem>\n                  <PricingCard.AttributeItem>\n                    {t('general.valid_for')} { \" \" }\n                    <b>{node.validity}</b> {' '} {node.validityUnitDisplay}\n                  </PricingCard.AttributeItem>\n                </PricingCard.AttributeList>\n                <Link to={\"/shop/classpass/\" + node.id}>\n                  <PricingCard.Button >\n                    {t(\"shop.classpasses.choose\")} <Icon name=\"chevron-right\" />\n                  </PricingCard.Button>\n                </Link>\n              </PricingCard> */}\n            </Grid.Col>\n          ))}\n        </Grid.Row>\n\n        \n    </ShopClasspassesBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClasspasses))\n\n\n{/* <Grid.Col sm={6} lg={3}>\n<PricingCard active>\n  <PricingCard.Category>{\"Premium\"}</PricingCard.Category>\n  <PricingCard.Price>{\"$49\"} </PricingCard.Price>\n  <PricingCard.AttributeList>\n    <PricingCard.AttributeItem>\n      <strong>10 </strong>\n      {\"Users\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Sharing Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Design Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Private Messages\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Twitter API\"}\n    </PricingCard.AttributeItem>\n  </PricingCard.AttributeList>\n  <PricingCard.Button active>{\"Choose plan\"} </PricingCard.Button>\n</PricingCard>\n</Grid.Col> */}","// @flow\n\nimport React, { useContext } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery, useMutation } from '@apollo/client'\nimport { Link } from 'react-router-dom'\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport moment from 'moment'\n\nimport {\n  Card,\n  Grid,\n  Icon,\n  List\n} from \"tabler-react\"\nimport { TimeStringToJSDateOBJ } from '../../../tools/date_tools'\nimport AppSettingsContext from '../../context/AppSettingsContext'\n\nimport ShopClasspassBase from \"./ShopClasspassBase\"\nimport ShopCheckoutForm from \"../ShopCheckoutForm\"\nimport ShopClasspassesPricingCard from \"./ShopClasspassPricingCard\"\n\nimport { GET_CLASSPASS_QUERY } from \"./queries\"\nimport { GET_CLASS_QUERY } from \"../queries\"\nimport { CREATE_ORDER } from \"../queries\"\n\n\nfunction ShopClasspass({ t, match, history }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n\n  const title = t(\"shop.home.title\")\n  const id = match.params.id\n  const scheduleItemId = match.params.class_id\n  const classDate = match.params.date\n\n  const { loading, error, data } = useQuery(GET_CLASSPASS_QUERY, {\n    variables: { id: id }\n  })\n\n  const { loading: loadingClass, error: errorClass, data: dataClass } = useQuery(GET_CLASS_QUERY, {\n    variables: { scheduleItemId: scheduleItemId, date: classDate },\n    skip: (!scheduleItemId || !classDate)\n  })\n\n  const [createOrder, { data: createOrderData }] = useMutation(CREATE_ORDER)\n\n\n  if (loading) return (\n    <ShopClasspassBase title={title} >\n      {t(\"general.loading_with_dots\")}\n    </ShopClasspassBase>\n  )\n  if (error) return (\n    <ShopClasspassBase title={title}>\n      {t(\"shop.classpass.error_loading\")}\n    </ShopClasspassBase>\n  )\n\n  console.log(data)\n  const classpass = data.organizationClasspass\n  console.log(classpass)\n\n  console.log('DATA CLASS')\n  console.log(dataClass)\n\n  return (\n    <ShopClasspassBase title={title}>\n      <Grid.Row>\n        <Grid.Col md={4}>\n          <ShopClasspassesPricingCard classpass={classpass} active={true} />\n        </Grid.Col>\n        <Grid.Col md={4}>\n          {(dataClass && !loadingClass && !errorClass) ?\n            <Card title={t(\"shop.classpass.class_book_information\")}>\n              <Card.Body>\n                {t(\"shop.classpass.class_book_explanation\")} <br /><br />\n                <b>\n                  {moment(classDate).format(dateFormat)} {' '}\n                  {moment(TimeStringToJSDateOBJ(dataClass.scheduleClass.timeStart)).format(timeFormat)} {' - '}\n                  {moment(TimeStringToJSDateOBJ(dataClass.scheduleClass.timeEnd)).format(timeFormat)} <br />  \n                </b>\n                {dataClass.scheduleClass.organizationClasstype.name + \" \" + t(\"general.at\") + ' ' + \n                  dataClass.scheduleClass.organizationLocationRoom.organizationLocation.name}\n\n              </Card.Body>\n            </Card>\n            : \"\" \n          }\n          <Card title={t(\"shop.classpass.additional_information\")}>\n            <Card.Body>\n              <div dangerouslySetInnerHTML={{__html:classpass.description}}></div>\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={4}>\n          <Card title={t(\"shop.checkout.title\")}>\n            <Card.Body>\n              <Formik\n                initialValues={{ message: \"\" }}\n                // validationSchema={CLASSTYPE_SCHEMA}\n                onSubmit={(values, { setSubmitting }) => {\n\n                    let createOrderInput = {\n                      message: values.message,\n                      organizationClasspass: match.params.id,\n                    }\n\n                    if (scheduleItemId && classDate) {\n                      createOrderInput.attendanceDate = classDate\n                      createOrderInput.scheduleItem = scheduleItemId\n                    }\n\n                    createOrder({ variables: {\n                      input: createOrderInput,\n                      // file: values.image\n                    }, refetchQueries: [\n                        // {query: GET_CLASSTYPES_QUERY, variables: {\"archived\": false }}\n                    ]})\n                    .then(({ data }) => {\n                        console.log('got data', data)\n                        console.log('good...  now redirect to the payment page')\n                        const orderId = data.createFinanceOrder.financeOrder.id\n                        history.push('/shop/checkout/payment/' + orderId)\n                      }).catch((error) => {\n                        toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                            position: toast.POSITION.BOTTOM_RIGHT\n                          })\n                        console.log('there was an error sending the query', error)\n                        setSubmitting(false)\n                      })\n                }}\n                >\n                {({ isSubmitting, errors, values }) => (\n                  <ShopCheckoutForm \n                    isSubmitting={isSubmitting}\n                    errors={errors}\n                    values={values}\n                  />\n                )}\n              </Formik>\n\n              {/* When a user is not logged in, show a login button to redirect to the login page */}\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n      </Grid.Row>\n    </ShopClasspassBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClasspass))\n\n\n{/* <Grid.Col sm={6} lg={3}>\n<PricingCard active>\n  <PricingCard.Category>{\"Premium\"}</PricingCard.Category>\n  <PricingCard.Price>{\"$49\"} </PricingCard.Price>\n  <PricingCard.AttributeList>\n    <PricingCard.AttributeItem>\n      <strong>10 </strong>\n      {\"Users\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Sharing Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Design Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Private Messages\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Twitter API\"}\n    </PricingCard.AttributeItem>\n  </PricingCard.AttributeList>\n  <PricingCard.Button active>{\"Choose plan\"} </PricingCard.Button>\n</PricingCard>\n</Grid.Col> */}","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Icon,\n  List\n} from \"tabler-react\";\nimport ShopBase from \"../ShopBase\"\n\nfunction ShopSubscriptionsBase({ t, match, history, children }) {\n  \n  return (\n    <ShopBase title={t(\"shop.title\")}>\n      <h4>{t(\"shop.subscriptions.title\")}</h4>\n        {children}\n    </ShopBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopSubscriptionsBase))","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Grid,\n  Icon,\n  List,\n  PricingCard\n} from \"tabler-react\";\n\n// Example:\n// https://github.com/tabler/tabler-react/blob/master/example/src/interface/PricingCardsPage.react.js\n\n\nfunction ShopClasspassPricingCard({ t, subscription, btnLink, active=false }) {\n  // classpass should be an object with at least the following values from an organizationClasspass object:\n  // id, name, priceDisplay, unlimited, classes, validity, link\n  return (\n    <PricingCard active={active}>\n      <PricingCard.Category>\n        {subscription.name}\n      </PricingCard.Category>\n      <PricingCard.Price>\n        {subscription.priceTodayDisplay}\n      </PricingCard.Price>\n      <PricingCard.AttributeList>\n        <PricingCard.AttributeItem>\n          <b>{(subscription.unlimited) ? t('general.unlimited') : subscription.classes }</b> { \" \" }\n          {((subscription.classes != 1) || (subscription.unlimited))? t('general.classes'): t('general.class')} / {t('general.month')}\n        </PricingCard.AttributeItem>\n        <PricingCard.AttributeItem>\n          {t('general.min_duration')} { \" \" }\n          <b>{subscription.minDuration}</b> \n        </PricingCard.AttributeItem>\n      </PricingCard.AttributeList>\n      {(btnLink) ?\n        <Link to={btnLink}>\n          <PricingCard.Button >\n            {t(\"shop.subscriptions.choose\")} <Icon name=\"chevron-right\" />\n          </PricingCard.Button>\n        </Link>\n        : \"\"\n      }\n    </PricingCard>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopClasspassPricingCard))\n\n\n{/* <Grid.Col sm={6} lg={3}>\n<PricingCard active>\n  <PricingCard.Category>{\"Premium\"}</PricingCard.Category>\n  <PricingCard.Price>{\"$49\"} </PricingCard.Price>\n  <PricingCard.AttributeList>\n    <PricingCard.AttributeItem>\n      <strong>10 </strong>\n      {\"Users\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Sharing Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Design Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Private Messages\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Twitter API\"}\n    </PricingCard.AttributeItem>\n  </PricingCard.AttributeList>\n  <PricingCard.Button active>{\"Choose plan\"} </PricingCard.Button>\n</PricingCard>\n</Grid.Col> */}","import { gql } from \"@apollo/client\"\n\nexport const GET_ORGANIZATION_SUBSCRIPTIONS_QUERY = gql`\n  query OrganizationSubscriptions($after: String, $before: String) {\n    organizationSubscriptions(first: 15, before: $before, after: $after, archived: false) {\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          archived\n          priceTodayDisplay\n          displayPublic\n          displayShop\n          name\n          description\n          sortOrder\n          minDuration\n          classes\n          subscriptionUnit\n          subscriptionUnitDisplay\n          reconciliationClasses\n          creditValidity\n          unlimited\n          termsAndConditions\n          registrationFee\n          organizationMembership {\n            id\n            name\n          }\n          quickStatsAmount\n          financeGlaccount {\n            id \n            name\n          }\n          financeCostcenter {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`","// @flow\n\nimport React, {Component } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery } from '@apollo/client'\nimport { Link } from 'react-router-dom'\n\nimport {\n  Grid,\n} from \"tabler-react\";\nimport ShopSubscriptionsBase from \"./ShopSubscriptionsBase\"\nimport ShopSubscriptionPricingCard from \"../subscription/ShopSubscriptionPricingCard\"\n\nimport { GET_ORGANIZATION_SUBSCRIPTIONS_QUERY } from \"./queries\"\n\n// Example:\n// https://github.com/tabler/tabler-react/blob/master/example/src/interface/PricingCardsPage.react.js\n\n\nfunction ShopSubscriptions({ t, match, history }) {\n  const title = t(\"shop.home.title\")\n  const { loading, error, data } = useQuery(GET_ORGANIZATION_SUBSCRIPTIONS_QUERY)\n\n  if (loading) return (\n    <ShopSubscriptionsBase title={title} >\n      {t(\"general.loading_with_dots\")}\n    </ShopSubscriptionsBase>\n  )\n  if (error) return (\n    <ShopSubscriptionsBase title={title}>\n      {t(\"shop.subscriptions.error_loading\")}\n    </ShopSubscriptionsBase>\n  )\n\n  console.log(data)\n  const subscriptions = data.organizationSubscriptions\n  console.log(subscriptions)\n\n  return (\n    <ShopSubscriptionsBase title={title}>\n        <Grid.Row>\n          {subscriptions.edges.map(({ node }) => (\n            <Grid.Col md={3}>\n              <ShopSubscriptionPricingCard\n                subscription={node}\n                btnLink={\"/shop/subscription/\" + node.id}\n              />\n            </Grid.Col>\n          ))}\n        </Grid.Row>\n\n        \n    </ShopSubscriptionsBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopSubscriptions))\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\n\nimport ShopBase from \"../ShopBase\"\n\nfunction ShopSubscriptionBase({ t, match, history, children }) {\n  \n  return (\n    <ShopBase \n      title={t(\"shop.title\")}\n      return_url=\"/shop/subscripitons\"\n      checkoutProgress=\"order\"\n    >\n      {children}\n    </ShopBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopSubscriptionBase))","import { gql } from \"@apollo/client\"\n\n\nexport const GET_SUBSCRIPTION_QUERY = gql`\n  query OrganizationSubscription($id: ID!) {\n    organizationSubscription(id:$id) {\n      id\n      archived\n      priceTodayDisplay\n      displayPublic\n      displayShop\n      name\n      description\n      sortOrder\n      minDuration\n      classes\n      subscriptionUnit\n      subscriptionUnitDisplay\n      reconciliationClasses\n      creditValidity\n      unlimited\n      termsAndConditions\n      registrationFee\n      organizationMembership {\n        id\n        name\n      }\n      quickStatsAmount\n      financeGlaccount {\n        id \n        name\n      }\n      financeCostcenter {\n        id\n        name\n      }\n    }\n  }\n`","// @flow\n\nimport React, { useContext } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { useQuery, useMutation } from '@apollo/client'\nimport { Link } from 'react-router-dom'\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport moment from 'moment'\n\nimport {\n  Card,\n  Grid,\n  Icon,\n  List\n} from \"tabler-react\"\nimport { TimeStringToJSDateOBJ } from '../../../tools/date_tools'\nimport AppSettingsContext from '../../context/AppSettingsContext'\n\nimport ShopSubscriptionBase from \"./ShopSubscriptionBase\"\nimport ShopCheckoutForm from \"../ShopCheckoutForm\"\nimport ShopSubscriptionPricingCard from \"./ShopSubscriptionPricingCard\"\n\nimport { GET_SUBSCRIPTION_QUERY } from \"./queries\"\n// import { GET_CLASS_QUERY } from \"../queries\"\nimport { CREATE_ORDER } from \"../queries\"\n\n\nfunction ShopSubscription({ t, match, history }) {\n  const appSettings = useContext(AppSettingsContext)\n  const dateFormat = appSettings.dateFormat\n  const timeFormat = appSettings.timeFormatMoment\n\n  const title = t(\"shop.home.title\")\n  const id = match.params.id\n  // const scheduleItemId = match.params.class_id\n  // const classDate = match.params.date\n\n  const { loading, error, data } = useQuery(GET_SUBSCRIPTION_QUERY, {\n    variables: { id: id }\n  })\n\n  // const { loading: loadingClass, error: errorClass, data: dataClass } = useQuery(GET_CLASS_QUERY, {\n  //   variables: { scheduleItemId: scheduleItemId, date: classDate },\n  //   skip: (!scheduleItemId || !classDate)\n  // })\n\n  const [createOrder, { data: createOrderData }] = useMutation(CREATE_ORDER)\n\n\n  if (loading) return (\n    <ShopSubscriptionBase title={title} >\n      {t(\"general.loading_with_dots\")}\n    </ShopSubscriptionBase>\n  )\n  if (error) return (\n    <ShopSubscriptionBase title={title}>\n      {t(\"shop.subscription.error_loading\")}\n    </ShopSubscriptionBase>\n  )\n\n  console.log(data)\n  const subscription = data.organizationSubscription\n  console.log(subscription)\n\n\n  return (\n    <ShopSubscriptionBase title={title}>\n      <Grid.Row>\n        <Grid.Col md={4}>\n          <ShopSubscriptionPricingCard subscription={subscription} active={true} />\n        </Grid.Col>\n        <Grid.Col md={4}>\n          <Card title={t(\"shop.subscription.additional_information\")}>\n            <Card.Body>\n              <div dangerouslySetInnerHTML={{__html:subscription.description}}></div>\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={4}>\n          <Card title={t(\"shop.checkout.title\")}>\n            <Card.Body>\n              <Formik\n                initialValues={{ message: \"\" }}\n                // validationSchema={CLASSTYPE_SCHEMA}\n                onSubmit={(values, { setSubmitting }) => {\n\n                    let createOrderInput = {\n                      message: values.message,\n                      organizationSubscription: match.params.id,\n                    }\n\n                    createOrder({ variables: {\n                      input: createOrderInput,\n                      // file: values.image\n                    }, refetchQueries: [\n                        // {query: GET_CLASSTYPES_QUERY, variables: {\"archived\": false }}\n                    ]})\n                    .then(({ data }) => {\n                        console.log('got data', data)\n                        console.log('good...  now redirect to the payment page')\n                        const orderId = data.createFinanceOrder.financeOrder.id\n                        history.push('/shop/checkout/payment/' + orderId)\n                      }).catch((error) => {\n                        toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                            position: toast.POSITION.BOTTOM_RIGHT\n                          })\n                        console.log('there was an error sending the query', error)\n                        setSubmitting(false)\n                      })\n                }}\n                >\n                {({ isSubmitting, errors, values }) => (\n                  <ShopCheckoutForm \n                    isSubmitting={isSubmitting}\n                    errors={errors}\n                    values={values}\n                  />\n                )}\n              </Formik>\n              {/* When a user is not logged in, show a login button to redirect to the login page */}\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n      </Grid.Row>\n    </ShopSubscriptionBase>\n  )\n}\n\n\nexport default withTranslation()(withRouter(ShopSubscription))\n\n\n{/* <Grid.Col sm={6} lg={3}>\n<PricingCard active>\n  <PricingCard.Category>{\"Premium\"}</PricingCard.Category>\n  <PricingCard.Price>{\"$49\"} </PricingCard.Price>\n  <PricingCard.AttributeList>\n    <PricingCard.AttributeItem>\n      <strong>10 </strong>\n      {\"Users\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Sharing Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available>\n      {\"Design Tools\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Private Messages\"}\n    </PricingCard.AttributeItem>\n    <PricingCard.AttributeItem hasIcon available={false}>\n      {\"Twitter API\"}\n    </PricingCard.AttributeItem>\n  </PricingCard.AttributeList>\n  <PricingCard.Button active>{\"Choose plan\"} </PricingCard.Button>\n</PricingCard>\n</Grid.Col> */}","import { t } from 'i18next'\nimport * as Yup from 'yup'\n\nexport const PASSWORD_CHANGE_SCHEMA = Yup.object().shape({\n    passwordCurrent: Yup.string()\n      .required(t('yup.field_required')),\n    passwordNew: Yup.string()\n      .required(t('yup.field_required'))\n      .min(2, t('yup.min_len_9')),\n    passwordNew2: Yup.string()\n      .oneOf([Yup.ref('passwordNew'), null], t('yup.passwords_must_match')),\n  })\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { v4 } from 'uuid'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Card,\n  Dimmer,\n  Form,\n  Grid\n} from \"tabler-react\"\n\n\n// import CSDatePicker from \"../../ui/CSDatePicker\"\n// import ISO_COUNTRY_CODES from \"../../../tools/iso_country_codes\"\n\n\nconst UserPasswordChangeForm = ({ t, history, isSubmitting, errors, values, return_url, setFieldTouched, setFieldValue }) => (\n  <FoForm className=\"card\" autoComplete=\"off\">\n    <Card.Body className=\"p-6\">\n      <Card.Title>\n        {t('user.change_password.title')}\n      </Card.Title>\n      <Form.Group label={t('user.change_password.password_current')}>\n        <Field type=\"password\" \n                name=\"passwordCurrent\" \n                className={(errors.passwordCurrent) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\" />\n        <ErrorMessage name=\"passwordCurrent\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('user.change_password.password_new')}>\n        <Field type=\"password\" \n                name=\"passwordNew\" \n                className={(errors.passwordNew) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\" />\n        <ErrorMessage name=\"passwordNew\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('user.change_password.password_new_repeat')}>\n        <Field type=\"password\" \n                name=\"passwordNew2\" \n                className={(errors.passwordNew2) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\" />\n        <ErrorMessage name=\"passwordNew2\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Footer>\n        <Button \n          block\n          loading={isSubmitting}\n          color=\"primary\"\n          type=\"submit\" \n          disabled={isSubmitting}\n        >\n          {t('user.change_password.title')}\n        </Button>\n      </Form.Footer>\n    </Card.Body>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(UserPasswordChangeForm))\n\n","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\nimport { ToastContainer, Slide } from 'react-toastify'\n\nimport {\n  Container,\n  Grid,\n  Page\n} from \"tabler-react\"\n\n\nfunction CSStandalonePage({ t, urlLogo=\"\", children}) {\n\n  return (\n    <Page>\n      <div className=\"page-single\">\n        <Container>\n          <Grid.Row>\n            <div className=\"col col-login mx-auto\">            \n              <div className=\"text-center mb-5\">\n                { (urlLogo) ? <img src={urlLogo} className=\"h-9\" alt=\"logo\" /> : \"\" }\n              </div>\n              {children}\n              <ToastContainer \n                autoClose={5000} \n                transition={Slide}\n              />\n            </div>\n          </Grid.Row>\n        </Container>\n      </div>\n    </Page>\n  )\n}\n\nexport default withTranslation()(CSStandalonePage)\n\n\n\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\nimport { PASSWORD_CHANGE_SCHEMA } from './yupSchema'\nimport OrganizationContext from '../../context/OrganizationContext'\n\nimport {\n  Button,\n  Card,\n  Icon,\n  List,\n  StandaloneFormPage,\n} from \"tabler-react\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport { UPDATE_ACCOUNT_PASSWORD } from \"../../../queries/system/auth\"\nimport CSLS from \"../../../tools/cs_local_storage\"\nimport UserPasswordChangeForm from './UserPasswordChangeForm';\n\nimport CSStandaloneFormPage from \"../../ui/CSStandaloneFormPage\"\n\n\nfunction UserChangePassword({t, match, history}) {\n  const organization = useContext(OrganizationContext)\n  console.log(organization)\n\n  let errorMessage\n  const [updatePassword, { data }] = useMutation(UPDATE_ACCOUNT_PASSWORD)\n\n  return (\n    <CSStandaloneFormPage urlLogo={organization.urlLogoLogin} >\n      {/* TODO: point imageURL to logo */}\n      <Formik\n        initialValues={{ \n          passwordCurrent: \"\",\n          passwordNew: \"\",\n          passwordNew2: \"\"\n        }}\n        validationSchema={PASSWORD_CHANGE_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n            console.log('submit values:')\n            console.log(values)\n\n            let vars = {\n              input: {\n                passwordCurrent: values.passwordCurrent,\n                passwordNew: values.passwordNew\n              }\n            }\n\n            updatePassword({ variables: vars })\n              .then(({ data }) => {\n                console.log('got data', data)\n                setTimeout(() => toast.success((t('user.change_password.success')), {\n                  position: toast.POSITION.BOTTOM_RIGHT\n                }), 300)\n                window.history.back()\n              }).catch((error) => {\n                console.log('#############')\n                console.log(error.messages)\n                console.log(error.graphQLErrors)\n                console.log(Object.keys(error))\n\n                if (error.graphQLErrors) {\n                  let i\n                  for (i = 0; i < error.graphQLErrors.length; i++) {\n                    toast.error(error.graphQLErrors[0].message\n                        .replace(/'/g, \"\")\n                        .replace(/,/g, \"\")\n                        .replace(/\\[/g, \"\")\n                        .replace(/\\]/g, \"\"), {\n                      position: toast.POSITION.BOTTOM_RIGHT\n                    })\n                  }\n                } else {\n                  // Show general error message\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                }\n                \n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n        }}\n        >\n        {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n          <UserPasswordChangeForm\n            isSubmitting={isSubmitting}\n            etFieldValue={setFieldValue}\n            esetFieldTouched={setFieldTouched}\n            errors={errors}\n            values={values}\n          />\n        )}\n      </Formik>    \n      <h5>{t('user.change_password.requirements')}</h5>\n      <List>\n        <List.Item>{t('user.change_password.requirement_not_a_digit')}</List.Item>\n        <List.Item>{t('user.change_password.requirement_not_common')}</List.Item>\n        <List.Item>{t('user.change_password.requirement_min_length')}</List.Item>\n        <List.Item>{t('user.change_password.requirement_not_similar_account')}</List.Item>\n      </List>\n      {/* Cancel button below form */}\n      <Button \n        block\n        color=\"link\"\n        onClick={(event) => {\n          event.preventDefault()  \n          window.history.back()\n        }}\n      >\n        {t('general.cancel')}\n      </Button>\n    </CSStandaloneFormPage>\n  )\n}\n\n\nexport default withTranslation()(withRouter(UserChangePassword))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { v4 } from 'uuid'\nimport { withRouter } from \"react-router\"\nimport { Form as FoForm, Field, ErrorMessage } from 'formik'\n\n\nimport {\n  Button,\n  Card,\n  Dimmer,\n  Form,\n  Grid\n} from \"tabler-react\"\n\n\n// import CSDatePicker from \"../../ui/CSDatePicker\"\n// import ISO_COUNTRY_CODES from \"../../../tools/iso_country_codes\"\n\n\nconst UserLoginForm = ({ t, history, isSubmitting, errors }) => (\n  <FoForm className=\"card\" autoComplete=\"off\">\n    <Card.Body className=\"p-6\">\n      <Card.Title>\n        {t('user.login.title')}\n      </Card.Title>\n      <Form.Group label={t('user.login.email')}>\n        <Field type=\"text\" \n                name=\"email\" \n                placeholder={t('user.login.email_placeholder')}\n                className={(errors.email) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\" />\n        <ErrorMessage name=\"email\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Group label={t('general.password')}>\n        <Field type=\"password\" \n                name=\"password\" \n                placeholder={t('user.login.password_placeholder')}\n                className={(errors.password) ? \"form-control is-invalid\" : \"form-control\"} \n                autoComplete=\"off\" />\n        <ErrorMessage name=\"password\" component=\"span\" className=\"invalid-feedback\" />\n      </Form.Group>\n      <Form.Footer>\n        <Grid.Row>\n          <Grid.Col md={6}>\n            <Button \n              block\n              loading={isSubmitting}\n              color=\"primary\"\n              type=\"submit\" \n              disabled={isSubmitting}\n            >\n              {t('general.login')}\n            </Button>\n          </Grid.Col>\n          <Grid.Col md={6}>\n            <Button \n              color=\"link\"\n              RootComponent=\"a\"\n              href={(window.location.hostname === \"localhost\" || window.location.hostname === \"127.0.0.1\") ? \n                \"http://localhost:8000/d/accounts/password/reset/\" :\n                \"/d/accounts/password/reset/\"\n              } \n            >\n              {t('user.register.reset_password')}\n            </Button>\n          </Grid.Col>\n        </Grid.Row>\n      </Form.Footer>\n    </Card.Body>\n  </FoForm>\n)\n\nexport default withTranslation()(withRouter(UserLoginForm))\n\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { useMutation } from \"@apollo/client\"\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n// import { GET_ACCOUNTS_QUERY, GET_ACCOUNT_QUERY } from './queries'\n// import { ACCOUNT_SCHEMA } from './yupSchema'\n\nimport {\n  Button,\n  Icon,\n} from \"tabler-react\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationContext from '../../context/OrganizationContext'\n\nimport { TOKEN_AUTH, TOKEN_REFRESH } from \"../../../queries/system/auth\"\nimport { CSAuth } from \"../../../tools/authentication\"\nimport CSLS from \"../../../tools/cs_local_storage\"\n\nimport UserLoginForm from \"./UserLoginForm\"\nimport CSStandaloneFormPage from \"../../ui/CSStandaloneFormPage\"\n\n\nfunction UserLogin({t, match, history}) {\n  const organization = useContext(OrganizationContext)\n  console.log(organization)\n\n  let errorMessage\n  const [ doTokenAuth ] = useMutation(TOKEN_AUTH)\n  const [ doTokenRefresh ] = useMutation(TOKEN_REFRESH)\n\n  return (\n    <CSStandaloneFormPage urlLogo={organization.urlLogoLogin} >\n      <div className=\"text-center text-muted mb-1\">\n        {organization ? organization.name : \"\"}\n      </div>\n      <Formik\n        initialValues={{ \n          email: \"\",\n          password: \"\"\n        }}\n        // validationSchema={ACCOUNT_SCHEMA}\n        onSubmit={(values, { setSubmitting }) => {\n            let vars = {\n              username: values.email,\n              password: values.password,\n            }\n\n            doTokenAuth({ variables: vars,\n              refetchQueries: [\n                // // Refetch list\n                // {query: GET_ACCOUNTS_QUERY, variables: get_list_query_variables()},\n                // // Refresh local cached results for this account\n                // {query: GET_ACCOUNT_QUERY, variables: {\"id\": match.params.account_id}}\n            ]})\n            .then(({ data }) => {\n                console.log('got data', data)\n                // TODO: Add link to \"feature switcher\" here\n                const next = localStorage.getItem(CSLS.AUTH_LOGIN_NEXT) || \"/user/welcome\"\n                CSAuth.login(data.tokenAuth.token)\n                doTokenRefresh({\n                  variables: { token: data.tokenAuth.token }\n                }).then(({ data }) => {\n                  console.log('got refresh data', data)\n                  CSAuth.updateTokenInfo(data.refreshToken)\n                  // Login success!\n                  setTimeout(() => history.push(next), 500)\n                }).catch((error) => {\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                  console.log('there was an error verifying the login', error)\n                  setSubmitting(false)\n                })\n              }).catch((error) => {\n                if ( error.message.includes('credentials') ) {\n                  // Request user to input valid credentials\n                  toast.info((t('user.login.invalid_credentials')), {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                } else {\n                  // Show general error message\n                  toast.error((t('general.toast_server_error')) + ': ' +  error, {\n                    position: toast.POSITION.BOTTOM_RIGHT\n                  })\n                }\n                console.log('there was an error sending the query', error)\n                setSubmitting(false)\n              })\n        }}\n        >\n        {({ isSubmitting, errors }) => (\n          <UserLoginForm\n            isSubmitting={isSubmitting}\n            errors={errors}\n          />\n        )}\n      </Formik>    \n      <div className=\"text-center\">\n        <h5>{t('user.register.create_account')}</h5>\n        {t('user.register.create_account_msg')} <br />\n        {t('user.register.create_account_msg_click_below')} <br />\n      </div>\n      <Button \n        block\n        color=\"link\"\n        RootComponent=\"a\"\n        href={(window.location.hostname === \"localhost\" || window.location.hostname === \"dev.costasiella.com\") ? \n          \"http://localhost:8000/d/accounts/signup/\" :\n          \"/d/accounts/signup/\"\n        } \n      >\n        {t('user.register.create_account')} <Icon name=\"chevron-right\" />\n      </Button>\n    </CSStandaloneFormPage>\n\n\n    // <Page>\n    //   <div className=\"page-single\">\n    //     <Container>\n    //       <Grid.Row>\n    //         <div className=\"col col-login mx-auto\">            \n    //           <div className=\"text-center mb-5\">\n    //             <img src={organization.urlLogoLogin} className=\"h-9\" alt=\"logo\" />\n    //           </div>\n              \n    //         </div>\n    //       </Grid.Row>\n    //     </Container>\n    //   </div>\n    // </Page>\n  )\n}\n\n\n\n\n// class RelationsAccountProfile extends Component {\n//   constructor(props) {\n//     super(props)\n//     console.log(\"Organization profile props:\")\n//     console.log(props)\n//   }\n\n//   render() {\n//     const t = this.props.t\n//     const match = this.props.match\n//     const history = this.props.history\n//     const account_id = match.params.account_id\n//     const return_url = \"/relations/accounts\"\n\n//     return (\n//       <SiteWrapper>\n//         <div className=\"my-3 my-md-5\">\n//           <Container>\n//             <Query query={GET_ACCOUNT_QUERY} variables={{ id: account_id }} >\n//               {({ loading, error, data, refetch }) => {\n//                   // Loading\n//                   if (loading) return <p>{t('general.loading_with_dots')}</p>\n//                   // Error\n//                   if (error) {\n//                     console.log(error)\n//                     return <p>{t('general.error_sad_smiley')}</p>\n//                   }\n                  \n//                   const initialData = data.account;\n//                   console.log('query data')\n//                   console.log(data)\n\n//                   // DatePicker doesn't like a string as an initial value\n//                   // This makes it a happy DatePicker :)\n//                   let dateOfBirth = null\n//                   if (initialData.dateOfBirth) {\n//                     dateOfBirth = new Date(initialData.dateOfBirth)\n//                   }\n\n//                   return (\n//                     <div>\n//                       <Page.Header title={initialData.firstName + \" \" + initialData.lastName}>\n//                         <RelationsAccountsBack />\n//                       </Page.Header>\n//                       <Grid.Row>\n//                         <Grid.Col md={9}>\n//                         <Card>\n//                           <Card.Header>\n//                             <Card.Title>{t('relations.accounts.profile')}</Card.Title>\n//                             {console.log(match.params.account_id)}\n//                           </Card.Header>\n//                         <Mutation mutation={UPDATE_ACCOUNT}> \n//                          {(updateAccount, { data }) => (\n//                           <Formik\n//                             initialValues={{ \n//                               customer: initialData.customer, \n//                               teacher: initialData.teacher, \n//                               employee: initialData.employee, \n//                               firstName: initialData.firstName, \n//                               lastName: initialData.lastName, \n//                               email: initialData.email,\n//                               dateOfBirth: dateOfBirth,\n//                               gender: initialData.gender,\n//                               emergency: initialData.emergency,\n//                               phone: initialData.phone,\n//                               mobile: initialData.mobile,\n//                               address: initialData.address,\n//                               postcode: initialData.postcode,\n//                               city: initialData.city,\n//                               country: initialData.country,\n//                             }}\n//                             validationSchema={ACCOUNT_SCHEMA}\n//                             onSubmit={(values, { setSubmitting }) => {\n//                                 console.log('submit values:')\n//                                 console.log(values)\n\n//                                 let input_vars = {\n//                                   id: match.params.account_id,\n//                                   customer: values.customer,\n//                                   teacher: values.teacher,\n//                                   employee: values.employee,\n//                                   firstName: values.firstName,\n//                                   lastName: values.lastName,\n//                                   email: values.email,\n//                                   gender: values.gender,\n//                                   emergency: values.emergency,\n//                                   phone: values.phone,\n//                                   mobile: values.mobile,\n//                                   address: values.address,\n//                                   postcode: values.postcode,\n//                                   city: values.city,\n//                                   country: values.country\n//                                 }\n\n//                                 if (values.dateOfBirth) {\n//                                   input_vars['dateOfBirth'] = dateToLocalISO(values.dateOfBirth)\n//                                 } \n\n//                                 updateAccount({ variables: {\n//                                   input: input_vars\n//                                 }, refetchQueries: [\n//                                     // Refetch list\n//                                     {query: GET_ACCOUNTS_QUERY, variables: get_list_query_variables()},\n//                                     // Refresh local cached results for this account\n//                                     {query: GET_ACCOUNT_QUERY, variables: {\"id\": match.params.account_id}}\n//                                 ]})\n//                                 .then(({ data }) => {\n//                                     console.log('got data', data)\n//                                     toast.success((t('relations.accounts.toast_edit_success')), {\n//                                         position: toast.POSITION.BOTTOM_RIGHT\n//                                       })\n//                                     setSubmitting(false)\n//                                   }).catch((error) => {\n//                                     toast.error((t('general.toast_server_error')) + ': ' +  error, {\n//                                         position: toast.POSITION.BOTTOM_RIGHT\n//                                       })\n//                                     console.log('there was an error sending the query', error)\n//                                     setSubmitting(false)\n//                                   })\n//                             }}\n//                             >\n//                             {({ isSubmitting, errors, values, setFieldTouched, setFieldValue }) => (\n//                               <RelationsAccountProfileForm\n//                                 isSubmitting={isSubmitting}\n//                                 setFieldTouched={setFieldTouched}\n//                                 setFieldValue={setFieldValue}\n//                                 errors={errors}\n//                                 values={values}\n//                               />\n//                             )}\n//                           </Formik>\n//                         )}\n//                       </Mutation>\n//                     </Card>\n//                     </Grid.Col>                                    \n//                     <Grid.Col md={3}>\n//                       <ProfileCardSmall user={initialData}/>\n//                       <ProfileMenu \n//                         activeLink='profile'\n//                         account_id={account_id}\n//                       /> \n//                     </Grid.Col>\n//                   </Grid.Row>\n//                 </div>\n//               )}}\n//             </Query>\n//           </Container>\n//         </div>\n//     </SiteWrapper>\n//     )}\n//   }\n\n\nexport default withTranslation()(withRouter(UserLogin))","// @flow\n\nimport React, { useContext, useState } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { ToastContainer, Slide} from 'react-toastify'\nimport { toast } from 'react-toastify'\n\n// import { GET_ACCOUNTS_QUERY, GET_ACCOUNT_QUERY } from './queries'\n// import { ACCOUNT_SCHEMA } from './yupSchema'\n\nimport {\n  Card,\n  Button,\n  Icon,\n  StandaloneFormPage,\n} from \"tabler-react\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationContext from '../../context/OrganizationContext'\nimport { CSAuth } from \"../../../tools/authentication\"\nimport CSStandaloneFormPage from \"../../ui/CSStandaloneFormPage\"\n\nfunction UserLoginRequired({t, match, history}) {\n  const organization = useContext(OrganizationContext)\n  console.log(organization)\n\n  const [active, setActive] = useState(false);\n\n  return (\n    <CSStandaloneFormPage>\n      {/* TODO: point imageURL to logo */}\n      <Card>\n        <Card.Body>\n          <Card.Title>\n            {t('user.login_required.title')}\n          </Card.Title>\n          {t('user.login_required.message')} <br /><br />\n          <Button \n            block\n            loading={active}\n            disabled={active}\n            color=\"primary\"\n            type=\"button\" \n            onClick={() => {\n              setActive(true)\n              setTimeout(() => history.push('/user/login'), 250)\n            }}\n          >\n            {t('user.login_required.go_to_login')} <Icon name=\"chevron-right\" />\n          </Button>\n        </Card.Body>\n      </Card>\n      <ToastContainer \n          autoClose={5000} \n          transition={Slide}\n      />\n    </CSStandaloneFormPage>\n  )\n}\n\nexport default withTranslation()(withRouter(UserLoginRequired))","// @flow\n\nimport React, { useContext, useState } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\nimport { Formik } from 'formik'\nimport { toast } from 'react-toastify'\n\n// import { GET_ACCOUNTS_QUERY, GET_ACCOUNT_QUERY } from './queries'\n// import { ACCOUNT_SCHEMA } from './yupSchema'\n\nimport OrganizationContext from '../../context/OrganizationContext'\n\nimport {\n  Card,\n  Button,\n  StandaloneFormPage,\n} from \"tabler-react\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport { CSAuth } from \"../../../tools/authentication\"\nimport { TOKEN_COOKIE_DELETE, TOKEN_REFRESH_COOKIE_DELETE } from \"../../../queries/system/auth\"\n\nimport CSStandaloneFormPage from \"../../ui/CSStandaloneFormPage\"\n\n\nfunction UserLogout({t, match, history}) {\n  const [ deleteCookie ] = useMutation(TOKEN_COOKIE_DELETE)\n  const [ deleteRefreshCookie ] = useMutation(TOKEN_REFRESH_COOKIE_DELETE)\n  const [active, setActive] = useState(false)\n\n  const organization = useContext(OrganizationContext)\n  console.log(organization)\n\n  return (\n    <CSStandaloneFormPage urlLogo={organization.urlLogoLogin}>\n      {/* TODO: point imageURL to logo */}\n      <Card>\n        <Card.Body>\n          <Card.Title>\n            {t('user.logout.title')}\n          </Card.Title>\n          {t('user.logout.confirmation_message')} <br /><br />\n          <Button \n            block\n            loading={active}\n            disabled={active}\n            color=\"primary\"\n            type=\"button\" \n            onClick={() => {\n              setActive(true)\n              CSAuth.logout()\n              deleteCookie().then(({ data }) => {\n                console.log('got data', data)\n                })\n              .catch((error) => {\n                console.log(error)\n              })\n              deleteRefreshCookie().then(({ data }) => {\n                console.log('got data', data)\n                })\n              .catch((error) => {\n                console.log(error)\n              })\n              setTimeout(() => toast.info(t('user.logout.success'), {\n                position: toast.POSITION.BOTTOM_RIGHT\n              }), 350)\n              setTimeout(() => history.push('/'), 250)\n            }}\n          >\n            {t('general.logout')}\n          </Button>\n        </Card.Body>\n      </Card>\n      <Button \n        block\n        color=\"link\"\n        onClick={(event) => {\n          event.preventDefault()  \n          window.history.back()\n        }}\n      >\n        {t('general.cancel')}\n      </Button>\n    </CSStandaloneFormPage>\n  )\n}\n\nexport default withTranslation()(withRouter(UserLogout))","// @flow\n\nimport React, { useContext, useState } from 'react'\nimport { gql } from \"@apollo/client\"\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Formik } from 'formik'\nimport { ToastContainer } from 'react-toastify'\nimport { toast } from 'react-toastify'\n\n// import { GET_ACCOUNTS_QUERY, GET_ACCOUNT_QUERY } from './queries'\n// import { ACCOUNT_SCHEMA } from './yupSchema'\n\nimport {\n  Card,\n  Button,\n  Icon,\n  StandaloneFormPage,\n} from \"tabler-react\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport OrganizationContext from '../../context/OrganizationContext'\nimport { CSAuth } from \"../../../tools/authentication\"\nimport CSStandaloneFormPage from \"../../ui/CSStandaloneFormPage\"\n\nfunction UserSessionExpired({t, match, history}) {\n  const organization = useContext(OrganizationContext)\n  console.log(organization)\n\n  const [active, setActive] = useState(false);\n\n  return (\n    <CSStandaloneFormPage>\n      {/* TODO: point imageURL to logo */}\n      <Card>\n        <Card.Body>\n          <Card.Title>\n            {t('user.session_expired.title')}\n          </Card.Title>\n          {t('user.session_expired.message')} <br /><br />\n          <Button \n            block\n            loading={active}\n            disabled={active}\n            color=\"primary\"\n            type=\"button\" \n            onClick={() => {\n              setActive(true)\n              setTimeout(() => history.push('/user/login'), 250)\n            }}\n          >\n            {t('user.session_expired.go_to_login')} <Icon name=\"chevron-right\" />\n          </Button>\n        </Card.Body>\n      </Card>\n      <ToastContainer autoClose={5000}/>\n    </CSStandaloneFormPage>\n  )\n}\n\nexport default withTranslation()(withRouter(UserSessionExpired))","// @flow\n\nimport React from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Link } from 'react-router-dom'\nimport { v4 } from 'uuid'\nimport { ToastContainer, Slide } from 'react-toastify'\n\nimport {\n  Container,\n  Grid,\n  Page\n} from \"tabler-react\"\n\n\nfunction CSStandalonePageWide({ t, urlLogo=\"\", children}) {\n\n  return (\n    <Page>\n      <div className=\"page-single\">\n        <Container>\n          <Grid.Row>\n            <div className=\"col mx-auto\">            \n              <div className=\"text-center mb-5\">\n                { (urlLogo) ? <img src={urlLogo} className=\"h-9\" alt=\"logo\" /> : \"\" }\n              </div>\n              {children}\n              <ToastContainer \n                autoClose={5000} \n                transition={Slide}\n              />\n            </div>\n          </Grid.Row>\n        </Container>\n      </div>\n    </Page>\n  )\n}\n\nexport default withTranslation()(CSStandalonePageWide)\n\n\n\n","// @flow\n\nimport React, { useContext } from 'react'\nimport { useQuery } from \"@apollo/client\";\nimport { withTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { Link } from \"react-router-dom\"\n\nimport GET_USER_PROFILE from \"../../../queries/system/get_user_profile\"\n\n\nimport OrganizationContext from '../../context/OrganizationContext'\n\nimport {\n  Card,\n  Button,\n  Grid,\n  Icon\n} from \"tabler-react\"\nimport HasPermissionWrapper from \"../../HasPermissionWrapper\"\n\nimport CSStandalonePageWide from \"../../ui/CSStandalonePageWide\"\n\n\nfunction Welcome({t, match, history}) {\n  const organization = useContext(OrganizationContext)\n  console.log(organization)\n  const { loading, error, data } = useQuery(GET_USER_PROFILE)\n\n  if (loading) return (\n    <CSStandalonePageWide urlLogo={organization.urlLogoLogin}>\n      {t(\"general.loading_with_dots\")}\n    </CSStandalonePageWide>\n  )\n  if (error) return (\n    <CSStandalonePageWide urlLogo={organization.urlLogoLogin}>\n      {t(\"shop.account.class_info.error_loading_data\")}\n    </CSStandalonePageWide>\n  )\n\n  const user = data.user\n  console.log(user)\n\n  if (!user.employee && !user.teacher) {\n    history.push(\"/\")\n  } \n\n\n  return (\n    <CSStandalonePageWide urlLogo={organization.urlLogoLogin}>\n      <div className=\"text-center mb-5\">\n        <h2>{t(\"general.welcome\")} {user.firstName}</h2>\n        <h5>{t(\"user.welcome.where_next_question\")}</h5>\n      </div>\n      <Grid.Row>\n        <Grid.Col md={3} offsetMd={3}>\n          <Card>\n            <Card.Body>\n              <h5>{t(\"shop.title\")}</h5>\n              {t(\"user.welcome.shop_explanation\")} <br /><br />\n              <Link to=\"/\">\n                <Button \n                  block\n                  outline\n                  color=\"primary\"\n                >\n                  {t(\"user.welcome.shop_to\")} <Icon name=\"chevron-right\" />\n                </Button>\n              </Link>\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <Grid.Col md={3}>\n          <Card>\n            <Card.Body>\n              <h5>{t(\"general.backend\")}</h5>\n              {t(\"user.welcome.backend_explantion\")} <br /><br />\n              <Link to=\"/backend\">\n                <Button \n                  block\n                  outline\n                  color=\"primary\"\n                >\n                  {t(\"user.welcome.backend_to\")} <Icon name=\"chevron-right\" />\n                </Button>\n              </Link>\n            </Card.Body>\n          </Card>\n        </Grid.Col>\n        <HasPermissionWrapper resource=\"selfcheckin\" permission=\"view\">\n          <Grid.Col md={3} offsetMd={3}>\n            <Card>\n              <Card.Body>\n                <h5>{t(\"selfcheckin.home.title\")}</h5>\n                {t(\"user.welcome.selfcheckin_explantion\")} <br /><br />\n                <Link to=\"/selfcheckin\">\n                  <Button \n                    block\n                    outline\n                    color=\"primary\"\n                  >\n                    {t(\"user.welcome.selfcheckin_to\")} <Icon name=\"chevron-right\" />\n                  </Button>\n                </Link>\n              </Card.Body>\n            </Card>\n          </Grid.Col>\n        </HasPermissionWrapper>\n      </Grid.Row>\n    </CSStandalonePageWide>\n  )\n}\n\nexport default withTranslation()(withRouter(Welcome))","// @flow\n\nimport * as React from \"react\";\n\nimport { Error404Page } from \"tabler-react\";\n\ntype Props = {||}\n\nfunction Error404(props: Props): React.Node {\n  return <Error404Page />\n}\n\nexport default Error404\n","// import React, { Component } from 'react';\n// import logo from './logo.svg';\n\nimport React, { Component } from 'react'\nimport {\n  Route, \n  Switch, \n  HashRouter,\n  Redirect\n} from 'react-router-dom'\nimport { withTranslation } from 'react-i18next'\nimport { useQuery, useMutation } from \"@apollo/client\"\nimport { toast } from 'react-toastify'\n\nimport { GET_APP_SETTINGS_QUERY } from \"./components/settings/general/date_time/queries\"\nimport { GET_ORGANIZATION_QUERY } from \"./components/organization/organization/queries\"\nimport { TOKEN_REFRESH } from \"./queries/system/auth\"\n\n// Import moment locale\nimport moment from 'moment'\nimport 'moment/locale/nl'\n\nimport { AppSettingsProvider } from \"./components/context/AppSettingsContext\"\nimport { OrganizationProvider } from \"./components/context/OrganizationContext\"\n\nimport HomeHome from './components/home/home/HomeHome'\n\nimport AutomationHome from './components/automation/home/AutomationHome'\nimport AutomationAccountSubscriptionCredits from './components/automation/account/subscription/credits/AutomationAccountSubscriptionCredits'\nimport AutomationAccountSubscriptionInvoices from './components/automation/account/subscription/invoices/AutomationAccountSubscriptionInvoices'\nimport AutomationAccountSubscriptionInvoicesAdd from './components/automation/account/subscription/invoices/AutomationAccountSubscriptionInvoicesAdd'\nimport AutomationAccountSubscriptionCreditAdd from './components/automation/account/subscription/credits/AutomationAccountSubscriptionCreditAdd'\nimport AutomationAccountSubscriptionMollieCollections \n  from './components/automation/account/subscription/mollie_collection/AutomationAccountSubscriptionMollieCollections'\nimport AutomationAccountSubscriptionMollieCollectionAdd\n  from './components/automation/account/subscription/mollie_collection/AutomationAccountSubscriptionMollieCollectionAdd'\n\nimport FinanceHome from './components/finance/home/FinanceHome'\nimport FinanceCostCenters from './components/finance/costcenters/FinanceCostCenters'\nimport FinanceCostCenterAdd from './components/finance/costcenters/FinanceCostCenterAdd'\nimport FinanceCostCenterEdit from './components/finance/costcenters/FinanceCostCenterEdit'\nimport FinanceGLAccounts from './components/finance/glaccounts/FinanceGLAccounts'\nimport FinanceGLAccountAdd from './components/finance/glaccounts/FinanceGLAccountAdd'\nimport FinanceGLAccountEdit from './components/finance/glaccounts/FinanceGLAccountEdit'\nimport FinanceInvoices from './components/finance/invoices/FinanceInvoices'\nimport FinanceInvoiceEdit from './components/finance/invoices/edit/FinanceInvoiceEdit'\nimport FinanceInvoiceGroups from './components/finance/invoices/groups/FinanceInvoiceGroups'\nimport FinanceInvoiceGroupAdd from './components/finance/invoices/groups/FinanceInvoiceGroupAdd'\nimport FinanceInvoiceGroupEdit from './components/finance/invoices/groups/FinanceInvoiceGroupEdit'\nimport FinanceInvoiceGroupDefaults from './components/finance/invoices/groups/defaults/FinanceInvoiceGroupDefaults'\nimport FinanceInvoicePaymentAdd from './components/finance/invoices/payments/FinanceInvoicePaymentAdd'\nimport FinanceInvoicePaymentEdit from './components/finance/invoices/payments/FinanceInvoicePaymentEdit'\nimport FinanceOrders from './components/finance/orders/FinanceOrders'\nimport FinancePaymentBatches from './components/finance/payment_batches/FinancePaymentBatches'\nimport FinancePaymentBatchAddWhat from './components/finance/payment_batches/FinancePaymentBatchAddWhat'\nimport FinancePaymentBatchView from './components/finance/payment_batches/FinancePaymentBatchView'\nimport FinancePaymentCollectionBatchAdd from './components/finance/payment_batches/FinancePaymentCollectionBatchAdd'\nimport FinancePaymentCollectionBatchEdit from './components/finance/payment_batches/FinancePaymentCollectionBatchEdit'\nimport FinancePaymentBatchCategories from './components/finance/payment_batch_categories/FinancePaymentBatchCategories'\nimport FinancePaymentBatchCategoryAdd from './components/finance/payment_batch_categories/FinancePaymentBatchCategoryAdd'\nimport FinancePaymentBatchCategoryEdit from './components/finance/payment_batch_categories/FinancePaymentBatchCategoryEdit'\nimport FinanceOrderEdit from './components/finance/orders/edit/FinanceOrderEdit'\nimport FinancePaymentMethods from './components/finance/payment_methods/FinancePaymentMethods'\nimport FinancePaymentMethodAdd from './components/finance/payment_methods/FinancePaymentMethodAdd'\nimport FinancePaymentMethodEdit from './components/finance/payment_methods/FinancePaymentMethodEdit'\nimport FinanceTaxRates from './components/finance/taxrates/FinanceTaxRates'\nimport FinanceTaxRatesAdd from './components/finance/taxrates/FinanceTaxRateAdd'\nimport FinanceTaxRatesEdit from './components/finance/taxrates/FinanceTaxRateEdit'\n\nimport InsightHome from './components/insight/home/InsightHome'\nimport InsightClasspasses from './components/insight/classpasses/InsightClasspasses'\nimport InsightSubscriptions from './components/insight/subscriptions/InsightSubscriptions'\n\nimport OrganizationHome from './components/organization/home/OrganizationHome'\nimport OrganizationEdit from './components/organization/organization/OrganizationEdit'\nimport OrganizationBranding from './components/organization/organization/branding/OrganizationBranding'\nimport OrganizationBrandingEdit from './components/organization/organization/branding/OrganizationBrandingEdit'\nimport OrganizationAnnouncements from './components/organization/announcements/OrganizationAnnouncements'\nimport OrganizationAnnouncementAdd from './components/organization/announcements/OrganizationAnnouncementAdd'\nimport OrganizationAnnouncementEdit from './components/organization/announcements/OrganizationAnnouncementEdit'\nimport OrganizationAppointments from './components/organization/appointment_categories/appointments/OrganizationAppointments'\nimport OrganizationAppointmentAdd from './components/organization/appointment_categories/appointments/OrganizationAppointmentAdd'\nimport OrganizationAppointmentEdit from './components/organization/appointment_categories/appointments/OrganizationAppointmentEdit'\nimport OrganizationAppointmentCategories from './components/organization/appointment_categories/OrganizationAppointmentCategories'\nimport OrganizationAppointmentCategoryAdd from './components/organization/appointment_categories/OrganizationAppointmentCategoryAdd'\nimport OrganizationAppointmentCategoryEdit from './components/organization/appointment_categories/OrganizationAppointmentCategoryEdit'\nimport OrganizationAppointmentPrices from './components/organization/appointment_categories/appointments/prices/OrganizationAppointmentPrices'\nimport OrganizationAppointmentPriceAdd from './components/organization/appointment_categories/appointments/prices/OrganizationAppointmentPriceAdd'\nimport OrganizationAppointmentPriceEdit from './components/organization/appointment_categories/appointments/prices/OrganizationAppointmentPriceEdit'\nimport OrganizationClasspasses from './components/organization/classpasses/OrganizationClasspasses'\nimport OrganizationClasspassAdd from './components/organization/classpasses/OrganizationClasspassAdd'\nimport OrganizationClasspassEdit from './components/organization/classpasses/OrganizationClasspassEdit'\nimport OrganizationClasspassesGroups from './components/organization/classpasses_groups/OrganizationClasspassesGroups'\nimport OrganizationClasspassesGroupAdd from './components/organization/classpasses_groups/OrganizationClasspassesGroupAdd'\nimport OrganizationClasspassesGroupEdit from './components/organization/classpasses_groups/OrganizationClasspassesGroupEdit'\nimport OrganizationClasspassesGroupEditPasses from './components/organization/classpasses_groups/OrganizationClasspassesGroupEditPasses'\nimport OrganizationClasstypes from './components/organization/classtypes/OrganizationClasstypes'\nimport OrganizationClasstypeAdd from './components/organization/classtypes/OrganizationClasstypeAdd'\nimport OrganizationClasstypeEdit from './components/organization/classtypes/OrganizationClasstypeEdit'\nimport OrganizationClasstypeEditImage from './components/organization/classtypes/OrganizationClasstypeEditImage'\nimport OrganizationDiscoveries from './components/organization/discovery/OrganizationDiscoveries'\nimport OrganizationDiscoveryAdd from './components/organization/discovery/OrganizationDiscoveryAdd'\nimport OrganizationDiscoveryEdit from './components/organization/discovery/OrganizationDiscoveryEdit'\nimport OrganizationDocuments from './components/organization/organization/documents/OrganizationDocuments'\nimport OrganizationListDocuments from './components/organization/organization/documents/OrganizationListDocuments'\nimport OrganizationDocumentAdd from './components/organization/organization/documents/OrganizationDocumentAdd'\nimport OrganizationDocumentEdit from './components/organization/organization/documents/OrganizationDocumentEdit'\nimport OrganizationLanguages from './components/organization/languages/OrganizationLanguages'\nimport OrganizationLanguageAdd from './components/organization/languages/OrganizationLanguageAdd'\nimport OrganizationLanguageEdit from './components/organization/languages/OrganizationLanguageEdit'\nimport OrganizationLocations from './components/organization/locations/OrganizationLocations'\nimport OrganizationLocationAdd from './components/organization/locations/OrganizationLocationAdd'\nimport OrganizationLocationEdit from './components/organization/locations/OrganizationLocationEdit'\nimport OrganizationLocationRooms from './components/organization/locations/rooms/OrganizationLocationRooms'\nimport OrganizationLocationRoomAdd from './components/organization/locations/rooms/OrganizationLocationRoomAdd'\nimport OrganizationLocationRoomEdit from './components/organization/locations/rooms/OrganizationLocationRoomEdit'\nimport OrganizationLevels from './components/organization/levels/OrganizationLevels'\nimport OrganizationLevelAdd from './components/organization/levels/OrganizationLevelAdd'\nimport OrganizationLevelEdit from './components/organization/levels/OrganizationLevelEdit'\nimport OrganizationMemberships from './components/organization/memberships/OrganizationMemberships'\nimport OrganizationMembershipAdd from './components/organization/memberships/OrganizationMembershipAdd'\nimport OrganizationMembershipEdit from './components/organization/memberships/OrganizationMembershipEdit'\nimport OrganizationSubscriptions from './components/organization/subscriptions/OrganizationSubscriptions'\nimport OrganizationSubscriptionAdd from './components/organization/subscriptions/OrganizationSubscriptionAdd'\nimport OrganizationSubscriptionEdit from './components/organization/subscriptions/OrganizationSubscriptionEdit'\nimport OrganizationSubscriptionsGroups from './components/organization/subscriptions_groups/OrganizationSubscriptionsGroups'\nimport OrganizationSubscriptionsGroupAdd from './components/organization/subscriptions_groups/OrganizationSubscriptionsGroupAdd'\nimport OrganizationSubscriptionsGroupEdit from './components/organization/subscriptions_groups/OrganizationSubscriptionsGroupEdit'\nimport OrganizationSubscriptionsGroupEditSubscriptions from './components/organization/subscriptions_groups/OrganizationSubscriptionsGroupEditSubscriptions'\nimport OrganizationSubscriptionsPrices from './components/organization/subscriptions/prices/OrganizationSubscriptionsPrices'\nimport OrganizationSubscriptionPriceAdd from './components/organization/subscriptions/prices/OrganizationSubscriptionPriceAdd'\nimport OrganizationSubscriptionPriceEdit from './components/organization/subscriptions/prices/OrganizationSubscriptionPriceEdit'\n\nimport RelationsHome from './components/relations/home/RelationsHome'\nimport RelationsAccounts from './components/relations/accounts/RelationsAccounts'\nimport RelationsAccountAdd from './components/relations/accounts/RelationsAccountAdd'\nimport RelationsAccountProfile from './components/relations/accounts/RelationsAccountProfile'\nimport AccountAcceptedDocuments from './components/relations/accounts/accepted_documents/AcceptedDocuments.jsx'\nimport RelationsAccountBankAccount from './components/relations/accounts/bank_accounts/RelationsAccountBankAccount'\nimport RelationsAccountBankAccountMandateAdd from './components/relations/accounts/bank_accounts/mandates/RelationsAccountBankAccountMandateAdd'\nimport RelationsAccountBankAccountMandateEdit from './components/relations/accounts/bank_accounts/mandates/RelationsAccountBankAccountMandateEdit'\nimport RelationsAccountClasses from './components/relations/accounts/classes/AccountClasses'\nimport AccountClasspasses from './components/relations/accounts/classpasses/AccountClasspasses'\nimport AccountClasspassAdd from './components/relations/accounts/classpasses/AccountClasspassAdd'\nimport AccountClasspassEdit from './components/relations/accounts/classpasses/AccountClasspassEdit'\nimport AccountFinancePaymentBatchCategoryItems from \n  './components/relations/accounts/finance_payment_batch_category_items/AccountFinancePaymentBatchCategoryItems'\nimport AccountFinancePaymentBatchCategoryItemAdd from \n'./components/relations/accounts/finance_payment_batch_category_items/AccountFinancePaymentBatchCategoryItemAdd'\nimport AccountFinancePaymentBatchCategoryItemEdit from \n'./components/relations/accounts/finance_payment_batch_category_items/AccountFinancePaymentBatchCategoryItemEdit'\nimport AccountInvoices from './components/relations/accounts/invoices/AccountInvoices'\nimport AccountInvoiceAdd from './components/relations/accounts/invoices/AccountInvoiceAdd'\nimport AccountMemberships from './components/relations/accounts/memberships/AccountMemberships'\nimport AccountMembershipAdd from './components/relations/accounts/memberships/AccountMembershipAdd'\nimport AccountMembershipEdit from './components/relations/accounts/memberships/AccountMembershipEdit'\nimport AccountNotes from './components/relations/accounts/notes/AccountNotes.jsx'\nimport AccountNoteAdd from './components/relations/accounts/notes/AccountNoteAdd.jsx'\nimport AccountNoteEdit from './components/relations/accounts/notes/AccountNoteEdit.jsx'\nimport AccountOrders from './components/relations/accounts/orders/AccountOrders'\nimport AccountScheduleEventTickets from './components/relations/accounts/schedule_event_tickets/AccountScheduleEventTickets'\nimport AccountSubscriptions from './components/relations/accounts/subscriptions/AccountSubscriptions'\nimport AccountSubscriptionAdd from './components/relations/accounts/subscriptions/AccountSubscriptionAdd'\nimport AccountSubscriptionEdit from './components/relations/accounts/subscriptions/edit/AccountSubscriptionEdit'\nimport AccountSubscriptionEditAltPrices from './components/relations/accounts/subscriptions/edit/alt_prices/AccountSubscriptionEditAltPrices'\nimport AccountSubscriptionEditAltPriceAdd from './components/relations/accounts/subscriptions/edit/alt_prices/AccountSubscriptionEditAltPriceAdd'\nimport AccountSubscriptionEditAltPriceEdit from './components/relations/accounts/subscriptions/edit/alt_prices/AccountSubscriptionEditAltPriceEdit'\nimport AccountSubscriptionEditBlocks from './components/relations/accounts/subscriptions/edit/blocks/AccountSubscriptionEditBlocks'\nimport AccountSubscriptionEditBlockAdd from './components/relations/accounts/subscriptions/edit/blocks/AccountSubscriptionEditBlockAdd'\nimport AccountSubscriptionEditBlockEdit from './components/relations/accounts/subscriptions/edit/blocks/AccountSubscriptionEditBlockEdit'\nimport AccountSubscriptionEditCredits from './components/relations/accounts/subscriptions/edit/credits/AccountSubscriptionEditCredits'\nimport AccountSubscriptionEditCreditAdd from './components/relations/accounts/subscriptions/edit/credits/AccountSubscriptionEditCreditAdd'\nimport AccountSubscriptionEditCreditEdit from './components/relations/accounts/subscriptions/edit/credits/AccountSubscriptionEditCreditEdit'\nimport AccountSubscriptionEditInvoices from './components/relations/accounts/subscriptions/edit/invoices/AccountSubscriptionEditInvoices'\nimport AccountSubscriptionEditInvoiceAdd from './components/relations/accounts/subscriptions/edit/invoices/AccountSubscriptionEditInvoiceAdd'\nimport AccountSubscriptionEditPauses from './components/relations/accounts/subscriptions/edit/pauses/AccountSubscriptionEditPauses'\nimport AccountSubscriptionEditPauseAdd from './components/relations/accounts/subscriptions/edit/pauses/AccountSubscriptionEditPauseAdd'\nimport AccountSubscriptionEditPauseEdit from './components/relations/accounts/subscriptions/edit/pauses/AccountSubscriptionEditPauseEdit'\nimport RelationsAccountTeacherProfile from './components/relations/accounts/teacher_profile/RelationsAccountTeacherProfile'\nimport RelationsB2B from './components/relations/b2b/RelationsB2B'\nimport RelationsB2BAdd from './components/relations/b2b/RelationsB2BAdd.jsx'\nimport RelationsB2BEdit from './components/relations/b2b/RelationsB2BEdit.jsx'\n\nimport ScheduleHome from './components/schedule/home/ScheduleHome'\nimport ScheduleAppointments from './components/schedule/appointments/ScheduleAppointments'\nimport ScheduleAppointmentAdd from './components/schedule/appointments/ScheduleAppointmentAdd'\nimport ScheduleAppointmentEditAll from './components/schedule/appointments/all/edit/ScheduleAppointmentEditAll'\nimport ScheduleClasses from './components/schedule/classes/ScheduleClasses'\nimport ScheduleClassAdd from './components/schedule/classes/ScheduleClassAdd'\nimport ScheduleClassEditAll from './components/schedule/classes/all/edit/ScheduleClassEditAll'\nimport ScheduleClassClasspasses from './components/schedule/classes/all/classpasses/ScheduleClassClasspasses'\nimport ScheduleClassSubscriptions from './components/schedule/classes/all/subscriptions/ScheduleClassSubscriptions'\nimport ScheduleClassTeachers from './components/schedule/classes/all/teachers/ScheduleClassTeachers'\nimport ScheduleClassTeacherAdd from './components/schedule/classes/all/teachers/ScheduleClassTeacherAdd'\nimport ScheduleClassTeacherEdit from './components/schedule/classes/all/teachers/ScheduleClassTeacherEdit'\nimport ScheduleClassAttendance from './components/schedule/classes/class/attendance/ScheduleClassAttendance'\nimport ScheduleClassBook from './components/schedule/classes/class/book/ScheduleClassBook'\nimport ScheduleClassEdit from './components/schedule/classes/class/edit/ScheduleClassEdit'\nimport ScheduleClassPrices from './components/schedule/classes/all/prices/ScheduleClassPrices'\nimport ScheduleClassPriceAdd from './components/schedule/classes/all/prices/ScheduleClassPriceAdd'\nimport ScheduleClassPriceEdit from './components/schedule/classes/all/prices/ScheduleClassPriceEdit'\nimport ScheduleEvents from './components/schedule/events/ScheduleEvents'\nimport ScheduleEventAdd from './components/schedule/events/ScheduleEventAdd'\nimport ScheduleEventEdit from './components/schedule/events/edit/ScheduleEventEdit'\nimport ScheduleEventActivities from './components/schedule/events/activities/ScheduleEventActivities'\nimport ScheduleEventActivityAdd from './components/schedule/events/activities/ScheduleEventActivityAdd'\nimport ScheduleEventActivityEdit from './components/schedule/events/activities/ScheduleEventActivityEdit'\nimport ScheduleEventActivityAttendance from './components/schedule/events/activities/attendance/ScheduleEventActivityAttendance'\nimport ScheduleEventEarlybirds from './components/schedule/events/earlybirds/ScheduleEventEarlybirds'\nimport ScheduleEventEarlybirdAdd from './components/schedule/events/earlybirds/ScheduleEventEarlybirdAdd'\nimport ScheduleEventEarlybirdEdit from './components/schedule/events/earlybirds/ScheduleEventEarlybirdEdit'\nimport ScheduleEventMedia from './components/schedule/events/media/ScheduleEventMedia'\nimport ScheduleEventMediaAdd from './components/schedule/events/media/ScheduleEventMediaAdd'\nimport ScheduleEventMediaEdit from './components/schedule/events/media/ScheduleEventMediaEdit'\nimport ScheduleEventTickets from './components/schedule/events/tickets/ScheduleEventTickets'\nimport ScheduleEventTicketAdd from './components/schedule/events/tickets/ScheduleEventTicketAdd'\nimport ScheduleEventTicketEdit from './components/schedule/events/tickets/ScheduleEventTicketEdit'\nimport ScheduleEventTicketEditActivities from './components/schedule/events/tickets/activities/ScheduleEventTicketEditActivities'\nimport ScheduleEventTicketEditCustomers from './components/schedule/events/tickets/customers/ScheduleEventTicketEditCustomers'\n\nimport SelfCheckinCheckin from './components/selfcheckin/Checkin/Checkin'\nimport SelfCheckinBookingOptions from './components/selfcheckin/BookingOptions/BookingOptions'\nimport SelfCheckinLocations from './components/selfcheckin/Locations/Locations'\nimport SelfCheckinLocationClasses from './components/selfcheckin/LocationClasses/LocationClasses'\n\nimport SettingsAbout from './components/settings/about/SettingsAbout'\nimport SettingsFinanceBankAccounts from './components/settings/finance/bank_accounts/SettingsFinanceBankAccounts'\nimport SettingsFinanceCurrency from './components/settings/finance/currency/SettingsFinanceCurrency'\nimport SettingsGeneralDateTime from './components/settings/general/date_time/SettingsGeneralDateTime'\nimport SettingsGeneralSystem from './components/settings/general/system/SettingsGeneralSystem'\nimport SettingsHome from './components/settings/home/SettingsHome'\nimport SettingsIntegrationMollie from './components/settings/integration/mollie/SettingsIntegrationMollie'\nimport SettingsMailTemplates from './components/settings/mail/SettingsMailTemplates'\nimport SettingsMailTemplateEdit from './components/settings/mail/SettingsMailTemplateEdit'\nimport SettingsShopFeatures from './components/settings/shop/features/SettingsShopFeatures'\nimport SettingsWorkflowClassBooking from './components/settings/workflow/class_booking/SettingsWorkflowClassBooking'\n\nimport ShopAccountHome from './components/shop/account/home/ShopAccountHome'\nimport ShopAccountClassCancel from './components/shop/account/class_cancel/ShopAccountClassCancel'\nimport ShopAccountClassInfo from './components/shop/account/class_info/ShopAccountClassInfo'\nimport ShopAccountClasspasses from './components/shop/account/classpasses/ShopAccountClasspasses'\nimport ShopAccountEventTickets from './components/shop/account/event_tickets/ShopAccountEventTickets'\nimport ShopAccountInvoices from './components/shop/account/invoices/ShopAccountInvoices'\nimport ShopAccountOrders from './components/shop/account/orders/ShopAccountOrders'\nimport ShopAccountProfile from './components/shop/account/profile/ShopAccountProfile'\nimport ShopAccountSubscriptions from './components/shop/account/subscriptions/ShopAccountSubscriptions'\nimport ShopClassBook from './components/shop/classes/book/ShopClassBook'\nimport ShopClassBooked from './components/shop/classes/booked/ShopClassBooked'\nimport ShopClassesSchedule from './components/shop/classes/schedule/ShopClassesSchedule'\nimport ShopContact from './components/shop/contact/ShopContact'\nimport ShopEvents from './components/shop/events/ShopEvents'\nimport ShopEvent from './components/shop/event/ShopEvent'\nimport ShopEventTicket from './components/shop/event_ticket/ShopEventTicket'\nimport ShopHome from './components/shop/home/ShopHome'\nimport ShopCheckoutPayment from './components/shop/checkout/payment/ShopCheckoutPayment'\nimport ShopCheckoutComplete from './components/shop/checkout/complete/ShopCheckoutComplete'\nimport ShopClasses from './components/shop/account/classes/ShopAccountClasses'\nimport ShopClasspasses from './components/shop/classpasses/ShopClasspasses'\nimport ShopClasspass from './components/shop/classpass/ShopClasspass'\nimport ShopSubscriptions from './components/shop/subscriptions/ShopSubscriptions'\nimport ShopSubscription from './components/shop/subscription/ShopSubscription'\n\nimport UserChangePassword from './components/user/password/UserPasswordChange'\nimport UserLogin from './components/user/login/UserLogin'\nimport UserLoginRequired from './components/user/login/UserLoginRequired'\nimport UserLogout from './components/user/login/UserLogout'\nimport UserSessionExpired from './components/user/session/UserSessionExpired'\nimport UserWelcome from './components/user/welcome/UserWelcome'\n\n\nimport Error404 from \"./components/Error404\"\n\nimport CSLS from \"./tools/cs_local_storage\"\nimport { CSAuth } from './tools/authentication'\n\n\nfunction SetCurrentUrlAsNext() {\n  console.log(\"Storing current location as next in local storage\")\n  const currentUrl = window.location.href\n  const next = currentUrl.split(\"#\")[1]\n  console.log(next)\n  localStorage.setItem(CSLS.AUTH_LOGIN_NEXT, next)\n}\n\n\nconst PrivateRoute = ({ component: Component, ...rest }) => {\n  const [doTokenRefresh] = useMutation(TOKEN_REFRESH)\n  let authTokenExpired = false\n  console.log(rest.path)\n\n  const ContinueAsYouAre = <Route {...rest} render={(props) => ( <Component {...props} /> )} />\n  const LoginRequired = <Route {...rest} render={(props) => ( <Redirect to='/user/login/required' /> )} />\n  const SessionExpired = <Route {...rest} render={(props) => ( <Redirect to='/user/session/expired' /> )} />\n  \n  // Check expiration\n  const tokenExp = localStorage.getItem(CSLS.AUTH_TOKEN_EXP)\n  if ((new Date() / 1000) >= tokenExp) {\n    authTokenExpired = true\n  }\n\n  if (authTokenExpired) {\n    const refreshTokenExp = localStorage.getItem(CSLS.AUTH_REFRESH_TOKEN_EXP)\n    if (refreshTokenExp == null) {\n      SetCurrentUrlAsNext()\n      \n      return LoginRequired\n    } else if ((new Date() / 1000) >= refreshTokenExp) {\n      console.log(\"refresh token expired or not found\")\n      console.log(new Date() / 1000)\n      console.log(refreshTokenExp)\n      SetCurrentUrlAsNext()\n\n      return SessionExpired\n    } else {\n      // Refresh token\n      console.log(\"auth token expired\")\n      console.log(new Date() / 1000)\n      console.log(refreshTokenExp)\n\n      doTokenRefresh().then(({ data }) => {\n        console.log('got refresh data', data)\n        CSAuth.updateTokenInfo(data.refreshToken)\n        return ContinueAsYouAre\n      }).catch((error) => {\n        toast.error('general.toast_server_error' + ': ' +  error, {\n          position: toast.POSITION.BOTTOM_RIGHT\n        })\n        console.log('there was an error refreshing the token', error) \n        SetCurrentUrlAsNext()\n        console.log(\"REDIRECT BACK TO LOGIN\")\n        window.location.href = \"/#/user/login\"\n        window.location.reload()\n      })\n    }\n  } else {\n    return ContinueAsYouAre\n  }\n  return null\n}\n\n\nfunction AppRoot({ t }) {\n  const { loading: loadingAppSettings, error: errorAppSettings, data: dataAppSettings } = useQuery(GET_APP_SETTINGS_QUERY)\n  const { loading: loadingOrganization, error: errorOrganization, data: dataOrganization } = useQuery(GET_ORGANIZATION_QUERY, {\n    variables: {id: \"T3JnYW5pemF0aW9uTm9kZToxMDA=\"}\n  })\n\n  if (loadingAppSettings || loadingOrganization) return t('general.loading_with_dots')\n  if (errorAppSettings || errorOrganization) return (\n    <div>\n      { t('settings.error_loading') } <br />\n      { errorAppSettings.message } <br /><br />\n      { errorOrganization.message}\n    </div>\n  )\n\n  // Register \"US\" locale for moment\n  // moment.locale('en-US')\n  let appSettings = dataAppSettings.appSettings\n  console.log(appSettings)\n  let organization = dataOrganization.organization\n  console.log(organization)\n\n  return (\n    <AppSettingsProvider value={appSettings}>\n      <OrganizationProvider value={organization}>\n        <HashRouter>\n          <Switch>\n            {/* BACKEND HOME */}\n            <PrivateRoute exact path=\"/backend\" component={HomeHome} />\n\n            {/* AUTOMATION */}\n            <PrivateRoute exact path=\"/automation\" component={AutomationHome} />\n            <PrivateRoute exact path=\"/automation/account/subscriptions/credits\" \n                                component={AutomationAccountSubscriptionCredits} />\n            <PrivateRoute exact path=\"/automation/account/subscriptions/credits/add\" \n                                component={AutomationAccountSubscriptionCreditAdd} />\n            <PrivateRoute exact path=\"/automation/account/subscriptions/invoices\" \n                                component={AutomationAccountSubscriptionInvoices} />    \n            <PrivateRoute exact path=\"/automation/account/subscriptions/invoices/add\" \n                                component={AutomationAccountSubscriptionInvoicesAdd} />    \n            <PrivateRoute exact path=\"/automation/account/subscriptions/mollie_collections\" \n                                component={AutomationAccountSubscriptionMollieCollections} />\n            <PrivateRoute exact path=\"/automation/account/subscriptions/mollie_collections/add\" \n                                component={AutomationAccountSubscriptionMollieCollectionAdd} />\n\n            \n            {/* FINANCE */}\n            <PrivateRoute exact path=\"/finance\" component={FinanceHome} />\n            <PrivateRoute exact path=\"/finance/costcenters\" component={FinanceCostCenters} />\n            <PrivateRoute exact path=\"/finance/costcenters/add\" component={FinanceCostCenterAdd} />\n            <PrivateRoute exact path=\"/finance/costcenters/edit/:id\" component={FinanceCostCenterEdit} />\n            <PrivateRoute exact path=\"/finance/invoices\" component={FinanceInvoices} />\n            <PrivateRoute exact path=\"/finance/invoices/edit/:id\" component={FinanceInvoiceEdit} />\n            <PrivateRoute exact path=\"/finance/invoices/groups\" component={FinanceInvoiceGroups} />\n            <PrivateRoute exact path=\"/finance/invoices/groups/add\" component={FinanceInvoiceGroupAdd} />\n            <PrivateRoute exact path=\"/finance/invoices/groups/edit/:id\" component={FinanceInvoiceGroupEdit} />\n            <PrivateRoute exact path=\"/finance/invoices/groups/defaults\" component={FinanceInvoiceGroupDefaults} />\n            <PrivateRoute exact path=\"/finance/invoices/:invoice_id/payment/add\" component={FinanceInvoicePaymentAdd} />\n            <PrivateRoute exact path=\"/finance/invoices/:invoice_id/payment/edit/:id\" component={FinanceInvoicePaymentEdit} />\n            <PrivateRoute exact path=\"/finance/glaccounts\" component={FinanceGLAccounts} />\n            <PrivateRoute exact path=\"/finance/glaccounts/add\" component={FinanceGLAccountAdd} />\n            <PrivateRoute exact path=\"/finance/glaccounts/edit/:id\" component={FinanceGLAccountEdit} />\n            <PrivateRoute exact path=\"/finance/orders\" component={FinanceOrders} />\n            <PrivateRoute exact path=\"/finance/orders/edit/:id\" component={FinanceOrderEdit} />\n            <PrivateRoute exact path=\"/finance/paymentbatches/:batch_type\" component={FinancePaymentBatches} />\n            <PrivateRoute exact path=\"/finance/paymentbatches/:batch_type/add_what\" component={FinancePaymentBatchAddWhat} />\n            <PrivateRoute exact path=\"/finance/paymentbatches/:batch_type/view/:id\" component={FinancePaymentBatchView} />\n            <PrivateRoute exact path=\"/finance/paymentbatches/:batch_type/add/:category_type\" component={FinancePaymentCollectionBatchAdd} />\n            <PrivateRoute exact path=\"/finance/paymentbatches/:batch_type/edit/:id\" component={FinancePaymentCollectionBatchEdit} />\n            <PrivateRoute exact path=\"/finance/paymentbatchcategories\" component={FinancePaymentBatchCategories} />\n            <PrivateRoute exact path=\"/finance/paymentbatchcategories/add\" component={FinancePaymentBatchCategoryAdd} />\n            <PrivateRoute exact path=\"/finance/paymentbatchcategories/edit/:id\" component={FinancePaymentBatchCategoryEdit} />\n            <PrivateRoute exact path=\"/finance/paymentmethods\" component={FinancePaymentMethods} />\n            <PrivateRoute exact path=\"/finance/paymentmethods/add\" component={FinancePaymentMethodAdd} />\n            <PrivateRoute exact path=\"/finance/paymentmethods/edit/:id\" component={FinancePaymentMethodEdit} />\n            <PrivateRoute exact path=\"/finance/taxrates\" component={FinanceTaxRates} />\n            <PrivateRoute exact path=\"/finance/taxrates/add\" component={FinanceTaxRatesAdd} />\n            <PrivateRoute exact path=\"/finance/taxrates/edit/:id\" component={FinanceTaxRatesEdit} />\n            \n            {/* ORGANIZATION */}\n            <PrivateRoute exact path=\"/organization\" component={OrganizationHome} />\n            <PrivateRoute exact path=\"/organization/edit/:id\" component={OrganizationEdit} />\n            <PrivateRoute exact path=\"/organization/edit/:id/branding\" component={OrganizationBranding} />\n            <PrivateRoute exact path=\"/organization/edit/:id/branding/:update_field\" component={OrganizationBrandingEdit} />\n            <PrivateRoute exact path=\"/organization/documents/:organization_id\" component={OrganizationDocuments} />\n            <PrivateRoute exact path=\"/organization/documents/:organization_id/:document_type\" component={OrganizationListDocuments} />\n            <PrivateRoute exact path=\"/organization/documents/:organization_id/:document_type/add\" component={OrganizationDocumentAdd} />\n            <PrivateRoute exact path=\"/organization/documents/:organization_id/:document_type/edit/:id\" component={OrganizationDocumentEdit} />\n            <PrivateRoute exact path=\"/organization/announcements\" component={OrganizationAnnouncements} />\n            <PrivateRoute exact path=\"/organization/announcements/add\" component={OrganizationAnnouncementAdd} />\n            <PrivateRoute exact path=\"/organization/announcements/edit/:id\" component={OrganizationAnnouncementEdit} />\n            <PrivateRoute exact path=\"/organization/appointment_categories\" component={OrganizationAppointmentCategories} />\n            <PrivateRoute exact path=\"/organization/appointment_categories/add\" component={OrganizationAppointmentCategoryAdd} />\n            <PrivateRoute exact path=\"/organization/appointment_categories/edit/:id\" component={OrganizationAppointmentCategoryEdit} />\n            <PrivateRoute exact path=\"/organization/appointment_categories/:category_id/appointments\" component={OrganizationAppointments} />\n            <PrivateRoute exact path=\"/organization/appointment_categories/:category_id/appointments/add/\" component={OrganizationAppointmentAdd} />\n            <PrivateRoute exact path=\"/organization/appointment_categories/:category_id/appointments/edit/:id\" component={OrganizationAppointmentEdit} />\n            <PrivateRoute exact path=\"/organization/appointment_categories/:category_id/appointments/prices/:appointment_id\" \n                  component={OrganizationAppointmentPrices} />\n            <PrivateRoute exact path=\"/organization/appointment_categories/:category_id/appointments/prices/:appointment_id/add\" \n                  component={OrganizationAppointmentPriceAdd} />\n            <PrivateRoute exact path=\"/organization/appointment_categories/:category_id/appointments/prices/:appointment_id/edit/:id\" \n                  component={OrganizationAppointmentPriceEdit} />\n            <PrivateRoute exact path=\"/organization/classpasses\" component={OrganizationClasspasses} />\n            <PrivateRoute exact path=\"/organization/classpasses/add\" component={OrganizationClasspassAdd} />\n            <PrivateRoute exact path=\"/organization/classpasses/edit/:id\" component={OrganizationClasspassEdit} />    \n            <PrivateRoute exact path=\"/organization/classpasses/groups\" component={OrganizationClasspassesGroups} />\n            <PrivateRoute exact path=\"/organization/classpasses/groups/add\" component={OrganizationClasspassesGroupAdd} />\n            <PrivateRoute exact path=\"/organization/classpasses/groups/edit/:id\" component={OrganizationClasspassesGroupEdit} />\n            <PrivateRoute exact path=\"/organization/classpasses/groups/edit/passes/:id\" component={OrganizationClasspassesGroupEditPasses} />\n            <PrivateRoute exact path=\"/organization/classtypes\" component={OrganizationClasstypes} />\n            <PrivateRoute exact path=\"/organization/classtypes/add\" component={OrganizationClasstypeAdd} />\n            <PrivateRoute exact path=\"/organization/classtypes/edit/:id\" component={OrganizationClasstypeEdit} />\n            <PrivateRoute exact path=\"/organization/classtypes/edit_image/:id\" component={OrganizationClasstypeEditImage} />\n            <PrivateRoute exact path=\"/organization/discoveries\" component={OrganizationDiscoveries} />\n            <PrivateRoute exact path=\"/organization/discoveries/add\" component={OrganizationDiscoveryAdd} /> \n            <PrivateRoute exact path=\"/organization/discoveries/edit/:id\" component={OrganizationDiscoveryEdit} /> \n            <PrivateRoute exact path=\"/organization/languages\" component={OrganizationLanguages} />\n            <PrivateRoute exact path=\"/organization/languages/add\" component={OrganizationLanguageAdd} />\n            <PrivateRoute exact path=\"/organization/languages/edit/:id\" component={OrganizationLanguageEdit} />\n            <PrivateRoute exact path=\"/organization/levels\" component={OrganizationLevels} />\n            <PrivateRoute exact path=\"/organization/levels/add\" component={OrganizationLevelAdd} />\n            <PrivateRoute exact path=\"/organization/levels/edit/:id\" component={OrganizationLevelEdit} />\n            <PrivateRoute exact path=\"/organization/locations\" component={OrganizationLocations} />\n            <PrivateRoute exact path=\"/organization/locations/add\" component={OrganizationLocationAdd} />\n            <PrivateRoute exact path=\"/organization/locations/edit/:id\" component={OrganizationLocationEdit} />\n            <PrivateRoute exact path=\"/organization/locations/rooms/:location_id\" component={OrganizationLocationRooms} />\n            <PrivateRoute exact path=\"/organization/locations/rooms/add/:location_id\" component={OrganizationLocationRoomAdd} />\n            <PrivateRoute exact path=\"/organization/locations/rooms/edit/:location_id/:id\" component={OrganizationLocationRoomEdit} />\n            <PrivateRoute exact path=\"/organization/memberships\" component={OrganizationMemberships} />\n            <PrivateRoute exact path=\"/organization/memberships/add\" component={OrganizationMembershipAdd} />\n            <PrivateRoute exact path=\"/organization/memberships/edit/:id\" component={OrganizationMembershipEdit} /> \n            <PrivateRoute exact path=\"/organization/subscriptions\" component={OrganizationSubscriptions} />\n            <PrivateRoute exact path=\"/organization/subscriptions/add\" component={OrganizationSubscriptionAdd} />\n            <PrivateRoute exact path=\"/organization/subscriptions/edit/:id\" component={OrganizationSubscriptionEdit} />\n            <PrivateRoute exact path=\"/organization/subscriptions/groups\" component={OrganizationSubscriptionsGroups} />\n            <PrivateRoute exact path=\"/organization/subscriptions/groups/add\" component={OrganizationSubscriptionsGroupAdd} />\n            <PrivateRoute exact path=\"/organization/subscriptions/groups/edit/:id\" component={OrganizationSubscriptionsGroupEdit} />\n            <PrivateRoute exact path=\"/organization/subscriptions/groups/edit/subscriptions/:id\" component={OrganizationSubscriptionsGroupEditSubscriptions} />\n            <PrivateRoute exact path=\"/organization/subscriptions/prices/:subscription_id\" component={OrganizationSubscriptionsPrices} />\n            <PrivateRoute exact path=\"/organization/subscriptions/prices/add/:subscription_id\" component={OrganizationSubscriptionPriceAdd} />\n            <PrivateRoute exact path=\"/organization/subscriptions/prices/edit/:subscription_id/:id\" component={OrganizationSubscriptionPriceEdit} />\n\n            {/* RELATIONS */}\n            <PrivateRoute exact path=\"/relations\" component={RelationsHome} />\n            <PrivateRoute exact path=\"/relations/accounts\" component={RelationsAccounts} />\n            <PrivateRoute exact path=\"/relations/accounts/add\" component={RelationsAccountAdd} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/profile\" component={RelationsAccountProfile} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/accepted_documents\" component={AccountAcceptedDocuments} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/bank_accounts\" component={RelationsAccountBankAccount} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/bank_accounts/:bank_account_id/mandates/add\" \n                          component={RelationsAccountBankAccountMandateAdd} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/bank_accounts/:bank_account_id/mandates/edit/:id\" \n                          component={RelationsAccountBankAccountMandateEdit} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/classes\" component={RelationsAccountClasses} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/classpasses\" component={AccountClasspasses} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/classpasses/add\" component={AccountClasspassAdd} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/classpasses/edit/:id\" component={AccountClasspassEdit} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/finance_payment_batch_category_items\" \n                          component={AccountFinancePaymentBatchCategoryItems} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/finance_payment_batch_category_items/add\" \n                          component={AccountFinancePaymentBatchCategoryItemAdd} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/finance_payment_batch_category_items/edit/:id\" \n                          component={AccountFinancePaymentBatchCategoryItemEdit} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/invoices\" component={AccountInvoices} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/invoices/add\" component={AccountInvoiceAdd} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/memberships\" component={AccountMemberships} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/memberships/add\" component={AccountMembershipAdd} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/memberships/edit/:id\" component={AccountMembershipEdit} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/notes\" component={AccountNotes} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/notes/add\" component={AccountNoteAdd} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/notes/edit/:id\" component={AccountNoteEdit} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/orders\" component={AccountOrders} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/event_tickets\" component={AccountScheduleEventTickets} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions\" component={AccountSubscriptions} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/add\" component={AccountSubscriptionAdd} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id\" \n                          component={AccountSubscriptionEdit} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id/alt_prices\" \n                          component={AccountSubscriptionEditAltPrices} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id/alt_prices/add\" \n                          component={AccountSubscriptionEditAltPriceAdd} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id/alt_prices/edit/:id\" \n                          component={AccountSubscriptionEditAltPriceEdit} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id/blocks\" component={AccountSubscriptionEditBlocks} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id/blocks/add\" component={AccountSubscriptionEditBlockAdd} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id/blocks/edit/:id\" \n                          component={AccountSubscriptionEditBlockEdit} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id/credits\" component={AccountSubscriptionEditCredits} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id/credits/add\" component={AccountSubscriptionEditCreditAdd} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id/credits/edit/:id\" \n                          component={AccountSubscriptionEditCreditEdit} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id/invoices\" \n              component={AccountSubscriptionEditInvoices} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id/invoices/add\" \n              component={AccountSubscriptionEditInvoiceAdd} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id/pauses\" component={AccountSubscriptionEditPauses} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id/pauses/add\" component={AccountSubscriptionEditPauseAdd} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/subscriptions/edit/:subscription_id/pauses/edit/:id\" \n                          component={AccountSubscriptionEditPauseEdit} />\n            <PrivateRoute exact path=\"/relations/accounts/:account_id/teacher_profile\" component={RelationsAccountTeacherProfile} />\n            <PrivateRoute exact path=\"/relations/b2b\" component={RelationsB2B} />\n            <PrivateRoute exact path=\"/relations/b2b/add\" component={RelationsB2BAdd} />\n            <PrivateRoute exact path=\"/relations/b2b/:business_id/edit\" component={RelationsB2BEdit} />\n\n            {/* SCHEDULE */}\n            <PrivateRoute exact path=\"/schedule\" component={ScheduleHome} />\n            <PrivateRoute exact path=\"/schedule/appointments\" component={ScheduleAppointments} />\n            <PrivateRoute exact path=\"/schedule/appointments/add\" component={ScheduleAppointmentAdd} />\n            <PrivateRoute exact path=\"/schedule/appointments/all/edit/:appointment_id\" component={ScheduleAppointmentEditAll} />\n            <PrivateRoute exact path=\"/schedule/classes\" component={ScheduleClasses} />\n            <PrivateRoute exact path=\"/schedule/classes/add/\" component={ScheduleClassAdd} />\n            <PrivateRoute exact path=\"/schedule/classes/all/edit/:class_id/\" component={ScheduleClassEditAll} />\n            <PrivateRoute exact path=\"/schedule/classes/all/classpasses/:class_id/\" component={ScheduleClassClasspasses} />\n            <PrivateRoute exact path=\"/schedule/classes/all/prices/:class_id/\" component={ScheduleClassPrices} />\n            <PrivateRoute exact path=\"/schedule/classes/all/prices/:class_id/add\" component={ScheduleClassPriceAdd} />\n            <PrivateRoute exact path=\"/schedule/classes/all/prices/:class_id/edit/:id\" component={ScheduleClassPriceEdit} />\n            <PrivateRoute exact path=\"/schedule/classes/all/subscriptions/:class_id/\" component={ScheduleClassSubscriptions} />\n            <PrivateRoute exact path=\"/schedule/classes/all/teachers/:class_id/\" component={ScheduleClassTeachers} />\n            <PrivateRoute exact path=\"/schedule/classes/all/teachers/:class_id/add\" component={ScheduleClassTeacherAdd} />\n            <PrivateRoute exact path=\"/schedule/classes/all/teachers/:class_id/edit/:id\" component={ScheduleClassTeacherEdit} />\n            <PrivateRoute exact path=\"/schedule/classes/class/attendance/:class_id/:date\" component={ScheduleClassAttendance} />\n            <PrivateRoute exact path=\"/schedule/classes/class/book/:class_id/:date/:account_id\" component={ScheduleClassBook} />\n            <PrivateRoute exact path=\"/schedule/classes/class/edit/:class_id/:date\" component={ScheduleClassEdit} />\n            <PrivateRoute exact path=\"/schedule/events\" component={ScheduleEvents} />\n            <PrivateRoute exact path=\"/schedule/events/add\" component={ScheduleEventAdd} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id\" component={ScheduleEventEdit} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/activities\" component={ScheduleEventActivities} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/activities/add\" component={ScheduleEventActivityAdd} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/activities/edit/:id\" component={ScheduleEventActivityEdit} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/activities/edit/:id/attendance\" \n                          component={ScheduleEventActivityAttendance} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/earlybirds\" component={ScheduleEventEarlybirds} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/earlybirds/add\" component={ScheduleEventEarlybirdAdd} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/earlybirds/edit/:id\" component={ScheduleEventEarlybirdEdit} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/media\" component={ScheduleEventMedia} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/media/add\" component={ScheduleEventMediaAdd} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/media/edit/:id\" component={ScheduleEventMediaEdit} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/tickets\" component={ScheduleEventTickets} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/tickets/add\" component={ScheduleEventTicketAdd} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/tickets/edit/:id\" component={ScheduleEventTicketEdit} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/tickets/edit/:id/activities\" component={ScheduleEventTicketEditActivities} />\n            <PrivateRoute exact path=\"/schedule/events/edit/:event_id/tickets/edit/:id/customers\" component={ScheduleEventTicketEditCustomers} />\n\n            {/* Insight */}\n            <PrivateRoute exact path=\"/insight\" component={InsightHome} />\n            <PrivateRoute exact path=\"/insight/classpasses\" component={InsightClasspasses} />\n            <PrivateRoute exact path=\"/insight/subscriptions\" component={InsightSubscriptions} />\n\n            {/* Self Check-in */}\n            <PrivateRoute exact path=\"/selfcheckin/checkin/:location_id/:class_id/:date\" component={SelfCheckinCheckin} />\n            <PrivateRoute exact path=\"/selfcheckin/book/:location_id/:class_id/:date/:account_id\" \n                                component={SelfCheckinBookingOptions} />\n            <PrivateRoute exact path=\"/selfcheckin\" component={SelfCheckinLocations} />\n            <PrivateRoute exact path=\"/selfcheckin/location/:location_id\" component={SelfCheckinLocationClasses} />\n\n            {/* Shop */}\n            <Route exact path = \"/\" component={ShopHome} />\n            <PrivateRoute exact path = \"/shop/account\" component={ShopAccountHome} />\n            <PrivateRoute exact path = \"/shop/account/class_cancel/:class_id/:date/:attendance_id\" \n                                component={ShopAccountClassCancel} />\n            <PrivateRoute exact path = \"/shop/account/class_info/:class_id/:date\" component={ShopAccountClassInfo} />\n            <PrivateRoute exact path = \"/shop/account/classes\" component={ShopClasses} />\n            <PrivateRoute exact path = \"/shop/account/classpasses\" component={ShopAccountClasspasses} />\n            <PrivateRoute exact path = \"/shop/account/event_tickets\" component={ShopAccountEventTickets} />\n            <PrivateRoute exact path = \"/shop/account/invoices\" component={ShopAccountInvoices} />\n            <PrivateRoute exact path = \"/shop/account/orders\" component={ShopAccountOrders} />\n            <PrivateRoute exact path = \"/shop/account/profile\" component={ShopAccountProfile} />\n            <PrivateRoute exact path = \"/shop/account/subscriptions\" component={ShopAccountSubscriptions} />\n            <PrivateRoute exact path = \"/shop/checkout/payment/:id\" component={ShopCheckoutPayment} />\n            <PrivateRoute exact path = \"/shop/checkout/complete/:id\" component={ShopCheckoutComplete} />\n            <Route exact path = \"/shop/classes\" component={ShopClassesSchedule} />\n            <PrivateRoute exact path = \"/shop/classes/book/:class_id/:date\" component={ShopClassBook} />\n            <PrivateRoute exact path = \"/shop/classes/booked/:class_id/:date\" component={ShopClassBooked} />\n            <Route exact path = \"/shop/classpasses\" component={ShopClasspasses} />\n            <Route exact path = \"/shop/classpass/:id\" component={ShopClasspass} />\n            <Route exact path = \"/shop/classpass/:id/:class_id/:date\" component={ShopClasspass} />\n            <Route exact path = \"/shop/contact\" component={ShopContact} />\n            <Route exact path = \"/shop/events\" component={ShopEvents} />\n            <Route exact path = \"/shop/events/:event_id\" component={ShopEvent} />\n            <Route exact path = \"/shop/events/:event_id/ticket/:id\" component={ShopEventTicket} />\n            <Route exact path = \"/shop/subscriptions\" component={ShopSubscriptions} />\n            <Route exact path = \"/shop/subscription/:id\" component={ShopSubscription} />\n\n            {/* Settings */}\n            <PrivateRoute exact path=\"/settings\" component={SettingsHome} />\n            <PrivateRoute exact path=\"/settings/about\" component={SettingsAbout} />\n            <PrivateRoute exact path=\"/settings/finance/bank_accounts\" component={SettingsFinanceBankAccounts} />\n            <PrivateRoute exact path=\"/settings/finance/currency\" component={SettingsFinanceCurrency} />\n            <PrivateRoute exact path=\"/settings/general/datetime\" component={SettingsGeneralDateTime} />\n            <PrivateRoute exact path=\"/settings/general/system\" component={SettingsGeneralSystem} />\n            <PrivateRoute exact path=\"/settings/integration/mollie\" component={SettingsIntegrationMollie} />\n            <PrivateRoute exact path=\"/settings/mail/templates\" component={SettingsMailTemplates} />\n            <PrivateRoute exact path=\"/settings/mail/templates/edit/:id\" component={SettingsMailTemplateEdit} />\n            <PrivateRoute exact path=\"/settings/shop/features\" component={SettingsShopFeatures} />\n            <PrivateRoute exact path=\"/settings/workflow/class_booking\" component={SettingsWorkflowClassBooking} />\n\n            {/* User */}\n            <PrivateRoute exact path=\"/user/password/change\" component={UserChangePassword} />\n            <Route exact path=\"/user/login\" component={UserLogin} />\n            <Route exact path=\"/user/login/required\" component={UserLoginRequired} />\n            <Route exact path=\"/user/logout\" component={UserLogout} />\n            <Route exact path=\"/user/session/expired\" component={UserSessionExpired} />\n            <Route exact path=\"/user/welcome\" component={UserWelcome} />\n            \n            <Route component={Error404} />\n          </Switch>\n        </HashRouter>\n      </OrganizationProvider>\n    </AppSettingsProvider>\n  )\n}\n\nexport default withTranslation()(AppRoot)\n\n","import Cookies from 'js-cookie'\nimport React from 'react'\nimport {\n  ApolloClient,\n  from,\n  createHttpLink,\n  ApolloLink,\n  InMemoryCache,\n  ApolloProvider,\n  useQuery,\n  Observable,\n  gql\n} from \"@apollo/client\";\nimport { onError } from \"@apollo/client/link/error\";\n// import ApolloClient from \"react\"\n\nimport { TOKEN_REFRESH } from \"./queries/system/auth\"\n// Import moment locale\n// import moment from 'moment'\n// import 'moment/locale/nl'\n\nimport CSLS from \"./tools/cs_local_storage\"\nimport CSEC from \"./tools/cs_error_codes\"\nimport { CSAuth } from './tools/authentication'\n\n// import Cookies from 'js-cookie'\n\n// Main app\nimport AppRoot from \"./AppRoot\"\n\n// Tabler css \nimport \"tabler-react/dist/Tabler.css\"\n// React-datepicker css\nimport \"react-datepicker/dist/react-datepicker.css\"\n// App css\nimport './App.css'\n// import { concat } from 'apollo-boost';\n\n// Register \"nl\" locale for react-datepicker\n// https://reactdatepicker.com/#example-17\n// import { registerLocale } from \"react-datepicker\"\n// import nl from 'date-fns/locale/nl';\n// registerLocale('nl', nl);\n\n// This allows <string>.trunc(x)\nString.prototype.trunc = \n  function(n){\n      return this.substr(0, n-1) + (this.length > n ? '...' : '')\n  }\n\nfunction SetCurrentUrlAsNext() {\n  console.log(\"Storing current location as next in local storage\")\n  const currentUrl = window.location.href\n  const next = currentUrl.split(\"#\")[1]\n  console.log(next)\n  localStorage.setItem(CSLS.AUTH_LOGIN_NEXT, next)\n}\n  \n\nconst errorLink = onError(({ graphQLErrors, networkError, operation, forward, response }) => {\n  if (graphQLErrors)\n    graphQLErrors.forEach(({ message, locations, path }) =>\n      console.log(\n        `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,\n      ),\n    );\n\n  if (networkError) console.log(`[Network error]: ${networkError}`);\n\n  // request size check\n  if (graphQLErrors[0].message == \"Request body exceeded settings.DATA_UPLOAD_MAX_MEMORY_SIZE.\") {\n    console.error('CHOSEN FILE EXCEEDS SIZE LIMIT')\n  }\n\n  // Token refresh / re-auth check\n  if (response) {\n    let i\n    for (i = 0; i < response.errors.length; i++) {\n      if (response.errors[i].extensions && response.errors[i].extensions.code === CSEC.USER_NOT_LOGGED_IN) {\n\n        let authTokenExpired = false\n        const tokenExp = localStorage.getItem(CSLS.AUTH_TOKEN_EXP)\n        if ((new Date() / 1000) >= tokenExp) {\n          authTokenExpired = true\n        }\n\n        console.log('token expired')\n        console.log(authTokenExpired)\n\n        if (authTokenExpired) {\n          const refreshTokenExp = localStorage.getItem(CSLS.AUTH_REFRESH_TOKEN_EXP)\n          if (refreshTokenExp == null) {\n            // User hasn't logged in before\n            SetCurrentUrlAsNext()\n            window.location.href = \"#/user/login/required\"\n            window.location.reload()\n          } else if ((new Date() / 1000) >= refreshTokenExp) {\n            // Session expired\n            SetCurrentUrlAsNext()\n            console.log(\"refresh token expired or not found\")\n            console.log(new Date() / 1000)\n            console.log(refreshTokenExp)\n      \n            window.location.href = \"#/user/session/expired\"\n            window.location.reload()\n          } else {\n            // Refresh token... no idea how this observable & subscriber stuff works... but it does :).\n            // https://stackoverflow.com/questions/50965347/how-to-execute-an-async-fetch-request-and-then-retry-last-failed-request/51321068#51321068\n            console.log(\"auth token expired\")\n            console.log(new Date() / 1000)\n            console.log(refreshTokenExp)\n\n            console.log(\"refresh token... somehow...\")\n\n            return new Observable(observer => {\n              client.mutate({\n                mutation: TOKEN_REFRESH\n              })\n                .then(({ data }) => { \n                  console.log(data)\n                  CSAuth.updateTokenInfo(data.refreshToken)\n                })\n                .then(() => {\n                  const subscriber = {\n                    next: observer.next.bind(observer),\n                    error: observer.error.bind(observer),\n                    complete: observer.complete.bind(observer)\n                  };\n\n                  // Retry last failed request\n                  forward(operation).subscribe(subscriber);\n                })\n                .catch(error => {\n                  // No refresh or client token available, we force user to login\n                  observer.error(error);\n                  SetCurrentUrlAsNext()\n                  window.location.href = \"/#/user/login\"\n                  window.location.reload()\n                });\n            })\n          }\n        } else {\n          SetCurrentUrlAsNext()\n          window.location.href = \"/#/user/login\"\n          window.location.reload()\n        }\n\n        // window.location.href = \"/#/user/login\"\n        // window.location.reload()\n      }\n    }\n  }\n});\n\n\n// Fetch CSRF Token \nlet csrftoken;\nasync function getCsrfToken() {\n    if (csrftoken) return csrftoken;\n    csrftoken = await fetch('/d/csrf/')\n        .then(response => response.json())\n        .then(data => data.csrfToken)\n    return await csrftoken\n}\n\nconst httpLink = createHttpLink({\n  uri: '/d/graphql/',\n  credentials: 'same-origin',\n  request: async (operation) => {\n    const csrftoken = await getCsrfToken();\n    Cookies.set('csrftoken', csrftoken);\n    // set the cookie 'csrftoken'\n    operation.setContext({\n        // set the 'X-CSRFToken' header to the csrftoken\n        headers: {\n            'X-CSRFToken': csrftoken,\n        },\n    })}\n});\n\nconst csrfMiddleWare = new ApolloLink(async (operation, forward) => {\n  // const csrftoken = await getCsrfToken();\n  const csrftoken = await getCsrfToken();\n  Cookies.set('csrftoken', csrftoken);\n\n  operation.setContext({\n    // set the 'X-CSRFToken' header to the csrftoken\n    headers: {\n        'X-CSRFToken': csrftoken,\n    },\n  })\n\n  return forward(operation)\n})\n\n// set up ApolloClient\nconst client = new ApolloClient({\n  link: from([csrfMiddleWare, errorLink, httpLink]),\n  cache: new InMemoryCache(),\n// },\n  // request: async operation => {\n  //   var csrftoken = Cookies.get('csrftoken');\n  //   operation.setContext({\n  //     headers: {\n  //       \"X-CSRFToken\": csrftoken ? csrftoken : ''\n  //     }\n  //   })\n  // }\n  // request: async operation => {\n  //   const token = localStorage.getItem(CSLS.AUTH_TOKEN)\n  //   operation.setContext({\n  //     headers: {\n  //       Authorization: token ? `JWT ${token}`: ''\n  //     }\n  //   })\n  // }\n})\n\n\nfunction App() {\n  // Register \"NL\" locale for moment\n  // moment.locale('en-US')\n\n  return (\n    <ApolloProvider client={client}>\n      <AppRoot />\n    </ApolloProvider>\n  )\n}\n\nexport default App\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './i18n'\nimport './index.css'\nimport \"./c3jscustom.css\"\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}